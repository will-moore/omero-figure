const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./blosc-E49GQuAK.js","./chunk-INHXZS53-D3tQiqtZ.js","./gzip-CF-9a_hd.js","./browser-B-ZyVB-j.js","./lz4-BIGKWw27.js","./zlib-CBiqHlio.js","./zstd-IvP746pw.js"])))=>i.map(i=>d[i]);
var Au=Object.defineProperty;var V1=t=>{throw TypeError(t)};var Iu=(t,e,i)=>e in t?Au(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var Vt=(t,e,i)=>Iu(t,typeof e!="symbol"?e+"":e,i),Qa=(t,e,i)=>e.has(t)||V1("Cannot "+i);var Rt=(t,e,i)=>(Qa(t,e,"read from private field"),i?i.call(t):e.get(t)),Fi=(t,e,i)=>e.has(t)?V1("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),wi=(t,e,i,n)=>(Qa(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),el=(t,e,i)=>(Qa(t,e,"access private method"),i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function i(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=i(r);fetch(r.href,o)}})();var rn="top",Mn="bottom",Nn="right",sn="left",Oa="auto",Ps=[rn,Mn,Nn,sn],cs="start",Is="end",pc="clippingParents",t1="viewport",bs="popper",gc="reference",zl=Ps.reduce(function(t,e){return t.concat([e+"-"+cs,e+"-"+Is])},[]),i1=[].concat(Ps,[Oa]).reduce(function(t,e){return t.concat([e,e+"-"+cs,e+"-"+Is])},[]),mc="beforeRead",_c="read",vc="afterRead",bc="beforeMain",yc="main",wc="afterMain",xc="beforeWrite",Ec="write",Sc="afterWrite",Tc=[mc,_c,vc,bc,yc,wc,xc,Ec,Sc];function dr(t){return t?(t.nodeName||"").toLowerCase():null}function tr(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Os(t){var e=tr(t).Element;return t instanceof e||t instanceof Element}function $n(t){var e=tr(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function n1(t){if(typeof ShadowRoot>"u")return!1;var e=tr(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Ou(t){var e=t.state;Object.keys(e.elements).forEach(function(i){var n=e.styles[i]||{},r=e.attributes[i]||{},o=e.elements[i];!$n(o)||!dr(o)||(Object.assign(o.style,n),Object.keys(r).forEach(function(a){var l=r[a];l===!1?o.removeAttribute(a):o.setAttribute(a,l===!0?"":l)}))})}function Mu(t){var e=t.state,i={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,i.popper),e.styles=i,e.elements.arrow&&Object.assign(e.elements.arrow.style,i.arrow),function(){Object.keys(e.elements).forEach(function(n){var r=e.elements[n],o=e.attributes[n]||{},a=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:i[n]),l=a.reduce(function(h,g){return h[g]="",h},{});!$n(r)||!dr(r)||(Object.assign(r.style,l),Object.keys(o).forEach(function(h){r.removeAttribute(h)}))})}}const r1={name:"applyStyles",enabled:!0,phase:"write",fn:Ou,effect:Mu,requires:["computeStyles"]};function lr(t){return t.split("-")[0]}var ls=Math.max,ma=Math.min,Ms=Math.round;function Ns(t,e){e===void 0&&(e=!1);var i=t.getBoundingClientRect(),n=1,r=1;if($n(t)&&e){var o=t.offsetHeight,a=t.offsetWidth;a>0&&(n=Ms(i.width)/a||1),o>0&&(r=Ms(i.height)/o||1)}return{width:i.width/n,height:i.height/r,top:i.top/r,right:i.right/n,bottom:i.bottom/r,left:i.left/n,x:i.left/n,y:i.top/r}}function s1(t){var e=Ns(t),i=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-i)<=1&&(i=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:i,height:n}}function kc(t,e){var i=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(i&&n1(i)){var n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Cr(t){return tr(t).getComputedStyle(t)}function Nu(t){return["table","td","th"].indexOf(dr(t))>=0}function qr(t){return((Os(t)?t.ownerDocument:t.document)||window.document).documentElement}function Ma(t){return dr(t)==="html"?t:t.assignedSlot||t.parentNode||(n1(t)?t.host:null)||qr(t)}function Y1(t){return!$n(t)||Cr(t).position==="fixed"?null:t.offsetParent}function Ru(t){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,i=navigator.userAgent.indexOf("Trident")!==-1;if(i&&$n(t)){var n=Cr(t);if(n.position==="fixed")return null}var r=Ma(t);for(n1(r)&&(r=r.host);$n(r)&&["html","body"].indexOf(dr(r))<0;){var o=Cr(r);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return r;r=r.parentNode}return null}function To(t){for(var e=tr(t),i=Y1(t);i&&Nu(i)&&Cr(i).position==="static";)i=Y1(i);return i&&(dr(i)==="html"||dr(i)==="body"&&Cr(i).position==="static")?e:i||Ru(t)||e}function o1(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function no(t,e,i){return ls(t,ma(e,i))}function zu(t,e,i){var n=no(t,e,i);return n>i?i:n}function Cc(){return{top:0,right:0,bottom:0,left:0}}function Ac(t){return Object.assign({},Cc(),t)}function Ic(t,e){return e.reduce(function(i,n){return i[n]=t,i},{})}var Fu=function(e,i){return e=typeof e=="function"?e(Object.assign({},i.rects,{placement:i.placement})):e,Ac(typeof e!="number"?e:Ic(e,Ps))};function Du(t){var e,i=t.state,n=t.name,r=t.options,o=i.elements.arrow,a=i.modifiersData.popperOffsets,l=lr(i.placement),h=o1(l),g=[sn,Nn].indexOf(l)>=0,_=g?"height":"width";if(!(!o||!a)){var x=Fu(r.padding,i),T=s1(o),M=h==="y"?rn:sn,D=h==="y"?Mn:Nn,F=i.rects.reference[_]+i.rects.reference[h]-a[h]-i.rects.popper[_],Q=a[h]-i.rects.reference[h],K=To(o),Z=K?h==="y"?K.clientHeight||0:K.clientWidth||0:0,ee=F/2-Q/2,he=x[M],pe=Z-T[_]-x[D],p=Z/2-T[_]/2+ee,H=no(he,p,pe),oe=h;i.modifiersData[n]=(e={},e[oe]=H,e.centerOffset=H-p,e)}}function Lu(t){var e=t.state,i=t.options,n=i.element,r=n===void 0?"[data-popper-arrow]":n;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||kc(e.elements.popper,r)&&(e.elements.arrow=r))}const Oc={name:"arrow",enabled:!0,phase:"main",fn:Du,effect:Lu,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Rs(t){return t.split("-")[1]}var Pu={top:"auto",right:"auto",bottom:"auto",left:"auto"};function $u(t){var e=t.x,i=t.y,n=window,r=n.devicePixelRatio||1;return{x:Ms(e*r)/r||0,y:Ms(i*r)/r||0}}function q1(t){var e,i=t.popper,n=t.popperRect,r=t.placement,o=t.variation,a=t.offsets,l=t.position,h=t.gpuAcceleration,g=t.adaptive,_=t.roundOffsets,x=t.isFixed,T=a.x,M=T===void 0?0:T,D=a.y,F=D===void 0?0:D,Q=typeof _=="function"?_({x:M,y:F}):{x:M,y:F};M=Q.x,F=Q.y;var K=a.hasOwnProperty("x"),Z=a.hasOwnProperty("y"),ee=sn,he=rn,pe=window;if(g){var p=To(i),H="clientHeight",oe="clientWidth";if(p===tr(i)&&(p=qr(i),Cr(p).position!=="static"&&l==="absolute"&&(H="scrollHeight",oe="scrollWidth")),p=p,r===rn||(r===sn||r===Nn)&&o===Is){he=Mn;var me=x&&p===pe&&pe.visualViewport?pe.visualViewport.height:p[H];F-=me-n.height,F*=h?1:-1}if(r===sn||(r===rn||r===Mn)&&o===Is){ee=Nn;var Te=x&&p===pe&&pe.visualViewport?pe.visualViewport.width:p[oe];M-=Te-n.width,M*=h?1:-1}}var Ae=Object.assign({position:l},g&&Pu),ve=_===!0?$u({x:M,y:F}):{x:M,y:F};if(M=ve.x,F=ve.y,h){var Le;return Object.assign({},Ae,(Le={},Le[he]=Z?"0":"",Le[ee]=K?"0":"",Le.transform=(pe.devicePixelRatio||1)<=1?"translate("+M+"px, "+F+"px)":"translate3d("+M+"px, "+F+"px, 0)",Le))}return Object.assign({},Ae,(e={},e[he]=Z?F+"px":"",e[ee]=K?M+"px":"",e.transform="",e))}function Bu(t){var e=t.state,i=t.options,n=i.gpuAcceleration,r=n===void 0?!0:n,o=i.adaptive,a=o===void 0?!0:o,l=i.roundOffsets,h=l===void 0?!0:l,g={placement:lr(e.placement),variation:Rs(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,q1(Object.assign({},g,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:h})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,q1(Object.assign({},g,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:h})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const a1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Bu,data:{}};var jo={passive:!0};function Wu(t){var e=t.state,i=t.instance,n=t.options,r=n.scroll,o=r===void 0?!0:r,a=n.resize,l=a===void 0?!0:a,h=tr(e.elements.popper),g=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&g.forEach(function(_){_.addEventListener("scroll",i.update,jo)}),l&&h.addEventListener("resize",i.update,jo),function(){o&&g.forEach(function(_){_.removeEventListener("scroll",i.update,jo)}),l&&h.removeEventListener("resize",i.update,jo)}}const l1={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Wu,data:{}};var Hu={left:"right",right:"left",bottom:"top",top:"bottom"};function sa(t){return t.replace(/left|right|bottom|top/g,function(e){return Hu[e]})}var ju={start:"end",end:"start"};function X1(t){return t.replace(/start|end/g,function(e){return ju[e]})}function c1(t){var e=tr(t),i=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:i,scrollTop:n}}function h1(t){return Ns(qr(t)).left+c1(t).scrollLeft}function Uu(t){var e=tr(t),i=qr(t),n=e.visualViewport,r=i.clientWidth,o=i.clientHeight,a=0,l=0;return n&&(r=n.width,o=n.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=n.offsetLeft,l=n.offsetTop)),{width:r,height:o,x:a+h1(t),y:l}}function Vu(t){var e,i=qr(t),n=c1(t),r=(e=t.ownerDocument)==null?void 0:e.body,o=ls(i.scrollWidth,i.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),a=ls(i.scrollHeight,i.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),l=-n.scrollLeft+h1(t),h=-n.scrollTop;return Cr(r||i).direction==="rtl"&&(l+=ls(i.clientWidth,r?r.clientWidth:0)-o),{width:o,height:a,x:l,y:h}}function u1(t){var e=Cr(t),i=e.overflow,n=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(i+r+n)}function Mc(t){return["html","body","#document"].indexOf(dr(t))>=0?t.ownerDocument.body:$n(t)&&u1(t)?t:Mc(Ma(t))}function ro(t,e){var i;e===void 0&&(e=[]);var n=Mc(t),r=n===((i=t.ownerDocument)==null?void 0:i.body),o=tr(n),a=r?[o].concat(o.visualViewport||[],u1(n)?n:[]):n,l=e.concat(a);return r?l:l.concat(ro(Ma(a)))}function Fl(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Yu(t){var e=Ns(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}function Z1(t,e){return e===t1?Fl(Uu(t)):Os(e)?Yu(e):Fl(Vu(qr(t)))}function qu(t){var e=ro(Ma(t)),i=["absolute","fixed"].indexOf(Cr(t).position)>=0,n=i&&$n(t)?To(t):t;return Os(n)?e.filter(function(r){return Os(r)&&kc(r,n)&&dr(r)!=="body"}):[]}function Xu(t,e,i){var n=e==="clippingParents"?qu(t):[].concat(e),r=[].concat(n,[i]),o=r[0],a=r.reduce(function(l,h){var g=Z1(t,h);return l.top=ls(g.top,l.top),l.right=ma(g.right,l.right),l.bottom=ma(g.bottom,l.bottom),l.left=ls(g.left,l.left),l},Z1(t,o));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Nc(t){var e=t.reference,i=t.element,n=t.placement,r=n?lr(n):null,o=n?Rs(n):null,a=e.x+e.width/2-i.width/2,l=e.y+e.height/2-i.height/2,h;switch(r){case rn:h={x:a,y:e.y-i.height};break;case Mn:h={x:a,y:e.y+e.height};break;case Nn:h={x:e.x+e.width,y:l};break;case sn:h={x:e.x-i.width,y:l};break;default:h={x:e.x,y:e.y}}var g=r?o1(r):null;if(g!=null){var _=g==="y"?"height":"width";switch(o){case cs:h[g]=h[g]-(e[_]/2-i[_]/2);break;case Is:h[g]=h[g]+(e[_]/2-i[_]/2);break}}return h}function zs(t,e){e===void 0&&(e={});var i=e,n=i.placement,r=n===void 0?t.placement:n,o=i.boundary,a=o===void 0?pc:o,l=i.rootBoundary,h=l===void 0?t1:l,g=i.elementContext,_=g===void 0?bs:g,x=i.altBoundary,T=x===void 0?!1:x,M=i.padding,D=M===void 0?0:M,F=Ac(typeof D!="number"?D:Ic(D,Ps)),Q=_===bs?gc:bs,K=t.rects.popper,Z=t.elements[T?Q:_],ee=Xu(Os(Z)?Z:Z.contextElement||qr(t.elements.popper),a,h),he=Ns(t.elements.reference),pe=Nc({reference:he,element:K,strategy:"absolute",placement:r}),p=Fl(Object.assign({},K,pe)),H=_===bs?p:he,oe={top:ee.top-H.top+F.top,bottom:H.bottom-ee.bottom+F.bottom,left:ee.left-H.left+F.left,right:H.right-ee.right+F.right},me=t.modifiersData.offset;if(_===bs&&me){var Te=me[r];Object.keys(oe).forEach(function(Ae){var ve=[Nn,Mn].indexOf(Ae)>=0?1:-1,Le=[rn,Mn].indexOf(Ae)>=0?"y":"x";oe[Ae]+=Te[Le]*ve})}return oe}function Zu(t,e){e===void 0&&(e={});var i=e,n=i.placement,r=i.boundary,o=i.rootBoundary,a=i.padding,l=i.flipVariations,h=i.allowedAutoPlacements,g=h===void 0?i1:h,_=Rs(n),x=_?l?zl:zl.filter(function(D){return Rs(D)===_}):Ps,T=x.filter(function(D){return g.indexOf(D)>=0});T.length===0&&(T=x);var M=T.reduce(function(D,F){return D[F]=zs(t,{placement:F,boundary:r,rootBoundary:o,padding:a})[lr(F)],D},{});return Object.keys(M).sort(function(D,F){return M[D]-M[F]})}function Gu(t){if(lr(t)===Oa)return[];var e=sa(t);return[X1(t),e,X1(e)]}function Ku(t){var e=t.state,i=t.options,n=t.name;if(!e.modifiersData[n]._skip){for(var r=i.mainAxis,o=r===void 0?!0:r,a=i.altAxis,l=a===void 0?!0:a,h=i.fallbackPlacements,g=i.padding,_=i.boundary,x=i.rootBoundary,T=i.altBoundary,M=i.flipVariations,D=M===void 0?!0:M,F=i.allowedAutoPlacements,Q=e.options.placement,K=lr(Q),Z=K===Q,ee=h||(Z||!D?[sa(Q)]:Gu(Q)),he=[Q].concat(ee).reduce(function($,B){return $.concat(lr(B)===Oa?Zu(e,{placement:B,boundary:_,rootBoundary:x,padding:g,flipVariations:D,allowedAutoPlacements:F}):B)},[]),pe=e.rects.reference,p=e.rects.popper,H=new Map,oe=!0,me=he[0],Te=0;Te<he.length;Te++){var Ae=he[Te],ve=lr(Ae),Le=Rs(Ae)===cs,We=[rn,Mn].indexOf(ve)>=0,it=We?"width":"height",Ye=zs(e,{placement:Ae,boundary:_,rootBoundary:x,altBoundary:T,padding:g}),tt=We?Le?Nn:sn:Le?Mn:rn;pe[it]>p[it]&&(tt=sa(tt));var Qe=sa(tt),st=[];if(o&&st.push(Ye[ve]<=0),l&&st.push(Ye[tt]<=0,Ye[Qe]<=0),st.every(function($){return $})){me=Ae,oe=!1;break}H.set(Ae,st)}if(oe)for(var Tt=D?3:1,N=function(B){var te=he.find(function(X){var fe=H.get(X);if(fe)return fe.slice(0,B).every(function(ae){return ae})});if(te)return me=te,"break"},O=Tt;O>0;O--){var k=N(O);if(k==="break")break}e.placement!==me&&(e.modifiersData[n]._skip=!0,e.placement=me,e.reset=!0)}}const Rc={name:"flip",enabled:!0,phase:"main",fn:Ku,requiresIfExists:["offset"],data:{_skip:!1}};function G1(t,e,i){return i===void 0&&(i={x:0,y:0}),{top:t.top-e.height-i.y,right:t.right-e.width+i.x,bottom:t.bottom-e.height+i.y,left:t.left-e.width-i.x}}function K1(t){return[rn,Nn,Mn,sn].some(function(e){return t[e]>=0})}function Ju(t){var e=t.state,i=t.name,n=e.rects.reference,r=e.rects.popper,o=e.modifiersData.preventOverflow,a=zs(e,{elementContext:"reference"}),l=zs(e,{altBoundary:!0}),h=G1(a,n),g=G1(l,r,o),_=K1(h),x=K1(g);e.modifiersData[i]={referenceClippingOffsets:h,popperEscapeOffsets:g,isReferenceHidden:_,hasPopperEscaped:x},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":_,"data-popper-escaped":x})}const zc={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Ju};function Qu(t,e,i){var n=lr(t),r=[sn,rn].indexOf(n)>=0?-1:1,o=typeof i=="function"?i(Object.assign({},e,{placement:t})):i,a=o[0],l=o[1];return a=a||0,l=(l||0)*r,[sn,Nn].indexOf(n)>=0?{x:l,y:a}:{x:a,y:l}}function ed(t){var e=t.state,i=t.options,n=t.name,r=i.offset,o=r===void 0?[0,0]:r,a=i1.reduce(function(_,x){return _[x]=Qu(x,e.rects,o),_},{}),l=a[e.placement],h=l.x,g=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=h,e.modifiersData.popperOffsets.y+=g),e.modifiersData[n]=a}const Fc={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:ed};function td(t){var e=t.state,i=t.name;e.modifiersData[i]=Nc({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const d1={name:"popperOffsets",enabled:!0,phase:"read",fn:td,data:{}};function id(t){return t==="x"?"y":"x"}function nd(t){var e=t.state,i=t.options,n=t.name,r=i.mainAxis,o=r===void 0?!0:r,a=i.altAxis,l=a===void 0?!1:a,h=i.boundary,g=i.rootBoundary,_=i.altBoundary,x=i.padding,T=i.tether,M=T===void 0?!0:T,D=i.tetherOffset,F=D===void 0?0:D,Q=zs(e,{boundary:h,rootBoundary:g,padding:x,altBoundary:_}),K=lr(e.placement),Z=Rs(e.placement),ee=!Z,he=o1(K),pe=id(he),p=e.modifiersData.popperOffsets,H=e.rects.reference,oe=e.rects.popper,me=typeof F=="function"?F(Object.assign({},e.rects,{placement:e.placement})):F,Te=typeof me=="number"?{mainAxis:me,altAxis:me}:Object.assign({mainAxis:0,altAxis:0},me),Ae=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,ve={x:0,y:0};if(p){if(o){var Le,We=he==="y"?rn:sn,it=he==="y"?Mn:Nn,Ye=he==="y"?"height":"width",tt=p[he],Qe=tt+Q[We],st=tt-Q[it],Tt=M?-oe[Ye]/2:0,N=Z===cs?H[Ye]:oe[Ye],O=Z===cs?-oe[Ye]:-H[Ye],k=e.elements.arrow,$=M&&k?s1(k):{width:0,height:0},B=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Cc(),te=B[We],X=B[it],fe=no(0,H[Ye],$[Ye]),ae=ee?H[Ye]/2-Tt-fe-te-Te.mainAxis:N-fe-te-Te.mainAxis,Ee=ee?-H[Ye]/2+Tt+fe+X+Te.mainAxis:O+fe+X+Te.mainAxis,He=e.elements.arrow&&To(e.elements.arrow),Ge=He?he==="y"?He.clientTop||0:He.clientLeft||0:0,nt=(Le=Ae==null?void 0:Ae[he])!=null?Le:0,E=tt+ae-nt-Ge,R=tt+Ee-nt,L=no(M?ma(Qe,E):Qe,tt,M?ls(st,R):st);p[he]=L,ve[he]=L-tt}if(l){var J,ue=he==="x"?rn:sn,ce=he==="x"?Mn:Nn,Oe=p[pe],et=pe==="y"?"height":"width",Ze=Oe+Q[ue],lt=Oe-Q[ce],xt=[rn,sn].indexOf(K)!==-1,ht=(J=Ae==null?void 0:Ae[pe])!=null?J:0,Ot=xt?Ze:Oe-H[et]-oe[et]-ht+Te.altAxis,qt=xt?Oe+H[et]+oe[et]-ht-Te.altAxis:lt,Zt=M&&xt?zu(Ot,Oe,qt):no(M?Ot:Ze,Oe,M?qt:lt);p[pe]=Zt,ve[pe]=Zt-Oe}e.modifiersData[n]=ve}}const Dc={name:"preventOverflow",enabled:!0,phase:"main",fn:nd,requiresIfExists:["offset"]};function rd(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function sd(t){return t===tr(t)||!$n(t)?c1(t):rd(t)}function od(t){var e=t.getBoundingClientRect(),i=Ms(e.width)/t.offsetWidth||1,n=Ms(e.height)/t.offsetHeight||1;return i!==1||n!==1}function ad(t,e,i){i===void 0&&(i=!1);var n=$n(e),r=$n(e)&&od(e),o=qr(e),a=Ns(t,r),l={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(n||!n&&!i)&&((dr(e)!=="body"||u1(o))&&(l=sd(e)),$n(e)?(h=Ns(e,!0),h.x+=e.clientLeft,h.y+=e.clientTop):o&&(h.x=h1(o))),{x:a.left+l.scrollLeft-h.x,y:a.top+l.scrollTop-h.y,width:a.width,height:a.height}}function ld(t){var e=new Map,i=new Set,n=[];t.forEach(function(o){e.set(o.name,o)});function r(o){i.add(o.name);var a=[].concat(o.requires||[],o.requiresIfExists||[]);a.forEach(function(l){if(!i.has(l)){var h=e.get(l);h&&r(h)}}),n.push(o)}return t.forEach(function(o){i.has(o.name)||r(o)}),n}function cd(t){var e=ld(t);return Tc.reduce(function(i,n){return i.concat(e.filter(function(r){return r.phase===n}))},[])}function hd(t){var e;return function(){return e||(e=new Promise(function(i){Promise.resolve().then(function(){e=void 0,i(t())})})),e}}function ud(t){var e=t.reduce(function(i,n){var r=i[n.name];return i[n.name]=r?Object.assign({},r,n,{options:Object.assign({},r.options,n.options),data:Object.assign({},r.data,n.data)}):n,i},{});return Object.keys(e).map(function(i){return e[i]})}var J1={placement:"bottom",modifiers:[],strategy:"absolute"};function Q1(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function Na(t){t===void 0&&(t={});var e=t,i=e.defaultModifiers,n=i===void 0?[]:i,r=e.defaultOptions,o=r===void 0?J1:r;return function(l,h,g){g===void 0&&(g=o);var _={placement:"bottom",orderedModifiers:[],options:Object.assign({},J1,o),modifiersData:{},elements:{reference:l,popper:h},attributes:{},styles:{}},x=[],T=!1,M={state:_,setOptions:function(K){var Z=typeof K=="function"?K(_.options):K;F(),_.options=Object.assign({},o,_.options,Z),_.scrollParents={reference:Os(l)?ro(l):l.contextElement?ro(l.contextElement):[],popper:ro(h)};var ee=cd(ud([].concat(n,_.options.modifiers)));return _.orderedModifiers=ee.filter(function(he){return he.enabled}),D(),M.update()},forceUpdate:function(){if(!T){var K=_.elements,Z=K.reference,ee=K.popper;if(Q1(Z,ee)){_.rects={reference:ad(Z,To(ee),_.options.strategy==="fixed"),popper:s1(ee)},_.reset=!1,_.placement=_.options.placement,_.orderedModifiers.forEach(function(Te){return _.modifiersData[Te.name]=Object.assign({},Te.data)});for(var he=0;he<_.orderedModifiers.length;he++){if(_.reset===!0){_.reset=!1,he=-1;continue}var pe=_.orderedModifiers[he],p=pe.fn,H=pe.options,oe=H===void 0?{}:H,me=pe.name;typeof p=="function"&&(_=p({state:_,options:oe,name:me,instance:M})||_)}}}},update:hd(function(){return new Promise(function(Q){M.forceUpdate(),Q(_)})}),destroy:function(){F(),T=!0}};if(!Q1(l,h))return M;M.setOptions(g).then(function(Q){!T&&g.onFirstUpdate&&g.onFirstUpdate(Q)});function D(){_.orderedModifiers.forEach(function(Q){var K=Q.name,Z=Q.options,ee=Z===void 0?{}:Z,he=Q.effect;if(typeof he=="function"){var pe=he({state:_,name:K,instance:M,options:ee}),p=function(){};x.push(pe||p)}})}function F(){x.forEach(function(Q){return Q()}),x=[]}return M}}var dd=Na(),fd=[l1,d1,a1,r1],pd=Na({defaultModifiers:fd}),gd=[l1,d1,a1,r1,Fc,Rc,Dc,Oc,zc],f1=Na({defaultModifiers:gd});const Lc=Object.freeze(Object.defineProperty({__proto__:null,afterMain:wc,afterRead:vc,afterWrite:Sc,applyStyles:r1,arrow:Oc,auto:Oa,basePlacements:Ps,beforeMain:bc,beforeRead:mc,beforeWrite:xc,bottom:Mn,clippingParents:pc,computeStyles:a1,createPopper:f1,createPopperBase:dd,createPopperLite:pd,detectOverflow:zs,end:Is,eventListeners:l1,flip:Rc,hide:zc,left:sn,main:yc,modifierPhases:Tc,offset:Fc,placements:i1,popper:bs,popperGenerator:Na,popperOffsets:d1,preventOverflow:Dc,read:_c,reference:gc,right:Nn,start:cs,top:rn,variationPlacements:zl,viewport:t1,write:Ec},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.2.0 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const md=1e6,_d=1e3,Dl="transitionend",vd=t=>t==null?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),bd=t=>{do t+=Math.floor(Math.random()*md);while(document.getElementById(t));return t},Pc=t=>{let e=t.getAttribute("data-bs-target");if(!e||e==="#"){let i=t.getAttribute("href");if(!i||!i.includes("#")&&!i.startsWith("."))return null;i.includes("#")&&!i.startsWith("#")&&(i=`#${i.split("#")[1]}`),e=i&&i!=="#"?i.trim():null}return e},$c=t=>{const e=Pc(t);return e&&document.querySelector(e)?e:null},Er=t=>{const e=Pc(t);return e?document.querySelector(e):null},yd=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:i}=window.getComputedStyle(t);const n=Number.parseFloat(e),r=Number.parseFloat(i);return!n&&!r?0:(e=e.split(",")[0],i=i.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(i))*_d)},Bc=t=>{t.dispatchEvent(new Event(Dl))},Sr=t=>!t||typeof t!="object"?!1:(typeof t.jquery<"u"&&(t=t[0]),typeof t.nodeType<"u"),jr=t=>Sr(t)?t.jquery?t[0]:t:typeof t=="string"&&t.length>0?document.querySelector(t):null,$s=t=>{if(!Sr(t)||t.getClientRects().length===0)return!1;const e=getComputedStyle(t).getPropertyValue("visibility")==="visible",i=t.closest("details:not([open])");if(!i)return e;if(i!==t){const n=t.closest("summary");if(n&&n.parentNode!==i||n===null)return!1}return e},Ur=t=>!t||t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("disabled")?!0:typeof t.disabled<"u"?t.disabled:t.hasAttribute("disabled")&&t.getAttribute("disabled")!=="false",Wc=t=>{if(!document.documentElement.attachShadow)return null;if(typeof t.getRootNode=="function"){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?Wc(t.parentNode):null},_a=()=>{},ko=t=>{t.offsetHeight},Hc=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,tl=[],wd=t=>{document.readyState==="loading"?(tl.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of tl)e()}),tl.push(t)):t()},Bn=()=>document.documentElement.dir==="rtl",jn=t=>{wd(()=>{const e=Hc();if(e){const i=t.NAME,n=e.fn[i];e.fn[i]=t.jQueryInterface,e.fn[i].Constructor=t,e.fn[i].noConflict=()=>(e.fn[i]=n,t.jQueryInterface)}})},xr=t=>{typeof t=="function"&&t()},jc=(t,e,i=!0)=>{if(!i){xr(t);return}const r=yd(e)+5;let o=!1;const a=({target:l})=>{l===e&&(o=!0,e.removeEventListener(Dl,a),xr(t))};e.addEventListener(Dl,a),setTimeout(()=>{o||Bc(e)},r)},p1=(t,e,i,n)=>{const r=t.length;let o=t.indexOf(e);return o===-1?!i&&n?t[r-1]:t[0]:(o+=i?1:-1,n&&(o=(o+r)%r),t[Math.max(0,Math.min(o,r-1))])},xd=/[^.]*(?=\..*)\.|.*/,Ed=/\..*/,Sd=/::\d+$/,il={};let e2=1;const Uc={mouseenter:"mouseover",mouseleave:"mouseout"},Td=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Vc(t,e){return e&&`${e}::${e2++}`||t.uidEvent||e2++}function Yc(t){const e=Vc(t);return t.uidEvent=e,il[e]=il[e]||{},il[e]}function kd(t,e){return function i(n){return g1(n,{delegateTarget:t}),i.oneOff&&je.off(t,n.type,e),e.apply(t,[n])}}function Cd(t,e,i){return function n(r){const o=t.querySelectorAll(e);for(let{target:a}=r;a&&a!==this;a=a.parentNode)for(const l of o)if(l===a)return g1(r,{delegateTarget:a}),n.oneOff&&je.off(t,r.type,e,i),i.apply(a,[r])}}function qc(t,e,i=null){return Object.values(t).find(n=>n.callable===e&&n.delegationSelector===i)}function Xc(t,e,i){const n=typeof e=="string",r=n?i:e||i;let o=Zc(t);return Td.has(o)||(o=t),[n,r,o]}function t2(t,e,i,n,r){if(typeof e!="string"||!t)return;let[o,a,l]=Xc(e,i,n);e in Uc&&(a=(D=>function(F){if(!F.relatedTarget||F.relatedTarget!==F.delegateTarget&&!F.delegateTarget.contains(F.relatedTarget))return D.call(this,F)})(a));const h=Yc(t),g=h[l]||(h[l]={}),_=qc(g,a,o?i:null);if(_){_.oneOff=_.oneOff&&r;return}const x=Vc(a,e.replace(xd,"")),T=o?Cd(t,i,a):kd(t,a);T.delegationSelector=o?i:null,T.callable=a,T.oneOff=r,T.uidEvent=x,g[x]=T,t.addEventListener(l,T,o)}function Ll(t,e,i,n,r){const o=qc(e[i],n,r);o&&(t.removeEventListener(i,o,!!r),delete e[i][o.uidEvent])}function Ad(t,e,i,n){const r=e[i]||{};for(const o of Object.keys(r))if(o.includes(n)){const a=r[o];Ll(t,e,i,a.callable,a.delegationSelector)}}function Zc(t){return t=t.replace(Ed,""),Uc[t]||t}const je={on(t,e,i,n){t2(t,e,i,n,!1)},one(t,e,i,n){t2(t,e,i,n,!0)},off(t,e,i,n){if(typeof e!="string"||!t)return;const[r,o,a]=Xc(e,i,n),l=a!==e,h=Yc(t),g=h[a]||{},_=e.startsWith(".");if(typeof o<"u"){if(!Object.keys(g).length)return;Ll(t,h,a,o,r?i:null);return}if(_)for(const x of Object.keys(h))Ad(t,h,x,e.slice(1));for(const x of Object.keys(g)){const T=x.replace(Sd,"");if(!l||e.includes(T)){const M=g[x];Ll(t,h,a,M.callable,M.delegationSelector)}}},trigger(t,e,i){if(typeof e!="string"||!t)return null;const n=Hc(),r=Zc(e),o=e!==r;let a=null,l=!0,h=!0,g=!1;o&&n&&(a=n.Event(e,i),n(t).trigger(a),l=!a.isPropagationStopped(),h=!a.isImmediatePropagationStopped(),g=a.isDefaultPrevented());let _=new Event(e,{bubbles:l,cancelable:!0});return _=g1(_,i),g&&_.preventDefault(),h&&t.dispatchEvent(_),_.defaultPrevented&&a&&a.preventDefault(),_}};function g1(t,e){for(const[i,n]of Object.entries(e||{}))try{t[i]=n}catch{Object.defineProperty(t,i,{configurable:!0,get(){return n}})}return t}const Dr=new Map,nl={set(t,e,i){Dr.has(t)||Dr.set(t,new Map);const n=Dr.get(t);if(!n.has(e)&&n.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(n.keys())[0]}.`);return}n.set(e,i)},get(t,e){return Dr.has(t)&&Dr.get(t).get(e)||null},remove(t,e){if(!Dr.has(t))return;const i=Dr.get(t);i.delete(e),i.size===0&&Dr.delete(t)}};function i2(t){if(t==="true")return!0;if(t==="false")return!1;if(t===Number(t).toString())return Number(t);if(t===""||t==="null")return null;if(typeof t!="string")return t;try{return JSON.parse(decodeURIComponent(t))}catch{return t}}function rl(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const Tr={setDataAttribute(t,e,i){t.setAttribute(`data-bs-${rl(e)}`,i)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${rl(e)}`)},getDataAttributes(t){if(!t)return{};const e={},i=Object.keys(t.dataset).filter(n=>n.startsWith("bs")&&!n.startsWith("bsConfig"));for(const n of i){let r=n.replace(/^bs/,"");r=r.charAt(0).toLowerCase()+r.slice(1,r.length),e[r]=i2(t.dataset[n])}return e},getDataAttribute(t,e){return i2(t.getAttribute(`data-bs-${rl(e)}`))}};class Co{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,i){const n=Sr(i)?Tr.getDataAttribute(i,"config"):{};return{...this.constructor.Default,...typeof n=="object"?n:{},...Sr(i)?Tr.getDataAttributes(i):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,i=this.constructor.DefaultType){for(const n of Object.keys(i)){const r=i[n],o=e[n],a=Sr(o)?"element":vd(o);if(!new RegExp(r).test(a))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${n}" provided type "${a}" but expected type "${r}".`)}}}const Id="5.2.0";class ir extends Co{constructor(e,i){super(),e=jr(e),e&&(this._element=e,this._config=this._getConfig(i),nl.set(this._element,this.constructor.DATA_KEY,this))}dispose(){nl.remove(this._element,this.constructor.DATA_KEY),je.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,i,n=!0){jc(e,i,n)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return nl.get(jr(e),this.DATA_KEY)}static getOrCreateInstance(e,i={}){return this.getInstance(e)||new this(e,typeof i=="object"?i:null)}static get VERSION(){return Id}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const Ra=(t,e="hide")=>{const i=`click.dismiss${t.EVENT_KEY}`,n=t.NAME;je.on(document,i,`[data-bs-dismiss="${n}"]`,function(r){if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),Ur(this))return;const o=Er(this)||this.closest(`.${n}`);t.getOrCreateInstance(o)[e]()})},Od="alert",Md="bs.alert",Gc=`.${Md}`,Nd=`close${Gc}`,Rd=`closed${Gc}`,zd="fade",Fd="show";class za extends ir{static get NAME(){return Od}close(){if(je.trigger(this._element,Nd).defaultPrevented)return;this._element.classList.remove(Fd);const i=this._element.classList.contains(zd);this._queueCallback(()=>this._destroyElement(),this._element,i)}_destroyElement(){this._element.remove(),je.trigger(this._element,Rd),this.dispose()}static jQueryInterface(e){return this.each(function(){const i=za.getOrCreateInstance(this);if(typeof e=="string"){if(i[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);i[e](this)}})}}Ra(za,"close");jn(za);const Dd="button",Ld="bs.button",Pd=`.${Ld}`,$d=".data-api",Bd="active",n2='[data-bs-toggle="button"]',Wd=`click${Pd}${$d}`;class Fa extends ir{static get NAME(){return Dd}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Bd))}static jQueryInterface(e){return this.each(function(){const i=Fa.getOrCreateInstance(this);e==="toggle"&&i[e]()})}}je.on(document,Wd,n2,t=>{t.preventDefault();const e=t.target.closest(n2);Fa.getOrCreateInstance(e).toggle()});jn(Fa);const Lt={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter(i=>i.matches(e))},parents(t,e){const i=[];let n=t.parentNode.closest(e);for(;n;)i.push(n),n=n.parentNode.closest(e);return i},prev(t,e){let i=t.previousElementSibling;for(;i;){if(i.matches(e))return[i];i=i.previousElementSibling}return[]},next(t,e){let i=t.nextElementSibling;for(;i;){if(i.matches(e))return[i];i=i.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(i=>`${i}:not([tabindex^="-"])`).join(",");return this.find(e,t).filter(i=>!Ur(i)&&$s(i))}},Hd="swipe",Bs=".bs.swipe",jd=`touchstart${Bs}`,Ud=`touchmove${Bs}`,Vd=`touchend${Bs}`,Yd=`pointerdown${Bs}`,qd=`pointerup${Bs}`,Xd="touch",Zd="pen",Gd="pointer-event",Kd=40,Jd={endCallback:null,leftCallback:null,rightCallback:null},Qd={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class va extends Co{constructor(e,i){super(),this._element=e,!(!e||!va.isSupported())&&(this._config=this._getConfig(i),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Jd}static get DefaultType(){return Qd}static get NAME(){return Hd}dispose(){je.off(this._element,Bs)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),xr(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=Kd)return;const i=e/this._deltaX;this._deltaX=0,i&&xr(i>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(je.on(this._element,Yd,e=>this._start(e)),je.on(this._element,qd,e=>this._end(e)),this._element.classList.add(Gd)):(je.on(this._element,jd,e=>this._start(e)),je.on(this._element,Ud,e=>this._move(e)),je.on(this._element,Vd,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===Zd||e.pointerType===Xd)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const e0="carousel",t0="bs.carousel",Xr=`.${t0}`,Kc=".data-api",i0="ArrowLeft",n0="ArrowRight",r0=500,qs="next",gs="prev",ys="left",oa="right",s0=`slide${Xr}`,sl=`slid${Xr}`,o0=`keydown${Xr}`,a0=`mouseenter${Xr}`,l0=`mouseleave${Xr}`,c0=`dragstart${Xr}`,h0=`load${Xr}${Kc}`,u0=`click${Xr}${Kc}`,Jc="carousel",Uo="active",d0="slide",f0="carousel-item-end",p0="carousel-item-start",g0="carousel-item-next",m0="carousel-item-prev",Qc=".active",eh=".carousel-item",_0=Qc+eh,v0=".carousel-item img",b0=".carousel-indicators",y0="[data-bs-slide], [data-bs-slide-to]",w0='[data-bs-ride="carousel"]',x0={[i0]:oa,[n0]:ys},E0={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},S0={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Ao extends ir{constructor(e,i){super(e,i),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Lt.findOne(b0,this._element),this._addEventListeners(),this._config.ride===Jc&&this.cycle()}static get Default(){return E0}static get DefaultType(){return S0}static get NAME(){return e0}next(){this._slide(qs)}nextWhenVisible(){!document.hidden&&$s(this._element)&&this.next()}prev(){this._slide(gs)}pause(){this._isSliding&&Bc(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){je.one(this._element,sl,()=>this.cycle());return}this.cycle()}}to(e){const i=this._getItems();if(e>i.length-1||e<0)return;if(this._isSliding){je.one(this._element,sl,()=>this.to(e));return}const n=this._getItemIndex(this._getActive());if(n===e)return;const r=e>n?qs:gs;this._slide(r,i[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&je.on(this._element,o0,e=>this._keydown(e)),this._config.pause==="hover"&&(je.on(this._element,a0,()=>this.pause()),je.on(this._element,l0,()=>this._maybeEnableCycle())),this._config.touch&&va.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const n of Lt.find(v0,this._element))je.on(n,c0,r=>r.preventDefault());const i={leftCallback:()=>this._slide(this._directionToOrder(ys)),rightCallback:()=>this._slide(this._directionToOrder(oa)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),r0+this._config.interval))}};this._swipeHelper=new va(this._element,i)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const i=x0[e.key];i&&(e.preventDefault(),this._slide(this._directionToOrder(i)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const i=Lt.findOne(Qc,this._indicatorsElement);i.classList.remove(Uo),i.removeAttribute("aria-current");const n=Lt.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);n&&(n.classList.add(Uo),n.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const i=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=i||this._config.defaultInterval}_slide(e,i=null){if(this._isSliding)return;const n=this._getActive(),r=e===qs,o=i||p1(this._getItems(),n,r,this._config.wrap);if(o===n)return;const a=this._getItemIndex(o),l=M=>je.trigger(this._element,M,{relatedTarget:o,direction:this._orderToDirection(e),from:this._getItemIndex(n),to:a});if(l(s0).defaultPrevented||!n||!o)return;const g=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(a),this._activeElement=o;const _=r?p0:f0,x=r?g0:m0;o.classList.add(x),ko(o),n.classList.add(_),o.classList.add(_);const T=()=>{o.classList.remove(_,x),o.classList.add(Uo),n.classList.remove(Uo,x,_),this._isSliding=!1,l(sl)};this._queueCallback(T,n,this._isAnimated()),g&&this.cycle()}_isAnimated(){return this._element.classList.contains(d0)}_getActive(){return Lt.findOne(_0,this._element)}_getItems(){return Lt.find(eh,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return Bn()?e===ys?gs:qs:e===ys?qs:gs}_orderToDirection(e){return Bn()?e===gs?ys:oa:e===gs?oa:ys}static jQueryInterface(e){return this.each(function(){const i=Ao.getOrCreateInstance(this,e);if(typeof e=="number"){i.to(e);return}if(typeof e=="string"){if(i[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);i[e]()}})}}je.on(document,u0,y0,function(t){const e=Er(this);if(!e||!e.classList.contains(Jc))return;t.preventDefault();const i=Ao.getOrCreateInstance(e),n=this.getAttribute("data-bs-slide-to");if(n){i.to(n),i._maybeEnableCycle();return}if(Tr.getDataAttribute(this,"slide")==="next"){i.next(),i._maybeEnableCycle();return}i.prev(),i._maybeEnableCycle()});je.on(window,h0,()=>{const t=Lt.find(w0);for(const e of t)Ao.getOrCreateInstance(e)});jn(Ao);const T0="collapse",k0="bs.collapse",Io=`.${k0}`,C0=".data-api",A0=`show${Io}`,I0=`shown${Io}`,O0=`hide${Io}`,M0=`hidden${Io}`,N0=`click${Io}${C0}`,ol="show",Es="collapse",Vo="collapsing",R0="collapsed",z0=`:scope .${Es} .${Es}`,F0="collapse-horizontal",D0="width",L0="height",P0=".collapse.show, .collapse.collapsing",Pl='[data-bs-toggle="collapse"]',$0={parent:null,toggle:!0},B0={parent:"(null|element)",toggle:"boolean"};class ho extends ir{constructor(e,i){super(e,i),this._isTransitioning=!1,this._triggerArray=[];const n=Lt.find(Pl);for(const r of n){const o=$c(r),a=Lt.find(o).filter(l=>l===this._element);o!==null&&a.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return $0}static get DefaultType(){return B0}static get NAME(){return T0}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(P0).filter(l=>l!==this._element).map(l=>ho.getOrCreateInstance(l,{toggle:!1}))),e.length&&e[0]._isTransitioning||je.trigger(this._element,A0).defaultPrevented)return;for(const l of e)l.hide();const n=this._getDimension();this._element.classList.remove(Es),this._element.classList.add(Vo),this._element.style[n]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(Vo),this._element.classList.add(Es,ol),this._element.style[n]="",je.trigger(this._element,I0)},a=`scroll${n[0].toUpperCase()+n.slice(1)}`;this._queueCallback(r,this._element,!0),this._element.style[n]=`${this._element[a]}px`}hide(){if(this._isTransitioning||!this._isShown()||je.trigger(this._element,O0).defaultPrevented)return;const i=this._getDimension();this._element.style[i]=`${this._element.getBoundingClientRect()[i]}px`,ko(this._element),this._element.classList.add(Vo),this._element.classList.remove(Es,ol);for(const r of this._triggerArray){const o=Er(r);o&&!this._isShown(o)&&this._addAriaAndCollapsedClass([r],!1)}this._isTransitioning=!0;const n=()=>{this._isTransitioning=!1,this._element.classList.remove(Vo),this._element.classList.add(Es),je.trigger(this._element,M0)};this._element.style[i]="",this._queueCallback(n,this._element,!0)}_isShown(e=this._element){return e.classList.contains(ol)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=jr(e.parent),e}_getDimension(){return this._element.classList.contains(F0)?D0:L0}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(Pl);for(const i of e){const n=Er(i);n&&this._addAriaAndCollapsedClass([i],this._isShown(n))}}_getFirstLevelChildren(e){const i=Lt.find(z0,this._config.parent);return Lt.find(e,this._config.parent).filter(n=>!i.includes(n))}_addAriaAndCollapsedClass(e,i){if(e.length)for(const n of e)n.classList.toggle(R0,!i),n.setAttribute("aria-expanded",i)}static jQueryInterface(e){const i={};return typeof e=="string"&&/show|hide/.test(e)&&(i.toggle=!1),this.each(function(){const n=ho.getOrCreateInstance(this,i);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}je.on(document,N0,Pl,function(t){(t.target.tagName==="A"||t.delegateTarget&&t.delegateTarget.tagName==="A")&&t.preventDefault();const e=$c(this),i=Lt.find(e);for(const n of i)ho.getOrCreateInstance(n,{toggle:!1}).toggle()});jn(ho);const r2="dropdown",W0="bs.dropdown",us=`.${W0}`,m1=".data-api",H0="Escape",s2="Tab",j0="ArrowUp",o2="ArrowDown",U0=2,V0=`hide${us}`,Y0=`hidden${us}`,q0=`show${us}`,X0=`shown${us}`,th=`click${us}${m1}`,ih=`keydown${us}${m1}`,Z0=`keyup${us}${m1}`,ws="show",G0="dropup",K0="dropend",J0="dropstart",Q0="dropup-center",ef="dropdown-center",Da='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',tf=`${Da}.${ws}`,nh=".dropdown-menu",nf=".navbar",rf=".navbar-nav",sf=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",of=Bn()?"top-end":"top-start",af=Bn()?"top-start":"top-end",lf=Bn()?"bottom-end":"bottom-start",cf=Bn()?"bottom-start":"bottom-end",hf=Bn()?"left-start":"right-start",uf=Bn()?"right-start":"left-start",df="top",ff="bottom",pf={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},gf={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class cr extends ir{constructor(e,i){super(e,i),this._popper=null,this._parent=this._element.parentNode,this._menu=Lt.findOne(nh,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return pf}static get DefaultType(){return gf}static get NAME(){return r2}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Ur(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!je.trigger(this._element,q0,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(rf))for(const n of[].concat(...document.body.children))je.on(n,"mouseover",_a);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(ws),this._element.classList.add(ws),je.trigger(this._element,X0,e)}}hide(){if(Ur(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!je.trigger(this._element,V0,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const n of[].concat(...document.body.children))je.off(n,"mouseover",_a);this._popper&&this._popper.destroy(),this._menu.classList.remove(ws),this._element.classList.remove(ws),this._element.setAttribute("aria-expanded","false"),Tr.removeDataAttribute(this._menu,"popper"),je.trigger(this._element,Y0,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!Sr(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${r2.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof Lc>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:Sr(this._config.reference)?e=jr(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const i=this._getPopperConfig();this._popper=f1(e,this._menu,i)}_isShown(){return this._menu.classList.contains(ws)}_getPlacement(){const e=this._parent;if(e.classList.contains(K0))return hf;if(e.classList.contains(J0))return uf;if(e.classList.contains(Q0))return df;if(e.classList.contains(ef))return ff;const i=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(G0)?i?af:of:i?cf:lf}_detectNavbar(){return this._element.closest(nf)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(i=>Number.parseInt(i,10)):typeof e=="function"?i=>e(i,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Tr.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...typeof this._config.popperConfig=="function"?this._config.popperConfig(e):this._config.popperConfig}}_selectMenuItem({key:e,target:i}){const n=Lt.find(sf,this._menu).filter(r=>$s(r));n.length&&p1(n,i,e===o2,!n.includes(i)).focus()}static jQueryInterface(e){return this.each(function(){const i=cr.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e]()}})}static clearMenus(e){if(e.button===U0||e.type==="keyup"&&e.key!==s2)return;const i=Lt.find(tf);for(const n of i){const r=cr.getInstance(n);if(!r||r._config.autoClose===!1)continue;const o=e.composedPath(),a=o.includes(r._menu);if(o.includes(r._element)||r._config.autoClose==="inside"&&!a||r._config.autoClose==="outside"&&a||r._menu.contains(e.target)&&(e.type==="keyup"&&e.key===s2||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const l={relatedTarget:r._element};e.type==="click"&&(l.clickEvent=e),r._completeHide(l)}}static dataApiKeydownHandler(e){const i=/input|textarea/i.test(e.target.tagName),n=e.key===H0,r=[j0,o2].includes(e.key);if(!r&&!n||i&&!n)return;e.preventDefault();const o=Lt.findOne(Da,e.delegateTarget.parentNode),a=cr.getOrCreateInstance(o);if(r){e.stopPropagation(),a.show(),a._selectMenuItem(e);return}a._isShown()&&(e.stopPropagation(),a.hide(),o.focus())}}je.on(document,ih,Da,cr.dataApiKeydownHandler);je.on(document,ih,nh,cr.dataApiKeydownHandler);je.on(document,th,cr.clearMenus);je.on(document,Z0,cr.clearMenus);je.on(document,th,Da,function(t){t.preventDefault(),cr.getOrCreateInstance(this).toggle()});jn(cr);const a2=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",l2=".sticky-top",Yo="padding-right",c2="margin-right";class $l{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Yo,i=>i+e),this._setElementAttributes(a2,Yo,i=>i+e),this._setElementAttributes(l2,c2,i=>i-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Yo),this._resetElementAttributes(a2,Yo),this._resetElementAttributes(l2,c2)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,i,n){const r=this.getWidth(),o=a=>{if(a!==this._element&&window.innerWidth>a.clientWidth+r)return;this._saveInitialAttribute(a,i);const l=window.getComputedStyle(a).getPropertyValue(i);a.style.setProperty(i,`${n(Number.parseFloat(l))}px`)};this._applyManipulationCallback(e,o)}_saveInitialAttribute(e,i){const n=e.style.getPropertyValue(i);n&&Tr.setDataAttribute(e,i,n)}_resetElementAttributes(e,i){const n=r=>{const o=Tr.getDataAttribute(r,i);if(o===null){r.style.removeProperty(i);return}Tr.removeDataAttribute(r,i),r.style.setProperty(i,o)};this._applyManipulationCallback(e,n)}_applyManipulationCallback(e,i){if(Sr(e)){i(e);return}for(const n of Lt.find(e,this._element))i(n)}}const rh="backdrop",mf="fade",h2="show",u2=`mousedown.bs.${rh}`,_f={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},vf={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class sh extends Co{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return _f}static get DefaultType(){return vf}static get NAME(){return rh}show(e){if(!this._config.isVisible){xr(e);return}this._append();const i=this._getElement();this._config.isAnimated&&ko(i),i.classList.add(h2),this._emulateAnimation(()=>{xr(e)})}hide(e){if(!this._config.isVisible){xr(e);return}this._getElement().classList.remove(h2),this._emulateAnimation(()=>{this.dispose(),xr(e)})}dispose(){this._isAppended&&(je.off(this._element,u2),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(mf),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=jr(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),je.on(e,u2,()=>{xr(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){jc(e,this._getElement(),this._config.isAnimated)}}const bf="focustrap",yf="bs.focustrap",ba=`.${yf}`,wf=`focusin${ba}`,xf=`keydown.tab${ba}`,Ef="Tab",Sf="forward",d2="backward",Tf={autofocus:!0,trapElement:null},kf={autofocus:"boolean",trapElement:"element"};class oh extends Co{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Tf}static get DefaultType(){return kf}static get NAME(){return bf}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),je.off(document,ba),je.on(document,wf,e=>this._handleFocusin(e)),je.on(document,xf,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,je.off(document,ba))}_handleFocusin(e){const{trapElement:i}=this._config;if(e.target===document||e.target===i||i.contains(e.target))return;const n=Lt.focusableChildren(i);n.length===0?i.focus():this._lastTabNavDirection===d2?n[n.length-1].focus():n[0].focus()}_handleKeydown(e){e.key===Ef&&(this._lastTabNavDirection=e.shiftKey?d2:Sf)}}const Cf="modal",Af="bs.modal",pr=`.${Af}`,If=".data-api",Of="Escape",Mf=`hide${pr}`,Nf=`hidePrevented${pr}`,ah=`hidden${pr}`,lh=`show${pr}`,Rf=`shown${pr}`,zf=`resize${pr}`,Ff=`mousedown.dismiss${pr}`,Df=`keydown.dismiss${pr}`,Lf=`click${pr}${If}`,f2="modal-open",Pf="fade",p2="show",al="modal-static",$f=".modal.show",Bf=".modal-dialog",Wf=".modal-body",Hf='[data-bs-toggle="modal"]',jf={backdrop:!0,focus:!0,keyboard:!0},Uf={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Ji extends ir{constructor(e,i){super(e,i),this._dialog=Lt.findOne(Bf,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new $l,this._addEventListeners()}static get Default(){return jf}static get DefaultType(){return Uf}static get NAME(){return Cf}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||je.trigger(this._element,lh,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(f2),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||je.trigger(this._element,Mf).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(p2),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const e of[window,this._dialog])je.off(e,pr);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new sh({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new oh({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const i=Lt.findOne(Wf,this._dialog);i&&(i.scrollTop=0),ko(this._element),this._element.classList.add(p2);const n=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,je.trigger(this._element,Rf,{relatedTarget:e})};this._queueCallback(n,this._dialog,this._isAnimated())}_addEventListeners(){je.on(this._element,Df,e=>{if(e.key===Of){if(this._config.keyboard){e.preventDefault(),this.hide();return}this._triggerBackdropTransition()}}),je.on(window,zf,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),je.on(this._element,Ff,e=>{if(e.target===e.currentTarget){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(f2),this._resetAdjustments(),this._scrollBar.reset(),je.trigger(this._element,ah)})}_isAnimated(){return this._element.classList.contains(Pf)}_triggerBackdropTransition(){if(je.trigger(this._element,Nf).defaultPrevented)return;const i=this._element.scrollHeight>document.documentElement.clientHeight,n=this._element.style.overflowY;n==="hidden"||this._element.classList.contains(al)||(i||(this._element.style.overflowY="hidden"),this._element.classList.add(al),this._queueCallback(()=>{this._element.classList.remove(al),this._queueCallback(()=>{this._element.style.overflowY=n},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,i=this._scrollBar.getWidth(),n=i>0;if(n&&!e){const r=Bn()?"paddingLeft":"paddingRight";this._element.style[r]=`${i}px`}if(!n&&e){const r=Bn()?"paddingRight":"paddingLeft";this._element.style[r]=`${i}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,i){return this.each(function(){const n=Ji.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e](i)}})}}je.on(document,Lf,Hf,function(t){const e=Er(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),je.one(e,lh,r=>{r.defaultPrevented||je.one(e,ah,()=>{$s(this)&&this.focus()})});const i=Lt.findOne($f);i&&Ji.getInstance(i).hide(),Ji.getOrCreateInstance(e).toggle(this)});Ra(Ji);jn(Ji);const Vf="offcanvas",Yf="bs.offcanvas",Or=`.${Yf}`,ch=".data-api",qf=`load${Or}${ch}`,Xf="Escape",g2="show",m2="showing",_2="hiding",Zf="offcanvas-backdrop",hh=".offcanvas.show",Gf=`show${Or}`,Kf=`shown${Or}`,Jf=`hide${Or}`,v2=`hidePrevented${Or}`,uh=`hidden${Or}`,Qf=`resize${Or}`,ep=`click${Or}${ch}`,tp=`keydown.dismiss${Or}`,ip='[data-bs-toggle="offcanvas"]',np={backdrop:!0,keyboard:!0,scroll:!1},rp={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Vr extends ir{constructor(e,i){super(e,i),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return np}static get DefaultType(){return rp}static get NAME(){return Vf}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||je.trigger(this._element,Gf,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new $l().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(m2);const n=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(g2),this._element.classList.remove(m2),je.trigger(this._element,Kf,{relatedTarget:e})};this._queueCallback(n,this._element,!0)}hide(){if(!this._isShown||je.trigger(this._element,Jf).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(_2),this._backdrop.hide();const i=()=>{this._element.classList.remove(g2,_2),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new $l().reset(),je.trigger(this._element,uh)};this._queueCallback(i,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){je.trigger(this._element,v2);return}this.hide()},i=!!this._config.backdrop;return new sh({className:Zf,isVisible:i,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:i?e:null})}_initializeFocusTrap(){return new oh({trapElement:this._element})}_addEventListeners(){je.on(this._element,tp,e=>{if(e.key===Xf){if(!this._config.keyboard){je.trigger(this._element,v2);return}this.hide()}})}static jQueryInterface(e){return this.each(function(){const i=Vr.getOrCreateInstance(this,e);if(typeof e=="string"){if(i[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);i[e](this)}})}}je.on(document,ep,ip,function(t){const e=Er(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),Ur(this))return;je.one(e,uh,()=>{$s(this)&&this.focus()});const i=Lt.findOne(hh);i&&i!==e&&Vr.getInstance(i).hide(),Vr.getOrCreateInstance(e).toggle(this)});je.on(window,qf,()=>{for(const t of Lt.find(hh))Vr.getOrCreateInstance(t).show()});je.on(window,Qf,()=>{for(const t of Lt.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(t).position!=="fixed"&&Vr.getOrCreateInstance(t).hide()});Ra(Vr);jn(Vr);const sp=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),op=/^aria-[\w-]*$/i,ap=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,lp=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,cp=(t,e)=>{const i=t.nodeName.toLowerCase();return e.includes(i)?sp.has(i)?!!(ap.test(t.nodeValue)||lp.test(t.nodeValue)):!0:e.filter(n=>n instanceof RegExp).some(n=>n.test(i))},dh={"*":["class","dir","id","lang","role",op],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function hp(t,e,i){if(!t.length)return t;if(i&&typeof i=="function")return i(t);const r=new window.DOMParser().parseFromString(t,"text/html"),o=[].concat(...r.body.querySelectorAll("*"));for(const a of o){const l=a.nodeName.toLowerCase();if(!Object.keys(e).includes(l)){a.remove();continue}const h=[].concat(...a.attributes),g=[].concat(e["*"]||[],e[l]||[]);for(const _ of h)cp(_,g)||a.removeAttribute(_.nodeName)}return r.body.innerHTML}const up="TemplateFactory",dp={allowList:dh,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},fp={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},pp={entry:"(string|element|function|null)",selector:"(string|element)"};class gp extends Co{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return dp}static get DefaultType(){return fp}static get NAME(){return up}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[r,o]of Object.entries(this._config.content))this._setContent(e,o,r);const i=e.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&i.classList.add(...n.split(" ")),i}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[i,n]of Object.entries(e))super._typeCheckConfig({selector:i,entry:n},pp)}_setContent(e,i,n){const r=Lt.findOne(n,e);if(r){if(i=this._resolvePossibleFunction(i),!i){r.remove();return}if(Sr(i)){this._putElementInTemplate(jr(i),r);return}if(this._config.html){r.innerHTML=this._maybeSanitize(i);return}r.textContent=i}}_maybeSanitize(e){return this._config.sanitize?hp(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return typeof e=="function"?e(this):e}_putElementInTemplate(e,i){if(this._config.html){i.innerHTML="",i.append(e);return}i.textContent=e.textContent}}const mp="tooltip",_p=new Set(["sanitize","allowList","sanitizeFn"]),ll="fade",vp="modal",qo="show",bp=".tooltip-inner",b2=`.${vp}`,y2="hide.bs.modal",Xs="hover",cl="focus",yp="click",wp="manual",xp="hide",Ep="hidden",Sp="show",Tp="shown",kp="inserted",Cp="click",Ap="focusin",Ip="focusout",Op="mouseenter",Mp="mouseleave",Np={AUTO:"auto",TOP:"top",RIGHT:Bn()?"left":"right",BOTTOM:"bottom",LEFT:Bn()?"right":"left"},Rp={allowList:dh,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},zp={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Ws extends ir{constructor(e,i){if(typeof Lc>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,i),this._isEnabled=!0,this._timeout=0,this._isHovered=!1,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners()}static get Default(){return Rp}static get DefaultType(){return zp}static get NAME(){return mp}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(e){if(this._isEnabled){if(e){const i=this._initializeOnDelegatedTarget(e);i._activeTrigger.click=!i._activeTrigger.click,i._isWithActiveTrigger()?i._enter():i._leave();return}if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),je.off(this._element.closest(b2),y2,this._hideModalHandler),this.tip&&this.tip.remove(),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=je.trigger(this._element,this.constructor.eventName(Sp)),n=(Wc(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!n)return;this.tip&&(this.tip.remove(),this.tip=null);const r=this._getTipElement();this._element.setAttribute("aria-describedby",r.getAttribute("id"));const{container:o}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(o.append(r),je.trigger(this._element,this.constructor.eventName(kp))),this._popper?this._popper.update():this._popper=this._createPopper(r),r.classList.add(qo),"ontouchstart"in document.documentElement)for(const l of[].concat(...document.body.children))je.on(l,"mouseover",_a);const a=()=>{const l=this._isHovered;this._isHovered=!1,je.trigger(this._element,this.constructor.eventName(Tp)),l&&this._leave()};this._queueCallback(a,this.tip,this._isAnimated())}hide(){if(!this._isShown()||je.trigger(this._element,this.constructor.eventName(xp)).defaultPrevented)return;const i=this._getTipElement();if(i.classList.remove(qo),"ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))je.off(r,"mouseover",_a);this._activeTrigger[yp]=!1,this._activeTrigger[cl]=!1,this._activeTrigger[Xs]=!1,this._isHovered=!1;const n=()=>{this._isWithActiveTrigger()||(this._isHovered||i.remove(),this._element.removeAttribute("aria-describedby"),je.trigger(this._element,this.constructor.eventName(Ep)),this._disposePopper())};this._queueCallback(n,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const i=this._getTemplateFactory(e).toHtml();if(!i)return null;i.classList.remove(ll,qo),i.classList.add(`bs-${this.constructor.NAME}-auto`);const n=bd(this.constructor.NAME).toString();return i.setAttribute("id",n),this._isAnimated()&&i.classList.add(ll),i}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new gp({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[bp]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._config.originalTitle}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(ll)}_isShown(){return this.tip&&this.tip.classList.contains(qo)}_createPopper(e){const i=typeof this._config.placement=="function"?this._config.placement.call(this,e,this._element):this._config.placement,n=Np[i.toUpperCase()];return f1(this._element,e,this._getPopperConfig(n))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(i=>Number.parseInt(i,10)):typeof e=="function"?i=>e(i,this._element):e}_resolvePossibleFunction(e){return typeof e=="function"?e.call(this._element):e}_getPopperConfig(e){const i={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:n=>{this._getTipElement().setAttribute("data-popper-placement",n.state.placement)}}]};return{...i,...typeof this._config.popperConfig=="function"?this._config.popperConfig(i):this._config.popperConfig}}_setListeners(){const e=this._config.trigger.split(" ");for(const i of e)if(i==="click")je.on(this._element,this.constructor.eventName(Cp),this._config.selector,n=>this.toggle(n));else if(i!==wp){const n=i===Xs?this.constructor.eventName(Op):this.constructor.eventName(Ap),r=i===Xs?this.constructor.eventName(Mp):this.constructor.eventName(Ip);je.on(this._element,n,this._config.selector,o=>{const a=this._initializeOnDelegatedTarget(o);a._activeTrigger[o.type==="focusin"?cl:Xs]=!0,a._enter()}),je.on(this._element,r,this._config.selector,o=>{const a=this._initializeOnDelegatedTarget(o);a._activeTrigger[o.type==="focusout"?cl:Xs]=a._element.contains(o.relatedTarget),a._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},je.on(this._element.closest(b2),y2,this._hideModalHandler),this._config.selector?this._config={...this._config,trigger:"manual",selector:""}:this._fixTitle()}_fixTitle(){const e=this._config.originalTitle;e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,i){clearTimeout(this._timeout),this._timeout=setTimeout(e,i)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const i=Tr.getDataAttributes(this._element);for(const n of Object.keys(i))_p.has(n)&&delete i[n];return e={...i,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:jr(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),e.originalTitle=this._element.getAttribute("title")||"",typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const i in this._config)this.constructor.Default[i]!==this._config[i]&&(e[i]=this._config[i]);return e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null)}static jQueryInterface(e){return this.each(function(){const i=Ws.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e]()}})}}jn(Ws);const Fp="popover",Dp=".popover-header",Lp=".popover-body",Pp={...Ws.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},$p={...Ws.DefaultType,content:"(null|string|element|function)"};class _1 extends Ws{static get Default(){return Pp}static get DefaultType(){return $p}static get NAME(){return Fp}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Dp]:this._getTitle(),[Lp]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const i=_1.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e]()}})}}jn(_1);const Bp="scrollspy",Wp="bs.scrollspy",v1=`.${Wp}`,Hp=".data-api",jp=`activate${v1}`,w2=`click${v1}`,Up=`load${v1}${Hp}`,Vp="dropdown-item",ms="active",Yp='[data-bs-spy="scroll"]',hl="[href]",qp=".nav, .list-group",x2=".nav-link",Xp=".nav-item",Zp=".list-group-item",Gp=`${x2}, ${Xp} > ${x2}, ${Zp}`,Kp=".dropdown",Jp=".dropdown-toggle",Qp={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null},e5={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element"};class La extends ir{constructor(e,i){super(e,i),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Qp}static get DefaultType(){return e5}static get NAME(){return Bp}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=jr(e.target)||document.body,e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(je.off(this._config.target,w2),je.on(this._config.target,w2,hl,e=>{const i=this._observableSections.get(e.target.hash);if(i){e.preventDefault();const n=this._rootElement||window,r=i.offsetTop-this._element.offsetTop;if(n.scrollTo){n.scrollTo({top:r,behavior:"smooth"});return}n.scrollTop=r}}))}_getNewObserver(){const e={root:this._rootElement,threshold:[.1,.5,1],rootMargin:this._getRootMargin()};return new IntersectionObserver(i=>this._observerCallback(i),e)}_observerCallback(e){const i=a=>this._targetLinks.get(`#${a.target.id}`),n=a=>{this._previousScrollData.visibleEntryTop=a.target.offsetTop,this._process(i(a))},r=(this._rootElement||document.documentElement).scrollTop,o=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(const a of e){if(!a.isIntersecting){this._activeTarget=null,this._clearActiveClass(i(a));continue}const l=a.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(o&&l){if(n(a),!r)return;continue}!o&&!l&&n(a)}}_getRootMargin(){return this._config.offset?`${this._config.offset}px 0px -30%`:this._config.rootMargin}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=Lt.find(hl,this._config.target);for(const i of e){if(!i.hash||Ur(i))continue;const n=Lt.findOne(i.hash,this._element);$s(n)&&(this._targetLinks.set(i.hash,i),this._observableSections.set(i.hash,n))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(ms),this._activateParents(e),je.trigger(this._element,jp,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(Vp)){Lt.findOne(Jp,e.closest(Kp)).classList.add(ms);return}for(const i of Lt.parents(e,qp))for(const n of Lt.prev(i,Gp))n.classList.add(ms)}_clearActiveClass(e){e.classList.remove(ms);const i=Lt.find(`${hl}.${ms}`,e);for(const n of i)n.classList.remove(ms)}static jQueryInterface(e){return this.each(function(){const i=La.getOrCreateInstance(this,e);if(typeof e=="string"){if(i[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);i[e]()}})}}je.on(window,Up,()=>{for(const t of Lt.find(Yp))La.getOrCreateInstance(t)});jn(La);const t5="tab",i5="bs.tab",ds=`.${i5}`,n5=`hide${ds}`,r5=`hidden${ds}`,s5=`show${ds}`,o5=`shown${ds}`,a5=`click${ds}`,l5=`keydown${ds}`,c5=`load${ds}`,h5="ArrowLeft",E2="ArrowRight",u5="ArrowUp",S2="ArrowDown",Pr="active",T2="fade",ul="show",d5="dropdown",f5=".dropdown-toggle",p5=".dropdown-menu",g5=".dropdown-item",dl=":not(.dropdown-toggle)",m5='.list-group, .nav, [role="tablist"]',_5=".nav-item, .list-group-item",v5=`.nav-link${dl}, .list-group-item${dl}, [role="tab"]${dl}`,fh='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',fl=`${v5}, ${fh}`,b5=`.${Pr}[data-bs-toggle="tab"], .${Pr}[data-bs-toggle="pill"], .${Pr}[data-bs-toggle="list"]`;class Fs extends ir{constructor(e){super(e),this._parent=this._element.closest(m5),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),je.on(this._element,l5,i=>this._keydown(i)))}static get NAME(){return t5}show(){const e=this._element;if(this._elemIsActive(e))return;const i=this._getActiveElem(),n=i?je.trigger(i,n5,{relatedTarget:e}):null;je.trigger(e,s5,{relatedTarget:i}).defaultPrevented||n&&n.defaultPrevented||(this._deactivate(i,e),this._activate(e,i))}_activate(e,i){if(!e)return;e.classList.add(Pr),this._activate(Er(e));const n=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(ul);return}e.focus(),e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),je.trigger(e,o5,{relatedTarget:i})};this._queueCallback(n,e,e.classList.contains(T2))}_deactivate(e,i){if(!e)return;e.classList.remove(Pr),e.blur(),this._deactivate(Er(e));const n=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(ul);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),je.trigger(e,r5,{relatedTarget:i})};this._queueCallback(n,e,e.classList.contains(T2))}_keydown(e){if(![h5,E2,u5,S2].includes(e.key))return;e.stopPropagation(),e.preventDefault();const i=[E2,S2].includes(e.key),n=p1(this._getChildren().filter(r=>!Ur(r)),e.target,i,!0);n&&Fs.getOrCreateInstance(n).show()}_getChildren(){return Lt.find(fl,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,i){this._setAttributeIfNotExists(e,"role","tablist");for(const n of i)this._setInitialAttributesOnChild(n)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const i=this._elemIsActive(e),n=this._getOuterElement(e);e.setAttribute("aria-selected",i),n!==e&&this._setAttributeIfNotExists(n,"role","presentation"),i||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const i=Er(e);i&&(this._setAttributeIfNotExists(i,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(i,"aria-labelledby",`#${e.id}`))}_toggleDropDown(e,i){const n=this._getOuterElement(e);if(!n.classList.contains(d5))return;const r=(o,a)=>{const l=Lt.findOne(o,n);l&&l.classList.toggle(a,i)};r(f5,Pr),r(p5,ul),r(g5,Pr),n.setAttribute("aria-expanded",i)}_setAttributeIfNotExists(e,i,n){e.hasAttribute(i)||e.setAttribute(i,n)}_elemIsActive(e){return e.classList.contains(Pr)}_getInnerElement(e){return e.matches(fl)?e:Lt.findOne(fl,e)}_getOuterElement(e){return e.closest(_5)||e}static jQueryInterface(e){return this.each(function(){const i=Fs.getOrCreateInstance(this);if(typeof e=="string"){if(i[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);i[e]()}})}}je.on(document,a5,fh,function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),!Ur(this)&&Fs.getOrCreateInstance(this).show()});je.on(window,c5,()=>{for(const t of Lt.find(b5))Fs.getOrCreateInstance(t)});jn(Fs);const y5="toast",w5="bs.toast",Zr=`.${w5}`,x5=`mouseover${Zr}`,E5=`mouseout${Zr}`,S5=`focusin${Zr}`,T5=`focusout${Zr}`,k5=`hide${Zr}`,C5=`hidden${Zr}`,A5=`show${Zr}`,I5=`shown${Zr}`,O5="fade",k2="hide",Xo="show",Zo="showing",M5={animation:"boolean",autohide:"boolean",delay:"number"},N5={animation:!0,autohide:!0,delay:5e3};class Pa extends ir{constructor(e,i){super(e,i),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return N5}static get DefaultType(){return M5}static get NAME(){return y5}show(){if(je.trigger(this._element,A5).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(O5);const i=()=>{this._element.classList.remove(Zo),je.trigger(this._element,I5),this._maybeScheduleHide()};this._element.classList.remove(k2),ko(this._element),this._element.classList.add(Xo,Zo),this._queueCallback(i,this._element,this._config.animation)}hide(){if(!this.isShown()||je.trigger(this._element,k5).defaultPrevented)return;const i=()=>{this._element.classList.add(k2),this._element.classList.remove(Zo,Xo),je.trigger(this._element,C5)};this._element.classList.add(Zo),this._queueCallback(i,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Xo),super.dispose()}isShown(){return this._element.classList.contains(Xo)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,i){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=i;break;case"focusin":case"focusout":this._hasKeyboardInteraction=i;break}if(i){this._clearTimeout();return}const n=e.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){je.on(this._element,x5,e=>this._onInteraction(e,!0)),je.on(this._element,E5,e=>this._onInteraction(e,!1)),je.on(this._element,S5,e=>this._onInteraction(e,!0)),je.on(this._element,T5,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const i=Pa.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e](this)}})}}Ra(Pa);jn(Pa);var ar=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Oo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ph={},pl={exports:{}},C2;function gh(){return C2||(C2=1,function(t,e){(function(i,n){t.exports=n()})(ar,function(){var i="1.13.4",n=typeof self=="object"&&self.self===self&&self||typeof ar=="object"&&ar.global===ar&&ar||Function("return this")()||{},r=Array.prototype,o=Object.prototype,a=typeof Symbol<"u"?Symbol.prototype:null,l=r.push,h=r.slice,g=o.toString,_=o.hasOwnProperty,x=typeof ArrayBuffer<"u",T=typeof DataView<"u",M=Array.isArray,D=Object.keys,F=Object.create,Q=x&&ArrayBuffer.isView,K=isNaN,Z=isFinite,ee=!{toString:null}.propertyIsEnumerable("toString"),he=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],pe=Math.pow(2,53)-1;function p(S,z){return z=z==null?S.length-1:+z,function(){for(var s=Math.max(arguments.length-z,0),c=Array(s),u=0;u<s;u++)c[u]=arguments[u+z];switch(z){case 0:return S.call(this,c);case 1:return S.call(this,arguments[0],c);case 2:return S.call(this,arguments[0],arguments[1],c)}var f=Array(z+1);for(u=0;u<z;u++)f[u]=arguments[u];return f[z]=c,S.apply(this,f)}}function H(S){var z=typeof S;return z==="function"||z==="object"&&!!S}function oe(S){return S===void 0}function me(S){return S===!0||S===!1||g.call(S)==="[object Boolean]"}function Te(S){var z="[object "+S+"]";return function(s){return g.call(s)===z}}var Ae=Te("String"),ve=Te("Number"),Le=Te("Date"),We=Te("RegExp"),it=Te("Error"),Ye=Te("Symbol"),tt=Te("ArrayBuffer"),Qe=Te("Function"),st=n.document&&n.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof st!="function"&&(Qe=function(S){return typeof S=="function"||!1});var Tt=Qe,N=Te("Object"),O=T&&N(new DataView(new ArrayBuffer(8))),k=typeof Map<"u"&&N(new Map),$=Te("DataView"),B=O?function(S){return S!=null&&Tt(S.getInt8)&&tt(S.buffer)}:$,te=M||Te("Array");function X(S,z){return S!=null&&_.call(S,z)}var fe=Te("Arguments");(function(){fe(arguments)||(fe=function(S){return X(S,"callee")})})();var ae=fe;function Ee(S){return ve(S)&&K(S)}function He(S){return function(){return S}}function Ge(S){return function(z){var s=S(z);return typeof s=="number"&&s>=0&&s<=pe}}function nt(S){return function(z){return z==null?void 0:z[S]}}var E=nt("byteLength"),R=Ge(E),L=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,J=x?function(S){return Q?Q(S)&&!B(S):R(S)&&L.test(g.call(S))}:He(!1),ue=nt("length");function ce(S,z){z=function(v){for(var b={},A=v.length,j=0;j<A;++j)b[v[j]]=!0;return{contains:function(q){return b[q]===!0},push:function(q){return b[q]=!0,v.push(q)}}}(z);var s=he.length,c=S.constructor,u=Tt(c)&&c.prototype||o,f="constructor";for(X(S,f)&&!z.contains(f)&&z.push(f);s--;)(f=he[s])in S&&S[f]!==u[f]&&!z.contains(f)&&z.push(f)}function Oe(S){if(!H(S))return[];if(D)return D(S);var z=[];for(var s in S)X(S,s)&&z.push(s);return ee&&ce(S,z),z}function et(S,z){var s=Oe(z),c=s.length;if(S==null)return!c;for(var u=Object(S),f=0;f<c;f++){var v=s[f];if(z[v]!==u[v]||!(v in u))return!1}return!0}function Ze(S){return S instanceof Ze?S:this instanceof Ze?void(this._wrapped=S):new Ze(S)}function lt(S){return new Uint8Array(S.buffer||S,S.byteOffset||0,E(S))}Ze.VERSION=i,Ze.prototype.value=function(){return this._wrapped},Ze.prototype.valueOf=Ze.prototype.toJSON=Ze.prototype.value,Ze.prototype.toString=function(){return String(this._wrapped)};var xt="[object DataView]";function ht(S,z,s,c){if(S===z)return S!==0||1/S==1/z;if(S==null||z==null)return!1;if(S!=S)return z!=z;var u=typeof S;return(u==="function"||u==="object"||typeof z=="object")&&function f(v,b,A,j){v instanceof Ze&&(v=v._wrapped),b instanceof Ze&&(b=b._wrapped);var q=g.call(v);if(q!==g.call(b))return!1;if(O&&q=="[object Object]"&&B(v)){if(!B(b))return!1;q=xt}switch(q){case"[object RegExp]":case"[object String]":return""+v==""+b;case"[object Number]":return+v!=+v?+b!=+b:+v==0?1/+v==1/b:+v==+b;case"[object Date]":case"[object Boolean]":return+v==+b;case"[object Symbol]":return a.valueOf.call(v)===a.valueOf.call(b);case"[object ArrayBuffer]":case xt:return f(lt(v),lt(b),A,j)}var re=q==="[object Array]";if(!re&&J(v)){if(E(v)!==E(b))return!1;if(v.buffer===b.buffer&&v.byteOffset===b.byteOffset)return!0;re=!0}if(!re){if(typeof v!="object"||typeof b!="object")return!1;var ge=v.constructor,De=b.constructor;if(ge!==De&&!(Tt(ge)&&ge instanceof ge&&Tt(De)&&De instanceof De)&&"constructor"in v&&"constructor"in b)return!1}j=j||[];for(var de=(A=A||[]).length;de--;)if(A[de]===v)return j[de]===b;if(A.push(v),j.push(b),re){if((de=v.length)!==b.length)return!1;for(;de--;)if(!ht(v[de],b[de],A,j))return!1}else{var xe,at=Oe(v);if(de=at.length,Oe(b).length!==de)return!1;for(;de--;)if(xe=at[de],!X(b,xe)||!ht(v[xe],b[xe],A,j))return!1}return A.pop(),j.pop(),!0}(S,z,s,c)}function Ot(S){if(!H(S))return[];var z=[];for(var s in S)z.push(s);return ee&&ce(S,z),z}function qt(S){var z=ue(S);return function(s){if(s==null)return!1;var c=Ot(s);if(ue(c))return!1;for(var u=0;u<z;u++)if(!Tt(s[S[u]]))return!1;return S!==Ii||!Tt(s[Zt])}}var Zt="forEach",Pt="has",Ut=["clear","delete"],ci=["get",Pt,"set"],pi=Ut.concat(Zt,ci),Ii=Ut.concat(ci),Gt=["add"].concat(Ut,Zt,Pt),xi=k?qt(pi):Te("Map"),Wt=k?qt(Ii):Te("WeakMap"),Dt=k?qt(Gt):Te("Set"),ji=Te("WeakSet");function hi(S){for(var z=Oe(S),s=z.length,c=Array(s),u=0;u<s;u++)c[u]=S[z[u]];return c}function vn(S){for(var z={},s=Oe(S),c=0,u=s.length;c<u;c++)z[S[s[c]]]=s[c];return z}function bi(S){var z=[];for(var s in S)Tt(S[s])&&z.push(s);return z.sort()}function zi(S,z){return function(s){var c=arguments.length;if(z&&(s=Object(s)),c<2||s==null)return s;for(var u=1;u<c;u++)for(var f=arguments[u],v=S(f),b=v.length,A=0;A<b;A++){var j=v[A];z&&s[j]!==void 0||(s[j]=f[j])}return s}}var Ei=zi(Ot),Mt=zi(Oe),an=zi(Ot,!0);function Ui(S){if(!H(S))return{};if(F)return F(S);var z=function(){};z.prototype=S;var s=new z;return z.prototype=null,s}function Vi(S){return te(S)?S:[S]}function Oi(S){return Ze.toPath(S)}function ln(S,z){for(var s=z.length,c=0;c<s;c++){if(S==null)return;S=S[z[c]]}return s?S:void 0}function Qi(S,z,s){var c=ln(S,Oi(z));return oe(c)?s:c}function cn(S){return S}function en(S){return S=Mt({},S),function(z){return et(z,S)}}function tn(S){return S=Oi(S),function(z){return ln(z,S)}}function hn(S,z,s){if(z===void 0)return S;switch(s??3){case 1:return function(c){return S.call(z,c)};case 3:return function(c,u,f){return S.call(z,c,u,f)};case 4:return function(c,u,f,v){return S.call(z,c,u,f,v)}}return function(){return S.apply(z,arguments)}}function gr(S,z,s){return S==null?cn:Tt(S)?hn(S,z,s):H(S)&&!te(S)?en(S):tn(S)}function Kt(S,z){return gr(S,z,1/0)}function ui(S,z,s){return Ze.iteratee!==Kt?Ze.iteratee(S,z):gr(S,z,s)}function Di(){}function bn(S,z){return z==null&&(z=S,S=0),S+Math.floor(Math.random()*(z-S+1))}Ze.toPath=Vi,Ze.iteratee=Kt;var yn=Date.now||function(){return new Date().getTime()};function Rn(S){var z=function(f){return S[f]},s="(?:"+Oe(S).join("|")+")",c=RegExp(s),u=RegExp(s,"g");return function(f){return f=f==null?"":""+f,c.test(f)?f.replace(u,z):f}}var Si={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},rr=Rn(Si),mr=Rn(vn(Si)),Yi=Ze.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},wn=/(.)^/,_r={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Ue=/\\|'|\r|\n|\u2028|\u2029/g;function ne(S){return"\\"+_r[S]}var Me=/^\s*(\w|\$)+\s*$/,Ve=0;function dt(S,z,s,c,u){if(!(c instanceof z))return S.apply(s,u);var f=Ui(S.prototype),v=S.apply(f,u);return H(v)?v:f}var Jt=p(function(S,z){var s=Jt.placeholder,c=function(){for(var u=0,f=z.length,v=Array(f),b=0;b<f;b++)v[b]=z[b]===s?arguments[u++]:z[b];for(;u<arguments.length;)v.push(arguments[u++]);return dt(S,c,this,this,v)};return c});Jt.placeholder=Ze;var oi=p(function(S,z,s){if(!Tt(S))throw new TypeError("Bind must be called on a function");var c=p(function(u){return dt(S,c,z,this,s.concat(u))});return c}),Ft=Ge(ue);function Bt(S,z,s,c){if(c=c||[],z||z===0){if(z<=0)return c.concat(S)}else z=1/0;for(var u=c.length,f=0,v=ue(S);f<v;f++){var b=S[f];if(Ft(b)&&(te(b)||ae(b)))if(z>1)Bt(b,z-1,s,c),u=c.length;else for(var A=0,j=b.length;A<j;)c[u++]=b[A++];else s||(c[u++]=b)}return c}var $t=p(function(S,z){var s=(z=Bt(z,!1,!1)).length;if(s<1)throw new Error("bindAll must be passed function names");for(;s--;){var c=z[s];S[c]=oi(S[c],S)}return S}),ct=p(function(S,z,s){return setTimeout(function(){return S.apply(null,s)},z)}),vr=Jt(ct,Ze,1);function sr(S){return function(){return!S.apply(this,arguments)}}function or(S,z){var s;return function(){return--S>0&&(s=z.apply(this,arguments)),S<=1&&(z=null),s}}var ps=Jt(or,2);function Li(S,z,s){z=ui(z,s);for(var c,u=Oe(S),f=0,v=u.length;f<v;f++)if(z(S[c=u[f]],c,S))return c}function Un(S){return function(z,s,c){s=ui(s,c);for(var u=ue(z),f=S>0?0:u-1;f>=0&&f<u;f+=S)if(s(z[f],f,z))return f;return-1}}var Rr=Un(1),Gr=Un(-1);function Pi(S,z,s,c){for(var u=(s=ui(s,c,1))(z),f=0,v=ue(S);f<v;){var b=Math.floor((f+v)/2);s(S[b])<u?f=b+1:v=b}return f}function xn(S,z,s){return function(c,u,f){var v=0,b=ue(c);if(typeof f=="number")S>0?v=f>=0?f:Math.max(f+b,v):b=f>=0?Math.min(f+1,b):f+b+1;else if(s&&f&&b)return c[f=s(c,u)]===u?f:-1;if(u!=u)return(f=z(h.call(c,v,b),Ee))>=0?f+v:-1;for(f=S>0?v:b-1;f>=0&&f<b;f+=S)if(c[f]===u)return f;return-1}}var Vn=xn(1,Rr,Pi),br=xn(-1,Gr);function _i(S,z,s){var c=(Ft(S)?Rr:Li)(S,z,s);if(c!==void 0&&c!==-1)return S[c]}function yi(S,z,s){var c,u;if(z=hn(z,s),Ft(S))for(c=0,u=S.length;c<u;c++)z(S[c],c,S);else{var f=Oe(S);for(c=0,u=f.length;c<u;c++)z(S[f[c]],f[c],S)}return S}function d(S,z,s){z=ui(z,s);for(var c=!Ft(S)&&Oe(S),u=(c||S).length,f=Array(u),v=0;v<u;v++){var b=c?c[v]:v;f[v]=z(S[b],b,S)}return f}function m(S){var z=function(s,c,u,f){var v=!Ft(s)&&Oe(s),b=(v||s).length,A=S>0?0:b-1;for(f||(u=s[v?v[A]:A],A+=S);A>=0&&A<b;A+=S){var j=v?v[A]:A;u=c(u,s[j],j,s)}return u};return function(s,c,u,f){var v=arguments.length>=3;return z(s,hn(c,f,4),u,v)}}var y=m(1),w=m(-1);function I(S,z,s){var c=[];return z=ui(z,s),yi(S,function(u,f,v){z(u,f,v)&&c.push(u)}),c}function W(S,z,s){z=ui(z,s);for(var c=!Ft(S)&&Oe(S),u=(c||S).length,f=0;f<u;f++){var v=c?c[f]:f;if(!z(S[v],v,S))return!1}return!0}function V(S,z,s){z=ui(z,s);for(var c=!Ft(S)&&Oe(S),u=(c||S).length,f=0;f<u;f++){var v=c?c[f]:f;if(z(S[v],v,S))return!0}return!1}function U(S,z,s,c){return Ft(S)||(S=hi(S)),(typeof s!="number"||c)&&(s=0),Vn(S,z,s)>=0}var Y=p(function(S,z,s){var c,u;return Tt(z)?u=z:(z=Oi(z),c=z.slice(0,-1),z=z[z.length-1]),d(S,function(f){var v=u;if(!v){if(c&&c.length&&(f=ln(f,c)),f==null)return;v=f[z]}return v==null?v:v.apply(f,s)})});function ie(S,z){return d(S,tn(z))}function be(S,z,s){var c,u,f=-1/0,v=-1/0;if(z==null||typeof z=="number"&&typeof S[0]!="object"&&S!=null)for(var b=0,A=(S=Ft(S)?S:hi(S)).length;b<A;b++)(c=S[b])!=null&&c>f&&(f=c);else z=ui(z,s),yi(S,function(j,q,re){((u=z(j,q,re))>v||u===-1/0&&f===-1/0)&&(f=j,v=u)});return f}var Ne=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function ye(S){return S?te(S)?h.call(S):Ae(S)?S.match(Ne):Ft(S)?d(S,cn):hi(S):[]}function _e(S,z,s){if(z==null||s)return Ft(S)||(S=hi(S)),S[bn(S.length-1)];var c=ye(S),u=ue(c);z=Math.max(Math.min(z,u),0);for(var f=u-1,v=0;v<z;v++){var b=bn(v,f),A=c[v];c[v]=c[b],c[b]=A}return c.slice(0,z)}function Se(S,z){return function(s,c,u){var f=z?[[],[]]:{};return c=ui(c,u),yi(s,function(v,b){var A=c(v,b,s);S(f,v,A)}),f}}var Re=Se(function(S,z,s){X(S,s)?S[s].push(z):S[s]=[z]}),Ce=Se(function(S,z,s){S[s]=z}),we=Se(function(S,z,s){X(S,s)?S[s]++:S[s]=1}),Ke=Se(function(S,z,s){S[s?0:1].push(z)},!0);function Fe(S,z,s){return z in s}var Be=p(function(S,z){var s={},c=z[0];if(S==null)return s;Tt(c)?(z.length>1&&(c=hn(c,z[1])),z=Ot(S)):(c=Fe,z=Bt(z,!1,!1),S=Object(S));for(var u=0,f=z.length;u<f;u++){var v=z[u],b=S[v];c(b,v,S)&&(s[v]=b)}return s}),ze=p(function(S,z){var s,c=z[0];return Tt(c)?(c=sr(c),z.length>1&&(s=z[1])):(z=d(Bt(z,!1,!1),String),c=function(u,f){return!U(z,f)}),Be(S,c,s)});function _t(S,z,s){return h.call(S,0,Math.max(0,S.length-(z==null||s?1:z)))}function ot(S,z,s){return S==null||S.length<1?z==null||s?void 0:[]:z==null||s?S[0]:_t(S,S.length-z)}function pt(S,z,s){return h.call(S,z==null||s?1:z)}var zn=p(function(S,z){return z=Bt(z,!0,!0),I(S,function(s){return!U(z,s)})}),Yn=p(function(S,z){return zn(S,z)});function Ti(S,z,s,c){me(z)||(c=s,s=z,z=!1),s!=null&&(s=ui(s,c));for(var u=[],f=[],v=0,b=ue(S);v<b;v++){var A=S[v],j=s?s(A,v,S):A;z&&!s?(v&&f===j||u.push(A),f=j):s?U(f,j)||(f.push(j),u.push(A)):U(u,A)||u.push(A)}return u}var un=p(function(S){return Ti(Bt(S,!0,!0))});function Fn(S){for(var z=S&&be(S,ue).length||0,s=Array(z),c=0;c<z;c++)s[c]=ie(S,c);return s}var dn=p(Fn);function qn(S,z){return S._chain?Ze(z).chain():z}function qi(S){return yi(bi(S),function(z){var s=Ze[z]=S[z];Ze.prototype[z]=function(){var c=[this._wrapped];return l.apply(c,arguments),qn(this,s.apply(Ze,c))}}),Ze}yi(["pop","push","reverse","shift","sort","splice","unshift"],function(S){var z=r[S];Ze.prototype[S]=function(){var s=this._wrapped;return s!=null&&(z.apply(s,arguments),S!=="shift"&&S!=="splice"||s.length!==0||delete s[0]),qn(this,s)}}),yi(["concat","join","slice"],function(S){var z=r[S];Ze.prototype[S]=function(){var s=this._wrapped;return s!=null&&(s=z.apply(s,arguments)),qn(this,s)}});var En=qi({__proto__:null,VERSION:i,restArguments:p,isObject:H,isNull:function(S){return S===null},isUndefined:oe,isBoolean:me,isElement:function(S){return!(!S||S.nodeType!==1)},isString:Ae,isNumber:ve,isDate:Le,isRegExp:We,isError:it,isSymbol:Ye,isArrayBuffer:tt,isDataView:B,isArray:te,isFunction:Tt,isArguments:ae,isFinite:function(S){return!Ye(S)&&Z(S)&&!isNaN(parseFloat(S))},isNaN:Ee,isTypedArray:J,isEmpty:function(S){if(S==null)return!0;var z=ue(S);return typeof z=="number"&&(te(S)||Ae(S)||ae(S))?z===0:ue(Oe(S))===0},isMatch:et,isEqual:function(S,z){return ht(S,z)},isMap:xi,isWeakMap:Wt,isSet:Dt,isWeakSet:ji,keys:Oe,allKeys:Ot,values:hi,pairs:function(S){for(var z=Oe(S),s=z.length,c=Array(s),u=0;u<s;u++)c[u]=[z[u],S[z[u]]];return c},invert:vn,functions:bi,methods:bi,extend:Ei,extendOwn:Mt,assign:Mt,defaults:an,create:function(S,z){var s=Ui(S);return z&&Mt(s,z),s},clone:function(S){return H(S)?te(S)?S.slice():Ei({},S):S},tap:function(S,z){return z(S),S},get:Qi,has:function(S,z){for(var s=(z=Oi(z)).length,c=0;c<s;c++){var u=z[c];if(!X(S,u))return!1;S=S[u]}return!!s},mapObject:function(S,z,s){z=ui(z,s);for(var c=Oe(S),u=c.length,f={},v=0;v<u;v++){var b=c[v];f[b]=z(S[b],b,S)}return f},identity:cn,constant:He,noop:Di,toPath:Vi,property:tn,propertyOf:function(S){return S==null?Di:function(z){return Qi(S,z)}},matcher:en,matches:en,times:function(S,z,s){var c=Array(Math.max(0,S));z=hn(z,s,1);for(var u=0;u<S;u++)c[u]=z(u);return c},random:bn,now:yn,escape:rr,unescape:mr,templateSettings:Yi,template:function(S,z,s){!z&&s&&(z=s),z=an({},z,Ze.templateSettings);var c=RegExp([(z.escape||wn).source,(z.interpolate||wn).source,(z.evaluate||wn).source].join("|")+"|$","g"),u=0,f="__p+='";S.replace(c,function(j,q,re,ge,De){return f+=S.slice(u,De).replace(Ue,ne),u=De+j.length,q?f+=`'+
((__t=(`+q+`))==null?'':_.escape(__t))+
'`:re?f+=`'+
((__t=(`+re+`))==null?'':__t)+
'`:ge&&(f+=`';
`+ge+`
__p+='`),j}),f+=`';
`;var v,b=z.variable;if(b){if(!Me.test(b))throw new Error("variable is not a bare identifier: "+b)}else f=`with(obj||{}){
`+f+`}
`,b="obj";f=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+f+`return __p;
`;try{v=new Function(b,"_",f)}catch(j){throw j.source=f,j}var A=function(j){return v.call(this,j,Ze)};return A.source="function("+b+`){
`+f+"}",A},result:function(S,z,s){var c=(z=Oi(z)).length;if(!c)return Tt(s)?s.call(S):s;for(var u=0;u<c;u++){var f=S==null?void 0:S[z[u]];f===void 0&&(f=s,u=c),S=Tt(f)?f.call(S):f}return S},uniqueId:function(S){var z=++Ve+"";return S?S+z:z},chain:function(S){var z=Ze(S);return z._chain=!0,z},iteratee:Kt,partial:Jt,bind:oi,bindAll:$t,memoize:function(S,z){var s=function(c){var u=s.cache,f=""+(z?z.apply(this,arguments):c);return X(u,f)||(u[f]=S.apply(this,arguments)),u[f]};return s.cache={},s},delay:ct,defer:vr,throttle:function(S,z,s){var c,u,f,v,b=0;s||(s={});var A=function(){b=s.leading===!1?0:yn(),c=null,v=S.apply(u,f),c||(u=f=null)},j=function(){var q=yn();b||s.leading!==!1||(b=q);var re=z-(q-b);return u=this,f=arguments,re<=0||re>z?(c&&(clearTimeout(c),c=null),b=q,v=S.apply(u,f),c||(u=f=null)):c||s.trailing===!1||(c=setTimeout(A,re)),v};return j.cancel=function(){clearTimeout(c),b=0,c=u=f=null},j},debounce:function(S,z,s){var c,u,f,v,b,A=function(){var q=yn()-u;z>q?c=setTimeout(A,z-q):(c=null,s||(v=S.apply(b,f)),c||(f=b=null))},j=p(function(q){return b=this,f=q,u=yn(),c||(c=setTimeout(A,z),s&&(v=S.apply(b,f))),v});return j.cancel=function(){clearTimeout(c),c=f=b=null},j},wrap:function(S,z){return Jt(z,S)},negate:sr,compose:function(){var S=arguments,z=S.length-1;return function(){for(var s=z,c=S[z].apply(this,arguments);s--;)c=S[s].call(this,c);return c}},after:function(S,z){return function(){if(--S<1)return z.apply(this,arguments)}},before:or,once:ps,findKey:Li,findIndex:Rr,findLastIndex:Gr,sortedIndex:Pi,indexOf:Vn,lastIndexOf:br,find:_i,detect:_i,findWhere:function(S,z){return _i(S,en(z))},each:yi,forEach:yi,map:d,collect:d,reduce:y,foldl:y,inject:y,reduceRight:w,foldr:w,filter:I,select:I,reject:function(S,z,s){return I(S,sr(ui(z)),s)},every:W,all:W,some:V,any:V,contains:U,includes:U,include:U,invoke:Y,pluck:ie,where:function(S,z){return I(S,en(z))},max:be,min:function(S,z,s){var c,u,f=1/0,v=1/0;if(z==null||typeof z=="number"&&typeof S[0]!="object"&&S!=null)for(var b=0,A=(S=Ft(S)?S:hi(S)).length;b<A;b++)(c=S[b])!=null&&c<f&&(f=c);else z=ui(z,s),yi(S,function(j,q,re){((u=z(j,q,re))<v||u===1/0&&f===1/0)&&(f=j,v=u)});return f},shuffle:function(S){return _e(S,1/0)},sample:_e,sortBy:function(S,z,s){var c=0;return z=ui(z,s),ie(d(S,function(u,f,v){return{value:u,index:c++,criteria:z(u,f,v)}}).sort(function(u,f){var v=u.criteria,b=f.criteria;if(v!==b){if(v>b||v===void 0)return 1;if(v<b||b===void 0)return-1}return u.index-f.index}),"value")},groupBy:Re,indexBy:Ce,countBy:we,partition:Ke,toArray:ye,size:function(S){return S==null?0:Ft(S)?S.length:Oe(S).length},pick:Be,omit:ze,first:ot,head:ot,take:ot,initial:_t,last:function(S,z,s){return S==null||S.length<1?z==null||s?void 0:[]:z==null||s?S[S.length-1]:pt(S,Math.max(0,S.length-z))},rest:pt,tail:pt,drop:pt,compact:function(S){return I(S,Boolean)},flatten:function(S,z){return Bt(S,z,!1)},without:Yn,uniq:Ti,unique:Ti,union:un,intersection:function(S){for(var z=[],s=arguments.length,c=0,u=ue(S);c<u;c++){var f=S[c];if(!U(z,f)){var v;for(v=1;v<s&&U(arguments[v],f);v++);v===s&&z.push(f)}}return z},difference:zn,unzip:Fn,transpose:Fn,zip:dn,object:function(S,z){for(var s={},c=0,u=ue(S);c<u;c++)z?s[S[c]]=z[c]:s[S[c][0]]=S[c][1];return s},range:function(S,z,s){z==null&&(z=S||0,S=0),s||(s=z<S?-1:1);for(var c=Math.max(Math.ceil((z-S)/s),0),u=Array(c),f=0;f<c;f++,S+=s)u[f]=S;return u},chunk:function(S,z){if(z==null||z<1)return[];for(var s=[],c=0,u=S.length;c<u;)s.push(h.call(S,c,c+=z));return s},mixin:qi,default:Ze});return En._=En,En})}(pl)),pl.exports}var gl={exports:{}};/*!
 * jQuery JavaScript Library v3.6.0
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2021-03-02T17:08Z
 */var A2;function mh(){return A2||(A2=1,function(t){(function(e,i){t.exports=e.document?i(e,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return i(n)}})(typeof window<"u"?window:ar,function(e,i){var n=[],r=Object.getPrototypeOf,o=n.slice,a=n.flat?function(s){return n.flat.call(s)}:function(s){return n.concat.apply([],s)},l=n.push,h=n.indexOf,g={},_=g.toString,x=g.hasOwnProperty,T=x.toString,M=T.call(Object),D={},F=function(c){return typeof c=="function"&&typeof c.nodeType!="number"&&typeof c.item!="function"},Q=function(c){return c!=null&&c===c.window},K=e.document,Z={type:!0,src:!0,nonce:!0,noModule:!0};function ee(s,c,u){u=u||K;var f,v,b=u.createElement("script");if(b.text=s,c)for(f in Z)v=c[f]||c.getAttribute&&c.getAttribute(f),v&&b.setAttribute(f,v);u.head.appendChild(b).parentNode.removeChild(b)}function he(s){return s==null?s+"":typeof s=="object"||typeof s=="function"?g[_.call(s)]||"object":typeof s}var pe="3.6.0",p=function(s,c){return new p.fn.init(s,c)};p.fn=p.prototype={jquery:pe,constructor:p,length:0,toArray:function(){return o.call(this)},get:function(s){return s==null?o.call(this):s<0?this[s+this.length]:this[s]},pushStack:function(s){var c=p.merge(this.constructor(),s);return c.prevObject=this,c},each:function(s){return p.each(this,s)},map:function(s){return this.pushStack(p.map(this,function(c,u){return s.call(c,u,c)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(p.grep(this,function(s,c){return(c+1)%2}))},odd:function(){return this.pushStack(p.grep(this,function(s,c){return c%2}))},eq:function(s){var c=this.length,u=+s+(s<0?c:0);return this.pushStack(u>=0&&u<c?[this[u]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:n.sort,splice:n.splice},p.extend=p.fn.extend=function(){var s,c,u,f,v,b,A=arguments[0]||{},j=1,q=arguments.length,re=!1;for(typeof A=="boolean"&&(re=A,A=arguments[j]||{},j++),typeof A!="object"&&!F(A)&&(A={}),j===q&&(A=this,j--);j<q;j++)if((s=arguments[j])!=null)for(c in s)f=s[c],!(c==="__proto__"||A===f)&&(re&&f&&(p.isPlainObject(f)||(v=Array.isArray(f)))?(u=A[c],v&&!Array.isArray(u)?b=[]:!v&&!p.isPlainObject(u)?b={}:b=u,v=!1,A[c]=p.extend(re,b,f)):f!==void 0&&(A[c]=f));return A},p.extend({expando:"jQuery"+(pe+Math.random()).replace(/\D/g,""),isReady:!0,error:function(s){throw new Error(s)},noop:function(){},isPlainObject:function(s){var c,u;return!s||_.call(s)!=="[object Object]"?!1:(c=r(s),c?(u=x.call(c,"constructor")&&c.constructor,typeof u=="function"&&T.call(u)===M):!0)},isEmptyObject:function(s){var c;for(c in s)return!1;return!0},globalEval:function(s,c,u){ee(s,{nonce:c&&c.nonce},u)},each:function(s,c){var u,f=0;if(H(s))for(u=s.length;f<u&&c.call(s[f],f,s[f])!==!1;f++);else for(f in s)if(c.call(s[f],f,s[f])===!1)break;return s},makeArray:function(s,c){var u=c||[];return s!=null&&(H(Object(s))?p.merge(u,typeof s=="string"?[s]:s):l.call(u,s)),u},inArray:function(s,c,u){return c==null?-1:h.call(c,s,u)},merge:function(s,c){for(var u=+c.length,f=0,v=s.length;f<u;f++)s[v++]=c[f];return s.length=v,s},grep:function(s,c,u){for(var f,v=[],b=0,A=s.length,j=!u;b<A;b++)f=!c(s[b],b),f!==j&&v.push(s[b]);return v},map:function(s,c,u){var f,v,b=0,A=[];if(H(s))for(f=s.length;b<f;b++)v=c(s[b],b,u),v!=null&&A.push(v);else for(b in s)v=c(s[b],b,u),v!=null&&A.push(v);return a(A)},guid:1,support:D}),typeof Symbol=="function"&&(p.fn[Symbol.iterator]=n[Symbol.iterator]),p.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(s,c){g["[object "+c+"]"]=c.toLowerCase()});function H(s){var c=!!s&&"length"in s&&s.length,u=he(s);return F(s)||Q(s)?!1:u==="array"||c===0||typeof c=="number"&&c>0&&c-1 in s}var oe=function(s){var c,u,f,v,b,A,j,q,re,ge,De,de,xe,at,Ct,ut,Mi,ki,Sn,Qt="sizzle"+1*new Date,kt=s.document,fn=0,Ht=0,gi=$o(),js=$o(),Do=$o(),Tn=$o(),Kr=function(P,G){return P===G&&(De=!0),0},Jr={}.hasOwnProperty,pn=[],zr=pn.pop,Dn=pn.push,Fr=pn.push,D1=pn.slice,Qr=function(P,G){for(var se=0,ke=P.length;se<ke;se++)if(P[se]===G)return se;return-1},Va="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Xt="[\\x20\\t\\r\\n\\f]",es="(?:\\\\[\\da-fA-F]{1,6}"+Xt+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",L1="\\["+Xt+"*("+es+")(?:"+Xt+"*([*^$|!~]?=)"+Xt+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+es+"))|)"+Xt+"*\\]",Ya=":("+es+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+L1+")*)|.*)\\)|)",pu=new RegExp(Xt+"+","g"),Lo=new RegExp("^"+Xt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Xt+"+$","g"),gu=new RegExp("^"+Xt+"*,"+Xt+"*"),P1=new RegExp("^"+Xt+"*([>+~]|"+Xt+")"+Xt+"*"),mu=new RegExp(Xt+"|>"),_u=new RegExp(Ya),vu=new RegExp("^"+es+"$"),Po={ID:new RegExp("^#("+es+")"),CLASS:new RegExp("^\\.("+es+")"),TAG:new RegExp("^("+es+"|[*])"),ATTR:new RegExp("^"+L1),PSEUDO:new RegExp("^"+Ya),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Xt+"*(even|odd|(([+-]|)(\\d*)n|)"+Xt+"*(?:([+-]|)"+Xt+"*(\\d+)|))"+Xt+"*\\)|)","i"),bool:new RegExp("^(?:"+Va+")$","i"),needsContext:new RegExp("^"+Xt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Xt+"*((?:-\\d)?\\d*)"+Xt+"*\\)|)(?=[^-]|$)","i")},bu=/HTML$/i,yu=/^(?:input|select|textarea|button)$/i,wu=/^h\d$/i,Us=/^[^{]+\{\s*\[native \w/,xu=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,qa=/[+~]/,yr=new RegExp("\\\\[\\da-fA-F]{1,6}"+Xt+"?|\\\\([^\\r\\n\\f])","g"),wr=function(P,G){var se="0x"+P.slice(1)-65536;return G||(se<0?String.fromCharCode(se+65536):String.fromCharCode(se>>10|55296,se&1023|56320))},$1=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,B1=function(P,G){return G?P==="\0"?"�":P.slice(0,-1)+"\\"+P.charCodeAt(P.length-1).toString(16)+" ":"\\"+P},W1=function(){de()},Eu=Wo(function(P){return P.disabled===!0&&P.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{Fr.apply(pn=D1.call(kt.childNodes),kt.childNodes),pn[kt.childNodes.length].nodeType}catch{Fr={apply:pn.length?function(G,se){Dn.apply(G,D1.call(se))}:function(G,se){for(var ke=G.length,le=0;G[ke++]=se[le++];);G.length=ke-1}}}function ti(P,G,se,ke){var le,Ie,Pe,Xe,Je,vt,gt,yt=G&&G.ownerDocument,zt=G?G.nodeType:9;if(se=se||[],typeof P!="string"||!P||zt!==1&&zt!==9&&zt!==11)return se;if(!ke&&(de(G),G=G||xe,Ct)){if(zt!==11&&(Je=xu.exec(P)))if(le=Je[1]){if(zt===9)if(Pe=G.getElementById(le)){if(Pe.id===le)return se.push(Pe),se}else return se;else if(yt&&(Pe=yt.getElementById(le))&&Sn(G,Pe)&&Pe.id===le)return se.push(Pe),se}else{if(Je[2])return Fr.apply(se,G.getElementsByTagName(P)),se;if((le=Je[3])&&u.getElementsByClassName&&G.getElementsByClassName)return Fr.apply(se,G.getElementsByClassName(le)),se}if(u.qsa&&!Tn[P+" "]&&(!ut||!ut.test(P))&&(zt!==1||G.nodeName.toLowerCase()!=="object")){if(gt=P,yt=G,zt===1&&(mu.test(P)||P1.test(P))){for(yt=qa.test(P)&&Za(G.parentNode)||G,(yt!==G||!u.scope)&&((Xe=G.getAttribute("id"))?Xe=Xe.replace($1,B1):G.setAttribute("id",Xe=Qt)),vt=A(P),Ie=vt.length;Ie--;)vt[Ie]=(Xe?"#"+Xe:":scope")+" "+Bo(vt[Ie]);gt=vt.join(",")}try{return Fr.apply(se,yt.querySelectorAll(gt)),se}catch{Tn(P,!0)}finally{Xe===Qt&&G.removeAttribute("id")}}}return q(P.replace(Lo,"$1"),G,se,ke)}function $o(){var P=[];function G(se,ke){return P.push(se+" ")>f.cacheLength&&delete G[P.shift()],G[se+" "]=ke}return G}function Xn(P){return P[Qt]=!0,P}function Zn(P){var G=xe.createElement("fieldset");try{return!!P(G)}catch{return!1}finally{G.parentNode&&G.parentNode.removeChild(G),G=null}}function Xa(P,G){for(var se=P.split("|"),ke=se.length;ke--;)f.attrHandle[se[ke]]=G}function H1(P,G){var se=G&&P,ke=se&&P.nodeType===1&&G.nodeType===1&&P.sourceIndex-G.sourceIndex;if(ke)return ke;if(se){for(;se=se.nextSibling;)if(se===G)return-1}return P?1:-1}function Su(P){return function(G){var se=G.nodeName.toLowerCase();return se==="input"&&G.type===P}}function Tu(P){return function(G){var se=G.nodeName.toLowerCase();return(se==="input"||se==="button")&&G.type===P}}function j1(P){return function(G){return"form"in G?G.parentNode&&G.disabled===!1?"label"in G?"label"in G.parentNode?G.parentNode.disabled===P:G.disabled===P:G.isDisabled===P||G.isDisabled!==!P&&Eu(G)===P:G.disabled===P:"label"in G?G.disabled===P:!1}}function ts(P){return Xn(function(G){return G=+G,Xn(function(se,ke){for(var le,Ie=P([],se.length,G),Pe=Ie.length;Pe--;)se[le=Ie[Pe]]&&(se[le]=!(ke[le]=se[le]))})})}function Za(P){return P&&typeof P.getElementsByTagName<"u"&&P}u=ti.support={},b=ti.isXML=function(P){var G=P&&P.namespaceURI,se=P&&(P.ownerDocument||P).documentElement;return!bu.test(G||se&&se.nodeName||"HTML")},de=ti.setDocument=function(P){var G,se,ke=P?P.ownerDocument||P:kt;return ke==xe||ke.nodeType!==9||!ke.documentElement||(xe=ke,at=xe.documentElement,Ct=!b(xe),kt!=xe&&(se=xe.defaultView)&&se.top!==se&&(se.addEventListener?se.addEventListener("unload",W1,!1):se.attachEvent&&se.attachEvent("onunload",W1)),u.scope=Zn(function(le){return at.appendChild(le).appendChild(xe.createElement("div")),typeof le.querySelectorAll<"u"&&!le.querySelectorAll(":scope fieldset div").length}),u.attributes=Zn(function(le){return le.className="i",!le.getAttribute("className")}),u.getElementsByTagName=Zn(function(le){return le.appendChild(xe.createComment("")),!le.getElementsByTagName("*").length}),u.getElementsByClassName=Us.test(xe.getElementsByClassName),u.getById=Zn(function(le){return at.appendChild(le).id=Qt,!xe.getElementsByName||!xe.getElementsByName(Qt).length}),u.getById?(f.filter.ID=function(le){var Ie=le.replace(yr,wr);return function(Pe){return Pe.getAttribute("id")===Ie}},f.find.ID=function(le,Ie){if(typeof Ie.getElementById<"u"&&Ct){var Pe=Ie.getElementById(le);return Pe?[Pe]:[]}}):(f.filter.ID=function(le){var Ie=le.replace(yr,wr);return function(Pe){var Xe=typeof Pe.getAttributeNode<"u"&&Pe.getAttributeNode("id");return Xe&&Xe.value===Ie}},f.find.ID=function(le,Ie){if(typeof Ie.getElementById<"u"&&Ct){var Pe,Xe,Je,vt=Ie.getElementById(le);if(vt){if(Pe=vt.getAttributeNode("id"),Pe&&Pe.value===le)return[vt];for(Je=Ie.getElementsByName(le),Xe=0;vt=Je[Xe++];)if(Pe=vt.getAttributeNode("id"),Pe&&Pe.value===le)return[vt]}return[]}}),f.find.TAG=u.getElementsByTagName?function(le,Ie){if(typeof Ie.getElementsByTagName<"u")return Ie.getElementsByTagName(le);if(u.qsa)return Ie.querySelectorAll(le)}:function(le,Ie){var Pe,Xe=[],Je=0,vt=Ie.getElementsByTagName(le);if(le==="*"){for(;Pe=vt[Je++];)Pe.nodeType===1&&Xe.push(Pe);return Xe}return vt},f.find.CLASS=u.getElementsByClassName&&function(le,Ie){if(typeof Ie.getElementsByClassName<"u"&&Ct)return Ie.getElementsByClassName(le)},Mi=[],ut=[],(u.qsa=Us.test(xe.querySelectorAll))&&(Zn(function(le){var Ie;at.appendChild(le).innerHTML="<a id='"+Qt+"'></a><select id='"+Qt+"-\r\\' msallowcapture=''><option selected=''></option></select>",le.querySelectorAll("[msallowcapture^='']").length&&ut.push("[*^$]="+Xt+`*(?:''|"")`),le.querySelectorAll("[selected]").length||ut.push("\\["+Xt+"*(?:value|"+Va+")"),le.querySelectorAll("[id~="+Qt+"-]").length||ut.push("~="),Ie=xe.createElement("input"),Ie.setAttribute("name",""),le.appendChild(Ie),le.querySelectorAll("[name='']").length||ut.push("\\["+Xt+"*name"+Xt+"*="+Xt+`*(?:''|"")`),le.querySelectorAll(":checked").length||ut.push(":checked"),le.querySelectorAll("a#"+Qt+"+*").length||ut.push(".#.+[+~]"),le.querySelectorAll("\\\f"),ut.push("[\\r\\n\\f]")}),Zn(function(le){le.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var Ie=xe.createElement("input");Ie.setAttribute("type","hidden"),le.appendChild(Ie).setAttribute("name","D"),le.querySelectorAll("[name=d]").length&&ut.push("name"+Xt+"*[*^$|!~]?="),le.querySelectorAll(":enabled").length!==2&&ut.push(":enabled",":disabled"),at.appendChild(le).disabled=!0,le.querySelectorAll(":disabled").length!==2&&ut.push(":enabled",":disabled"),le.querySelectorAll("*,:x"),ut.push(",.*:")})),(u.matchesSelector=Us.test(ki=at.matches||at.webkitMatchesSelector||at.mozMatchesSelector||at.oMatchesSelector||at.msMatchesSelector))&&Zn(function(le){u.disconnectedMatch=ki.call(le,"*"),ki.call(le,"[s!='']:x"),Mi.push("!=",Ya)}),ut=ut.length&&new RegExp(ut.join("|")),Mi=Mi.length&&new RegExp(Mi.join("|")),G=Us.test(at.compareDocumentPosition),Sn=G||Us.test(at.contains)?function(le,Ie){var Pe=le.nodeType===9?le.documentElement:le,Xe=Ie&&Ie.parentNode;return le===Xe||!!(Xe&&Xe.nodeType===1&&(Pe.contains?Pe.contains(Xe):le.compareDocumentPosition&&le.compareDocumentPosition(Xe)&16))}:function(le,Ie){if(Ie){for(;Ie=Ie.parentNode;)if(Ie===le)return!0}return!1},Kr=G?function(le,Ie){if(le===Ie)return De=!0,0;var Pe=!le.compareDocumentPosition-!Ie.compareDocumentPosition;return Pe||(Pe=(le.ownerDocument||le)==(Ie.ownerDocument||Ie)?le.compareDocumentPosition(Ie):1,Pe&1||!u.sortDetached&&Ie.compareDocumentPosition(le)===Pe?le==xe||le.ownerDocument==kt&&Sn(kt,le)?-1:Ie==xe||Ie.ownerDocument==kt&&Sn(kt,Ie)?1:ge?Qr(ge,le)-Qr(ge,Ie):0:Pe&4?-1:1)}:function(le,Ie){if(le===Ie)return De=!0,0;var Pe,Xe=0,Je=le.parentNode,vt=Ie.parentNode,gt=[le],yt=[Ie];if(!Je||!vt)return le==xe?-1:Ie==xe?1:Je?-1:vt?1:ge?Qr(ge,le)-Qr(ge,Ie):0;if(Je===vt)return H1(le,Ie);for(Pe=le;Pe=Pe.parentNode;)gt.unshift(Pe);for(Pe=Ie;Pe=Pe.parentNode;)yt.unshift(Pe);for(;gt[Xe]===yt[Xe];)Xe++;return Xe?H1(gt[Xe],yt[Xe]):gt[Xe]==kt?-1:yt[Xe]==kt?1:0}),xe},ti.matches=function(P,G){return ti(P,null,null,G)},ti.matchesSelector=function(P,G){if(de(P),u.matchesSelector&&Ct&&!Tn[G+" "]&&(!Mi||!Mi.test(G))&&(!ut||!ut.test(G)))try{var se=ki.call(P,G);if(se||u.disconnectedMatch||P.document&&P.document.nodeType!==11)return se}catch{Tn(G,!0)}return ti(G,xe,null,[P]).length>0},ti.contains=function(P,G){return(P.ownerDocument||P)!=xe&&de(P),Sn(P,G)},ti.attr=function(P,G){(P.ownerDocument||P)!=xe&&de(P);var se=f.attrHandle[G.toLowerCase()],ke=se&&Jr.call(f.attrHandle,G.toLowerCase())?se(P,G,!Ct):void 0;return ke!==void 0?ke:u.attributes||!Ct?P.getAttribute(G):(ke=P.getAttributeNode(G))&&ke.specified?ke.value:null},ti.escape=function(P){return(P+"").replace($1,B1)},ti.error=function(P){throw new Error("Syntax error, unrecognized expression: "+P)},ti.uniqueSort=function(P){var G,se=[],ke=0,le=0;if(De=!u.detectDuplicates,ge=!u.sortStable&&P.slice(0),P.sort(Kr),De){for(;G=P[le++];)G===P[le]&&(ke=se.push(le));for(;ke--;)P.splice(se[ke],1)}return ge=null,P},v=ti.getText=function(P){var G,se="",ke=0,le=P.nodeType;if(le){if(le===1||le===9||le===11){if(typeof P.textContent=="string")return P.textContent;for(P=P.firstChild;P;P=P.nextSibling)se+=v(P)}else if(le===3||le===4)return P.nodeValue}else for(;G=P[ke++];)se+=v(G);return se},f=ti.selectors={cacheLength:50,createPseudo:Xn,match:Po,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(P){return P[1]=P[1].replace(yr,wr),P[3]=(P[3]||P[4]||P[5]||"").replace(yr,wr),P[2]==="~="&&(P[3]=" "+P[3]+" "),P.slice(0,4)},CHILD:function(P){return P[1]=P[1].toLowerCase(),P[1].slice(0,3)==="nth"?(P[3]||ti.error(P[0]),P[4]=+(P[4]?P[5]+(P[6]||1):2*(P[3]==="even"||P[3]==="odd")),P[5]=+(P[7]+P[8]||P[3]==="odd")):P[3]&&ti.error(P[0]),P},PSEUDO:function(P){var G,se=!P[6]&&P[2];return Po.CHILD.test(P[0])?null:(P[3]?P[2]=P[4]||P[5]||"":se&&_u.test(se)&&(G=A(se,!0))&&(G=se.indexOf(")",se.length-G)-se.length)&&(P[0]=P[0].slice(0,G),P[2]=se.slice(0,G)),P.slice(0,3))}},filter:{TAG:function(P){var G=P.replace(yr,wr).toLowerCase();return P==="*"?function(){return!0}:function(se){return se.nodeName&&se.nodeName.toLowerCase()===G}},CLASS:function(P){var G=gi[P+" "];return G||(G=new RegExp("(^|"+Xt+")"+P+"("+Xt+"|$)"))&&gi(P,function(se){return G.test(typeof se.className=="string"&&se.className||typeof se.getAttribute<"u"&&se.getAttribute("class")||"")})},ATTR:function(P,G,se){return function(ke){var le=ti.attr(ke,P);return le==null?G==="!=":G?(le+="",G==="="?le===se:G==="!="?le!==se:G==="^="?se&&le.indexOf(se)===0:G==="*="?se&&le.indexOf(se)>-1:G==="$="?se&&le.slice(-se.length)===se:G==="~="?(" "+le.replace(pu," ")+" ").indexOf(se)>-1:G==="|="?le===se||le.slice(0,se.length+1)===se+"-":!1):!0}},CHILD:function(P,G,se,ke,le){var Ie=P.slice(0,3)!=="nth",Pe=P.slice(-4)!=="last",Xe=G==="of-type";return ke===1&&le===0?function(Je){return!!Je.parentNode}:function(Je,vt,gt){var yt,zt,ii,bt,Ni,Xi,kn=Ie!==Pe?"nextSibling":"previousSibling",di=Je.parentNode,Vs=Xe&&Je.nodeName.toLowerCase(),Ys=!gt&&!Xe,Cn=!1;if(di){if(Ie){for(;kn;){for(bt=Je;bt=bt[kn];)if(Xe?bt.nodeName.toLowerCase()===Vs:bt.nodeType===1)return!1;Xi=kn=P==="only"&&!Xi&&"nextSibling"}return!0}if(Xi=[Pe?di.firstChild:di.lastChild],Pe&&Ys){for(bt=di,ii=bt[Qt]||(bt[Qt]={}),zt=ii[bt.uniqueID]||(ii[bt.uniqueID]={}),yt=zt[P]||[],Ni=yt[0]===fn&&yt[1],Cn=Ni&&yt[2],bt=Ni&&di.childNodes[Ni];bt=++Ni&&bt&&bt[kn]||(Cn=Ni=0)||Xi.pop();)if(bt.nodeType===1&&++Cn&&bt===Je){zt[P]=[fn,Ni,Cn];break}}else if(Ys&&(bt=Je,ii=bt[Qt]||(bt[Qt]={}),zt=ii[bt.uniqueID]||(ii[bt.uniqueID]={}),yt=zt[P]||[],Ni=yt[0]===fn&&yt[1],Cn=Ni),Cn===!1)for(;(bt=++Ni&&bt&&bt[kn]||(Cn=Ni=0)||Xi.pop())&&!((Xe?bt.nodeName.toLowerCase()===Vs:bt.nodeType===1)&&++Cn&&(Ys&&(ii=bt[Qt]||(bt[Qt]={}),zt=ii[bt.uniqueID]||(ii[bt.uniqueID]={}),zt[P]=[fn,Cn]),bt===Je)););return Cn-=le,Cn===ke||Cn%ke===0&&Cn/ke>=0}}},PSEUDO:function(P,G){var se,ke=f.pseudos[P]||f.setFilters[P.toLowerCase()]||ti.error("unsupported pseudo: "+P);return ke[Qt]?ke(G):ke.length>1?(se=[P,P,"",G],f.setFilters.hasOwnProperty(P.toLowerCase())?Xn(function(le,Ie){for(var Pe,Xe=ke(le,G),Je=Xe.length;Je--;)Pe=Qr(le,Xe[Je]),le[Pe]=!(Ie[Pe]=Xe[Je])}):function(le){return ke(le,0,se)}):ke}},pseudos:{not:Xn(function(P){var G=[],se=[],ke=j(P.replace(Lo,"$1"));return ke[Qt]?Xn(function(le,Ie,Pe,Xe){for(var Je,vt=ke(le,null,Xe,[]),gt=le.length;gt--;)(Je=vt[gt])&&(le[gt]=!(Ie[gt]=Je))}):function(le,Ie,Pe){return G[0]=le,ke(G,null,Pe,se),G[0]=null,!se.pop()}}),has:Xn(function(P){return function(G){return ti(P,G).length>0}}),contains:Xn(function(P){return P=P.replace(yr,wr),function(G){return(G.textContent||v(G)).indexOf(P)>-1}}),lang:Xn(function(P){return vu.test(P||"")||ti.error("unsupported lang: "+P),P=P.replace(yr,wr).toLowerCase(),function(G){var se;do if(se=Ct?G.lang:G.getAttribute("xml:lang")||G.getAttribute("lang"))return se=se.toLowerCase(),se===P||se.indexOf(P+"-")===0;while((G=G.parentNode)&&G.nodeType===1);return!1}}),target:function(P){var G=s.location&&s.location.hash;return G&&G.slice(1)===P.id},root:function(P){return P===at},focus:function(P){return P===xe.activeElement&&(!xe.hasFocus||xe.hasFocus())&&!!(P.type||P.href||~P.tabIndex)},enabled:j1(!1),disabled:j1(!0),checked:function(P){var G=P.nodeName.toLowerCase();return G==="input"&&!!P.checked||G==="option"&&!!P.selected},selected:function(P){return P.parentNode&&P.parentNode.selectedIndex,P.selected===!0},empty:function(P){for(P=P.firstChild;P;P=P.nextSibling)if(P.nodeType<6)return!1;return!0},parent:function(P){return!f.pseudos.empty(P)},header:function(P){return wu.test(P.nodeName)},input:function(P){return yu.test(P.nodeName)},button:function(P){var G=P.nodeName.toLowerCase();return G==="input"&&P.type==="button"||G==="button"},text:function(P){var G;return P.nodeName.toLowerCase()==="input"&&P.type==="text"&&((G=P.getAttribute("type"))==null||G.toLowerCase()==="text")},first:ts(function(){return[0]}),last:ts(function(P,G){return[G-1]}),eq:ts(function(P,G,se){return[se<0?se+G:se]}),even:ts(function(P,G){for(var se=0;se<G;se+=2)P.push(se);return P}),odd:ts(function(P,G){for(var se=1;se<G;se+=2)P.push(se);return P}),lt:ts(function(P,G,se){for(var ke=se<0?se+G:se>G?G:se;--ke>=0;)P.push(ke);return P}),gt:ts(function(P,G,se){for(var ke=se<0?se+G:se;++ke<G;)P.push(ke);return P})}},f.pseudos.nth=f.pseudos.eq;for(c in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})f.pseudos[c]=Su(c);for(c in{submit:!0,reset:!0})f.pseudos[c]=Tu(c);function U1(){}U1.prototype=f.filters=f.pseudos,f.setFilters=new U1,A=ti.tokenize=function(P,G){var se,ke,le,Ie,Pe,Xe,Je,vt=js[P+" "];if(vt)return G?0:vt.slice(0);for(Pe=P,Xe=[],Je=f.preFilter;Pe;){(!se||(ke=gu.exec(Pe)))&&(ke&&(Pe=Pe.slice(ke[0].length)||Pe),Xe.push(le=[])),se=!1,(ke=P1.exec(Pe))&&(se=ke.shift(),le.push({value:se,type:ke[0].replace(Lo," ")}),Pe=Pe.slice(se.length));for(Ie in f.filter)(ke=Po[Ie].exec(Pe))&&(!Je[Ie]||(ke=Je[Ie](ke)))&&(se=ke.shift(),le.push({value:se,type:Ie,matches:ke}),Pe=Pe.slice(se.length));if(!se)break}return G?Pe.length:Pe?ti.error(P):js(P,Xe).slice(0)};function Bo(P){for(var G=0,se=P.length,ke="";G<se;G++)ke+=P[G].value;return ke}function Wo(P,G,se){var ke=G.dir,le=G.next,Ie=le||ke,Pe=se&&Ie==="parentNode",Xe=Ht++;return G.first?function(Je,vt,gt){for(;Je=Je[ke];)if(Je.nodeType===1||Pe)return P(Je,vt,gt);return!1}:function(Je,vt,gt){var yt,zt,ii,bt=[fn,Xe];if(gt){for(;Je=Je[ke];)if((Je.nodeType===1||Pe)&&P(Je,vt,gt))return!0}else for(;Je=Je[ke];)if(Je.nodeType===1||Pe)if(ii=Je[Qt]||(Je[Qt]={}),zt=ii[Je.uniqueID]||(ii[Je.uniqueID]={}),le&&le===Je.nodeName.toLowerCase())Je=Je[ke]||Je;else{if((yt=zt[Ie])&&yt[0]===fn&&yt[1]===Xe)return bt[2]=yt[2];if(zt[Ie]=bt,bt[2]=P(Je,vt,gt))return!0}return!1}}function Ga(P){return P.length>1?function(G,se,ke){for(var le=P.length;le--;)if(!P[le](G,se,ke))return!1;return!0}:P[0]}function ku(P,G,se){for(var ke=0,le=G.length;ke<le;ke++)ti(P,G[ke],se);return se}function Ho(P,G,se,ke,le){for(var Ie,Pe=[],Xe=0,Je=P.length,vt=G!=null;Xe<Je;Xe++)(Ie=P[Xe])&&(!se||se(Ie,ke,le))&&(Pe.push(Ie),vt&&G.push(Xe));return Pe}function Ka(P,G,se,ke,le,Ie){return ke&&!ke[Qt]&&(ke=Ka(ke)),le&&!le[Qt]&&(le=Ka(le,Ie)),Xn(function(Pe,Xe,Je,vt){var gt,yt,zt,ii=[],bt=[],Ni=Xe.length,Xi=Pe||ku(G||"*",Je.nodeType?[Je]:Je,[]),kn=P&&(Pe||!G)?Ho(Xi,ii,P,Je,vt):Xi,di=se?le||(Pe?P:Ni||ke)?[]:Xe:kn;if(se&&se(kn,di,Je,vt),ke)for(gt=Ho(di,bt),ke(gt,[],Je,vt),yt=gt.length;yt--;)(zt=gt[yt])&&(di[bt[yt]]=!(kn[bt[yt]]=zt));if(Pe){if(le||P){if(le){for(gt=[],yt=di.length;yt--;)(zt=di[yt])&&gt.push(kn[yt]=zt);le(null,di=[],gt,vt)}for(yt=di.length;yt--;)(zt=di[yt])&&(gt=le?Qr(Pe,zt):ii[yt])>-1&&(Pe[gt]=!(Xe[gt]=zt))}}else di=Ho(di===Xe?di.splice(Ni,di.length):di),le?le(null,Xe,di,vt):Fr.apply(Xe,di)})}function Ja(P){for(var G,se,ke,le=P.length,Ie=f.relative[P[0].type],Pe=Ie||f.relative[" "],Xe=Ie?1:0,Je=Wo(function(yt){return yt===G},Pe,!0),vt=Wo(function(yt){return Qr(G,yt)>-1},Pe,!0),gt=[function(yt,zt,ii){var bt=!Ie&&(ii||zt!==re)||((G=zt).nodeType?Je(yt,zt,ii):vt(yt,zt,ii));return G=null,bt}];Xe<le;Xe++)if(se=f.relative[P[Xe].type])gt=[Wo(Ga(gt),se)];else{if(se=f.filter[P[Xe].type].apply(null,P[Xe].matches),se[Qt]){for(ke=++Xe;ke<le&&!f.relative[P[ke].type];ke++);return Ka(Xe>1&&Ga(gt),Xe>1&&Bo(P.slice(0,Xe-1).concat({value:P[Xe-2].type===" "?"*":""})).replace(Lo,"$1"),se,Xe<ke&&Ja(P.slice(Xe,ke)),ke<le&&Ja(P=P.slice(ke)),ke<le&&Bo(P))}gt.push(se)}return Ga(gt)}function Cu(P,G){var se=G.length>0,ke=P.length>0,le=function(Ie,Pe,Xe,Je,vt){var gt,yt,zt,ii=0,bt="0",Ni=Ie&&[],Xi=[],kn=re,di=Ie||ke&&f.find.TAG("*",vt),Vs=fn+=kn==null?1:Math.random()||.1,Ys=di.length;for(vt&&(re=Pe==xe||Pe||vt);bt!==Ys&&(gt=di[bt])!=null;bt++){if(ke&&gt){for(yt=0,!Pe&&gt.ownerDocument!=xe&&(de(gt),Xe=!Ct);zt=P[yt++];)if(zt(gt,Pe||xe,Xe)){Je.push(gt);break}vt&&(fn=Vs)}se&&((gt=!zt&&gt)&&ii--,Ie&&Ni.push(gt))}if(ii+=bt,se&&bt!==ii){for(yt=0;zt=G[yt++];)zt(Ni,Xi,Pe,Xe);if(Ie){if(ii>0)for(;bt--;)Ni[bt]||Xi[bt]||(Xi[bt]=zr.call(Je));Xi=Ho(Xi)}Fr.apply(Je,Xi),vt&&!Ie&&Xi.length>0&&ii+G.length>1&&ti.uniqueSort(Je)}return vt&&(fn=Vs,re=kn),Ni};return se?Xn(le):le}return j=ti.compile=function(P,G){var se,ke=[],le=[],Ie=Do[P+" "];if(!Ie){for(G||(G=A(P)),se=G.length;se--;)Ie=Ja(G[se]),Ie[Qt]?ke.push(Ie):le.push(Ie);Ie=Do(P,Cu(le,ke)),Ie.selector=P}return Ie},q=ti.select=function(P,G,se,ke){var le,Ie,Pe,Xe,Je,vt=typeof P=="function"&&P,gt=!ke&&A(P=vt.selector||P);if(se=se||[],gt.length===1){if(Ie=gt[0]=gt[0].slice(0),Ie.length>2&&(Pe=Ie[0]).type==="ID"&&G.nodeType===9&&Ct&&f.relative[Ie[1].type]){if(G=(f.find.ID(Pe.matches[0].replace(yr,wr),G)||[])[0],G)vt&&(G=G.parentNode);else return se;P=P.slice(Ie.shift().value.length)}for(le=Po.needsContext.test(P)?0:Ie.length;le--&&(Pe=Ie[le],!f.relative[Xe=Pe.type]);)if((Je=f.find[Xe])&&(ke=Je(Pe.matches[0].replace(yr,wr),qa.test(Ie[0].type)&&Za(G.parentNode)||G))){if(Ie.splice(le,1),P=ke.length&&Bo(Ie),!P)return Fr.apply(se,ke),se;break}}return(vt||j(P,gt))(ke,G,!Ct,se,!G||qa.test(P)&&Za(G.parentNode)||G),se},u.sortStable=Qt.split("").sort(Kr).join("")===Qt,u.detectDuplicates=!!De,de(),u.sortDetached=Zn(function(P){return P.compareDocumentPosition(xe.createElement("fieldset"))&1}),Zn(function(P){return P.innerHTML="<a href='#'></a>",P.firstChild.getAttribute("href")==="#"})||Xa("type|href|height|width",function(P,G,se){if(!se)return P.getAttribute(G,G.toLowerCase()==="type"?1:2)}),(!u.attributes||!Zn(function(P){return P.innerHTML="<input/>",P.firstChild.setAttribute("value",""),P.firstChild.getAttribute("value")===""}))&&Xa("value",function(P,G,se){if(!se&&P.nodeName.toLowerCase()==="input")return P.defaultValue}),Zn(function(P){return P.getAttribute("disabled")==null})||Xa(Va,function(P,G,se){var ke;if(!se)return P[G]===!0?G.toLowerCase():(ke=P.getAttributeNode(G))&&ke.specified?ke.value:null}),ti}(e);p.find=oe,p.expr=oe.selectors,p.expr[":"]=p.expr.pseudos,p.uniqueSort=p.unique=oe.uniqueSort,p.text=oe.getText,p.isXMLDoc=oe.isXML,p.contains=oe.contains,p.escapeSelector=oe.escape;var me=function(s,c,u){for(var f=[],v=u!==void 0;(s=s[c])&&s.nodeType!==9;)if(s.nodeType===1){if(v&&p(s).is(u))break;f.push(s)}return f},Te=function(s,c){for(var u=[];s;s=s.nextSibling)s.nodeType===1&&s!==c&&u.push(s);return u},Ae=p.expr.match.needsContext;function ve(s,c){return s.nodeName&&s.nodeName.toLowerCase()===c.toLowerCase()}var Le=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function We(s,c,u){return F(c)?p.grep(s,function(f,v){return!!c.call(f,v,f)!==u}):c.nodeType?p.grep(s,function(f){return f===c!==u}):typeof c!="string"?p.grep(s,function(f){return h.call(c,f)>-1!==u}):p.filter(c,s,u)}p.filter=function(s,c,u){var f=c[0];return u&&(s=":not("+s+")"),c.length===1&&f.nodeType===1?p.find.matchesSelector(f,s)?[f]:[]:p.find.matches(s,p.grep(c,function(v){return v.nodeType===1}))},p.fn.extend({find:function(s){var c,u,f=this.length,v=this;if(typeof s!="string")return this.pushStack(p(s).filter(function(){for(c=0;c<f;c++)if(p.contains(v[c],this))return!0}));for(u=this.pushStack([]),c=0;c<f;c++)p.find(s,v[c],u);return f>1?p.uniqueSort(u):u},filter:function(s){return this.pushStack(We(this,s||[],!1))},not:function(s){return this.pushStack(We(this,s||[],!0))},is:function(s){return!!We(this,typeof s=="string"&&Ae.test(s)?p(s):s||[],!1).length}});var it,Ye=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,tt=p.fn.init=function(s,c,u){var f,v;if(!s)return this;if(u=u||it,typeof s=="string")if(s[0]==="<"&&s[s.length-1]===">"&&s.length>=3?f=[null,s,null]:f=Ye.exec(s),f&&(f[1]||!c))if(f[1]){if(c=c instanceof p?c[0]:c,p.merge(this,p.parseHTML(f[1],c&&c.nodeType?c.ownerDocument||c:K,!0)),Le.test(f[1])&&p.isPlainObject(c))for(f in c)F(this[f])?this[f](c[f]):this.attr(f,c[f]);return this}else return v=K.getElementById(f[2]),v&&(this[0]=v,this.length=1),this;else return!c||c.jquery?(c||u).find(s):this.constructor(c).find(s);else{if(s.nodeType)return this[0]=s,this.length=1,this;if(F(s))return u.ready!==void 0?u.ready(s):s(p)}return p.makeArray(s,this)};tt.prototype=p.fn,it=p(K);var Qe=/^(?:parents|prev(?:Until|All))/,st={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({has:function(s){var c=p(s,this),u=c.length;return this.filter(function(){for(var f=0;f<u;f++)if(p.contains(this,c[f]))return!0})},closest:function(s,c){var u,f=0,v=this.length,b=[],A=typeof s!="string"&&p(s);if(!Ae.test(s)){for(;f<v;f++)for(u=this[f];u&&u!==c;u=u.parentNode)if(u.nodeType<11&&(A?A.index(u)>-1:u.nodeType===1&&p.find.matchesSelector(u,s))){b.push(u);break}}return this.pushStack(b.length>1?p.uniqueSort(b):b)},index:function(s){return s?typeof s=="string"?h.call(p(s),this[0]):h.call(this,s.jquery?s[0]:s):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(s,c){return this.pushStack(p.uniqueSort(p.merge(this.get(),p(s,c))))},addBack:function(s){return this.add(s==null?this.prevObject:this.prevObject.filter(s))}});function Tt(s,c){for(;(s=s[c])&&s.nodeType!==1;);return s}p.each({parent:function(s){var c=s.parentNode;return c&&c.nodeType!==11?c:null},parents:function(s){return me(s,"parentNode")},parentsUntil:function(s,c,u){return me(s,"parentNode",u)},next:function(s){return Tt(s,"nextSibling")},prev:function(s){return Tt(s,"previousSibling")},nextAll:function(s){return me(s,"nextSibling")},prevAll:function(s){return me(s,"previousSibling")},nextUntil:function(s,c,u){return me(s,"nextSibling",u)},prevUntil:function(s,c,u){return me(s,"previousSibling",u)},siblings:function(s){return Te((s.parentNode||{}).firstChild,s)},children:function(s){return Te(s.firstChild)},contents:function(s){return s.contentDocument!=null&&r(s.contentDocument)?s.contentDocument:(ve(s,"template")&&(s=s.content||s),p.merge([],s.childNodes))}},function(s,c){p.fn[s]=function(u,f){var v=p.map(this,c,u);return s.slice(-5)!=="Until"&&(f=u),f&&typeof f=="string"&&(v=p.filter(f,v)),this.length>1&&(st[s]||p.uniqueSort(v),Qe.test(s)&&v.reverse()),this.pushStack(v)}});var N=/[^\x20\t\r\n\f]+/g;function O(s){var c={};return p.each(s.match(N)||[],function(u,f){c[f]=!0}),c}p.Callbacks=function(s){s=typeof s=="string"?O(s):p.extend({},s);var c,u,f,v,b=[],A=[],j=-1,q=function(){for(v=v||s.once,f=c=!0;A.length;j=-1)for(u=A.shift();++j<b.length;)b[j].apply(u[0],u[1])===!1&&s.stopOnFalse&&(j=b.length,u=!1);s.memory||(u=!1),c=!1,v&&(u?b=[]:b="")},re={add:function(){return b&&(u&&!c&&(j=b.length-1,A.push(u)),function ge(De){p.each(De,function(de,xe){F(xe)?(!s.unique||!re.has(xe))&&b.push(xe):xe&&xe.length&&he(xe)!=="string"&&ge(xe)})}(arguments),u&&!c&&q()),this},remove:function(){return p.each(arguments,function(ge,De){for(var de;(de=p.inArray(De,b,de))>-1;)b.splice(de,1),de<=j&&j--}),this},has:function(ge){return ge?p.inArray(ge,b)>-1:b.length>0},empty:function(){return b&&(b=[]),this},disable:function(){return v=A=[],b=u="",this},disabled:function(){return!b},lock:function(){return v=A=[],!u&&!c&&(b=u=""),this},locked:function(){return!!v},fireWith:function(ge,De){return v||(De=De||[],De=[ge,De.slice?De.slice():De],A.push(De),c||q()),this},fire:function(){return re.fireWith(this,arguments),this},fired:function(){return!!f}};return re};function k(s){return s}function $(s){throw s}function B(s,c,u,f){var v;try{s&&F(v=s.promise)?v.call(s).done(c).fail(u):s&&F(v=s.then)?v.call(s,c,u):c.apply(void 0,[s].slice(f))}catch(b){u.apply(void 0,[b])}}p.extend({Deferred:function(s){var c=[["notify","progress",p.Callbacks("memory"),p.Callbacks("memory"),2],["resolve","done",p.Callbacks("once memory"),p.Callbacks("once memory"),0,"resolved"],["reject","fail",p.Callbacks("once memory"),p.Callbacks("once memory"),1,"rejected"]],u="pending",f={state:function(){return u},always:function(){return v.done(arguments).fail(arguments),this},catch:function(b){return f.then(null,b)},pipe:function(){var b=arguments;return p.Deferred(function(A){p.each(c,function(j,q){var re=F(b[q[4]])&&b[q[4]];v[q[1]](function(){var ge=re&&re.apply(this,arguments);ge&&F(ge.promise)?ge.promise().progress(A.notify).done(A.resolve).fail(A.reject):A[q[0]+"With"](this,re?[ge]:arguments)})}),b=null}).promise()},then:function(b,A,j){var q=0;function re(ge,De,de,xe){return function(){var at=this,Ct=arguments,ut=function(){var ki,Sn;if(!(ge<q)){if(ki=de.apply(at,Ct),ki===De.promise())throw new TypeError("Thenable self-resolution");Sn=ki&&(typeof ki=="object"||typeof ki=="function")&&ki.then,F(Sn)?xe?Sn.call(ki,re(q,De,k,xe),re(q,De,$,xe)):(q++,Sn.call(ki,re(q,De,k,xe),re(q,De,$,xe),re(q,De,k,De.notifyWith))):(de!==k&&(at=void 0,Ct=[ki]),(xe||De.resolveWith)(at,Ct))}},Mi=xe?ut:function(){try{ut()}catch(ki){p.Deferred.exceptionHook&&p.Deferred.exceptionHook(ki,Mi.stackTrace),ge+1>=q&&(de!==$&&(at=void 0,Ct=[ki]),De.rejectWith(at,Ct))}};ge?Mi():(p.Deferred.getStackHook&&(Mi.stackTrace=p.Deferred.getStackHook()),e.setTimeout(Mi))}}return p.Deferred(function(ge){c[0][3].add(re(0,ge,F(j)?j:k,ge.notifyWith)),c[1][3].add(re(0,ge,F(b)?b:k)),c[2][3].add(re(0,ge,F(A)?A:$))}).promise()},promise:function(b){return b!=null?p.extend(b,f):f}},v={};return p.each(c,function(b,A){var j=A[2],q=A[5];f[A[1]]=j.add,q&&j.add(function(){u=q},c[3-b][2].disable,c[3-b][3].disable,c[0][2].lock,c[0][3].lock),j.add(A[3].fire),v[A[0]]=function(){return v[A[0]+"With"](this===v?void 0:this,arguments),this},v[A[0]+"With"]=j.fireWith}),f.promise(v),s&&s.call(v,v),v},when:function(s){var c=arguments.length,u=c,f=Array(u),v=o.call(arguments),b=p.Deferred(),A=function(j){return function(q){f[j]=this,v[j]=arguments.length>1?o.call(arguments):q,--c||b.resolveWith(f,v)}};if(c<=1&&(B(s,b.done(A(u)).resolve,b.reject,!c),b.state()==="pending"||F(v[u]&&v[u].then)))return b.then();for(;u--;)B(v[u],A(u),b.reject);return b.promise()}});var te=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;p.Deferred.exceptionHook=function(s,c){e.console&&e.console.warn&&s&&te.test(s.name)&&e.console.warn("jQuery.Deferred exception: "+s.message,s.stack,c)},p.readyException=function(s){e.setTimeout(function(){throw s})};var X=p.Deferred();p.fn.ready=function(s){return X.then(s).catch(function(c){p.readyException(c)}),this},p.extend({isReady:!1,readyWait:1,ready:function(s){(s===!0?--p.readyWait:p.isReady)||(p.isReady=!0,!(s!==!0&&--p.readyWait>0)&&X.resolveWith(K,[p]))}}),p.ready.then=X.then;function fe(){K.removeEventListener("DOMContentLoaded",fe),e.removeEventListener("load",fe),p.ready()}K.readyState==="complete"||K.readyState!=="loading"&&!K.documentElement.doScroll?e.setTimeout(p.ready):(K.addEventListener("DOMContentLoaded",fe),e.addEventListener("load",fe));var ae=function(s,c,u,f,v,b,A){var j=0,q=s.length,re=u==null;if(he(u)==="object"){v=!0;for(j in u)ae(s,c,j,u[j],!0,b,A)}else if(f!==void 0&&(v=!0,F(f)||(A=!0),re&&(A?(c.call(s,f),c=null):(re=c,c=function(ge,De,de){return re.call(p(ge),de)})),c))for(;j<q;j++)c(s[j],u,A?f:f.call(s[j],j,c(s[j],u)));return v?s:re?c.call(s):q?c(s[0],u):b},Ee=/^-ms-/,He=/-([a-z])/g;function Ge(s,c){return c.toUpperCase()}function nt(s){return s.replace(Ee,"ms-").replace(He,Ge)}var E=function(s){return s.nodeType===1||s.nodeType===9||!+s.nodeType};function R(){this.expando=p.expando+R.uid++}R.uid=1,R.prototype={cache:function(s){var c=s[this.expando];return c||(c={},E(s)&&(s.nodeType?s[this.expando]=c:Object.defineProperty(s,this.expando,{value:c,configurable:!0}))),c},set:function(s,c,u){var f,v=this.cache(s);if(typeof c=="string")v[nt(c)]=u;else for(f in c)v[nt(f)]=c[f];return v},get:function(s,c){return c===void 0?this.cache(s):s[this.expando]&&s[this.expando][nt(c)]},access:function(s,c,u){return c===void 0||c&&typeof c=="string"&&u===void 0?this.get(s,c):(this.set(s,c,u),u!==void 0?u:c)},remove:function(s,c){var u,f=s[this.expando];if(f!==void 0){if(c!==void 0)for(Array.isArray(c)?c=c.map(nt):(c=nt(c),c=c in f?[c]:c.match(N)||[]),u=c.length;u--;)delete f[c[u]];(c===void 0||p.isEmptyObject(f))&&(s.nodeType?s[this.expando]=void 0:delete s[this.expando])}},hasData:function(s){var c=s[this.expando];return c!==void 0&&!p.isEmptyObject(c)}};var L=new R,J=new R,ue=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ce=/[A-Z]/g;function Oe(s){return s==="true"?!0:s==="false"?!1:s==="null"?null:s===+s+""?+s:ue.test(s)?JSON.parse(s):s}function et(s,c,u){var f;if(u===void 0&&s.nodeType===1)if(f="data-"+c.replace(ce,"-$&").toLowerCase(),u=s.getAttribute(f),typeof u=="string"){try{u=Oe(u)}catch{}J.set(s,c,u)}else u=void 0;return u}p.extend({hasData:function(s){return J.hasData(s)||L.hasData(s)},data:function(s,c,u){return J.access(s,c,u)},removeData:function(s,c){J.remove(s,c)},_data:function(s,c,u){return L.access(s,c,u)},_removeData:function(s,c){L.remove(s,c)}}),p.fn.extend({data:function(s,c){var u,f,v,b=this[0],A=b&&b.attributes;if(s===void 0){if(this.length&&(v=J.get(b),b.nodeType===1&&!L.get(b,"hasDataAttrs"))){for(u=A.length;u--;)A[u]&&(f=A[u].name,f.indexOf("data-")===0&&(f=nt(f.slice(5)),et(b,f,v[f])));L.set(b,"hasDataAttrs",!0)}return v}return typeof s=="object"?this.each(function(){J.set(this,s)}):ae(this,function(j){var q;if(b&&j===void 0)return q=J.get(b,s),q!==void 0||(q=et(b,s),q!==void 0)?q:void 0;this.each(function(){J.set(this,s,j)})},null,c,arguments.length>1,null,!0)},removeData:function(s){return this.each(function(){J.remove(this,s)})}}),p.extend({queue:function(s,c,u){var f;if(s)return c=(c||"fx")+"queue",f=L.get(s,c),u&&(!f||Array.isArray(u)?f=L.access(s,c,p.makeArray(u)):f.push(u)),f||[]},dequeue:function(s,c){c=c||"fx";var u=p.queue(s,c),f=u.length,v=u.shift(),b=p._queueHooks(s,c),A=function(){p.dequeue(s,c)};v==="inprogress"&&(v=u.shift(),f--),v&&(c==="fx"&&u.unshift("inprogress"),delete b.stop,v.call(s,A,b)),!f&&b&&b.empty.fire()},_queueHooks:function(s,c){var u=c+"queueHooks";return L.get(s,u)||L.access(s,u,{empty:p.Callbacks("once memory").add(function(){L.remove(s,[c+"queue",u])})})}}),p.fn.extend({queue:function(s,c){var u=2;return typeof s!="string"&&(c=s,s="fx",u--),arguments.length<u?p.queue(this[0],s):c===void 0?this:this.each(function(){var f=p.queue(this,s,c);p._queueHooks(this,s),s==="fx"&&f[0]!=="inprogress"&&p.dequeue(this,s)})},dequeue:function(s){return this.each(function(){p.dequeue(this,s)})},clearQueue:function(s){return this.queue(s||"fx",[])},promise:function(s,c){var u,f=1,v=p.Deferred(),b=this,A=this.length,j=function(){--f||v.resolveWith(b,[b])};for(typeof s!="string"&&(c=s,s=void 0),s=s||"fx";A--;)u=L.get(b[A],s+"queueHooks"),u&&u.empty&&(f++,u.empty.add(j));return j(),v.promise(c)}});var Ze=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,lt=new RegExp("^(?:([+-])=|)("+Ze+")([a-z%]*)$","i"),xt=["Top","Right","Bottom","Left"],ht=K.documentElement,Ot=function(s){return p.contains(s.ownerDocument,s)},qt={composed:!0};ht.getRootNode&&(Ot=function(s){return p.contains(s.ownerDocument,s)||s.getRootNode(qt)===s.ownerDocument});var Zt=function(s,c){return s=c||s,s.style.display==="none"||s.style.display===""&&Ot(s)&&p.css(s,"display")==="none"};function Pt(s,c,u,f){var v,b,A=20,j=f?function(){return f.cur()}:function(){return p.css(s,c,"")},q=j(),re=u&&u[3]||(p.cssNumber[c]?"":"px"),ge=s.nodeType&&(p.cssNumber[c]||re!=="px"&&+q)&&lt.exec(p.css(s,c));if(ge&&ge[3]!==re){for(q=q/2,re=re||ge[3],ge=+q||1;A--;)p.style(s,c,ge+re),(1-b)*(1-(b=j()/q||.5))<=0&&(A=0),ge=ge/b;ge=ge*2,p.style(s,c,ge+re),u=u||[]}return u&&(ge=+ge||+q||0,v=u[1]?ge+(u[1]+1)*u[2]:+u[2],f&&(f.unit=re,f.start=ge,f.end=v)),v}var Ut={};function ci(s){var c,u=s.ownerDocument,f=s.nodeName,v=Ut[f];return v||(c=u.body.appendChild(u.createElement(f)),v=p.css(c,"display"),c.parentNode.removeChild(c),v==="none"&&(v="block"),Ut[f]=v,v)}function pi(s,c){for(var u,f,v=[],b=0,A=s.length;b<A;b++)f=s[b],f.style&&(u=f.style.display,c?(u==="none"&&(v[b]=L.get(f,"display")||null,v[b]||(f.style.display="")),f.style.display===""&&Zt(f)&&(v[b]=ci(f))):u!=="none"&&(v[b]="none",L.set(f,"display",u)));for(b=0;b<A;b++)v[b]!=null&&(s[b].style.display=v[b]);return s}p.fn.extend({show:function(){return pi(this,!0)},hide:function(){return pi(this)},toggle:function(s){return typeof s=="boolean"?s?this.show():this.hide():this.each(function(){Zt(this)?p(this).show():p(this).hide()})}});var Ii=/^(?:checkbox|radio)$/i,Gt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,xi=/^$|^module$|\/(?:java|ecma)script/i;(function(){var s=K.createDocumentFragment(),c=s.appendChild(K.createElement("div")),u=K.createElement("input");u.setAttribute("type","radio"),u.setAttribute("checked","checked"),u.setAttribute("name","t"),c.appendChild(u),D.checkClone=c.cloneNode(!0).cloneNode(!0).lastChild.checked,c.innerHTML="<textarea>x</textarea>",D.noCloneChecked=!!c.cloneNode(!0).lastChild.defaultValue,c.innerHTML="<option></option>",D.option=!!c.lastChild})();var Wt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Wt.tbody=Wt.tfoot=Wt.colgroup=Wt.caption=Wt.thead,Wt.th=Wt.td,D.option||(Wt.optgroup=Wt.option=[1,"<select multiple='multiple'>","</select>"]);function Dt(s,c){var u;return typeof s.getElementsByTagName<"u"?u=s.getElementsByTagName(c||"*"):typeof s.querySelectorAll<"u"?u=s.querySelectorAll(c||"*"):u=[],c===void 0||c&&ve(s,c)?p.merge([s],u):u}function ji(s,c){for(var u=0,f=s.length;u<f;u++)L.set(s[u],"globalEval",!c||L.get(c[u],"globalEval"))}var hi=/<|&#?\w+;/;function vn(s,c,u,f,v){for(var b,A,j,q,re,ge,De=c.createDocumentFragment(),de=[],xe=0,at=s.length;xe<at;xe++)if(b=s[xe],b||b===0)if(he(b)==="object")p.merge(de,b.nodeType?[b]:b);else if(!hi.test(b))de.push(c.createTextNode(b));else{for(A=A||De.appendChild(c.createElement("div")),j=(Gt.exec(b)||["",""])[1].toLowerCase(),q=Wt[j]||Wt._default,A.innerHTML=q[1]+p.htmlPrefilter(b)+q[2],ge=q[0];ge--;)A=A.lastChild;p.merge(de,A.childNodes),A=De.firstChild,A.textContent=""}for(De.textContent="",xe=0;b=de[xe++];){if(f&&p.inArray(b,f)>-1){v&&v.push(b);continue}if(re=Ot(b),A=Dt(De.appendChild(b),"script"),re&&ji(A),u)for(ge=0;b=A[ge++];)xi.test(b.type||"")&&u.push(b)}return De}var bi=/^([^.]*)(?:\.(.+)|)/;function zi(){return!0}function Ei(){return!1}function Mt(s,c){return s===an()==(c==="focus")}function an(){try{return K.activeElement}catch{}}function Ui(s,c,u,f,v,b){var A,j;if(typeof c=="object"){typeof u!="string"&&(f=f||u,u=void 0);for(j in c)Ui(s,j,u,f,c[j],b);return s}if(f==null&&v==null?(v=u,f=u=void 0):v==null&&(typeof u=="string"?(v=f,f=void 0):(v=f,f=u,u=void 0)),v===!1)v=Ei;else if(!v)return s;return b===1&&(A=v,v=function(q){return p().off(q),A.apply(this,arguments)},v.guid=A.guid||(A.guid=p.guid++)),s.each(function(){p.event.add(this,c,v,f,u)})}p.event={global:{},add:function(s,c,u,f,v){var b,A,j,q,re,ge,De,de,xe,at,Ct,ut=L.get(s);if(E(s))for(u.handler&&(b=u,u=b.handler,v=b.selector),v&&p.find.matchesSelector(ht,v),u.guid||(u.guid=p.guid++),(q=ut.events)||(q=ut.events=Object.create(null)),(A=ut.handle)||(A=ut.handle=function(Mi){return typeof p<"u"&&p.event.triggered!==Mi.type?p.event.dispatch.apply(s,arguments):void 0}),c=(c||"").match(N)||[""],re=c.length;re--;)j=bi.exec(c[re])||[],xe=Ct=j[1],at=(j[2]||"").split(".").sort(),xe&&(De=p.event.special[xe]||{},xe=(v?De.delegateType:De.bindType)||xe,De=p.event.special[xe]||{},ge=p.extend({type:xe,origType:Ct,data:f,handler:u,guid:u.guid,selector:v,needsContext:v&&p.expr.match.needsContext.test(v),namespace:at.join(".")},b),(de=q[xe])||(de=q[xe]=[],de.delegateCount=0,(!De.setup||De.setup.call(s,f,at,A)===!1)&&s.addEventListener&&s.addEventListener(xe,A)),De.add&&(De.add.call(s,ge),ge.handler.guid||(ge.handler.guid=u.guid)),v?de.splice(de.delegateCount++,0,ge):de.push(ge),p.event.global[xe]=!0)},remove:function(s,c,u,f,v){var b,A,j,q,re,ge,De,de,xe,at,Ct,ut=L.hasData(s)&&L.get(s);if(!(!ut||!(q=ut.events))){for(c=(c||"").match(N)||[""],re=c.length;re--;){if(j=bi.exec(c[re])||[],xe=Ct=j[1],at=(j[2]||"").split(".").sort(),!xe){for(xe in q)p.event.remove(s,xe+c[re],u,f,!0);continue}for(De=p.event.special[xe]||{},xe=(f?De.delegateType:De.bindType)||xe,de=q[xe]||[],j=j[2]&&new RegExp("(^|\\.)"+at.join("\\.(?:.*\\.|)")+"(\\.|$)"),A=b=de.length;b--;)ge=de[b],(v||Ct===ge.origType)&&(!u||u.guid===ge.guid)&&(!j||j.test(ge.namespace))&&(!f||f===ge.selector||f==="**"&&ge.selector)&&(de.splice(b,1),ge.selector&&de.delegateCount--,De.remove&&De.remove.call(s,ge));A&&!de.length&&((!De.teardown||De.teardown.call(s,at,ut.handle)===!1)&&p.removeEvent(s,xe,ut.handle),delete q[xe])}p.isEmptyObject(q)&&L.remove(s,"handle events")}},dispatch:function(s){var c,u,f,v,b,A,j=new Array(arguments.length),q=p.event.fix(s),re=(L.get(this,"events")||Object.create(null))[q.type]||[],ge=p.event.special[q.type]||{};for(j[0]=q,c=1;c<arguments.length;c++)j[c]=arguments[c];if(q.delegateTarget=this,!(ge.preDispatch&&ge.preDispatch.call(this,q)===!1)){for(A=p.event.handlers.call(this,q,re),c=0;(v=A[c++])&&!q.isPropagationStopped();)for(q.currentTarget=v.elem,u=0;(b=v.handlers[u++])&&!q.isImmediatePropagationStopped();)(!q.rnamespace||b.namespace===!1||q.rnamespace.test(b.namespace))&&(q.handleObj=b,q.data=b.data,f=((p.event.special[b.origType]||{}).handle||b.handler).apply(v.elem,j),f!==void 0&&(q.result=f)===!1&&(q.preventDefault(),q.stopPropagation()));return ge.postDispatch&&ge.postDispatch.call(this,q),q.result}},handlers:function(s,c){var u,f,v,b,A,j=[],q=c.delegateCount,re=s.target;if(q&&re.nodeType&&!(s.type==="click"&&s.button>=1)){for(;re!==this;re=re.parentNode||this)if(re.nodeType===1&&!(s.type==="click"&&re.disabled===!0)){for(b=[],A={},u=0;u<q;u++)f=c[u],v=f.selector+" ",A[v]===void 0&&(A[v]=f.needsContext?p(v,this).index(re)>-1:p.find(v,this,null,[re]).length),A[v]&&b.push(f);b.length&&j.push({elem:re,handlers:b})}}return re=this,q<c.length&&j.push({elem:re,handlers:c.slice(q)}),j},addProp:function(s,c){Object.defineProperty(p.Event.prototype,s,{enumerable:!0,configurable:!0,get:F(c)?function(){if(this.originalEvent)return c(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[s]},set:function(u){Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:u})}})},fix:function(s){return s[p.expando]?s:new p.Event(s)},special:{load:{noBubble:!0},click:{setup:function(s){var c=this||s;return Ii.test(c.type)&&c.click&&ve(c,"input")&&Vi(c,"click",zi),!1},trigger:function(s){var c=this||s;return Ii.test(c.type)&&c.click&&ve(c,"input")&&Vi(c,"click"),!0},_default:function(s){var c=s.target;return Ii.test(c.type)&&c.click&&ve(c,"input")&&L.get(c,"click")||ve(c,"a")}},beforeunload:{postDispatch:function(s){s.result!==void 0&&s.originalEvent&&(s.originalEvent.returnValue=s.result)}}}};function Vi(s,c,u){if(!u){L.get(s,c)===void 0&&p.event.add(s,c,zi);return}L.set(s,c,!1),p.event.add(s,c,{namespace:!1,handler:function(f){var v,b,A=L.get(this,c);if(f.isTrigger&1&&this[c]){if(A.length)(p.event.special[c]||{}).delegateType&&f.stopPropagation();else if(A=o.call(arguments),L.set(this,c,A),v=u(this,c),this[c](),b=L.get(this,c),A!==b||v?L.set(this,c,!1):b={},A!==b)return f.stopImmediatePropagation(),f.preventDefault(),b&&b.value}else A.length&&(L.set(this,c,{value:p.event.trigger(p.extend(A[0],p.Event.prototype),A.slice(1),this)}),f.stopImmediatePropagation())}})}p.removeEvent=function(s,c,u){s.removeEventListener&&s.removeEventListener(c,u)},p.Event=function(s,c){if(!(this instanceof p.Event))return new p.Event(s,c);s&&s.type?(this.originalEvent=s,this.type=s.type,this.isDefaultPrevented=s.defaultPrevented||s.defaultPrevented===void 0&&s.returnValue===!1?zi:Ei,this.target=s.target&&s.target.nodeType===3?s.target.parentNode:s.target,this.currentTarget=s.currentTarget,this.relatedTarget=s.relatedTarget):this.type=s,c&&p.extend(this,c),this.timeStamp=s&&s.timeStamp||Date.now(),this[p.expando]=!0},p.Event.prototype={constructor:p.Event,isDefaultPrevented:Ei,isPropagationStopped:Ei,isImmediatePropagationStopped:Ei,isSimulated:!1,preventDefault:function(){var s=this.originalEvent;this.isDefaultPrevented=zi,s&&!this.isSimulated&&s.preventDefault()},stopPropagation:function(){var s=this.originalEvent;this.isPropagationStopped=zi,s&&!this.isSimulated&&s.stopPropagation()},stopImmediatePropagation:function(){var s=this.originalEvent;this.isImmediatePropagationStopped=zi,s&&!this.isSimulated&&s.stopImmediatePropagation(),this.stopPropagation()}},p.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},p.event.addProp),p.each({focus:"focusin",blur:"focusout"},function(s,c){p.event.special[s]={setup:function(){return Vi(this,s,Mt),!1},trigger:function(){return Vi(this,s),!0},_default:function(){return!0},delegateType:c}}),p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(s,c){p.event.special[s]={delegateType:c,bindType:c,handle:function(u){var f,v=this,b=u.relatedTarget,A=u.handleObj;return(!b||b!==v&&!p.contains(v,b))&&(u.type=A.origType,f=A.handler.apply(this,arguments),u.type=c),f}}}),p.fn.extend({on:function(s,c,u,f){return Ui(this,s,c,u,f)},one:function(s,c,u,f){return Ui(this,s,c,u,f,1)},off:function(s,c,u){var f,v;if(s&&s.preventDefault&&s.handleObj)return f=s.handleObj,p(s.delegateTarget).off(f.namespace?f.origType+"."+f.namespace:f.origType,f.selector,f.handler),this;if(typeof s=="object"){for(v in s)this.off(v,c,s[v]);return this}return(c===!1||typeof c=="function")&&(u=c,c=void 0),u===!1&&(u=Ei),this.each(function(){p.event.remove(this,s,u,c)})}});var Oi=/<script|<style|<link/i,ln=/checked\s*(?:[^=]|=\s*.checked.)/i,Qi=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function cn(s,c){return ve(s,"table")&&ve(c.nodeType!==11?c:c.firstChild,"tr")&&p(s).children("tbody")[0]||s}function en(s){return s.type=(s.getAttribute("type")!==null)+"/"+s.type,s}function tn(s){return(s.type||"").slice(0,5)==="true/"?s.type=s.type.slice(5):s.removeAttribute("type"),s}function hn(s,c){var u,f,v,b,A,j,q;if(c.nodeType===1){if(L.hasData(s)&&(b=L.get(s),q=b.events,q)){L.remove(c,"handle events");for(v in q)for(u=0,f=q[v].length;u<f;u++)p.event.add(c,v,q[v][u])}J.hasData(s)&&(A=J.access(s),j=p.extend({},A),J.set(c,j))}}function gr(s,c){var u=c.nodeName.toLowerCase();u==="input"&&Ii.test(s.type)?c.checked=s.checked:(u==="input"||u==="textarea")&&(c.defaultValue=s.defaultValue)}function Kt(s,c,u,f){c=a(c);var v,b,A,j,q,re,ge=0,De=s.length,de=De-1,xe=c[0],at=F(xe);if(at||De>1&&typeof xe=="string"&&!D.checkClone&&ln.test(xe))return s.each(function(Ct){var ut=s.eq(Ct);at&&(c[0]=xe.call(this,Ct,ut.html())),Kt(ut,c,u,f)});if(De&&(v=vn(c,s[0].ownerDocument,!1,s,f),b=v.firstChild,v.childNodes.length===1&&(v=b),b||f)){for(A=p.map(Dt(v,"script"),en),j=A.length;ge<De;ge++)q=v,ge!==de&&(q=p.clone(q,!0,!0),j&&p.merge(A,Dt(q,"script"))),u.call(s[ge],q,ge);if(j)for(re=A[A.length-1].ownerDocument,p.map(A,tn),ge=0;ge<j;ge++)q=A[ge],xi.test(q.type||"")&&!L.access(q,"globalEval")&&p.contains(re,q)&&(q.src&&(q.type||"").toLowerCase()!=="module"?p._evalUrl&&!q.noModule&&p._evalUrl(q.src,{nonce:q.nonce||q.getAttribute("nonce")},re):ee(q.textContent.replace(Qi,""),q,re))}return s}function ui(s,c,u){for(var f,v=c?p.filter(c,s):s,b=0;(f=v[b])!=null;b++)!u&&f.nodeType===1&&p.cleanData(Dt(f)),f.parentNode&&(u&&Ot(f)&&ji(Dt(f,"script")),f.parentNode.removeChild(f));return s}p.extend({htmlPrefilter:function(s){return s},clone:function(s,c,u){var f,v,b,A,j=s.cloneNode(!0),q=Ot(s);if(!D.noCloneChecked&&(s.nodeType===1||s.nodeType===11)&&!p.isXMLDoc(s))for(A=Dt(j),b=Dt(s),f=0,v=b.length;f<v;f++)gr(b[f],A[f]);if(c)if(u)for(b=b||Dt(s),A=A||Dt(j),f=0,v=b.length;f<v;f++)hn(b[f],A[f]);else hn(s,j);return A=Dt(j,"script"),A.length>0&&ji(A,!q&&Dt(s,"script")),j},cleanData:function(s){for(var c,u,f,v=p.event.special,b=0;(u=s[b])!==void 0;b++)if(E(u)){if(c=u[L.expando]){if(c.events)for(f in c.events)v[f]?p.event.remove(u,f):p.removeEvent(u,f,c.handle);u[L.expando]=void 0}u[J.expando]&&(u[J.expando]=void 0)}}}),p.fn.extend({detach:function(s){return ui(this,s,!0)},remove:function(s){return ui(this,s)},text:function(s){return ae(this,function(c){return c===void 0?p.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=c)})},null,s,arguments.length)},append:function(){return Kt(this,arguments,function(s){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var c=cn(this,s);c.appendChild(s)}})},prepend:function(){return Kt(this,arguments,function(s){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var c=cn(this,s);c.insertBefore(s,c.firstChild)}})},before:function(){return Kt(this,arguments,function(s){this.parentNode&&this.parentNode.insertBefore(s,this)})},after:function(){return Kt(this,arguments,function(s){this.parentNode&&this.parentNode.insertBefore(s,this.nextSibling)})},empty:function(){for(var s,c=0;(s=this[c])!=null;c++)s.nodeType===1&&(p.cleanData(Dt(s,!1)),s.textContent="");return this},clone:function(s,c){return s=s??!1,c=c??s,this.map(function(){return p.clone(this,s,c)})},html:function(s){return ae(this,function(c){var u=this[0]||{},f=0,v=this.length;if(c===void 0&&u.nodeType===1)return u.innerHTML;if(typeof c=="string"&&!Oi.test(c)&&!Wt[(Gt.exec(c)||["",""])[1].toLowerCase()]){c=p.htmlPrefilter(c);try{for(;f<v;f++)u=this[f]||{},u.nodeType===1&&(p.cleanData(Dt(u,!1)),u.innerHTML=c);u=0}catch{}}u&&this.empty().append(c)},null,s,arguments.length)},replaceWith:function(){var s=[];return Kt(this,arguments,function(c){var u=this.parentNode;p.inArray(this,s)<0&&(p.cleanData(Dt(this)),u&&u.replaceChild(c,this))},s)}}),p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(s,c){p.fn[s]=function(u){for(var f,v=[],b=p(u),A=b.length-1,j=0;j<=A;j++)f=j===A?this:this.clone(!0),p(b[j])[c](f),l.apply(v,f.get());return this.pushStack(v)}});var Di=new RegExp("^("+Ze+")(?!px)[a-z%]+$","i"),bn=function(s){var c=s.ownerDocument.defaultView;return(!c||!c.opener)&&(c=e),c.getComputedStyle(s)},yn=function(s,c,u){var f,v,b={};for(v in c)b[v]=s.style[v],s.style[v]=c[v];f=u.call(s);for(v in c)s.style[v]=b[v];return f},Rn=new RegExp(xt.join("|"),"i");(function(){function s(){if(re){q.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",re.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ht.appendChild(q).appendChild(re);var ge=e.getComputedStyle(re);u=ge.top!=="1%",j=c(ge.marginLeft)===12,re.style.right="60%",b=c(ge.right)===36,f=c(ge.width)===36,re.style.position="absolute",v=c(re.offsetWidth/3)===12,ht.removeChild(q),re=null}}function c(ge){return Math.round(parseFloat(ge))}var u,f,v,b,A,j,q=K.createElement("div"),re=K.createElement("div");re.style&&(re.style.backgroundClip="content-box",re.cloneNode(!0).style.backgroundClip="",D.clearCloneStyle=re.style.backgroundClip==="content-box",p.extend(D,{boxSizingReliable:function(){return s(),f},pixelBoxStyles:function(){return s(),b},pixelPosition:function(){return s(),u},reliableMarginLeft:function(){return s(),j},scrollboxSize:function(){return s(),v},reliableTrDimensions:function(){var ge,De,de,xe;return A==null&&(ge=K.createElement("table"),De=K.createElement("tr"),de=K.createElement("div"),ge.style.cssText="position:absolute;left:-11111px;border-collapse:separate",De.style.cssText="border:1px solid",De.style.height="1px",de.style.height="9px",de.style.display="block",ht.appendChild(ge).appendChild(De).appendChild(de),xe=e.getComputedStyle(De),A=parseInt(xe.height,10)+parseInt(xe.borderTopWidth,10)+parseInt(xe.borderBottomWidth,10)===De.offsetHeight,ht.removeChild(ge)),A}}))})();function Si(s,c,u){var f,v,b,A,j=s.style;return u=u||bn(s),u&&(A=u.getPropertyValue(c)||u[c],A===""&&!Ot(s)&&(A=p.style(s,c)),!D.pixelBoxStyles()&&Di.test(A)&&Rn.test(c)&&(f=j.width,v=j.minWidth,b=j.maxWidth,j.minWidth=j.maxWidth=j.width=A,A=u.width,j.width=f,j.minWidth=v,j.maxWidth=b)),A!==void 0?A+"":A}function rr(s,c){return{get:function(){if(s()){delete this.get;return}return(this.get=c).apply(this,arguments)}}}var mr=["Webkit","Moz","ms"],Yi=K.createElement("div").style,wn={};function _r(s){for(var c=s[0].toUpperCase()+s.slice(1),u=mr.length;u--;)if(s=mr[u]+c,s in Yi)return s}function Ue(s){var c=p.cssProps[s]||wn[s];return c||(s in Yi?s:wn[s]=_r(s)||s)}var ne=/^(none|table(?!-c[ea]).+)/,Me=/^--/,Ve={position:"absolute",visibility:"hidden",display:"block"},dt={letterSpacing:"0",fontWeight:"400"};function Jt(s,c,u){var f=lt.exec(c);return f?Math.max(0,f[2]-(u||0))+(f[3]||"px"):c}function oi(s,c,u,f,v,b){var A=c==="width"?1:0,j=0,q=0;if(u===(f?"border":"content"))return 0;for(;A<4;A+=2)u==="margin"&&(q+=p.css(s,u+xt[A],!0,v)),f?(u==="content"&&(q-=p.css(s,"padding"+xt[A],!0,v)),u!=="margin"&&(q-=p.css(s,"border"+xt[A]+"Width",!0,v))):(q+=p.css(s,"padding"+xt[A],!0,v),u!=="padding"?q+=p.css(s,"border"+xt[A]+"Width",!0,v):j+=p.css(s,"border"+xt[A]+"Width",!0,v));return!f&&b>=0&&(q+=Math.max(0,Math.ceil(s["offset"+c[0].toUpperCase()+c.slice(1)]-b-q-j-.5))||0),q}function Ft(s,c,u){var f=bn(s),v=!D.boxSizingReliable()||u,b=v&&p.css(s,"boxSizing",!1,f)==="border-box",A=b,j=Si(s,c,f),q="offset"+c[0].toUpperCase()+c.slice(1);if(Di.test(j)){if(!u)return j;j="auto"}return(!D.boxSizingReliable()&&b||!D.reliableTrDimensions()&&ve(s,"tr")||j==="auto"||!parseFloat(j)&&p.css(s,"display",!1,f)==="inline")&&s.getClientRects().length&&(b=p.css(s,"boxSizing",!1,f)==="border-box",A=q in s,A&&(j=s[q])),j=parseFloat(j)||0,j+oi(s,c,u||(b?"border":"content"),A,f,j)+"px"}p.extend({cssHooks:{opacity:{get:function(s,c){if(c){var u=Si(s,"opacity");return u===""?"1":u}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(s,c,u,f){if(!(!s||s.nodeType===3||s.nodeType===8||!s.style)){var v,b,A,j=nt(c),q=Me.test(c),re=s.style;if(q||(c=Ue(j)),A=p.cssHooks[c]||p.cssHooks[j],u!==void 0){if(b=typeof u,b==="string"&&(v=lt.exec(u))&&v[1]&&(u=Pt(s,c,v),b="number"),u==null||u!==u)return;b==="number"&&!q&&(u+=v&&v[3]||(p.cssNumber[j]?"":"px")),!D.clearCloneStyle&&u===""&&c.indexOf("background")===0&&(re[c]="inherit"),(!A||!("set"in A)||(u=A.set(s,u,f))!==void 0)&&(q?re.setProperty(c,u):re[c]=u)}else return A&&"get"in A&&(v=A.get(s,!1,f))!==void 0?v:re[c]}},css:function(s,c,u,f){var v,b,A,j=nt(c),q=Me.test(c);return q||(c=Ue(j)),A=p.cssHooks[c]||p.cssHooks[j],A&&"get"in A&&(v=A.get(s,!0,u)),v===void 0&&(v=Si(s,c,f)),v==="normal"&&c in dt&&(v=dt[c]),u===""||u?(b=parseFloat(v),u===!0||isFinite(b)?b||0:v):v}}),p.each(["height","width"],function(s,c){p.cssHooks[c]={get:function(u,f,v){if(f)return ne.test(p.css(u,"display"))&&(!u.getClientRects().length||!u.getBoundingClientRect().width)?yn(u,Ve,function(){return Ft(u,c,v)}):Ft(u,c,v)},set:function(u,f,v){var b,A=bn(u),j=!D.scrollboxSize()&&A.position==="absolute",q=j||v,re=q&&p.css(u,"boxSizing",!1,A)==="border-box",ge=v?oi(u,c,v,re,A):0;return re&&j&&(ge-=Math.ceil(u["offset"+c[0].toUpperCase()+c.slice(1)]-parseFloat(A[c])-oi(u,c,"border",!1,A)-.5)),ge&&(b=lt.exec(f))&&(b[3]||"px")!=="px"&&(u.style[c]=f,f=p.css(u,c)),Jt(u,f,ge)}}}),p.cssHooks.marginLeft=rr(D.reliableMarginLeft,function(s,c){if(c)return(parseFloat(Si(s,"marginLeft"))||s.getBoundingClientRect().left-yn(s,{marginLeft:0},function(){return s.getBoundingClientRect().left}))+"px"}),p.each({margin:"",padding:"",border:"Width"},function(s,c){p.cssHooks[s+c]={expand:function(u){for(var f=0,v={},b=typeof u=="string"?u.split(" "):[u];f<4;f++)v[s+xt[f]+c]=b[f]||b[f-2]||b[0];return v}},s!=="margin"&&(p.cssHooks[s+c].set=Jt)}),p.fn.extend({css:function(s,c){return ae(this,function(u,f,v){var b,A,j={},q=0;if(Array.isArray(f)){for(b=bn(u),A=f.length;q<A;q++)j[f[q]]=p.css(u,f[q],!1,b);return j}return v!==void 0?p.style(u,f,v):p.css(u,f)},s,c,arguments.length>1)}});function Bt(s,c,u,f,v){return new Bt.prototype.init(s,c,u,f,v)}p.Tween=Bt,Bt.prototype={constructor:Bt,init:function(s,c,u,f,v,b){this.elem=s,this.prop=u,this.easing=v||p.easing._default,this.options=c,this.start=this.now=this.cur(),this.end=f,this.unit=b||(p.cssNumber[u]?"":"px")},cur:function(){var s=Bt.propHooks[this.prop];return s&&s.get?s.get(this):Bt.propHooks._default.get(this)},run:function(s){var c,u=Bt.propHooks[this.prop];return this.options.duration?this.pos=c=p.easing[this.easing](s,this.options.duration*s,0,1,this.options.duration):this.pos=c=s,this.now=(this.end-this.start)*c+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),u&&u.set?u.set(this):Bt.propHooks._default.set(this),this}},Bt.prototype.init.prototype=Bt.prototype,Bt.propHooks={_default:{get:function(s){var c;return s.elem.nodeType!==1||s.elem[s.prop]!=null&&s.elem.style[s.prop]==null?s.elem[s.prop]:(c=p.css(s.elem,s.prop,""),!c||c==="auto"?0:c)},set:function(s){p.fx.step[s.prop]?p.fx.step[s.prop](s):s.elem.nodeType===1&&(p.cssHooks[s.prop]||s.elem.style[Ue(s.prop)]!=null)?p.style(s.elem,s.prop,s.now+s.unit):s.elem[s.prop]=s.now}}},Bt.propHooks.scrollTop=Bt.propHooks.scrollLeft={set:function(s){s.elem.nodeType&&s.elem.parentNode&&(s.elem[s.prop]=s.now)}},p.easing={linear:function(s){return s},swing:function(s){return .5-Math.cos(s*Math.PI)/2},_default:"swing"},p.fx=Bt.prototype.init,p.fx.step={};var $t,ct,vr=/^(?:toggle|show|hide)$/,sr=/queueHooks$/;function or(){ct&&(K.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(or):e.setTimeout(or,p.fx.interval),p.fx.tick())}function ps(){return e.setTimeout(function(){$t=void 0}),$t=Date.now()}function Li(s,c){var u,f=0,v={height:s};for(c=c?1:0;f<4;f+=2-c)u=xt[f],v["margin"+u]=v["padding"+u]=s;return c&&(v.opacity=v.width=s),v}function Un(s,c,u){for(var f,v=(Pi.tweeners[c]||[]).concat(Pi.tweeners["*"]),b=0,A=v.length;b<A;b++)if(f=v[b].call(u,c,s))return f}function Rr(s,c,u){var f,v,b,A,j,q,re,ge,De="width"in c||"height"in c,de=this,xe={},at=s.style,Ct=s.nodeType&&Zt(s),ut=L.get(s,"fxshow");u.queue||(A=p._queueHooks(s,"fx"),A.unqueued==null&&(A.unqueued=0,j=A.empty.fire,A.empty.fire=function(){A.unqueued||j()}),A.unqueued++,de.always(function(){de.always(function(){A.unqueued--,p.queue(s,"fx").length||A.empty.fire()})}));for(f in c)if(v=c[f],vr.test(v)){if(delete c[f],b=b||v==="toggle",v===(Ct?"hide":"show"))if(v==="show"&&ut&&ut[f]!==void 0)Ct=!0;else continue;xe[f]=ut&&ut[f]||p.style(s,f)}if(q=!p.isEmptyObject(c),!(!q&&p.isEmptyObject(xe))){De&&s.nodeType===1&&(u.overflow=[at.overflow,at.overflowX,at.overflowY],re=ut&&ut.display,re==null&&(re=L.get(s,"display")),ge=p.css(s,"display"),ge==="none"&&(re?ge=re:(pi([s],!0),re=s.style.display||re,ge=p.css(s,"display"),pi([s]))),(ge==="inline"||ge==="inline-block"&&re!=null)&&p.css(s,"float")==="none"&&(q||(de.done(function(){at.display=re}),re==null&&(ge=at.display,re=ge==="none"?"":ge)),at.display="inline-block")),u.overflow&&(at.overflow="hidden",de.always(function(){at.overflow=u.overflow[0],at.overflowX=u.overflow[1],at.overflowY=u.overflow[2]})),q=!1;for(f in xe)q||(ut?"hidden"in ut&&(Ct=ut.hidden):ut=L.access(s,"fxshow",{display:re}),b&&(ut.hidden=!Ct),Ct&&pi([s],!0),de.done(function(){Ct||pi([s]),L.remove(s,"fxshow");for(f in xe)p.style(s,f,xe[f])})),q=Un(Ct?ut[f]:0,f,de),f in ut||(ut[f]=q.start,Ct&&(q.end=q.start,q.start=0))}}function Gr(s,c){var u,f,v,b,A;for(u in s)if(f=nt(u),v=c[f],b=s[u],Array.isArray(b)&&(v=b[1],b=s[u]=b[0]),u!==f&&(s[f]=b,delete s[u]),A=p.cssHooks[f],A&&"expand"in A){b=A.expand(b),delete s[f];for(u in b)u in s||(s[u]=b[u],c[u]=v)}else c[f]=v}function Pi(s,c,u){var f,v,b=0,A=Pi.prefilters.length,j=p.Deferred().always(function(){delete q.elem}),q=function(){if(v)return!1;for(var De=$t||ps(),de=Math.max(0,re.startTime+re.duration-De),xe=de/re.duration||0,at=1-xe,Ct=0,ut=re.tweens.length;Ct<ut;Ct++)re.tweens[Ct].run(at);return j.notifyWith(s,[re,at,de]),at<1&&ut?de:(ut||j.notifyWith(s,[re,1,0]),j.resolveWith(s,[re]),!1)},re=j.promise({elem:s,props:p.extend({},c),opts:p.extend(!0,{specialEasing:{},easing:p.easing._default},u),originalProperties:c,originalOptions:u,startTime:$t||ps(),duration:u.duration,tweens:[],createTween:function(De,de){var xe=p.Tween(s,re.opts,De,de,re.opts.specialEasing[De]||re.opts.easing);return re.tweens.push(xe),xe},stop:function(De){var de=0,xe=De?re.tweens.length:0;if(v)return this;for(v=!0;de<xe;de++)re.tweens[de].run(1);return De?(j.notifyWith(s,[re,1,0]),j.resolveWith(s,[re,De])):j.rejectWith(s,[re,De]),this}}),ge=re.props;for(Gr(ge,re.opts.specialEasing);b<A;b++)if(f=Pi.prefilters[b].call(re,s,ge,re.opts),f)return F(f.stop)&&(p._queueHooks(re.elem,re.opts.queue).stop=f.stop.bind(f)),f;return p.map(ge,Un,re),F(re.opts.start)&&re.opts.start.call(s,re),re.progress(re.opts.progress).done(re.opts.done,re.opts.complete).fail(re.opts.fail).always(re.opts.always),p.fx.timer(p.extend(q,{elem:s,anim:re,queue:re.opts.queue})),re}p.Animation=p.extend(Pi,{tweeners:{"*":[function(s,c){var u=this.createTween(s,c);return Pt(u.elem,s,lt.exec(c),u),u}]},tweener:function(s,c){F(s)?(c=s,s=["*"]):s=s.match(N);for(var u,f=0,v=s.length;f<v;f++)u=s[f],Pi.tweeners[u]=Pi.tweeners[u]||[],Pi.tweeners[u].unshift(c)},prefilters:[Rr],prefilter:function(s,c){c?Pi.prefilters.unshift(s):Pi.prefilters.push(s)}}),p.speed=function(s,c,u){var f=s&&typeof s=="object"?p.extend({},s):{complete:u||!u&&c||F(s)&&s,duration:s,easing:u&&c||c&&!F(c)&&c};return p.fx.off?f.duration=0:typeof f.duration!="number"&&(f.duration in p.fx.speeds?f.duration=p.fx.speeds[f.duration]:f.duration=p.fx.speeds._default),(f.queue==null||f.queue===!0)&&(f.queue="fx"),f.old=f.complete,f.complete=function(){F(f.old)&&f.old.call(this),f.queue&&p.dequeue(this,f.queue)},f},p.fn.extend({fadeTo:function(s,c,u,f){return this.filter(Zt).css("opacity",0).show().end().animate({opacity:c},s,u,f)},animate:function(s,c,u,f){var v=p.isEmptyObject(s),b=p.speed(c,u,f),A=function(){var j=Pi(this,p.extend({},s),b);(v||L.get(this,"finish"))&&j.stop(!0)};return A.finish=A,v||b.queue===!1?this.each(A):this.queue(b.queue,A)},stop:function(s,c,u){var f=function(v){var b=v.stop;delete v.stop,b(u)};return typeof s!="string"&&(u=c,c=s,s=void 0),c&&this.queue(s||"fx",[]),this.each(function(){var v=!0,b=s!=null&&s+"queueHooks",A=p.timers,j=L.get(this);if(b)j[b]&&j[b].stop&&f(j[b]);else for(b in j)j[b]&&j[b].stop&&sr.test(b)&&f(j[b]);for(b=A.length;b--;)A[b].elem===this&&(s==null||A[b].queue===s)&&(A[b].anim.stop(u),v=!1,A.splice(b,1));(v||!u)&&p.dequeue(this,s)})},finish:function(s){return s!==!1&&(s=s||"fx"),this.each(function(){var c,u=L.get(this),f=u[s+"queue"],v=u[s+"queueHooks"],b=p.timers,A=f?f.length:0;for(u.finish=!0,p.queue(this,s,[]),v&&v.stop&&v.stop.call(this,!0),c=b.length;c--;)b[c].elem===this&&b[c].queue===s&&(b[c].anim.stop(!0),b.splice(c,1));for(c=0;c<A;c++)f[c]&&f[c].finish&&f[c].finish.call(this);delete u.finish})}}),p.each(["toggle","show","hide"],function(s,c){var u=p.fn[c];p.fn[c]=function(f,v,b){return f==null||typeof f=="boolean"?u.apply(this,arguments):this.animate(Li(c,!0),f,v,b)}}),p.each({slideDown:Li("show"),slideUp:Li("hide"),slideToggle:Li("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(s,c){p.fn[s]=function(u,f,v){return this.animate(c,u,f,v)}}),p.timers=[],p.fx.tick=function(){var s,c=0,u=p.timers;for($t=Date.now();c<u.length;c++)s=u[c],!s()&&u[c]===s&&u.splice(c--,1);u.length||p.fx.stop(),$t=void 0},p.fx.timer=function(s){p.timers.push(s),p.fx.start()},p.fx.interval=13,p.fx.start=function(){ct||(ct=!0,or())},p.fx.stop=function(){ct=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fn.delay=function(s,c){return s=p.fx&&p.fx.speeds[s]||s,c=c||"fx",this.queue(c,function(u,f){var v=e.setTimeout(u,s);f.stop=function(){e.clearTimeout(v)}})},function(){var s=K.createElement("input"),c=K.createElement("select"),u=c.appendChild(K.createElement("option"));s.type="checkbox",D.checkOn=s.value!=="",D.optSelected=u.selected,s=K.createElement("input"),s.value="t",s.type="radio",D.radioValue=s.value==="t"}();var xn,Vn=p.expr.attrHandle;p.fn.extend({attr:function(s,c){return ae(this,p.attr,s,c,arguments.length>1)},removeAttr:function(s){return this.each(function(){p.removeAttr(this,s)})}}),p.extend({attr:function(s,c,u){var f,v,b=s.nodeType;if(!(b===3||b===8||b===2)){if(typeof s.getAttribute>"u")return p.prop(s,c,u);if((b!==1||!p.isXMLDoc(s))&&(v=p.attrHooks[c.toLowerCase()]||(p.expr.match.bool.test(c)?xn:void 0)),u!==void 0){if(u===null){p.removeAttr(s,c);return}return v&&"set"in v&&(f=v.set(s,u,c))!==void 0?f:(s.setAttribute(c,u+""),u)}return v&&"get"in v&&(f=v.get(s,c))!==null?f:(f=p.find.attr(s,c),f??void 0)}},attrHooks:{type:{set:function(s,c){if(!D.radioValue&&c==="radio"&&ve(s,"input")){var u=s.value;return s.setAttribute("type",c),u&&(s.value=u),c}}}},removeAttr:function(s,c){var u,f=0,v=c&&c.match(N);if(v&&s.nodeType===1)for(;u=v[f++];)s.removeAttribute(u)}}),xn={set:function(s,c,u){return c===!1?p.removeAttr(s,u):s.setAttribute(u,u),u}},p.each(p.expr.match.bool.source.match(/\w+/g),function(s,c){var u=Vn[c]||p.find.attr;Vn[c]=function(f,v,b){var A,j,q=v.toLowerCase();return b||(j=Vn[q],Vn[q]=A,A=u(f,v,b)!=null?q:null,Vn[q]=j),A}});var br=/^(?:input|select|textarea|button)$/i,_i=/^(?:a|area)$/i;p.fn.extend({prop:function(s,c){return ae(this,p.prop,s,c,arguments.length>1)},removeProp:function(s){return this.each(function(){delete this[p.propFix[s]||s]})}}),p.extend({prop:function(s,c,u){var f,v,b=s.nodeType;if(!(b===3||b===8||b===2))return(b!==1||!p.isXMLDoc(s))&&(c=p.propFix[c]||c,v=p.propHooks[c]),u!==void 0?v&&"set"in v&&(f=v.set(s,u,c))!==void 0?f:s[c]=u:v&&"get"in v&&(f=v.get(s,c))!==null?f:s[c]},propHooks:{tabIndex:{get:function(s){var c=p.find.attr(s,"tabindex");return c?parseInt(c,10):br.test(s.nodeName)||_i.test(s.nodeName)&&s.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),D.optSelected||(p.propHooks.selected={get:function(s){var c=s.parentNode;return c&&c.parentNode&&c.parentNode.selectedIndex,null},set:function(s){var c=s.parentNode;c&&(c.selectedIndex,c.parentNode&&c.parentNode.selectedIndex)}}),p.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){p.propFix[this.toLowerCase()]=this});function yi(s){var c=s.match(N)||[];return c.join(" ")}function d(s){return s.getAttribute&&s.getAttribute("class")||""}function m(s){return Array.isArray(s)?s:typeof s=="string"?s.match(N)||[]:[]}p.fn.extend({addClass:function(s){var c,u,f,v,b,A,j,q=0;if(F(s))return this.each(function(re){p(this).addClass(s.call(this,re,d(this)))});if(c=m(s),c.length){for(;u=this[q++];)if(v=d(u),f=u.nodeType===1&&" "+yi(v)+" ",f){for(A=0;b=c[A++];)f.indexOf(" "+b+" ")<0&&(f+=b+" ");j=yi(f),v!==j&&u.setAttribute("class",j)}}return this},removeClass:function(s){var c,u,f,v,b,A,j,q=0;if(F(s))return this.each(function(re){p(this).removeClass(s.call(this,re,d(this)))});if(!arguments.length)return this.attr("class","");if(c=m(s),c.length){for(;u=this[q++];)if(v=d(u),f=u.nodeType===1&&" "+yi(v)+" ",f){for(A=0;b=c[A++];)for(;f.indexOf(" "+b+" ")>-1;)f=f.replace(" "+b+" "," ");j=yi(f),v!==j&&u.setAttribute("class",j)}}return this},toggleClass:function(s,c){var u=typeof s,f=u==="string"||Array.isArray(s);return typeof c=="boolean"&&f?c?this.addClass(s):this.removeClass(s):F(s)?this.each(function(v){p(this).toggleClass(s.call(this,v,d(this),c),c)}):this.each(function(){var v,b,A,j;if(f)for(b=0,A=p(this),j=m(s);v=j[b++];)A.hasClass(v)?A.removeClass(v):A.addClass(v);else(s===void 0||u==="boolean")&&(v=d(this),v&&L.set(this,"__className__",v),this.setAttribute&&this.setAttribute("class",v||s===!1?"":L.get(this,"__className__")||""))})},hasClass:function(s){var c,u,f=0;for(c=" "+s+" ";u=this[f++];)if(u.nodeType===1&&(" "+yi(d(u))+" ").indexOf(c)>-1)return!0;return!1}});var y=/\r/g;p.fn.extend({val:function(s){var c,u,f,v=this[0];return arguments.length?(f=F(s),this.each(function(b){var A;this.nodeType===1&&(f?A=s.call(this,b,p(this).val()):A=s,A==null?A="":typeof A=="number"?A+="":Array.isArray(A)&&(A=p.map(A,function(j){return j==null?"":j+""})),c=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()],(!c||!("set"in c)||c.set(this,A,"value")===void 0)&&(this.value=A))})):v?(c=p.valHooks[v.type]||p.valHooks[v.nodeName.toLowerCase()],c&&"get"in c&&(u=c.get(v,"value"))!==void 0?u:(u=v.value,typeof u=="string"?u.replace(y,""):u??"")):void 0}}),p.extend({valHooks:{option:{get:function(s){var c=p.find.attr(s,"value");return c??yi(p.text(s))}},select:{get:function(s){var c,u,f,v=s.options,b=s.selectedIndex,A=s.type==="select-one",j=A?null:[],q=A?b+1:v.length;for(b<0?f=q:f=A?b:0;f<q;f++)if(u=v[f],(u.selected||f===b)&&!u.disabled&&(!u.parentNode.disabled||!ve(u.parentNode,"optgroup"))){if(c=p(u).val(),A)return c;j.push(c)}return j},set:function(s,c){for(var u,f,v=s.options,b=p.makeArray(c),A=v.length;A--;)f=v[A],(f.selected=p.inArray(p.valHooks.option.get(f),b)>-1)&&(u=!0);return u||(s.selectedIndex=-1),b}}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(s,c){if(Array.isArray(c))return s.checked=p.inArray(p(s).val(),c)>-1}},D.checkOn||(p.valHooks[this].get=function(s){return s.getAttribute("value")===null?"on":s.value})}),D.focusin="onfocusin"in e;var w=/^(?:focusinfocus|focusoutblur)$/,I=function(s){s.stopPropagation()};p.extend(p.event,{trigger:function(s,c,u,f){var v,b,A,j,q,re,ge,De,de=[u||K],xe=x.call(s,"type")?s.type:s,at=x.call(s,"namespace")?s.namespace.split("."):[];if(b=De=A=u=u||K,!(u.nodeType===3||u.nodeType===8)&&!w.test(xe+p.event.triggered)&&(xe.indexOf(".")>-1&&(at=xe.split("."),xe=at.shift(),at.sort()),q=xe.indexOf(":")<0&&"on"+xe,s=s[p.expando]?s:new p.Event(xe,typeof s=="object"&&s),s.isTrigger=f?2:3,s.namespace=at.join("."),s.rnamespace=s.namespace?new RegExp("(^|\\.)"+at.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,s.result=void 0,s.target||(s.target=u),c=c==null?[s]:p.makeArray(c,[s]),ge=p.event.special[xe]||{},!(!f&&ge.trigger&&ge.trigger.apply(u,c)===!1))){if(!f&&!ge.noBubble&&!Q(u)){for(j=ge.delegateType||xe,w.test(j+xe)||(b=b.parentNode);b;b=b.parentNode)de.push(b),A=b;A===(u.ownerDocument||K)&&de.push(A.defaultView||A.parentWindow||e)}for(v=0;(b=de[v++])&&!s.isPropagationStopped();)De=b,s.type=v>1?j:ge.bindType||xe,re=(L.get(b,"events")||Object.create(null))[s.type]&&L.get(b,"handle"),re&&re.apply(b,c),re=q&&b[q],re&&re.apply&&E(b)&&(s.result=re.apply(b,c),s.result===!1&&s.preventDefault());return s.type=xe,!f&&!s.isDefaultPrevented()&&(!ge._default||ge._default.apply(de.pop(),c)===!1)&&E(u)&&q&&F(u[xe])&&!Q(u)&&(A=u[q],A&&(u[q]=null),p.event.triggered=xe,s.isPropagationStopped()&&De.addEventListener(xe,I),u[xe](),s.isPropagationStopped()&&De.removeEventListener(xe,I),p.event.triggered=void 0,A&&(u[q]=A)),s.result}},simulate:function(s,c,u){var f=p.extend(new p.Event,u,{type:s,isSimulated:!0});p.event.trigger(f,null,c)}}),p.fn.extend({trigger:function(s,c){return this.each(function(){p.event.trigger(s,c,this)})},triggerHandler:function(s,c){var u=this[0];if(u)return p.event.trigger(s,c,u,!0)}}),D.focusin||p.each({focus:"focusin",blur:"focusout"},function(s,c){var u=function(f){p.event.simulate(c,f.target,p.event.fix(f))};p.event.special[c]={setup:function(){var f=this.ownerDocument||this.document||this,v=L.access(f,c);v||f.addEventListener(s,u,!0),L.access(f,c,(v||0)+1)},teardown:function(){var f=this.ownerDocument||this.document||this,v=L.access(f,c)-1;v?L.access(f,c,v):(f.removeEventListener(s,u,!0),L.remove(f,c))}}});var W=e.location,V={guid:Date.now()},U=/\?/;p.parseXML=function(s){var c,u;if(!s||typeof s!="string")return null;try{c=new e.DOMParser().parseFromString(s,"text/xml")}catch{}return u=c&&c.getElementsByTagName("parsererror")[0],(!c||u)&&p.error("Invalid XML: "+(u?p.map(u.childNodes,function(f){return f.textContent}).join(`
`):s)),c};var Y=/\[\]$/,ie=/\r?\n/g,be=/^(?:submit|button|image|reset|file)$/i,Ne=/^(?:input|select|textarea|keygen)/i;function ye(s,c,u,f){var v;if(Array.isArray(c))p.each(c,function(b,A){u||Y.test(s)?f(s,A):ye(s+"["+(typeof A=="object"&&A!=null?b:"")+"]",A,u,f)});else if(!u&&he(c)==="object")for(v in c)ye(s+"["+v+"]",c[v],u,f);else f(s,c)}p.param=function(s,c){var u,f=[],v=function(b,A){var j=F(A)?A():A;f[f.length]=encodeURIComponent(b)+"="+encodeURIComponent(j??"")};if(s==null)return"";if(Array.isArray(s)||s.jquery&&!p.isPlainObject(s))p.each(s,function(){v(this.name,this.value)});else for(u in s)ye(u,s[u],c,v);return f.join("&")},p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var s=p.prop(this,"elements");return s?p.makeArray(s):this}).filter(function(){var s=this.type;return this.name&&!p(this).is(":disabled")&&Ne.test(this.nodeName)&&!be.test(s)&&(this.checked||!Ii.test(s))}).map(function(s,c){var u=p(this).val();return u==null?null:Array.isArray(u)?p.map(u,function(f){return{name:c.name,value:f.replace(ie,`\r
`)}}):{name:c.name,value:u.replace(ie,`\r
`)}}).get()}});var _e=/%20/g,Se=/#.*$/,Re=/([?&])_=[^&]*/,Ce=/^(.*?):[ \t]*([^\r\n]*)$/mg,we=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ke=/^(?:GET|HEAD)$/,Fe=/^\/\//,Be={},ze={},_t="*/".concat("*"),ot=K.createElement("a");ot.href=W.href;function pt(s){return function(c,u){typeof c!="string"&&(u=c,c="*");var f,v=0,b=c.toLowerCase().match(N)||[];if(F(u))for(;f=b[v++];)f[0]==="+"?(f=f.slice(1)||"*",(s[f]=s[f]||[]).unshift(u)):(s[f]=s[f]||[]).push(u)}}function zn(s,c,u,f){var v={},b=s===ze;function A(j){var q;return v[j]=!0,p.each(s[j]||[],function(re,ge){var De=ge(c,u,f);if(typeof De=="string"&&!b&&!v[De])return c.dataTypes.unshift(De),A(De),!1;if(b)return!(q=De)}),q}return A(c.dataTypes[0])||!v["*"]&&A("*")}function Yn(s,c){var u,f,v=p.ajaxSettings.flatOptions||{};for(u in c)c[u]!==void 0&&((v[u]?s:f||(f={}))[u]=c[u]);return f&&p.extend(!0,s,f),s}function Ti(s,c,u){for(var f,v,b,A,j=s.contents,q=s.dataTypes;q[0]==="*";)q.shift(),f===void 0&&(f=s.mimeType||c.getResponseHeader("Content-Type"));if(f){for(v in j)if(j[v]&&j[v].test(f)){q.unshift(v);break}}if(q[0]in u)b=q[0];else{for(v in u){if(!q[0]||s.converters[v+" "+q[0]]){b=v;break}A||(A=v)}b=b||A}if(b)return b!==q[0]&&q.unshift(b),u[b]}function un(s,c,u,f){var v,b,A,j,q,re={},ge=s.dataTypes.slice();if(ge[1])for(A in s.converters)re[A.toLowerCase()]=s.converters[A];for(b=ge.shift();b;)if(s.responseFields[b]&&(u[s.responseFields[b]]=c),!q&&f&&s.dataFilter&&(c=s.dataFilter(c,s.dataType)),q=b,b=ge.shift(),b){if(b==="*")b=q;else if(q!=="*"&&q!==b){if(A=re[q+" "+b]||re["* "+b],!A){for(v in re)if(j=v.split(" "),j[1]===b&&(A=re[q+" "+j[0]]||re["* "+j[0]],A)){A===!0?A=re[v]:re[v]!==!0&&(b=j[0],ge.unshift(j[1]));break}}if(A!==!0)if(A&&s.throws)c=A(c);else try{c=A(c)}catch(De){return{state:"parsererror",error:A?De:"No conversion from "+q+" to "+b}}}}return{state:"success",data:c}}p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:W.href,type:"GET",isLocal:we.test(W.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":_t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(s,c){return c?Yn(Yn(s,p.ajaxSettings),c):Yn(p.ajaxSettings,s)},ajaxPrefilter:pt(Be),ajaxTransport:pt(ze),ajax:function(s,c){typeof s=="object"&&(c=s,s=void 0),c=c||{};var u,f,v,b,A,j,q,re,ge,De,de=p.ajaxSetup({},c),xe=de.context||de,at=de.context&&(xe.nodeType||xe.jquery)?p(xe):p.event,Ct=p.Deferred(),ut=p.Callbacks("once memory"),Mi=de.statusCode||{},ki={},Sn={},Qt="canceled",kt={readyState:0,getResponseHeader:function(Ht){var gi;if(q){if(!b)for(b={};gi=Ce.exec(v);)b[gi[1].toLowerCase()+" "]=(b[gi[1].toLowerCase()+" "]||[]).concat(gi[2]);gi=b[Ht.toLowerCase()+" "]}return gi==null?null:gi.join(", ")},getAllResponseHeaders:function(){return q?v:null},setRequestHeader:function(Ht,gi){return q==null&&(Ht=Sn[Ht.toLowerCase()]=Sn[Ht.toLowerCase()]||Ht,ki[Ht]=gi),this},overrideMimeType:function(Ht){return q==null&&(de.mimeType=Ht),this},statusCode:function(Ht){var gi;if(Ht)if(q)kt.always(Ht[kt.status]);else for(gi in Ht)Mi[gi]=[Mi[gi],Ht[gi]];return this},abort:function(Ht){var gi=Ht||Qt;return u&&u.abort(gi),fn(0,gi),this}};if(Ct.promise(kt),de.url=((s||de.url||W.href)+"").replace(Fe,W.protocol+"//"),de.type=c.method||c.type||de.method||de.type,de.dataTypes=(de.dataType||"*").toLowerCase().match(N)||[""],de.crossDomain==null){j=K.createElement("a");try{j.href=de.url,j.href=j.href,de.crossDomain=ot.protocol+"//"+ot.host!=j.protocol+"//"+j.host}catch{de.crossDomain=!0}}if(de.data&&de.processData&&typeof de.data!="string"&&(de.data=p.param(de.data,de.traditional)),zn(Be,de,c,kt),q)return kt;re=p.event&&de.global,re&&p.active++===0&&p.event.trigger("ajaxStart"),de.type=de.type.toUpperCase(),de.hasContent=!Ke.test(de.type),f=de.url.replace(Se,""),de.hasContent?de.data&&de.processData&&(de.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(de.data=de.data.replace(_e,"+")):(De=de.url.slice(f.length),de.data&&(de.processData||typeof de.data=="string")&&(f+=(U.test(f)?"&":"?")+de.data,delete de.data),de.cache===!1&&(f=f.replace(Re,"$1"),De=(U.test(f)?"&":"?")+"_="+V.guid+++De),de.url=f+De),de.ifModified&&(p.lastModified[f]&&kt.setRequestHeader("If-Modified-Since",p.lastModified[f]),p.etag[f]&&kt.setRequestHeader("If-None-Match",p.etag[f])),(de.data&&de.hasContent&&de.contentType!==!1||c.contentType)&&kt.setRequestHeader("Content-Type",de.contentType),kt.setRequestHeader("Accept",de.dataTypes[0]&&de.accepts[de.dataTypes[0]]?de.accepts[de.dataTypes[0]]+(de.dataTypes[0]!=="*"?", "+_t+"; q=0.01":""):de.accepts["*"]);for(ge in de.headers)kt.setRequestHeader(ge,de.headers[ge]);if(de.beforeSend&&(de.beforeSend.call(xe,kt,de)===!1||q))return kt.abort();if(Qt="abort",ut.add(de.complete),kt.done(de.success),kt.fail(de.error),u=zn(ze,de,c,kt),!u)fn(-1,"No Transport");else{if(kt.readyState=1,re&&at.trigger("ajaxSend",[kt,de]),q)return kt;de.async&&de.timeout>0&&(A=e.setTimeout(function(){kt.abort("timeout")},de.timeout));try{q=!1,u.send(ki,fn)}catch(Ht){if(q)throw Ht;fn(-1,Ht)}}function fn(Ht,gi,js,Do){var Tn,Kr,Jr,pn,zr,Dn=gi;q||(q=!0,A&&e.clearTimeout(A),u=void 0,v=Do||"",kt.readyState=Ht>0?4:0,Tn=Ht>=200&&Ht<300||Ht===304,js&&(pn=Ti(de,kt,js)),!Tn&&p.inArray("script",de.dataTypes)>-1&&p.inArray("json",de.dataTypes)<0&&(de.converters["text script"]=function(){}),pn=un(de,pn,kt,Tn),Tn?(de.ifModified&&(zr=kt.getResponseHeader("Last-Modified"),zr&&(p.lastModified[f]=zr),zr=kt.getResponseHeader("etag"),zr&&(p.etag[f]=zr)),Ht===204||de.type==="HEAD"?Dn="nocontent":Ht===304?Dn="notmodified":(Dn=pn.state,Kr=pn.data,Jr=pn.error,Tn=!Jr)):(Jr=Dn,(Ht||!Dn)&&(Dn="error",Ht<0&&(Ht=0))),kt.status=Ht,kt.statusText=(gi||Dn)+"",Tn?Ct.resolveWith(xe,[Kr,Dn,kt]):Ct.rejectWith(xe,[kt,Dn,Jr]),kt.statusCode(Mi),Mi=void 0,re&&at.trigger(Tn?"ajaxSuccess":"ajaxError",[kt,de,Tn?Kr:Jr]),ut.fireWith(xe,[kt,Dn]),re&&(at.trigger("ajaxComplete",[kt,de]),--p.active||p.event.trigger("ajaxStop")))}return kt},getJSON:function(s,c,u){return p.get(s,c,u,"json")},getScript:function(s,c){return p.get(s,void 0,c,"script")}}),p.each(["get","post"],function(s,c){p[c]=function(u,f,v,b){return F(f)&&(b=b||v,v=f,f=void 0),p.ajax(p.extend({url:u,type:c,dataType:b,data:f,success:v},p.isPlainObject(u)&&u))}}),p.ajaxPrefilter(function(s){var c;for(c in s.headers)c.toLowerCase()==="content-type"&&(s.contentType=s.headers[c]||"")}),p._evalUrl=function(s,c,u){return p.ajax({url:s,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(f){p.globalEval(f,c,u)}})},p.fn.extend({wrapAll:function(s){var c;return this[0]&&(F(s)&&(s=s.call(this[0])),c=p(s,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&c.insertBefore(this[0]),c.map(function(){for(var u=this;u.firstElementChild;)u=u.firstElementChild;return u}).append(this)),this},wrapInner:function(s){return F(s)?this.each(function(c){p(this).wrapInner(s.call(this,c))}):this.each(function(){var c=p(this),u=c.contents();u.length?u.wrapAll(s):c.append(s)})},wrap:function(s){var c=F(s);return this.each(function(u){p(this).wrapAll(c?s.call(this,u):s)})},unwrap:function(s){return this.parent(s).not("body").each(function(){p(this).replaceWith(this.childNodes)}),this}}),p.expr.pseudos.hidden=function(s){return!p.expr.pseudos.visible(s)},p.expr.pseudos.visible=function(s){return!!(s.offsetWidth||s.offsetHeight||s.getClientRects().length)},p.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var Fn={0:200,1223:204},dn=p.ajaxSettings.xhr();D.cors=!!dn&&"withCredentials"in dn,D.ajax=dn=!!dn,p.ajaxTransport(function(s){var c,u;if(D.cors||dn&&!s.crossDomain)return{send:function(f,v){var b,A=s.xhr();if(A.open(s.type,s.url,s.async,s.username,s.password),s.xhrFields)for(b in s.xhrFields)A[b]=s.xhrFields[b];s.mimeType&&A.overrideMimeType&&A.overrideMimeType(s.mimeType),!s.crossDomain&&!f["X-Requested-With"]&&(f["X-Requested-With"]="XMLHttpRequest");for(b in f)A.setRequestHeader(b,f[b]);c=function(j){return function(){c&&(c=u=A.onload=A.onerror=A.onabort=A.ontimeout=A.onreadystatechange=null,j==="abort"?A.abort():j==="error"?typeof A.status!="number"?v(0,"error"):v(A.status,A.statusText):v(Fn[A.status]||A.status,A.statusText,(A.responseType||"text")!=="text"||typeof A.responseText!="string"?{binary:A.response}:{text:A.responseText},A.getAllResponseHeaders()))}},A.onload=c(),u=A.onerror=A.ontimeout=c("error"),A.onabort!==void 0?A.onabort=u:A.onreadystatechange=function(){A.readyState===4&&e.setTimeout(function(){c&&u()})},c=c("abort");try{A.send(s.hasContent&&s.data||null)}catch(j){if(c)throw j}},abort:function(){c&&c()}}}),p.ajaxPrefilter(function(s){s.crossDomain&&(s.contents.script=!1)}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(s){return p.globalEval(s),s}}}),p.ajaxPrefilter("script",function(s){s.cache===void 0&&(s.cache=!1),s.crossDomain&&(s.type="GET")}),p.ajaxTransport("script",function(s){if(s.crossDomain||s.scriptAttrs){var c,u;return{send:function(f,v){c=p("<script>").attr(s.scriptAttrs||{}).prop({charset:s.scriptCharset,src:s.url}).on("load error",u=function(b){c.remove(),u=null,b&&v(b.type==="error"?404:200,b.type)}),K.head.appendChild(c[0])},abort:function(){u&&u()}}}});var qn=[],qi=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var s=qn.pop()||p.expando+"_"+V.guid++;return this[s]=!0,s}}),p.ajaxPrefilter("json jsonp",function(s,c,u){var f,v,b,A=s.jsonp!==!1&&(qi.test(s.url)?"url":typeof s.data=="string"&&(s.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&qi.test(s.data)&&"data");if(A||s.dataTypes[0]==="jsonp")return f=s.jsonpCallback=F(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,A?s[A]=s[A].replace(qi,"$1"+f):s.jsonp!==!1&&(s.url+=(U.test(s.url)?"&":"?")+s.jsonp+"="+f),s.converters["script json"]=function(){return b||p.error(f+" was not called"),b[0]},s.dataTypes[0]="json",v=e[f],e[f]=function(){b=arguments},u.always(function(){v===void 0?p(e).removeProp(f):e[f]=v,s[f]&&(s.jsonpCallback=c.jsonpCallback,qn.push(f)),b&&F(v)&&v(b[0]),b=v=void 0}),"script"}),D.createHTMLDocument=function(){var s=K.implementation.createHTMLDocument("").body;return s.innerHTML="<form></form><form></form>",s.childNodes.length===2}(),p.parseHTML=function(s,c,u){if(typeof s!="string")return[];typeof c=="boolean"&&(u=c,c=!1);var f,v,b;return c||(D.createHTMLDocument?(c=K.implementation.createHTMLDocument(""),f=c.createElement("base"),f.href=K.location.href,c.head.appendChild(f)):c=K),v=Le.exec(s),b=!u&&[],v?[c.createElement(v[1])]:(v=vn([s],c,b),b&&b.length&&p(b).remove(),p.merge([],v.childNodes))},p.fn.load=function(s,c,u){var f,v,b,A=this,j=s.indexOf(" ");return j>-1&&(f=yi(s.slice(j)),s=s.slice(0,j)),F(c)?(u=c,c=void 0):c&&typeof c=="object"&&(v="POST"),A.length>0&&p.ajax({url:s,type:v||"GET",dataType:"html",data:c}).done(function(q){b=arguments,A.html(f?p("<div>").append(p.parseHTML(q)).find(f):q)}).always(u&&function(q,re){A.each(function(){u.apply(this,b||[q.responseText,re,q])})}),this},p.expr.pseudos.animated=function(s){return p.grep(p.timers,function(c){return s===c.elem}).length},p.offset={setOffset:function(s,c,u){var f,v,b,A,j,q,re,ge=p.css(s,"position"),De=p(s),de={};ge==="static"&&(s.style.position="relative"),j=De.offset(),b=p.css(s,"top"),q=p.css(s,"left"),re=(ge==="absolute"||ge==="fixed")&&(b+q).indexOf("auto")>-1,re?(f=De.position(),A=f.top,v=f.left):(A=parseFloat(b)||0,v=parseFloat(q)||0),F(c)&&(c=c.call(s,u,p.extend({},j))),c.top!=null&&(de.top=c.top-j.top+A),c.left!=null&&(de.left=c.left-j.left+v),"using"in c?c.using.call(s,de):De.css(de)}},p.fn.extend({offset:function(s){if(arguments.length)return s===void 0?this:this.each(function(v){p.offset.setOffset(this,s,v)});var c,u,f=this[0];if(f)return f.getClientRects().length?(c=f.getBoundingClientRect(),u=f.ownerDocument.defaultView,{top:c.top+u.pageYOffset,left:c.left+u.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var s,c,u,f=this[0],v={top:0,left:0};if(p.css(f,"position")==="fixed")c=f.getBoundingClientRect();else{for(c=this.offset(),u=f.ownerDocument,s=f.offsetParent||u.documentElement;s&&(s===u.body||s===u.documentElement)&&p.css(s,"position")==="static";)s=s.parentNode;s&&s!==f&&s.nodeType===1&&(v=p(s).offset(),v.top+=p.css(s,"borderTopWidth",!0),v.left+=p.css(s,"borderLeftWidth",!0))}return{top:c.top-v.top-p.css(f,"marginTop",!0),left:c.left-v.left-p.css(f,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var s=this.offsetParent;s&&p.css(s,"position")==="static";)s=s.offsetParent;return s||ht})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(s,c){var u=c==="pageYOffset";p.fn[s]=function(f){return ae(this,function(v,b,A){var j;if(Q(v)?j=v:v.nodeType===9&&(j=v.defaultView),A===void 0)return j?j[c]:v[b];j?j.scrollTo(u?j.pageXOffset:A,u?A:j.pageYOffset):v[b]=A},s,f,arguments.length)}}),p.each(["top","left"],function(s,c){p.cssHooks[c]=rr(D.pixelPosition,function(u,f){if(f)return f=Si(u,c),Di.test(f)?p(u).position()[c]+"px":f})}),p.each({Height:"height",Width:"width"},function(s,c){p.each({padding:"inner"+s,content:c,"":"outer"+s},function(u,f){p.fn[f]=function(v,b){var A=arguments.length&&(u||typeof v!="boolean"),j=u||(v===!0||b===!0?"margin":"border");return ae(this,function(q,re,ge){var De;return Q(q)?f.indexOf("outer")===0?q["inner"+s]:q.document.documentElement["client"+s]:q.nodeType===9?(De=q.documentElement,Math.max(q.body["scroll"+s],De["scroll"+s],q.body["offset"+s],De["offset"+s],De["client"+s])):ge===void 0?p.css(q,re,j):p.style(q,re,ge,j)},c,A?v:void 0,A)}})}),p.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(s,c){p.fn[c]=function(u){return this.on(c,u)}}),p.fn.extend({bind:function(s,c,u){return this.on(s,null,c,u)},unbind:function(s,c){return this.off(s,null,c)},delegate:function(s,c,u,f){return this.on(c,s,u,f)},undelegate:function(s,c,u){return arguments.length===1?this.off(s,"**"):this.off(c,s||"**",u)},hover:function(s,c){return this.mouseenter(s).mouseleave(c||s)}}),p.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(s,c){p.fn[c]=function(u,f){return arguments.length>0?this.on(c,null,u,f):this.trigger(c)}});var En=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;p.proxy=function(s,c){var u,f,v;if(typeof c=="string"&&(u=s[c],c=s,s=u),!!F(s))return f=o.call(arguments,2),v=function(){return s.apply(c||this,f.concat(o.call(arguments)))},v.guid=s.guid=s.guid||p.guid++,v},p.holdReady=function(s){s?p.readyWait++:p.ready(!0)},p.isArray=Array.isArray,p.parseJSON=JSON.parse,p.nodeName=ve,p.isFunction=F,p.isWindow=Q,p.camelCase=nt,p.type=he,p.now=Date.now,p.isNumeric=function(s){var c=p.type(s);return(c==="number"||c==="string")&&!isNaN(s-parseFloat(s))},p.trim=function(s){return s==null?"":(s+"").replace(En,"")};var S=e.jQuery,z=e.$;return p.noConflict=function(s){return e.$===p&&(e.$=z),s&&e.jQuery===p&&(e.jQuery=S),p},typeof i>"u"&&(e.jQuery=e.$=p),p})}(gl)),gl.exports}(function(t){(function(e){var i=typeof self=="object"&&self.self===self&&self||typeof ar=="object"&&ar.global===ar&&ar;{var n=gh(),r;try{r=mh()}catch{}e(i,t,n,r)}})(function(e,i,n,r){var o=e.Backbone,a=Array.prototype.slice;i.VERSION="1.4.1",i.$=r,i.noConflict=function(){return e.Backbone=o,this},i.emulateHTTP=!1,i.emulateJSON=!1;var l=i.Events={},h=/\s+/,g,_=function(E,R,L,J,ue){var ce=0,Oe;if(L&&typeof L=="object")for(J!==void 0&&("context"in ue)&&ue.context===void 0&&(ue.context=J),Oe=n.keys(L);ce<Oe.length;ce++)R=_(E,R,Oe[ce],L[Oe[ce]],ue);else if(L&&h.test(L))for(Oe=L.split(h);ce<Oe.length;ce++)R=E(R,Oe[ce],J,ue);else R=E(R,L,J,ue);return R};l.on=function(E,R,L){if(this._events=_(x,this._events||{},E,R,{context:L,ctx:this,listening:g}),g){var J=this._listeners||(this._listeners={});J[g.id]=g,g.interop=!1}return this},l.listenTo=function(E,R,L){if(!E)return this;var J=E._listenId||(E._listenId=n.uniqueId("l")),ue=this._listeningTo||(this._listeningTo={}),ce=g=ue[J];ce||(this._listenId||(this._listenId=n.uniqueId("l")),ce=g=ue[J]=new K(this,E));var Oe=T(E,R,L,this);if(g=void 0,Oe)throw Oe;return ce.interop&&ce.on(R,L),this};var x=function(E,R,L,J){if(L){var ue=E[R]||(E[R]=[]),ce=J.context,Oe=J.ctx,et=J.listening;et&&et.count++,ue.push({callback:L,context:ce,ctx:ce||Oe,listening:et})}return E},T=function(E,R,L,J){try{E.on(R,L,J)}catch(ue){return ue}};l.off=function(E,R,L){return this._events?(this._events=_(M,this._events,E,R,{context:L,listeners:this._listeners}),this):this},l.stopListening=function(E,R,L){var J=this._listeningTo;if(!J)return this;for(var ue=E?[E._listenId]:n.keys(J),ce=0;ce<ue.length;ce++){var Oe=J[ue[ce]];if(!Oe)break;Oe.obj.off(R,L,this),Oe.interop&&Oe.off(R,L)}return n.isEmpty(J)&&(this._listeningTo=void 0),this};var M=function(E,R,L,J){if(E){var ue=J.context,ce=J.listeners,Oe=0,et;if(!R&&!ue&&!L){for(et=n.keys(ce);Oe<et.length;Oe++)ce[et[Oe]].cleanup();return}for(et=R?[R]:n.keys(E);Oe<et.length;Oe++){R=et[Oe];var Ze=E[R];if(!Ze)break;for(var lt=[],xt=0;xt<Ze.length;xt++){var ht=Ze[xt];if(L&&L!==ht.callback&&L!==ht.callback._callback||ue&&ue!==ht.context)lt.push(ht);else{var Ot=ht.listening;Ot&&Ot.off(R,L)}}lt.length?E[R]=lt:delete E[R]}return E}};l.once=function(E,R,L){var J=_(D,{},E,R,this.off.bind(this));return typeof E=="string"&&L==null&&(R=void 0),this.on(J,R,L)},l.listenToOnce=function(E,R,L){var J=_(D,{},R,L,this.stopListening.bind(this,E));return this.listenTo(E,J)};var D=function(E,R,L,J){if(L){var ue=E[R]=n.once(function(){J(R,ue),L.apply(this,arguments)});ue._callback=L}return E};l.trigger=function(E){if(!this._events)return this;for(var R=Math.max(0,arguments.length-1),L=Array(R),J=0;J<R;J++)L[J]=arguments[J+1];return _(F,this._events,E,void 0,L),this};var F=function(E,R,L,J){if(E){var ue=E[R],ce=E.all;ue&&ce&&(ce=ce.slice()),ue&&Q(ue,J),ce&&Q(ce,[R].concat(J))}return E},Q=function(E,R){var L,J=-1,ue=E.length,ce=R[0],Oe=R[1],et=R[2];switch(R.length){case 0:for(;++J<ue;)(L=E[J]).callback.call(L.ctx);return;case 1:for(;++J<ue;)(L=E[J]).callback.call(L.ctx,ce);return;case 2:for(;++J<ue;)(L=E[J]).callback.call(L.ctx,ce,Oe);return;case 3:for(;++J<ue;)(L=E[J]).callback.call(L.ctx,ce,Oe,et);return;default:for(;++J<ue;)(L=E[J]).callback.apply(L.ctx,R);return}},K=function(E,R){this.id=E._listenId,this.listener=E,this.obj=R,this.interop=!0,this.count=0,this._events=void 0};K.prototype.on=l.on,K.prototype.off=function(E,R){var L;this.interop?(this._events=_(M,this._events,E,R,{context:void 0,listeners:void 0}),L=!this._events):(this.count--,L=this.count===0),L&&this.cleanup()},K.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},l.bind=l.on,l.unbind=l.off,n.extend(i,l);var Z=i.Model=function(E,R){var L=E||{};R||(R={}),this.preinitialize.apply(this,arguments),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},R.collection&&(this.collection=R.collection),R.parse&&(L=this.parse(L,R)||{});var J=n.result(this,"defaults");L=n.defaults(n.extend({},J,L),J),this.set(L,R),this.changed={},this.initialize.apply(this,arguments)};n.extend(Z.prototype,l,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(E){return n.clone(this.attributes)},sync:function(){return i.sync.apply(this,arguments)},get:function(E){return this.attributes[E]},escape:function(E){return n.escape(this.get(E))},has:function(E){return this.get(E)!=null},matches:function(E){return!!n.iteratee(E,this)(this.attributes)},set:function(E,R,L){if(E==null)return this;var J;if(typeof E=="object"?(J=E,L=R):(J={})[E]=R,L||(L={}),!this._validate(J,L))return!1;var ue=L.unset,ce=L.silent,Oe=[],et=this._changing;this._changing=!0,et||(this._previousAttributes=n.clone(this.attributes),this.changed={});var Ze=this.attributes,lt=this.changed,xt=this._previousAttributes;for(var ht in J)R=J[ht],n.isEqual(Ze[ht],R)||Oe.push(ht),n.isEqual(xt[ht],R)?delete lt[ht]:lt[ht]=R,ue?delete Ze[ht]:Ze[ht]=R;if(this.idAttribute in J){var Ot=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,Ot,L)}if(!ce){Oe.length&&(this._pending=L);for(var qt=0;qt<Oe.length;qt++)this.trigger("change:"+Oe[qt],this,Ze[Oe[qt]],L)}if(et)return this;if(!ce)for(;this._pending;)L=this._pending,this._pending=!1,this.trigger("change",this,L);return this._pending=!1,this._changing=!1,this},unset:function(E,R){return this.set(E,void 0,n.extend({},R,{unset:!0}))},clear:function(E){var R={};for(var L in this.attributes)R[L]=void 0;return this.set(R,n.extend({},E,{unset:!0}))},hasChanged:function(E){return E==null?!n.isEmpty(this.changed):n.has(this.changed,E)},changedAttributes:function(E){if(!E)return this.hasChanged()?n.clone(this.changed):!1;var R=this._changing?this._previousAttributes:this.attributes,L={},J;for(var ue in E){var ce=E[ue];n.isEqual(R[ue],ce)||(L[ue]=ce,J=!0)}return J?L:!1},previous:function(E){return E==null||!this._previousAttributes?null:this._previousAttributes[E]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(E){E=n.extend({parse:!0},E);var R=this,L=E.success;return E.success=function(J){var ue=E.parse?R.parse(J,E):J;if(!R.set(ue,E))return!1;L&&L.call(E.context,R,J,E),R.trigger("sync",R,J,E)},nt(this,E),this.sync("read",this,E)},save:function(E,R,L){var J;E==null||typeof E=="object"?(J=E,L=R):(J={})[E]=R,L=n.extend({validate:!0,parse:!0},L);var ue=L.wait;if(J&&!ue){if(!this.set(J,L))return!1}else if(!this._validate(J,L))return!1;var ce=this,Oe=L.success,et=this.attributes;L.success=function(xt){ce.attributes=et;var ht=L.parse?ce.parse(xt,L):xt;if(ue&&(ht=n.extend({},J,ht)),ht&&!ce.set(ht,L))return!1;Oe&&Oe.call(L.context,ce,xt,L),ce.trigger("sync",ce,xt,L)},nt(this,L),J&&ue&&(this.attributes=n.extend({},et,J));var Ze=this.isNew()?"create":L.patch?"patch":"update";Ze==="patch"&&!L.attrs&&(L.attrs=J);var lt=this.sync(Ze,this,L);return this.attributes=et,lt},destroy:function(E){E=E?n.clone(E):{};var R=this,L=E.success,J=E.wait,ue=function(){R.stopListening(),R.trigger("destroy",R,R.collection,E)};E.success=function(Oe){J&&ue(),L&&L.call(E.context,R,Oe,E),R.isNew()||R.trigger("sync",R,Oe,E)};var ce=!1;return this.isNew()?n.defer(E.success):(nt(this,E),ce=this.sync("delete",this,E)),J||ue(),ce},url:function(){var E=n.result(this,"urlRoot")||n.result(this.collection,"url")||Ge();if(this.isNew())return E;var R=this.get(this.idAttribute);return E.replace(/[^\/]$/,"$&/")+encodeURIComponent(R)},parse:function(E,R){return E},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(E){return this._validate({},n.extend({},E,{validate:!0}))},_validate:function(E,R){if(!R.validate||!this.validate)return!0;E=n.extend({},this.attributes,E);var L=this.validationError=this.validate(E,R)||null;return L?(this.trigger("invalid",this,L,n.extend(R,{validationError:L})),!1):!0}});var ee=i.Collection=function(E,R){R||(R={}),this.preinitialize.apply(this,arguments),R.model&&(this.model=R.model),R.comparator!==void 0&&(this.comparator=R.comparator),this._reset(),this.initialize.apply(this,arguments),E&&this.reset(E,n.extend({silent:!0},R))},he={add:!0,remove:!0,merge:!0},pe={add:!0,remove:!1},p=function(E,R,L){L=Math.min(Math.max(L,0),E.length);var J=Array(E.length-L),ue=R.length,ce;for(ce=0;ce<J.length;ce++)J[ce]=E[ce+L];for(ce=0;ce<ue;ce++)E[ce+L]=R[ce];for(ce=0;ce<J.length;ce++)E[ce+ue+L]=J[ce]};n.extend(ee.prototype,l,{model:Z,preinitialize:function(){},initialize:function(){},toJSON:function(E){return this.map(function(R){return R.toJSON(E)})},sync:function(){return i.sync.apply(this,arguments)},add:function(E,R){return this.set(E,n.extend({merge:!1},R,pe))},remove:function(E,R){R=n.extend({},R);var L=!n.isArray(E);E=L?[E]:E.slice();var J=this._removeModels(E,R);return!R.silent&&J.length&&(R.changes={added:[],merged:[],removed:J},this.trigger("update",this,R)),L?J[0]:J},set:function(E,R){if(E!=null){R=n.extend({},he,R),R.parse&&!this._isModel(E)&&(E=this.parse(E,R)||[]);var L=!n.isArray(E);E=L?[E]:E.slice();var J=R.at;J!=null&&(J=+J),J>this.length&&(J=this.length),J<0&&(J+=this.length+1);var ue=[],ce=[],Oe=[],et=[],Ze={},lt=R.add,xt=R.merge,ht=R.remove,Ot=!1,qt=this.comparator&&J==null&&R.sort!==!1,Zt=n.isString(this.comparator)?this.comparator:null,Pt,Ut;for(Ut=0;Ut<E.length;Ut++){Pt=E[Ut];var ci=this.get(Pt);if(ci){if(xt&&Pt!==ci){var pi=this._isModel(Pt)?Pt.attributes:Pt;R.parse&&(pi=ci.parse(pi,R)),ci.set(pi,R),Oe.push(ci),qt&&!Ot&&(Ot=ci.hasChanged(Zt))}Ze[ci.cid]||(Ze[ci.cid]=!0,ue.push(ci)),E[Ut]=ci}else lt&&(Pt=E[Ut]=this._prepareModel(Pt,R),Pt&&(ce.push(Pt),this._addReference(Pt,R),Ze[Pt.cid]=!0,ue.push(Pt)))}if(ht){for(Ut=0;Ut<this.length;Ut++)Pt=this.models[Ut],Ze[Pt.cid]||et.push(Pt);et.length&&this._removeModels(et,R)}var Ii=!1,Gt=!qt&&lt&&ht;if(ue.length&&Gt?(Ii=this.length!==ue.length||n.some(this.models,function(xi,Wt){return xi!==ue[Wt]}),this.models.length=0,p(this.models,ue,0),this.length=this.models.length):ce.length&&(qt&&(Ot=!0),p(this.models,ce,J??this.length),this.length=this.models.length),Ot&&this.sort({silent:!0}),!R.silent){for(Ut=0;Ut<ce.length;Ut++)J!=null&&(R.index=J+Ut),Pt=ce[Ut],Pt.trigger("add",Pt,this,R);(Ot||Ii)&&this.trigger("sort",this,R),(ce.length||et.length||Oe.length)&&(R.changes={added:ce,removed:et,merged:Oe},this.trigger("update",this,R))}return L?E[0]:E}},reset:function(E,R){R=R?n.clone(R):{};for(var L=0;L<this.models.length;L++)this._removeReference(this.models[L],R);return R.previousModels=this.models,this._reset(),E=this.add(E,n.extend({silent:!0},R)),R.silent||this.trigger("reset",this,R),E},push:function(E,R){return this.add(E,n.extend({at:this.length},R))},pop:function(E){var R=this.at(this.length-1);return this.remove(R,E)},unshift:function(E,R){return this.add(E,n.extend({at:0},R))},shift:function(E){var R=this.at(0);return this.remove(R,E)},slice:function(){return a.apply(this.models,arguments)},get:function(E){if(E!=null)return this._byId[E]||this._byId[this.modelId(this._isModel(E)?E.attributes:E,E.idAttribute)]||E.cid&&this._byId[E.cid]},has:function(E){return this.get(E)!=null},at:function(E){return E<0&&(E+=this.length),this.models[E]},where:function(E,R){return this[R?"find":"filter"](E)},findWhere:function(E){return this.where(E,!0)},sort:function(E){var R=this.comparator;if(!R)throw new Error("Cannot sort a set without a comparator");E||(E={});var L=R.length;return n.isFunction(R)&&(R=R.bind(this)),L===1||n.isString(R)?this.models=this.sortBy(R):this.models.sort(R),E.silent||this.trigger("sort",this,E),this},pluck:function(E){return this.map(E+"")},fetch:function(E){E=n.extend({parse:!0},E);var R=E.success,L=this;return E.success=function(J){var ue=E.reset?"reset":"set";L[ue](J,E),R&&R.call(E.context,L,J,E),L.trigger("sync",L,J,E)},nt(this,E),this.sync("read",this,E)},create:function(E,R){R=R?n.clone(R):{};var L=R.wait;if(E=this._prepareModel(E,R),!E)return!1;L||this.add(E,R);var J=this,ue=R.success;return R.success=function(ce,Oe,et){L&&J.add(ce,et),ue&&ue.call(et.context,ce,Oe,et)},E.save(null,R),E},parse:function(E,R){return E},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(E,R){return E[R||this.model.prototype.idAttribute||"id"]},values:function(){return new oe(this,me)},keys:function(){return new oe(this,Te)},entries:function(){return new oe(this,Ae)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(E,R){if(this._isModel(E))return E.collection||(E.collection=this),E;R=R?n.clone(R):{},R.collection=this;var L;return this.model.prototype?L=new this.model(E,R):L=this.model(E,R),L.validationError?(this.trigger("invalid",this,L.validationError,R),!1):L},_removeModels:function(E,R){for(var L=[],J=0;J<E.length;J++){var ue=this.get(E[J]);if(ue){var ce=this.indexOf(ue);this.models.splice(ce,1),this.length--,delete this._byId[ue.cid];var Oe=this.modelId(ue.attributes,ue.idAttribute);Oe!=null&&delete this._byId[Oe],R.silent||(R.index=ce,ue.trigger("remove",ue,this,R)),L.push(ue),this._removeReference(ue,R)}}return L},_isModel:function(E){return E instanceof Z},_addReference:function(E,R){this._byId[E.cid]=E;var L=this.modelId(E.attributes,E.idAttribute);L!=null&&(this._byId[L]=E),E.on("all",this._onModelEvent,this)},_removeReference:function(E,R){delete this._byId[E.cid];var L=this.modelId(E.attributes,E.idAttribute);L!=null&&delete this._byId[L],this===E.collection&&delete E.collection,E.off("all",this._onModelEvent,this)},_onModelEvent:function(E,R,L,J){if(R){if((E==="add"||E==="remove")&&L!==this)return;if(E==="destroy"&&this.remove(R,J),E==="changeId"){var ue=this.modelId(R.previousAttributes(),R.idAttribute),ce=this.modelId(R.attributes,R.idAttribute);ue!=null&&delete this._byId[ue],ce!=null&&(this._byId[ce]=R)}}this.trigger.apply(this,arguments)}});var H=typeof Symbol=="function"&&Symbol.iterator;H&&(ee.prototype[H]=ee.prototype.values);var oe=function(E,R){this._collection=E,this._kind=R,this._index=0},me=1,Te=2,Ae=3;H&&(oe.prototype[H]=function(){return this}),oe.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var E=this._collection.at(this._index);this._index++;var R;if(this._kind===me)R=E;else{var L=this._collection.modelId(E.attributes,E.idAttribute);this._kind===Te?R=L:R=[L,E]}return{value:R,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var ve=i.View=function(E){this.cid=n.uniqueId("view"),this.preinitialize.apply(this,arguments),n.extend(this,n.pick(E,We)),this._ensureElement(),this.initialize.apply(this,arguments)},Le=/^(\S+)\s*(.*)$/,We=["model","collection","el","id","attributes","className","tagName","events"];n.extend(ve.prototype,l,{tagName:"div",$:function(E){return this.$el.find(E)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(E){return this.undelegateEvents(),this._setElement(E),this.delegateEvents(),this},_setElement:function(E){this.$el=E instanceof i.$?E:i.$(E),this.el=this.$el[0]},delegateEvents:function(E){if(E||(E=n.result(this,"events")),!E)return this;this.undelegateEvents();for(var R in E){var L=E[R];if(n.isFunction(L)||(L=this[L]),!!L){var J=R.match(Le);this.delegate(J[1],J[2],L.bind(this))}}return this},delegate:function(E,R,L){return this.$el.on(E+".delegateEvents"+this.cid,R,L),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(E,R,L){return this.$el.off(E+".delegateEvents"+this.cid,R,L),this},_createElement:function(E){return document.createElement(E)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var E=n.extend({},n.result(this,"attributes"));this.id&&(E.id=n.result(this,"id")),this.className&&(E.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(E)}},_setAttributes:function(E){this.$el.attr(E)}});var it=function(E,R,L,J){switch(R){case 1:return function(){return E[L](this[J])};case 2:return function(ue){return E[L](this[J],ue)};case 3:return function(ue,ce){return E[L](this[J],tt(ue,this),ce)};case 4:return function(ue,ce,Oe){return E[L](this[J],tt(ue,this),ce,Oe)};default:return function(){var ue=a.call(arguments);return ue.unshift(this[J]),E[L].apply(E,ue)}}},Ye=function(E,R,L,J){n.each(L,function(ue,ce){R[ce]&&(E.prototype[ce]=it(R,ue,ce,J))})},tt=function(E,R){return n.isFunction(E)?E:n.isObject(E)&&!R._isModel(E)?Qe(E):n.isString(E)?function(L){return L.get(E)}:E},Qe=function(E){var R=n.matches(E);return function(L){return R(L.attributes)}},st={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},Tt={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};n.each([[ee,st,"models"],[Z,Tt,"attributes"]],function(E){var R=E[0],L=E[1],J=E[2];R.mixin=function(ue){var ce=n.reduce(n.functions(ue),function(Oe,et){return Oe[et]=0,Oe},{});Ye(R,ue,ce,J)},Ye(R,n,L,J)}),i.sync=function(E,R,L){var J=N[E];n.defaults(L||(L={}),{emulateHTTP:i.emulateHTTP,emulateJSON:i.emulateJSON});var ue={type:J,dataType:"json"};if(L.url||(ue.url=n.result(R,"url")||Ge()),L.data==null&&R&&(E==="create"||E==="update"||E==="patch")&&(ue.contentType="application/json",ue.data=JSON.stringify(L.attrs||R.toJSON(L))),L.emulateJSON&&(ue.contentType="application/x-www-form-urlencoded",ue.data=ue.data?{model:ue.data}:{}),L.emulateHTTP&&(J==="PUT"||J==="DELETE"||J==="PATCH")){ue.type="POST",L.emulateJSON&&(ue.data._method=J);var ce=L.beforeSend;L.beforeSend=function(Ze){if(Ze.setRequestHeader("X-HTTP-Method-Override",J),ce)return ce.apply(this,arguments)}}ue.type!=="GET"&&!L.emulateJSON&&(ue.processData=!1);var Oe=L.error;L.error=function(Ze,lt,xt){L.textStatus=lt,L.errorThrown=xt,Oe&&Oe.call(L.context,Ze,lt,xt)};var et=L.xhr=i.ajax(n.extend(ue,L));return R.trigger("request",R,et,L),et};var N={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};i.ajax=function(){return i.$.ajax.apply(i.$,arguments)};var O=i.Router=function(E){E||(E={}),this.preinitialize.apply(this,arguments),E.routes&&(this.routes=E.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,$=/(\(\?)?:\w+/g,B=/\*\w+/g,te=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(O.prototype,l,{preinitialize:function(){},initialize:function(){},route:function(E,R,L){n.isRegExp(E)||(E=this._routeToRegExp(E)),n.isFunction(R)&&(L=R,R=""),L||(L=this[R]);var J=this;return i.history.route(E,function(ue){var ce=J._extractParameters(E,ue);J.execute(L,ce,R)!==!1&&(J.trigger.apply(J,["route:"+R].concat(ce)),J.trigger("route",R,ce),i.history.trigger("route",J,R,ce))}),this},execute:function(E,R,L){E&&E.apply(this,R)},navigate:function(E,R){return i.history.navigate(E,R),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var E,R=n.keys(this.routes);(E=R.pop())!=null;)this.route(E,this.routes[E])}},_routeToRegExp:function(E){return E=E.replace(te,"\\$&").replace(k,"(?:$1)?").replace($,function(R,L){return L?R:"([^/?]+)"}).replace(B,"([^?]*?)"),new RegExp("^"+E+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(E,R){var L=E.exec(R).slice(1);return n.map(L,function(J,ue){return ue===L.length-1?J||null:J?decodeURIComponent(J):null})}});var X=i.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},fe=/^[#\/]|\s+$/g,ae=/^\/+|\/+$/g,Ee=/#.*$/;X.started=!1,n.extend(X.prototype,l,{interval:50,atRoot:function(){var E=this.location.pathname.replace(/[^\/]$/,"$&/");return E===this.root&&!this.getSearch()},matchRoot:function(){var E=this.decodeFragment(this.location.pathname),R=E.slice(0,this.root.length-1)+"/";return R===this.root},decodeFragment:function(E){return decodeURI(E.replace(/%25/g,"%2525"))},getSearch:function(){var E=this.location.href.replace(/#.*/,"").match(/\?.+/);return E?E[0]:""},getHash:function(E){var R=(E||this).location.href.match(/#(.*)$/);return R?R[1]:""},getPath:function(){var E=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return E.charAt(0)==="/"?E.slice(1):E},getFragment:function(E){return E==null&&(this._usePushState||!this._wantsHashChange?E=this.getPath():E=this.getHash()),E.replace(fe,"")},start:function(E){if(X.started)throw new Error("Backbone.history has already been started");if(X.started=!0,this.options=n.extend({root:"/"},this.options,E),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.history&&this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(ae,"/"),this._wantsHashChange&&this._wantsPushState)if(!this._hasPushState&&!this.atRoot()){var R=this.root.slice(0,-1)||"/";return this.location.replace(R+"#"+this.getPath()),!0}else this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var L=document.body,J=L.insertBefore(this.iframe,L.firstChild).contentWindow;J.document.open(),J.document.close(),J.location.hash="#"+this.fragment}var ue=window.addEventListener||function(ce,Oe){return attachEvent("on"+ce,Oe)};if(this._usePushState?ue("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?ue("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var E=window.removeEventListener||function(R,L){return detachEvent("on"+R,L)};this._usePushState?E("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&E("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),X.started=!1},route:function(E,R){this.handlers.unshift({route:E,callback:R})},checkUrl:function(E){var R=this.getFragment();if(R===this.fragment&&this.iframe&&(R=this.getHash(this.iframe.contentWindow)),R===this.fragment)return!1;this.iframe&&this.navigate(R),this.loadUrl()},loadUrl:function(E){return this.matchRoot()?(E=this.fragment=this.getFragment(E),n.some(this.handlers,function(R){if(R.route.test(E))return R.callback(E),!0})):!1},navigate:function(E,R){if(!X.started)return!1;(!R||R===!0)&&(R={trigger:!!R}),E=this.getFragment(E||"");var L=this.root;(E===""||E.charAt(0)==="?")&&(L=L.slice(0,-1)||"/");var J=L+E;E=E.replace(Ee,"");var ue=this.decodeFragment(E);if(this.fragment!==ue){if(this.fragment=ue,this._usePushState)this.history[R.replace?"replaceState":"pushState"]({},document.title,J);else if(this._wantsHashChange){if(this._updateHash(this.location,E,R.replace),this.iframe&&E!==this.getHash(this.iframe.contentWindow)){var ce=this.iframe.contentWindow;R.replace||(ce.document.open(),ce.document.close()),this._updateHash(ce.location,E,R.replace)}}else return this.location.assign(J);if(R.trigger)return this.loadUrl(E)}},_updateHash:function(E,R,L){if(L){var J=E.href.replace(/(javascript:|#).*$/,"");E.replace(J+"#"+R)}else E.hash="#"+R}}),i.history=new X;var He=function(E,R){var L=this,J;return E&&n.has(E,"constructor")?J=E.constructor:J=function(){return L.apply(this,arguments)},n.extend(J,L,R),J.prototype=n.create(L.prototype,E),J.prototype.constructor=J,J.__super__=L.prototype,J};Z.extend=ee.extend=O.extend=ve.extend=X.extend=He;var Ge=function(){throw new Error('A "url" property or function must be specified')},nt=function(E,R){var L=R.error;R.error=function(J){L&&L.call(R.context,E,J,R),E.trigger("error",E,J,R)}};return i})})(ph);const ft=Oo(ph);var R5=mh();const C=Oo(R5);var z5=gh();const $e=Oo(z5);class Mo extends Error{constructor(e,i={}){super(`Node not found: ${e}`,i),this.name="NodeNotFoundError"}}class b1 extends Error{constructor(e){super(`Missing key: ${e}`),this.name="KeyError"}}const F5="modulepreload",D5=function(t,e){return new URL(t,e).href},I2={},Zs=function(e,i,n){let r=Promise.resolve();if(i&&i.length>0){const a=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),h=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));r=Promise.allSettled(i.map(g=>{if(g=D5(g,n),g in I2)return;I2[g]=!0;const _=g.endsWith(".css"),x=_?'[rel="stylesheet"]':"";if(!!n)for(let D=a.length-1;D>=0;D--){const F=a[D];if(F.href===g&&(!_||F.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${g}"]${x}`))return;const M=document.createElement("link");if(M.rel=_?"stylesheet":F5,_||(M.as="script"),M.crossOrigin="",M.href=g,h&&M.setAttribute("nonce",h),document.head.appendChild(M),_)return new Promise((D,F)=>{M.addEventListener("load",D),M.addEventListener("error",()=>F(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return r.then(a=>{for(const l of a||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})};class y1{constructor(e,i){Vt(this,"kind","array_to_array");if(e.keepbits<0)throw new Error("keepbits must be zero or positive")}static fromConfig(e,i){return new y1(e,i)}encode(e){throw new Error("`BitroundCodec.encode` is not implemented. Please open an issue at https://github.com/manzt/zarrita.js/issues.")}decode(e){return e}}var On;class _h{constructor(e,i,n){Fi(this,On);typeof e=="number"?wi(this,On,new Uint8Array(e)):e instanceof ArrayBuffer?wi(this,On,new Uint8Array(e,i,n)):wi(this,On,new Uint8Array(Array.from(e,r=>r?1:0)))}get BYTES_PER_ELEMENT(){return 1}get byteOffset(){return Rt(this,On).byteOffset}get byteLength(){return Rt(this,On).byteLength}get buffer(){return Rt(this,On).buffer}get length(){return Rt(this,On).length}get(e){let i=Rt(this,On)[e];return typeof i=="number"?i!==0:i}set(e,i){Rt(this,On)[e]=i?1:0}fill(e){Rt(this,On).fill(e?1:0)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}On=new WeakMap;var Cs;class w1{constructor(e,i,n,r){Vt(this,"_data");Vt(this,"chars");Fi(this,Cs);if(this.chars=e,wi(this,Cs,new TextEncoder),typeof i=="number")this._data=new Uint8Array(i*e);else if(i instanceof ArrayBuffer)r&&(r=r*e),this._data=new Uint8Array(i,n,r);else{let o=Array.from(i);this._data=new Uint8Array(o.length*e);for(let a=0;a<o.length;a++)this.set(a,o[a])}}get BYTES_PER_ELEMENT(){return this.chars}get byteOffset(){return this._data.byteOffset}get byteLength(){return this._data.byteLength}get buffer(){return this._data.buffer}get length(){return this.byteLength/this.BYTES_PER_ELEMENT}get(e){const i=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);return new TextDecoder().decode(i).replace(/\x00/g,"")}set(e,i){const n=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);n.fill(0),n.set(Rt(this,Cs).encode(i))}fill(e){const i=Rt(this,Cs).encode(e);for(let n=0;n<this.length;n++)this._data.set(i,n*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}Cs=new WeakMap;var Gi;const N1=class N1{constructor(e,i,n,r){Fi(this,Gi);Vt(this,"chars");if(this.chars=e,typeof i=="number")wi(this,Gi,new Int32Array(i*e));else if(i instanceof ArrayBuffer)r&&(r*=e),wi(this,Gi,new Int32Array(i,n,r));else{const o=i,a=new N1(e,1);wi(this,Gi,new Int32Array(function*(){for(let l of o)a.set(0,l),yield*Rt(a,Gi)}()))}}get BYTES_PER_ELEMENT(){return Rt(this,Gi).BYTES_PER_ELEMENT*this.chars}get byteLength(){return Rt(this,Gi).byteLength}get byteOffset(){return Rt(this,Gi).byteOffset}get buffer(){return Rt(this,Gi).buffer}get length(){return Rt(this,Gi).length/this.chars}get(e){const i=this.chars*e;let n="";for(let r=0;r<this.chars;r++)n+=String.fromCodePoint(Rt(this,Gi)[i+r]);return n.replace(/\u0000/g,"")}set(e,i){const n=this.chars*e,r=Rt(this,Gi).subarray(n,n+this.chars);r.fill(0);for(let o=0;o<this.chars;o++)r[o]=i.codePointAt(o)??0}fill(e){this.set(0,e);let i=Rt(this,Gi).subarray(0,this.chars);for(let n=1;n<this.length;n++)Rt(this,Gi).set(i,n*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}};Gi=new WeakMap;let uo=N1;function No(t){const e=new TextDecoder().decode(t);return JSON.parse(e)}function O2(t,e){const i=e/2,n=e-1;let r=0;for(let o=0;o<t.length;o+=e)for(let a=0;a<i;a+=1)r=t[o+a],t[o+a]=t[o+n-a],t[o+n-a]=r}const L5={int8:Int8Array,int16:Int16Array,int32:Int32Array,int64:globalThis.BigInt64Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,uint64:globalThis.BigUint64Array,float32:Float32Array,float64:Float64Array,bool:_h},P5=/v2:([US])(\d+)/;function vh(t){if(t==="v2:object")return globalThis.Array;let e=t.match(P5);if(e){let[,n,r]=e;return(n==="U"?uo:w1).bind(null,Number(r))}let i=L5[t];if(!i)throw new Error(`Unknown or unsupported data_type: ${t}`);return i}function hs(t,e){return(e==="C"?$5:B5)(t)}function $5(t){const e=t.length,i=globalThis.Array(e);for(let n=e-1,r=1;n>=0;n--)i[n]=r,r*=t[n];return i}function B5(t){const e=t.length,i=globalThis.Array(e);for(let n=0,r=1;n<e;n++)i[n]=r,r*=t[n];return i}function W5({name:t,configuration:e}){if(t==="default"){const i=(e==null?void 0:e.separator)??"/";return n=>["c",...n].join(i)}if(t==="v2"){const i=(e==null?void 0:e.separator)??".";return n=>n.join(i)||"0"}throw new Error(`Unknown chunk key encoding: ${t}`)}function Bl(t){var i;const e=t.find(n=>n.name==="transpose");return((i=e==null?void 0:e.configuration)==null?void 0:i.order)==="F"?"F":"C"}const H5=/^([<|>])(.*)$/;function j5(t){if(t==="|O")return{data_type:"v2:object"};let e=t.match(H5);if(!e)throw new Error(`Invalid dtype: ${t}`);let[,i,n]=e,r={b1:"bool",i1:"int8",u1:"uint8",i2:"int16",u2:"uint16",i4:"int32",u4:"uint32",i8:"int64",u8:"uint64",f4:"float32",f8:"float64"}[n]??(n.startsWith("S")||n.startsWith("U")?`v2:${n}`:void 0);if(!r)throw new Error(`Unsupported or unknown dtype: ${t}`);return i==="|"?{data_type:r}:{data_type:r,endian:i==="<"?"little":"big"}}function U5(t,e={}){let i=[],n=j5(t.dtype);t.order==="F"&&i.push({name:"transpose",configuration:{order:"F"}}),"endian"in n&&n.endian==="big"&&i.push({name:"bytes",configuration:{endian:"big"}});for(let{id:r,...o}of t.filters??[])i.push({name:r,configuration:o});if(t.compressor){let{id:r,...o}=t.compressor;i.push({name:r,configuration:o})}return{zarr_format:3,node_type:"array",shape:t.shape,data_type:n.data_type,chunk_grid:{name:"regular",configuration:{chunk_shape:t.chunks}},chunk_key_encoding:{name:"v2",configuration:{separator:t.dimension_separator??"."}},codecs:i,fill_value:t.fill_value,attributes:e}}function V5(t,e={}){return{zarr_format:3,node_type:"group",attributes:e}}function Y5(t,e){if(e!=="number"&&e!=="bigint"&&e!=="boolean"&&e!=="object"&&e!=="string")return t===e;let i=t==="bool";if(e==="boolean")return i;let n=t.startsWith("v2:U")||t.startsWith("v2:S");if(e==="string")return n;let r=t==="int64"||t==="uint64";if(e==="bigint")return r;let o=t==="v2:object";return e==="object"?o:!n&&!r&&!i&&!o}function q5(t){return(t==null?void 0:t.name)==="sharding_indexed"}function bh(t){return(t.data_type==="uint64"||t.data_type==="int64")&&t.fill_value!=null?BigInt(t.fill_value):t.fill_value}const M2=X5();function X5(){const t=new Uint32Array([305419896]);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)[0]!==18}function N2(t){return"BYTES_PER_ELEMENT"in t?t.BYTES_PER_ELEMENT:4}var po,Wr,go,mo,As;const R1=class R1{constructor(e,i){Vt(this,"kind","array_to_bytes");Fi(this,po);Fi(this,Wr);Fi(this,go);Fi(this,mo);Fi(this,As);wi(this,As,e==null?void 0:e.endian),wi(this,Wr,vh(i.data_type)),wi(this,mo,i.shape),wi(this,po,hs(i.shape,Bl(i.codecs)));const n=new(Rt(this,Wr))(0);wi(this,go,n.BYTES_PER_ELEMENT)}static fromConfig(e,i){return new R1(e,i)}encode(e){let i=new Uint8Array(e.data.buffer);return M2&&Rt(this,As)==="big"&&O2(i,N2(Rt(this,Wr))),i}decode(e){return M2&&Rt(this,As)==="big"&&O2(e,N2(Rt(this,Wr))),{data:new(Rt(this,Wr))(e.buffer,e.byteOffset,e.byteLength/Rt(this,go)),shape:Rt(this,mo),stride:Rt(this,po)}}};po=new WeakMap,Wr=new WeakMap,go=new WeakMap,mo=new WeakMap,As=new WeakMap;let ya=R1;class x1{constructor(){Vt(this,"kind","bytes_to_bytes")}static fromConfig(){return new x1}encode(e){throw new Error("Not implemented")}decode(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength-4)}}function Z5(t,e){if(Number.isNaN(e))throw new Error("JsonCodec allow_nan is false but NaN was encountered during encoding.");if(e===Number.POSITIVE_INFINITY)throw new Error("JsonCodec allow_nan is false but Infinity was encountered during encoding.");if(e===Number.NEGATIVE_INFINITY)throw new Error("JsonCodec allow_nan is false but -Infinity was encountered during encoding.");return e}function G5(t,e){return e instanceof Object&&!Array.isArray(e)?Object.keys(e).sort().reduce((i,n)=>(i[n]=e[n],i),{}):e}var _o,vo;const z1=class z1{constructor(e={}){Vt(this,"configuration");Vt(this,"kind","array_to_bytes");Fi(this,_o);Fi(this,vo);this.configuration=e;const{encoding:i="utf-8",skipkeys:n=!1,ensure_ascii:r=!0,check_circular:o=!0,allow_nan:a=!0,sort_keys:l=!0,indent:h,strict:g=!0}=e;let _=e.separators;_||(h?_=[", ",": "]:_=[",",":"]),wi(this,_o,{encoding:i,skipkeys:n,ensure_ascii:r,check_circular:o,allow_nan:a,indent:h,separators:_,sort_keys:l}),wi(this,vo,{strict:g})}static fromConfig(e){return new z1(e)}encode(e){const{indent:i,encoding:n,ensure_ascii:r,check_circular:o,allow_nan:a,sort_keys:l}=Rt(this,_o);if(n!=="utf-8")throw new Error("JsonCodec does not yet support non-utf-8 encoding.");const h=[];if(!o)throw new Error("JsonCodec does not yet support skipping the check for circular references during encoding.");a||h.push(Z5),l&&h.push(G5);const g=Array.from(e.data);g.push("|O"),g.push(e.shape);let _;h.length&&(_=(T,M)=>{let D=M;for(let F of h)D=F(T,D);return D});let x=JSON.stringify(g,_,i);return r&&(x=x.replace(/[\u007F-\uFFFF]/g,T=>{const M=`0000${T.charCodeAt(0).toString(16)}`;return`\\u${M.substring(M.length-4)}`})),new TextEncoder().encode(x)}decode(e){const{strict:i}=Rt(this,vo);if(!i)throw new Error("JsonCodec does not yet support non-strict decoding.");const n=No(e),r=n.pop();if(n.pop(),!r)throw new Error("0D not implemented for JsonCodec.");const o=hs(r,"C");return{data:n,shape:r,stride:o}}};_o=new WeakMap,vo=new WeakMap;let Wl=z1;function R2(t){return t instanceof _h||t instanceof w1||t instanceof uo?new Proxy(t,{get(i,n){return i.get(Number(n))},set(i,n,r){return i.set(Number(n),r),!0}}):t}function K5(t,e){let i;return t.data instanceof w1||t.data instanceof uo?i=new t.constructor(t.data.length,t.data.chars):i=new t.constructor(t.data.length),{data:i,shape:t.shape,stride:hs(t.shape,e)}}function J5(t,e){let i=K5(t,e),n=t.shape.length,r=t.data.length,o=Array(n).fill(0),a=R2(t.data),l=R2(i.data);for(let h=0;h<r;h++){let g=0;for(let _=0;_<n;_++)g+=o[_]*i.stride[_];l[g]=a[h],o[0]+=1;for(let _=0;_<n;_++)if(o[_]===t.shape[_]){if(_+1===n)break;o[_]=0,o[_+1]+=1}}return i}function Q5(t){if(!t.stride)return"C";let e=hs(t.shape,"C");return t.stride.every((i,n)=>i===e[n])?"C":"F"}class E1{constructor(e){Vt(this,"configuration");Vt(this,"kind","array_to_array");this.configuration=e}static fromConfig(e){return new E1(e)}encode(e){var i,n;return Q5(e)===((i=this.configuration)==null?void 0:i.order)?e:J5(e,((n=this.configuration)==null?void 0:n.order)??"C")}decode(e){return e}}var bo,yo;const F1=class F1{constructor(e){Vt(this,"kind","array_to_bytes");Fi(this,bo);Fi(this,yo);wi(this,bo,e),wi(this,yo,hs(e,"C"))}static fromConfig(e,i){return new F1(i.shape)}encode(e){throw new Error("Method not implemented.")}decode(e){let i=new TextDecoder,n=new DataView(e.buffer),r=Array(n.getUint32(0,!0)),o=4;for(let a=0;a<r.length;a++){let l=n.getUint32(o,!0);o+=4,r[a]=i.decode(e.buffer.slice(o,o+l)),o+=l}return{data:r,shape:Rt(this,bo),stride:Rt(this,yo)}}};bo=new WeakMap,yo=new WeakMap;let Hl=F1;function eg(){return new Map().set("blosc",()=>Zs(()=>import("./blosc-E49GQuAK.js"),__vite__mapDeps([0,1]),import.meta.url).then(t=>t.default)).set("gzip",()=>Zs(()=>import("./gzip-CF-9a_hd.js"),__vite__mapDeps([2,3]),import.meta.url).then(t=>t.default)).set("lz4",()=>Zs(()=>import("./lz4-BIGKWw27.js"),__vite__mapDeps([4,1]),import.meta.url).then(t=>t.default)).set("zlib",()=>Zs(()=>import("./zlib-CBiqHlio.js"),__vite__mapDeps([5,3]),import.meta.url).then(t=>t.default)).set("zstd",()=>Zs(()=>import("./zstd-IvP746pw.js"),__vite__mapDeps([6,1]),import.meta.url).then(t=>t.default)).set("transpose",()=>E1).set("bytes",()=>ya).set("crc32c",()=>x1).set("vlen-utf8",()=>Hl).set("json2",()=>Wl).set("bitround",()=>y1)}const tg=eg();function jl(t){let e;return{async encode(i){e||(e=await z2(t));for(const r of e.array_to_array)i=await r.encode(i);let n=await e.array_to_bytes.encode(i);for(const r of e.bytes_to_bytes)n=await r.encode(n);return n},async decode(i){e||(e=await z2(t));for(let r=e.bytes_to_bytes.length-1;r>=0;r--)i=await e.bytes_to_bytes[r].decode(i);let n=await e.array_to_bytes.decode(i);for(let r=e.array_to_array.length-1;r>=0;r--)n=await e.array_to_array[r].decode(n);return n}}}async function z2(t){let e=t.codecs.map(async o=>{var l;let a=await((l=tg.get(o.name))==null?void 0:l());if(!a)throw new Error(`Unknown codec: ${o.name}`);return{Codec:a,meta:o}}),i=[],n,r=[];for await(let{Codec:o,meta:a}of e){let l=o.fromConfig(a.configuration,t);switch(l.kind){case"array_to_array":i.push(l);break;case"array_to_bytes":n=l;break;default:r.push(l)}}if(!n){if(!ig(t))throw new Error(`Cannot encode ${t.data_type} to bytes without a codec`);n=ya.fromConfig({endian:"little"},t)}return{array_to_array:i,array_to_bytes:n,bytes_to_bytes:r}}function ig(t){return t.data_type!=="v2:object"}const F2=18446744073709551615n;function ng(t,e,i,n){if(t.store.getRange===void 0)throw new Error("Store does not support range requests");let r=t.store.getRange.bind(t.store),o=e.map((h,g)=>h/n.chunk_shape[g]),a=jl({data_type:"uint64",shape:[...o,2],codecs:n.index_codecs}),l={};return async h=>{let g=h.map((Z,ee)=>Math.floor(Z/o[ee])),_=t.resolve(i(g)).path,x;if(_ in l)x=l[_];else{let Z=4,ee=16*o.reduce((pe,p)=>pe*p,1),he=await r(_,{suffixLength:ee+Z});x=l[_]=he?await a.decode(he):null}if(x===null)return;let{data:T,shape:M,stride:D}=x,F=h.map((Z,ee)=>Z%M[ee]).reduce((Z,ee,he)=>Z+ee*D[he],0),Q=T[F],K=T[F+1];if(!(Q===F2&&K===F2))return r(_,{offset:Number(Q),length:Number(K)})}}class fs{constructor(e,i="/"){Vt(this,"store");Vt(this,"path");this.store=e,this.path=i}resolve(e){let i=new URL(`file://${this.path.endsWith("/")?this.path:`${this.path}/`}`);return new fs(this.store,new URL(e,i).pathname)}}function rg(t){return new fs(t??new Map)}var wo;class S1 extends fs{constructor(i,n,r){super(i,n);Vt(this,"kind","group");Fi(this,wo);wi(this,wo,r)}get attrs(){return Rt(this,wo).attributes}}wo=new WeakMap;const Ks=Symbol("zarrita.context");function sg(t){return t[Ks]}function og(t,e){let{configuration:i}=e.codecs.find(q5)??{},n={encode_chunk_key:W5(e.chunk_key_encoding),TypedArray:vh(e.data_type),fill_value:e.fill_value};if(i){let o=Bl(i.codecs);return{...n,kind:"sharded",chunk_shape:i.chunk_shape,codec:jl({data_type:e.data_type,shape:i.chunk_shape,codecs:i.codecs}),get_strides(a,l){return hs(a,l??o)},get_chunk_bytes:ng(t,e.chunk_grid.configuration.chunk_shape,n.encode_chunk_key,i)}}let r=Bl(e.codecs);return{...n,kind:"regular",chunk_shape:e.chunk_grid.configuration.chunk_shape,codec:jl({data_type:e.data_type,shape:e.chunk_grid.configuration.chunk_shape,codecs:e.codecs}),get_strides(o,a){return hs(o,a??r)},async get_chunk_bytes(o,a){let l=n.encode_chunk_key(o),h=t.resolve(l).path;return t.store.get(h,a)}}}var uc,dc,as,fc;let wa=(fc=class extends(dc=fs,uc=Ks,dc){constructor(i,n,r){super(i,n);Vt(this,"kind","array");Fi(this,as);Vt(this,uc);wi(this,as,{...r,fill_value:bh(r)}),this[Ks]=og(this,r)}get attrs(){return Rt(this,as).attributes}get shape(){return Rt(this,as).shape}get chunks(){return this[Ks].chunk_shape}get dtype(){return Rt(this,as).data_type}async getChunk(i,n){let r=this[Ks],o=await r.get_chunk_bytes(i,n);if(!o){let a=r.chunk_shape.reduce((h,g)=>h*g,1),l=new r.TypedArray(a);return l.fill(r.fill_value),{data:l,shape:r.chunk_shape,stride:r.get_strides(r.chunk_shape)}}return r.codec.decode(o)}is(i){return Y5(this.dtype,i)}},as=new WeakMap,fc),$a=ag();function ag(){let t=new WeakMap;function e(i){let n=t.get(i)??{v2:0,v3:0};return t.set(i,n),n}return{increment(i,n){e(i)[n]+=1},version_max(i){let n=e(i);return n.v3>n.v2?"v3":"v2"}}}async function lg(t){let e=await t.store.get(t.resolve(".zattrs").path);return e?No(e):{}}async function cg(t,e={}){let i="store"in t?t:new fs(t),n={};return(e.attrs??!0)&&(n=await lg(i)),e.kind==="array"?D2(i,n):e.kind==="group"?L2(i,n):D2(i,n).catch(r=>{if(r instanceof Mo)return L2(i,n);throw r})}async function D2(t,e){let{path:i}=t.resolve(".zarray"),n=await t.store.get(i);if(!n)throw new Mo("v2 array",{cause:new b1(i)});return $a.increment(t.store,"v2"),new wa(t.store,t.path,U5(No(n),e))}async function L2(t,e){let{path:i}=t.resolve(".zgroup"),n=await t.store.get(i);if(!n)throw new Mo("v2 group",{cause:new b1(i)});return $a.increment(t.store,"v2"),new S1(t.store,t.path,V5(No(n),e))}async function hg(t){let{store:e,path:i}=t.resolve("zarr.json"),n=await t.store.get(i);if(!n)throw new Mo("v3 array or group",{cause:new b1(i)});let r=No(n);return r.node_type==="array"&&(r.fill_value=bh(r)),r.node_type==="array"?new wa(e,t.path,r):new S1(e,t.path,r)}async function ug(t,e={}){let i="store"in t?t:new fs(t),n=await hg(i);if($a.increment(i.store,"v3"),e.kind===void 0||e.kind==="array"&&n instanceof wa||e.kind==="group"&&n instanceof S1)return n;let r=n instanceof wa?"array":"group";throw new Error(`Expected node of kind ${e.kind}, found ${r}.`)}async function er(t,e={}){let i="store"in t?t.store:t,n=$a.version_max(i),r=n==="v2"?er.v2:er.v3,o=n==="v2"?er.v3:er.v2;return r(t,e).catch(a=>{if(a instanceof Mo)return o(t,e);throw a})}er.v2=cg;er.v3=ug;function*dg(t,e,i=1){e===void 0&&(e=t,t=0);for(let n=t;n<e;n+=i)yield n}function*fg(...t){if(t.length===0)return;const e=t.map(n=>n[Symbol.iterator]()),i=e.map(n=>n.next());if(i.some(n=>n.done))throw new Error("Input contains an empty iterator.");for(let n=0;;){if(i[n].done){if(e[n]=t[n][Symbol.iterator](),i[n]=e[n].next(),++n>=e.length)return}else yield i.map(({value:r})=>r),n=0;i[n]=e[n].next()}}function pg({start:t,stop:e,step:i},n){if(i===0)throw new Error("slice step cannot be zero");i=i??1;const r=i<0,[o,a]=r?[-1,n-1]:[0,n];return t===null?t=r?a:o:t<0?(t+=n,t<o&&(t=o)):t>a&&(t=a),e===null?e=r?o:a:e<0?(e+=n,e<o&&(e=o)):e>a&&(e=a),[t,e,i]}function Ds(t,e,i=null){return e===void 0&&(e=t,t=null),{start:t,stop:e,step:i}}function gg(){const t=[];return{add:e=>t.push(e()),onIdle:()=>Promise.all(t)}}class T1 extends Error{constructor(e){super(e),this.name="IndexError"}}function mg(t,e){throw new T1(`too many indicies for array; expected ${e.length}, got ${t.length}`)}function _g(t){throw new T1(`index out of bounds for dimension with length ${t}`)}function vg(){throw new T1("only slices with step >= 1 are supported")}function bg(t,e){t.length>e.length&&mg(t,e)}function yg(t,e){return t=Math.trunc(t),t<0&&(t=e+t),(t>=e||t<0)&&_g(e),t}class wg{constructor({dim_sel:e,dim_len:i,dim_chunk_len:n}){Vt(this,"dim_sel");Vt(this,"dim_len");Vt(this,"dim_chunk_len");Vt(this,"nitems");e=yg(e,i),this.dim_sel=e,this.dim_len=i,this.dim_chunk_len=n,this.nitems=1}*[Symbol.iterator](){const e=Math.floor(this.dim_sel/this.dim_chunk_len),i=e*this.dim_chunk_len,n=this.dim_sel-i;yield{dim_chunk_ix:e,dim_chunk_sel:n}}}class P2{constructor({dim_sel:e,dim_len:i,dim_chunk_len:n}){Vt(this,"start");Vt(this,"stop");Vt(this,"step");Vt(this,"dim_len");Vt(this,"dim_chunk_len");Vt(this,"nitems");Vt(this,"nchunks");const[r,o,a]=pg(e,i);this.start=r,this.stop=o,this.step=a,this.step<1&&vg(),this.dim_len=i,this.dim_chunk_len=n,this.nitems=Math.max(0,Math.ceil((this.stop-this.start)/this.step)),this.nchunks=Math.ceil(this.dim_len/this.dim_chunk_len)}*[Symbol.iterator](){const e=Math.floor(this.start/this.dim_chunk_len),i=Math.ceil(this.stop/this.dim_chunk_len);for(const n of dg(e,i)){const r=n*this.dim_chunk_len,o=Math.min(this.dim_len,(n+1)*this.dim_chunk_len),a=o-r;let l=0,h=0;if(this.start<r){const M=(r-this.start)%this.step;M&&(h+=this.step-M),l=Math.ceil((r-this.start)/this.step)}else h=this.start-r;const g=this.stop>o?a:this.stop-r,_=[h,g,this.step],x=Math.ceil((g-h)/this.step),T=[l,l+x,1];yield{dim_chunk_ix:n,dim_chunk_sel:_,dim_out_sel:T}}}}function xg(t,e){let i=[];return t===null?i=e.map(n=>Ds(null)):Array.isArray(t)&&(i=t.map(n=>n??Ds(null))),bg(i,e),i}class Eg{constructor({selection:e,shape:i,chunk_shape:n}){Vt(this,"dim_indexers");Vt(this,"shape");this.dim_indexers=xg(e,i).map((r,o)=>new(typeof r=="number"?wg:P2)({dim_sel:r,dim_len:i[o],dim_chunk_len:n[o]})),this.shape=this.dim_indexers.filter(r=>r instanceof P2).map(r=>r.nitems)}*[Symbol.iterator](){for(const e of fg(...this.dim_indexers)){const i=e.map(r=>r.dim_chunk_ix),n=e.map(r=>"dim_out_sel"in r?{from:r.dim_chunk_sel,to:r.dim_out_sel}:{from:r.dim_chunk_sel,to:null});yield{chunk_coords:i,mapping:n}}}}function Sg(t,e){return"get"in t?t.get(e):t[e]}async function Tg(t,e,i,n){var h;let r=sg(t),o=new Eg({selection:e,shape:t.shape,chunk_shape:t.chunks}),a=n.prepare(new r.TypedArray(o.shape.reduce((g,_)=>g*_,1)),o.shape,r.get_strides(o.shape,i.order)),l=((h=i.create_queue)==null?void 0:h.call(i))??gg();for(const{chunk_coords:g,mapping:_}of o)l.add(async()=>{let{data:x,shape:T,stride:M}=await t.getChunk(g,i.opts),D=n.prepare(x,T,M);n.set_from_chunk(a,D,_)});return await l.onIdle(),o.shape.length===0?Sg(a.data,0):a}function k1(t,e=0,i){let n=i??t.length-e;return{length:n,subarray(r,o=n){return k1(t,e+r,o-r)},set(r,o=0){for(let a=0;a<r.length;a++)t[e+o+a]=r.get(a)},get(r){return t[e+r]}}}function ml(t){return globalThis.Array.isArray(t.data)?{data:k1(t.data),stride:t.stride,bytes_per_element:1}:{data:new Uint8Array(t.data.buffer,t.data.byteOffset,t.data.byteLength),stride:t.stride,bytes_per_element:t.data.BYTES_PER_ELEMENT}}function kg(t){return"chars"in t?t.constructor.bind(null,t.chars):t.constructor}function Cg(t,e){if(globalThis.Array.isArray(t.data))return k1([e]);let i=kg(t.data),n=new i([e]);return new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}const Ag={prepare(t,e,i){return{data:t,shape:e,stride:i}},set_scalar(t,e,i){let n=ml(t);Ul(n,e,Cg(t,i),n.bytes_per_element)},set_from_chunk(t,e,i){let n=ml(t);aa(n,ml(e),n.bytes_per_element,i)}};async function yh(t,e=null,i={}){return Tg(t,e,i,Ag)}function wh(t,e,i){return i<0&&e<t?Math.floor((t-e-1)/-i)+1:t<e?Math.floor((e-t-1)/i)+1:0}function Ul(t,e,i,n){if(e.length===0){t.data.set(i,0);return}const[r,...o]=e,[a,...l]=t.stride;if(typeof r=="number"){const T=t.data.subarray(a*r*n);Ul({data:T,stride:l},o,i,n);return}const[h,g,_]=r,x=wh(h,g,_);if(o.length===0){for(let T=0;T<x;T++)t.data.set(i,a*(h+_*T)*n);return}for(let T=0;T<x;T++){const M=t.data.subarray(a*(h+_*T)*n);Ul({data:M,stride:l},o,i,n)}}function aa(t,e,i,n){const[r,...o]=n,[a,...l]=t.stride,[h,...g]=e.stride;if(r.from===null){if(o.length===0){t.data.set(e.data.subarray(0,i),r.to*i);return}aa({data:t.data.subarray(a*r.to*i),stride:l},e,i,o);return}if(r.to===null){if(o.length===0){let K=r.from*i;t.data.set(e.data.subarray(K,K+i),0);return}aa(t,{data:e.data.subarray(h*r.from*i),stride:g},i,o);return}const[_,x,T]=r.to,[M,D,F]=r.from,Q=wh(_,x,T);if(o.length===0){if(T===1&&F===1&&a===1&&h===1){let K=M*i,Z=Q*i;t.data.set(e.data.subarray(K,K+Z),_*i);return}for(let K=0;K<Q;K++){let Z=h*(M+F*K)*i;t.data.set(e.data.subarray(Z,Z+i),a*(_+T*K)*i)}return}for(let K=0;K<Q;K++)aa({data:t.data.subarray(a*(_+K*T)*i),stride:l},{data:e.data.subarray(h*(M+K*F)*i),stride:g},i,o)}function xh(t,e,i,n={}){return e!==void 0&&i!==void 0&&(n={...n,headers:{...n.headers,Range:`bytes=${e}-${e+i-1}`}}),fetch(t,n)}function Ig(t,e){return{...t,...e,headers:{...t.headers,...e.headers}}}function $2(t,e){const i=typeof t=="string"?new URL(t):t;i.pathname.endsWith("/")||(i.pathname+="/");const n=new URL(e.slice(1),i);return n.search=i.search,n}async function B2(t){if(t.status!==404){if(t.status===200||t.status===206)return new Uint8Array(await t.arrayBuffer());throw new Error(`Unexpected response status ${t.status} ${t.statusText}`)}}async function Og(t,e,i,n){if(n)return fetch(t,{...i,headers:{...i.headers,Range:`bytes=-${e}`}});let r=await fetch(t,{...i,method:"HEAD"});if(!r.ok)return r;let o=r.headers.get("Content-Length"),a=Number(o);return xh(t,a-e,a,i)}var xo,Eo,So,Vl;class Eh{constructor(e,i={}){Fi(this,So);Vt(this,"url");Fi(this,xo);Fi(this,Eo);this.url=e,wi(this,xo,i.overrides??{}),wi(this,Eo,i.useSuffixRequest??!1)}async get(e,i={}){let n=$2(this.url,e).href,r=await fetch(n,el(this,So,Vl).call(this,i));return B2(r)}async getRange(e,i,n={}){let r=$2(this.url,e),o=el(this,So,Vl).call(this,n),a;return"suffixLength"in i?a=await Og(r,i.suffixLength,o,Rt(this,Eo)):a=await xh(r,i.offset,i.length,o),B2(a)}}xo=new WeakMap,Eo=new WeakMap,So=new WeakSet,Vl=function(e){return Ig(Rt(this,xo),e)};function Mg(){return Yl.map(t=>({name:t.name,png:Rg(t.rgb)}))}function Ng(t){let e=Yl.find(i=>i.name===t);return(e==null?void 0:e.rgb)||Yl[0].rgb}function Rg(t){let e=1,i=256,n=new Uint8ClampedArray(4*e*i).fill(255),r=0;for(let l=0;l<e;l++)for(let h=0;h<i;h++){let g=t[h];for(let _=0;_<3;_++)n[r*4+_]=g[_];r+=1}const o=document.createElement("canvas");o.width=i,o.height=e;const a=o.getContext("2d");return a?(a.putImageData(new ImageData(n,i,e),0,0),o.toDataURL("image/png")):""}const Yl=[{path:"/luts/ncsa_paledit/",name:"16_colors.lut",rgb:[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[1,1,171],[1,1,171],[1,1,171],[1,1,171],[1,1,171],[1,1,171],[1,1,171],[1,1,171],[1,1,171],[1,1,171],[1,1,171],[1,1,171],[1,1,171],[1,1,171],[1,1,171],[1,1,171],[1,1,224],[1,1,224],[1,1,224],[1,1,224],[1,1,224],[1,1,224],[1,1,224],[1,1,224],[1,1,224],[1,1,224],[1,1,224],[1,1,224],[1,1,224],[1,1,224],[1,1,224],[1,1,224],[0,110,255],[0,110,255],[0,110,255],[0,110,255],[0,110,255],[0,110,255],[0,110,255],[0,110,255],[0,110,255],[0,110,255],[0,110,255],[0,110,255],[0,110,255],[0,110,255],[0,110,255],[0,110,255],[1,171,254],[1,171,254],[1,171,254],[1,171,254],[1,171,254],[1,171,254],[1,171,254],[1,171,254],[1,171,254],[1,171,254],[1,171,254],[1,171,254],[1,171,254],[1,171,254],[1,171,254],[1,171,254],[1,224,254],[1,224,254],[1,224,254],[1,224,254],[1,224,254],[1,224,254],[1,224,254],[1,224,254],[1,224,254],[1,224,254],[1,224,254],[1,224,254],[1,224,254],[1,224,254],[1,224,254],[1,224,254],[1,254,1],[1,254,1],[1,254,1],[1,254,1],[1,254,1],[1,254,1],[1,254,1],[1,254,1],[1,254,1],[1,254,1],[1,254,1],[1,254,1],[1,254,1],[1,254,1],[1,254,1],[1,254,1],[190,255,0],[190,255,0],[190,255,0],[190,255,0],[190,255,0],[190,255,0],[190,255,0],[190,255,0],[190,255,0],[190,255,0],[190,255,0],[190,255,0],[190,255,0],[190,255,0],[190,255,0],[190,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,224,0],[255,224,0],[255,224,0],[255,224,0],[255,224,0],[255,224,0],[255,224,0],[255,224,0],[255,224,0],[255,224,0],[255,224,0],[255,224,0],[255,224,0],[255,224,0],[255,224,0],[255,224,0],[255,141,0],[255,141,0],[255,141,0],[255,141,0],[255,141,0],[255,141,0],[255,141,0],[255,141,0],[255,141,0],[255,141,0],[255,141,0],[255,141,0],[255,141,0],[255,141,0],[255,141,0],[255,141,0],[250,94,0],[250,94,0],[250,94,0],[250,94,0],[250,94,0],[250,94,0],[250,94,0],[250,94,0],[250,94,0],[250,94,0],[250,94,0],[250,94,0],[250,94,0],[250,94,0],[250,94,0],[250,94,0],[245,0,0],[245,0,0],[245,0,0],[245,0,0],[245,0,0],[245,0,0],[245,0,0],[245,0,0],[245,0,0],[245,0,0],[245,0,0],[245,0,0],[245,0,0],[245,0,0],[245,0,0],[245,0,0],[245,0,135],[245,0,141],[245,0,147],[245,0,153],[245,0,160],[245,0,166],[245,0,172],[245,0,178],[245,0,185],[245,0,191],[245,0,197],[245,0,203],[245,0,210],[245,0,216],[245,0,222],[245,0,228],[222,180,222],[222,180,222],[222,180,222],[222,180,222],[222,180,222],[222,180,222],[222,180,222],[222,180,222],[222,180,222],[222,180,222],[222,180,222],[222,180,222],[222,180,222],[222,180,222],[222,180,222],[222,180,222],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255]]},{path:"/luts/",name:"3-3-2_rgb.lut",rgb:[[0,0,0],[0,0,64],[0,0,128],[0,0,192],[0,32,0],[0,32,64],[0,32,128],[0,32,192],[0,64,0],[0,64,64],[0,64,128],[0,64,192],[0,96,0],[0,96,64],[0,96,128],[0,96,192],[0,128,0],[0,128,64],[0,128,128],[0,128,192],[0,160,0],[0,160,64],[0,160,128],[0,160,192],[0,192,0],[0,192,64],[0,192,128],[0,192,192],[0,224,0],[0,224,64],[0,224,128],[0,224,192],[32,0,0],[32,0,64],[32,0,128],[32,0,192],[32,32,0],[32,32,64],[32,32,128],[32,32,192],[32,64,0],[32,64,64],[32,64,128],[32,64,192],[32,96,0],[32,96,64],[32,96,128],[32,96,192],[32,128,0],[32,128,64],[32,128,128],[32,128,192],[32,160,0],[32,160,64],[32,160,128],[32,160,192],[32,192,0],[32,192,64],[32,192,128],[32,192,192],[32,224,0],[32,224,64],[32,224,128],[32,224,192],[64,0,0],[64,0,64],[64,0,128],[64,0,192],[64,32,0],[64,32,64],[64,32,128],[64,32,192],[64,64,0],[64,64,64],[64,64,128],[64,64,192],[64,96,0],[64,96,64],[64,96,128],[64,96,192],[64,128,0],[64,128,64],[64,128,128],[64,128,192],[64,160,0],[64,160,64],[64,160,128],[64,160,192],[64,192,0],[64,192,64],[64,192,128],[64,192,192],[64,224,0],[64,224,64],[64,224,128],[64,224,192],[96,0,0],[96,0,64],[96,0,128],[96,0,192],[96,32,0],[96,32,64],[96,32,128],[96,32,192],[96,64,0],[96,64,64],[96,64,128],[96,64,192],[96,96,0],[96,96,64],[96,96,128],[96,96,192],[96,128,0],[96,128,64],[96,128,128],[96,128,192],[96,160,0],[96,160,64],[96,160,128],[96,160,192],[96,192,0],[96,192,64],[96,192,128],[96,192,192],[96,224,0],[96,224,64],[96,224,128],[96,224,192],[128,0,0],[128,0,64],[128,0,128],[128,0,192],[128,32,0],[128,32,64],[128,32,128],[128,32,192],[128,64,0],[128,64,64],[128,64,128],[128,64,192],[128,96,0],[128,96,64],[128,96,128],[128,96,192],[128,128,0],[128,128,64],[128,128,128],[128,128,192],[128,160,0],[128,160,64],[128,160,128],[128,160,192],[128,192,0],[128,192,64],[128,192,128],[128,192,192],[128,224,0],[128,224,64],[128,224,128],[128,224,192],[160,0,0],[160,0,64],[160,0,128],[160,0,192],[160,32,0],[160,32,64],[160,32,128],[160,32,192],[160,64,0],[160,64,64],[160,64,128],[160,64,192],[160,96,0],[160,96,64],[160,96,128],[160,96,192],[160,128,0],[160,128,64],[160,128,128],[160,128,192],[160,160,0],[160,160,64],[160,160,128],[160,160,192],[160,192,0],[160,192,64],[160,192,128],[160,192,192],[160,224,0],[160,224,64],[160,224,128],[160,224,192],[192,0,0],[192,0,64],[192,0,128],[192,0,192],[192,32,0],[192,32,64],[192,32,128],[192,32,192],[192,64,0],[192,64,64],[192,64,128],[192,64,192],[192,96,0],[192,96,64],[192,96,128],[192,96,192],[192,128,0],[192,128,64],[192,128,128],[192,128,192],[192,160,0],[192,160,64],[192,160,128],[192,160,192],[192,192,0],[192,192,64],[192,192,128],[192,192,192],[192,224,0],[192,224,64],[192,224,128],[192,224,192],[224,0,0],[224,0,64],[224,0,128],[224,0,192],[224,32,0],[224,32,64],[224,32,128],[224,32,192],[224,64,0],[224,64,64],[224,64,128],[224,64,192],[224,96,0],[224,96,64],[224,96,128],[224,96,192],[224,128,0],[224,128,64],[224,128,128],[224,128,192],[224,160,0],[224,160,64],[224,160,128],[224,160,192],[224,192,0],[224,192,64],[224,192,128],[224,192,192],[224,224,0],[224,224,64],[224,224,128],[224,224,192]]},{path:"/luts/ncsa_paledit/",name:"5_ramps.lut",rgb:[[0,0,1],[0,0,5],[0,0,10],[0,0,15],[0,0,20],[0,0,25],[0,0,30],[0,0,35],[0,0,40],[0,0,45],[0,0,50],[0,0,55],[0,0,60],[0,0,65],[0,0,70],[0,0,75],[0,0,80],[0,0,85],[0,0,90],[0,0,95],[0,0,100],[0,0,105],[0,0,110],[0,0,115],[0,0,120],[0,0,125],[0,0,130],[0,0,135],[0,0,140],[0,0,145],[0,0,150],[0,0,155],[0,0,160],[0,0,165],[0,0,170],[0,0,175],[0,0,180],[0,0,185],[0,0,190],[0,0,195],[0,0,200],[0,0,205],[0,0,210],[0,0,215],[0,0,220],[0,0,225],[0,0,230],[0,0,235],[0,0,240],[0,0,245],[0,0,250],[0,1,0],[0,5,0],[0,10,0],[0,15,0],[0,20,0],[0,25,0],[0,30,0],[0,35,0],[0,40,0],[0,45,0],[0,50,0],[0,55,0],[0,60,0],[0,65,0],[0,70,0],[0,75,0],[0,80,0],[0,85,0],[0,90,0],[0,95,0],[0,100,0],[0,105,0],[0,110,0],[0,115,0],[0,120,0],[0,125,0],[0,130,0],[0,135,0],[0,140,0],[0,145,0],[0,150,0],[0,155,0],[0,160,0],[0,165,0],[0,170,0],[0,175,0],[0,180,0],[0,185,0],[0,190,0],[0,195,0],[0,200,0],[0,205,0],[0,210,0],[0,215,0],[0,220,0],[0,225,0],[0,230,0],[0,235,0],[0,240,0],[0,245,0],[0,250,0],[1,1,0],[5,5,0],[10,10,0],[15,15,0],[20,20,0],[25,25,0],[30,30,0],[35,35,0],[40,40,0],[45,45,0],[50,50,0],[55,55,0],[60,60,0],[65,65,0],[70,70,0],[75,75,0],[80,80,0],[85,85,0],[90,90,0],[95,95,0],[100,100,0],[105,105,0],[110,110,0],[115,115,0],[120,120,0],[125,125,0],[130,130,0],[135,135,0],[140,140,0],[145,145,0],[150,150,0],[155,155,0],[160,160,0],[165,165,0],[170,170,0],[175,175,0],[180,180,0],[185,185,0],[190,190,0],[195,195,0],[200,200,0],[205,205,0],[210,210,0],[215,215,0],[220,220,0],[225,225,0],[230,230,0],[235,235,0],[240,240,0],[245,245,0],[250,250,0],[1,0,0],[5,0,0],[10,0,0],[15,0,0],[20,0,0],[25,0,0],[30,0,0],[35,0,0],[40,0,0],[45,0,0],[50,0,0],[55,0,0],[60,0,0],[65,0,0],[70,0,0],[75,0,0],[80,0,0],[85,0,0],[90,0,0],[95,0,0],[100,0,0],[105,0,0],[110,0,0],[115,0,0],[120,0,0],[125,0,0],[130,0,0],[135,0,0],[140,0,0],[145,0,0],[150,0,0],[155,0,0],[160,0,0],[165,0,0],[170,0,0],[175,0,0],[180,0,0],[185,0,0],[190,0,0],[195,0,0],[200,0,0],[205,0,0],[210,0,0],[215,0,0],[220,0,0],[225,0,0],[230,0,0],[235,0,0],[240,0,0],[245,0,0],[250,0,0],[1,1,1],[5,5,5],[10,10,10],[15,15,15],[20,20,20],[25,25,25],[30,30,30],[35,35,35],[40,40,40],[45,45,45],[50,50,50],[55,55,55],[60,60,60],[65,65,65],[70,70,70],[75,75,75],[80,80,80],[85,85,85],[90,90,90],[95,95,95],[100,100,100],[105,105,105],[110,110,110],[115,115,115],[120,120,120],[125,125,125],[130,130,130],[135,135,135],[140,140,140],[145,145,145],[150,150,150],[155,155,155],[160,160,160],[165,165,165],[170,170,170],[175,175,175],[180,180,180],[185,185,185],[190,190,190],[195,195,195],[200,200,200],[205,205,205],[210,210,210],[215,215,215],[220,220,220],[225,225,225],[230,230,230],[235,235,235],[240,240,240],[245,245,245],[250,250,250],[255,255,255]]},{path:"/luts/ncsa_paledit/",name:"6_shades.lut",rgb:[[0,0,0],[3,0,0],[7,0,0],[11,0,0],[15,0,0],[19,0,0],[23,0,0],[27,0,0],[31,0,0],[35,0,0],[39,0,0],[43,0,0],[47,0,0],[51,0,0],[55,0,0],[59,0,0],[63,0,0],[67,0,0],[71,0,0],[75,0,0],[79,0,0],[83,0,0],[87,0,0],[91,0,0],[95,0,0],[99,0,0],[103,0,0],[107,0,0],[111,0,0],[115,0,0],[119,0,0],[123,0,0],[127,0,0],[131,0,0],[135,0,0],[139,0,0],[143,0,0],[147,0,0],[151,0,0],[155,0,0],[159,0,0],[163,0,0],[167,0,0],[171,0,0],[175,0,0],[179,0,0],[183,0,0],[187,0,0],[191,0,0],[195,0,0],[199,0,0],[203,0,0],[207,0,0],[211,0,0],[215,0,0],[219,0,0],[223,0,0],[227,0,0],[231,0,0],[235,0,0],[239,0,0],[243,0,0],[247,0,0],[251,0,0],[255,0,0],[247,7,0],[239,15,0],[231,23,0],[223,31,0],[215,39,0],[207,47,0],[199,55,0],[191,63,0],[183,71,0],[175,79,0],[167,87,0],[159,95,0],[151,103,0],[143,111,0],[135,119,0],[127,127,0],[119,135,0],[111,143,0],[103,151,0],[95,159,0],[87,167,0],[79,175,0],[71,183,0],[63,191,0],[55,199,0],[47,207,0],[39,215,0],[31,223,0],[23,231,0],[15,239,0],[7,247,0],[0,255,0],[0,247,7],[0,239,15],[0,231,23],[0,223,31],[0,215,39],[0,207,47],[0,199,55],[0,191,63],[0,183,71],[0,175,79],[0,167,87],[0,159,95],[0,151,103],[0,143,111],[0,135,119],[0,127,127],[0,119,135],[0,111,143],[0,103,151],[0,95,159],[0,87,167],[0,79,175],[0,71,183],[0,63,191],[0,55,199],[0,47,207],[0,39,215],[0,31,223],[0,23,231],[0,15,239],[0,7,247],[0,0,255],[0,7,255],[0,15,255],[0,23,255],[0,31,255],[0,39,255],[0,47,255],[0,55,255],[0,63,255],[0,71,255],[0,79,255],[0,87,255],[0,95,255],[0,103,255],[0,111,255],[0,119,255],[0,127,255],[0,135,255],[0,143,255],[0,151,255],[0,159,255],[0,167,255],[0,175,255],[0,183,255],[0,191,255],[0,199,255],[0,207,255],[0,215,255],[0,223,255],[0,231,255],[0,239,255],[0,247,255],[0,255,255],[7,247,255],[15,239,255],[23,231,255],[31,223,255],[39,215,255],[47,207,255],[55,199,255],[63,191,255],[71,183,255],[79,175,255],[87,167,255],[95,159,255],[103,151,255],[111,143,255],[119,135,255],[127,127,255],[135,119,255],[143,111,255],[151,103,255],[159,95,255],[167,87,255],[175,79,255],[183,71,255],[191,63,255],[199,55,255],[207,47,255],[215,39,255],[223,31,255],[231,23,255],[239,15,255],[247,7,255],[255,0,255],[255,7,247],[255,15,239],[255,23,231],[255,31,223],[255,39,215],[255,47,207],[255,55,199],[255,63,191],[255,71,183],[255,79,175],[255,87,167],[255,95,159],[255,103,151],[255,111,143],[255,119,135],[255,127,127],[255,135,119],[255,143,111],[255,151,103],[255,159,95],[255,167,87],[255,175,79],[255,183,71],[255,191,63],[255,199,55],[255,207,47],[255,215,39],[255,223,31],[255,231,23],[255,239,15],[255,247,7],[255,255,0],[255,255,7],[255,255,15],[255,255,23],[255,255,31],[255,255,39],[255,255,47],[255,255,55],[255,255,63],[255,255,71],[255,255,79],[255,255,87],[255,255,95],[255,255,103],[255,255,111],[255,255,119],[255,255,127],[255,255,135],[255,255,143],[255,255,151],[255,255,159],[255,255,167],[255,255,175],[255,255,183],[255,255,191],[255,255,199],[255,255,207],[255,255,215],[255,255,223],[255,255,231],[255,255,239],[255,255,247]]},{path:"/luts/ncsa_paledit/",name:"blue_orange_icb.lut",rgb:[[1,2,1],[1,2,1],[1,3,1],[1,4,1],[1,5,1],[1,6,1],[1,7,1],[1,8,1],[1,9,1],[1,10,1],[1,11,1],[1,12,1],[1,13,1],[1,14,1],[1,15,1],[1,16,1],[1,17,1],[1,18,1],[1,19,1],[1,20,1],[1,21,1],[1,22,1],[1,23,1],[1,24,1],[1,25,1],[1,26,1],[1,27,1],[1,28,1],[1,29,1],[1,30,1],[1,31,1],[1,32,1],[1,33,1],[1,34,1],[1,35,1],[1,36,1],[1,37,1],[1,38,1],[1,39,1],[1,40,1],[1,41,1],[1,42,1],[1,43,1],[1,44,1],[1,45,1],[1,46,1],[1,47,1],[1,48,1],[1,49,1],[1,50,1],[1,51,1],[1,52,1],[1,53,1],[1,54,1],[1,55,1],[1,56,1],[1,57,1],[1,58,1],[1,59,1],[1,60,1],[1,61,1],[1,62,1],[1,63,1],[1,64,1],[2,64,2],[4,63,4],[6,62,6],[8,61,8],[10,60,10],[12,59,12],[14,58,14],[16,57,16],[18,56,18],[20,55,20],[22,54,22],[24,53,24],[26,52,26],[28,51,28],[30,50,30],[32,49,32],[34,48,34],[36,47,36],[38,46,38],[40,45,40],[42,44,42],[44,43,44],[46,42,46],[48,41,48],[50,40,50],[52,39,52],[54,38,54],[56,37,56],[58,36,58],[60,35,60],[62,34,62],[64,33,64],[65,32,65],[67,31,67],[69,30,69],[71,29,71],[73,28,73],[75,27,75],[77,26,77],[79,25,79],[81,24,81],[83,23,83],[85,22,85],[87,21,87],[89,20,89],[91,19,91],[93,18,93],[95,17,95],[97,16,97],[99,15,99],[101,14,101],[103,13,103],[105,12,105],[107,11,107],[109,10,109],[111,9,111],[113,8,113],[115,7,115],[117,6,117],[119,5,119],[121,4,121],[123,3,123],[125,2,125],[127,1,127],[129,1,125],[131,3,123],[133,5,121],[135,7,119],[137,9,117],[139,11,115],[141,13,113],[143,15,111],[145,17,109],[147,19,107],[149,21,105],[151,23,103],[153,25,101],[155,27,99],[157,29,97],[159,31,95],[161,33,93],[163,35,91],[165,37,89],[167,39,87],[169,41,85],[171,43,83],[173,45,81],[175,47,79],[177,49,77],[179,51,75],[181,53,73],[183,55,71],[185,57,69],[187,59,67],[189,61,65],[191,63,64],[192,64,62],[194,66,60],[196,68,58],[198,70,56],[200,72,54],[202,74,52],[204,76,50],[206,78,48],[208,80,46],[210,82,44],[212,84,42],[214,86,40],[216,88,38],[218,90,36],[220,92,34],[222,94,32],[224,96,30],[226,98,28],[228,100,26],[230,102,24],[232,104,22],[234,106,20],[236,108,18],[238,110,16],[240,112,14],[242,114,12],[244,116,10],[246,118,8],[248,120,6],[250,122,4],[252,124,2],[254,126,1],[254,128,4],[254,130,8],[254,132,12],[254,134,16],[254,136,20],[254,138,24],[254,140,28],[254,142,32],[254,144,36],[254,146,40],[254,148,44],[254,150,48],[254,152,52],[254,154,56],[254,156,60],[254,158,64],[254,160,67],[254,162,71],[254,164,75],[254,166,79],[254,168,83],[254,170,87],[254,172,91],[254,174,95],[254,176,99],[254,178,103],[254,180,107],[254,182,111],[254,184,115],[254,186,119],[254,188,123],[254,190,127],[254,191,131],[254,193,135],[254,195,139],[254,197,143],[254,199,147],[254,201,151],[254,203,155],[254,205,159],[254,207,163],[254,209,167],[254,211,171],[254,213,175],[254,215,179],[254,217,183],[254,219,187],[254,221,191],[254,223,194],[254,225,198],[254,227,202],[254,229,206],[254,231,210],[254,233,214],[254,235,218],[254,237,222],[254,239,226],[254,241,230],[254,243,234],[254,245,238],[254,247,242],[254,249,246],[254,251,250],[254,251,250]]},{path:"/luts/ncsa_paledit/",name:"brgbcmyw.lut",rgb:[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[248,0,255],[248,0,255],[248,0,255],[248,0,255],[248,0,255],[249,0,255],[249,0,255],[249,0,255],[249,0,255],[249,0,255],[250,0,255],[250,0,255],[250,0,255],[250,0,255],[251,0,255],[251,0,255],[251,0,255],[251,0,255],[251,0,255],[252,0,255],[252,0,255],[252,0,255],[252,0,255],[253,0,255],[253,0,255],[253,0,255],[253,0,255],[253,0,255],[254,0,255],[254,0,255],[254,0,255],[254,0,255],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255]]},{path:"/luts/",name:"cividis.lut",rgb:[[0,32,76],[0,32,78],[0,33,80],[0,34,81],[0,35,83],[0,35,85],[0,36,86],[0,37,88],[0,38,90],[0,38,91],[0,39,93],[0,40,95],[0,40,97],[0,41,99],[0,42,100],[0,42,102],[0,43,104],[0,44,106],[0,45,108],[0,45,109],[0,46,110],[0,46,111],[0,47,111],[0,47,111],[0,48,111],[0,49,111],[0,49,111],[0,50,110],[0,51,110],[0,52,110],[0,52,110],[1,53,110],[6,54,110],[10,55,109],[14,55,109],[18,56,109],[21,57,109],[23,57,109],[26,58,108],[28,59,108],[30,60,108],[32,60,108],[34,61,108],[36,62,108],[38,62,108],[39,63,108],[41,64,107],[43,65,107],[44,65,107],[46,66,107],[47,67,107],[49,68,107],[50,68,107],[51,69,107],[53,70,107],[54,70,107],[55,71,107],[56,72,107],[58,73,107],[59,73,107],[60,74,107],[61,75,107],[62,75,107],[64,76,107],[65,77,107],[66,78,107],[67,78,107],[68,79,107],[69,80,107],[70,80,107],[71,81,107],[72,82,107],[73,83,107],[74,83,107],[75,84,107],[76,85,107],[77,85,107],[78,86,107],[79,87,108],[80,88,108],[81,88,108],[82,89,108],[83,90,108],[84,90,108],[85,91,108],[86,92,108],[87,93,109],[88,93,109],[89,94,109],[90,95,109],[91,95,109],[92,96,109],[93,97,110],[94,98,110],[95,98,110],[95,99,110],[96,100,110],[97,101,111],[98,101,111],[99,102,111],[100,103,111],[101,103,111],[102,104,112],[103,105,112],[104,106,112],[104,106,112],[105,107,113],[106,108,113],[107,109,113],[108,109,114],[109,110,114],[110,111,114],[111,111,114],[111,112,115],[112,113,115],[113,114,115],[114,114,116],[115,115,116],[116,116,117],[117,117,117],[117,117,117],[118,118,118],[119,119,118],[120,120,118],[121,120,119],[122,121,119],[123,122,119],[123,123,120],[124,123,120],[125,124,120],[126,125,120],[127,126,120],[128,126,120],[129,127,120],[130,128,120],[131,129,120],[132,129,120],[133,130,120],[134,131,120],[135,132,120],[136,133,120],[137,133,120],[138,134,120],[139,135,120],[140,136,120],[141,136,120],[142,137,120],[143,138,120],[144,139,120],[145,140,120],[146,140,120],[147,141,120],[148,142,120],[149,143,120],[150,143,119],[151,144,119],[152,145,119],[153,146,119],[154,147,119],[155,147,119],[156,148,119],[157,149,119],[158,150,118],[159,151,118],[160,152,118],[161,152,118],[162,153,118],[163,154,117],[164,155,117],[165,156,117],[166,156,117],[167,157,117],[168,158,116],[169,159,116],[170,160,116],[171,161,116],[172,161,115],[173,162,115],[174,163,115],[175,164,115],[176,165,114],[177,166,114],[178,166,114],[180,167,113],[181,168,113],[182,169,113],[183,170,112],[184,171,112],[185,171,112],[186,172,111],[187,173,111],[188,174,110],[189,175,110],[190,176,110],[191,177,109],[192,177,109],[193,178,108],[194,179,108],[195,180,108],[197,181,107],[198,182,107],[199,183,106],[200,184,106],[201,184,105],[202,185,105],[203,186,104],[204,187,104],[205,188,103],[206,189,103],[208,190,102],[209,191,102],[210,192,101],[211,192,101],[212,193,100],[213,194,99],[214,195,99],[215,196,98],[216,197,97],[217,198,97],[219,199,96],[220,200,96],[221,201,95],[222,202,94],[223,203,93],[224,203,93],[225,204,92],[227,205,91],[228,206,91],[229,207,90],[230,208,89],[231,209,88],[232,210,87],[233,211,86],[235,212,86],[236,213,85],[237,214,84],[238,215,83],[239,216,82],[240,217,81],[241,218,80],[243,219,79],[244,220,78],[245,221,77],[246,222,76],[247,223,75],[249,224,73],[250,224,72],[251,225,71],[252,226,70],[253,227,69],[255,228,67],[255,229,66],[255,230,66],[255,231,67],[255,232,68],[255,233,69]]},{path:"/luts/ncsa_paledit/",name:"cool.lut",rgb:[[1,3,2],[1,3,2],[1,5,4],[1,7,6],[1,9,8],[1,11,10],[1,13,12],[1,15,14],[1,17,16],[1,19,18],[1,21,20],[1,23,22],[1,25,24],[1,27,26],[1,29,28],[1,31,30],[1,33,32],[1,35,34],[1,37,36],[1,39,38],[1,41,40],[1,43,42],[1,45,44],[1,47,46],[1,49,48],[1,51,50],[1,53,52],[1,55,54],[1,57,56],[1,59,58],[1,61,60],[1,63,62],[1,64,64],[1,66,65],[1,68,67],[1,70,69],[1,72,71],[1,74,73],[1,76,75],[1,78,77],[1,80,79],[1,82,81],[1,84,83],[1,86,85],[1,88,87],[1,90,89],[1,92,91],[1,94,93],[1,96,95],[1,98,97],[1,100,99],[1,102,101],[1,104,103],[1,106,105],[1,108,107],[1,110,109],[1,112,111],[1,114,113],[1,116,115],[1,118,117],[1,120,119],[1,122,121],[1,124,123],[1,126,125],[1,128,127],[2,126,129],[4,124,131],[6,122,133],[8,120,135],[10,118,137],[12,116,139],[14,114,141],[16,112,143],[18,110,145],[20,108,147],[22,106,149],[24,104,151],[26,102,153],[28,100,155],[30,98,157],[32,96,159],[34,94,161],[36,92,163],[38,90,165],[40,88,167],[42,86,169],[44,84,171],[46,82,173],[48,80,175],[50,78,177],[52,76,179],[54,74,181],[56,72,183],[58,70,185],[60,68,187],[62,66,189],[64,64,191],[65,63,192],[67,61,194],[69,59,196],[71,57,198],[73,55,200],[75,53,202],[77,51,204],[79,49,206],[81,47,208],[83,45,210],[85,43,212],[87,41,214],[89,39,216],[91,37,218],[93,35,220],[95,33,222],[97,31,224],[99,29,226],[101,27,228],[103,25,230],[105,23,232],[107,21,234],[109,19,236],[111,17,238],[113,15,240],[115,13,242],[117,11,244],[119,9,246],[121,7,248],[123,5,250],[125,3,252],[127,1,254],[129,2,250],[131,4,246],[133,6,242],[135,8,238],[137,10,234],[139,12,230],[141,14,226],[143,16,222],[145,18,218],[147,20,214],[149,22,210],[151,24,206],[153,26,202],[155,28,198],[157,30,194],[159,32,191],[161,34,187],[163,36,183],[165,38,179],[167,40,175],[169,42,171],[171,44,167],[173,46,163],[175,48,159],[177,50,155],[179,52,151],[181,54,147],[183,56,143],[185,58,139],[187,60,135],[189,62,131],[191,64,127],[192,65,123],[194,67,119],[196,69,115],[198,71,111],[200,73,107],[202,75,103],[204,77,99],[206,79,95],[208,81,91],[210,83,87],[212,85,83],[214,87,79],[216,89,75],[218,91,71],[220,93,67],[222,95,64],[224,97,60],[226,99,56],[228,101,52],[230,103,48],[232,105,44],[234,107,40],[236,109,36],[238,111,32],[240,113,28],[242,115,24],[244,117,20],[246,119,16],[248,121,12],[250,123,8],[252,125,4],[254,127,1],[254,129,4],[254,131,8],[254,133,12],[254,135,16],[254,137,20],[254,139,24],[254,141,28],[254,143,32],[254,145,36],[254,147,40],[254,149,44],[254,151,48],[254,153,52],[254,155,56],[254,157,60],[254,159,64],[254,161,67],[254,163,71],[254,165,75],[254,167,79],[254,169,83],[254,171,87],[254,173,91],[254,175,95],[254,177,99],[254,179,103],[254,181,107],[254,183,111],[254,185,115],[254,187,119],[254,189,123],[254,191,127],[254,192,131],[254,194,135],[254,196,139],[254,198,143],[254,200,147],[254,202,151],[254,204,155],[254,206,159],[254,208,163],[254,210,167],[254,212,171],[254,214,175],[254,216,179],[254,218,183],[254,220,187],[254,222,191],[254,224,194],[254,226,198],[254,228,202],[254,230,206],[254,232,210],[254,234,214],[254,236,218],[254,238,222],[254,240,226],[254,242,230],[254,244,234],[254,246,238],[254,248,242],[254,250,246],[254,250,246]]},{path:"/luts/wcif/",name:"cyan_hot.lut",rgb:[[0,0,0],[0,1,2],[0,2,5],[0,4,8],[0,5,11],[0,7,14],[0,8,17],[0,10,20],[0,11,23],[0,12,26],[0,14,29],[0,15,32],[0,17,35],[0,18,38],[0,20,41],[0,21,44],[0,23,47],[0,24,50],[0,25,53],[0,27,56],[0,28,59],[0,30,62],[0,31,65],[0,33,68],[0,34,71],[0,36,74],[0,37,77],[0,38,80],[0,40,83],[0,41,86],[0,43,89],[0,44,92],[0,46,95],[0,47,98],[0,49,101],[0,50,104],[0,51,107],[0,53,110],[0,54,113],[0,56,116],[0,57,119],[0,59,122],[0,60,125],[0,61,128],[0,63,131],[0,64,134],[0,66,137],[0,67,140],[0,69,143],[0,70,146],[0,72,149],[0,73,152],[0,74,155],[0,76,158],[0,77,161],[0,79,164],[0,80,167],[0,82,170],[0,83,173],[0,85,176],[0,86,179],[0,87,182],[0,89,185],[0,90,188],[0,92,191],[0,93,194],[0,95,197],[0,96,200],[0,98,203],[0,99,206],[0,100,209],[0,102,212],[0,103,215],[0,105,218],[0,106,221],[0,108,224],[0,109,227],[0,110,230],[0,112,233],[0,113,236],[0,115,239],[0,116,242],[0,118,245],[0,119,248],[0,123,255],[0,123,255],[0,124,255],[0,126,255],[0,127,255],[0,129,255],[0,130,255],[0,132,255],[0,133,255],[0,135,255],[0,136,255],[0,138,255],[0,140,255],[0,141,255],[0,143,255],[0,144,255],[0,146,255],[0,147,255],[0,149,255],[0,150,255],[0,152,255],[0,153,255],[0,155,255],[0,157,255],[0,158,255],[0,160,255],[0,161,255],[0,163,255],[0,164,255],[0,166,255],[0,167,255],[0,169,255],[0,170,255],[0,172,255],[0,174,255],[0,175,255],[0,177,255],[0,178,255],[0,180,255],[0,181,255],[0,183,255],[0,184,255],[0,186,255],[0,187,255],[0,189,255],[0,191,255],[0,192,255],[0,194,255],[0,195,255],[0,197,255],[0,198,255],[0,200,255],[0,201,255],[0,203,255],[0,204,255],[0,206,255],[0,208,255],[0,209,255],[0,211,255],[0,212,255],[0,214,255],[0,215,255],[0,217,255],[0,218,255],[0,220,255],[0,222,255],[0,223,255],[0,225,255],[0,226,255],[0,228,255],[0,229,255],[0,231,255],[0,232,255],[0,234,255],[0,235,255],[0,237,255],[0,239,255],[0,240,255],[0,242,255],[0,243,255],[0,245,255],[0,246,255],[0,248,255],[0,249,255],[0,251,255],[0,255,255],[0,255,255],[2,255,255],[5,255,255],[8,255,255],[11,255,255],[14,255,255],[17,255,255],[20,255,255],[23,255,255],[26,255,255],[29,255,255],[32,255,255],[35,255,255],[38,255,255],[41,255,255],[44,255,255],[47,255,255],[50,255,255],[53,255,255],[56,255,255],[59,255,255],[62,255,255],[65,255,255],[68,255,255],[71,255,255],[74,255,255],[77,255,255],[80,255,255],[83,255,255],[86,255,255],[89,255,255],[92,255,255],[95,255,255],[98,255,255],[101,255,255],[104,255,255],[107,255,255],[110,255,255],[113,255,255],[116,255,255],[119,255,255],[122,255,255],[125,255,255],[128,255,255],[131,255,255],[134,255,255],[137,255,255],[140,255,255],[143,255,255],[146,255,255],[149,255,255],[152,255,255],[155,255,255],[158,255,255],[161,255,255],[164,255,255],[167,255,255],[170,255,255],[173,255,255],[176,255,255],[179,255,255],[182,255,255],[185,255,255],[188,255,255],[191,255,255],[194,255,255],[197,255,255],[200,255,255],[203,255,255],[206,255,255],[209,255,255],[212,255,255],[215,255,255],[218,255,255],[221,255,255],[224,255,255],[227,255,255],[230,255,255],[233,255,255],[236,255,255],[239,255,255],[242,255,255],[245,255,255],[248,255,255],[251,255,255],[255,255,255]]},{path:"/luts/ncsa_paledit/",name:"edges.lut",rgb:[[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[6,6,6],[11,11,11],[16,16,16],[21,21,21],[26,26,26],[31,31,31],[36,36,36],[41,41,41],[46,46,46],[51,51,51],[61,61,61],[90,90,90],[105,105,1],[120,120,120],[135,135,135],[150,150,150],[165,165,165],[180,180,180],[194,194,194],[204,204,204],[224,224,224],[253,253,253],[224,224,224],[204,204,204],[194,194,194],[180,180,180],[165,165,165],[150,150,150],[135,135,135],[120,120,120],[105,105,105],[80,80,80],[70,70,70],[61,61,61],[51,51,51],[46,46,46],[41,41,41],[36,36,36],[31,31,31],[26,26,26],[21,21,21],[16,16,16],[11,11,11],[6,6,6],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1]]},{path:"/luts/",name:"fire.lut",rgb:[[0,0,0],[0,0,7],[0,0,15],[0,0,22],[0,0,30],[0,0,38],[0,0,45],[0,0,53],[0,0,61],[0,0,65],[0,0,69],[0,0,74],[0,0,78],[0,0,82],[0,0,87],[0,0,91],[1,0,96],[4,0,100],[7,0,104],[10,0,108],[13,0,113],[16,0,117],[19,0,121],[22,0,125],[25,0,130],[28,0,134],[31,0,138],[34,0,143],[37,0,147],[40,0,151],[43,0,156],[46,0,160],[49,0,165],[52,0,168],[55,0,171],[58,0,175],[61,0,178],[64,0,181],[67,0,185],[70,0,188],[73,0,192],[76,0,195],[79,0,199],[82,0,202],[85,0,206],[88,0,209],[91,0,213],[94,0,216],[98,0,220],[101,0,220],[104,0,221],[107,0,222],[110,0,223],[113,0,224],[116,0,225],[119,0,226],[122,0,227],[125,0,224],[128,0,222],[131,0,220],[134,0,218],[137,0,216],[140,0,214],[143,0,212],[146,0,210],[148,0,206],[150,0,202],[152,0,199],[154,0,195],[156,0,191],[158,0,188],[160,0,184],[162,0,181],[163,0,177],[164,0,173],[166,0,169],[167,0,166],[168,0,162],[170,0,158],[171,0,154],[173,0,151],[174,0,147],[175,0,143],[177,0,140],[178,0,136],[179,0,132],[181,0,129],[182,0,125],[184,0,122],[185,0,118],[186,0,114],[188,0,111],[189,0,107],[190,0,103],[192,0,100],[193,0,96],[195,0,93],[196,1,89],[198,3,85],[199,5,82],[201,7,78],[202,8,74],[204,10,71],[205,12,67],[207,14,64],[208,16,60],[209,19,56],[210,21,53],[212,24,49],[213,27,45],[214,29,42],[215,32,38],[217,35,35],[218,37,31],[220,40,27],[221,43,23],[223,46,20],[224,48,16],[226,51,12],[227,54,8],[229,57,5],[230,59,4],[231,62,3],[233,65,3],[234,68,2],[235,70,1],[237,73,1],[238,76,0],[240,79,0],[241,81,0],[243,84,0],[244,87,0],[246,90,0],[247,92,0],[249,95,0],[250,98,0],[252,101,0],[252,103,0],[252,105,0],[253,107,0],[253,109,0],[253,111,0],[254,113,0],[254,115,0],[255,117,0],[255,119,0],[255,121,0],[255,123,0],[255,125,0],[255,127,0],[255,129,0],[255,131,0],[255,133,0],[255,134,0],[255,136,0],[255,138,0],[255,140,0],[255,141,0],[255,143,0],[255,145,0],[255,147,0],[255,148,0],[255,150,0],[255,152,0],[255,154,0],[255,155,0],[255,157,0],[255,159,0],[255,161,0],[255,162,0],[255,164,0],[255,166,0],[255,168,0],[255,169,0],[255,171,0],[255,173,0],[255,175,0],[255,176,0],[255,178,0],[255,180,0],[255,182,0],[255,184,0],[255,186,0],[255,188,0],[255,190,0],[255,191,0],[255,193,0],[255,195,0],[255,197,0],[255,199,0],[255,201,0],[255,203,0],[255,205,0],[255,206,0],[255,208,0],[255,210,0],[255,212,0],[255,213,0],[255,215,0],[255,217,0],[255,219,0],[255,220,0],[255,222,0],[255,224,0],[255,226,0],[255,228,0],[255,230,0],[255,232,0],[255,234,0],[255,235,4],[255,237,8],[255,239,13],[255,241,17],[255,242,21],[255,244,26],[255,246,30],[255,248,35],[255,248,42],[255,249,50],[255,250,58],[255,251,66],[255,252,74],[255,253,82],[255,254,90],[255,255,98],[255,255,105],[255,255,113],[255,255,121],[255,255,129],[255,255,136],[255,255,144],[255,255,152],[255,255,160],[255,255,167],[255,255,175],[255,255,183],[255,255,191],[255,255,199],[255,255,207],[255,255,215],[255,255,223],[255,255,227],[255,255,231],[255,255,235],[255,255,239],[255,255,243],[255,255,247],[255,255,251],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255]]},{path:"/luts/ncsa_paledit/",name:"gem.lut",rgb:[[1,2,2],[1,2,2],[1,2,3],[1,3,4],[1,3,5],[1,4,6],[1,4,7],[1,5,8],[1,5,9],[1,6,10],[1,6,11],[1,7,12],[1,7,13],[1,8,14],[1,8,15],[1,9,16],[1,9,17],[1,10,18],[1,10,19],[1,11,20],[1,11,21],[1,12,22],[1,12,23],[1,13,24],[1,13,25],[1,14,26],[1,14,27],[1,15,28],[1,15,29],[1,16,30],[1,16,31],[1,17,32],[1,17,33],[1,18,34],[1,18,35],[1,19,36],[1,19,37],[1,20,38],[1,20,39],[1,21,40],[1,21,41],[1,22,42],[1,22,43],[1,23,44],[1,23,45],[1,24,46],[1,24,47],[1,25,48],[1,25,49],[1,26,50],[1,26,51],[1,27,52],[1,27,53],[1,28,54],[1,28,55],[1,29,56],[1,29,57],[1,30,58],[1,30,59],[1,31,60],[1,31,61],[1,32,62],[1,32,63],[1,33,64],[1,33,64],[2,32,65],[4,32,66],[6,31,67],[8,31,68],[10,30,69],[12,30,70],[14,29,71],[16,29,72],[18,28,73],[20,28,74],[22,27,75],[24,27,76],[26,26,77],[28,26,78],[30,25,79],[32,25,80],[34,24,81],[36,24,82],[38,23,83],[40,23,84],[42,22,85],[44,22,86],[46,21,87],[48,21,88],[50,20,89],[52,20,90],[54,19,91],[56,19,92],[58,18,93],[60,18,94],[62,17,95],[64,17,96],[65,16,97],[67,16,98],[69,15,99],[71,15,100],[73,14,101],[75,14,102],[77,13,103],[79,13,104],[81,12,105],[83,12,106],[85,11,107],[87,11,108],[89,10,109],[91,10,110],[93,9,111],[95,9,112],[97,8,113],[99,8,114],[101,7,115],[103,7,116],[105,6,117],[107,6,118],[109,5,119],[111,5,120],[113,4,121],[115,4,122],[117,3,123],[119,3,124],[121,2,125],[123,2,126],[125,1,127],[127,3,127],[129,4,125],[131,6,123],[133,7,121],[135,9,119],[137,10,117],[139,12,115],[141,13,113],[143,15,111],[145,16,109],[147,18,107],[149,19,105],[151,21,103],[153,22,101],[155,24,99],[157,25,97],[159,27,95],[161,28,93],[163,30,91],[165,31,89],[167,33,87],[169,34,85],[171,36,83],[173,37,81],[175,39,79],[177,40,77],[179,42,75],[181,43,73],[183,45,71],[185,46,69],[187,48,67],[189,49,65],[191,51,64],[192,52,62],[194,54,60],[196,55,58],[198,57,56],[200,58,54],[202,60,52],[204,61,50],[206,63,48],[208,64,46],[210,65,44],[212,66,42],[214,68,40],[216,69,38],[218,71,36],[220,72,34],[222,74,32],[224,75,30],[226,77,28],[228,78,26],[230,80,24],[232,81,22],[234,83,20],[236,84,18],[238,86,16],[240,87,14],[242,89,12],[244,90,10],[246,92,8],[248,93,6],[250,95,4],[252,95,1],[254,98,4],[254,100,8],[254,103,12],[254,105,16],[254,108,20],[254,110,24],[254,113,28],[254,115,32],[254,118,36],[254,120,40],[254,123,44],[254,125,48],[254,128,52],[254,130,56],[254,133,60],[254,135,64],[254,138,67],[254,140,71],[254,143,75],[254,145,79],[254,148,83],[254,150,87],[254,153,91],[254,155,95],[254,158,99],[254,160,103],[254,163,107],[254,165,111],[254,168,115],[254,170,119],[254,173,123],[254,175,127],[254,178,131],[254,180,135],[254,183,139],[254,185,143],[254,188,147],[254,190,151],[254,192,155],[254,194,159],[254,197,163],[254,199,167],[254,202,171],[254,204,175],[254,207,179],[254,209,183],[254,212,187],[254,214,191],[254,217,194],[254,219,198],[254,222,202],[254,224,206],[254,227,210],[254,229,214],[254,232,218],[254,234,222],[254,237,226],[254,239,230],[254,242,234],[254,244,238],[254,247,242],[254,249,246],[254,252,250],[254,252,250]]},{path:"/luts/",name:"glasbey.lut",rgb:[[255,255,255],[0,0,255],[255,0,0],[0,255,0],[0,0,51],[255,0,182],[0,83,0],[255,211,0],[0,159,255],[154,77,66],[0,255,190],[120,63,193],[31,150,152],[255,172,253],[177,204,113],[241,8,92],[254,143,66],[221,0,255],[32,26,1],[114,0,85],[118,108,149],[2,173,36],[200,255,0],[136,108,0],[255,183,159],[133,133,103],[161,3,0],[20,249,255],[0,71,158],[220,94,147],[147,212,255],[0,76,255],[0,66,80],[57,167,106],[238,112,254],[0,0,100],[171,245,204],[161,146,255],[164,255,115],[255,206,113],[71,0,21],[212,173,197],[251,118,111],[171,188,0],[117,0,215],[166,0,154],[0,115,254],[165,93,174],[98,132,2],[0,121,168],[0,255,131],[86,53,0],[159,0,63],[66,45,66],[255,242,187],[0,93,67],[252,255,124],[159,191,186],[167,84,19],[74,39,108],[0,16,166],[145,78,109],[207,149,0],[195,187,255],[253,68,64],[66,78,32],[106,1,0],[181,131,84],[132,233,147],[96,217,0],[255,111,211],[102,75,63],[254,100,0],[228,3,127],[17,199,174],[210,129,139],[91,118,124],[32,59,106],[180,84,255],[226,8,210],[0,1,20],[93,132,68],[166,250,255],[97,123,201],[98,0,122],[126,190,58],[0,60,183],[255,253,0],[7,197,226],[180,167,57],[148,186,138],[204,187,160],[55,0,49],[0,40,1],[150,122,129],[39,136,38],[206,130,180],[150,164,196],[180,32,128],[110,86,180],[147,0,185],[199,48,61],[115,102,255],[15,187,253],[172,164,100],[182,117,250],[216,220,254],[87,141,113],[216,85,34],[0,196,103],[243,165,105],[216,255,182],[1,24,219],[52,66,54],[255,154,0],[87,95,1],[198,241,79],[255,95,133],[123,172,240],[120,100,49],[162,133,204],[105,255,220],[198,82,100],[121,26,64],[0,238,70],[231,207,69],[217,128,233],[255,211,209],[209,255,141],[36,0,3],[87,163,193],[211,231,201],[203,111,79],[62,24,0],[0,117,223],[112,176,88],[209,24,0],[0,30,107],[105,200,197],[255,203,255],[233,194,137],[191,129,46],[69,42,145],[171,76,194],[14,117,61],[0,30,25],[118,73,127],[255,169,200],[94,55,217],[238,230,138],[159,54,33],[80,0,148],[189,144,128],[0,109,126],[88,223,96],[71,80,103],[1,93,159],[99,48,60],[2,206,148],[139,83,37],[171,0,255],[141,42,135],[85,83,148],[150,255,0],[0,152,123],[255,138,203],[222,69,200],[107,109,230],[30,0,68],[173,76,138],[255,134,161],[0,35,60],[138,205,0],[111,202,157],[225,75,253],[255,176,77],[229,232,57],[114,16,255],[111,82,101],[134,137,48],[99,38,80],[105,38,32],[200,110,0],[209,164,255],[198,210,86],[79,103,77],[174,165,166],[170,45,101],[199,81,175],[255,89,172],[146,102,78],[102,134,184],[111,152,255],[92,255,159],[172,137,178],[210,34,98],[199,207,147],[255,185,30],[250,148,141],[49,34,78],[254,81,97],[254,141,100],[68,54,23],[201,162,84],[199,232,240],[68,152,0],[147,172,58],[22,75,28],[8,84,121],[116,45,0],[104,60,255],[64,41,38],[164,113,215],[207,0,155],[118,1,35],[83,0,88],[0,82,232],[43,92,87],[160,217,146],[176,26,229],[29,3,36],[122,58,159],[214,209,207],[160,100,105],[106,157,160],[153,219,113],[192,56,207],[125,255,89],[149,0,34],[213,162,223],[22,131,204],[166,249,69],[109,105,97],[86,188,78],[255,109,81],[255,3,248],[255,0,73],[202,0,35],[67,109,18],[234,170,173],[191,165,0],[38,44,51],[85,185,2],[121,182,158],[254,236,212],[139,165,89],[141,254,193],[0,60,43],[63,17,40],[255,221,246],[17,26,146],[154,66,84],[149,157,238],[126,130,72],[58,6,101],[189,117,101]]},{path:"/luts/",name:"glasbey_inverted.lut",rgb:[[0,0,0],[0,48,136],[16,136,0],[0,168,152],[88,0,0],[128,0,160],[136,152,0],[184,168,152],[0,8,64],[0,112,152],[0,120,88],[104,176,144],[144,0,32],[120,120,152],[136,144,104],[184,176,216],[0,48,0],[24,48,184],[72,136,0],[0,184,184],[88,32,104],[160,32,152],[144,192,0],[200,216,176],[0,112,48],[0,112,184],[56,168,80],[112,168,216],[160,0,96],[168,112,136],[128,192,96],[192,232,208],[32,32,0],[8,88,144],[56,192,48],[56,168,152],[88,104,0],[104,0,248],[248,136,0],[216,192,144],[0,0,128],[64,136,152],[48,120,72],[128,224,184],[248,0,64],[120,112,200],[248,128,80],[184,200,232],[40,88,0],[24,16,192],[80,248,0],[56,200,192],[96,64,64],[248,16,184],[160,200,32],[200,248,200],[40,80,56],[72,88,192],[80,176,112],[96,248,192],[144,96,88],[240,136,192],[248,192,72],[248,224,224],[0,16,40],[72,48,136],[0,144,40],[8,240,160],[104,40,0],[112,88,160],[152,128,48],[200,184,200],[48,64,88],[0,144,168],[0,160,120],[152,176,192],[144,48,56],[144,144,152],[136,176,128],[184,208,216],[56,64,0],[0,0,248],[88,136,40],[0,248,248],[88,0,136],[192,88,144],[136,232,0],[248,224,144],[0,72,96],[48,104,248],[48,248,96],[144,216,216],[248,0,120],[208,160,168],[168,248,104],[192,224,248],[40,24,48],[48,88,168],[0,248,0],[96,184,168],[104,96,16],[104,80,192],[248,136,32],[216,208,200],[16,24,112],[88,152,144],[88,160,80],[152,216,168],[240,64,0],[112,144,248],[248,144,128],[248,168,248],[0,80,48],[48,0,248],[128,192,56],[48,248,216],[104,64,112],[168,64,248],[248,248,0],[248,216,192],[80,88,88],[64,88,248],[72,216,120],[136,248,216],[232,56,80],[184,96,248],[248,232,88],[216,248,248],[0,32,8],[56,40,168],[24,176,0],[40,216,152],[112,0,56],[128,64,192],[144,144,24],[176,216,144],[32,0,72],[0,136,144],[0,160,80],[144,168,152],[232,0,0],[128,120,176],[160,136,128],[168,160,248],[0,80,0],[0,64,224],[72,168,0],[32,168,216],[120,16,104],[168,64,176],[144,168,72],[192,248,152],[16,80,80],[0,96,248],[0,248,72],[96,200,216],[144,48,96],[176,152,176],[184,208,104],[184,248,232],[56,16,8],[0,72,176],[24,240,40],[96,176,184],[88,120,48],[152,32,248],[248,168,16],[248,184,168],[40,0,112],[72,120,168],[40,120,112],[136,248,168],[248,56,24],[128,152,200],[248,160,96],[232,176,224],[32,120,16],[88,0,184],[72,224,24],[88,168,232],[104,88,56],[248,0,248],[248,176,0],[224,248,184],[80,112,72],[64,120,208],[112,208,120],[104,248,216],[224,104,96],[216,112,216],[248,184,96],[224,248,216],[0,40,40],[56,8,176],[32,184,48],[0,248,176],[128,80,8],[136,72,160],[152,120,64],[184,208,184],[56,48,104],[48,144,176],[32,160,104],[152,200,192],[168,88,56],[160,120,184],[168,168,104],[168,200,248],[40,40,48],[0,40,248],[80,176,56],[40,224,248],[96,32,136],[248,56,152],[136,248,40],[248,248,152],[0,104,112],[0,152,248],[24,248,128],[136,208,248],[248,48,104],[248,160,184],[152,248,128],[216,224,248],[80,8,48],[80,88,152],[32,248,0],[80,208,152],[144,96,0],[112,48,248],[232,120,48],[248,192,208],[16,56,112],[104,152,176],[104,128,120],[168,248,160],[248,96,0],[152,120,248],[240,168,128],[248,208,248],[40,88,32],[80,64,248],[104,248,64],[88,248,248],[128,72,96],[248,80,216],[248,224,32],[248,248,200],[64,104,120],[48,144,248],[88,248,96],[144,248,248],[248,96,128],[184,144,232],[232,224,104],[248,248,232]]},{path:"/luts/",name:"glow.lut",rgb:[[0,138,0],[1,0,0],[1,0,0],[2,0,0],[2,0,0],[3,0,0],[4,0,0],[6,0,0],[8,0,0],[11,0,0],[13,0,0],[15,0,0],[18,0,0],[21,1,1],[23,1,1],[24,1,1],[27,1,1],[30,1,1],[31,1,1],[33,1,1],[36,1,1],[37,1,1],[40,2,1],[42,2,3],[45,2,4],[46,2,4],[49,2,4],[51,2,4],[53,2,4],[56,2,4],[58,3,3],[60,3,3],[62,3,3],[65,3,3],[68,4,4],[70,5,6],[72,5,6],[74,5,6],[78,5,6],[80,6,6],[82,6,6],[84,6,6],[86,7,6],[89,7,6],[91,8,6],[93,9,6],[96,9,6],[98,9,6],[100,9,6],[102,10,6],[104,10,6],[106,11,6],[108,12,6],[110,13,6],[113,14,6],[115,14,6],[117,14,6],[119,14,6],[122,15,6],[125,16,6],[127,16,5],[129,17,5],[132,18,7],[135,19,9],[135,19,10],[137,19,10],[140,20,10],[141,21,10],[142,22,10],[145,23,10],[148,24,10],[149,24,10],[152,25,10],[154,27,10],[156,28,10],[157,28,10],[158,28,10],[160,29,10],[162,31,10],[164,32,10],[166,32,10],[168,33,9],[170,35,9],[171,36,9],[173,36,9],[174,37,9],[176,39,9],[178,40,9],[179,40,9],[180,41,9],[182,42,9],[183,43,9],[185,45,9],[186,46,9],[189,47,9],[192,48,8],[193,50,8],[193,51,8],[194,52,8],[195,54,8],[195,55,8],[196,56,8],[198,57,8],[199,59,8],[201,62,8],[203,63,8],[204,65,8],[204,66,8],[205,68,8],[206,70,8],[207,71,8],[209,73,8],[211,74,7],[211,75,7],[211,77,7],[211,79,7],[213,81,7],[215,83,7],[216,85,7],[216,87,7],[216,89,7],[216,92,7],[218,93,7],[219,96,7],[219,98,7],[219,99,7],[220,100,7],[222,103,6],[223,105,6],[223,107,6],[223,109,6],[223,111,6],[224,113,6],[224,116,6],[226,117,7],[227,119,10],[227,121,12],[227,123,12],[227,125,12],[228,126,12],[229,128,12],[231,130,12],[231,132,13],[231,135,15],[231,137,17],[231,139,18],[231,140,18],[231,142,19],[232,144,20],[233,145,22],[234,147,23],[234,148,23],[234,150,24],[234,152,26],[234,154,27],[234,156,27],[235,158,28],[237,160,30],[238,161,32],[238,162,33],[238,164,34],[238,166,35],[238,168,37],[238,171,39],[238,172,40],[238,172,41],[239,174,43],[240,176,45],[242,177,46],[242,179,48],[242,180,50],[242,182,52],[242,183,54],[242,185,55],[242,187,57],[242,188,58],[242,189,61],[243,191,63],[245,192,65],[246,192,67],[246,192,70],[246,196,72],[246,200,73],[245,201,76],[245,201,79],[245,202,80],[245,203,83],[245,204,86],[245,206,88],[245,208,89],[247,210,92],[248,212,95],[249,213,96],[249,213,99],[249,214,102],[249,215,104],[249,217,107],[249,218,108],[249,220,110],[249,221,113],[249,222,116],[249,223,120],[249,224,121],[249,225,123],[249,226,125],[249,226,127],[249,227,129],[249,228,132],[249,229,135],[250,231,137],[252,232,140],[253,233,143],[253,234,146],[253,235,149],[253,236,150],[253,237,153],[253,238,155],[253,239,158],[253,239,160],[253,239,162],[253,239,165],[253,241,168],[253,242,171],[253,243,173],[253,243,175],[253,243,178],[253,244,180],[253,245,183],[253,247,186],[253,247,188],[253,247,191],[253,247,192],[253,247,195],[253,247,198],[253,248,201],[253,249,203],[253,250,206],[253,251,209],[253,251,210],[253,251,213],[253,252,215],[253,252,218],[253,252,221],[253,252,223],[253,252,225],[253,252,228],[253,252,231],[253,252,233],[253,252,236],[253,252,238],[253,252,241],[253,252,244],[253,252,246],[253,253,250],[253,253,252],[0,0,255]]},{path:"/luts/",name:"grays.lut",rgb:[[0,0,0],[1,1,1],[2,2,2],[3,3,3],[4,4,4],[5,5,5],[6,6,6],[7,7,7],[8,8,8],[9,9,9],[10,10,10],[11,11,11],[12,12,12],[13,13,13],[14,14,14],[15,15,15],[16,16,16],[17,17,17],[18,18,18],[19,19,19],[20,20,20],[21,21,21],[22,22,22],[23,23,23],[24,24,24],[25,25,25],[26,26,26],[27,27,27],[28,28,28],[29,29,29],[30,30,30],[31,31,31],[32,32,32],[33,33,33],[34,34,34],[35,35,35],[36,36,36],[37,37,37],[38,38,38],[39,39,39],[40,40,40],[41,41,41],[42,42,42],[43,43,43],[44,44,44],[45,45,45],[46,46,46],[47,47,47],[48,48,48],[49,49,49],[50,50,50],[51,51,51],[52,52,52],[53,53,53],[54,54,54],[55,55,55],[56,56,56],[57,57,57],[58,58,58],[59,59,59],[60,60,60],[61,61,61],[62,62,62],[63,63,63],[64,64,64],[65,65,65],[66,66,66],[67,67,67],[68,68,68],[69,69,69],[70,70,70],[71,71,71],[72,72,72],[73,73,73],[74,74,74],[75,75,75],[76,76,76],[77,77,77],[78,78,78],[79,79,79],[80,80,80],[81,81,81],[82,82,82],[83,83,83],[84,84,84],[85,85,85],[86,86,86],[87,87,87],[88,88,88],[89,89,89],[90,90,90],[91,91,91],[92,92,92],[93,93,93],[94,94,94],[95,95,95],[96,96,96],[97,97,97],[98,98,98],[99,99,99],[100,100,100],[101,101,101],[102,102,102],[103,103,103],[104,104,104],[105,105,105],[106,106,106],[107,107,107],[108,108,108],[109,109,109],[110,110,110],[111,111,111],[112,112,112],[113,113,113],[114,114,114],[115,115,115],[116,116,116],[117,117,117],[118,118,118],[119,119,119],[120,120,120],[121,121,121],[122,122,122],[123,123,123],[124,124,124],[125,125,125],[126,126,126],[127,127,127],[128,128,128],[129,129,129],[130,130,130],[131,131,131],[132,132,132],[133,133,133],[134,134,134],[135,135,135],[136,136,136],[137,137,137],[138,138,138],[139,139,139],[140,140,140],[141,141,141],[142,142,142],[143,143,143],[144,144,144],[145,145,145],[146,146,146],[147,147,147],[148,148,148],[149,149,149],[150,150,150],[151,151,151],[152,152,152],[153,153,153],[154,154,154],[155,155,155],[156,156,156],[157,157,157],[158,158,158],[159,159,159],[160,160,160],[161,161,161],[162,162,162],[163,163,163],[164,164,164],[165,165,165],[166,166,166],[167,167,167],[168,168,168],[169,169,169],[170,170,170],[171,171,171],[172,172,172],[173,173,173],[174,174,174],[175,175,175],[176,176,176],[177,177,177],[178,178,178],[179,179,179],[180,180,180],[181,181,181],[182,182,182],[183,183,183],[184,184,184],[185,185,185],[186,186,186],[187,187,187],[188,188,188],[189,189,189],[190,190,190],[191,191,191],[192,192,192],[193,193,193],[194,194,194],[195,195,195],[196,196,196],[197,197,197],[198,198,198],[199,199,199],[200,200,200],[201,201,201],[202,202,202],[203,203,203],[204,204,204],[205,205,205],[206,206,206],[207,207,207],[208,208,208],[209,209,209],[210,210,210],[211,211,211],[212,212,212],[213,213,213],[214,214,214],[215,215,215],[216,216,216],[217,217,217],[218,218,218],[219,219,219],[220,220,220],[221,221,221],[222,222,222],[223,223,223],[224,224,224],[225,225,225],[226,226,226],[227,227,227],[228,228,228],[229,229,229],[230,230,230],[231,231,231],[232,232,232],[233,233,233],[234,234,234],[235,235,235],[236,236,236],[237,237,237],[238,238,238],[239,239,239],[240,240,240],[241,241,241],[242,242,242],[243,243,243],[244,244,244],[245,245,245],[246,246,246],[247,247,247],[248,248,248],[249,249,249],[250,250,250],[251,251,251],[252,252,252],[253,253,253],[254,254,254],[255,255,255]]},{path:"/luts/wcif/",name:"green_fire_blue.lut",rgb:[[0,0,0],[0,1,2],[0,2,5],[0,3,7],[0,5,10],[0,6,13],[0,7,15],[0,9,18],[0,10,21],[0,11,23],[0,13,26],[0,14,29],[0,15,31],[0,17,34],[0,18,37],[0,19,39],[0,21,42],[0,22,45],[0,23,47],[0,25,50],[0,26,53],[0,27,55],[0,29,58],[0,30,61],[0,31,63],[0,33,66],[0,34,69],[0,35,71],[0,37,74],[0,38,77],[0,39,79],[0,41,82],[0,42,85],[0,43,87],[0,45,90],[0,46,92],[0,47,95],[0,49,98],[0,50,100],[0,51,103],[0,53,106],[0,54,108],[0,55,111],[0,57,114],[0,58,116],[0,59,119],[0,61,122],[0,62,124],[0,63,127],[0,65,130],[0,66,132],[0,67,135],[0,69,138],[0,70,140],[0,71,143],[0,73,146],[0,74,148],[0,75,151],[0,77,154],[0,78,156],[0,79,159],[0,81,162],[0,82,164],[0,85,170],[0,85,170],[0,87,167],[0,90,164],[0,92,162],[0,95,159],[0,98,156],[0,100,154],[0,103,151],[0,106,148],[0,108,146],[0,111,143],[0,114,140],[0,116,138],[0,119,135],[0,122,132],[0,124,130],[0,127,127],[0,130,124],[0,132,122],[0,135,119],[0,138,116],[0,140,114],[0,143,111],[0,146,108],[0,148,106],[0,151,103],[0,154,100],[0,156,98],[0,159,95],[0,162,92],[0,164,90],[0,167,87],[0,170,85],[0,172,82],[0,175,79],[0,177,77],[0,180,74],[0,183,71],[0,185,69],[0,188,66],[0,191,63],[0,193,61],[0,196,58],[0,199,55],[0,201,53],[0,204,50],[0,207,47],[0,209,45],[0,212,42],[0,215,39],[0,217,37],[0,220,34],[0,223,31],[0,225,29],[0,228,26],[0,231,23],[0,233,21],[0,236,18],[0,239,15],[0,241,13],[0,244,10],[0,247,7],[0,249,5],[0,255,0],[0,255,0],[3,255,0],[7,255,0],[11,255,0],[15,255,0],[19,255,0],[23,255,0],[27,255,0],[31,255,0],[35,255,0],[39,255,0],[43,255,0],[47,255,0],[51,255,0],[55,255,0],[59,255,0],[63,255,0],[67,255,0],[71,255,0],[75,255,0],[79,255,0],[83,255,0],[87,255,0],[91,255,0],[95,255,0],[99,255,0],[103,255,0],[107,255,0],[111,255,0],[115,255,0],[119,255,0],[123,255,0],[127,255,0],[131,255,0],[135,255,0],[139,255,0],[143,255,0],[147,255,0],[151,255,0],[155,255,0],[159,255,0],[163,255,0],[167,255,0],[171,255,0],[175,255,0],[179,255,0],[183,255,0],[187,255,0],[191,255,0],[195,255,0],[199,255,0],[203,255,0],[207,255,0],[211,255,0],[215,255,0],[219,255,0],[223,255,0],[227,255,0],[231,255,0],[235,255,0],[239,255,0],[243,255,0],[247,255,0],[255,255,0],[255,255,0],[255,255,3],[255,255,7],[255,255,11],[255,255,15],[255,255,19],[255,255,23],[255,255,27],[255,255,31],[255,255,35],[255,255,39],[255,255,43],[255,255,47],[255,255,51],[255,255,55],[255,255,59],[255,255,63],[255,255,67],[255,255,71],[255,255,75],[255,255,79],[255,255,83],[255,255,87],[255,255,91],[255,255,95],[255,255,99],[255,255,103],[255,255,107],[255,255,111],[255,255,115],[255,255,119],[255,255,123],[255,255,127],[255,255,131],[255,255,135],[255,255,139],[255,255,143],[255,255,147],[255,255,151],[255,255,155],[255,255,159],[255,255,163],[255,255,167],[255,255,171],[255,255,175],[255,255,179],[255,255,183],[255,255,187],[255,255,191],[255,255,195],[255,255,199],[255,255,203],[255,255,207],[255,255,211],[255,255,215],[255,255,219],[255,255,223],[255,255,227],[255,255,231],[255,255,235],[255,255,239],[255,255,243],[255,255,247],[255,255,255]]},{path:"/luts/wcif/",name:"hilo.lut",rgb:[[0,0,255],[1,1,1],[2,2,2],[3,3,3],[4,4,4],[5,5,5],[6,6,6],[7,7,7],[8,8,8],[9,9,9],[10,10,10],[11,11,11],[12,12,12],[13,13,13],[14,14,14],[15,15,15],[16,16,16],[17,17,17],[18,18,18],[19,19,19],[20,20,20],[21,21,21],[22,22,22],[23,23,23],[24,24,24],[25,25,25],[26,26,26],[27,27,27],[28,28,28],[29,29,29],[30,30,30],[31,31,31],[32,32,32],[33,33,33],[34,34,34],[35,35,35],[36,36,36],[37,37,37],[38,38,38],[39,39,39],[40,40,40],[41,41,41],[42,42,42],[43,43,43],[44,44,44],[45,45,45],[46,46,46],[47,47,47],[48,48,48],[49,49,49],[50,50,50],[51,51,51],[52,52,52],[53,53,53],[54,54,54],[55,55,55],[56,56,56],[57,57,57],[58,58,58],[59,59,59],[60,60,60],[61,61,61],[62,62,62],[63,63,63],[64,64,64],[65,65,65],[66,66,66],[67,67,67],[68,68,68],[69,69,69],[70,70,70],[71,71,71],[72,72,72],[73,73,73],[74,74,74],[75,75,75],[76,76,76],[77,77,77],[78,78,78],[79,79,79],[80,80,80],[81,81,81],[82,82,82],[83,83,83],[84,84,84],[85,85,85],[86,86,86],[87,87,87],[88,88,88],[89,89,89],[90,90,90],[91,91,91],[92,92,92],[93,93,93],[94,94,94],[95,95,95],[96,96,96],[97,97,97],[98,98,98],[99,99,99],[100,100,100],[101,101,101],[102,102,102],[103,103,103],[104,104,104],[105,105,105],[106,106,106],[107,107,107],[108,108,108],[109,109,109],[110,110,110],[111,111,111],[112,112,112],[113,113,113],[114,114,114],[115,115,115],[116,116,116],[117,117,117],[118,118,118],[119,119,119],[120,120,120],[121,121,121],[122,122,122],[123,123,123],[124,124,124],[125,125,125],[126,126,126],[127,127,127],[128,128,128],[129,129,129],[130,130,130],[131,131,131],[132,132,132],[133,133,133],[134,134,134],[135,135,135],[136,136,136],[137,137,137],[138,138,138],[139,139,139],[140,140,140],[141,141,141],[142,142,142],[143,143,143],[144,144,144],[145,145,145],[146,146,146],[147,147,147],[148,148,148],[149,149,149],[150,150,150],[151,151,151],[152,152,152],[153,153,153],[154,154,154],[155,155,155],[156,156,156],[157,157,157],[158,158,158],[159,159,159],[160,160,160],[161,161,161],[162,162,162],[163,163,163],[164,164,164],[165,165,165],[166,166,166],[167,167,167],[168,168,168],[169,169,169],[170,170,170],[171,171,171],[172,172,172],[173,173,173],[174,174,174],[175,175,175],[176,176,176],[177,177,177],[178,178,178],[179,179,179],[180,180,180],[181,181,181],[182,182,182],[183,183,183],[184,184,184],[185,185,185],[186,186,186],[187,187,187],[188,188,188],[189,189,189],[190,190,190],[191,191,191],[192,192,192],[193,193,193],[194,194,194],[195,195,195],[196,196,196],[197,197,197],[198,198,198],[199,199,199],[200,200,200],[201,201,201],[202,202,202],[203,203,203],[204,204,204],[205,205,205],[206,206,206],[207,207,207],[208,208,208],[209,209,209],[210,210,210],[211,211,211],[212,212,212],[213,213,213],[214,214,214],[215,215,215],[216,216,216],[217,217,217],[218,218,218],[219,219,219],[220,220,220],[221,221,221],[222,222,222],[223,223,223],[224,224,224],[225,225,225],[226,226,226],[227,227,227],[228,228,228],[229,229,229],[230,230,230],[231,231,231],[232,232,232],[233,233,233],[234,234,234],[235,235,235],[236,236,236],[237,237,237],[238,238,238],[239,239,239],[240,240,240],[241,241,241],[242,242,242],[243,243,243],[244,244,244],[245,245,245],[246,246,246],[247,247,247],[248,248,248],[249,249,249],[250,250,250],[251,251,251],[252,252,252],[253,253,253],[254,254,254],[255,0,0]]},{path:"/luts/wcif/",name:"ica.lut",rgb:[[204,204,255],[202,202,255],[201,200,255],[199,198,255],[198,196,255],[196,194,255],[195,192,255],[194,190,255],[192,188,255],[191,187,255],[189,185,255],[188,183,255],[186,181,255],[185,179,255],[184,177,255],[182,175,255],[181,173,255],[179,171,255],[178,170,255],[177,168,255],[175,166,255],[174,164,255],[172,162,255],[171,160,255],[169,158,255],[168,156,255],[167,154,255],[165,153,255],[164,151,255],[162,149,255],[161,147,255],[160,145,255],[158,143,255],[157,141,255],[155,139,255],[154,137,255],[152,136,255],[151,134,255],[150,132,255],[148,130,255],[147,128,255],[145,126,255],[144,124,255],[143,122,255],[141,120,255],[140,119,255],[138,117,255],[137,115,255],[135,113,255],[134,111,255],[133,109,255],[131,107,255],[130,105,255],[128,103,255],[127,102,255],[126,100,255],[124,98,255],[123,96,255],[121,94,255],[120,92,255],[118,90,255],[117,88,255],[116,86,255],[114,85,255],[113,83,255],[111,81,255],[110,79,255],[109,77,255],[107,75,255],[106,73,255],[104,71,255],[103,69,255],[101,68,255],[100,66,255],[99,64,255],[97,62,255],[96,60,255],[94,58,255],[93,56,255],[92,54,255],[90,52,255],[89,51,255],[87,49,255],[86,47,255],[84,45,255],[83,43,255],[82,41,255],[80,39,255],[79,37,255],[77,35,255],[76,34,255],[75,32,255],[73,30,255],[72,28,255],[70,26,255],[69,24,255],[67,22,255],[66,20,255],[65,18,255],[63,17,255],[62,15,255],[60,13,255],[59,11,255],[58,9,255],[56,7,255],[55,5,255],[53,3,255],[52,1,255],[51,0,255],[48,0,242],[45,0,229],[43,0,216],[40,0,204],[38,0,191],[35,0,178],[33,0,165],[30,0,153],[28,0,140],[25,0,127],[22,0,114],[20,0,102],[17,0,89],[15,0,76],[12,0,63],[10,0,51],[7,0,38],[5,0,25],[2,0,12],[0,0,0],[5,3,0],[10,6,0],[15,9,0],[20,12,0],[25,15,0],[30,18,0],[35,21,0],[40,24,0],[45,27,0],[50,30,0],[56,33,0],[61,36,0],[66,39,0],[71,42,0],[76,45,0],[81,48,0],[86,52,0],[91,55,0],[96,58,0],[101,61,0],[107,64,0],[112,67,0],[117,70,0],[122,73,0],[127,76,0],[132,79,0],[137,82,0],[142,85,0],[147,88,0],[153,91,0],[158,94,0],[163,97,0],[168,100,0],[173,104,0],[178,107,0],[183,110,0],[188,113,0],[193,116,0],[198,119,0],[204,122,0],[209,125,0],[214,128,0],[219,131,0],[224,134,0],[229,137,0],[234,140,0],[239,143,0],[244,146,0],[249,149,0],[255,153,0],[255,154,2],[255,155,5],[255,156,7],[255,158,10],[255,159,13],[255,160,15],[255,162,18],[255,163,21],[255,164,23],[255,166,26],[255,167,29],[255,168,31],[255,170,34],[255,171,37],[255,172,39],[255,174,42],[255,175,45],[255,176,47],[255,178,50],[255,179,52],[255,180,55],[255,182,58],[255,183,60],[255,184,63],[255,186,66],[255,187,68],[255,188,71],[255,190,74],[255,191,76],[255,192,79],[255,194,82],[255,195,84],[255,196,87],[255,198,90],[255,199,92],[255,200,95],[255,202,98],[255,203,100],[255,204,103],[255,205,105],[255,207,108],[255,208,111],[255,209,113],[255,211,116],[255,212,119],[255,213,121],[255,215,124],[255,216,127],[255,217,129],[255,219,132],[255,220,135],[255,221,137],[255,223,140],[255,224,143],[255,225,145],[255,227,148],[255,228,151],[255,229,153],[255,231,156],[255,232,158],[255,233,161],[255,235,164],[255,236,166],[255,237,169],[255,239,172],[255,240,174],[255,241,177],[255,243,180],[255,244,182],[255,245,185],[255,247,188],[255,248,190],[255,249,193],[255,251,196],[255,252,198],[255,253,201],[255,255,204]]},{path:"/luts/wcif/",name:"ica2.lut",rgb:[[255,255,0],[252,254,0],[250,254,0],[247,253,0],[245,253,0],[243,252,0],[240,252,0],[238,251,0],[236,251,0],[233,250,0],[231,250,0],[229,249,0],[226,249,0],[224,248,0],[221,248,0],[219,247,0],[217,247,0],[214,246,0],[212,246,0],[210,246,0],[207,245,0],[205,245,0],[203,244,0],[200,244,0],[198,243,0],[195,243,0],[193,242,0],[191,242,0],[188,241,0],[186,241,0],[184,240,0],[181,240,0],[179,239,0],[177,239,0],[174,238,0],[172,238,0],[169,237,0],[167,237,0],[165,237,0],[162,236,0],[160,236,0],[158,235,0],[155,235,0],[153,234,0],[151,234,0],[148,233,0],[146,233,0],[144,232,0],[141,232,0],[139,231,0],[136,231,0],[134,230,0],[132,230,0],[129,229,0],[127,229,0],[125,229,0],[122,228,0],[120,228,0],[118,227,0],[115,227,0],[113,226,0],[110,226,0],[108,225,0],[106,225,0],[103,224,0],[101,224,0],[99,223,0],[96,223,0],[94,222,0],[92,222,0],[89,221,0],[87,221,0],[84,220,0],[82,220,0],[80,220,0],[77,219,0],[75,219,0],[73,218,0],[70,218,0],[68,217,0],[66,217,0],[63,216,0],[61,216,0],[59,215,0],[56,215,0],[54,214,0],[51,214,0],[49,213,0],[47,213,0],[44,212,0],[42,212,0],[40,212,0],[37,211,0],[35,211,0],[33,210,0],[30,210,0],[28,209,0],[25,209,0],[23,208,0],[21,208,0],[18,207,0],[16,207,0],[14,206,0],[11,206,0],[9,205,0],[7,205,0],[4,204,0],[2,204,0],[0,204,0],[0,193,0],[0,183,0],[0,173,0],[0,163,0],[0,153,0],[0,142,0],[0,132,0],[0,122,0],[0,112,0],[0,102,0],[0,91,0],[0,81,0],[0,71,0],[0,61,0],[0,51,0],[0,40,0],[0,30,0],[0,20,0],[0,10,0],[0,0,0],[5,3,0],[10,6,0],[15,9,0],[20,12,0],[25,15,0],[30,18,0],[35,21,0],[40,24,0],[45,27,0],[50,30,0],[56,33,0],[61,36,0],[66,39,0],[71,42,0],[76,45,0],[81,48,0],[86,52,0],[91,55,0],[96,58,0],[101,61,0],[107,64,0],[112,67,0],[117,70,0],[122,73,0],[127,76,0],[132,79,0],[137,82,0],[142,85,0],[147,88,0],[153,91,0],[158,94,0],[163,97,0],[168,100,0],[173,104,0],[178,107,0],[183,110,0],[188,113,0],[193,116,0],[198,119,0],[204,122,0],[209,125,0],[214,128,0],[219,131,0],[224,134,0],[229,137,0],[234,140,0],[239,143,0],[244,146,0],[249,149,0],[255,153,0],[255,154,2],[255,155,5],[255,156,7],[255,158,10],[255,159,13],[255,160,15],[255,162,18],[255,163,21],[255,164,23],[255,166,26],[255,167,29],[255,168,31],[255,170,34],[255,171,37],[255,172,39],[255,174,42],[255,175,45],[255,176,47],[255,178,50],[255,179,52],[255,180,55],[255,182,58],[255,183,60],[255,184,63],[255,186,66],[255,187,68],[255,188,71],[255,190,74],[255,191,76],[255,192,79],[255,194,82],[255,195,84],[255,196,87],[255,198,90],[255,199,92],[255,200,95],[255,202,98],[255,203,100],[255,204,103],[255,205,105],[255,207,108],[255,208,111],[255,209,113],[255,211,116],[255,212,119],[255,213,121],[255,215,124],[255,216,127],[255,217,129],[255,219,132],[255,220,135],[255,221,137],[255,223,140],[255,224,143],[255,225,145],[255,227,148],[255,228,151],[255,229,153],[255,231,156],[255,232,158],[255,233,161],[255,235,164],[255,236,166],[255,237,169],[255,239,172],[255,240,174],[255,241,177],[255,243,180],[255,244,182],[255,245,185],[255,247,188],[255,248,190],[255,249,193],[255,251,196],[255,252,198],[255,253,201],[255,255,204]]},{path:"/luts/wcif/",name:"ica3.lut",rgb:[[255,204,255],[254,202,254],[254,200,254],[253,198,253],[253,196,253],[252,194,252],[252,192,252],[251,190,251],[251,188,251],[250,187,250],[250,185,250],[249,183,249],[249,181,249],[248,179,248],[248,177,248],[247,175,247],[247,173,247],[246,171,246],[246,170,246],[246,168,246],[245,166,245],[245,164,245],[244,162,244],[244,160,244],[243,158,243],[243,156,243],[242,154,242],[242,153,242],[241,151,241],[241,149,241],[240,147,240],[240,145,240],[239,143,239],[239,141,239],[238,139,238],[238,137,238],[237,136,237],[237,134,237],[237,132,237],[236,130,236],[236,128,236],[235,126,235],[235,124,235],[234,122,234],[234,120,234],[233,119,233],[233,117,233],[232,115,232],[232,113,232],[231,111,231],[231,109,231],[230,107,230],[230,105,230],[229,103,229],[229,102,229],[229,100,229],[228,98,228],[228,96,228],[227,94,227],[227,92,227],[226,90,226],[226,88,226],[225,86,225],[225,85,225],[224,83,224],[224,81,224],[223,79,223],[223,77,223],[222,75,222],[222,73,222],[221,71,221],[221,69,221],[220,68,220],[220,66,220],[220,64,220],[219,62,219],[219,60,219],[218,58,218],[218,56,218],[217,54,217],[217,52,217],[216,51,216],[216,49,216],[215,47,215],[215,45,215],[214,43,214],[214,41,214],[213,39,213],[213,37,213],[212,35,212],[212,34,212],[212,32,212],[211,30,211],[211,28,211],[210,26,210],[210,24,210],[209,22,209],[209,20,209],[208,18,208],[208,17,208],[207,15,207],[207,13,207],[206,11,206],[206,9,206],[205,7,205],[205,5,205],[204,3,204],[204,1,204],[204,0,204],[193,0,193],[183,0,183],[173,0,173],[163,0,163],[153,0,153],[142,0,142],[132,0,132],[122,0,122],[112,0,112],[102,0,102],[91,0,91],[81,0,81],[71,0,71],[61,0,61],[51,0,51],[40,0,40],[30,0,30],[20,0,20],[10,0,10],[0,0,0],[12,5,0],[25,10,0],[38,15,0],[51,20,0],[63,25,0],[76,30,0],[89,35,0],[102,40,0],[114,45,0],[127,50,0],[140,56,0],[153,61,0],[165,66,0],[178,71,0],[191,76,0],[204,81,0],[216,86,0],[229,91,0],[242,96,0],[255,102,0],[255,103,1],[255,104,3],[255,106,5],[255,107,7],[255,109,9],[255,110,11],[255,112,13],[255,113,15],[255,114,17],[255,116,19],[255,117,20],[255,119,22],[255,120,24],[255,122,26],[255,123,28],[255,124,30],[255,126,32],[255,127,34],[255,129,36],[255,130,38],[255,132,40],[255,133,41],[255,134,43],[255,136,45],[255,137,47],[255,139,49],[255,140,51],[255,142,53],[255,143,55],[255,144,57],[255,146,59],[255,147,61],[255,149,62],[255,150,64],[255,152,66],[255,153,68],[255,154,70],[255,156,72],[255,157,74],[255,159,76],[255,160,78],[255,162,80],[255,163,81],[255,164,83],[255,166,85],[255,167,87],[255,169,89],[255,170,91],[255,172,93],[255,173,95],[255,174,97],[255,176,99],[255,177,101],[255,179,102],[255,180,104],[255,182,106],[255,183,108],[255,184,110],[255,186,112],[255,187,114],[255,189,116],[255,190,118],[255,192,120],[255,193,122],[255,194,123],[255,196,125],[255,197,127],[255,199,129],[255,200,131],[255,202,133],[255,203,135],[255,204,137],[255,206,139],[255,207,141],[255,209,142],[255,210,144],[255,212,146],[255,213,148],[255,214,150],[255,216,152],[255,217,154],[255,219,156],[255,220,158],[255,222,160],[255,223,162],[255,224,163],[255,226,165],[255,227,167],[255,229,169],[255,230,171],[255,232,173],[255,233,175],[255,234,177],[255,236,179],[255,237,181],[255,239,183],[255,240,184],[255,242,186],[255,243,188],[255,244,190],[255,246,192],[255,247,194],[255,249,196],[255,250,198],[255,252,200],[255,253,202],[255,255,204]]},{path:"/luts/",name:"ice.lut",rgb:[[0,156,140],[0,157,140],[0,158,141],[0,159,142],[0,160,143],[0,161,144],[0,162,145],[0,163,146],[0,165,147],[0,166,148],[0,167,149],[0,169,151],[0,170,152],[0,171,153],[0,173,155],[0,174,156],[0,176,158],[0,177,159],[0,178,160],[0,179,161],[0,180,162],[0,181,163],[0,182,164],[0,183,165],[0,184,166],[0,184,166],[0,185,167],[0,186,167],[0,187,168],[0,187,168],[0,188,169],[0,189,169],[0,190,170],[0,190,170],[0,191,171],[0,192,172],[0,193,173],[0,193,173],[0,194,174],[0,195,175],[0,196,176],[2,195,180],[4,195,184],[7,194,188],[9,194,192],[11,194,196],[14,193,200],[16,193,204],[19,193,209],[20,191,210],[21,190,211],[22,189,213],[24,188,214],[25,187,215],[26,186,217],[27,185,218],[29,184,220],[31,182,221],[34,180,223],[36,179,225],[39,177,227],[42,175,228],[44,174,230],[47,172,232],[50,171,234],[49,169,232],[49,168,231],[49,167,230],[49,166,229],[48,165,228],[48,164,227],[48,163,226],[48,162,225],[51,160,226],[55,158,227],[59,156,229],[63,154,230],[67,152,231],[71,150,233],[75,148,234],[79,146,236],[83,143,237],[87,140,238],[91,138,239],[95,135,241],[99,132,242],[103,130,243],[107,127,244],[112,125,246],[114,122,246],[117,120,247],[120,118,247],[123,116,248],[125,113,248],[128,111,249],[131,109,249],[134,107,250],[137,105,250],[140,103,250],[143,101,250],[146,100,250],[149,98,250],[152,96,250],[155,94,250],[158,93,251],[161,91,250],[165,90,250],[168,88,250],[172,87,250],[175,85,250],[179,84,250],[182,82,250],[186,81,250],[187,81,250],[189,82,250],[191,83,250],[193,84,250],[195,84,250],[197,85,250],[199,86,250],[201,87,250],[203,87,249],[205,88,248],[207,88,248],[209,89,247],[211,90,246],[213,90,246],[215,91,245],[217,92,245],[218,92,243],[220,93,241],[221,93,239],[223,94,237],[224,95,235],[226,95,233],[227,96,231],[229,97,230],[230,96,230],[232,96,230],[233,96,230],[235,96,230],[237,95,230],[238,95,230],[240,95,230],[242,95,230],[243,94,229],[244,94,228],[245,94,227],[246,94,226],[247,93,225],[248,93,224],[249,93,223],[250,93,222],[250,93,219],[250,93,217],[250,93,214],[250,93,212],[250,93,209],[250,93,207],[250,93,204],[250,93,202],[250,92,199],[250,92,196],[250,91,193],[250,91,191],[250,91,188],[250,90,185],[250,90,182],[250,90,180],[250,89,177],[250,88,175],[250,88,173],[250,87,171],[250,86,169],[250,86,167],[250,85,165],[250,85,163],[250,83,160],[250,81,157],[250,79,155],[250,77,152],[250,75,149],[250,73,147],[250,71,144],[251,69,142],[250,68,139],[250,67,137],[250,67,134],[250,66,132],[250,65,130],[250,65,127],[250,64,125],[250,64,123],[250,62,121],[250,61,120],[250,60,119],[250,59,118],[250,57,117],[250,56,116],[250,55,115],[250,54,114],[250,53,113],[250,52,112],[250,51,111],[250,50,110],[250,49,109],[250,48,108],[250,47,107],[250,47,106],[250,45,104],[250,44,103],[250,42,101],[250,41,100],[250,39,98],[250,38,97],[250,36,95],[250,35,94],[250,33,92],[250,31,91],[250,29,90],[250,27,89],[250,25,87],[250,23,86],[250,21,85],[251,19,84],[251,16,81],[251,14,79],[251,11,76],[251,9,74],[251,7,71],[251,4,69],[251,2,66],[251,0,64],[250,0,59],[249,1,54],[248,1,49],[247,2,45],[246,2,40],[245,3,35],[244,3,30],[243,4,26],[241,3,26],[239,3,26],[238,2,26],[236,2,26],[234,1,26],[233,1,26],[231,0,26],[230,0,27],[230,0,27],[230,0,27],[230,0,27],[230,0,27],[230,0,27],[230,0,27],[230,0,27]]},{path:"/luts/matplotlib/",name:"inferno.lut",rgb:[[0,0,3],[0,0,4],[0,0,6],[1,0,7],[1,1,9],[1,1,11],[2,1,14],[2,2,16],[3,2,18],[4,3,20],[4,3,22],[5,4,24],[6,4,27],[7,5,29],[8,6,31],[9,6,33],[10,7,35],[11,7,38],[13,8,40],[14,8,42],[15,9,45],[16,9,47],[18,10,50],[19,10,52],[20,11,54],[22,11,57],[23,11,59],[25,11,62],[26,11,64],[28,12,67],[29,12,69],[31,12,71],[32,12,74],[34,11,76],[36,11,78],[38,11,80],[39,11,82],[41,11,84],[43,10,86],[45,10,88],[46,10,90],[48,10,92],[50,9,93],[52,9,95],[53,9,96],[55,9,97],[57,9,98],[59,9,100],[60,9,101],[62,9,102],[64,9,102],[65,9,103],[67,10,104],[69,10,105],[70,10,105],[72,11,106],[74,11,106],[75,12,107],[77,12,107],[79,13,108],[80,13,108],[82,14,108],[83,14,109],[85,15,109],[87,15,109],[88,16,109],[90,17,109],[91,17,110],[93,18,110],[95,18,110],[96,19,110],[98,20,110],[99,20,110],[101,21,110],[102,21,110],[104,22,110],[106,23,110],[107,23,110],[109,24,110],[110,24,110],[112,25,110],[114,25,109],[115,26,109],[117,27,109],[118,27,109],[120,28,109],[122,28,109],[123,29,108],[125,29,108],[126,30,108],[128,31,107],[129,31,107],[131,32,107],[133,32,106],[134,33,106],[136,33,106],[137,34,105],[139,34,105],[141,35,105],[142,36,104],[144,36,104],[145,37,103],[147,37,103],[149,38,102],[150,38,102],[152,39,101],[153,40,100],[155,40,100],[156,41,99],[158,41,99],[160,42,98],[161,43,97],[163,43,97],[164,44,96],[166,44,95],[167,45,95],[169,46,94],[171,46,93],[172,47,92],[174,48,91],[175,49,91],[177,49,90],[178,50,89],[180,51,88],[181,51,87],[183,52,86],[184,53,86],[186,54,85],[187,55,84],[189,55,83],[190,56,82],[191,57,81],[193,58,80],[194,59,79],[196,60,78],[197,61,77],[199,62,76],[200,62,75],[201,63,74],[203,64,73],[204,65,72],[205,66,71],[207,68,70],[208,69,68],[209,70,67],[210,71,66],[212,72,65],[213,73,64],[214,74,63],[215,75,62],[217,77,61],[218,78,59],[219,79,58],[220,80,57],[221,82,56],[222,83,55],[223,84,54],[224,86,52],[226,87,51],[227,88,50],[228,90,49],[229,91,48],[230,92,46],[230,94,45],[231,95,44],[232,97,43],[233,98,42],[234,100,40],[235,101,39],[236,103,38],[237,104,37],[237,106,35],[238,108,34],[239,109,33],[240,111,31],[240,112,30],[241,114,29],[242,116,28],[242,117,26],[243,119,25],[243,121,24],[244,122,22],[245,124,21],[245,126,20],[246,128,18],[246,129,17],[247,131,16],[247,133,14],[248,135,13],[248,136,12],[248,138,11],[249,140,9],[249,142,8],[249,144,8],[250,145,7],[250,147,6],[250,149,6],[250,151,6],[251,153,6],[251,155,6],[251,157,6],[251,158,7],[251,160,7],[251,162,8],[251,164,10],[251,166,11],[251,168,13],[251,170,14],[251,172,16],[251,174,18],[251,176,20],[251,177,22],[251,179,24],[251,181,26],[251,183,28],[251,185,30],[250,187,33],[250,189,35],[250,191,37],[250,193,40],[249,195,42],[249,197,44],[249,199,47],[248,201,49],[248,203,52],[248,205,55],[247,207,58],[247,209,60],[246,211,63],[246,213,66],[245,215,69],[245,217,72],[244,219,75],[244,220,79],[243,222,82],[243,224,86],[243,226,89],[242,228,93],[242,230,96],[241,232,100],[241,233,104],[241,235,108],[241,237,112],[241,238,116],[241,240,121],[241,242,125],[242,243,129],[242,244,133],[243,246,137],[244,247,141],[245,248,145],[246,250,149],[247,251,153],[249,252,157],[250,253,160],[252,254,164]]},{path:"/luts/wcif/",name:"magenta_hot.lut",rgb:[[0,0,0],[1,0,1],[3,0,3],[4,0,4],[6,0,6],[7,0,7],[9,0,9],[11,0,11],[12,0,12],[14,0,14],[15,0,15],[17,0,17],[19,0,19],[20,0,20],[22,0,22],[23,0,23],[25,0,25],[27,0,27],[28,0,28],[30,0,30],[31,0,31],[33,0,33],[35,0,35],[36,0,36],[38,0,38],[39,0,39],[41,0,41],[43,0,43],[44,0,44],[46,0,46],[47,0,47],[49,0,49],[51,0,51],[52,0,52],[54,0,54],[55,0,55],[57,0,57],[58,0,58],[60,0,60],[62,0,62],[63,0,63],[65,0,65],[66,0,66],[68,0,68],[70,0,70],[71,0,71],[73,0,73],[74,0,74],[76,0,76],[78,0,78],[79,0,79],[81,0,81],[82,0,82],[84,0,84],[86,0,86],[87,0,87],[89,0,89],[90,0,90],[92,0,92],[94,0,94],[95,0,95],[97,0,97],[98,0,98],[102,0,102],[102,0,102],[104,0,104],[106,0,106],[109,0,109],[111,0,111],[113,0,113],[116,0,116],[118,0,118],[121,0,121],[123,0,123],[125,0,125],[128,0,128],[130,0,130],[133,0,133],[135,0,135],[137,0,137],[140,0,140],[142,0,142],[145,0,145],[147,0,147],[149,0,149],[152,0,152],[154,0,154],[156,0,156],[159,0,159],[161,0,161],[164,0,164],[166,0,166],[168,0,168],[171,0,171],[173,0,173],[176,0,176],[178,0,178],[180,0,180],[183,0,183],[185,0,185],[188,0,188],[190,0,190],[192,0,192],[195,0,195],[197,0,197],[200,0,200],[202,0,202],[204,0,204],[207,0,207],[209,0,209],[211,0,211],[214,0,214],[216,0,216],[219,0,219],[221,0,221],[223,0,223],[226,0,226],[228,0,228],[231,0,231],[233,0,233],[235,0,235],[238,0,238],[240,0,240],[243,0,243],[245,0,245],[247,0,247],[250,0,250],[255,0,255],[255,0,255],[255,1,255],[255,3,255],[255,4,255],[255,6,255],[255,7,255],[255,9,255],[255,11,255],[255,12,255],[255,14,255],[255,15,255],[255,17,255],[255,19,255],[255,20,255],[255,22,255],[255,23,255],[255,25,255],[255,27,255],[255,28,255],[255,30,255],[255,31,255],[255,33,255],[255,35,255],[255,36,255],[255,38,255],[255,39,255],[255,41,255],[255,43,255],[255,44,255],[255,46,255],[255,47,255],[255,49,255],[255,51,255],[255,52,255],[255,54,255],[255,55,255],[255,57,255],[255,58,255],[255,60,255],[255,62,255],[255,63,255],[255,65,255],[255,66,255],[255,68,255],[255,70,255],[255,71,255],[255,73,255],[255,74,255],[255,76,255],[255,78,255],[255,79,255],[255,81,255],[255,82,255],[255,84,255],[255,86,255],[255,87,255],[255,89,255],[255,90,255],[255,92,255],[255,94,255],[255,95,255],[255,97,255],[255,98,255],[255,102,255],[255,102,255],[255,104,255],[255,106,255],[255,109,255],[255,111,255],[255,113,255],[255,116,255],[255,118,255],[255,121,255],[255,123,255],[255,125,255],[255,128,255],[255,130,255],[255,133,255],[255,135,255],[255,137,255],[255,140,255],[255,142,255],[255,145,255],[255,147,255],[255,149,255],[255,152,255],[255,154,255],[255,156,255],[255,159,255],[255,161,255],[255,164,255],[255,166,255],[255,168,255],[255,171,255],[255,173,255],[255,176,255],[255,178,255],[255,180,255],[255,183,255],[255,185,255],[255,188,255],[255,190,255],[255,192,255],[255,195,255],[255,197,255],[255,200,255],[255,202,255],[255,204,255],[255,207,255],[255,209,255],[255,211,255],[255,214,255],[255,216,255],[255,219,255],[255,221,255],[255,223,255],[255,226,255],[255,228,255],[255,231,255],[255,233,255],[255,235,255],[255,238,255],[255,240,255],[255,243,255],[255,245,255],[255,247,255],[255,250,255],[255,255,255]]},{path:"/luts/matplotlib/",name:"magma.lut",rgb:[[0,0,3],[0,0,4],[0,0,6],[1,0,7],[1,1,9],[1,1,11],[2,2,13],[2,2,15],[3,3,17],[4,3,19],[4,4,21],[5,4,23],[6,5,25],[7,5,27],[8,6,29],[9,7,31],[10,7,34],[11,8,36],[12,9,38],[13,10,40],[14,10,42],[15,11,44],[16,12,47],[17,12,49],[18,13,51],[20,13,53],[21,14,56],[22,14,58],[23,15,60],[24,15,63],[26,16,65],[27,16,68],[28,16,70],[30,16,73],[31,17,75],[32,17,77],[34,17,80],[35,17,82],[37,17,85],[38,17,87],[40,17,89],[42,17,92],[43,17,94],[45,16,96],[47,16,98],[48,16,101],[50,16,103],[52,16,104],[53,15,106],[55,15,108],[57,15,110],[59,15,111],[60,15,113],[62,15,114],[64,15,115],[66,15,116],[67,15,117],[69,15,118],[71,15,119],[72,16,120],[74,16,121],[75,16,121],[77,17,122],[79,17,123],[80,18,123],[82,18,124],[83,19,124],[85,19,125],[87,20,125],[88,21,126],[90,21,126],[91,22,126],[93,23,126],[94,23,127],[96,24,127],[97,24,127],[99,25,127],[101,26,128],[102,26,128],[104,27,128],[105,28,128],[107,28,128],[108,29,128],[110,30,129],[111,30,129],[113,31,129],[115,31,129],[116,32,129],[118,33,129],[119,33,129],[121,34,129],[122,34,129],[124,35,129],[126,36,129],[127,36,129],[129,37,129],[130,37,129],[132,38,129],[133,38,129],[135,39,129],[137,40,129],[138,40,129],[140,41,128],[141,41,128],[143,42,128],[145,42,128],[146,43,128],[148,43,128],[149,44,128],[151,44,127],[153,45,127],[154,45,127],[156,46,127],[158,46,126],[159,47,126],[161,47,126],[163,48,126],[164,48,125],[166,49,125],[167,49,125],[169,50,124],[171,51,124],[172,51,123],[174,52,123],[176,52,123],[177,53,122],[179,53,122],[181,54,121],[182,54,121],[184,55,120],[185,55,120],[187,56,119],[189,57,119],[190,57,118],[192,58,117],[194,58,117],[195,59,116],[197,60,116],[198,60,115],[200,61,114],[202,62,114],[203,62,113],[205,63,112],[206,64,112],[208,65,111],[209,66,110],[211,66,109],[212,67,109],[214,68,108],[215,69,107],[217,70,106],[218,71,105],[220,72,105],[221,73,104],[222,74,103],[224,75,102],[225,76,102],[226,77,101],[228,78,100],[229,80,99],[230,81,98],[231,82,98],[232,84,97],[234,85,96],[235,86,96],[236,88,95],[237,89,95],[238,91,94],[238,93,93],[239,94,93],[240,96,93],[241,97,92],[242,99,92],[243,101,92],[243,103,91],[244,104,91],[245,106,91],[245,108,91],[246,110,91],[246,112,91],[247,113,91],[247,115,92],[248,117,92],[248,119,92],[249,121,92],[249,123,93],[249,125,93],[250,127,94],[250,128,94],[250,130,95],[251,132,96],[251,134,96],[251,136,97],[251,138,98],[252,140,99],[252,142,99],[252,144,100],[252,146,101],[252,147,102],[253,149,103],[253,151,104],[253,153,105],[253,155,106],[253,157,107],[253,159,108],[253,161,110],[253,162,111],[253,164,112],[254,166,113],[254,168,115],[254,170,116],[254,172,117],[254,174,118],[254,175,120],[254,177,121],[254,179,123],[254,181,124],[254,183,125],[254,185,127],[254,187,128],[254,188,130],[254,190,131],[254,192,133],[254,194,134],[254,196,136],[254,198,137],[254,199,139],[254,201,141],[254,203,142],[253,205,144],[253,207,146],[253,209,147],[253,210,149],[253,212,151],[253,214,152],[253,216,154],[253,218,156],[253,220,157],[253,221,159],[253,223,161],[253,225,163],[252,227,165],[252,229,166],[252,230,168],[252,232,170],[252,234,172],[252,236,174],[252,238,176],[252,240,177],[252,241,179],[252,243,181],[252,245,183],[251,247,185],[251,249,187],[251,250,189],[251,252,191]]},{path:"/luts/seaborn/",name:"mako.lut",rgb:[[11,3,5],[12,4,6],[13,4,7],[14,5,9],[15,6,10],[16,7,12],[17,7,13],[18,8,14],[19,9,16],[21,10,17],[22,11,19],[23,11,20],[24,12,22],[25,13,23],[26,14,25],[27,15,26],[28,15,28],[29,16,29],[30,17,31],[31,18,32],[32,18,34],[33,19,35],[34,20,37],[35,21,38],[36,21,40],[36,22,41],[37,23,43],[38,24,44],[39,24,46],[40,25,47],[41,26,49],[42,26,51],[43,27,52],[44,28,54],[44,29,55],[45,29,57],[46,30,59],[47,31,60],[48,32,62],[48,32,64],[49,33,65],[50,34,67],[51,35,69],[51,35,70],[52,36,72],[53,37,74],[53,38,76],[54,38,77],[54,39,79],[55,40,81],[56,41,82],[56,42,84],[57,42,86],[57,43,88],[58,44,89],[58,45,91],[59,46,93],[59,47,95],[60,47,96],[60,48,98],[61,49,100],[61,50,102],[61,51,103],[62,52,105],[62,52,107],[62,53,109],[63,54,111],[63,55,112],[63,56,114],[64,57,116],[64,58,118],[64,59,120],[64,59,121],[64,60,123],[64,61,125],[64,62,127],[65,63,128],[65,64,130],[65,65,132],[64,66,133],[64,67,135],[64,68,136],[64,69,138],[64,70,139],[64,71,141],[63,73,142],[63,74,143],[63,75,145],[62,76,146],[62,77,147],[62,78,148],[61,80,149],[61,81,150],[60,82,150],[60,83,151],[60,84,152],[59,86,153],[59,87,153],[58,88,154],[58,89,154],[58,90,155],[57,92,155],[57,93,156],[57,94,156],[56,95,156],[56,96,157],[56,98,157],[55,99,157],[55,100,158],[55,101,158],[55,102,158],[54,104,159],[54,105,159],[54,106,159],[54,107,159],[54,108,160],[54,109,160],[53,110,160],[53,112,160],[53,113,161],[53,114,161],[53,115,161],[53,116,161],[53,117,162],[53,118,162],[53,120,162],[53,121,162],[53,122,163],[52,123,163],[52,124,163],[52,125,163],[52,126,164],[52,127,164],[52,129,164],[52,130,164],[52,131,165],[52,132,165],[52,133,165],[52,134,165],[52,135,166],[52,136,166],[52,137,166],[52,139,167],[52,140,167],[52,141,167],[52,142,167],[52,143,168],[52,144,168],[52,145,168],[52,146,168],[52,148,169],[52,149,169],[52,150,169],[52,151,169],[52,152,169],[52,153,170],[52,154,170],[52,155,170],[52,157,170],[53,158,170],[53,159,171],[53,160,171],[53,161,171],[53,162,171],[54,163,171],[54,164,172],[54,165,172],[55,167,172],[55,168,172],[56,169,172],[56,170,172],[56,171,172],[57,172,172],[58,173,173],[58,174,173],[59,176,173],[59,177,173],[60,178,173],[61,179,173],[62,180,173],[62,181,173],[63,182,173],[64,183,173],[65,184,173],[66,186,173],[67,187,173],[68,188,173],[69,189,173],[70,190,173],[71,191,173],[72,192,173],[73,193,173],[74,194,173],[76,196,173],[77,197,173],[78,198,173],[80,199,173],[82,200,173],[83,201,173],[85,202,173],[87,203,173],[89,204,173],[91,205,173],[93,206,173],[96,207,173],[98,208,173],[101,209,173],[104,209,173],[106,210,173],[109,211,173],[112,212,173],[115,213,174],[118,213,174],[121,214,174],[124,215,175],[127,215,176],[130,216,176],[133,217,177],[136,218,178],[139,218,178],[142,219,179],[145,220,180],[148,220,181],[150,221,182],[153,222,183],[156,222,184],[159,223,185],[161,224,186],[164,224,187],[166,225,188],[169,226,189],[171,227,191],[174,227,192],[176,228,193],[178,229,195],[181,229,196],[183,230,198],[185,231,199],[188,232,201],[190,232,202],[192,233,204],[194,234,206],[196,235,207],[198,235,209],[200,236,211],[202,237,212],[205,238,214],[207,239,216],[209,239,217],[211,240,219],[213,241,221],[215,242,222],[217,243,224],[219,243,226],[221,244,228],[223,245,229]]},{path:"/luts/wcif/",name:"orange_hot.lut",rgb:[[0,0,0],[2,1,0],[5,3,0],[8,4,0],[11,6,0],[14,7,0],[17,9,0],[20,10,0],[23,12,0],[26,13,0],[29,15,0],[32,16,0],[35,18,0],[38,19,0],[41,21,0],[44,22,0],[47,24,0],[50,25,0],[53,27,0],[56,28,0],[59,30,0],[62,31,0],[65,33,0],[68,34,0],[71,36,0],[74,37,0],[77,39,0],[80,40,0],[83,42,0],[86,43,0],[89,45,0],[92,46,0],[95,48,0],[98,49,0],[101,51,0],[104,52,0],[107,54,0],[110,55,0],[113,57,0],[116,58,0],[119,60,0],[122,61,0],[125,63,0],[128,64,0],[131,66,0],[134,67,0],[137,69,0],[140,70,0],[143,72,0],[146,73,0],[149,75,0],[152,76,0],[155,78,0],[158,79,0],[161,81,0],[164,82,0],[167,84,0],[170,85,0],[173,87,0],[176,88,0],[179,90,0],[182,91,0],[185,93,0],[188,94,0],[191,96,0],[194,97,0],[197,99,0],[200,100,0],[203,102,0],[206,103,0],[209,105,0],[212,106,0],[215,108,0],[218,109,0],[221,111,0],[224,112,0],[227,114,0],[230,115,0],[233,117,0],[236,118,0],[239,120,0],[242,121,0],[245,123,0],[248,124,0],[255,128,0],[255,128,0],[255,129,0],[255,130,0],[255,132,0],[255,133,0],[255,135,0],[255,136,0],[255,138,0],[255,139,0],[255,141,0],[255,142,0],[255,144,0],[255,145,0],[255,147,0],[255,148,0],[255,150,0],[255,151,0],[255,153,0],[255,154,0],[255,156,0],[255,157,0],[255,159,0],[255,160,0],[255,162,0],[255,163,0],[255,165,0],[255,166,0],[255,168,0],[255,169,0],[255,171,0],[255,172,0],[255,174,0],[255,175,0],[255,177,0],[255,178,0],[255,180,0],[255,181,0],[255,183,0],[255,184,0],[255,186,0],[255,187,0],[255,189,0],[255,190,0],[255,191,0],[255,193,0],[255,194,0],[255,196,0],[255,197,0],[255,199,0],[255,200,0],[255,202,0],[255,203,0],[255,205,0],[255,206,0],[255,208,0],[255,209,0],[255,211,0],[255,212,0],[255,214,0],[255,215,0],[255,217,0],[255,218,0],[255,220,0],[255,221,0],[255,223,0],[255,224,0],[255,226,0],[255,227,0],[255,229,0],[255,230,0],[255,232,0],[255,233,0],[255,235,0],[255,236,0],[255,238,0],[255,239,0],[255,241,0],[255,242,0],[255,244,0],[255,245,0],[255,247,0],[255,248,0],[255,250,0],[255,251,0],[255,255,0],[255,255,0],[255,255,2],[255,255,5],[255,255,8],[255,255,11],[255,255,14],[255,255,17],[255,255,20],[255,255,23],[255,255,26],[255,255,29],[255,255,32],[255,255,35],[255,255,38],[255,255,41],[255,255,44],[255,255,47],[255,255,50],[255,255,53],[255,255,56],[255,255,59],[255,255,62],[255,255,65],[255,255,68],[255,255,71],[255,255,74],[255,255,77],[255,255,80],[255,255,83],[255,255,86],[255,255,89],[255,255,92],[255,255,95],[255,255,98],[255,255,101],[255,255,104],[255,255,107],[255,255,110],[255,255,113],[255,255,116],[255,255,119],[255,255,122],[255,255,125],[255,255,128],[255,255,131],[255,255,134],[255,255,137],[255,255,140],[255,255,143],[255,255,146],[255,255,149],[255,255,152],[255,255,155],[255,255,158],[255,255,161],[255,255,164],[255,255,167],[255,255,170],[255,255,173],[255,255,176],[255,255,179],[255,255,182],[255,255,185],[255,255,188],[255,255,191],[255,255,194],[255,255,197],[255,255,200],[255,255,203],[255,255,206],[255,255,209],[255,255,212],[255,255,215],[255,255,218],[255,255,221],[255,255,224],[255,255,227],[255,255,230],[255,255,233],[255,255,236],[255,255,239],[255,255,242],[255,255,245],[255,255,248],[255,255,251],[255,255,255]]},{path:"/luts/ncsa_paledit/",name:"phase.lut",rgb:[[0,0,252],[0,0,252],[0,0,252],[4,4,252],[4,4,252],[4,4,252],[8,8,252],[8,8,252],[12,12,252],[12,12,252],[12,12,248],[16,16,248],[16,16,248],[20,20,248],[20,20,248],[20,20,248],[24,24,248],[24,24,248],[28,28,248],[28,28,248],[28,28,244],[32,32,244],[32,32,244],[36,36,244],[36,36,244],[36,36,244],[40,40,244],[40,40,244],[44,44,244],[44,44,244],[44,44,240],[48,48,240],[48,48,240],[52,52,240],[52,52,240],[52,52,240],[56,56,240],[56,56,240],[60,60,240],[60,60,236],[60,60,236],[64,64,236],[64,64,236],[68,68,236],[68,68,236],[68,68,236],[72,72,236],[72,72,236],[76,76,236],[76,76,232],[76,76,232],[80,80,232],[80,80,232],[84,84,232],[84,84,232],[84,84,232],[88,88,232],[88,88,232],[92,92,232],[92,92,228],[92,92,228],[96,96,228],[96,96,228],[96,96,228],[100,100,228],[100,100,228],[104,104,228],[104,104,228],[104,104,224],[108,108,224],[108,108,224],[112,112,224],[112,112,224],[112,112,224],[116,116,224],[116,116,224],[120,120,224],[120,120,224],[120,120,220],[124,124,220],[124,124,220],[128,128,220],[128,128,220],[128,128,220],[132,132,220],[132,132,220],[136,136,220],[136,136,220],[136,136,216],[140,140,216],[140,140,216],[144,144,216],[144,144,216],[144,144,216],[148,148,216],[148,148,216],[152,152,216],[152,152,212],[152,152,212],[156,156,212],[156,156,212],[160,160,212],[160,160,212],[160,160,212],[164,164,212],[164,164,212],[168,168,212],[168,168,208],[168,168,208],[172,172,208],[172,172,208],[176,176,208],[176,176,208],[176,176,208],[180,180,208],[180,180,208],[184,184,208],[184,184,204],[184,184,204],[188,188,204],[188,188,204],[192,192,204],[192,192,204],[192,192,204],[196,196,204],[196,196,204],[200,200,200],[200,200,200],[200,200,200],[200,196,196],[200,196,196],[200,196,196],[200,192,192],[200,192,192],[200,188,188],[200,188,188],[204,188,188],[204,184,184],[204,184,184],[204,180,180],[204,180,180],[204,180,180],[204,176,176],[204,176,176],[204,172,172],[204,172,172],[208,172,172],[208,168,168],[208,168,168],[208,168,168],[208,164,164],[208,164,164],[208,160,160],[208,160,160],[208,160,160],[208,156,156],[212,156,156],[212,152,152],[212,152,152],[212,152,152],[212,148,148],[212,148,148],[212,144,144],[212,144,144],[212,144,144],[212,140,140],[216,140,140],[216,136,136],[216,136,136],[216,136,136],[216,132,132],[216,132,132],[216,132,132],[216,128,128],[216,128,128],[216,124,124],[220,124,124],[220,124,124],[220,120,120],[220,120,120],[220,116,116],[220,116,116],[220,116,116],[220,112,112],[220,112,112],[220,108,108],[224,108,108],[224,108,108],[224,104,104],[224,104,104],[224,100,100],[224,100,100],[224,100,100],[224,96,96],[224,96,96],[228,96,96],[228,92,92],[228,92,92],[228,88,88],[228,88,88],[228,88,88],[228,84,84],[228,84,84],[228,80,80],[228,80,80],[232,80,80],[232,76,76],[232,76,76],[232,72,72],[232,72,72],[232,72,72],[232,68,68],[232,68,68],[232,68,68],[232,64,64],[236,64,64],[236,60,60],[236,60,60],[236,60,60],[236,56,56],[236,56,56],[236,52,52],[236,52,52],[236,52,52],[236,48,48],[240,48,48],[240,44,44],[240,44,44],[240,44,44],[240,40,40],[240,40,40],[240,36,36],[240,36,36],[240,36,36],[240,32,32],[244,32,32],[244,32,32],[244,28,28],[244,28,28],[244,24,24],[244,24,24],[244,24,24],[244,20,20],[244,20,20],[244,16,16],[248,16,16],[248,16,16],[248,12,12],[248,12,12],[248,8,8],[248,8,8],[248,8,8],[248,4,4],[248,4,4],[252,0,0],[252,0,0]]},{path:"/luts/",name:"physics.lut",rgb:[[47,2,119],[46,2,120],[45,2,122],[44,2,123],[42,2,124],[41,2,125],[40,2,126],[39,2,127],[37,2,128],[36,1,129],[35,1,131],[33,1,132],[32,1,133],[30,1,134],[29,1,135],[27,1,136],[26,1,137],[24,1,138],[23,1,139],[21,1,141],[19,1,142],[18,1,143],[16,1,144],[14,1,145],[12,1,146],[10,1,147],[9,0,148],[7,0,149],[5,0,151],[3,0,152],[1,0,153],[0,1,154],[0,3,155],[0,5,156],[0,7,157],[0,9,158],[0,11,160],[0,13,161],[0,15,162],[0,18,163],[1,20,164],[2,23,165],[3,26,166],[3,28,167],[4,31,168],[5,33,169],[6,36,169],[7,39,170],[8,41,171],[8,44,172],[9,47,173],[10,49,174],[11,52,175],[12,55,176],[13,58,177],[14,60,178],[15,63,179],[16,66,180],[16,69,181],[17,71,182],[18,74,183],[19,77,184],[20,80,185],[21,82,186],[22,85,187],[23,88,188],[24,91,189],[25,94,190],[26,96,191],[26,99,191],[26,102,191],[26,105,191],[26,108,192],[26,111,192],[26,114,192],[26,116,192],[26,119,192],[26,122,193],[26,125,193],[26,128,193],[26,131,193],[26,134,193],[26,137,194],[26,140,194],[26,143,194],[26,146,194],[26,149,194],[26,152,195],[26,155,195],[25,158,195],[25,161,195],[25,164,195],[25,167,196],[25,170,196],[25,173,196],[25,176,196],[25,179,196],[25,182,197],[25,185,197],[25,188,197],[25,191,197],[25,194,197],[25,198,198],[25,198,195],[25,198,192],[25,198,190],[25,198,187],[25,199,184],[25,199,181],[25,199,178],[25,199,176],[25,199,173],[25,200,170],[24,200,167],[24,200,165],[24,200,162],[24,200,159],[24,201,156],[24,201,153],[24,201,150],[24,201,148],[24,202,143],[24,202,138],[24,202,133],[24,203,129],[24,203,124],[24,203,119],[24,204,114],[24,204,109],[24,204,104],[23,205,99],[23,205,94],[23,205,89],[23,206,84],[23,206,79],[23,206,74],[23,207,69],[23,207,64],[23,207,59],[23,208,54],[23,208,49],[23,208,44],[23,209,39],[22,209,33],[22,209,28],[22,210,23],[27,210,22],[32,210,22],[37,211,22],[42,211,22],[48,211,22],[53,212,22],[58,212,22],[63,212,22],[69,213,22],[74,213,21],[79,213,21],[85,214,21],[90,214,21],[96,214,21],[101,215,21],[107,215,21],[112,215,21],[118,216,21],[123,216,21],[129,216,21],[134,217,21],[140,217,20],[145,217,20],[148,217,20],[151,217,20],[153,218,20],[156,218,20],[159,218,20],[161,218,20],[164,218,20],[166,218,20],[169,219,20],[172,219,20],[174,219,20],[177,219,20],[180,219,20],[182,219,20],[185,219,20],[188,220,20],[190,220,20],[193,220,20],[196,220,20],[198,220,19],[201,220,19],[204,221,19],[206,221,19],[210,221,19],[213,221,19],[216,221,19],[220,221,19],[222,220,19],[222,217,19],[222,214,19],[222,212,19],[222,209,19],[223,206,19],[223,203,19],[223,200,19],[223,197,19],[223,194,19],[223,191,19],[224,188,19],[224,185,18],[224,182,18],[224,178,18],[224,175,18],[225,172,18],[225,169,18],[225,166,18],[225,163,18],[225,160,18],[225,157,18],[226,154,18],[226,151,18],[226,148,18],[226,145,18],[226,141,18],[227,138,18],[227,135,18],[227,132,18],[227,129,17],[227,126,17],[228,122,17],[228,119,17],[228,116,17],[228,113,17],[228,110,17],[228,106,17],[229,103,17],[229,100,17],[229,97,17],[229,94,17],[229,90,17],[230,87,17],[230,84,17],[230,80,17],[230,77,17],[230,74,17],[230,71,16],[231,67,16],[231,64,16],[231,61,16],[231,57,16],[231,54,16],[232,51,16],[232,47,16],[232,44,16],[232,41,16],[232,37,16],[233,34,16]]},{path:"/luts/matplotlib/",name:"plasma.lut",rgb:[[12,7,134],[16,7,135],[19,6,137],[21,6,138],[24,6,139],[27,6,140],[29,6,141],[31,5,142],[33,5,143],[35,5,144],[37,5,145],[39,5,146],[41,5,147],[43,5,148],[45,4,148],[47,4,149],[49,4,150],[51,4,151],[52,4,152],[54,4,152],[56,4,153],[58,4,154],[59,3,154],[61,3,155],[63,3,156],[64,3,156],[66,3,157],[68,3,158],[69,3,158],[71,2,159],[73,2,159],[74,2,160],[76,2,161],[78,2,161],[79,2,162],[81,1,162],[82,1,163],[84,1,163],[86,1,163],[87,1,164],[89,1,164],[90,0,165],[92,0,165],[94,0,165],[95,0,166],[97,0,166],[98,0,166],[100,0,167],[101,0,167],[103,0,167],[104,0,167],[106,0,167],[108,0,168],[109,0,168],[111,0,168],[112,0,168],[114,0,168],[115,0,168],[117,0,168],[118,1,168],[120,1,168],[121,1,168],[123,2,168],[124,2,167],[126,3,167],[127,3,167],[129,4,167],[130,4,167],[132,5,166],[133,6,166],[134,7,166],[136,7,165],[137,8,165],[139,9,164],[140,10,164],[142,12,164],[143,13,163],[144,14,163],[146,15,162],[147,16,161],[149,17,161],[150,18,160],[151,19,160],[153,20,159],[154,21,158],[155,23,158],[157,24,157],[158,25,156],[159,26,155],[160,27,155],[162,28,154],[163,29,153],[164,30,152],[165,31,151],[167,33,151],[168,34,150],[169,35,149],[170,36,148],[172,37,147],[173,38,146],[174,39,145],[175,40,144],[176,42,143],[177,43,143],[178,44,142],[180,45,141],[181,46,140],[182,47,139],[183,48,138],[184,50,137],[185,51,136],[186,52,135],[187,53,134],[188,54,133],[189,55,132],[190,56,131],[191,57,130],[192,59,129],[193,60,128],[194,61,128],[195,62,127],[196,63,126],[197,64,125],[198,65,124],[199,66,123],[200,68,122],[201,69,121],[202,70,120],[203,71,119],[204,72,118],[205,73,117],[206,74,117],[207,75,116],[208,77,115],[209,78,114],[209,79,113],[210,80,112],[211,81,111],[212,82,110],[213,83,109],[214,85,109],[215,86,108],[215,87,107],[216,88,106],[217,89,105],[218,90,104],[219,91,103],[220,93,102],[220,94,102],[221,95,101],[222,96,100],[223,97,99],[223,98,98],[224,100,97],[225,101,96],[226,102,96],[227,103,95],[227,104,94],[228,106,93],[229,107,92],[229,108,91],[230,109,90],[231,110,90],[232,112,89],[232,113,88],[233,114,87],[234,115,86],[234,116,85],[235,118,84],[236,119,84],[236,120,83],[237,121,82],[237,123,81],[238,124,80],[239,125,79],[239,126,78],[240,128,77],[240,129,77],[241,130,76],[242,132,75],[242,133,74],[243,134,73],[243,135,72],[244,137,71],[244,138,71],[245,139,70],[245,141,69],[246,142,68],[246,143,67],[246,145,66],[247,146,65],[247,147,65],[248,149,64],[248,150,63],[248,152,62],[249,153,61],[249,154,60],[250,156,59],[250,157,58],[250,159,58],[250,160,57],[251,162,56],[251,163,55],[251,164,54],[252,166,53],[252,167,53],[252,169,52],[252,170,51],[252,172,50],[252,173,49],[253,175,49],[253,176,48],[253,178,47],[253,179,46],[253,181,45],[253,182,45],[253,184,44],[253,185,43],[253,187,43],[253,188,42],[253,190,41],[253,192,41],[253,193,40],[253,195,40],[253,196,39],[253,198,38],[252,199,38],[252,201,38],[252,203,37],[252,204,37],[252,206,37],[251,208,36],[251,209,36],[251,211,36],[250,213,36],[250,214,36],[250,216,36],[249,217,36],[249,219,36],[248,221,36],[248,223,36],[247,224,36],[247,226,37],[246,228,37],[246,229,37],[245,231,38],[245,233,38],[244,234,38],[243,236,38],[243,238,38],[242,240,38],[242,241,38],[241,243,38],[240,245,37],[240,246,35],[239,248,33]]},{path:"/luts/janelia/",name:"pup_br.lut",rgb:[[213,0,246],[213,0,246],[213,0,246],[213,0,246],[213,0,246],[213,0,246],[213,0,246],[213,0,246],[227,0,232],[227,0,232],[227,0,232],[227,0,232],[227,0,232],[227,0,232],[227,0,232],[227,0,232],[233,0,208],[233,0,208],[233,0,208],[233,0,208],[233,0,208],[233,0,208],[233,0,208],[233,0,208],[238,0,183],[238,0,183],[238,0,183],[238,0,183],[238,0,183],[238,0,183],[238,0,183],[238,0,183],[241,0,162],[241,0,162],[241,0,162],[241,0,162],[241,0,162],[241,0,162],[241,0,162],[241,0,162],[243,0,141],[243,0,141],[243,0,141],[243,0,141],[243,0,141],[243,0,141],[243,0,141],[243,0,141],[246,0,119],[246,0,119],[246,0,119],[246,0,119],[246,0,119],[246,0,119],[246,0,119],[246,0,119],[247,0,96],[247,0,96],[247,0,96],[247,0,96],[247,0,96],[247,0,96],[247,0,96],[247,0,96],[249,0,74],[249,0,74],[249,0,74],[249,0,74],[249,0,74],[249,0,74],[249,0,74],[249,0,74],[250,0,50],[250,0,50],[250,0,50],[250,0,50],[250,0,50],[250,0,50],[250,0,50],[250,0,50],[250,0,20],[250,0,20],[250,0,20],[250,0,20],[250,0,20],[250,0,20],[250,0,20],[250,0,20],[237,48,0],[237,48,0],[237,48,0],[237,48,0],[237,48,0],[237,48,0],[237,48,0],[237,48,0],[221,73,0],[221,73,0],[221,73,0],[221,73,0],[221,73,0],[221,73,0],[221,73,0],[221,73,0],[207,87,0],[207,87,0],[207,87,0],[207,87,0],[207,87,0],[207,87,0],[207,87,0],[207,87,0],[192,99,0],[192,99,0],[192,99,0],[192,99,0],[192,99,0],[192,99,0],[192,99,0],[192,99,0],[172,111,0],[172,111,0],[172,111,0],[172,111,0],[172,111,0],[172,111,0],[172,111,0],[172,111,0],[156,119,0],[156,119,0],[156,119,0],[156,119,0],[156,119,0],[156,119,0],[156,119,0],[156,119,0],[135,127,0],[135,127,0],[135,127,0],[135,127,0],[135,127,0],[135,127,0],[135,127,0],[135,127,0],[113,133,0],[113,133,0],[113,133,0],[113,133,0],[113,133,0],[113,133,0],[113,133,0],[113,133,0],[90,138,0],[90,138,0],[90,138,0],[90,138,0],[90,138,0],[90,138,0],[90,138,0],[90,138,0],[56,142,0],[56,142,0],[56,142,0],[56,142,0],[56,142,0],[56,142,0],[56,142,0],[56,142,0],[0,150,5],[0,150,5],[0,150,5],[0,150,5],[0,150,5],[0,150,5],[0,150,5],[0,150,5],[0,149,50],[0,149,50],[0,149,50],[0,149,50],[0,149,50],[0,149,50],[0,149,50],[0,149,50],[0,149,73],[0,149,73],[0,149,73],[0,149,73],[0,149,73],[0,149,73],[0,149,73],[0,149,73],[0,148,94],[0,148,94],[0,148,94],[0,148,94],[0,148,94],[0,148,94],[0,148,94],[0,148,94],[0,147,114],[0,147,114],[0,147,114],[0,147,114],[0,147,114],[0,147,114],[0,147,114],[0,147,114],[0,145,139],[0,145,139],[0,145,139],[0,145,139],[0,145,139],[0,145,139],[0,145,139],[0,145,139],[0,144,153],[0,144,153],[0,144,153],[0,144,153],[0,144,153],[0,144,153],[0,144,153],[0,144,153],[0,141,172],[0,141,172],[0,141,172],[0,141,172],[0,141,172],[0,141,172],[0,141,172],[0,141,172],[0,137,191],[0,137,191],[0,137,191],[0,137,191],[0,137,191],[0,137,191],[0,137,191],[0,137,191],[0,134,205],[0,134,205],[0,134,205],[0,134,205],[0,134,205],[0,134,205],[0,134,205],[0,134,205],[0,124,239],[0,124,239],[0,124,239],[0,124,239],[0,124,239],[0,124,239],[0,124,239],[0,0,0]]},{path:"/luts/janelia/",name:"pup_nr.lut",rgb:[[255,72,0],[255,72,0],[255,72,0],[255,72,0],[255,72,0],[255,72,0],[255,72,0],[255,72,0],[255,72,0],[255,72,0],[255,72,0],[255,72,0],[244,87,0],[244,87,0],[244,87,0],[244,87,0],[244,87,0],[244,87,0],[244,87,0],[244,87,0],[244,87,0],[244,87,0],[244,87,0],[244,87,0],[234,97,0],[234,97,0],[234,97,0],[234,97,0],[234,97,0],[234,97,0],[234,97,0],[234,97,0],[234,97,0],[234,97,0],[234,97,0],[234,97,0],[223,106,0],[223,106,0],[223,106,0],[223,106,0],[223,106,0],[223,106,0],[223,106,0],[223,106,0],[223,106,0],[223,106,0],[223,106,0],[223,106,0],[211,115,0],[211,115,0],[211,115,0],[211,115,0],[211,115,0],[211,115,0],[211,115,0],[211,115,0],[211,115,0],[211,115,0],[211,115,0],[211,115,0],[199,122,0],[199,122,0],[199,122,0],[199,122,0],[199,122,0],[199,122,0],[199,122,0],[199,122,0],[199,122,0],[199,122,0],[199,122,0],[199,122,0],[187,129,0],[187,129,0],[187,129,0],[187,129,0],[187,129,0],[187,129,0],[187,129,0],[187,129,0],[187,129,0],[187,129,0],[187,129,0],[187,129,0],[174,134,0],[174,134,0],[174,134,0],[174,134,0],[174,134,0],[174,134,0],[174,134,0],[174,134,0],[174,134,0],[174,134,0],[174,134,0],[174,134,0],[161,140,0],[161,140,0],[161,140,0],[161,140,0],[161,140,0],[161,140,0],[161,140,0],[161,140,0],[161,140,0],[161,140,0],[161,140,0],[161,140,0],[148,144,0],[148,144,0],[148,144,0],[148,144,0],[148,144,0],[148,144,0],[148,144,0],[148,144,0],[148,144,0],[148,144,0],[148,144,0],[148,144,0],[130,149,0],[130,149,0],[130,149,0],[130,149,0],[130,149,0],[130,149,0],[130,149,0],[130,149,0],[130,149,0],[130,149,0],[130,149,0],[130,149,0],[112,153,0],[112,153,0],[112,153,0],[112,153,0],[112,153,0],[112,153,0],[112,153,0],[112,153,0],[112,153,0],[112,153,0],[112,153,0],[112,153,0],[93,156,0],[93,156,0],[93,156,0],[93,156,0],[93,156,0],[93,156,0],[93,156,0],[93,156,0],[93,156,0],[93,156,0],[93,156,0],[93,156,0],[69,159,0],[69,159,0],[69,159,0],[69,159,0],[69,159,0],[69,159,0],[69,159,0],[69,159,0],[69,159,0],[69,159,0],[69,159,0],[69,159,0],[0,167,20],[0,167,20],[0,167,20],[0,167,20],[0,167,20],[0,167,20],[0,167,20],[0,167,20],[0,167,20],[0,167,20],[0,167,20],[0,167,20],[0,167,52],[0,167,52],[0,167,52],[0,167,52],[0,167,52],[0,167,52],[0,167,52],[0,167,52],[0,167,52],[0,167,52],[0,167,52],[0,167,52],[0,166,71],[0,166,71],[0,166,71],[0,166,71],[0,166,71],[0,166,71],[0,166,71],[0,166,71],[0,166,71],[0,166,71],[0,166,71],[0,166,71],[0,165,88],[0,165,88],[0,165,88],[0,165,88],[0,165,88],[0,165,88],[0,165,88],[0,165,88],[0,165,88],[0,165,88],[0,165,88],[0,165,88],[0,165,104],[0,165,104],[0,165,104],[0,165,104],[0,165,104],[0,165,104],[0,165,104],[0,165,104],[0,165,104],[0,165,104],[0,165,104],[0,165,104],[0,164,119],[0,164,119],[0,164,119],[0,164,119],[0,164,119],[0,164,119],[0,164,119],[0,164,119],[0,164,119],[0,164,119],[0,164,119],[0,164,119],[0,163,130],[0,163,130],[0,163,130],[0,163,130],[0,163,130],[0,163,130],[0,163,130],[0,163,130],[0,163,130],[0,163,130],[0,163,130],[0,163,130],[0,163,130],[0,163,130],[0,163,130],[0,0,0]]},{path:"/luts/wcif/",name:"rainbow_rgb.lut",rgb:[[0,0,0],[0,0,5],[0,0,10],[0,1,15],[0,1,20],[0,1,25],[1,1,30],[1,1,35],[1,2,40],[1,2,45],[1,2,50],[1,2,55],[1,2,60],[1,3,65],[1,3,70],[2,3,75],[2,3,80],[2,3,85],[2,4,90],[2,4,95],[2,4,100],[2,4,105],[2,4,110],[2,5,115],[2,5,120],[3,5,125],[3,5,129],[3,5,134],[3,6,139],[3,6,144],[3,6,149],[3,6,154],[3,6,159],[3,7,164],[3,7,169],[4,7,174],[4,7,179],[4,7,184],[4,8,189],[4,8,194],[4,8,199],[4,8,204],[4,8,209],[4,9,214],[4,9,219],[4,9,224],[5,9,229],[5,9,234],[5,10,239],[5,10,244],[5,10,249],[5,15,244],[5,20,239],[5,24,235],[5,29,230],[5,34,225],[6,39,220],[6,44,215],[6,48,211],[6,53,206],[6,58,201],[6,63,196],[6,68,191],[6,72,187],[6,77,182],[6,82,177],[7,87,172],[7,92,167],[7,96,163],[7,101,158],[7,106,153],[7,111,148],[7,116,143],[7,120,139],[7,125,134],[7,129,129],[8,134,125],[8,139,120],[8,143,116],[8,148,111],[8,153,106],[8,158,101],[8,163,96],[8,167,92],[8,172,87],[8,177,82],[9,182,77],[9,187,72],[9,191,68],[9,196,63],[9,201,58],[9,206,53],[9,211,48],[9,215,44],[9,220,39],[9,225,34],[10,230,29],[10,235,24],[10,239,20],[10,244,15],[10,249,10],[12,247,10],[15,244,10],[17,242,10],[20,239,10],[22,237,10],[24,235,10],[27,232,10],[29,230,10],[32,227,10],[34,225,10],[36,223,10],[39,220,10],[41,218,10],[44,215,10],[46,213,10],[48,211,10],[51,208,10],[53,206,10],[56,203,10],[58,201,10],[60,199,10],[63,196,10],[65,194,10],[68,191,10],[70,189,10],[72,187,10],[75,184,10],[77,182,10],[77,182,10],[80,179,10],[82,177,10],[84,175,10],[87,172,10],[89,170,10],[92,167,10],[94,165,10],[96,163,10],[99,160,10],[101,158,10],[104,155,10],[106,153,10],[108,151,10],[111,148,10],[113,146,10],[116,143,10],[118,141,10],[120,139,10],[123,136,10],[125,134,10],[128,131,10],[129,129,10],[131,128,10],[134,125,10],[136,123,10],[139,120,10],[141,118,10],[143,116,10],[146,113,10],[148,111,10],[151,108,10],[153,106,10],[155,104,10],[158,101,10],[160,99,10],[163,96,10],[165,94,10],[167,92,10],[170,89,10],[172,87,10],[175,84,10],[177,82,10],[179,80,10],[182,77,10],[184,75,10],[187,72,10],[189,70,10],[191,68,10],[194,65,10],[196,63,10],[199,60,10],[201,58,10],[203,56,10],[206,53,10],[208,51,10],[211,48,10],[213,46,10],[215,44,10],[218,41,10],[220,39,10],[223,36,10],[225,34,10],[227,32,10],[230,29,10],[232,27,10],[235,24,10],[237,22,10],[239,20,10],[242,17,10],[244,15,10],[247,12,10],[249,10,10],[247,10,13],[245,10,15],[244,10,18],[242,10,20],[240,10,23],[238,10,25],[236,10,28],[234,10,30],[233,10,33],[231,10,35],[229,10,38],[227,10,41],[225,10,43],[224,10,46],[222,10,48],[220,10,51],[218,10,53],[216,10,56],[214,10,58],[213,10,61],[211,10,63],[209,10,66],[207,10,69],[205,10,71],[204,10,74],[202,10,76],[200,10,79],[198,10,81],[196,10,84],[194,10,86],[193,16,89],[191,21,91],[189,27,94],[187,32,97],[185,38,99],[184,44,102],[182,49,104],[180,55,107],[178,60,109],[176,66,112],[174,72,114],[173,77,117],[171,83,119],[169,88,122],[167,94,125],[165,100,127],[164,105,129],[162,111,131],[160,116,134],[158,122,136],[156,128,139],[154,132,141],[153,138,144],[151,143,146]]},{path:"/luts/",name:"red-green.lut",rgb:[[0,0,0],[2,0,0],[4,0,0],[6,0,0],[8,0,0],[10,0,0],[12,0,0],[14,0,0],[16,0,0],[18,0,0],[20,0,0],[22,0,0],[24,0,0],[26,0,0],[28,0,0],[30,0,0],[32,0,0],[34,0,0],[36,0,0],[38,0,0],[40,0,0],[42,0,0],[44,0,0],[46,0,0],[48,0,0],[50,0,0],[52,0,0],[54,0,0],[56,0,0],[58,0,0],[60,0,0],[62,0,0],[64,0,0],[66,0,0],[68,0,0],[70,0,0],[72,0,0],[74,0,0],[76,0,0],[78,0,0],[80,0,0],[82,0,0],[84,0,0],[86,0,0],[88,0,0],[90,0,0],[92,0,0],[94,0,0],[96,0,0],[98,0,0],[100,0,0],[102,0,0],[104,0,0],[106,0,0],[108,0,0],[110,0,0],[112,0,0],[114,0,0],[116,0,0],[118,0,0],[120,0,0],[122,0,0],[124,0,0],[126,0,0],[128,0,0],[130,0,0],[132,0,0],[134,0,0],[136,0,0],[138,0,0],[140,0,0],[142,0,0],[144,0,0],[146,0,0],[148,0,0],[150,0,0],[152,0,0],[154,0,0],[156,0,0],[158,0,0],[160,0,0],[162,0,0],[164,0,0],[166,0,0],[168,0,0],[170,0,0],[172,0,0],[174,0,0],[176,0,0],[178,0,0],[180,0,0],[182,0,0],[184,0,0],[186,0,0],[188,0,0],[190,0,0],[192,0,0],[194,0,0],[196,0,0],[198,0,0],[200,0,0],[202,0,0],[204,0,0],[206,0,0],[208,0,0],[210,0,0],[212,0,0],[214,0,0],[216,0,0],[218,0,0],[220,0,0],[222,0,0],[224,0,0],[226,0,0],[228,0,0],[230,0,0],[232,0,0],[234,0,0],[236,0,0],[238,0,0],[240,0,0],[242,0,0],[244,0,0],[246,0,0],[248,0,0],[250,0,0],[252,0,0],[254,0,0],[0,0,0],[0,2,0],[0,4,0],[0,6,0],[0,8,0],[0,10,0],[0,12,0],[0,14,0],[0,16,0],[0,18,0],[0,20,0],[0,22,0],[0,24,0],[0,26,0],[0,28,0],[0,30,0],[0,32,0],[0,34,0],[0,36,0],[0,38,0],[0,40,0],[0,42,0],[0,44,0],[0,46,0],[0,48,0],[0,50,0],[0,52,0],[0,54,0],[0,56,0],[0,58,0],[0,60,0],[0,62,0],[0,64,0],[0,66,0],[0,68,0],[0,70,0],[0,72,0],[0,74,0],[0,76,0],[0,78,0],[0,80,0],[0,82,0],[0,84,0],[0,86,0],[0,88,0],[0,90,0],[0,92,0],[0,94,0],[0,96,0],[0,98,0],[0,100,0],[0,102,0],[0,104,0],[0,106,0],[0,108,0],[0,110,0],[0,112,0],[0,114,0],[0,116,0],[0,118,0],[0,120,0],[0,122,0],[0,124,0],[0,126,0],[0,128,0],[0,130,0],[0,132,0],[0,134,0],[0,136,0],[0,138,0],[0,140,0],[0,142,0],[0,144,0],[0,146,0],[0,148,0],[0,150,0],[0,152,0],[0,154,0],[0,156,0],[0,158,0],[0,160,0],[0,162,0],[0,164,0],[0,166,0],[0,168,0],[0,170,0],[0,172,0],[0,174,0],[0,176,0],[0,178,0],[0,180,0],[0,182,0],[0,184,0],[0,186,0],[0,188,0],[0,190,0],[0,192,0],[0,194,0],[0,196,0],[0,198,0],[0,200,0],[0,202,0],[0,204,0],[0,206,0],[0,208,0],[0,210,0],[0,212,0],[0,214,0],[0,216,0],[0,218,0],[0,220,0],[0,222,0],[0,224,0],[0,226,0],[0,228,0],[0,230,0],[0,232,0],[0,234,0],[0,236,0],[0,238,0],[0,240,0],[0,242,0],[0,244,0],[0,246,0],[0,248,0],[0,250,0],[0,252,0],[0,254,0]]},{path:"/luts/wcif/",name:"red_hot.lut",rgb:[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[4,0,0],[7,0,0],[10,0,0],[13,0,0],[16,0,0],[20,0,0],[23,0,0],[27,0,0],[30,0,0],[33,0,0],[36,0,0],[39,0,0],[42,0,0],[45,0,0],[48,0,0],[52,0,0],[55,0,0],[58,0,0],[61,0,0],[65,0,0],[68,0,0],[71,0,0],[74,0,0],[78,0,0],[81,0,0],[84,0,0],[87,0,0],[90,0,0],[93,0,0],[96,0,0],[99,0,0],[103,0,0],[106,0,0],[110,0,0],[113,0,0],[117,0,0],[120,0,0],[123,0,0],[126,0,0],[130,0,0],[133,0,0],[136,0,0],[139,0,0],[142,0,0],[145,0,0],[148,0,0],[151,0,0],[155,0,0],[158,0,0],[161,0,0],[164,0,0],[168,0,0],[171,0,0],[174,0,0],[177,0,0],[181,0,0],[184,0,0],[187,0,0],[190,0,0],[193,0,0],[196,0,0],[200,0,0],[203,0,0],[207,0,0],[210,0,0],[213,0,0],[216,0,0],[220,0,0],[223,0,0],[226,0,0],[229,0,0],[233,0,0],[236,0,0],[239,0,0],[242,0,0],[245,0,0],[247,0,0],[250,1,0],[252,2,0],[255,3,0],[255,6,0],[255,9,0],[255,12,0],[255,16,0],[255,19,0],[255,22,0],[255,25,0],[255,29,0],[255,32,0],[255,35,0],[255,38,0],[255,42,0],[255,45,0],[255,48,0],[255,51,0],[255,55,0],[255,58,0],[255,61,0],[255,64,0],[255,68,0],[255,71,0],[255,74,0],[255,77,0],[255,81,0],[255,84,0],[255,87,0],[255,90,0],[255,94,0],[255,97,0],[255,100,0],[255,103,0],[255,106,0],[255,109,0],[255,112,0],[255,115,0],[255,119,0],[255,122,0],[255,126,0],[255,129,0],[255,133,0],[255,136,0],[255,139,0],[255,142,0],[255,145,0],[255,148,0],[255,151,0],[255,154,0],[255,158,0],[255,161,0],[255,164,0],[255,167,0],[255,171,0],[255,174,0],[255,177,0],[255,180,0],[255,184,0],[255,187,0],[255,190,0],[255,193,0],[255,197,0],[255,200,0],[255,203,0],[255,206,0],[255,209,0],[255,212,0],[255,216,0],[255,219,0],[255,223,0],[255,226,0],[255,229,0],[255,232,0],[255,236,0],[255,239,0],[255,242,0],[255,245,0],[255,249,0],[255,250,1],[255,252,3],[255,253,4],[255,255,6],[255,255,9],[255,255,12],[255,255,15],[255,255,19],[255,255,22],[255,255,25],[255,255,28],[255,255,32],[255,255,35],[255,255,38],[255,255,41],[255,255,45],[255,255,48],[255,255,51],[255,255,54],[255,255,58],[255,255,61],[255,255,64],[255,255,67],[255,255,71],[255,255,74],[255,255,77],[255,255,80],[255,255,84],[255,255,87],[255,255,90],[255,255,93],[255,255,97],[255,255,100],[255,255,103],[255,255,106],[255,255,110],[255,255,113],[255,255,116],[255,255,119],[255,255,122],[255,255,125],[255,255,128],[255,255,131],[255,255,135],[255,255,138],[255,255,142],[255,255,145],[255,255,149],[255,255,152],[255,255,155],[255,255,158],[255,255,161],[255,255,164],[255,255,167],[255,255,170],[255,255,174],[255,255,177],[255,255,180],[255,255,183],[255,255,187],[255,255,190],[255,255,193],[255,255,196],[255,255,200],[255,255,203],[255,255,206],[255,255,209],[255,255,213],[255,255,216],[255,255,219],[255,255,222],[255,255,225],[255,255,228],[255,255,232],[255,255,235],[255,255,239],[255,255,242],[255,255,245],[255,255,248],[255,255,252],[255,255,252],[255,255,253],[255,255,254],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255]]},{path:"/luts/seaborn/",name:"rocket.lut",rgb:[[2,4,25],[3,5,26],[4,5,27],[5,6,28],[7,7,29],[8,7,30],[9,8,31],[11,9,32],[12,10,33],[14,10,34],[15,11,35],[17,12,36],[18,12,37],[20,13,38],[21,14,39],[23,14,40],[24,15,41],[25,16,42],[27,16,43],[28,17,44],[30,17,45],[31,18,46],[33,18,47],[34,19,48],[36,19,49],[37,20,50],[38,20,51],[40,21,52],[41,21,53],[43,22,55],[44,22,56],[46,23,57],[47,23,58],[49,23,59],[50,24,60],[52,24,61],[53,24,62],[55,25,63],[56,25,63],[58,25,64],[59,26,65],[61,26,66],[62,26,67],[64,27,68],[65,27,69],[67,27,70],[68,27,70],[70,28,71],[72,28,72],[73,28,73],[75,28,74],[76,29,74],[78,29,75],[79,29,76],[81,29,77],[83,29,77],[84,29,78],[86,30,79],[87,30,79],[89,30,80],[91,30,80],[92,30,81],[94,30,82],[95,30,82],[97,30,83],[99,30,83],[100,31,84],[102,31,84],[104,31,85],[105,31,85],[107,31,86],[108,31,86],[110,31,86],[112,31,87],[113,31,87],[115,31,88],[117,31,88],[118,31,88],[120,30,89],[122,30,89],[123,30,89],[125,30,89],[127,30,90],[129,30,90],[130,30,90],[132,30,90],[134,30,90],[135,29,91],[137,29,91],[139,29,91],[140,29,91],[142,29,91],[144,28,91],[146,28,91],[147,28,91],[149,27,91],[151,27,91],[153,27,91],[154,27,91],[156,26,91],[158,26,91],[159,26,91],[161,25,91],[163,25,91],[165,25,90],[166,24,90],[168,24,90],[170,24,90],[171,23,90],[173,23,89],[175,23,89],[177,23,89],[178,22,88],[180,22,88],[182,22,87],[183,22,87],[185,22,86],[186,22,86],[188,22,85],[190,22,85],[191,22,84],[193,22,84],[194,23,83],[196,23,82],[198,24,82],[199,24,81],[200,25,80],[202,26,80],[203,26,79],[205,27,78],[206,28,78],[208,29,77],[209,30,76],[210,32,75],[212,33,75],[213,34,74],[214,35,73],[215,37,72],[217,38,72],[218,40,71],[219,41,70],[220,43,70],[221,44,69],[222,46,68],[224,47,67],[225,49,67],[226,50,66],[227,52,65],[228,54,65],[229,55,64],[230,57,64],[230,59,63],[231,61,63],[232,62,62],[233,64,62],[234,66,62],[234,68,62],[235,70,62],[236,72,62],[236,74,62],[237,76,62],[237,78,62],[238,80,62],[238,82,62],[239,84,63],[239,86,63],[240,88,64],[240,90,65],[240,92,65],[241,94,66],[241,96,67],[241,98,68],[241,99,69],[242,101,70],[242,103,71],[242,105,72],[242,107,73],[243,109,74],[243,111,76],[243,113,77],[243,115,78],[244,116,79],[244,118,81],[244,120,82],[244,122,84],[244,124,85],[244,125,87],[244,127,88],[245,129,89],[245,131,91],[245,132,92],[245,134,94],[245,136,95],[245,138,97],[245,139,99],[245,141,100],[245,143,102],[246,145,103],[246,146,105],[246,148,107],[246,150,108],[246,151,110],[246,153,112],[246,155,113],[246,156,115],[246,158,117],[246,160,119],[246,161,120],[246,163,122],[246,165,124],[246,166,126],[246,168,128],[246,169,129],[246,171,131],[246,173,133],[246,174,135],[246,176,137],[247,178,139],[247,179,141],[247,181,143],[247,182,145],[247,184,147],[247,185,149],[247,187,151],[247,189,153],[247,190,155],[247,192,157],[247,193,160],[247,195,162],[247,196,164],[247,198,166],[247,199,168],[247,201,170],[247,202,173],[248,204,175],[248,205,177],[248,207,179],[248,208,182],[248,210,184],[248,211,186],[248,213,188],[248,214,190],[249,216,193],[249,217,195],[249,219,197],[249,220,199],[249,222,201],[249,223,204],[249,225,206],[250,226,208],[250,228,210],[250,229,212],[250,231,214],[250,232,217],[251,234,219],[251,235,221]]},{path:"/luts/ncsa_paledit/",name:"royal.lut",rgb:[[1,1,7],[1,1,7],[1,1,13],[1,1,18],[1,1,24],[1,1,30],[1,1,36],[1,1,42],[1,1,47],[1,1,53],[1,1,59],[1,1,64],[1,1,70],[1,1,75],[1,1,81],[1,1,85],[1,1,89],[1,1,93],[1,1,98],[1,1,104],[1,1,109],[1,1,115],[1,1,121],[1,1,126],[1,1,132],[1,1,137],[1,1,143],[1,1,149],[1,1,154],[1,1,160],[1,1,165],[1,1,169],[1,1,174],[1,7,177],[1,13,182],[1,18,188],[1,24,192],[1,30,198],[1,36,204],[1,42,209],[1,47,215],[1,53,220],[1,59,226],[1,64,232],[1,70,237],[1,75,243],[1,81,248],[1,85,254],[1,89,254],[1,93,254],[1,98,254],[1,104,254],[1,109,254],[1,115,254],[1,121,254],[1,126,254],[1,132,254],[1,137,254],[1,143,254],[1,149,254],[1,154,254],[1,160,254],[1,165,254],[1,169,254],[1,174,254],[1,177,254],[1,182,254],[1,188,254],[1,192,254],[1,198,254],[1,204,254],[1,209,254],[1,215,254],[1,220,254],[1,226,254],[1,232,254],[1,237,254],[1,243,254],[1,248,254],[1,254,254],[1,254,254],[1,254,254],[1,254,254],[1,254,254],[1,254,254],[1,254,254],[1,254,254],[1,254,254],[1,254,254],[1,254,254],[1,254,254],[1,254,254],[1,254,254],[1,254,254],[1,254,254],[1,254,254],[1,254,238],[10,254,222],[18,254,206],[27,254,191],[36,254,175],[45,254,159],[53,254,143],[62,254,127],[70,254,111],[79,254,95],[87,254,79],[96,254,64],[105,254,48],[114,254,32],[122,254,16],[128,254,1],[134,254,1],[139,252,1],[148,250,1],[156,248,1],[164,245,1],[172,243,1],[181,241,1],[189,239,1],[196,237,1],[204,235,1],[213,233,1],[221,231,1],[229,228,1],[237,226,1],[246,224,1],[254,222,1],[254,222,1],[254,219,1],[254,217,1],[254,214,1],[254,211,1],[254,209,1],[254,206,1],[254,203,1],[254,201,1],[254,198,1],[254,195,1],[254,193,1],[254,191,1],[254,188,1],[254,186,1],[254,184,1],[254,182,1],[254,180,1],[254,176,1],[254,173,1],[254,169,1],[254,166,1],[254,162,1],[254,159,1],[254,155,1],[254,152,1],[254,148,1],[254,145,1],[254,141,1],[254,138,1],[254,134,1],[254,129,1],[254,131,1],[254,127,1],[254,122,1],[254,118,1],[254,114,1],[254,110,1],[254,105,1],[254,101,1],[254,97,1],[254,93,1],[254,88,1],[254,84,1],[254,80,1],[254,76,1],[254,71,1],[254,66,1],[254,68,1],[254,64,1],[254,59,1],[254,55,1],[254,50,1],[254,46,1],[254,41,1],[254,37,1],[254,32,1],[254,28,1],[254,23,1],[254,19,1],[254,14,1],[254,10,1],[254,5,1],[254,1,1],[254,1,1],[252,14,14],[250,26,26],[248,39,39],[245,52,52],[243,64,64],[241,76,76],[239,89,89],[237,102,102],[235,115,115],[233,127,127],[231,140,140],[228,153,153],[226,166,166],[224,178,178],[222,183,183],[222,188,188],[222,192,192],[222,194,194],[222,196,196],[222,199,199],[222,201,201],[222,203,203],[222,205,205],[222,207,207],[222,209,209],[222,211,211],[222,213,213],[222,216,216],[222,218,218],[222,220,220],[222,222,222],[222,222,222],[224,224,224],[226,226,226],[228,228,228],[231,231,231],[233,233,233],[235,235,235],[237,237,237],[239,239,239],[241,241,241],[243,243,243],[245,245,245],[248,248,248],[250,250,250],[252,252,252],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254]]},{path:"/luts/ncsa_paledit/",name:"sepia.lut",rgb:[[0,0,0],[43,28,4],[57,35,5],[65,35,6],[66,36,7],[67,37,8],[68,38,9],[69,39,10],[70,40,11],[71,41,12],[72,42,13],[73,43,14],[74,44,15],[75,45,16],[76,46,17],[77,47,18],[78,48,19],[79,49,20],[80,50,21],[81,51,22],[82,52,23],[83,53,24],[83,53,24],[84,54,25],[85,55,26],[86,56,27],[87,57,28],[88,58,29],[89,59,30],[90,60,31],[91,61,32],[92,62,33],[93,63,34],[94,64,35],[95,65,36],[96,66,37],[97,67,38],[98,68,39],[99,69,40],[100,70,41],[101,71,42],[102,72,43],[103,73,44],[104,74,45],[105,75,46],[106,76,47],[107,77,48],[107,77,48],[108,78,49],[109,79,50],[110,80,51],[111,81,52],[112,82,53],[113,83,54],[114,84,55],[115,85,56],[116,86,57],[117,87,58],[118,88,59],[119,89,60],[120,90,61],[121,91,62],[122,92,63],[123,93,64],[124,94,65],[125,95,66],[125,95,66],[126,96,67],[127,97,68],[128,98,69],[129,99,70],[130,100,71],[131,101,72],[132,102,73],[133,103,74],[134,104,75],[135,105,76],[136,106,77],[137,107,78],[138,108,79],[139,109,80],[140,110,81],[141,111,82],[142,112,83],[143,113,84],[144,114,85],[145,115,86],[146,116,87],[147,117,88],[148,118,89],[149,119,90],[150,120,91],[151,121,92],[152,122,93],[153,123,94],[154,124,95],[155,125,96],[156,126,97],[157,127,98],[158,128,99],[159,129,100],[160,130,101],[161,131,102],[162,132,103],[163,133,104],[164,134,105],[165,135,106],[166,136,107],[167,137,108],[168,138,109],[169,139,110],[170,140,111],[171,141,112],[172,142,113],[173,143,114],[174,144,115],[175,145,116],[176,146,117],[177,147,118],[178,148,119],[179,149,120],[180,150,121],[181,151,122],[182,152,123],[183,153,124],[184,154,125],[185,155,126],[186,156,127],[187,157,128],[187,157,128],[188,158,129],[189,159,130],[190,160,131],[191,161,132],[192,162,133],[193,163,134],[194,164,135],[195,165,136],[196,166,137],[197,167,138],[198,168,139],[199,169,140],[200,170,141],[201,171,142],[202,172,143],[203,173,144],[204,174,145],[205,175,146],[206,176,147],[207,177,148],[208,178,149],[209,179,150],[210,180,151],[211,181,152],[212,182,153],[213,183,154],[214,184,155],[215,185,156],[216,186,157],[217,187,158],[218,188,159],[219,189,160],[220,190,161],[221,191,162],[222,192,163],[223,193,164],[224,194,165],[225,195,166],[226,196,167],[227,197,168],[228,198,169],[229,199,170],[230,200,171],[231,201,172],[232,202,173],[233,203,174],[234,204,175],[235,205,176],[236,206,177],[237,207,178],[238,208,179],[239,209,180],[240,210,181],[241,211,182],[242,212,183],[243,213,184],[244,214,185],[245,215,186],[246,216,187],[247,217,188],[248,218,189],[249,219,190],[250,220,191],[251,221,192],[252,222,193],[253,223,194],[254,224,195],[255,225,196],[255,225,196],[255,225,196],[255,225,196],[255,225,196],[255,225,197],[255,225,197],[255,225,197],[255,225,197],[255,226,198],[255,226,198],[255,226,198],[255,226,198],[255,226,198],[255,226,199],[255,226,199],[255,226,199],[255,226,199],[255,226,199],[255,227,200],[255,227,200],[255,227,200],[255,227,200],[255,227,200],[255,227,201],[255,227,201],[255,227,201],[255,227,201],[255,227,201],[255,228,202],[255,228,202],[255,228,202],[255,228,202],[255,228,202],[255,228,202],[255,228,203],[255,228,203],[255,228,203],[255,228,203],[255,228,203],[255,229,204],[255,229,204],[255,229,204],[255,229,204],[255,229,204],[255,229,204],[255,229,205],[255,229,205],[255,229,205],[255,229,205],[255,229,205],[255,230,205],[255,230,205],[255,231,205],[255,231,209],[255,233,214],[255,233,217],[255,242,233],[255,255,255]]},{path:"/luts/ncsa_paledit/",name:"smart.lut",rgb:[[2,2,2],[2,2,2],[2,2,2],[3,3,3],[4,4,4],[5,5,5],[5,5,5],[6,6,6],[7,7,7],[8,8,8],[8,8,8],[9,9,9],[10,10,10],[11,11,11],[11,11,11],[12,12,12],[13,13,13],[14,14,14],[14,14,14],[15,15,15],[16,16,16],[16,16,16],[17,17,17],[18,18,18],[19,19,19],[19,19,19],[20,20,20],[21,21,21],[22,22,22],[22,22,22],[23,23,23],[24,24,24],[25,25,25],[25,25,25],[26,26,26],[27,27,27],[27,27,27],[28,28,28],[29,29,29],[30,30,30],[30,30,30],[31,31,31],[32,32,32],[33,33,33],[33,33,33],[34,34,34],[35,35,35],[36,36,36],[36,36,36],[37,37,37],[38,38,38],[39,39,39],[39,39,39],[40,40,40],[41,41,41],[41,41,41],[42,42,42],[43,43,43],[44,44,44],[44,44,44],[45,45,45],[46,46,46],[47,47,47],[47,47,47],[48,48,48],[49,49,49],[50,50,50],[50,50,50],[51,51,51],[52,52,52],[52,52,52],[53,53,53],[54,54,54],[55,55,55],[55,55,55],[56,56,56],[57,57,57],[58,58,58],[58,58,58],[59,59,59],[60,60,60],[61,61,61],[61,61,61],[62,62,62],[63,63,63],[64,64,64],[64,64,64],[64,64,64],[65,65,65],[65,65,65],[66,66,66],[67,67,67],[68,68,68],[68,68,68],[69,69,69],[70,70,70],[71,71,71],[71,71,71],[72,72,72],[73,73,73],[74,74,74],[74,74,74],[75,75,75],[76,71,71],[77,68,66],[77,64,62],[78,62,58],[79,58,53],[80,55,48],[80,51,43],[81,47,40],[82,45,38],[83,43,36],[83,42,34],[84,40,32],[85,38,30],[86,36,28],[86,34,26],[87,32,24],[88,30,22],[89,29,21],[89,27,20],[90,26,19],[91,26,19],[92,25,18],[92,24,18],[93,24,17],[94,23,17],[95,23,17],[95,22,16],[96,22,16],[97,22,15],[98,21,14],[98,21,13],[99,20,13],[100,20,13],[101,20,12],[101,19,12],[102,19,11],[103,18,11],[102,18,11],[105,18,10],[106,17,9],[107,17,8],[109,17,7],[111,16,6],[112,16,6],[113,16,5],[114,16,4],[116,15,4],[117,15,4],[119,15,3],[122,16,3],[125,16,2],[128,16,2],[130,16,2],[133,16,1],[136,16,1],[139,16,1],[142,16,1],[145,17,1],[149,18,1],[152,20,1],[156,21,1],[159,23,1],[163,24,1],[166,26,1],[189,27,1],[173,29,1],[177,31,1],[179,31,1],[182,31,1],[185,32,1],[189,33,1],[191,34,1],[194,36,1],[196,37,1],[199,39,1],[201,41,1],[203,43,1],[205,47,1],[207,50,1],[209,53,1],[210,55,1],[212,57,1],[213,59,1],[215,62,1],[216,64,1],[218,67,1],[220,71,1],[221,74,2],[222,78,2],[224,83,2],[222,88,3],[226,92,3],[227,97,4],[228,100,4],[229,103,4],[229,107,5],[230,110,5],[231,113,6],[233,121,6],[234,130,6],[236,136,7],[238,144,7],[239,156,8],[240,162,8],[240,167,8],[241,173,9],[242,179,9],[242,185,10],[243,187,10],[245,190,11],[246,192,11],[247,195,12],[248,198,12],[248,201,13],[249,204,13],[249,207,14],[250,210,14],[250,213,15],[251,215,17],[252,216,18],[252,217,20],[253,218,22],[253,219,24],[254,220,28],[254,222,32],[254,222,36],[254,224,40],[254,225,43],[254,226,47],[254,227,50],[254,227,53],[254,228,56],[254,229,59],[254,229,66],[254,230,74],[254,230,82],[254,231,89],[254,231,101],[254,235,113],[254,238,125],[254,240,136],[254,242,148],[254,245,164],[254,245,179],[254,246,187],[254,247,198],[254,248,209],[254,249,225],[254,250,241],[254,251,245],[254,252,249],[254,253,252],[254,253,252]]},{path:"/luts/",name:"spectrum.lut",rgb:[[255,0,0],[255,6,0],[255,12,0],[255,18,0],[255,24,0],[255,30,0],[255,36,0],[255,42,0],[255,48,0],[255,54,0],[255,60,0],[255,66,0],[255,72,0],[255,78,0],[255,84,0],[255,90,0],[255,96,0],[255,102,0],[255,108,0],[255,114,0],[255,120,0],[255,126,0],[255,132,0],[255,138,0],[255,144,0],[255,150,0],[255,156,0],[255,162,0],[255,168,0],[255,174,0],[255,180,0],[255,186,0],[255,192,0],[255,198,0],[255,204,0],[255,210,0],[255,216,0],[255,222,0],[255,228,0],[255,234,0],[255,240,0],[255,246,0],[255,252,0],[252,255,0],[246,255,0],[240,255,0],[234,255,0],[228,255,0],[222,255,0],[216,255,0],[210,255,0],[204,255,0],[198,255,0],[192,255,0],[186,255,0],[180,255,0],[174,255,0],[168,255,0],[162,255,0],[156,255,0],[150,255,0],[144,255,0],[138,255,0],[132,255,0],[126,255,0],[120,255,0],[114,255,0],[108,255,0],[102,255,0],[96,255,0],[90,255,0],[84,255,0],[78,255,0],[72,255,0],[66,255,0],[60,255,0],[54,255,0],[48,255,0],[42,255,0],[36,255,0],[30,255,0],[24,255,0],[18,255,0],[12,255,0],[6,255,0],[0,255,0],[0,255,6],[0,255,12],[0,255,18],[0,255,24],[0,255,30],[0,255,36],[0,255,42],[0,255,48],[0,255,54],[0,255,60],[0,255,66],[0,255,72],[0,255,78],[0,255,84],[0,255,90],[0,255,96],[0,255,102],[0,255,108],[0,255,114],[0,255,120],[0,255,126],[0,255,132],[0,255,138],[0,255,144],[0,255,150],[0,255,156],[0,255,162],[0,255,168],[0,255,174],[0,255,180],[0,255,186],[0,255,192],[0,255,198],[0,255,204],[0,255,210],[0,255,216],[0,255,222],[0,255,228],[0,255,234],[0,255,240],[0,255,246],[0,255,252],[0,252,255],[0,246,255],[0,240,255],[0,234,255],[0,228,255],[0,222,255],[0,216,255],[0,210,255],[0,204,255],[0,198,255],[0,192,255],[0,186,255],[0,180,255],[0,174,255],[0,168,255],[0,162,255],[0,156,255],[0,150,255],[0,144,255],[0,138,255],[0,132,255],[0,126,255],[0,120,255],[0,114,255],[0,108,255],[0,102,255],[0,96,255],[0,90,255],[0,84,255],[0,78,255],[0,72,255],[0,66,255],[0,60,255],[0,54,255],[0,48,255],[0,42,255],[0,36,255],[0,30,255],[0,24,255],[0,18,255],[0,12,255],[0,6,255],[0,0,255],[6,0,255],[12,0,255],[18,0,255],[24,0,255],[30,0,255],[36,0,255],[42,0,255],[48,0,255],[54,0,255],[60,0,255],[66,0,255],[72,0,255],[78,0,255],[84,0,255],[90,0,255],[96,0,255],[102,0,255],[108,0,255],[114,0,255],[120,0,255],[126,0,255],[132,0,255],[138,0,255],[144,0,255],[150,0,255],[156,0,255],[162,0,255],[168,0,255],[174,0,255],[180,0,255],[186,0,255],[192,0,255],[198,0,255],[204,0,255],[210,0,255],[216,0,255],[222,0,255],[228,0,255],[234,0,255],[240,0,255],[246,0,255],[252,0,255],[255,0,252],[255,0,246],[255,0,240],[255,0,234],[255,0,228],[255,0,222],[255,0,216],[255,0,210],[255,0,204],[255,0,198],[255,0,192],[255,0,186],[255,0,180],[255,0,174],[255,0,168],[255,0,162],[255,0,156],[255,0,150],[255,0,144],[255,0,138],[255,0,132],[255,0,126],[255,0,120],[255,0,114],[255,0,108],[255,0,102],[255,0,96],[255,0,90],[255,0,84],[255,0,78],[255,0,72],[255,0,66],[255,0,60],[255,0,54],[255,0,48],[255,0,42],[255,0,36],[255,0,30],[255,0,24],[255,0,18],[255,0,12],[255,0,6],[255,0,0]]},{path:"/luts/ncsa_paledit/",name:"thal.lut",rgb:[[1,1,9],[1,1,9],[1,1,17],[1,1,25],[1,1,33],[1,1,41],[1,1,49],[1,1,57],[1,1,64],[1,1,72],[1,1,80],[1,1,88],[1,1,96],[1,1,104],[1,1,112],[1,1,120],[1,1,128],[1,1,132],[1,1,136],[1,1,140],[1,1,144],[1,1,148],[1,1,152],[1,1,156],[1,1,160],[1,1,164],[1,1,168],[1,1,172],[1,1,176],[1,1,180],[1,1,184],[1,1,188],[1,1,191],[1,1,195],[1,1,199],[1,1,203],[1,1,207],[1,1,211],[1,1,215],[1,1,219],[1,1,223],[1,1,227],[1,1,231],[1,1,235],[1,1,239],[1,1,243],[1,1,247],[1,1,251],[1,1,254],[1,5,239],[1,9,223],[1,13,207],[1,17,191],[1,21,176],[1,25,160],[1,29,144],[1,33,128],[1,37,112],[1,41,96],[1,45,80],[1,49,64],[1,53,49],[1,57,33],[1,61,17],[1,64,1],[1,68,1],[1,72,1],[1,76,1],[1,80,1],[1,84,1],[1,88,1],[1,92,1],[1,96,1],[1,100,1],[1,104,1],[1,108,1],[1,112,1],[1,116,1],[1,120,1],[1,124,1],[1,128,1],[1,132,1],[1,136,1],[1,140,1],[1,144,1],[1,148,1],[1,152,1],[1,156,1],[1,160,1],[1,164,1],[1,168,1],[1,172,1],[1,176,1],[1,180,1],[1,184,1],[1,188,1],[1,191,1],[1,195,1],[1,199,1],[1,203,1],[1,207,1],[1,211,1],[1,215,1],[1,219,1],[1,223,1],[1,227,1],[1,231,1],[1,235,1],[1,239,1],[1,243,1],[1,247,1],[1,251,1],[1,254,1],[5,239,1],[9,223,1],[13,207,1],[17,191,1],[21,176,1],[25,160,1],[29,144,1],[33,128,1],[37,112,1],[41,96,1],[45,80,1],[49,64,1],[53,49,1],[57,33,1],[61,17,1],[64,1,1],[68,1,1],[72,1,1],[76,1,1],[80,1,1],[84,1,1],[88,1,1],[92,1,1],[96,1,1],[100,1,1],[104,1,1],[108,1,1],[112,1,1],[116,1,1],[120,1,1],[124,1,1],[128,1,1],[132,1,1],[136,1,1],[140,1,1],[144,1,1],[148,1,1],[152,1,1],[156,1,1],[160,1,1],[164,1,1],[168,1,1],[172,1,1],[176,1,1],[180,1,1],[184,1,1],[188,1,1],[191,1,1],[195,1,1],[199,1,1],[203,1,1],[207,1,1],[211,1,1],[215,1,1],[219,1,1],[223,1,1],[227,1,1],[231,1,1],[235,1,1],[239,1,1],[243,1,1],[247,1,1],[251,1,1],[254,1,1],[250,5,1],[247,9,1],[243,13,1],[239,17,1],[236,21,1],[232,25,1],[229,29,1],[225,33,1],[221,37,1],[218,41,1],[214,45,1],[210,49,1],[208,53,1],[205,57,1],[201,61,1],[199,64,1],[199,68,1],[199,72,1],[199,76,1],[199,80,1],[199,84,1],[199,88,1],[199,92,1],[199,96,1],[199,100,1],[199,104,1],[199,108,1],[199,112,1],[199,116,1],[199,120,1],[199,124,1],[199,128,1],[201,132,1],[205,136,1],[208,140,1],[210,144,1],[214,148,1],[218,152,1],[221,156,1],[225,160,1],[229,164,1],[232,168,1],[236,172,1],[239,176,1],[243,180,1],[247,184,1],[250,188,1],[254,191,1],[254,195,17],[254,199,33],[254,203,49],[254,207,64],[254,211,80],[254,215,96],[254,219,112],[254,223,128],[254,227,144],[254,231,160],[254,235,176],[254,239,191],[254,243,207],[254,247,223],[254,251,239],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254]]},{path:"/luts/ncsa_paledit/",name:"thallium.lut",rgb:[[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,2,1],[1,2,1],[1,3,1],[1,4,1],[1,4,1],[1,5,1],[1,6,1],[1,6,1],[1,7,1],[1,7,1],[1,8,1],[1,9,1],[1,9,1],[1,10,1],[1,11,1],[1,12,1],[1,13,1],[1,13,1],[1,14,1],[1,14,1],[1,15,1],[1,16,1],[1,16,1],[1,17,1],[1,18,1],[1,19,1],[1,19,1],[1,19,1],[1,19,1],[1,19,1],[1,20,1],[1,20,1],[1,20,1],[1,20,1],[1,21,1],[1,21,1],[1,21,1],[1,22,1],[1,22,1],[1,22,1],[1,22,1],[1,23,1],[1,23,1],[1,23,1],[1,23,1],[1,24,1],[1,24,1],[1,24,1],[1,24,1],[1,25,1],[1,25,1],[1,25,1],[1,25,1],[1,26,1],[1,26,1],[1,27,1],[1,27,1],[1,28,1],[1,28,1],[1,29,1],[1,29,1],[1,30,1],[1,30,1],[1,31,1],[1,31,1],[1,32,1],[1,32,1],[1,33,1],[1,33,1],[1,34,1],[1,34,1],[1,35,1],[1,35,1],[1,36,1],[1,37,1],[1,37,1],[1,38,1],[1,38,1],[1,39,1],[1,40,1],[1,40,1],[1,41,1],[2,42,2],[2,42,2],[3,43,3],[3,44,3],[4,45,4],[4,45,4],[5,46,5],[5,47,5],[6,48,6],[6,48,6],[6,49,6],[7,51,7],[8,51,8],[8,52,8],[9,53,9],[9,54,9],[10,54,10],[10,55,10],[11,56,11],[11,56,11],[11,57,11],[12,58,12],[12,59,12],[13,59,13],[13,60,13],[14,61,14],[14,61,14],[14,62,14],[15,63,15],[15,64,15],[16,64,16],[17,66,17],[17,67,17],[18,68,18],[18,69,18],[19,70,19],[19,70,19],[20,71,20],[20,72,20],[21,73,21],[21,74,21],[22,75,22],[22,76,22],[23,77,23],[23,78,23],[24,79,24],[24,80,24],[25,81,25],[25,81,25],[26,82,26],[26,83,26],[28,86,28],[29,87,29],[30,88,30],[31,90,31],[33,91,33],[34,93,34],[35,94,35],[36,96,36],[38,97,38],[39,99,39],[40,100,40],[41,102,41],[43,103,43],[44,105,44],[45,106,45],[46,108,46],[48,109,48],[49,111,49],[50,112,50],[53,115,53],[54,117,54],[55,118,55],[57,119,57],[58,121,58],[59,122,59],[60,124,60],[62,125,62],[63,127,63],[64,128,64],[65,130,65],[67,132,67],[70,134,70],[72,136,72],[75,139,75],[77,141,77],[80,143,80],[82,145,82],[85,147,85],[87,150,87],[92,154,92],[95,156,95],[97,159,97],[100,161,100],[102,163,102],[105,165,105],[107,167,107],[110,170,110],[112,172,112],[115,174,115],[117,176,117],[120,178,120],[122,181,122],[125,183,125],[127,185,127],[130,187,130],[134,191,134],[138,192,138],[142,194,142],[147,196,147],[156,201,156],[160,203,160],[164,206,164],[169,208,169],[173,210,173],[178,213,178],[182,215,182],[186,217,186],[191,220,191],[194,222,194],[199,224,199],[203,227,203],[207,229,207],[212,231,212],[216,234,216],[221,236,221],[225,238,225],[229,241,229],[234,243,234],[251,242,244],[252,247,251],[253,253,253],[253,253,253],[253,253,253],[253,253,253],[253,253,253],[253,253,253],[253,253,253],[253,253,253],[253,253,253],[253,253,253],[253,253,253],[253,253,253],[253,253,253],[253,253,253],[253,253,253],[253,253,253],[253,253,253]]},{path:"/luts/",name:"thermal.lut",rgb:[[70,0,115],[70,0,115],[70,0,116],[70,0,118],[70,0,120],[70,0,122],[70,0,124],[70,0,126],[70,0,128],[70,0,131],[70,0,133],[70,0,136],[70,0,139],[70,0,141],[70,0,144],[70,0,147],[70,0,151],[70,0,154],[70,0,157],[70,0,160],[70,0,164],[70,0,167],[70,0,170],[70,0,174],[70,0,177],[70,0,181],[70,0,184],[70,0,188],[70,0,194],[70,0,200],[70,0,206],[70,0,211],[70,0,217],[70,0,222],[70,0,227],[70,0,232],[70,0,236],[70,0,240],[70,0,244],[69,0,248],[69,0,251],[68,0,253],[67,2,255],[66,5,255],[64,9,255],[63,13,255],[61,17,255],[59,22,255],[57,27,255],[55,32,255],[53,38,255],[51,44,255],[48,50,255],[45,57,255],[43,63,255],[40,70,255],[37,77,255],[34,84,255],[31,91,255],[28,98,255],[26,106,255],[23,113,254],[20,121,253],[17,128,252],[14,136,251],[12,144,250],[9,152,248],[6,160,247],[4,168,246],[2,176,245],[0,183,243],[0,191,242],[0,198,241],[0,205,240],[0,212,239],[0,218,238],[0,224,237],[0,230,236],[0,235,235],[0,240,235],[0,245,235],[0,249,234],[0,253,234],[1,255,234],[4,255,234],[7,255,234],[11,255,235],[16,255,236],[21,255,237],[27,255,238],[32,255,239],[39,255,240],[45,255,241],[52,255,243],[60,255,244],[68,255,246],[76,255,247],[84,255,249],[92,255,250],[101,255,252],[109,255,253],[117,255,254],[126,255,254],[134,255,254],[143,255,254],[152,255,254],[160,255,254],[168,255,254],[176,255,254],[184,255,254],[192,255,254],[199,255,254],[206,255,254],[213,255,254],[219,255,254],[225,255,254],[231,255,254],[236,255,254],[240,255,254],[244,255,254],[247,255,254],[250,255,254],[252,254,254],[253,254,254],[254,254,254],[254,254,252],[253,254,249],[252,254,246],[251,254,243],[249,254,239],[246,254,236],[243,254,231],[240,254,227],[237,254,223],[233,254,218],[228,254,213],[223,255,208],[219,255,203],[214,255,198],[208,255,192],[203,255,187],[196,255,181],[190,255,175],[184,255,169],[178,255,163],[171,255,157],[165,255,151],[158,255,145],[151,255,138],[144,255,132],[138,255,126],[129,255,118],[120,255,110],[112,255,102],[103,255,94],[95,255,87],[87,255,79],[79,255,72],[71,255,65],[64,255,58],[57,255,51],[51,255,45],[45,255,38],[39,255,32],[35,255,27],[30,255,22],[27,255,17],[24,255,13],[21,255,8],[20,255,5],[19,255,2],[19,255,1],[21,255,1],[23,255,1],[27,255,1],[32,255,1],[37,255,1],[44,255,1],[51,255,1],[59,255,1],[68,255,1],[77,255,1],[86,255,1],[97,255,3],[107,255,5],[118,255,8],[125,255,10],[131,255,12],[137,255,14],[144,255,16],[150,255,17],[156,255,19],[162,255,21],[168,255,23],[174,255,25],[180,255,26],[185,255,28],[191,255,30],[197,254,31],[202,254,33],[207,252,34],[212,252,36],[217,250,37],[222,249,38],[227,248,39],[231,246,40],[235,245,41],[238,243,42],[242,241,43],[245,239,43],[248,237,43],[251,235,44],[253,233,44],[255,229,44],[255,226,44],[255,222,43],[255,218,43],[255,213,42],[255,208,42],[255,203,41],[255,198,40],[255,192,40],[255,187,39],[255,181,38],[255,175,37],[255,169,36],[255,162,34],[255,156,33],[255,149,32],[255,143,31],[255,136,30],[255,129,28],[255,122,27],[255,116,25],[255,109,24],[255,102,23],[255,95,21],[255,89,20],[255,82,19],[255,76,17],[255,70,16],[255,63,15],[255,57,13],[255,51,12],[255,45,11],[255,40,10],[255,35,9],[255,29,7],[255,25,6],[255,20,6],[255,16,5],[255,12,4],[255,8,3],[255,5,3],[255,2,2],[255,2,2]]},{path:"/luts/",name:"turbo.lut",rgb:[[48,18,59],[49,21,66],[51,24,74],[52,27,81],[53,30,88],[54,33,95],[55,36,102],[56,38,108],[57,41,115],[58,44,121],[59,47,128],[60,50,134],[61,53,139],[62,56,145],[62,58,151],[63,61,156],[64,64,162],[64,67,167],[65,70,172],[66,72,177],[66,75,182],[67,78,186],[67,81,191],[68,83,195],[68,86,199],[69,89,203],[69,91,207],[69,94,211],[69,97,215],[70,99,218],[70,102,221],[70,105,225],[70,107,228],[70,110,231],[70,113,233],[70,115,236],[70,118,238],[70,120,241],[70,123,243],[70,125,245],[70,128,247],[70,130,249],[70,133,250],[69,135,252],[69,138,253],[68,140,254],[68,143,254],[67,145,255],[66,148,255],[65,150,255],[63,153,255],[62,155,255],[61,158,254],[59,161,253],[58,163,253],[56,166,251],[54,168,250],[53,171,249],[51,173,247],[49,176,246],[47,178,244],[45,181,242],[44,183,240],[42,185,238],[40,188,236],[38,190,234],[37,192,231],[35,195,229],[33,197,226],[32,199,224],[31,201,221],[29,204,219],[28,206,216],[27,208,213],[26,210,211],[25,212,208],[24,214,205],[24,216,203],[24,218,200],[23,219,197],[23,221,195],[23,223,192],[24,224,190],[24,226,187],[25,227,185],[26,229,183],[27,230,180],[29,232,178],[30,233,175],[32,234,173],[34,236,170],[36,237,167],[39,238,164],[41,239,161],[44,240,158],[47,241,155],[50,242,152],[53,243,148],[56,244,145],[60,245,142],[63,246,139],[67,247,135],[70,248,132],[74,249,128],[78,250,125],[81,250,121],[85,251,118],[89,252,115],[93,252,111],[97,253,108],[101,253,105],[105,254,101],[109,254,98],[113,254,95],[117,255,92],[121,255,89],[125,255,86],[128,255,83],[132,255,80],[136,255,78],[139,255,75],[143,255,73],[146,255,70],[150,255,68],[153,255,66],[156,254,64],[159,254,62],[162,253,61],[164,253,59],[167,252,58],[170,252,57],[172,251,56],[175,250,55],[177,249,54],[180,248,53],[183,248,53],[185,246,52],[188,245,52],[191,244,52],[193,243,52],[196,242,51],[198,240,51],[201,239,52],[203,238,52],[206,236,52],[208,235,52],[210,233,52],[213,232,53],[215,230,53],[217,228,53],[219,226,54],[221,225,54],[224,223,55],[226,221,55],[228,219,56],[230,217,56],[231,215,56],[233,213,57],[235,211,57],[237,209,57],[238,207,58],[240,205,58],[241,203,58],[243,201,58],[244,199,58],[245,197,58],[247,195,58],[248,193,58],[249,191,57],[250,189,57],[250,186,56],[251,184,56],[252,182,55],[252,180,54],[253,177,53],[253,175,53],[254,172,52],[254,169,51],[254,167,50],[254,164,49],[255,161,47],[255,158,46],[255,156,45],[255,153,44],[254,150,43],[254,147,42],[254,144,40],[254,141,39],[253,138,38],[253,135,36],[252,132,35],[252,129,34],[251,126,32],[251,123,31],[250,120,30],[249,117,28],[248,114,27],[248,111,26],[247,108,25],[246,105,23],[245,102,22],[244,99,21],[243,96,20],[242,93,19],[240,91,17],[239,88,16],[238,85,15],[237,83,14],[235,80,14],[234,78,13],[233,75,12],[231,73,11],[230,71,10],[228,69,10],[227,66,9],[225,64,9],[223,62,8],[222,60,7],[220,58,7],[218,56,6],[216,54,6],[214,52,5],[212,50,5],[210,49,5],[208,47,4],[206,45,4],[204,43,3],[202,41,3],[200,40,3],[198,38,2],[195,36,2],[193,35,2],[191,33,2],[188,31,1],[186,30,1],[183,28,1],[180,27,1],[178,25,1],[175,24,1],[172,22,1],[170,21,1],[167,20,1],[164,18,1],[161,17,1],[158,16,1],[155,15,1],[152,13,1],[149,12,1],[146,11,1],[142,10,1],[139,9,1],[136,8,1],[133,7,1],[129,6,2],[126,5,2],[122,4,2]]},{path:"/luts/ncsa_paledit/",name:"unionjack.lut",rgb:[[0,0,0],[0,0,2],[0,0,5],[0,0,8],[0,0,11],[0,0,14],[0,0,17],[0,0,20],[0,0,23],[0,0,26],[0,0,29],[0,0,32],[0,0,35],[0,0,38],[0,0,41],[0,0,44],[0,0,47],[0,0,50],[0,0,53],[0,0,56],[0,0,59],[0,0,62],[0,0,65],[0,0,68],[0,0,71],[0,0,74],[0,0,77],[0,0,80],[0,0,83],[0,0,86],[0,0,89],[0,0,92],[0,0,95],[0,0,97],[0,0,100],[0,0,103],[0,0,106],[0,0,109],[0,0,112],[0,0,115],[0,0,118],[0,0,121],[0,0,124],[0,0,127],[0,0,130],[0,0,133],[0,0,136],[0,0,139],[0,0,142],[0,0,145],[0,0,148],[0,0,151],[0,0,154],[0,0,157],[0,0,160],[0,0,163],[0,0,166],[0,0,169],[0,0,172],[0,0,175],[0,0,178],[0,0,181],[0,0,184],[0,0,190],[0,0,190],[3,3,191],[7,7,192],[11,11,193],[15,15,194],[19,19,195],[23,23,196],[27,27,197],[31,31,198],[35,35,199],[39,39,200],[43,43,201],[47,47,202],[51,51,203],[55,55,204],[59,59,205],[63,63,206],[67,67,207],[71,71,208],[75,75,209],[79,79,210],[83,83,211],[87,87,212],[91,91,213],[95,95,214],[99,99,215],[103,103,216],[107,107,217],[111,111,218],[115,115,219],[119,119,220],[123,123,221],[127,127,222],[131,131,223],[135,135,224],[139,139,225],[143,143,226],[147,147,227],[151,151,228],[155,155,229],[159,159,230],[163,163,231],[167,167,232],[171,171,233],[175,175,234],[179,179,235],[183,183,236],[187,187,237],[191,191,238],[195,195,239],[199,199,240],[203,203,241],[207,207,242],[211,211,243],[215,215,244],[219,219,245],[223,223,246],[227,227,247],[231,231,248],[235,235,249],[239,239,250],[243,243,251],[247,247,252],[255,255,255],[255,255,255],[253,251,251],[252,247,247],[251,243,243],[250,239,239],[249,235,235],[248,231,231],[247,227,227],[246,223,223],[245,219,219],[244,215,215],[243,211,211],[242,207,207],[241,203,203],[240,199,199],[239,195,195],[238,191,191],[237,187,187],[236,183,183],[235,179,179],[234,175,175],[233,171,171],[232,167,167],[231,163,163],[230,159,159],[229,155,155],[228,151,151],[227,147,147],[226,143,143],[225,139,139],[224,135,135],[223,131,131],[222,127,127],[221,123,123],[220,119,119],[219,115,115],[218,111,111],[217,107,107],[216,103,103],[215,99,99],[214,95,95],[213,91,91],[212,87,87],[211,83,83],[210,79,79],[209,75,75],[208,71,71],[207,67,67],[206,63,63],[205,59,59],[204,55,55],[203,51,51],[202,47,47],[201,43,43],[200,39,39],[199,35,35],[198,31,31],[197,27,27],[196,23,23],[195,19,19],[194,15,15],[193,11,11],[192,7,7],[190,0,0],[190,0,0],[191,3,3],[192,7,7],[193,11,11],[194,15,15],[195,19,19],[196,23,23],[197,27,27],[198,31,31],[199,35,35],[200,39,39],[201,43,43],[202,47,47],[203,51,51],[204,55,55],[205,59,59],[206,63,63],[207,67,67],[208,71,71],[209,75,75],[210,79,79],[211,83,83],[212,87,87],[213,91,91],[214,95,95],[215,99,99],[216,103,103],[217,107,107],[218,111,111],[219,115,115],[220,119,119],[221,123,123],[222,127,127],[223,131,131],[224,135,135],[225,139,139],[226,143,143],[227,147,147],[228,151,151],[229,155,155],[230,159,159],[231,163,163],[232,167,167],[233,171,171],[234,175,175],[235,179,179],[236,183,183],[237,187,187],[238,191,191],[239,195,195],[240,199,199],[241,203,203],[242,207,207],[243,211,211],[244,215,215],[245,219,219],[246,223,223],[247,227,227],[248,231,231],[249,235,235],[250,239,239],[251,243,243],[252,247,247],[255,255,255]]},{path:"/luts/matplotlib/",name:"viridis.lut",rgb:[[68,1,84],[68,2,85],[68,3,87],[69,5,88],[69,6,90],[69,8,91],[70,9,92],[70,11,94],[70,12,95],[70,14,97],[71,15,98],[71,17,99],[71,18,101],[71,20,102],[71,21,103],[71,22,105],[71,24,106],[72,25,107],[72,26,108],[72,28,110],[72,29,111],[72,30,112],[72,32,113],[72,33,114],[72,34,115],[72,35,116],[71,37,117],[71,38,118],[71,39,119],[71,40,120],[71,42,121],[71,43,122],[71,44,123],[70,45,124],[70,47,124],[70,48,125],[70,49,126],[69,50,127],[69,52,127],[69,53,128],[69,54,129],[68,55,129],[68,57,130],[67,58,131],[67,59,131],[67,60,132],[66,61,132],[66,62,133],[66,64,133],[65,65,134],[65,66,134],[64,67,135],[64,68,135],[63,69,135],[63,71,136],[62,72,136],[62,73,137],[61,74,137],[61,75,137],[61,76,137],[60,77,138],[60,78,138],[59,80,138],[59,81,138],[58,82,139],[58,83,139],[57,84,139],[57,85,139],[56,86,139],[56,87,140],[55,88,140],[55,89,140],[54,90,140],[54,91,140],[53,92,140],[53,93,140],[52,94,141],[52,95,141],[51,96,141],[51,97,141],[50,98,141],[50,99,141],[49,100,141],[49,101,141],[49,102,141],[48,103,141],[48,104,141],[47,105,141],[47,106,141],[46,107,142],[46,108,142],[46,109,142],[45,110,142],[45,111,142],[44,112,142],[44,113,142],[44,114,142],[43,115,142],[43,116,142],[42,117,142],[42,118,142],[42,119,142],[41,120,142],[41,121,142],[40,122,142],[40,122,142],[40,123,142],[39,124,142],[39,125,142],[39,126,142],[38,127,142],[38,128,142],[38,129,142],[37,130,142],[37,131,141],[36,132,141],[36,133,141],[36,134,141],[35,135,141],[35,136,141],[35,137,141],[34,137,141],[34,138,141],[34,139,141],[33,140,141],[33,141,140],[33,142,140],[32,143,140],[32,144,140],[32,145,140],[31,146,140],[31,147,139],[31,148,139],[31,149,139],[31,150,139],[30,151,138],[30,152,138],[30,153,138],[30,153,138],[30,154,137],[30,155,137],[30,156,137],[30,157,136],[30,158,136],[30,159,136],[30,160,135],[31,161,135],[31,162,134],[31,163,134],[32,164,133],[32,165,133],[33,166,133],[33,167,132],[34,167,132],[35,168,131],[35,169,130],[36,170,130],[37,171,129],[38,172,129],[39,173,128],[40,174,127],[41,175,127],[42,176,126],[43,177,125],[44,177,125],[46,178,124],[47,179,123],[48,180,122],[50,181,122],[51,182,121],[53,183,120],[54,184,119],[56,185,118],[57,185,118],[59,186,117],[61,187,116],[62,188,115],[64,189,114],[66,190,113],[68,190,112],[69,191,111],[71,192,110],[73,193,109],[75,194,108],[77,194,107],[79,195,105],[81,196,104],[83,197,103],[85,198,102],[87,198,101],[89,199,100],[91,200,98],[94,201,97],[96,201,96],[98,202,95],[100,203,93],[103,204,92],[105,204,91],[107,205,89],[109,206,88],[112,206,86],[114,207,85],[116,208,84],[119,208,82],[121,209,81],[124,210,79],[126,210,78],[129,211,76],[131,211,75],[134,212,73],[136,213,71],[139,213,70],[141,214,68],[144,214,67],[146,215,65],[149,215,63],[151,216,62],[154,216,60],[157,217,58],[159,217,56],[162,218,55],[165,218,53],[167,219,51],[170,219,50],[173,220,48],[175,220,46],[178,221,44],[181,221,43],[183,221,41],[186,222,39],[189,222,38],[191,223,36],[194,223,34],[197,223,33],[199,224,31],[202,224,30],[205,224,29],[207,225,28],[210,225,27],[212,225,26],[215,226,25],[218,226,24],[220,226,24],[223,227,24],[225,227,24],[228,227,24],[231,228,25],[233,228,25],[236,228,26],[238,229,27],[241,229,28],[243,229,30],[246,230,31],[248,230,33],[250,230,34],[253,231,36]]},{path:"/luts/wcif/",name:"yellow_hot.lut",rgb:[[0,0,0],[2,1,0],[4,3,0],[7,5,0],[9,7,0],[11,8,0],[14,10,0],[16,12,0],[19,14,0],[21,16,0],[23,17,0],[26,19,0],[28,21,0],[31,23,0],[33,25,0],[35,26,0],[38,28,0],[40,30,0],[43,32,0],[45,34,0],[47,35,0],[50,37,0],[52,39,0],[54,41,0],[57,43,0],[59,44,0],[62,46,0],[64,48,0],[66,50,0],[69,51,0],[71,53,0],[74,55,0],[76,57,0],[78,59,0],[81,60,0],[83,62,0],[86,64,0],[88,66,0],[90,68,0],[93,69,0],[95,71,0],[98,73,0],[100,75,0],[102,77,0],[105,78,0],[107,80,0],[109,82,0],[112,84,0],[114,86,0],[117,87,0],[119,89,0],[121,91,0],[124,93,0],[126,95,0],[129,96,0],[131,98,0],[133,100,0],[136,102,0],[138,103,0],[141,105,0],[143,107,0],[145,109,0],[148,111,0],[150,112,0],[153,114,0],[155,116,0],[157,118,0],[160,120,0],[162,121,0],[164,123,0],[167,125,0],[169,127,0],[172,129,0],[174,130,0],[176,132,0],[179,134,0],[181,136,0],[184,138,0],[186,139,0],[188,141,0],[191,143,0],[193,145,0],[196,147,0],[198,148,0],[204,153,0],[204,153,0],[204,154,0],[205,155,0],[205,156,0],[206,157,0],[206,158,0],[207,160,0],[208,161,0],[208,162,0],[209,163,0],[209,164,0],[210,166,0],[211,167,0],[211,168,0],[212,169,0],[212,170,0],[213,172,0],[214,173,0],[214,174,0],[215,175,0],[215,176,0],[216,178,0],[217,179,0],[217,180,0],[218,181,0],[218,182,0],[219,184,0],[220,185,0],[220,186,0],[221,187,0],[221,188,0],[222,190,0],[223,191,0],[223,192,0],[224,193,0],[224,194,0],[225,196,0],[226,197,0],[226,198,0],[227,199,0],[227,200,0],[228,202,0],[229,203,0],[229,204,0],[230,205,0],[230,206,0],[231,207,0],[232,209,0],[232,210,0],[233,211,0],[233,212,0],[234,213,0],[235,215,0],[235,216,0],[236,217,0],[236,218,0],[237,219,0],[238,221,0],[238,222,0],[239,223,0],[239,224,0],[240,225,0],[241,227,0],[241,228,0],[242,229,0],[242,230,0],[243,231,0],[244,233,0],[244,234,0],[245,235,0],[245,236,0],[246,237,0],[247,239,0],[247,240,0],[248,241,0],[248,242,0],[249,243,0],[250,245,0],[250,246,0],[251,247,0],[251,248,0],[252,249,0],[253,251,0],[253,252,0],[255,255,0],[255,255,0],[255,255,2],[255,255,5],[255,255,8],[255,255,11],[255,255,14],[255,255,17],[255,255,20],[255,255,23],[255,255,26],[255,255,29],[255,255,32],[255,255,35],[255,255,38],[255,255,41],[255,255,44],[255,255,47],[255,255,50],[255,255,53],[255,255,56],[255,255,59],[255,255,62],[255,255,65],[255,255,68],[255,255,71],[255,255,74],[255,255,77],[255,255,80],[255,255,83],[255,255,86],[255,255,89],[255,255,92],[255,255,95],[255,255,98],[255,255,101],[255,255,104],[255,255,107],[255,255,110],[255,255,113],[255,255,116],[255,255,119],[255,255,122],[255,255,125],[255,255,128],[255,255,131],[255,255,134],[255,255,137],[255,255,140],[255,255,143],[255,255,146],[255,255,149],[255,255,152],[255,255,155],[255,255,158],[255,255,161],[255,255,164],[255,255,167],[255,255,170],[255,255,173],[255,255,176],[255,255,179],[255,255,182],[255,255,185],[255,255,188],[255,255,191],[255,255,194],[255,255,197],[255,255,200],[255,255,203],[255,255,206],[255,255,209],[255,255,212],[255,255,215],[255,255,218],[255,255,221],[255,255,224],[255,255,227],[255,255,230],[255,255,233],[255,255,236],[255,255,239],[255,255,242],[255,255,245],[255,255,248],[255,255,251],[255,255,255]]}],zg={cyan:"#00FFFF",yellow:"#FFFF00",magenta:"#FF00FF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",white:"#FFFFFF"};Object.values(zg).slice(0,-2);function Sh(t){const e=t.data;let i=0,n=1/0,r=t.data.length;for(let o=0;o<r;o++){let a=e[o];i=Math.max(i,a),n=Math.min(n,a)}return[n,i]}function Fg(t,e,i,n,r,o=!1){const a=t[0].shape,l=a[0],h=a[1],g=l*h;e||(e=t.map(Sh));const _=n==null?void 0:n.map(D=>D&&Ng(D));let x=performance.now(),T=new Uint8ClampedArray(4*l*h).fill(0),M=0;for(let D=0;D<t.length;D++){M=0;let F=i[D],Q=_==null?void 0:_[D],K=t[D].data,Z=e[D],ee=r==null?void 0:r[D];for(let he=0;he<g;he++){let pe=(K[he]-Z[0])/(Z[1]-Z[0]);pe=Math.min(1,Math.max(0,pe));for(let p=0;p<3;p++){let H;if(Q){let oe=pe*255<<0;H=Q[oe][p],ee&&(H=255-H)}else H=pe*F[p]<<0,ee&&F[p]!=0&&(H=255-H);T[M*4+p]=Math.max(T[M*4+p],H)}T[M*4+3]=255,M+=1}}if(performance.now()-x<100&&o){let D=5;Lg(T,D)[D-1]<1&&(T=Dg(T,2))}return T}function Dg(t,e){for(let i=0;i<t.length/4;i++)for(let n=0;n<3;n++){let r=t[i*4+n];r=Math.min(255,r*e),t[i*4+n]=r}return t}function Lg(t,e=5){let i=new Array(e).fill(0);const n=256/e;let r=t.length/4;for(let o=0;o<r;o++){let a=t[o*4];a=Math.max(t[o*4+1],a),a=Math.max(t[o*4+2],a);let l=Math.floor(a/n);i[l]+=1}return i=i.map(o=>100*o/r),i}async function Pg(t){let e=(await er(t,{kind:"group"})).attrs,i,n,r=2;return"ome"in e?(e=e,i=e.ome.multiscales[0],n=e.ome.omero,r=3):(e=e,i=e.multiscales[0],n=e.omero),{multiscale:i,omero:n,zarr_version:r}}async function $g(t,e=0){const{multiscale:i,omero:n,zarr_version:r}=await Pg(t),o=i.datasets.map(T=>T.path);e<0&&(e=o.length+e);const a=o[e],l=await Bg(t,a,r),h=l.shape,g=i.datasets.map(T=>Array.isArray(T.coordinateTransformations)?T.coordinateTransformations.find(M=>"scale"in M).scale:[1,1,1]),_=g[e],x=g.map(T=>h.map((M,D)=>Math.ceil(M*_[D]/T[D])));return{arr:l,shapes:x,multiscale:i,omero:n,scales:g,zarr_version:r}}async function Bg(t,e,i){let n=rg(t);const r=i===3?er.v3:i===2?er.v2:er;let o=n.resolve(e);return await r(o,{kind:"array"})}function Wg(t,e,i,n){return t.map(r=>e.map((o,a)=>{let l=i[a];if(l=="c")return r;if(l in n){let h=n[l];if(Array.isArray(h))return Ds(h[0],h[1]);if(Number.isInteger(h))return h}return l=="x"||l=="y"?Ds(0,o):l=="z"||l=="t"?parseInt(o/2+""):0}))}const _l={},Go={};async function Hg(t){var st,Tt;let e=new Eh(t),i=-1;const{arr:n,shapes:r,multiscale:o,omero:a,scales:l,zarr_version:h}=await $g(e,i);console.log({arr:n,shapes:r,multiscale:o,omero:a,scales:l,zarr_version:h});let g=t.split("/").pop();if(console.log("multiscale",o),!o){alert(`Failed to load multiscale from ${t}`);return}let _=o.name||g,x=o.axes,T=(x==null?void 0:x.map(N=>N.name))||["t","c","z","y","x"],M=o.datasets,D={};for(let N of M){let O=N.path,k=await fetch(`${t}/${O}/.zarray`).then($=>$.json());D[O]=k}let F={multiscales:[o]};F.arrays=D;let Q=D[0];console.log("zarray",Q);let K=Q.dtype,Z=Q.shape,ee=Z.length,he=Z[ee-1],pe=Z[ee-2],p=1,H=1,oe=1;T.includes("z")&&(p=Z[T.indexOf("z")]);let me=parseInt(p/2);T.includes("t")&&(H=Z[T.indexOf("t")]);let Te=parseInt(H/2);T.includes("c")&&(oe=Z[T.indexOf("c")]);let Ae=["FF0000","00FF00","0000FF","FFFF00","00FFFF","FFFFFF"],ve=a==null?void 0:a.channels;if(!ve){let O=Wg($e.range(oe),Z,T,{}).map($=>yh(n,$)),k=await Promise.all(O);ve=$e.range(oe).map($=>{let B=Sh(k[$]);return{label:"Ch"+$,active:!0,color:Ae[$],window:{min:B[0],max:B[1],start:B[0],end:B[1]}}})}let Le=0,We=0,it={scale:1};var Ye={imageId:t,name:_,width:he*it.scale,height:pe*it.scale,sizeZ:p,theZ:me,sizeT:H,theT:Te,rdefs:{model:"-"},channels:ve,orig_width:he,orig_height:pe,x:Le,y:We,pixelsType:jg(K),zarr:F};let tt=(st=o.datasets[0].coordinateTransformations)==null?void 0:st.find(N=>N.type=="scale"),Qe=(Tt=o.coordinateTransformations)==null?void 0:Tt.find(N=>N.type=="scale");if(tt)for(let N of["x","y","z"])x.forEach((O,k)=>{if(O.name==N){let $=tt.scale[k];if(Qe&&($=$*Qe.scale[k]),O.unit){let B=O.unit.toUpperCase();Ye["pixel_size_"+N]=$,Ye["pixel_size_"+N+"_unit"]=B,LENGTH_UNITS[B]&&(Ye["pixel_size_"+N+"_symbol"]=LENGTH_UNITS[B].symbol)}}});return console.log("Zarr Panel Model...",Ye),Ye}function jg(t){let e="";return t.includes("u")?e+="uint":t.includes("i")?e+="int":t.includes("f")&&(e+="float"),t.includes("8")?e+="64":t.includes("4")?e+="32":t.includes("2")?e+="16":t.includes("1")&&(e+="8"),e}async function Ug(t,e,i,n,r,o){var $;let a=e.multiscales[0].datasets.map(B=>B.path),l=(($=e.multiscales[0].axes)==null?void 0:$.map(B=>B.name))||["t","c","z","y","x"],h=e.arrays;const g=500;let _,x=h[a[0]].shape,T=(o==null?void 0:o.x)||0,M=(o==null?void 0:o.y)||0,D=(o==null?void 0:o.width)||x.at(-1),F=(o==null?void 0:o.height)||x.at(-2),Q;for(let B of a){let X=h[B].shape,fe=D*X.at(-1)/x.at(-1),ae=F*X.at(-2)/x.at(-2);if(fe*ae<g*g){Q={x:Math.floor(T*X.at(-1)/x.at(-1)),y:Math.floor(M*X.at(-2)/x.at(-2)),width:Math.floor(fe),height:Math.floor(ae)},_=B;break}}const K=document.createElement("canvas");if(K.width=Q.width,K.height=Q.height,!_){console.error(`Lowest resolution too large for rendering: > ${g} x ${g}`);return}let Z=t+"/"+_,ee;if(_l[Z])ee=_l[Z];else{let B=new Eh(t+"/"+_);ee=await er(B,{kind:"array"}),_l[Z]=ee}let he=l.indexOf("c"),pe=h[_].shape;pe.length;let p=[],H=[],oe=[],me=[],Te=[];r.forEach((B,te)=>{B.active&&(p.push(te),H.push(Vg(B.color)),oe.push([B.window.start,B.window.end]),me.push(B.color.endsWith(".lut")?B.color:void 0),Te.push(B.reverseIntensity))});let Ae=h[_].shape,ve=Ae.at(-1),Le=Ae.at(-2),We=0,it=0;Q.x<0&&(We=-Q.x,Q.width+=Q.x,Q.x=0),Q.y<0&&(it=-Q.y,Q.height+=Q.y,Q.y=0),Q.x+Q.width>ve&&(Q.width=ve-Q.x),Q.y+Q.height>Le&&(Q.height=Le-Q.y);let Ye=p.map(B=>{let te=[],X=pe.map((ae,Ee)=>Ee==he?(te.push(""+B),B):l[Ee]=="x"?(te.push(`${Q.x}:${Q.x+Q.width}`),Ds(Q.x,Q.x+Q.width)):l[Ee]=="y"?(te.push(`${Q.y}:${Q.y+Q.height}`),Ds(Q.y,Q.y+Q.height)):l[Ee]=="z"?(te.push(""+i),i):l[Ee]=="t"?(te.push(""+n),n):0),fe=`${t}/${_}/${te.join(",")}`;return Go[fe]?(console.log("RETURN cache!",Go[fe]),Go[fe]):yh(ee,X).then(ae=>(console.log("populate cache..."),Go[fe]=ae,ae))}),tt=await Promise.all(Ye),Qe=new Date().getTime(),st=Fg(tt,oe,H,me,Te);console.log("renderTo8bitArray took",new Date().getTime()-Qe,"ms");let Tt=tt[0].shape.at(-1),N=tt[0].shape.at(-2);const O=K.getContext("2d");return O.fillStyle="#ddd",O.fillRect(0,0,K.width,K.height),O.putImageData(new ImageData(st,Tt,N),We,it),K.toDataURL("image/png")}function Vg(t){t.startsWith("#")&&(t=t.slice(1));const e=parseInt(t.slice(0,2),16),i=parseInt(t.slice(2,4),16),n=parseInt(t.slice(4,6),16);return[e,i,n]}var Ko=1.43,Th=ft.Model.extend({figureModel:void 0,defaults:{x:100,y:100,width:512,height:512,zoom:100,dx:0,dy:0,labels:[],deltaT:[],rotation:0,selected:!1,pixel_size_x_symbol:"µm",pixel_size_x_unit:"MICROMETER",rotation_symbol:"°",max_export_dpi:1e3,vertical_flip:!1,horizontal_flip:!1},initialize:function(){this.on("change:zoom change:dx change:dy change:width change:height change:rotation",t=>{this.get("insetRoiId")&&this.figureModel&&(this.silenceTriggers||this.figureModel.trigger("zoomPanUpdated",t))}),this.on("change:shapes",t=>{!this.silenceTriggers&&this.figureModel&&this.figureModel.trigger("shapesUpdated",t)})},setFigureModel(t){this.figureModel=t,this.listenTo(t,"zoomPanUpdated",this.handleZoomPanChange),this.listenTo(t.panels,"remove",e=>{this.handleZoomPanChange(e,!0)}),this.listenTo(t,"shapesUpdated",this.handleShapesChange)},handleShapesChange(t){var e=this.get("insetRoiId");if(!e)return;this.silenceTriggers=!0;let i=(t.get("shapes")||[]).find(n=>n.id==e);i&&this.cropToRoi(i),this.silenceTriggers=!1},handleZoomPanChange(t,e){var i=t.get("insetRoiId");if(!i)return;let n=this.get("shapes");if(n&&(n=n.filter(r=>r.type=="Rectangle"&&r.id==i),n.length>0)){this.silenceTriggers=!0;let r=this.get("shapes");if(e)r=r.filter(o=>o.id!=i);else{let o=t.getViewportAsRect();r=r.map(a=>a.type=="Rectangle"&&a.id==i?{...a,...o}:a)}this.save("shapes",r),this.silenceTriggers=!1}},parse:function(t,e){var i=t.rdefs.model==="greyscale";return delete t.rdefs,t.channels=t.channels.map(function(n){return n.lut&&(n.lut.length>0&&(n.color=n.lut),delete n.lut),i&&n.active&&(n.color="FFFFFF"),n}),t},syncOverride:!0,validate:function(t,e){if(t.theT>=t.sizeT)return"theT too big";if(t.theT<0)return"theT too small";if(t.theZ>=t.sizeZ)return"theZ too big";if(t.theZ<0)return"theZ too small";if(t.z_start!==void 0&&(t.z_start<0||t.z_start>=t.sizeZ))return"z_start out of Z range";if(t.z_end!==void 0&&(t.z_end<0||t.z_end>=t.sizeZ))return"z_end out of Z range"},setId:function(t){var e={imageId:t.imageId,name:t.name,pixelsType:t.pixelsType,pixel_range:t.pixel_range,sizeZ:t.sizeZ,sizeT:t.sizeT,orig_width:t.orig_width,orig_height:t.orig_height,datasetName:t.datasetName,datasetId:t.datasetId,pixel_size_x:t.pixel_size_x,pixel_size_y:t.pixel_size_y,pixel_size_z:t.pixel_size_z,pixel_size_x_symbol:t.pixel_size_x_symbol,pixel_size_z_symbol:t.pixel_size_z_symbol,pixel_size_x_unit:t.pixel_size_x_unit,pixel_size_z_unit:t.pixel_size_z_unit,deltaT:t.deltaT};this.get("theT")>=e.sizeT&&(e.theT=e.sizeT-1),this.get("theZ")>=e.sizeZ&&(e.theZ=e.sizeZ-1),Math.abs(this.get("dx"))>e.orig_width/2&&(e.dx=0),Math.abs(this.get("dy"))>e.orig_height/2&&(e.dy=0);var i=[],n=this.get("channels"),r=t.channels;$e.each(r,function(o,a){var l=C.extend(!0,{},r[a]);l.active=a<n.length&&n[a].active,a<n.length&&(l.color=""+n[a].color),i.push(l)}),e.channels=i,this.set(e)},hide_scalebar:function(){var t=C.extend(!0,{},this.get("scalebar"));t.show=!1,this.save("scalebar",t)},save_scalebar:function(t){var e=C.extend(!0,{},this.get("scalebar")||{}),i=C.extend(!0,e,t);this.save("scalebar",i)},hide_colorbar:function(){var t=C.extend(!0,{},this.get("colorbar"));t.show=!1,this.save("colorbar",t)},save_colorbar:function(t){var e=C.extend(!0,{},this.get("colorbar")||{}),i=C.extend(!0,e,t);this.save("colorbar",i)},show_border:function(t,e){var i={color:"#"+t,strokeWidth:e,showBorder:!0};this.save("border",i)},remove_border:function(){this.setBorderAttr("showBorder",!1)},setBorderColor:function(t){this.setBorderAttr("color","#"+t)},setBorderStrokeWidth:function(t){this.setBorderAttr("strokeWidth",t)},setBorderAttr:function(t,e){var i=this.get("border");if(i!=null){var n={};n[t]=e;var r=C.extend(!0,{},i,n);this.save("border",r)}},is_shape_in_viewport:function(t,e){var i=e,n=function(a,l){return!(a<i.x||l<i.y||a>i.x+i.width||l>i.y+i.height)},r;if(t.type==="Ellipse"||t.type==="Point"?r=[[t.cx,t.cy]]:t.type==="Rectangle"?r=[[t.x,t.y],[t.x,t.y+t.height],[t.x+t.width,t.y],[t.x+t.width,t.y+t.height]]:t.type==="Line"||t.type==="Arrow"?r=[[t.x1,t.y1],[t.x2,t.y2],[(t.x1+t.x2)/2,(t.y1+t.y2)/2]]:(t.type==="Polyline"||t.type==="Polygon")&&(r=t.points.split(" ").map(function(a){return a.split(",")})),r){for(var o=0;o<r.length;o++)if(n(r[o][0],r[o][1]))return!0}return!1},setROIStrokeWidth:function(t){this.setROIAttr("strokeWidth",t)},setROIColor:function(t){this.setROIAttr("strokeColor","#"+t)},setROIAttr:function(t,e){var i=this.get("shapes");if(!(!i||i.length===0)){var n=[];i.forEach(function(r){var o={};o[""+t]=e,n.push(C.extend(!0,{},r,o))}),this.save("shapes",n)}},setPanelRotation(){var t=this.get("rotation")||"0",e=(parseInt(t)+90)%360,i=this.getViewportAsRect(),n=this.get("width"),r=this.get("height"),o=this.get("orig_width")/i.height,a=this.get("orig_height")/i.width,l=Math.min(o,a)*100;return this.save({rotation:e,height:n,width:r,zoom:l}),e},add_shapes:function(t){var e=this.get("shapes"),i=this.getViewportAsRect(),n=this,r=!0,o=[];return e&&e.forEach(function(a){o.push(C.extend(!0,{},a))}),t.forEach(function(a){n.is_shape_in_viewport(a,i)?o.push(C.extend(!0,{},a)):r=!1}),this.save("shapes",o),r},add_labels:function(t){for(var e=this.get("labels"),i=[],n=[],r=0;r<e.length;r++){var o=e[r],a=this.get_label_key(o);n.push(a),i.push(C.extend(!0,{},o))}for(var l=0;l<t.length;l++){var o=t[l],a=this.get_label_key(o);n.includes(a)||i.push(C.extend(!0,{},o))}this.save("labels",i)},create_labels_from_channels:function(t){var e=[];$e.each(this.get("channels"),function(i){if(i.active){var n=i.color.endsWith("lut")?"BBBBBB":i.color;e.push({text:i.label.replaceAll("_","\\_"),size:t.size,position:t.position,color:t.color||n})}}),this.add_labels(e)},get_channels_label_text:function(){var t="";return $e.each(this.get("channels"),function(e){e.active&&(t===""?t=e.label:t=t+" "+e.label)}),t?t.replaceAll("_","\\_"):" "},getDeltaT:function(){var t=this.get("theT");return this.get("deltaT")[t]||0},get_time_label_text:function(t,e,i){var n=function(F){var Q=F+"";return Q.length===1?"0"+Q:Q},r=this.get("theT"),o=this.get("deltaT")[r]||0,a="",l,h,g,_;if(e){_=parseInt(e);var x=this.get("deltaT")[_-1];o=x==null?o:o-x}var T=o<0;o=Math.abs(o);var M=i>0?i+3:2;if(t==="index")T=!1,!isNaN(_)&&this.get("deltaT")[_-1]!=null?a=""+(r-_+1):a=""+(r+1);else if(["milliseconds","ms"].includes(t))a=(o*1e3).toFixed(i)+" ms";else if(["seconds","secs","s"].includes(t))a=o.toFixed(i)+" s";else if(["minutes","mins","m"].includes(t))a=(o/60).toFixed(i)+" mins";else if(["mins:secs","m:s"].includes(t))h=parseInt(o/60),g=(o%60).toFixed(i).padStart(M,"0"),a=h+":"+g;else if(["hrs:mins","h:m"].includes(t))l=parseInt(o/3600),h=(o%3600/60).toFixed(i).padStart(M,"0"),a=l+":"+h;else if(["hrs:mins:secs","h:m:s"].includes(t))l=parseInt(o/3600),h=n(parseInt(o%3600/60)),g=(o%60).toFixed(i).padStart(M,"0"),a=l+":"+h+":"+g;else return"";var D=i>0?"."+"0".repeat(i):"";return["0"+D+" s","0"+D+" mins","0:00"+D,"0:00:00"+D].indexOf(a)>-1&&(T=!1),(T?"-":"")+a},get_zoom_label_text:function(){var t=""+Math.round(this.get("zoom"))+" %";return t},get_name_label_text:function(t,e){var i="";if(t==="image"){if(e==="id")i=""+this.get("imageId");else if(e==="name"){var n=this.get("name").split("/");i=n[n.length-1]}}else t==="dataset"&&(e==="id"?i=""+this.get("datasetId"):e==="name"&&(i=this.get("datasetName")?this.get("datasetName"):"No/Many Datasets"));return i},get_view_label_text:function(t,e,i,n){e==="px"&&(e="pixel"),t==="w"?t="width":t==="h"?t="height":t==="rot"&&(t="rotation");var r=this.get("pixel_size_x_symbol"),o=this.get("pixel_size_z_symbol");o=o||r;var a=this.get("pixel_size_x"),l=this.get("pixel_size_y"),h=this.get("pixel_size_z");h=h||0,a=a||0,l=l||0,n=parseInt(n),n=n??2;var g="";if(t==="z"){if(this.get("z_projection")){var _=this.get("z_start"),x=this.get("z_end");e==="pixel"?g=""+(_+1)+" - "+(x+1):e==="unit"&&(_=(_*h).toFixed(n),x=(x*h).toFixed(n),g=""+_+" "+o+" - "+x+" "+o)}else{var T=this.get("theZ"),M=T,D;i&&(D=parseInt(i)),isNaN(D)||(M=T-D),e==="pixel"?g=""+(M+1):e==="unit"&&(g=""+(M*h).toFixed(n)+" "+o)}return g}var F=this.getViewportAsRect()[t];if(t==="rotation")return""+parseInt(F)+"°";if(e==="pixel")return""+parseInt(F);if(e==="unit"){var Q=["x","width"].includes(t)?a:l;g=""+(F*Q).toFixed(n)+" "+r}return g},get_label_key:function(t){var e=t.text+"_"+t.size+"_"+t.color+"_"+t.position;return e=$e.escape(e),e},edit_labels:function(t){for(var e=this.get("labels"),i=[],n,r,o=0;o<e.length;o++)n=e[o],r=this.get_label_key(n),t.hasOwnProperty(r)?t[r]&&(n=C.extend(!0,{},t[r]),i.push(n)):(n=C.extend(!0,{},n),i.push(n));var a=i.map(h=>this.get_label_key(h)),l=i.filter((h,g)=>g==a.indexOf(this.get_label_key(h)));this.save("labels",l)},save_channel:function(t,e,i){for(var n=this.get("channels"),r=[],o=0;o<n.length;o++)r.push(C.extend(!0,{},n[o]));r[t][e]=i,this.save("channels",r)},save_channels:function(t){this.get("channels");var e=this.get("channels").map((i,n)=>C.extend(!0,{},i,t[n]));this.save("channels",e)},toggle_channel:function(t,e){if(typeof e>"u"&&(e=!this.get("channels")[t].active),this.get("hilo_enabled")&&e){let i=this.get("channels").map(function(n,r){return{active:r==t}});this.save_channels(i)}else this.save_channel(t,"active",e)},save_channel_window:function(t,e){var i=C.extend(!0,{},this.get("channels")[t].window);e=C.extend(!0,i,e),this.save_channel(t,"window",e)},set_z_projection:function(t){var e=this.get("z_projection"),i=this.get("z_start"),n=this.get("z_end"),r=this.get("sizeZ"),o=this.get("theZ"),a=2;t&&!e&&r>1?(i!==void 0&&n!==void 0&&(a=(n-i)/2,a=Math.round(a)),i=Math.max(o-a,0),n=Math.min(o+a,r-1),this.set({z_projection:!0,z_start:i,z_end:n})):!t&&e&&(i!==void 0&&n!==void 0?(o=Math.round((n+i)/2),this.set({z_projection:!1,theZ:o})):this.set("z_projection",!1))},isMaxProjectionBytesExceeded:function(){let t=4;this.get("pixel_range")&&(t=Math.ceil(Math.log2(this.get("pixel_range")[1])/8));let e=this.get("channels").length,i=this.get("orig_width")*this.get("orig_height")*this.get("sizeZ");return t*e*i>MAX_PROJECTION_BYTES},isMaxProjectionExceeded:function(){return this.get("z_projection")&&this.isMaxProjectionBytesExceeded()},multiselectdrag:function(t,e,i,n,r,o,a,l,h){var g=function(F){return(F-t)/i*a+r},_=function(F){return(F-e)/n*l+o},x=g(this.get("x")),T=_(this.get("y")),M=g(this.get("x")+this.get("width"))-x,D=_(this.get("y")+this.get("height"))-T;h?this.save({x,y:T,width:M,height:D}):this.trigger("drag_resize",[x,T,M,D])},cropToRoi:function(t){var e=t.width/t.height,i=this.get("width")/this.get("height"),n,r,o=t.x+t.width/2,a=t.y+t.height/2,l=this.get("orig_width")/2-o,h=this.get("orig_height")/2-a;e<i?(r=this.get("height"),n=e*r):(n=this.get("width"),r=n/e);var g=this.get("orig_width")/t.width,_=this.get("orig_height")/t.height,x=Math.min(g,_)*100,T={width:n,height:r,dx:l,dy:h,zoom:x},M=t.rotation||0;isNaN(M)||(M=-(M-360),T.rotation=M),this.save(T)},getViewportAsRect:function(t,e,i){t=t!==void 0?t:this.get("zoom"),e=e!==void 0?e:this.get("dx"),i=i!==void 0?i:this.get("dy");var n=this.get("rotation");isNaN(n)&&(n=0),n=360-n;var r=this.get("width"),o=this.get("height"),a=this.get("orig_width"),l=this.get("orig_height"),h=r/a,g=o/l,_=Math.max(h,g),x=a/l,T=r/o;if(e===0&&i===0&&t==100&&Math.abs(x-T)<.01)return{x:0,y:0,width:a,height:l,rotation:n};_=_*t/100;var M=r/_,D=o/_,F=a/2-e,Q=l/2-i,K=F-M/2,Z=Q-D/2;return{x:K,y:Z,width:M,height:D,rotation:n}},drag_resize:function(t,e,i,n){this.trigger("drag_resize",[t,e,i,n])},drag_xy:function(t,e,i){if(!(t===0&&e===0)){var n=this.get("x")+t,r=this.get("y")+e,o=this.get("width"),a=this.get("height");return i?this.save({x:n,y:r}):this.trigger("drag_resize",[n,r,o,a]),{x:n,y:r}}},get_centre:function(){return{x:this.get("x")+this.get("width")/2,y:this.get("y")+this.get("height")/2}},is_big_image:function(){return this.get("orig_width")*this.get("orig_height")>MAX_PLANE_SIZE},get_zarr_img_src:async function(t){var e;if(this.is_big_image()&&(e=this.getViewportAsRect(),!t)){var i=Math.max(e.width,e.height)*1.5;e.x=e.x-(i-e.width)/2,e.y=e.y-(i-e.height)/2,e.width=i,e.height=i}return Ug(this.get("imageId"),this.get("zarr"),this.get("theZ"),this.get("theT"),this.get("channels"),e)},get_img_src:async function(t){if(this.get("zarr"))return this.get_zarr_img_src(t);var e=this.get("channels"),i=e.map(function(F,Q){return(F.active?"":"-")+(1+Q)+"|"+F.window.start+":"+F.window.end+"$"+F.color}),n=e.map(function(F){return{reverse:{enabled:!!F.reverseIntensity}}}),r=i.join(","),o=this.get("imageId"),a=this.get("theZ"),l=this.get("theT"),h=this.get("baseUrl"),g="&maps="+JSON.stringify(n).replace(/ /g,""),_="";this.get("z_projection")&&(_="&p=intmax|"+this.get("z_start")+":"+this.get("z_end")),h=h||WEBGATEWAYINDEX.slice(0,-1);var x="";if(this.isMaxProjectionExceeded())h=BASE_WEBFIGURE_URL+"max_projection_range_exceeded/";else if(this.is_big_image()){h=BASE_WEBFIGURE_URL+"render_scaled_region/";var T=this.getViewportAsRect();if(!t){var M=Math.max(T.width,T.height)*1.5;T.x=T.x-(M-T.width)/2,T.y=T.y-(M-T.height)/2,T.width=M,T.height=M}var D=[T.x,T.y,T.width,T.height].map(function(F){return parseInt(F)});x="&region="+D.join(",")}else h+="/render_image/";return h+o+"/"+a+"/"+l+"/?c="+r+_+g+x+"&m=c"},_viewport_css:function(t,e,i,n,r,o,a){var l=100*(r/2-t)/i,h=100*(o/2-e)/n;a==null&&(a=this.get("rotation")||0);var g=this.get("vertical_flip")?-1:1,_=this.get("horizontal_flip")?-1:1,x={left:t,top:e,width:i,height:n,"-webkit-transform-origin":l+"% "+h+"%","transform-origin":l+"% "+h+"%","-webkit-transform":"scaleX("+_+") scaleY("+g+") rotate("+a+"deg)",transform:"scaleX("+_+") scaleY("+g+") rotate("+a+"deg)"};return x},get_vp_img_css:function(t,e,i,n,r){return this.isMaxProjectionExceeded()?{left:0,top:(i-e)/2,width:e,height:e}:this.is_big_image()?this.get_vp_big_image_css(t,e,i,n,r):this.get_vp_full_plane_css(t,e,i,n,r)},get_vp_big_image_css:function(t,e,i,n,r){var o=Math.abs(t-this.get("zoom"))>1,a=n!==void 0&&r!==void 0,l=Math.max(e,i)*1.5,h,g,_=l,x=l;if(o)return _=l*t/this.get("zoom"),x=l*t/this.get("zoom"),g=r||(i-x)/2,h=n||(e-_)/2,this._viewport_css(h,g,_,x,e,i);h=(e-l)/2,g=(i-l)/2;var T=parseInt(this.get("width"),10),M=parseInt(this.get("height"),10);e=parseInt(e),i=parseInt(i);var D=T!==_||M!==x;return D&&(g=(i-x)/2,h=(e-_)/2,a&&(h+=n,g+=r)),this._viewport_css(h,g,_,x,e,i)},get_vp_full_plane_css:function(t,e,i,n,r){var o=n,a=r,l=this.get("orig_width"),h=this.get("orig_height");typeof o>"u"&&(o=this.get("dx")),typeof a>"u"&&(a=this.get("dy")),t=t||100;var g=0,_=0,x=e*(t/100),T=i*(t/100),M=l/h,D=e/i;Math.abs(M-D)<.01||(M<D?T=x/M:x=T*M);var F=e/l,Q=i/h,K=Math.max(F,Q);return _=(T-i)/2,g=(x-e)/2,o=o*(t/100),a=a*(t/100),g=o*K-g,_=a*K-_,this._viewport_css(g,_,x,T,e,i)},getPanelDpi:function(t,e,i){t=t||this.get("width"),e=e||this.get("height"),i=i||this.get("zoom");var n=this.get_vp_full_plane_css(i,t,e).width,r=this.get("orig_width"),o=r/n,a=o*72;return a.toFixed(0)},getBoundingBoxTop:function(){var t=this.get("labels"),e=this.get("y"),i=t.filter(function(l){return l.position==="top"}),n=0;n=i.reduce(function(l,h){return l+Ko*h.size},n);var r=0,o=this.get("colorbar");if(o&&o.show){var a=Number(o.font_size);o.position=="top"?(r=o.gap+o.thickness+a+o.mark_len+o.tick_margin,r=Math.max(0,r)):(o.position=="left"||o.position=="right")&&(r=a/2)}return e-Math.max(n,r)},getBoundingBoxLeft:function(){var h,g;var t=this.get("labels"),e=this.get("x"),i=t.filter(function(_){return _.position==="leftvert"}),n=0;n=i.reduce(function(_,x){return _+Ko*x.size},n),i=t.filter(function(_){return _.position==="left"});for(const _ of i){const x=this.measureTextSize(_.text,_.size+"px");n=Math.max(n,x)}var r="",o="";for(const _ of this.get("channels"))if(_.active){r=(h=_.window)==null?void 0:h.start,o=(g=_.window)==null?void 0:g.end;break}var a=0,l=this.get("colorbar");if(l&&l.show){let _=Math.max(0,Math.ceil(-Math.log10((o-r)/l.num_ticks)));if(r=r.toFixed(_),o=o.toFixed(_),l.position=="left"){const x=this.measureTextSize(o,l.font_size+"px");a=l.gap+l.thickness+x+l.mark_len+l.tick_margin,a=Math.max(0,a)}else(l.position=="top"||l.position=="bottom")&&(a=this.measureTextSize(r,l.font_size+"px"),a=a/2)}return e-Math.max(n,a)},getBoundingBoxRight:function(){var h,g;var t=this.get("labels"),e=this.get("x")+this.get("width"),i=t.filter(function(_){return _.position==="rightvert"}),n=0;n=i.reduce(function(_,x){return _+Ko*x.size},n),i=t.filter(function(_){return _.position==="right"});for(const _ of i){const x=this.measureTextSize(_.text,_.size+"px");n=Math.max(n,x)}var r="",o="";for(const _ of this.get("channels"))if(_.active){r=(h=_.window)==null?void 0:h.start,o=(g=_.window)==null?void 0:g.end;break}var a=0,l=this.get("colorbar");if(l&&l.show){let _=Math.max(0,Math.ceil(-Math.log10((o-r)/l.num_ticks)));if(r=r.toFixed(_),o=o.toFixed(_),l.position=="right"){const x=this.measureTextSize(o,l.font_size+"px");a=l.gap+l.thickness+x+l.mark_len+l.tick_margin,a=Math.max(0,a)}else(l.position=="top"||l.position=="bottom")&&(a=this.measureTextSize(o,l.font_size+"px"),a=a/2)}return e+Math.max(n,a)},getBoundingBoxBottom:function(){var t=this.get("labels"),e=this.get("y")+this.get("height"),i=t.filter(function(l){return l.position==="bottom"}),n=0;n=i.reduce(function(l,h){return l+Ko*h.size},n);var r=0,o=this.get("colorbar");if(o&&o.show){var a=Number(o.font_size);o.position=="bottom"?(r=o.gap+o.thickness+a+o.mark_len+o.tick_margin,r=Math.max(0,r)):(o.position=="left"||o.position=="right")&&(r=a/2)}return e+Math.max(n,r)},measureTextSize:function(t,e){var i="bs-font-sans-serif",n=document.createElement("canvas"),r=n.getContext("2d");r.font=`${e} ${i}`;var o=r.measureText(t);return r=null,n=null,o.width},regionOverlaps:function(t){var e=this.get("x"),i=e+this.get("width"),n=this.get("y"),r=n+this.get("height"),o=t.x,a=o+t.width,l=t.y,h=l+t.height;return e<a&&o<i&&n<h&&l<r}}),kh=ft.Collection.extend({model:Th,getSelected:function(){var t=this.filter(function(e){return e.get("selected")});return new kh(t)},getAverage:function(t){return this.getSum(t)/this.length},getAverageWH:function(){var t=this.reduce(function(e,i){return e+i.get("width")/i.get("height")},0);return t/this.length},getSum:function(t){return this.reduce(function(e,i){return e+(i.get(t)||0)},0)},getMax:function(t){return this.reduce(function(e,i){return Math.max(e,i.get(t))},0)},getMin:function(t){return this.reduce(function(e,i){return Math.min(e,i.get(t))},1/0)},allTrue:function(t){return this.reduce(function(e,i){return e&&i.get(t)},!0)},allEqual:function(t){var e=this.pluck(t);return $e.max(e)===$e.min(e)},getIfEqual:function(t){var e=this.pluck(t);if($e.max(e)===$e.min(e))return $e.max(e)},getDeltaTIfEqual:function(){var t=this.map(function(e){return e.getDeltaT()});if($e.max(t)===$e.min(t))return $e.max(t)},createLabelsFromTags:function(t){var e=this.map(function(n){return n.get("imageId")});e="image="+e.join("&image=");var i=WEBINDEX_URL+"api/annotations/?type=tag&parents=true&limit=1000&"+e;C.getJSON(i,(function(n){n.hasOwnProperty("parents")&&n.parents.annotations.forEach(function(o){let a=o.link.parent.class,l=""+o.link.parent.id,h=n.parents.lineage[a][l];for(let g=0;g<h.length;g++){let _=JSON.parse(JSON.stringify(o));_.link.parent.id=h[g].id,n.annotations.push(_)}});var r=n.annotations.reduce(function(o,a){var l=a.link.parent.id;return o[l]||(o[l]={}),o[l][a.id]=a.textValue.replaceAll("_","\\_"),o},{});this.forEach(function(o){var a=o.get("imageId"),l=$e.values(r[a]).map(function(h){return{text:h,size:t.size,position:t.position,color:t.color}});o.add_labels(l)})}).bind(this))}});JSON.stringify=JSON.stringify||function(t){var e=typeof t;if(e!="object"||t===null)return e=="string"&&(t='"'+t+'"'),String(t);var i,n,r=[],o=t&&t.constructor==Array;for(i in t)n=t[i],e=typeof n,e=="string"?n='"'+n+'"':e=="object"&&n!==null&&(n=JSON.stringify(n)),r.push((o?"":'"'+i+'":')+String(n));return(o?"[":"{")+String(r)+(o?"]":"}")};String.prototype.endsWith||(String.prototype.endsWith=function(t,e){return e<this.length?e|=0:e=this.length,this.substr(e-t.length,t.length)===t});const Yg=function(t){var e=JSON.stringify(t);Hi("exportJsonModal"),C("#exportJsonModal textarea").text(e)},qg=function(t){window.sessionStorage.setItem(LOCAL_STORAGE_RECOVERED_FIGURE,JSON.stringify(t))},Ch=function(){window.sessionStorage.removeItem(LOCAL_STORAGE_RECOVERED_FIGURE)},Ah=function(){var t=window.sessionStorage,e=t.getItem(LOCAL_STORAGE_RECOVERED_FIGURE),i;try{i=JSON.parse(e)}catch{console.log("recovered Figure not valid JSON "+e)}return i};var Xg=new Ji("#confirmModal");function Pn(t,e,i,n){var r=C("#confirmModal"),o=C(".modal-title",r),a=C(".modal-body",r),l=C(".modal-footer",r),h=C(".btn:first",l);o.html(t),a.html("<p>"+e+"<p>"),l.empty(),$e.each(i,function(g){h.clone().text(g).appendTo(l)}),C(".btn",l).removeClass("btn-primary").addClass("btn-default").last().removeClass("btn-default").addClass("btn-primary"),Xg.show(),r.one("hide.bs.modal",function(){C("#confirmModal .modal-footer .btn").off("click"),n&&n()}),C("#confirmModal .modal-footer .btn").one("click",function(g){r.off("hide.bs.modal");var _=C(g.target).text();n&&n(_)})}window.OME===void 0&&(window.OME={});let fo=[];OME.setOpenWithEnabledHandler=function(t,e){fo.forEach(function(i){i.id===t&&(i.isEnabled=function(){var n=Array.from(arguments),r=!1;try{r=e.apply(this,n)}catch(o){console.log("Open with "+label+": "+o)}return r})})};OME.setOpenWithUrlProvider=function(t,e){fo.forEach(function(i){i.id===t&&(i.getUrl=e)})};C.prototype.slider_old=C.prototype.slider;C.prototype.slider=function(){var t=C.prototype.slider_old.apply(this,arguments);return this.find(".ui-slider-handle").bind("keydown",function(){return!1}),t};function Js(t,e,i,n,r){let o=Math.sqrt(Math.pow(t-i,2)+Math.pow(e-n,2)),a=Math.atan2(e-n,t-i);a=a+r*(Math.PI/180);let l=Math.cos(a)*o,h=Math.sin(a)*o;return{x:i+l,y:n+h}}C(function(){C("#previewInfoTabs a").click(function(t){t.preventDefault(),C(this).tab("show")}),navigator.platform.toUpperCase().indexOf("MAC")>-1&&C("ul.dropdown-menu li a span").each(function(){var t=C(this);t.text(t.text().replace("Ctrl+","⌘"))}),C.getJSON(WEBGATEWAYINDEX+"open_with/",function(t){t&&t.open_with_options&&(fo=t.open_with_options,fo.forEach(function(e){e.script_url&&C.getScript(e.script_url)}))})});function os(){C(".modal").each(function(){const t=Ji.getInstance(this);t&&t.hide()})}function Hi(t,e){let i=Ji.getInstance(document.getElementById(t));i||(i=new Ji("#"+t)),i.show(e)}function Mr(t){let e=Ji.getInstance(document.getElementById(t));e||(e=new Ji("#"+t)),e.hide()}async function Yr(t){return fetch(t,{mode:"cors",credentials:"include"}).then(i=>i.json())}const Ih=1e8;function Zg(){return parseInt(Math.random()*Ih)}function W2(t){return parseInt(t*Math.PI%Ih)}function Gg(t){let e=t.map(o=>o.insetRoiId).filter(Boolean),i=[];t.forEach(o=>{o.shapes&&o.shapes.forEach(a=>{a.id&&i.push(a.id)})});let n=e.filter(o=>i.includes(o));return t.map(o=>(n.includes(o.insetRoiId)&&(o.insetRoiId=W2(o.insetRoiId)),o.shapes&&o.shapes.forEach(a=>{n.includes(a.id)&&(a.id=W2(a.id))}),o))}function Kg(t,e,i){const n=new File([t],i,{type:e}),r=document.createElement("a"),o=URL.createObjectURL(n);r.href=o,r.download=n.name,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(o)}var Jg=8,_n=ft.Model.extend({defaults:{canEdit:!0,unsaved:!1,canvas_width:13e3,canvas_height:8e3,paper_width:595,paper_height:842,page_color:"FFFFFF",page_count:1,page_col_count:1,paper_spacing:50,orientation:"vertical",page_size:"A4",width_mm:210,height_mm:297,legend:"",legend_collapsed:!0,loading_count:0},initialize:function(){this.panels=new kh,this.panels.on("add",t=>{t.setFigureModel(this)}),this.notifySelectionChange=$e.debounce(this.notifySelectionChange,10)},syncOverride:function(t,e,i,n){this.set("unsaved",!0)},load_from_OMERO:function(t,e){var i=BASE_WEBFIGURE_URL+"load_web_figure/"+t+"/",n=this;Yr(i).then(r=>{r.fileId=t,n.load_from_JSON(r),n.set("unsaved",!1)})},load_from_JSON:function(t){var e=this;t=e.version_transform(t);var i=t.figureName||"UN-NAMED",n={fileId:t.fileId,figureName:i,groupId:t.group?t.group.id:void 0,canEdit:t.canEdit,paper_width:t.paper_width,paper_height:t.paper_height,width_mm:t.width_mm,height_mm:t.height_mm,page_size:t.page_size||"A4",page_count:t.page_count,paper_spacing:t.paper_spacing,page_col_count:t.page_col_count,orientation:t.orientation,legend:t.legend,legend_collapsed:t.legend_collapsed,page_color:t.page_color};n=C.extend({},e.defaults,n),e.set(n),$e.each(t.panels,function(r){r.selected=!1,e.panels.create(r)}),setTimeout(function(){e.trigger("reset_undo_redo")},50)},version_transform:function(t){var e=t.version||0,i=this;if(e<1&&$e.each(t.panels,function(a){var l=a.pixel_size;a.pixel_size_x=l,a.pixel_size_y=l,delete a.pixel_size}),e<2&&(console.log("Transforming to VERSION 2"),$e.each(t.panels,function(a){a.shapes&&(a.shapes=a.shapes.map(function(l){return l.type==="Ellipse"&&(l.x=l.cx,l.y=l.cy,l.radiusX=l.rx,l.radiusY=l.ry,delete l.cx,delete l.cy,delete l.rx,delete l.ry),l}))})),e<3&&(console.log("Transforming to VERSION 3"),$e.each(t.panels,function(a){if(a.export_dpi&&(a.min_export_dpi=a.export_dpi,delete a.export_dpi),a.shapes&&a.shapes.length>0){var l=new Th(a),h=l.getViewportAsRect().width,g=l.get("width"),_=g/h;a.shapes=a.shapes.map(function(x){var T=x.strokeWidth||1;return T=T*_,T>.875?T=parseInt(Math.round(T)):T>.625?T=.75:T>.375?T=.5:T=.25,x.strokeWidth=T,x})}})),e<4&&(console.log("Transforming to VERSION 4"),$e.each(t.panels,function(a){a.shapes&&a.shapes.length>0&&(a.shapes=a.shapes.map(function(l){return l.strokeWidth=l.strokeWidth||l.lineWidth||1,l.lineWidth&&delete l.lineWidth,l}))})),e<5){console.log("Transforming to VERSION 5"),$e.each(t.panels,function(a){if(a.scalebar&&!a.scalebar.units){var l=a.pixel_size_x_unit||"MICROMETER";a.scalebar.units=l}});var n=[];if($e.each(t.panels,function(a){a.deltaT&&n.indexOf(a.imageId)==-1&&n.push(a.imageId)}),console.log("Load timestamps for images",n),n.length>0){var r=BASE_WEBFIGURE_URL+"timestamps/";r+="?image="+n.join("&image="),C.getJSON(r,function(a){i.panels.forEach(function(l){var h=l.get("imageId");a[h]&&a[h].length>0&&l.set("deltaT",a[h])})})}}if(e<6){console.log("Transforming to VERSION 6");var n=[];if($e.each(t.panels,function(l){n.indexOf(l.imageId)==-1&&n.push(l.imageId)}),n.length>0){let l=BASE_WEBFIGURE_URL+"z_scale/";l+="?image="+n.join("&image="),C.getJSON(l,function(h){i.panels.forEach(function(g){var _=g.get("imageId");h[_]&&(g.set("pixel_size_z",h[_].valueZ),g.set("pixel_size_z_symbol",h[_].symbolZ),g.set("pixel_size_z_unit",h[_].unitZ))})})}$e.each(t.panels,function(l){for(var h=0;h<l.labels.length;h++){const g=l.labels[h];g.time&&(g.text="[time."+g.time+"]",delete g.time)}})}if(e<7&&(console.log("Transforming to VERSION 7"),$e.each(t.panels,function(a){a.scalebar&&!a.scalebar.height&&(a.scalebar.height=3)})),e<8){console.log("Transforming to VERSION 8");var n=t.panels.map(l=>l.imageId);if(console.log("Load pixelsType for images",n),n.length>0){var o=BASE_WEBFIGURE_URL+"pixels_type/";o+="?image="+n.join("&image="),Yr(o).then(l=>{i.panels.forEach(function(h){var g=h.get("imageId");l[g]&&h.set({pixelsType:l[g].pixelsType,pixel_range:l[g].pixel_range})})})}}return t},figure_toJSON:function(){var t=[];this.panels.each(function(i){t.push(i.toJSON())});var e={version:Jg,panels:t,paper_width:this.get("paper_width"),paper_height:this.get("paper_height"),page_size:this.get("page_size"),page_count:this.get("page_count"),paper_spacing:this.get("paper_spacing"),page_col_count:this.get("page_col_count"),height_mm:this.get("height_mm"),width_mm:this.get("width_mm"),orientation:this.get("orientation"),legend:this.get("legend"),legend_collapsed:this.get("legend_collapsed"),page_color:this.get("page_color")};return this.get("figureName")&&(e.figureName=this.get("figureName")),this.get("fileId")&&(e.fileId=this.get("fileId")),e},load_from_url:function(t){console.log("load_from_url...",t),C.getJSON(t,(function(e){this.load_from_JSON(e),this.set("unsaved",!1)}).bind(this)).fail(function(){alert("Failed to load figure from URL: "+t)})},figure_fromJSON:function(t){var e=JSON.parse(t);delete e.fileId,this.load_from_JSON(e),this.set("unsaved",!0)},recoverFromLocalStorage:function(){var t=Ah();if(t){this.figure_fromJSON(JSON.stringify(t)),Ch();var i=`<p>This figure has been recovered from the browser's local storage and
                        the local storage cleared.</p>`;Pn("Figure recovered",i,["OK"])}else{var e="No valid figure was found in local storage.";Pn("No Figure found",e,["OK"])}},save_to_download:function(t){let e=this.figure_toJSON();t.figureName&&(e.figureName=t.figureName);let i=e.figureName||"figure",n=JSON.stringify(this.figure_toJSON());Kg(n,"application/json",i+".json"),this.set({unsaved:!1})},save_to_OMERO:function(t){var e=this,i=this.figure_toJSON(),n=BASE_OMEROWEB_URL+"figure/save_web_figure/",r={};t.fileId&&(r.fileId=t.fileId),t.figureName&&(i.figureName=t.figureName),r.figureJSON=JSON.stringify(i),C.post(n,r).done(function(o){var a={fileId:+o,unsaved:!1};t.figureName&&(a.figureName=t.figureName),e.set(a),t.success&&t.success(o)}).fail(function(o){console.log("Save Error",o.responseText),qg(i);var a=`Save Error: ${o.status}`,l=`
                        <p>The current figure has failed to Save to OMERO.</p>
                        <p>A copy has been placed in your browser's local storage for this session
                        and can be recovered with File > Local Storage or by reloading the app.</p>
                        <p>Reloading will also check your connection to OMERO.</p>
                    `,h=["Close","Reload in new Tab"],g=function(_){if(_==="Reload in new Tab"){var x=BASE_WEBFIGURE_URL+"recover/";window.open(x,"_blank")}};Pn(a,l,h,g)})},clearFigure:function(){var t=this;t.unset("fileId"),t.unset("groupId"),t.delete_panels(),t.unset("figureName"),t.set(t.defaults),t.trigger("reset_undo_redo")},checkSaveAndClear:function(t,e){var i=this,n=function(){i.clearFigure(),t&&t()};if(i.get("unsaved")){var r="Save",o=i.get("canEdit");o||(r="Save a Copy");let a=["Don't Save",r];e&&(a=["Canel"].concat(a)),Pn("Save Changes to Figure?","Your changes will be lost if you don't save them",a,function(l){if(l===r){var h={},g=i.get("fileId");if(g&&o)h.fileId=g;else{var _=i.getDefaultFigureName(),x=prompt("Enter Figure Name",_);h.figureName=x||_}h.success=n,i.save_to_OMERO(h)}else l==="Don't Save"&&(i.set("unsaved",!1),n())})}else n()},addImages:function(t){this.clearSelected();for(var e=this.get("paper_width"),i=this.get("paper_height"),n=Math.ceil(Math.sqrt(t.length)),r=Math.ceil(t.length/n),o={x:e/2,y:i/2},a,l,h,g={px:a,py:l,c:o,spacer:h,colCount:n,rowCount:r,paper_width:e},_=[],x=0;x<t.length;x++){if(console.log("Adding image",t[x]),t[x].includes(".zarr")){this.importZarrImage(t[x],g,x);continue}var T=t[x].replace("|",""),M=parseInt(T,10)+"",D=BASE_WEBFIGURE_URL+"imgData/"+M+"/";M=="NaN"?_.push(T):this.importImage(D,g,void 0,x)}if(_.length>0){var F=_.length>1?"s":"";alert("Could not add image with invalid ID"+F+": "+_.join(", "))}},updateCoordsAndPanelCoords(t,e,i){console.log("importZarrImage coords.spacer coords:",e.spacer,e),e.spacer=e.spacer||t.orig_width/20;var n=e.colCount*(t.orig_width+e.spacer)-e.spacer,r=e.rowCount*(t.orig_height+e.spacer)-e.spacer;e.scale=e.paper_width/(n+2*e.spacer),e.scale=Math.min(e.scale,1),e.px=e.px||e.c.x-n*e.scale/2,e.py=e.py||e.c.y-r*e.scale/2;var o=parseInt(i/e.colCount,10),a=i%e.colCount,l=e.px+(t.orig_width+e.spacer)*e.scale*a,h=e.py+(t.orig_height+e.spacer)*e.scale*o;t.x=l,t.y=h,t.width=t.orig_width*e.scale,t.height=t.orig_height*e.scale},importZarrImage:async function(t,e,i){this.set("loading_count",this.get("loading_count")+1);let n=await Hg(t);this.updateCoordsAndPanelCoords(n,e,i),this.set("loading_count",this.get("loading_count")-1),this.panels.create(n,{parse:!0}).set("selected",!0),this.notifySelectionChange()},importImage:function(t,e,i,n){var r=this;n==null&&(n=0),this.set("loading_count",this.get("loading_count")+1),fetch(t,{mode:"cors",credentials:"include",headers:{"Content-Type":"application/json"}}).then(a=>a.json()).then(a=>{if(console.log("data",a),r.set("loading_count",r.get("loading_count")-1),a.Exception||a.ConcurrencyException){message=a.Exception||"ConcurrencyException",alert(`Image loading from ${t} included an Error: ${message}`);return}var l={imageId:a.id,name:a.meta.imageName,width:a.size.width*e.scale,height:a.size.height*e.scale,sizeZ:a.size.z,theZ:a.rdefs.defaultZ,sizeT:a.size.t,theT:a.rdefs.defaultT,rdefs:{model:a.rdefs.model},channels:a.channels,orig_width:a.size.width,orig_height:a.size.height,x:0,y:0,datasetName:a.meta.datasetName,datasetId:a.meta.datasetId,pixel_size_x:a.pixel_size.valueX,pixel_size_y:a.pixel_size.valueY,pixel_size_z:a.pixel_size.valueZ,pixel_size_x_symbol:a.pixel_size.symbolX,pixel_size_z_symbol:a.pixel_size.symbolZ,pixel_size_x_unit:a.pixel_size.unitX,pixel_size_z_unit:a.pixel_size.unitZ,deltaT:a.deltaT,pixelsType:a.meta.pixelsType,pixel_range:a.pixel_range};i&&(l.baseUrl=i),r.updateCoordsAndPanelCoords(l,e,n),r.panels.create(l,{parse:!0}).set("selected",!0),r.notifySelectionChange()}).catch(a=>{alert("Image not found on the server, or you don't have permission to access it at "+t)})},getFigureSize:function(){var t=this.get("page_count"),e=this.get("page_col_count"),i=this.get("paper_spacing"),n=this.get("paper_width"),r=this.get("paper_height"),o;o=Math.ceil(t/e);var a=e*n+(e-1)*i,l=o*r+(o-1)*i;return{w:a,h:l,cols:e,rows:o}},getPageOffset:function(t){var e=this.get("paper_spacing"),i=this.get("paper_width"),n=this.get("paper_height"),r=e+i,o=e+n,a={};return t.x!==void 0&&(a.x=t.x%r),t.y!==void 0&&(a.y=t.y%o),a},getDefaultFigureName:function(){const t=r=>`${r}`.padStart(2,"0");var e=new Date,i=[e.getFullYear(),t(e.getMonth()+1),t(e.getDate())].join("-"),n=[t(e.getHours()),t(e.getMinutes()),t(e.getSeconds())].join("-");return"Figure_"+i+"_"+n},nudge_right:function(){this.nudge("x",10)},nudge_left:function(){this.nudge("x",-10)},nudge_down:function(){this.nudge("y",10)},nudge_up:function(){this.nudge("y",-10)},nudge:function(t,e){var i=this.getSelected(),n;i.forEach(function(r){n=r.get(t),r.save(t,n+e)})},align_left:function(){var t=this.getSelected(),e=[];t.forEach(function(n){e.push(n.get("x"))});var i=Math.min.apply(window,e);t.forEach(function(n){n.save("x",i)})},align_right:function(){var t=this.getSelected(),e=[];t.forEach(function(n){e.push(n.get("x")+n.get("width"))});var i=Math.max.apply(window,e);t.forEach(function(n){n.save("x",i-n.get("width"))})},align_top:function(){var t=this.getSelected(),e=[];t.forEach(function(n){e.push(n.get("y"))});var i=Math.min.apply(window,e);t.forEach(function(n){n.save("y",i)})},align_bottom:function(){var t=this.getSelected(),e=[];t.forEach(function(n){e.push(n.get("y")+n.get("height"))});var i=Math.max.apply(window,e);t.forEach(function(n){n.save("y",i-n.get("height"))})},align_grid:function(t){for(var e=this.getSelected(),i=this.get_top_left_panel(e),n=i.get("x"),r=i.get("y"),o=[],a=[i],l=i;l;)M=l.get_centre(),l=this.get_panel_at(M.x+l.get("width"),M.y,e),typeof l>"u"&&(o.push(a),M=a[0].get_centre(),l=this.get_panel_at(M.x,M.y+a[0].get("height"),e),a=[]),l&&a.push(l);var h=i.get("width")/20;isNaN(parseFloat(t))||(h=parseFloat(t));for(var g=n,_=r,x=0,T=0;T<o.length;T++){a=o[T];for(var M=0;M<a.length;M++){let D=a[M];D.save({x:g,y:_}),x=Math.max(x,D.get("height")),g=g+h+D.get("width")}_=_+h+x,g=n}},get_panel_at:function(t,e,i){return i.find(function(n){return n.get("x")<t&&n.get("x")+n.get("width")>t&&n.get("y")<e&&n.get("y")+n.get("height")>e})},get_top_left_panel:function(t){return t.reduce(function(e,i){return i.get("x")+i.get("y")<e.get("x")+e.get("y")?i:e})},align_size:function(t,e){var i=this.getSelected(),n=this.get_top_left_panel(i),r=t?n.get("width"):!1,o=e?n.get("height"):!1,a,l;i.forEach(function(h){r&&o?(a=r,l=o):r?(a=r,l=r/h.get("width")*h.get("height")):o&&(l=o,a=o/h.get("height")*h.get("width")),h.set({width:a,height:l})})},align_magnification:function(){var t=this.getSelected(),e=this.get_top_left_panel(t),i=e.get("pixel_size_x"),n;if(!i){alert("Top-left panel has no pixel size set");return}var r=function(o){var a=o.get("pixel_size_x_unit"),l=o.get("pixel_size_x");if(a==="MICROMETER")return{value:l};if(!l)return{value:l};var h=BASE_WEBFIGURE_URL+"unit_conversion/"+l+"/"+a+"/MICROMETER/";return C.getJSON(h)};C.when(r(e)).then(function(o){i=o.value,n=i*e.getPanelDpi(),t.forEach(function(a){a.cid!==e.cid&&C.when(r(a)).then(function(l){var h=a.getPanelDpi(),g=l.value;if(g){var _=h*g,x=_/n,T=a.get("width")*x,M=a.get("height")*x;a.set({width:T,height:M})}})})})},drag_xy:function(t,e,i){if(!(t===0&&e===0)){var n=1e4,r=1e4,o,a=this.getSelected();a.forEach(function(l){o=l.drag_xy(t,e,i),n=Math.min(n,o.x),r=Math.min(r,o.y)}),this.trigger("drag_xy",[n,r,i])}},multiselectdrag:function(t,e,i,n,r,o,a,l,h){var g=this.getSelected();g.forEach(function(_){_.multiselectdrag(t,e,i,n,r,o,a,l,h)})},setSelected:function(t,e){(!t.get("selected")||e)&&(this.clearSelected(!1),t.set("selected",!0),this.notifySelectionChange())},select_all:function(){this.panels.each(function(t){t.set("selected",!0)}),this.notifySelectionChange()},addSelected:function(t){t.set("selected",!0),this.notifySelectionChange()},clearSelected:function(t){this.panels.each(function(e){e.set("selected",!1)}),t!==!1&&this.notifySelectionChange()},selectByRegion:function(t){this.panels.each(function(e){e.regionOverlaps(t)&&e.set("selected",!0)}),this.notifySelectionChange()},getSelected:function(){return this.panels.getSelected()},deleteSelected:function(){for(var t=this.getSelected(),e;e=t.first();)e.destroy();this.notifySelectionChange()},delete_panels:function(){var t=[];this.panels.each(function(i){t.push(i)});for(var e=t.length-1;e>=0;e--)t[e].destroy();this.notifySelectionChange()},getCropCoordinates:function(){var t=10,e=Math.min.apply(window,this.panels.map(function(l){return l.getBoundingBoxTop()})),i=Math.min.apply(window,this.panels.map(function(l){return l.getBoundingBoxLeft()})),n=Math.max.apply(window,this.panels.map(function(l){return l.getBoundingBoxRight()})),r=Math.max.apply(window,this.panels.map(function(l){return l.getBoundingBoxBottom()})),o=t-i,a=t-e;return{paper_width:n-i+2*t,paper_height:r-e+2*t,dx:o,dy:a}},notifySelectionChange:function(){this.trigger("change:selection")}}),Oh={exports:{}};(function(t){(function(e,i,n){if(!e)return;for(var r={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},o={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},a={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},l={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},h,g=1;g<20;++g)r[111+g]="f"+g;for(g=0;g<=9;++g)r[g+96]=g.toString();function _(H,oe,me){if(H.addEventListener){H.addEventListener(oe,me,!1);return}H.attachEvent("on"+oe,me)}function x(H){if(H.type=="keypress"){var oe=String.fromCharCode(H.which);return H.shiftKey||(oe=oe.toLowerCase()),oe}return r[H.which]?r[H.which]:o[H.which]?o[H.which]:String.fromCharCode(H.which).toLowerCase()}function T(H,oe){return H.sort().join(",")===oe.sort().join(",")}function M(H){var oe=[];return H.shiftKey&&oe.push("shift"),H.altKey&&oe.push("alt"),H.ctrlKey&&oe.push("ctrl"),H.metaKey&&oe.push("meta"),oe}function D(H){if(H.preventDefault){H.preventDefault();return}H.returnValue=!1}function F(H){if(H.stopPropagation){H.stopPropagation();return}H.cancelBubble=!0}function Q(H){return H=="shift"||H=="ctrl"||H=="alt"||H=="meta"}function K(){if(!h){h={};for(var H in r)H>95&&H<112||r.hasOwnProperty(H)&&(h[r[H]]=H)}return h}function Z(H,oe,me){return me||(me=K()[H]?"keydown":"keypress"),me=="keypress"&&oe.length&&(me="keydown"),me}function ee(H){return H==="+"?["+"]:(H=H.replace(/\+{2}/g,"+plus"),H.split("+"))}function he(H,oe){var me,Te,Ae,ve=[];for(me=ee(H),Ae=0;Ae<me.length;++Ae)Te=me[Ae],l[Te]&&(Te=l[Te]),oe&&oe!="keypress"&&a[Te]&&(Te=a[Te],ve.push("shift")),Q(Te)&&ve.push(Te);return oe=Z(Te,ve,oe),{key:Te,modifiers:ve,action:oe}}function pe(H,oe){return H===null||H===i?!1:H===oe?!0:pe(H.parentNode,oe)}function p(H){var oe=this;if(H=H||i,!(oe instanceof p))return new p(H);oe.target=H,oe._callbacks={},oe._directMap={};var me={},Te,Ae=!1,ve=!1,Le=!1;function We(N){N=N||{};var O=!1,k;for(k in me){if(N[k]){O=!0;continue}me[k]=0}O||(Le=!1)}function it(N,O,k,$,B,te){var X,fe,ae=[],Ee=k.type;if(!oe._callbacks[N])return[];for(Ee=="keyup"&&Q(N)&&(O=[N]),X=0;X<oe._callbacks[N].length;++X)if(fe=oe._callbacks[N][X],!(!$&&fe.seq&&me[fe.seq]!=fe.level)&&Ee==fe.action&&(Ee=="keypress"&&!k.metaKey&&!k.ctrlKey||T(O,fe.modifiers))){var He=!$&&fe.combo==B,Ge=$&&fe.seq==$&&fe.level==te;(He||Ge)&&oe._callbacks[N].splice(X,1),ae.push(fe)}return ae}function Ye(N,O,k,$){oe.stopCallback(O,O.target||O.srcElement,k,$)||N(O,k)===!1&&(D(O),F(O))}oe._handleKey=function(N,O,k){var $=it(N,O,k),B,te={},X=0,fe=!1;for(B=0;B<$.length;++B)$[B].seq&&(X=Math.max(X,$[B].level));for(B=0;B<$.length;++B){if($[B].seq){if($[B].level!=X)continue;fe=!0,te[$[B].seq]=1,Ye($[B].callback,k,$[B].combo,$[B].seq);continue}fe||Ye($[B].callback,k,$[B].combo)}var ae=k.type=="keypress"&&ve;k.type==Le&&!Q(N)&&!ae&&We(te),ve=fe&&k.type=="keydown"};function tt(N){typeof N.which!="number"&&(N.which=N.keyCode);var O=x(N);if(O){if(N.type=="keyup"&&Ae===O){Ae=!1;return}oe.handleKey(O,M(N),N)}}function Qe(){clearTimeout(Te),Te=setTimeout(We,1e3)}function st(N,O,k,$){me[N]=0;function B(Ee){return function(){Le=Ee,++me[N],Qe()}}function te(Ee){Ye(k,Ee,N),$!=="keyup"&&(Ae=x(Ee)),setTimeout(We,10)}for(var X=0;X<O.length;++X){var fe=X+1===O.length,ae=fe?te:B($||he(O[X+1]).action);Tt(O[X],ae,$,N,X)}}function Tt(N,O,k,$,B){oe._directMap[N+":"+k]=O,N=N.replace(/\s+/g," ");var te=N.split(" "),X;if(te.length>1){st(N,te,O,k);return}X=he(N,k),oe._callbacks[X.key]=oe._callbacks[X.key]||[],it(X.key,X.modifiers,{type:X.action},$,N,B),oe._callbacks[X.key][$?"unshift":"push"]({callback:O,modifiers:X.modifiers,action:X.action,seq:$,level:B,combo:N})}oe._bindMultiple=function(N,O,k){for(var $=0;$<N.length;++$)Tt(N[$],O,k)},_(H,"keypress",tt),_(H,"keydown",tt),_(H,"keyup",tt)}p.prototype.bind=function(H,oe,me){var Te=this;return H=H instanceof Array?H:[H],Te._bindMultiple.call(Te,H,oe,me),Te},p.prototype.unbind=function(H,oe){var me=this;return me.bind.call(me,H,function(){},oe)},p.prototype.trigger=function(H,oe){var me=this;return me._directMap[H+":"+oe]&&me._directMap[H+":"+oe]({},H),me},p.prototype.reset=function(){var H=this;return H._callbacks={},H._directMap={},H},p.prototype.stopCallback=function(H,oe){var me=this;if((" "+oe.className+" ").indexOf(" mousetrap ")>-1||pe(oe,me.target))return!1;if("composedPath"in H&&typeof H.composedPath=="function"){var Te=H.composedPath()[0];Te!==H.target&&(oe=Te)}return oe.tagName=="INPUT"||oe.tagName=="SELECT"||oe.tagName=="TEXTAREA"||oe.isContentEditable},p.prototype.handleKey=function(){var H=this;return H._handleKey.apply(H,arguments)},p.addKeycodes=function(H){for(var oe in H)H.hasOwnProperty(oe)&&(r[oe]=H[oe]);h=null},p.init=function(){var H=p(i);for(var oe in H)oe.charAt(0)!=="_"&&(p[oe]=function(me){return function(){return H[me].apply(H,arguments)}}(oe))},p.init(),e.Mousetrap=p,t.exports&&(t.exports=p)})(typeof window<"u"?window:null,typeof window<"u"?document:null)})(Oh);var Qg=Oh.exports;const Qs=Oo(Qg);function em(t,e,i){var n=e.View.prototype.delegateEvents,r=e.View.prototype.undelegateEvents,o=e.View.prototype.remove,a={};t.extend(e.View.prototype,{keyboardEvents:{},bindKeyboardEvents:function(l){if(l||(l=t.result(this,"keyboardEvents"))){for(var h in l){var g=l[h];if(t.isFunction(g)||(g=this[l[h]]),!g)throw new Error('Method "'+l[h]+'" does not exist');g=t.bind(g,this),"bindGlobal"in i&&(h.indexOf("mod")!==-1||h.indexOf("command")!==-1||h.indexOf("ctrl")!==-1)?i.bindGlobal(h,g):i.bind(h,g),a[h]=this}return this}},unbindKeyboardEvents:function(){for(var l in this.keyboardEvents)a[l]===this&&(i.unbind(l),delete a[l]);return this},delegateEvents:function(){var l=n.apply(this,arguments);return this.bindKeyboardEvents(),l},undelegateEvents:function(){var l=r.apply(this,arguments);return this.unbindKeyboardEvents&&this.unbindKeyboardEvents(),l},remove:function(){var l=o.apply(this,arguments);return this.unbindKeyboardEvents&&this.unbindKeyboardEvents(),l}})}const tm=`
    <% if (disabled) { %>
        <td>
            <% if(imageId > 0) { print("<img class='small-thumb' src='" + thumbSrc + "' />") }
               else { print ("<div class='missingThumb small-thumb'></div>")} %>
        </td>
        <td title="This figure is currently open">
            <div style="width:400px; word-wrap:break-word;">
                <%- name %>
            </div>
        </td>
    <% } else { %>
        <td>
            <a href="<%= url %>">
                <img class='small-thumb' src='<%= thumbSrc %>' />
            </a>
        </td>
        <td>
            <div style="width:400px; word-wrap:break-word;">
                <a href="<%= url %>"><%- name %></a>
            </div>
        </td>
    <% } %>
    <td>
        <%= formatDate(creationDate) %>
    </td>
    <td>
        <%- ownerFullName %>
    </td>
    <td>
        <%- group.name %>
    </td>
`;var im=ft.Model.extend({defaults:{disabled:!1},initialize:function(){var t=this.get("description");t&&t.imageId?this.set("imageId",t.imageId):this.set("imageId",0),t&&t.baseUrl&&this.set("baseUrl",t.baseUrl)},isVisible:function(t){if(t.owner&&this.get("owner").id!==t.owner||t.group&&this.get("group").id!==t.group)return!1;if(t.name){var e=this.get("name").toLowerCase(),i=C.trim(t.name).split(" "),n=i.reduce(function(r,o){return r&&e.indexOf(o)>-1},!0);return n}return!0}}),nm=ft.Collection.extend({model:im,comparator:"creationDate",disable:function(t){this.where({disabled:!0}).forEach(function(i){i.set("disabled",!1)});var e=this.get(t);e&&e.set("disabled",!0)},removeFile:function(t){var e=this.get(t);this.remove(e)},url:function(){return BASE_WEBFIGURE_URL+"list_web_figures/"}}),rm=ft.View.extend({el:C("#openFigureModal"),initialize:function(t){this.modal=new Ji("#openFigureModal"),this.$tbody=C("tbody",this.$el),this.$fileFilter=C("#file-filter"),this.owner=USER_ID,window.IS_PUBLIC_USER&&delete this.owner;var e=this;this.model.bind("sync remove sort",this.render,this),this.$fileFilter.val(""),this.figureModel=t.figureModel,document.getElementById("openFigureModal").addEventListener("show.bs.modal",function(){e.model.length===0?e.refresh_files():e.render()})},events:{"click .sort-created":"sort_created","click .sort-created-reverse":"sort_created_reverse","click .sort-name":"sort_name","click .sort-name-reverse":"sort_name_reverse","click .pick-owner":"pick_owner","click .pick-group":"pick_group","keyup #file-filter":"filter_files","click .refresh-files":"refresh_files"},refresh_files:function(t){var e=`<tr><td colspan='5' style='text-align:center'>
            <h3 class='text-muted' style='opacity:0.7; margin:50px'><small>Loading Files...</small></h3>
        </td></tr>`;this.$tbody.html(e);let i=this.model.url();fetch(i,{mode:"cors",credentials:"include"}).then(r=>r.json()).then(r=>{this.model.reset(),r.length==0&&this.render(),this.model.add(r)})},filter_files:function(t){this.render()},sort_created:function(t){this.render_sort_btn(t),this.model.comparator="creationDate",this.model.sort()},sort_created_reverse:function(t){this.render_sort_btn(t),this.model.comparator=function(e,i){var n=e.get("creationDate"),r=i.get("creationDate");return n<r?1:n>r?-1:0},this.model.sort()},sort_name:function(t){this.render_sort_btn(t),this.model.comparator=function(e,i){var n=e.get("name").toLowerCase(),r=i.get("name").toLowerCase();return n<r?-1:n>r?1:0},this.model.sort()},sort_name_reverse:function(t){this.render_sort_btn(t),this.model.comparator=function(e,i){var n=e.get("name").toLowerCase(),r=i.get("name").toLowerCase();return n<r?1:n>r?-1:0},this.model.sort()},render_sort_btn:function(t){C("th .btn-sm",this.$el).addClass("muted"),C(t.target).removeClass("muted")},pick_owner:function(t){t.preventDefault();var e=C(t.target).data("id");e!=-1?this.owner=e:delete this.owner,this.render()},pick_group:function(t){t.preventDefault();var e=C(t.target).data("id");e!=-1?this.group=e:delete this.group,this.render()},render:function(){var t=this,e={},i=this.$fileFilter.val(),n=this.figureModel.get("fileId");if(this.owner&&this.owner!=-1&&(e.owner=this.owner),this.group&&this.group!=-1&&(e.group=this.group),i.length>0&&(e.name=i.toLowerCase()),this.$tbody.empty(),this.model.models.length===0){var r="<tr><td colspan='3'>You have no figures. Start by <a href='"+BASE_WEBFIGURE_URL+"new'>creating a new figure</a></td></tr>";t.$tbody.html(r)}$e.each(this.model.models,function(M){if(M.isVisible(e)){var D=n===M.get("id");M.set("disabled",D);var F=new sm({model:M,listview:t}).render().el;t.$tbody.prepend(F)}});var o=this.model.pluck("owner"),a={};o.forEach(function(M){let D=M.firstName+" "+M.lastName;a[D]=M.id});var l=Object.keys(a);l.sort(function(D,F){var Q=D.split(" "),K=Q[Q.length-1],Z=F.split(" "),ee=Z[Z.length-1];return K>ee});var h="<li><a class='dropdown-item pick-owner' href='#' data-id='-1'> -- Show All -- </a></li>";h+="<li class='divider'></li>",$e.each(l,function(M){h+="<li><a class='dropdown-item pick-owner' data-id='"+a[M]+"' href='#'>"+$e.escape(M)+"</a></li>"}),C("#owner-menu").html(h);var g=this.model.pluck("group"),_={};g.forEach(function(M){_[M.name]=M.id});var x=Object.keys(_);x.sort();var T="<li><a class='dropdown-item pick-group' href='#' data-id='-1'> -- Show All -- </a></li><li class='divider'></li>";return T+=x.map(function(M){return"<li><a class='dropdown-item pick-group' data-id='"+_[M]+"' href='#'>"+$e.escape(M)+"</a></li>"}).join(`
`),C("#group-menu").html(T),this}}),sm=ft.View.extend({tagName:"tr",template:$e.template(tm),initialize:function(t){this.model.bind("change",this.render,this),this.model.bind("destroy",this.close,this),this.listview=t.listview},events:{"click a":"hide_file_chooser"},hide_file_chooser:function(){this.listview.modal.hide()},formatDate:function(t){if(t*1e3){var e=new Date(t*1e3),i=e.toISOString();return i=i.replace("T"," "),i=i.substr(0,16),i}return t},render:function(){var t=this.model.toJSON(),e=t.baseUrl;if(!t.imageId)try{var i=JSON.parse(t.description);i.imageId&&(t.imageId=i.imageId,this.model.set("imageId",i.imageId))}catch{console.log("failed to parse json",t.description)}e=e||BASE_WEBFIGURE_URL.slice(0,-1),t.thumbSrc=e+"/render_thumbnail/"+t.imageId+"/",t.url=BASE_WEBFIGURE_URL+"file/"+t.id,t.formatDate=this.formatDate;var n=this.template(t);return C(this.el).html(n),this}});const om=`
    <table class="table" style="margin-bottom:0">
        <tbody>
            <tr><td class="row">
                <div class="col">Compare:</div>
                <div class="col">
                    <img class="small-thumb" title="<%- selImg.name %>"
                        src="<%= selThumbSrc %>" />
                </div>
                <div class="col">
                    <% if(newImg.imageId) { %>
                        <img class="small-thumb" title="<%- newImg.name %>"
                            src="<%= newThumbSrc %>" />
                    <% } else { %>
                        <div style="width:40px; height:40px; background-color:#ddd"></div>
                    <% } %>
                </div>
                <div class="col">Matching</div>
            </td></tr>
            <tr><td>
              <div class="row">
                <div class="col"><small><strong>Dimensions (XY)</strong>:</small></div>
                <div class="col"><small><%= selImg.orig_width %> x <%= selImg.orig_height %></small></div>
                <div class="col"><small>
                    <%= newImg.orig_width || "-" %> x <%= newImg.orig_height || "-"  %>
                </small></div>
                <div class="col">
                    <%= ok(comp.orig_width, comp.orig_height) %>
                </div>
              </div>
              <div class="row">
                <div class="col"><small><strong>Z-sections</strong>:</small></div>
                <div class="col"><small><%= selImg.sizeZ %></small></div>
                <div class="col"><small><%= newImg.sizeZ || "-" %></small></div>
                <div class="col"><%= ok(comp.sizeZ) %></div>
              </div>
              <div class="row">
                <div class="col"><small><strong>Time-points</strong>:</small></div>
                <div class="col"><small><%= selImg.sizeT %></small></div>
                <div class="col"><small><%= newImg.sizeT || "-" %></small></div>
                <div class="col"><small><%= ok(comp.sizeT) %></small></div>
              </div>
              <div class="row">
                <div class="col"><small><strong>Channels</strong>:</small></div>
                <div class="col"><small>
                    <% _.each(selImg.channels, function(ch, i) { %>
                        <%- ch.label %><% if(i < selImg.channels.length-1){print(',')} %>
                    <% }); %>
                </small></div>
                <div class="col"><small>
                    <% if(newImg.channels){ _.each(newImg.channels, function(ch, i) { %>
                        <%- ch.label %><% if(i < newImg.channels.length-1){print(',')} %>
                    <% }) } else { print("-") } %>
                </small></div>
                <div class="col"><small><%= comp.channels || "-" %></small></div>
              </div>
            </td></tr>
        </tbody>
    </table>
    <% _.each(messages, function(m) { %>
        <div class="alert alert-<%= m.status %>"><%= m.text %></div>
    <% }); %>
    <% if (newImg.imageId && messages.length == 0) {
        print("<div class='alert alert-success'>Perfect Match!</div>")
    } %>
`,am=`
<div class="row" style="margin-bottom: 15px;">
    <div class="form-group col-sm-6">
        <label>Page Color</label>
        <input class="pageColor form-control"
            value="#<%= page_color %>"
            type="color" style="padding: 0" />
    </div>
    <div class="form-group col-sm-6"></div>
</div>

<div class="row" style="margin-bottom: 15px;">
    <div class="form-group col-sm-6">
        <label>Number of Pages</label>
        <select class="pageCountSelect form-control">
            <% _.each([1,2,3,4,5,6,7,8,9,10],function(p){
                print ("<option value='"+p+"'" + ((p == page_count) ? " selected " : "") + " >"+p+"</option>")
            }); %>
        </select>
    </div>
    <div class="form-group col-sm-6"></div>
</div>

<div class="row" style="margin-bottom: 15px;">
    <div class="col-sm-6">
        <label>Size</label>
        <div class="form-horizontal">
            <div class="form-group col-sm-12">
                <select class="paperSizeSelect form-control">
                    <option value="A4" <% if (page_size == 'A4') { print('selected') } %> >
                        A4 (210 x 297 mm)
                    </option>
                    <option value="A3" <% if (page_size == 'A3') { print('selected') } %> >
                        A3 (297 x 420 mm)
                    </option>
                    <option value="A2" <% if (page_size == 'A2') { print('selected') } %> >
                        A2 (420 x 594 mm)
                    </option>
                    <option value="A1" <% if (page_size == 'A1') { print('selected') } %> >
                        A1 (594 x 841 mm)
                    </option>
                    <option value="A0" <% if (page_size == 'A0') { print('selected') } %> >
                        A0 (841 x 1189 mm)
                    </option>
                    <option value="letter" <% if (page_size == 'letter') { print('selected') } %> >
                        Letter (216 x 280 mm)
                    </option>
                    <option value="mm" <% if (page_size == 'mm') { print('selected') } %> >
                        Custom (mm)
                    </option>
                    <option value="crop" <% if (page_size == 'crop') { print('selected') } %>
                        title="Fit a single page around all panels">
                        <% if (page_count > 1) { %>
                            Crop single page to panels
                        <% } else { %>
                            Crop page around panels
                        <% } %>
                    </option>
                </select>
            </div>
            <!-- <label for="inputPassword" class="col-sm-2 control-label">Password</label> -->
        </div>
    </div>
    <div class="col-sm-6">
        <label>Orientation</label>
        <div class="form-horizontal row" style="margin-top: 8px;">
            <div class="form-group col-sm-6" style="padding-left: 0;">
                <input type="radio" name="pageOrientation" value="vertical"
                    <% if (orientation == 'vertical') { print('checked') } %> >
                <label class="control-label text-muted">Vertical</label>
            </div>
            <div class="form-group col-sm-6">
                <input type="radio" name="pageOrientation" value="horizontal"
                    <% if (orientation == 'horizontal') { print('checked') } %> >
                <label class="control-label text-muted">Horizontal</label>
            </div>
        </div>
    </div>
</div>

<div class="row g-4 align-items-center <% if (wh_disabled) { print(' wh_disabled')} %>">
    <div class="col-auto">
        <labelclass="col-form-label">Width</label>
    </div>
    <div class="col-auto">
        <input id='paperWidth' type="number" style="width:70px"
        <% if (wh_disabled) { print('disabled')} %>
        class="form-control" value="<%= width_mm %>">
    </div>
    <div class="col-auto">
        <span class="form-text">
        mm
        </span>
    </div>
    <div class="col-auto">
        <label class="col-form-label">Height</label>
    </div>
    <div class="col-auto">
        <input id='paperHeight' type="number" style="width:70px"
            <% if (wh_disabled) { print('disabled')} %>
            class="form-control" value="<%= height_mm %>">
    </div>
    <div class="col-auto">
        <span class="form-text">
        mm
        </span>
    </div>
</div>
`;var lm=ft.View.extend({el:C("#colorpickerModal"),pickedColors:[],initialize:function(){this.$submit_btn=C("#colorpickerModal .modal-footer button[type='submit']")},events:{"input .color-input":"handleColorInput","submit .colorpickerForm":"handleColorpicker","click .pickedColors button":"pickRecentColor"},handleColorInput:function(t){let e=t.target.value;this.$submit_btn.prop("disabled",!1),C(".oldNewColors li:first-child").css("background-color",e)},pickRecentColor:function(t){var e=C(t.target).prop("title");C(".color-input").val(e),navigator.userAgent.includes("Firefox")||C(".color-input").trigger("click"),C(".oldNewColors li:first-child").css("background-color",e),this.$submit_btn.prop("disabled",!1)},handleColorpicker:function(t){t.preventDefault();var e=C(".color-input").val();if(e.length!==0&&(e[0]!="#"&&(e="#"+e),!(e.length!=7&&e.length!=4)))return this.pickedColors.push(e),this.success&&this.success(e),Mr("colorpickerModal"),!1},show:function(t){Hi("colorpickerModal"),(!navigator.userAgent.includes("Firefox")||this.pickedColors.length==0)&&C(".color-input",this.$el).trigger("click"),t.color&&(C(".oldNewColors li").css("background-color","#"+t.color),this.$submit_btn.prop("disabled","disabled")),t.pickedColors&&(this.pickedColors=$e.uniq(this.pickedColors.concat(t.pickedColors))),t.success&&(this.success=t.success),this.render()},render:function(){var t={colors:$e.uniq(this.pickedColors)},e='<div class="btn-group"><% _.each(colors, function(c, i) { %><button type="button" class="btn btn-default" title="<%= c %>"style="background-color: <%= c %>"> </button><% if ((i+1)%4 == 0){ %> </div><div class="btn-group"><% } %><% }); %></div>',i=$e.template(e),n=i(t);C("#pickedColors").html(n)}});const Ba=new lm,cm=ft.View.extend({el:C("#dpiModal"),model:_n,initialize:function(t){var e=this;document.getElementById("dpiModal").addEventListener("shown.bs.modal",()=>{e.render()})},events:{"submit .dpiModalForm":"handleDpiForm"},handleDpiForm:function(t){t.preventDefault();var e=C(".min_export_dpi",this.el).val(),i=parseInt(e,10),n=C(".max_export_dpi",this.el).val(),r=parseInt(n,10),o=this.model.getSelected();return isNaN(r)?(alert("Need to enter valid integer for dpi values"),!1):(o.forEach(function(a){var l={max_export_dpi:r};isNaN(i)?a.unset("min_export_dpi"):l.min_export_dpi=i,a.save(l)}),Mr("dpiModal"),!1)},render:function(){var t=this.model.getSelected(),e=t.getIfEqual("min_export_dpi")||300,i=t.getIfEqual("max_export_dpi")||"-";C(".min_export_dpi",this.el).val(e),C(".max_export_dpi",this.el).val(i)}}),hm=ft.View.extend({el:C("#paperSetupModal"),template:$e.template(am),model:_n,events:{"submit .paperSetupForm":"handlePaperSetup","change .paperSizeSelect":"rerender","change input":"rerender","click .pageColor":"handlePaperColor"},handlePaperColor:function(t){t.preventDefault();var e=C(t.target).val();return Ba.show({color:e,pickedColors:["#000000","#ffffff","#eeeeee"],success:(function(i){C(".pageColor",this.$el).val(i)}).bind(this)}),!1},initialize:function(t){var e=this;document.getElementById("paperSetupModal").addEventListener("shown.bs.modal",()=>{e.render()})},processForm:function(){var t=C("form",this.$el),e=72,i=C(".pageCountSelect",t).val(),n=C(".paperSizeSelect",t).val(),r=t.find('input[name="pageOrientation"]:checked').val(),o=parseInt(C("#paperWidth").val(),10),a=parseInt(C("#paperHeight").val(),10);C(".wh_units:first",t).text();var l=C(".pageColor",t).val().replace("#",""),h,g,_,x,T,M;if(n=="A4")_=210,x=297;else if(n=="A3")_=297,x=420;else if(n=="A2")_=420,x=594;else if(n=="A1")_=594,x=841;else if(n=="A0")_=841,x=1189;else if(n=="letter")_=216,x=280;else if(n=="mm")_=o,x=a;else if(n=="crop"){var D=this.model.getCropCoordinates();T=D.paper_width,M=D.paper_height,h=D.dx,g=D.dy,i=1}if(_&&x?(T=Math.round(e*_/25.4),M=Math.round(e*x/25.4)):(_=Math.round(T*25.4/e),x=Math.round(M*25.4/e)),r=="horizontal"&&n!="mm"&&n!="crop"){var F=_;_=x,x=F,F=T,T=M,M=F}var Q=i;i>3&&(Q=Math.ceil(i/2));var K={page_size:n,orientation:r,width_mm:_,height_mm:x,paper_width:T,paper_height:M,page_count:i,page_col_count:Q,page_color:l};return(h!==void 0||g!==void 0)&&(K.dx=h,K.dy=g),K},handlePaperSetup:function(t){t.preventDefault();var e=this.processForm();e.page_size==="crop"&&(this.model.panels.forEach(function(i){i.save({x:i.get("x")+e.dx,y:i.get("y")+e.dy})}),e.page_size="mm",delete e.dx,delete e.dy),this.model.set(e),Mr("paperSetupModal")},rerender:function(){var t=this.processForm();this.render(t)},render:function(t){t=t||this.model.toJSON(),t.wh_disabled=t.page_size!="mm",this.$el.find(".modal-body").html(this.template(t))}}),um=ft.View.extend({el:C("#setIdModal"),template:$e.template(om),model:_n,events:{"submit .addIdForm":"previewSetId","click .preview":"previewSetId","keyup .imgId":"keyPressed","click .doSetId":"doSetId"},initialize:function(t){var e=this;document.getElementById("setIdModal").addEventListener("shown.bs.modal",()=>{delete e.newImg,e.render()})},keyPressed:function(){var t=C("input.imgId",this.$el).val(),e=C("button.preview",this.$el),i=/^\d+$/;i.test(t)?e.removeAttr("disabled"):e.attr("disabled","disabled")},previewSetId:function(t){t.preventDefault();var e=this,i=C("input.imgId",this.$el).val();const n=BASE_WEBFIGURE_URL+"imgData/"+parseInt(i,10)+"/";C.ajax({url:n,xhrFields:{withCredentials:!0,mode:"cors"},dataType:"json",success:function(r){var o={imageId:r.id,name:r.meta.imageName,pixelsType:r.meta.pixelsType,pixel_range:r.pixel_range,sizeZ:r.size.z,theZ:r.rdefs.defaultZ,sizeT:r.size.t,channels:r.channels,orig_width:r.size.width,orig_height:r.size.height,datasetName:r.meta.datasetName,pixel_size_x:r.pixel_size.valueX,pixel_size_y:r.pixel_size.valueY,pixel_size_z:r.pixel_size.valueZ,pixel_size_x_unit:r.pixel_size.unitX,pixel_size_z_unit:r.pixel_size.unitZ,pixel_size_x_symbol:r.pixel_size.symbolX,pixel_size_z_symbol:r.pixel_size.symbolZ,deltaT:r.deltaT};e.newImg=o,e.render()}}).fail(function(r){alert("Image ID: "+i+" could not be found on the server, or you don't have permission to access it")})},doSetId:function(){var t=this,e=this.model.getSelected();t.newImg&&(e.forEach(function(i){i.setId(t.newImg)}),this.model.set("unsaved",!0))},render:function(){var t=this.model.getSelected(),e,i={};if(t.length<1){self.selectedImage=null;return}e=t.head(),i.selImg=e.toJSON(),i.newImg={},i.comp={},i.messages=[],i.ok=function(x,T){return typeof x>"u"?"-":(typeof T<"u"&&(x=x&&T),x?"<i class='green bi bi-check-lg'></i>":"<i class='red bi bi-flag-fill'></i>")},i.selThumbSrc=WEBGATEWAYINDEX+"render_thumbnail/"+i.selImg.imageId+"/";var n=["orig_width","orig_height"],r=["Width","Height"];if(this.newImg){if(i.newImg=this.newImg,$e.each(n,function(x,T){i.selImg[x]==i.newImg[x]?i.comp[x]=!0:(i.comp[x]=!1,i.messages.push({text:"Mismatch of "+r[T]+": should be OK.",status:"success"}))}),i.selImg.sizeT!=i.newImg.sizeT){var o=!1;t.forEach(function(x){x.get("theT")>i.newImg.sizeT&&(o=!0)}),o?i.messages.push({text:"New Image has fewer Timepoints than needed. Check after update.",status:"danger"}):i.messages.push({text:"Mismatch of Timepoints: should be OK.",status:"success"}),i.comp.sizeT=!1}else i.comp.sizeT=!0;if(i.selImg.sizeZ!=i.newImg.sizeZ){var a=!1;t.forEach(function(x){x.get("theZ")>i.newImg.sizeZ&&(a=!0)}),a?i.messages.push({text:"New Image has fewer Z slices than needed. Check after update.",status:"danger"}):i.messages.push({text:"Mismatch of Z slices: should be OK.",status:"success"}),i.comp.sizeZ=!1}else i.comp.sizeZ=!0;i.comp.channels=i.ok(!0);var l=i.selImg.channels,h=i.newImg.channels,g=l.length;if(g!=h.length)i.comp.channels=i.ok(!1),i.messages.push({text:"New Image has "+h.length+" channels instead of "+g+". Check after update.",status:"danger"});else for(var _=0;_<g;_++)if(l[_].label!=h[_].label){i.comp.channels=i.ok(!1),i.messages.push({text:"Channel Names mismatch: should be OK.",status:"success"});break}i.newThumbSrc=WEBGATEWAYINDEX+"render_thumbnail/"+i.newImg.imageId+"/",C(".doSetId",this.$el).removeAttr("disabled")}else C(".doSetId",this.$el).attr("disabled","disabled");C(".previewIdChange",this.$el).html(this.template(i))}}),dm=ft.View.extend({el:C("#addImagesModal"),model:_n,events:{"submit .addImagesForm":"addImages","click .btn-primary":"addImages","keyup .imgIds":"keyPressed","paste .imgIds":"keyPressed"},initialize:function(t){this.modal=new Ji("#addImagesModal"),this.figureView=t.figureView,C("#addImagesModal").on("focus",function(){setTimeout(function(){C("#addImagesModal input.imgIds").trigger("focus")},20)})},keyPressed:function(t){var e=C("input.imgIds",this.$el).val(),i=C("button.btn-primary",this.$el),n=/\d.*/;if(t&&t.type==="paste"){setTimeout(this.keyPressed,50);return}n.test(e)?i.removeAttr("disabled"):i.attr("disabled","disabled")},addImages:function(){var t,e=C("input.imgIds",this.$el),i=C("button.btn-primary",this.$el),n=e.val();if(e.val(""),i.attr("disabled","disabled"),!(!n||n.length===0)){if(n.indexOf("?")>10)t=n.split("image-").slice(1);else if(n.indexOf("img_detail")>0){this.importFromRemote(n);return}else t=n.split(",");this.model.addImages(t)}},importFromRemote:function(t){var e=parseInt(t.split("img_detail/")[1],10),i=t.split("/img_detail")[0],n=i+"/imgData/"+e+"/",r=1,o=1,a=this.model.get("paper_width"),l=this.figureView.getCentre(),h=0,g=0,_,x,T,M={px:_,py:x,c:l,spacer:T,colCount:r,rowCount:o,col:h,row:g,paper_width:a};this.model.importImage(n,M,i)}}),fm=ft.View.extend({el:C("#openLocalFileModal"),model:_n,initialize:function(t){this.app=t.app,C(".figureFileUrl",this.el).val("https://gist.githubusercontent.com/will-moore/fe0e260544b46af6e1e523b288fc85bc/raw/3772939e68769e1c9d30db8d7fee528f14888ef3/OMERO.figure_NGFF_demo.json"),this.enableSubmit()},events:{"submit .openLocalFileForm":"handleOpenFile","input .figureFileUrl":"enableSubmit","input input[type='file']":"enableSubmit"},enableSubmit:function(t){let e=C(".figureFileUrl",this.el).val(),i=C("input[type='file']",this.el).val();console.log("enableSubmit",e,i),e||i?C("button[type='submit'",this.el).prop("disabled",!1):C("button[type='submit'",this.el).prop("disabled",!0)},handleOpenFile:function(t){t.preventDefault();let e=C(".figureFileUrl",this.el).val(),i=C("input[type='file']",this.el).val();if(console.log("figureFileUrl",e),console.log("localFile",i),console.log("this.app",this.app),i){const[n]=document.querySelector("#openLocalFileModal input[type=file]").files,r=new FileReader;r.addEventListener("load",()=>{console.log("reader.result",r.result);let o;try{o=JSON.parse(r.result)}catch{alert("Invalid JSON file")}const a=this.app,l=this.model;if(o){var h=function(){a.navigate("/omero-figure/",{trigger:!1}),l.load_from_JSON(o),l.set("unsaved",!1)};l.checkSaveAndClear(h)}}),n&&r.readAsText(n)}else e&&(console.log("/omero-figure/?file="+e),this.app.navigate("/omero-figure/?file="+e,{trigger:!0}));return Mr("openLocalFileModal"),!1},render:function(){}});var Mh={exports:{}};(function(t,e){(function(i,n){t.exports=n()})(window,function(){return function(i){var n={};function r(o){if(n[o])return n[o].exports;var a=n[o]={i:o,l:!1,exports:{}};return i[o].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=i,r.c=n,r.d=function(o,a,l){r.o(o,a)||Object.defineProperty(o,a,{enumerable:!0,get:l})},r.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},r.t=function(o,a){if(1&a&&(o=r(o)),8&a||4&a&&typeof o=="object"&&o&&o.__esModule)return o;var l=Object.create(null);if(r.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:o}),2&a&&typeof o!="string")for(var h in o)r.d(l,h,(function(g){return o[g]}).bind(null,h));return l},r.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return r.d(a,"a",a),a},r.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},r.p="",r(r.s=1)}([function(i,n,r){var o,a;o=[r(2)],(a=(function(l){function h(d){if(h.is(d,"function"))return g?d():l.on("raphael.DOMload",d);if(h.is(d,st))return h._engine.create[Z](h,d.splice(0,3+h.is(d[0],Qe))).add(d);var m=Array.prototype.slice.call(arguments,0);if(h.is(m[m.length-1],"function")){var y=m.pop();return g?y.call(h._engine.create[Z](h,m)):l.on("raphael.DOMload",function(){y.call(h._engine.create[Z](h,m))})}return h._engine.create[Z](h,arguments)}h.version="2.3.0",h.eve=l;var g,_,x=/[, ]+/,T={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},M=/\{(\d+)\}/g,D="hasOwnProperty",F={doc:document,win:window},Q={was:Object.prototype[D].call(F.win,"Raphael"),is:F.win.Raphael},K=function(){this.ca=this.customAttributes={}},Z="apply",ee="concat",he="ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof DocumentTouch,pe="",p=" ",H=String,oe="split",me="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[oe](p),Te={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},Ae=H.prototype.toLowerCase,ve=Math,Le=ve.max,We=ve.min,it=ve.abs,Ye=ve.pow,tt=ve.PI,Qe="number",st="array",Tt=Object.prototype.toString,N=(h._ISURL=/^url\(['"]?(.+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),O={NaN:1,Infinity:1,"-Infinity":1},k=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,$=ve.round,B=parseFloat,te=parseInt,X=H.prototype.toUpperCase,fe=h._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0,class:""},ae=h._availableAnimAttrs={blur:Qe,"clip-rect":"csv",cx:Qe,cy:Qe,fill:"colour","fill-opacity":Qe,"font-size":Qe,height:Qe,opacity:Qe,path:"path",r:Qe,rx:Qe,ry:Qe,stroke:"colour","stroke-opacity":Qe,"stroke-width":Qe,transform:"transform",width:Qe,x:Qe,y:Qe},Ee=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,He={hs:1,rg:1},Ge=/,?([achlmqrstvxz]),?/gi,nt=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,E=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,R=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,L=(h._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),J=function(d,m){return B(d)-B(m)},ue=function(d){return d},ce=h._rectPath=function(d,m,y,w,I){return I?[["M",d+I,m],["l",y-2*I,0],["a",I,I,0,0,1,I,I],["l",0,w-2*I],["a",I,I,0,0,1,-I,I],["l",2*I-y,0],["a",I,I,0,0,1,-I,-I],["l",0,2*I-w],["a",I,I,0,0,1,I,-I],["z"]]:[["M",d,m],["l",y,0],["l",0,w],["l",-y,0],["z"]]},Oe=function(d,m,y,w){return w==null&&(w=y),[["M",d,m],["m",0,-w],["a",y,w,0,1,1,0,2*w],["a",y,w,0,1,1,0,-2*w],["z"]]},et=h._getPath={path:function(d){return d.attr("path")},circle:function(d){var m=d.attrs;return Oe(m.cx,m.cy,m.r)},ellipse:function(d){var m=d.attrs;return Oe(m.cx,m.cy,m.rx,m.ry)},rect:function(d){var m=d.attrs;return ce(m.x,m.y,m.width,m.height,m.r)},image:function(d){var m=d.attrs;return ce(m.x,m.y,m.width,m.height)},text:function(d){var m=d._getBBox();return ce(m.x,m.y,m.width,m.height)},set:function(d){var m=d._getBBox();return ce(m.x,m.y,m.width,m.height)}},Ze=h.mapPath=function(d,m){if(!m)return d;var y,w,I,W,V,U,Y;for(I=0,V=(d=en(d)).length;I<V;I++)for(W=1,U=(Y=d[I]).length;W<U;W+=2)y=m.x(Y[W],Y[W+1]),w=m.y(Y[W],Y[W+1]),Y[W]=y,Y[W+1]=w;return d};if(h._g=F,h.type=F.win.SVGAngle||F.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML",h.type=="VML"){var lt,xt=F.doc.createElement("div");if(xt.innerHTML='<v:shape adj="1"/>',(lt=xt.firstChild).style.behavior="url(#default#VML)",!lt||typeof lt.adj!="object")return h.type=pe;xt=null}function ht(d){if(typeof d=="function"||Object(d)!==d)return d;var m=new d.constructor;for(var y in d)d[D](y)&&(m[y]=ht(d[y]));return m}h.svg=!(h.vml=h.type=="VML"),h._Paper=K,h.fn=_=K.prototype=h.prototype,h._id=0,h.is=function(d,m){return(m=Ae.call(m))=="finite"?!O[D](+d):m=="array"?d instanceof Array:m=="null"&&d===null||m==typeof d&&d!==null||m=="object"&&d===Object(d)||m=="array"&&Array.isArray&&Array.isArray(d)||Tt.call(d).slice(8,-1).toLowerCase()==m},h.angle=function(d,m,y,w,I,W){if(I==null){var V=d-y,U=m-w;return V||U?(180+180*ve.atan2(-U,-V)/tt+360)%360:0}return h.angle(d,m,I,W)-h.angle(y,w,I,W)},h.rad=function(d){return d%360*tt/180},h.deg=function(d){return Math.round(180*d/tt%360*1e3)/1e3},h.snapTo=function(d,m,y){if(y=h.is(y,"finite")?y:10,h.is(d,st)){for(var w=d.length;w--;)if(it(d[w]-m)<=y)return d[w]}else{var I=m%(d=+d);if(I<y)return m-I;if(I>d-y)return m-I+d}return m};var Ot,qt;h.createUUID=(Ot=/[xy]/g,qt=function(d){var m=16*ve.random()|0;return(d=="x"?m:3&m|8).toString(16)},function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(Ot,qt).toUpperCase()}),h.setWindow=function(d){l("raphael.setWindow",h,F.win,d),F.win=d,F.doc=F.win.document,h._engine.initWin&&h._engine.initWin(F.win)};var Zt=function(d){if(h.vml){var m,y=/^\s+|\s+$/g;try{var w=new ActiveXObject("htmlfile");w.write("<body>"),w.close(),m=w.body}catch{m=createPopup().document.body}var I=m.createTextRange();Zt=Gt(function(V){try{m.style.color=H(V).replace(y,pe);var U=I.queryCommandValue("ForeColor");return"#"+("000000"+(U=(255&U)<<16|65280&U|(16711680&U)>>>16).toString(16)).slice(-6)}catch{return"none"}})}else{var W=F.doc.createElement("i");W.title="Raphaël Colour Picker",W.style.display="none",F.doc.body.appendChild(W),Zt=Gt(function(V){return W.style.color=V,F.doc.defaultView.getComputedStyle(W,pe).getPropertyValue("color")})}return Zt(d)},Pt=function(){return"hsb("+[this.h,this.s,this.b]+")"},Ut=function(){return"hsl("+[this.h,this.s,this.l]+")"},ci=function(){return this.hex},pi=function(d,m,y){if(m==null&&h.is(d,"object")&&"r"in d&&"g"in d&&"b"in d&&(y=d.b,m=d.g,d=d.r),m==null&&h.is(d,"string")){var w=h.getRGB(d);d=w.r,m=w.g,y=w.b}return(d>1||m>1||y>1)&&(d/=255,m/=255,y/=255),[d,m,y]},Ii=function(d,m,y,w){var I={r:d*=255,g:m*=255,b:y*=255,hex:h.rgb(d,m,y),toString:ci};return h.is(w,"finite")&&(I.opacity=w),I};function Gt(d,m,y){return function w(){var I=Array.prototype.slice.call(arguments,0),W=I.join("␀"),V=w.cache=w.cache||{},U=w.count=w.count||[];return V[D](W)?(function(Y,ie){for(var be=0,Ne=Y.length;be<Ne;be++)if(Y[be]===ie)return Y.push(Y.splice(be,1)[0])}(U,W),y?y(V[W]):V[W]):(U.length>=1e3&&delete V[U.shift()],U.push(W),V[W]=d[Z](m,I),y?y(V[W]):V[W])}}h.color=function(d){var m;return h.is(d,"object")&&"h"in d&&"s"in d&&"b"in d?(m=h.hsb2rgb(d),d.r=m.r,d.g=m.g,d.b=m.b,d.hex=m.hex):h.is(d,"object")&&"h"in d&&"s"in d&&"l"in d?(m=h.hsl2rgb(d),d.r=m.r,d.g=m.g,d.b=m.b,d.hex=m.hex):(h.is(d,"string")&&(d=h.getRGB(d)),h.is(d,"object")&&"r"in d&&"g"in d&&"b"in d?(m=h.rgb2hsl(d),d.h=m.h,d.s=m.s,d.l=m.l,m=h.rgb2hsb(d),d.v=m.b):(d={hex:"none"}).r=d.g=d.b=d.h=d.s=d.v=d.l=-1),d.toString=ci,d},h.hsb2rgb=function(d,m,y,w){var I,W,V,U,Y;return this.is(d,"object")&&"h"in d&&"s"in d&&"b"in d&&(y=d.b,m=d.s,w=d.o,d=d.h),U=(Y=y*m)*(1-it((d=(d*=360)%360/60)%2-1)),I=W=V=y-Y,Ii(I+=[Y,U,0,0,U,Y][d=~~d],W+=[U,Y,Y,U,0,0][d],V+=[0,0,U,Y,Y,U][d],w)},h.hsl2rgb=function(d,m,y,w){var I,W,V,U,Y;return this.is(d,"object")&&"h"in d&&"s"in d&&"l"in d&&(y=d.l,m=d.s,d=d.h),(d>1||m>1||y>1)&&(d/=360,m/=100,y/=100),U=(Y=2*m*(y<.5?y:1-y))*(1-it((d=(d*=360)%360/60)%2-1)),I=W=V=y-Y/2,Ii(I+=[Y,U,0,0,U,Y][d=~~d],W+=[U,Y,Y,U,0,0][d],V+=[0,0,U,Y,Y,U][d],w)},h.rgb2hsb=function(d,m,y){var w,I;return d=(y=pi(d,m,y))[0],m=y[1],y=y[2],{h:(((I=(w=Le(d,m,y))-We(d,m,y))==0?null:w==d?(m-y)/I:w==m?(y-d)/I+2:(d-m)/I+4)+360)%6*60/360,s:I==0?0:I/w,b:w,toString:Pt}},h.rgb2hsl=function(d,m,y){var w,I,W,V;return d=(y=pi(d,m,y))[0],m=y[1],y=y[2],w=((I=Le(d,m,y))+(W=We(d,m,y)))/2,{h:(((V=I-W)==0?null:I==d?(m-y)/V:I==m?(y-d)/V+2:(d-m)/V+4)+360)%6*60/360,s:V==0?0:w<.5?V/(2*w):V/(2-2*w),l:w,toString:Ut}},h._path2string=function(){return this.join(",").replace(Ge,"$1")},h._preload=function(d,m){var y=F.doc.createElement("img");y.style.cssText="position:absolute;left:-9999em;top:-9999em",y.onload=function(){m.call(this),this.onload=null,F.doc.body.removeChild(this)},y.onerror=function(){F.doc.body.removeChild(this)},F.doc.body.appendChild(y),y.src=d};function xi(){return this.hex}function Wt(d,m){for(var y=[],w=0,I=d.length;I-2*!m>w;w+=2){var W=[{x:+d[w-2],y:+d[w-1]},{x:+d[w],y:+d[w+1]},{x:+d[w+2],y:+d[w+3]},{x:+d[w+4],y:+d[w+5]}];m?w?I-4==w?W[3]={x:+d[0],y:+d[1]}:I-2==w&&(W[2]={x:+d[0],y:+d[1]},W[3]={x:+d[2],y:+d[3]}):W[0]={x:+d[I-2],y:+d[I-1]}:I-4==w?W[3]=W[2]:w||(W[0]={x:+d[w],y:+d[w+1]}),y.push(["C",(-W[0].x+6*W[1].x+W[2].x)/6,(-W[0].y+6*W[1].y+W[2].y)/6,(W[1].x+6*W[2].x-W[3].x)/6,(W[1].y+6*W[2].y-W[3].y)/6,W[2].x,W[2].y])}return y}h.getRGB=Gt(function(d){if(!d||(d=H(d)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:xi};if(d=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:xi};!He[D](d.toLowerCase().substring(0,2))&&d.charAt()!="#"&&(d=Zt(d));var m,y,w,I,W,V,U=d.match(N);return U?(U[2]&&(w=te(U[2].substring(5),16),y=te(U[2].substring(3,5),16),m=te(U[2].substring(1,3),16)),U[3]&&(w=te((W=U[3].charAt(3))+W,16),y=te((W=U[3].charAt(2))+W,16),m=te((W=U[3].charAt(1))+W,16)),U[4]&&(V=U[4][oe](Ee),m=B(V[0]),V[0].slice(-1)=="%"&&(m*=2.55),y=B(V[1]),V[1].slice(-1)=="%"&&(y*=2.55),w=B(V[2]),V[2].slice(-1)=="%"&&(w*=2.55),U[1].toLowerCase().slice(0,4)=="rgba"&&(I=B(V[3])),V[3]&&V[3].slice(-1)=="%"&&(I/=100)),U[5]?(V=U[5][oe](Ee),m=B(V[0]),V[0].slice(-1)=="%"&&(m*=2.55),y=B(V[1]),V[1].slice(-1)=="%"&&(y*=2.55),w=B(V[2]),V[2].slice(-1)=="%"&&(w*=2.55),(V[0].slice(-3)=="deg"||V[0].slice(-1)=="°")&&(m/=360),U[1].toLowerCase().slice(0,4)=="hsba"&&(I=B(V[3])),V[3]&&V[3].slice(-1)=="%"&&(I/=100),h.hsb2rgb(m,y,w,I)):U[6]?(V=U[6][oe](Ee),m=B(V[0]),V[0].slice(-1)=="%"&&(m*=2.55),y=B(V[1]),V[1].slice(-1)=="%"&&(y*=2.55),w=B(V[2]),V[2].slice(-1)=="%"&&(w*=2.55),(V[0].slice(-3)=="deg"||V[0].slice(-1)=="°")&&(m/=360),U[1].toLowerCase().slice(0,4)=="hsla"&&(I=B(V[3])),V[3]&&V[3].slice(-1)=="%"&&(I/=100),h.hsl2rgb(m,y,w,I)):((U={r:m,g:y,b:w,toString:xi}).hex="#"+(16777216|w|y<<8|m<<16).toString(16).slice(1),h.is(I,"finite")&&(U.opacity=I),U)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:xi}},h),h.hsb=Gt(function(d,m,y){return h.hsb2rgb(d,m,y).hex}),h.hsl=Gt(function(d,m,y){return h.hsl2rgb(d,m,y).hex}),h.rgb=Gt(function(d,m,y){function w(I){return I+.5|0}return"#"+(16777216|w(y)|w(m)<<8|w(d)<<16).toString(16).slice(1)}),h.getColor=function(d){var m=this.getColor.start=this.getColor.start||{h:0,s:1,b:d||.75},y=this.hsb2rgb(m.h,m.s,m.b);return m.h+=.075,m.h>1&&(m.h=0,m.s-=.2,m.s<=0&&(this.getColor.start={h:0,s:1,b:m.b})),y.hex},h.getColor.reset=function(){delete this.start},h.parsePathString=function(d){if(!d)return null;var m=Dt(d);if(m.arr)return Mt(m.arr);var y={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},w=[];return h.is(d,st)&&h.is(d[0],st)&&(w=Mt(d)),w.length||H(d).replace(nt,function(I,W,V){var U=[],Y=W.toLowerCase();if(V.replace(R,function(ie,be){be&&U.push(+be)}),Y=="m"&&U.length>2&&(w.push([W][ee](U.splice(0,2))),Y="l",W=W=="m"?"l":"L"),Y=="r")w.push([W][ee](U));else for(;U.length>=y[Y]&&(w.push([W][ee](U.splice(0,y[Y]))),y[Y]););}),w.toString=h._path2string,m.arr=Mt(w),w},h.parseTransformString=Gt(function(d){if(!d)return null;var m=[];return h.is(d,st)&&h.is(d[0],st)&&(m=Mt(d)),m.length||H(d).replace(E,function(y,w,I){var W=[];Ae.call(w),I.replace(R,function(V,U){U&&W.push(+U)}),m.push([w][ee](W))}),m.toString=h._path2string,m},this,function(d){if(!d)return d;for(var m=[],y=0;y<d.length;y++){for(var w=[],I=0;I<d[y].length;I++)w.push(d[y][I]);m.push(w)}return m});var Dt=function(d){var m=Dt.ps=Dt.ps||{};return m[d]?m[d].sleep=100:m[d]={sleep:100},setTimeout(function(){for(var y in m)m[D](y)&&y!=d&&(m[y].sleep--,!m[y].sleep&&delete m[y])}),m[d]};function ji(d,m,y,w,I){return d*(d*(-3*m+9*y-9*w+3*I)+6*m-12*y+6*w)-3*m+3*y}function hi(d,m,y,w,I,W,V,U,Y){Y==null&&(Y=1);for(var ie=(Y=Y>1?1:Y<0?0:Y)/2,be=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Ne=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],ye=0,_e=0;_e<12;_e++){var Se=ie*be[_e]+ie,Re=ji(Se,d,y,I,V),Ce=ji(Se,m,w,W,U),we=Re*Re+Ce*Ce;ye+=Ne[_e]*ve.sqrt(we)}return ie*ye}function vn(d,m,y,w,I,W,V,U){if(!(Le(d,y)<We(I,V)||We(d,y)>Le(I,V)||Le(m,w)<We(W,U)||We(m,w)>Le(W,U))){var Y=(d-y)*(W-U)-(m-w)*(I-V);if(Y){var ie=((d*w-m*y)*(I-V)-(d-y)*(I*U-W*V))/Y,be=((d*w-m*y)*(W-U)-(m-w)*(I*U-W*V))/Y,Ne=+ie.toFixed(2),ye=+be.toFixed(2);if(!(Ne<+We(d,y).toFixed(2)||Ne>+Le(d,y).toFixed(2)||Ne<+We(I,V).toFixed(2)||Ne>+Le(I,V).toFixed(2)||ye<+We(m,w).toFixed(2)||ye>+Le(m,w).toFixed(2)||ye<+We(W,U).toFixed(2)||ye>+Le(W,U).toFixed(2)))return{x:ie,y:be}}}}function bi(d,m,y){var w=h.bezierBBox(d),I=h.bezierBBox(m);if(!h.isBBoxIntersect(w,I))return y?0:[];for(var W=hi.apply(0,d),V=hi.apply(0,m),U=Le(~~(W/5),1),Y=Le(~~(V/5),1),ie=[],be=[],Ne={},ye=y?0:[],_e=0;_e<U+1;_e++){var Se=h.findDotsAtSegment.apply(h,d.concat(_e/U));ie.push({x:Se.x,y:Se.y,t:_e/U})}for(_e=0;_e<Y+1;_e++)Se=h.findDotsAtSegment.apply(h,m.concat(_e/Y)),be.push({x:Se.x,y:Se.y,t:_e/Y});for(_e=0;_e<U;_e++)for(var Re=0;Re<Y;Re++){var Ce=ie[_e],we=ie[_e+1],Ke=be[Re],Fe=be[Re+1],Be=it(we.x-Ce.x)<.001?"y":"x",ze=it(Fe.x-Ke.x)<.001?"y":"x",_t=vn(Ce.x,Ce.y,we.x,we.y,Ke.x,Ke.y,Fe.x,Fe.y);if(_t){if(Ne[_t.x.toFixed(4)]==_t.y.toFixed(4))continue;Ne[_t.x.toFixed(4)]=_t.y.toFixed(4);var ot=Ce.t+it((_t[Be]-Ce[Be])/(we[Be]-Ce[Be]))*(we.t-Ce.t),pt=Ke.t+it((_t[ze]-Ke[ze])/(Fe[ze]-Ke[ze]))*(Fe.t-Ke.t);ot>=0&&ot<=1.001&&pt>=0&&pt<=1.001&&(y?ye++:ye.push({x:_t.x,y:_t.y,t1:We(ot,1),t2:We(pt,1)}))}}return ye}function zi(d,m,y){d=h._path2curve(d),m=h._path2curve(m);for(var w,I,W,V,U,Y,ie,be,Ne,ye,_e=y?0:[],Se=0,Re=d.length;Se<Re;Se++){var Ce=d[Se];if(Ce[0]=="M")w=U=Ce[1],I=Y=Ce[2];else{Ce[0]=="C"?(Ne=[w,I].concat(Ce.slice(1)),w=Ne[6],I=Ne[7]):(Ne=[w,I,w,I,U,Y,U,Y],w=U,I=Y);for(var we=0,Ke=m.length;we<Ke;we++){var Fe=m[we];if(Fe[0]=="M")W=ie=Fe[1],V=be=Fe[2];else{Fe[0]=="C"?(ye=[W,V].concat(Fe.slice(1)),W=ye[6],V=ye[7]):(ye=[W,V,W,V,ie,be,ie,be],W=ie,V=be);var Be=bi(Ne,ye,y);if(y)_e+=Be;else{for(var ze=0,_t=Be.length;ze<_t;ze++)Be[ze].segment1=Se,Be[ze].segment2=we,Be[ze].bez1=Ne,Be[ze].bez2=ye;_e=_e.concat(Be)}}}}}return _e}h.findDotsAtSegment=function(d,m,y,w,I,W,V,U,Y){var ie=1-Y,be=Ye(ie,3),Ne=Ye(ie,2),ye=Y*Y,_e=ye*Y,Se=be*d+3*Ne*Y*y+3*ie*Y*Y*I+_e*V,Re=be*m+3*Ne*Y*w+3*ie*Y*Y*W+_e*U,Ce=d+2*Y*(y-d)+ye*(I-2*y+d),we=m+2*Y*(w-m)+ye*(W-2*w+m),Ke=y+2*Y*(I-y)+ye*(V-2*I+y),Fe=w+2*Y*(W-w)+ye*(U-2*W+w),Be=ie*d+Y*y,ze=ie*m+Y*w,_t=ie*I+Y*V,ot=ie*W+Y*U,pt=90-180*ve.atan2(Ce-Ke,we-Fe)/tt;return(Ce>Ke||we<Fe)&&(pt+=180),{x:Se,y:Re,m:{x:Ce,y:we},n:{x:Ke,y:Fe},start:{x:Be,y:ze},end:{x:_t,y:ot},alpha:pt}},h.bezierBBox=function(d,m,y,w,I,W,V,U){h.is(d,"array")||(d=[d,m,y,w,I,W,V,U]);var Y=cn.apply(null,d);return{x:Y.min.x,y:Y.min.y,x2:Y.max.x,y2:Y.max.y,width:Y.max.x-Y.min.x,height:Y.max.y-Y.min.y}},h.isPointInsideBBox=function(d,m,y){return m>=d.x&&m<=d.x2&&y>=d.y&&y<=d.y2},h.isBBoxIntersect=function(d,m){var y=h.isPointInsideBBox;return y(m,d.x,d.y)||y(m,d.x2,d.y)||y(m,d.x,d.y2)||y(m,d.x2,d.y2)||y(d,m.x,m.y)||y(d,m.x2,m.y)||y(d,m.x,m.y2)||y(d,m.x2,m.y2)||(d.x<m.x2&&d.x>m.x||m.x<d.x2&&m.x>d.x)&&(d.y<m.y2&&d.y>m.y||m.y<d.y2&&m.y>d.y)},h.pathIntersection=function(d,m){return zi(d,m)},h.pathIntersectionNumber=function(d,m){return zi(d,m,1)},h.isPointInsidePath=function(d,m,y){var w=h.pathBBox(d);return h.isPointInsideBBox(w,m,y)&&zi(d,[["M",m,y],["H",w.x2+10]],1)%2==1},h._removedFactory=function(d){return function(){l("raphael.log",null,"Raphaël: you are calling to method “"+d+"” of removed object",d)}};var Ei=h.pathBBox=function(d){var m=Dt(d);if(m.bbox)return ht(m.bbox);if(!d)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var y,w=0,I=0,W=[],V=[],U=0,Y=(d=en(d)).length;U<Y;U++)if((y=d[U])[0]=="M")w=y[1],I=y[2],W.push(w),V.push(I);else{var ie=cn(w,I,y[1],y[2],y[3],y[4],y[5],y[6]);W=W[ee](ie.min.x,ie.max.x),V=V[ee](ie.min.y,ie.max.y),w=y[5],I=y[6]}var be=We[Z](0,W),Ne=We[Z](0,V),ye=Le[Z](0,W),_e=Le[Z](0,V),Se=ye-be,Re=_e-Ne,Ce={x:be,y:Ne,x2:ye,y2:_e,width:Se,height:Re,cx:be+Se/2,cy:Ne+Re/2};return m.bbox=ht(Ce),Ce},Mt=function(d){var m=ht(d);return m.toString=h._path2string,m},an=h._pathToRelative=function(d){var m=Dt(d);if(m.rel)return Mt(m.rel);h.is(d,st)&&h.is(d&&d[0],st)||(d=h.parsePathString(d));var y=[],w=0,I=0,W=0,V=0,U=0;d[0][0]=="M"&&(W=w=d[0][1],V=I=d[0][2],U++,y.push(["M",w,I]));for(var Y=U,ie=d.length;Y<ie;Y++){var be=y[Y]=[],Ne=d[Y];if(Ne[0]!=Ae.call(Ne[0]))switch(be[0]=Ae.call(Ne[0]),be[0]){case"a":be[1]=Ne[1],be[2]=Ne[2],be[3]=Ne[3],be[4]=Ne[4],be[5]=Ne[5],be[6]=+(Ne[6]-w).toFixed(3),be[7]=+(Ne[7]-I).toFixed(3);break;case"v":be[1]=+(Ne[1]-I).toFixed(3);break;case"m":W=Ne[1],V=Ne[2];default:for(var ye=1,_e=Ne.length;ye<_e;ye++)be[ye]=+(Ne[ye]-(ye%2?w:I)).toFixed(3)}else{be=y[Y]=[],Ne[0]=="m"&&(W=Ne[1]+w,V=Ne[2]+I);for(var Se=0,Re=Ne.length;Se<Re;Se++)y[Y][Se]=Ne[Se]}var Ce=y[Y].length;switch(y[Y][0]){case"z":w=W,I=V;break;case"h":w+=+y[Y][Ce-1];break;case"v":I+=+y[Y][Ce-1];break;default:w+=+y[Y][Ce-2],I+=+y[Y][Ce-1]}}return y.toString=h._path2string,m.rel=Mt(y),y},Ui=h._pathToAbsolute=function(d){var m=Dt(d);if(m.abs)return Mt(m.abs);if(h.is(d,st)&&h.is(d&&d[0],st)||(d=h.parsePathString(d)),!d||!d.length)return[["M",0,0]];var y=[],w=0,I=0,W=0,V=0,U=0;d[0][0]=="M"&&(W=w=+d[0][1],V=I=+d[0][2],U++,y[0]=["M",w,I]);for(var Y,ie,be=d.length==3&&d[0][0]=="M"&&d[1][0].toUpperCase()=="R"&&d[2][0].toUpperCase()=="Z",Ne=U,ye=d.length;Ne<ye;Ne++){if(y.push(Y=[]),(ie=d[Ne])[0]!=X.call(ie[0]))switch(Y[0]=X.call(ie[0]),Y[0]){case"A":Y[1]=ie[1],Y[2]=ie[2],Y[3]=ie[3],Y[4]=ie[4],Y[5]=ie[5],Y[6]=+(ie[6]+w),Y[7]=+(ie[7]+I);break;case"V":Y[1]=+ie[1]+I;break;case"H":Y[1]=+ie[1]+w;break;case"R":for(var _e=[w,I][ee](ie.slice(1)),Se=2,Re=_e.length;Se<Re;Se++)_e[Se]=+_e[Se]+w,_e[++Se]=+_e[Se]+I;y.pop(),y=y[ee](Wt(_e,be));break;case"M":W=+ie[1]+w,V=+ie[2]+I;default:for(Se=1,Re=ie.length;Se<Re;Se++)Y[Se]=+ie[Se]+(Se%2?w:I)}else if(ie[0]=="R")_e=[w,I][ee](ie.slice(1)),y.pop(),y=y[ee](Wt(_e,be)),Y=["R"][ee](ie.slice(-2));else for(var Ce=0,we=ie.length;Ce<we;Ce++)Y[Ce]=ie[Ce];switch(Y[0]){case"Z":w=W,I=V;break;case"H":w=Y[1];break;case"V":I=Y[1];break;case"M":W=Y[Y.length-2],V=Y[Y.length-1];default:w=Y[Y.length-2],I=Y[Y.length-1]}}return y.toString=h._path2string,m.abs=Mt(y),y},Vi=function(d,m,y,w){return[d,m,y,w,y,w]},Oi=function(d,m,y,w,I,W){return[1/3*d+2/3*y,1/3*m+2/3*w,1/3*I+2/3*y,1/3*W+2/3*w,I,W]},ln=function(d,m,y,w,I,W,V,U,Y,ie){var be,Ne=120*tt/180,ye=tt/180*(+I||0),_e=[],Se=Gt(function(j,q,re){return{x:j*ve.cos(re)-q*ve.sin(re),y:j*ve.sin(re)+q*ve.cos(re)}});if(ie)ot=ie[0],pt=ie[1],ze=ie[2],_t=ie[3];else{d=(be=Se(d,m,-ye)).x,m=be.y,U=(be=Se(U,Y,-ye)).x,Y=be.y;var Re=(d-U)/2,Ce=(m-Y)/2,we=Re*Re/(y*y)+Ce*Ce/(w*w);we>1&&(y*=we=ve.sqrt(we),w*=we);var Ke=y*y,Fe=w*w,Be=(W==V?-1:1)*ve.sqrt(it((Ke*Fe-Ke*Ce*Ce-Fe*Re*Re)/(Ke*Ce*Ce+Fe*Re*Re))),ze=Be*y*Ce/w+(d+U)/2,_t=Be*-w*Re/y+(m+Y)/2,ot=ve.asin(((m-_t)/w).toFixed(9)),pt=ve.asin(((Y-_t)/w).toFixed(9));(ot=d<ze?tt-ot:ot)<0&&(ot=2*tt+ot),(pt=U<ze?tt-pt:pt)<0&&(pt=2*tt+pt),V&&ot>pt&&(ot-=2*tt),!V&&pt>ot&&(pt-=2*tt)}var zn=pt-ot;if(it(zn)>Ne){var Yn=pt,Ti=U,un=Y;pt=ot+Ne*(V&&pt>ot?1:-1),U=ze+y*ve.cos(pt),Y=_t+w*ve.sin(pt),_e=ln(U,Y,y,w,I,0,V,Ti,un,[pt,Yn,ze,_t])}zn=pt-ot;var Fn=ve.cos(ot),dn=ve.sin(ot),qn=ve.cos(pt),qi=ve.sin(pt),En=ve.tan(zn/4),S=4/3*y*En,z=4/3*w*En,s=[d,m],c=[d+S*dn,m-z*Fn],u=[U+S*qi,Y-z*qn],f=[U,Y];if(c[0]=2*s[0]-c[0],c[1]=2*s[1]-c[1],ie)return[c,u,f][ee](_e);for(var v=[],b=0,A=(_e=[c,u,f][ee](_e).join()[oe](",")).length;b<A;b++)v[b]=b%2?Se(_e[b-1],_e[b],ye).y:Se(_e[b],_e[b+1],ye).x;return v},Qi=function(d,m,y,w,I,W,V,U,Y){var ie=1-Y;return{x:Ye(ie,3)*d+3*Ye(ie,2)*Y*y+3*ie*Y*Y*I+Ye(Y,3)*V,y:Ye(ie,3)*m+3*Ye(ie,2)*Y*w+3*ie*Y*Y*W+Ye(Y,3)*U}},cn=Gt(function(d,m,y,w,I,W,V,U){var Y,ie=I-2*y+d-(V-2*I+y),be=2*(y-d)-2*(I-y),Ne=d-y,ye=(-be+ve.sqrt(be*be-4*ie*Ne))/2/ie,_e=(-be-ve.sqrt(be*be-4*ie*Ne))/2/ie,Se=[m,U],Re=[d,V];return it(ye)>"1e12"&&(ye=.5),it(_e)>"1e12"&&(_e=.5),ye>0&&ye<1&&(Y=Qi(d,m,y,w,I,W,V,U,ye),Re.push(Y.x),Se.push(Y.y)),_e>0&&_e<1&&(Y=Qi(d,m,y,w,I,W,V,U,_e),Re.push(Y.x),Se.push(Y.y)),ie=W-2*w+m-(U-2*W+w),Ne=m-w,ye=(-(be=2*(w-m)-2*(W-w))+ve.sqrt(be*be-4*ie*Ne))/2/ie,_e=(-be-ve.sqrt(be*be-4*ie*Ne))/2/ie,it(ye)>"1e12"&&(ye=.5),it(_e)>"1e12"&&(_e=.5),ye>0&&ye<1&&(Y=Qi(d,m,y,w,I,W,V,U,ye),Re.push(Y.x),Se.push(Y.y)),_e>0&&_e<1&&(Y=Qi(d,m,y,w,I,W,V,U,_e),Re.push(Y.x),Se.push(Y.y)),{min:{x:We[Z](0,Re),y:We[Z](0,Se)},max:{x:Le[Z](0,Re),y:Le[Z](0,Se)}}}),en=h._path2curve=Gt(function(d,m){var y=!m&&Dt(d);if(!m&&y.curve)return Mt(y.curve);for(var w=Ui(d),I=m&&Ui(m),W={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},V={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},U=function(Be,ze,_t){var ot,pt;if(!Be)return["C",ze.x,ze.y,ze.x,ze.y,ze.x,ze.y];switch(!(Be[0]in{T:1,Q:1})&&(ze.qx=ze.qy=null),Be[0]){case"M":ze.X=Be[1],ze.Y=Be[2];break;case"A":Be=["C"][ee](ln[Z](0,[ze.x,ze.y][ee](Be.slice(1))));break;case"S":_t=="C"||_t=="S"?(ot=2*ze.x-ze.bx,pt=2*ze.y-ze.by):(ot=ze.x,pt=ze.y),Be=["C",ot,pt][ee](Be.slice(1));break;case"T":_t=="Q"||_t=="T"?(ze.qx=2*ze.x-ze.qx,ze.qy=2*ze.y-ze.qy):(ze.qx=ze.x,ze.qy=ze.y),Be=["C"][ee](Oi(ze.x,ze.y,ze.qx,ze.qy,Be[1],Be[2]));break;case"Q":ze.qx=Be[1],ze.qy=Be[2],Be=["C"][ee](Oi(ze.x,ze.y,Be[1],Be[2],Be[3],Be[4]));break;case"L":Be=["C"][ee](Vi(ze.x,ze.y,Be[1],Be[2]));break;case"H":Be=["C"][ee](Vi(ze.x,ze.y,Be[1],ze.y));break;case"V":Be=["C"][ee](Vi(ze.x,ze.y,ze.x,Be[1]));break;case"Z":Be=["C"][ee](Vi(ze.x,ze.y,ze.X,ze.Y))}return Be},Y=function(Be,ze){if(Be[ze].length>7){Be[ze].shift();for(var _t=Be[ze];_t.length;)be[ze]="A",I&&(Ne[ze]="A"),Be.splice(ze++,0,["C"][ee](_t.splice(0,6)));Be.splice(ze,1),Re=Le(w.length,I&&I.length||0)}},ie=function(Be,ze,_t,ot,pt){Be&&ze&&Be[pt][0]=="M"&&ze[pt][0]!="M"&&(ze.splice(pt,0,["M",ot.x,ot.y]),_t.bx=0,_t.by=0,_t.x=Be[pt][1],_t.y=Be[pt][2],Re=Le(w.length,I&&I.length||0))},be=[],Ne=[],ye="",_e="",Se=0,Re=Le(w.length,I&&I.length||0);Se<Re;Se++){w[Se]&&(ye=w[Se][0]),ye!="C"&&(be[Se]=ye,Se&&(_e=be[Se-1])),w[Se]=U(w[Se],W,_e),be[Se]!="A"&&ye=="C"&&(be[Se]="C"),Y(w,Se),I&&(I[Se]&&(ye=I[Se][0]),ye!="C"&&(Ne[Se]=ye,Se&&(_e=Ne[Se-1])),I[Se]=U(I[Se],V,_e),Ne[Se]!="A"&&ye=="C"&&(Ne[Se]="C"),Y(I,Se)),ie(w,I,W,V,Se),ie(I,w,V,W,Se);var Ce=w[Se],we=I&&I[Se],Ke=Ce.length,Fe=I&&we.length;W.x=Ce[Ke-2],W.y=Ce[Ke-1],W.bx=B(Ce[Ke-4])||W.x,W.by=B(Ce[Ke-3])||W.y,V.bx=I&&(B(we[Fe-4])||V.x),V.by=I&&(B(we[Fe-3])||V.y),V.x=I&&we[Fe-2],V.y=I&&we[Fe-1]}return I||(y.curve=Mt(w)),I?[w,I]:w},null,Mt),tn=(h._parseDots=Gt(function(d){for(var m=[],y=0,w=d.length;y<w;y++){var I={},W=d[y].match(/^([^:]*):?([\d\.]*)/);if(I.color=h.getRGB(W[1]),I.color.error)return null;I.opacity=I.color.opacity,I.color=I.color.hex,W[2]&&(I.offset=W[2]+"%"),m.push(I)}for(y=1,w=m.length-1;y<w;y++)if(!m[y].offset){for(var V=B(m[y-1].offset||0),U=0,Y=y+1;Y<w;Y++)if(m[Y].offset){U=m[Y].offset;break}U||(U=100,Y=w);for(var ie=((U=B(U))-V)/(Y-y+1);y<Y;y++)V+=ie,m[y].offset=V+"%"}return m}),h._tear=function(d,m){d==m.top&&(m.top=d.prev),d==m.bottom&&(m.bottom=d.next),d.next&&(d.next.prev=d.prev),d.prev&&(d.prev.next=d.next)}),hn=(h._tofront=function(d,m){m.top!==d&&(tn(d,m),d.next=null,d.prev=m.top,m.top.next=d,m.top=d)},h._toback=function(d,m){m.bottom!==d&&(tn(d,m),d.next=m.bottom,d.prev=null,m.bottom.prev=d,m.bottom=d)},h._insertafter=function(d,m,y){tn(d,y),m==y.top&&(y.top=d),m.next&&(m.next.prev=d),d.next=m.next,d.prev=m,m.next=d},h._insertbefore=function(d,m,y){tn(d,y),m==y.bottom&&(y.bottom=d),m.prev&&(m.prev.next=d),d.prev=m.prev,m.prev=d,d.next=m},h.toMatrix=function(d,m){var y=Ei(d),w={_:{transform:pe},getBBox:function(){return y}};return gr(w,m),w.matrix}),gr=(h.transformPath=function(d,m){return Ze(d,hn(d,m))},h._extractTransform=function(d,m){if(m==null)return d._.transform;m=H(m).replace(/\.{3}|\u2026/g,d._.transform||pe);var y,w,I=h.parseTransformString(m),W=0,V=1,U=1,Y=d._,ie=new Di;if(Y.transform=I||[],I)for(var be=0,Ne=I.length;be<Ne;be++){var ye,_e,Se,Re,Ce,we=I[be],Ke=we.length,Fe=H(we[0]).toLowerCase(),Be=we[0]!=Fe,ze=Be?ie.invert():0;Fe=="t"&&Ke==3?Be?(ye=ze.x(0,0),_e=ze.y(0,0),Se=ze.x(we[1],we[2]),Re=ze.y(we[1],we[2]),ie.translate(Se-ye,Re-_e)):ie.translate(we[1],we[2]):Fe=="r"?Ke==2?(Ce=Ce||d.getBBox(1),ie.rotate(we[1],Ce.x+Ce.width/2,Ce.y+Ce.height/2),W+=we[1]):Ke==4&&(Be?(Se=ze.x(we[2],we[3]),Re=ze.y(we[2],we[3]),ie.rotate(we[1],Se,Re)):ie.rotate(we[1],we[2],we[3]),W+=we[1]):Fe=="s"?Ke==2||Ke==3?(Ce=Ce||d.getBBox(1),ie.scale(we[1],we[Ke-1],Ce.x+Ce.width/2,Ce.y+Ce.height/2),V*=we[1],U*=we[Ke-1]):Ke==5&&(Be?(Se=ze.x(we[3],we[4]),Re=ze.y(we[3],we[4]),ie.scale(we[1],we[2],Se,Re)):ie.scale(we[1],we[2],we[3],we[4]),V*=we[1],U*=we[2]):Fe=="m"&&Ke==7&&ie.add(we[1],we[2],we[3],we[4],we[5],we[6]),Y.dirtyT=1,d.matrix=ie}d.matrix=ie,Y.sx=V,Y.sy=U,Y.deg=W,Y.dx=y=ie.e,Y.dy=w=ie.f,V==1&&U==1&&!W&&Y.bbox?(Y.bbox.x+=+y,Y.bbox.y+=+w):Y.dirtyT=1}),Kt=function(d){var m=d[0];switch(m.toLowerCase()){case"t":return[m,0,0];case"m":return[m,1,0,0,1,0,0];case"r":return d.length==4?[m,0,d[2],d[3]]:[m,0];case"s":return d.length==5?[m,1,1,d[3],d[4]]:d.length==3?[m,1,1]:[m,1]}},ui=h._equaliseTransform=function(d,m){m=H(m).replace(/\.{3}|\u2026/g,d),d=h.parseTransformString(d)||[],m=h.parseTransformString(m)||[];for(var y,w,I,W,V=Le(d.length,m.length),U=[],Y=[],ie=0;ie<V;ie++){if(I=d[ie]||Kt(m[ie]),W=m[ie]||Kt(I),I[0]!=W[0]||I[0].toLowerCase()=="r"&&(I[2]!=W[2]||I[3]!=W[3])||I[0].toLowerCase()=="s"&&(I[3]!=W[3]||I[4]!=W[4]))return;for(U[ie]=[],Y[ie]=[],y=0,w=Le(I.length,W.length);y<w;y++)y in I&&(U[ie][y]=I[y]),y in W&&(Y[ie][y]=W[y])}return{from:U,to:Y}};function Di(d,m,y,w,I,W){d!=null?(this.a=+d,this.b=+m,this.c=+y,this.d=+w,this.e=+I,this.f=+W):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}h._getContainer=function(d,m,y,w){var I;if((I=w!=null||h.is(d,"object")?d:F.doc.getElementById(d))!=null)return I.tagName?m==null?{container:I,width:I.style.pixelWidth||I.offsetWidth,height:I.style.pixelHeight||I.offsetHeight}:{container:I,width:m,height:y}:{container:1,x:d,y:m,width:y,height:w}},h.pathToRelative=an,h._engine={},h.path2curve=en,h.matrix=function(d,m,y,w,I,W){return new Di(d,m,y,w,I,W)},function(d){function m(w){return w[0]*w[0]+w[1]*w[1]}function y(w){var I=ve.sqrt(m(w));w[0]&&(w[0]/=I),w[1]&&(w[1]/=I)}d.add=function(w,I,W,V,U,Y){var ie,be,Ne,ye,_e=[[],[],[]],Se=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],Re=[[w,W,U],[I,V,Y],[0,0,1]];for(w&&w instanceof Di&&(Re=[[w.a,w.c,w.e],[w.b,w.d,w.f],[0,0,1]]),ie=0;ie<3;ie++)for(be=0;be<3;be++){for(ye=0,Ne=0;Ne<3;Ne++)ye+=Se[ie][Ne]*Re[Ne][be];_e[ie][be]=ye}this.a=_e[0][0],this.b=_e[1][0],this.c=_e[0][1],this.d=_e[1][1],this.e=_e[0][2],this.f=_e[1][2]},d.invert=function(){var w=this,I=w.a*w.d-w.b*w.c;return new Di(w.d/I,-w.b/I,-w.c/I,w.a/I,(w.c*w.f-w.d*w.e)/I,(w.b*w.e-w.a*w.f)/I)},d.clone=function(){return new Di(this.a,this.b,this.c,this.d,this.e,this.f)},d.translate=function(w,I){this.add(1,0,0,1,w,I)},d.scale=function(w,I,W,V){I==null&&(I=w),(W||V)&&this.add(1,0,0,1,W,V),this.add(w,0,0,I,0,0),(W||V)&&this.add(1,0,0,1,-W,-V)},d.rotate=function(w,I,W){w=h.rad(w),I=I||0,W=W||0;var V=+ve.cos(w).toFixed(9),U=+ve.sin(w).toFixed(9);this.add(V,U,-U,V,I,W),this.add(1,0,0,1,-I,-W)},d.x=function(w,I){return w*this.a+I*this.c+this.e},d.y=function(w,I){return w*this.b+I*this.d+this.f},d.get=function(w){return+this[H.fromCharCode(97+w)].toFixed(4)},d.toString=function(){return h.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},d.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},d.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},d.split=function(){var w={};w.dx=this.e,w.dy=this.f;var I=[[this.a,this.c],[this.b,this.d]];w.scalex=ve.sqrt(m(I[0])),y(I[0]),w.shear=I[0][0]*I[1][0]+I[0][1]*I[1][1],I[1]=[I[1][0]-I[0][0]*w.shear,I[1][1]-I[0][1]*w.shear],w.scaley=ve.sqrt(m(I[1])),y(I[1]),w.shear/=w.scaley;var W=-I[0][1],V=I[1][1];return V<0?(w.rotate=h.deg(ve.acos(V)),W<0&&(w.rotate=360-w.rotate)):w.rotate=h.deg(ve.asin(W)),w.isSimple=!(+w.shear.toFixed(9)||w.scalex.toFixed(9)!=w.scaley.toFixed(9)&&w.rotate),w.isSuperSimple=!+w.shear.toFixed(9)&&w.scalex.toFixed(9)==w.scaley.toFixed(9)&&!w.rotate,w.noRotation=!+w.shear.toFixed(9)&&!w.rotate,w},d.toTransformString=function(w){var I=w||this[oe]();return I.isSimple?(I.scalex=+I.scalex.toFixed(4),I.scaley=+I.scaley.toFixed(4),I.rotate=+I.rotate.toFixed(4),(I.dx||I.dy?"t"+[I.dx,I.dy]:pe)+(I.scalex!=1||I.scaley!=1?"s"+[I.scalex,I.scaley,0,0]:pe)+(I.rotate?"r"+[I.rotate,0,0]:pe)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(Di.prototype);for(var bn=function(){this.returnValue=!1},yn=function(){return this.originalEvent.preventDefault()},Rn=function(){this.cancelBubble=!0},Si=function(){return this.originalEvent.stopPropagation()},rr=function(d){var m=F.doc.documentElement.scrollTop||F.doc.body.scrollTop,y=F.doc.documentElement.scrollLeft||F.doc.body.scrollLeft;return{x:d.clientX+y,y:d.clientY+m}},mr=F.doc.addEventListener?function(d,m,y,w){var I=function(V){var U=rr(V);return y.call(w,V,U.x,U.y)};if(d.addEventListener(m,I,!1),he&&Te[m]){var W=function(V){for(var U=rr(V),Y=V,ie=0,be=V.targetTouches&&V.targetTouches.length;ie<be;ie++)if(V.targetTouches[ie].target==d){(V=V.targetTouches[ie]).originalEvent=Y,V.preventDefault=yn,V.stopPropagation=Si;break}return y.call(w,V,U.x,U.y)};d.addEventListener(Te[m],W,!1)}return function(){return d.removeEventListener(m,I,!1),he&&Te[m]&&d.removeEventListener(Te[m],W,!1),!0}}:F.doc.attachEvent?function(d,m,y,w){var I=function(W){W=W||F.win.event;var V=F.doc.documentElement.scrollTop||F.doc.body.scrollTop,U=F.doc.documentElement.scrollLeft||F.doc.body.scrollLeft,Y=W.clientX+U,ie=W.clientY+V;return W.preventDefault=W.preventDefault||bn,W.stopPropagation=W.stopPropagation||Rn,y.call(w,W,Y,ie)};return d.attachEvent("on"+m,I),function(){return d.detachEvent("on"+m,I),!0}}:void 0,Yi=[],wn=function(d){for(var m,y=d.clientX,w=d.clientY,I=F.doc.documentElement.scrollTop||F.doc.body.scrollTop,W=F.doc.documentElement.scrollLeft||F.doc.body.scrollLeft,V=Yi.length;V--;){if(m=Yi[V],he&&d.touches){for(var U,Y=d.touches.length;Y--;)if((U=d.touches[Y]).identifier==m.el._drag.id){y=U.clientX,w=U.clientY,(d.originalEvent?d.originalEvent:d).preventDefault();break}}else d.preventDefault();var ie,be=m.el.node,Ne=be.nextSibling,ye=be.parentNode,_e=be.style.display;F.win.opera&&ye.removeChild(be),be.style.display="none",ie=m.el.paper.getElementByPoint(y,w),be.style.display=_e,F.win.opera&&(Ne?ye.insertBefore(be,Ne):ye.appendChild(be)),ie&&l("raphael.drag.over."+m.el.id,m.el,ie),y+=W,w+=I,l("raphael.drag.move."+m.el.id,m.move_scope||m.el,y-m.el._drag.x,w-m.el._drag.y,y,w,d)}},_r=function(d){h.unmousemove(wn).unmouseup(_r);for(var m,y=Yi.length;y--;)(m=Yi[y]).el._drag={},l("raphael.drag.end."+m.el.id,m.end_scope||m.start_scope||m.move_scope||m.el,d);Yi=[]},Ue=h.el={},ne=me.length;ne--;)(function(d){h[d]=Ue[d]=function(m,y){return h.is(m,"function")&&(this.events=this.events||[],this.events.push({name:d,f:m,unbind:mr(this.shape||this.node||F.doc,d,m,y||this)})),this},h["un"+d]=Ue["un"+d]=function(m){for(var y=this.events||[],w=y.length;w--;)y[w].name!=d||!h.is(m,"undefined")&&y[w].f!=m||(y[w].unbind(),y.splice(w,1),!y.length&&delete this.events);return this}})(me[ne]);Ue.data=function(d,m){var y=L[this.id]=L[this.id]||{};if(arguments.length==0)return y;if(arguments.length==1){if(h.is(d,"object")){for(var w in d)d[D](w)&&this.data(w,d[w]);return this}return l("raphael.data.get."+this.id,this,y[d],d),y[d]}return y[d]=m,l("raphael.data.set."+this.id,this,m,d),this},Ue.removeData=function(d){return d==null?delete L[this.id]:L[this.id]&&delete L[this.id][d],this},Ue.getData=function(){return ht(L[this.id]||{})},Ue.hover=function(d,m,y,w){return this.mouseover(d,y).mouseout(m,w||y)},Ue.unhover=function(d,m){return this.unmouseover(d).unmouseout(m)};var Me=[];Ue.drag=function(d,m,y,w,I,W){function V(U){(U.originalEvent||U).preventDefault();var Y=U.clientX,ie=U.clientY,be=F.doc.documentElement.scrollTop||F.doc.body.scrollTop,Ne=F.doc.documentElement.scrollLeft||F.doc.body.scrollLeft;if(this._drag.id=U.identifier,he&&U.touches){for(var ye,_e=U.touches.length;_e--;)if(ye=U.touches[_e],this._drag.id=ye.identifier,ye.identifier==this._drag.id){Y=ye.clientX,ie=ye.clientY;break}}this._drag.x=Y+Ne,this._drag.y=ie+be,!Yi.length&&h.mousemove(wn).mouseup(_r),Yi.push({el:this,move_scope:w,start_scope:I,end_scope:W}),m&&l.on("raphael.drag.start."+this.id,m),d&&l.on("raphael.drag.move."+this.id,d),y&&l.on("raphael.drag.end."+this.id,y),l("raphael.drag.start."+this.id,I||w||this,this._drag.x,this._drag.y,U)}return this._drag={},Me.push({el:this,start:V}),this.mousedown(V),this},Ue.onDragOver=function(d){d?l.on("raphael.drag.over."+this.id,d):l.unbind("raphael.drag.over."+this.id)},Ue.undrag=function(){for(var d=Me.length;d--;)Me[d].el==this&&(this.unmousedown(Me[d].start),Me.splice(d,1),l.unbind("raphael.drag.*."+this.id));!Me.length&&h.unmousemove(wn).unmouseup(_r),Yi=[]},_.circle=function(d,m,y){var w=h._engine.circle(this,d||0,m||0,y||0);return this.__set__&&this.__set__.push(w),w},_.rect=function(d,m,y,w,I){var W=h._engine.rect(this,d||0,m||0,y||0,w||0,I||0);return this.__set__&&this.__set__.push(W),W},_.ellipse=function(d,m,y,w){var I=h._engine.ellipse(this,d||0,m||0,y||0,w||0);return this.__set__&&this.__set__.push(I),I},_.path=function(d){d&&!h.is(d,"string")&&!h.is(d[0],st)&&(d+=pe);var m=h._engine.path(h.format[Z](h,arguments),this);return this.__set__&&this.__set__.push(m),m},_.image=function(d,m,y,w,I){var W=h._engine.image(this,d||"about:blank",m||0,y||0,w||0,I||0);return this.__set__&&this.__set__.push(W),W},_.text=function(d,m,y){var w=h._engine.text(this,d||0,m||0,H(y));return this.__set__&&this.__set__.push(w),w},_.set=function(d){!h.is(d,"array")&&(d=Array.prototype.splice.call(arguments,0,arguments.length));var m=new br(d);return this.__set__&&this.__set__.push(m),m.paper=this,m.type="set",m},_.setStart=function(d){this.__set__=d||this.set()},_.setFinish=function(d){var m=this.__set__;return delete this.__set__,m},_.getSize=function(){var d=this.canvas.parentNode;return{width:d.offsetWidth,height:d.offsetHeight}},_.setSize=function(d,m){return h._engine.setSize.call(this,d,m)},_.setViewBox=function(d,m,y,w,I){return h._engine.setViewBox.call(this,d,m,y,w,I)},_.top=_.bottom=null,_.raphael=h;function Ve(){return this.x+p+this.y+p+this.width+" × "+this.height}_.getElementByPoint=function(d,m){var y,w,I,W,V,U,Y,ie=this.canvas,be=F.doc.elementFromPoint(d,m);if(F.win.opera&&be.tagName=="svg"){var Ne=(w=(y=ie).getBoundingClientRect(),I=y.ownerDocument,W=I.body,V=I.documentElement,U=V.clientTop||W.clientTop||0,Y=V.clientLeft||W.clientLeft||0,{y:w.top+(F.win.pageYOffset||V.scrollTop||W.scrollTop)-U,x:w.left+(F.win.pageXOffset||V.scrollLeft||W.scrollLeft)-Y}),ye=ie.createSVGRect();ye.x=d-Ne.x,ye.y=m-Ne.y,ye.width=ye.height=1;var _e=ie.getIntersectionList(ye,null);_e.length&&(be=_e[_e.length-1])}if(!be)return null;for(;be.parentNode&&be!=ie.parentNode&&!be.raphael;)be=be.parentNode;return be==this.canvas.parentNode&&(be=ie),be=be&&be.raphael?this.getById(be.raphaelid):null},_.getElementsByBBox=function(d){var m=this.set();return this.forEach(function(y){h.isBBoxIntersect(y.getBBox(),d)&&m.push(y)}),m},_.getById=function(d){for(var m=this.bottom;m;){if(m.id==d)return m;m=m.next}return null},_.forEach=function(d,m){for(var y=this.bottom;y;){if(d.call(m,y)===!1)return this;y=y.next}return this},_.getElementsByPoint=function(d,m){var y=this.set();return this.forEach(function(w){w.isPointInside(d,m)&&y.push(w)}),y},Ue.isPointInside=function(d,m){var y=this.realPath=et[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(y=h.transformPath(y,this.attr("transform"))),h.isPointInsidePath(y,d,m)},Ue.getBBox=function(d){if(this.removed)return{};var m=this._;return d?(!m.dirty&&m.bboxwt||(this.realPath=et[this.type](this),m.bboxwt=Ei(this.realPath),m.bboxwt.toString=Ve,m.dirty=0),m.bboxwt):((m.dirty||m.dirtyT||!m.bbox)&&(!m.dirty&&this.realPath||(m.bboxwt=0,this.realPath=et[this.type](this)),m.bbox=Ei(Ze(this.realPath,this.matrix)),m.bbox.toString=Ve,m.dirty=m.dirtyT=0),m.bbox)},Ue.clone=function(){if(this.removed)return null;var d=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(d),d},Ue.glow=function(d){if(this.type=="text")return null;var m={width:((d=d||{}).width||10)+(+this.attr("stroke-width")||1),fill:d.fill||!1,opacity:d.opacity==null?.5:d.opacity,offsetx:d.offsetx||0,offsety:d.offsety||0,color:d.color||"#000"},y=m.width/2,w=this.paper,I=w.set(),W=this.realPath||et[this.type](this);W=this.matrix?Ze(W,this.matrix):W;for(var V=1;V<y+1;V++)I.push(w.path(W).attr({stroke:m.color,fill:m.fill?m.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(m.width/y*V).toFixed(3),opacity:+(m.opacity/y).toFixed(3)}));return I.insertBefore(this).translate(m.offsetx,m.offsety)};var dt=function(d,m,y,w,I,W,V,U,Y){return Y==null?hi(d,m,y,w,I,W,V,U):h.findDotsAtSegment(d,m,y,w,I,W,V,U,function(ie,be,Ne,ye,_e,Se,Re,Ce,we){if(!(we<0||hi(ie,be,Ne,ye,_e,Se,Re,Ce)<we)){var Ke,Fe=.5,Be=1-Fe;for(Ke=hi(ie,be,Ne,ye,_e,Se,Re,Ce,Be);it(Ke-we)>.01;)Ke=hi(ie,be,Ne,ye,_e,Se,Re,Ce,Be+=(Ke<we?1:-1)*(Fe/=2));return Be}}(d,m,y,w,I,W,V,U,Y))},Jt=function(d,m){return function(y,w,I){for(var W,V,U,Y,ie,be="",Ne={},ye=0,_e=0,Se=(y=en(y)).length;_e<Se;_e++){if((U=y[_e])[0]=="M")W=+U[1],V=+U[2];else{if(ye+(Y=dt(W,V,U[1],U[2],U[3],U[4],U[5],U[6]))>w){if(m&&!Ne.start){if(be+=["C"+(ie=dt(W,V,U[1],U[2],U[3],U[4],U[5],U[6],w-ye)).start.x,ie.start.y,ie.m.x,ie.m.y,ie.x,ie.y],I)return be;Ne.start=be,be=["M"+ie.x,ie.y+"C"+ie.n.x,ie.n.y,ie.end.x,ie.end.y,U[5],U[6]].join(),ye+=Y,W=+U[5],V=+U[6];continue}if(!d&&!m)return{x:(ie=dt(W,V,U[1],U[2],U[3],U[4],U[5],U[6],w-ye)).x,y:ie.y,alpha:ie.alpha}}ye+=Y,W=+U[5],V=+U[6]}be+=U.shift()+U}return Ne.end=be,(ie=d?ye:m?Ne:h.findDotsAtSegment(W,V,U[0],U[1],U[2],U[3],U[4],U[5],1)).alpha&&(ie={x:ie.x,y:ie.y,alpha:ie.alpha}),ie}},oi=Jt(1),Ft=Jt(),Bt=Jt(0,1);h.getTotalLength=oi,h.getPointAtLength=Ft,h.getSubpath=function(d,m,y){if(this.getTotalLength(d)-y<1e-6)return Bt(d,m).end;var w=Bt(d,y,1);return m?Bt(w,m).end:w},Ue.getTotalLength=function(){var d=this.getPath();if(d)return this.node.getTotalLength?this.node.getTotalLength():oi(d)},Ue.getPointAtLength=function(d){var m=this.getPath();if(m)return Ft(m,d)},Ue.getPath=function(){var d,m=h._getPath[this.type];if(this.type!="text"&&this.type!="set")return m&&(d=m(this)),d},Ue.getSubpath=function(d,m){var y=this.getPath();if(y)return h.getSubpath(y,d,m)};var $t=h.easing_formulas={linear:function(d){return d},"<":function(d){return Ye(d,1.7)},">":function(d){return Ye(d,.48)},"<>":function(d){var m=.48-d/1.04,y=ve.sqrt(.1734+m*m),w=y-m,I=-y-m,W=Ye(it(w),1/3)*(w<0?-1:1)+Ye(it(I),1/3)*(I<0?-1:1)+.5;return 3*(1-W)*W*W+W*W*W},backIn:function(d){var m=1.70158;return d*d*((m+1)*d-m)},backOut:function(d){var m=1.70158;return(d-=1)*d*((m+1)*d+m)+1},elastic:function(d){return d==!!d?d:Ye(2,-10*d)*ve.sin(2*tt*(d-.075)/.3)+1},bounce:function(d){var m=7.5625,y=2.75;return d<1/y?m*d*d:d<2/y?m*(d-=1.5/y)*d+.75:d<2.5/y?m*(d-=2.25/y)*d+.9375:m*(d-=2.625/y)*d+.984375}};$t.easeIn=$t["ease-in"]=$t["<"],$t.easeOut=$t["ease-out"]=$t[">"],$t.easeInOut=$t["ease-in-out"]=$t["<>"],$t["back-in"]=$t.backIn,$t["back-out"]=$t.backOut;var ct=[],vr=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(d){setTimeout(d,16)},sr=function(){for(var d=+new Date,m=0;m<ct.length;m++){var y=ct[m];if(!y.el.removed&&!y.paused){var w,I,W=d-y.start,V=y.ms,U=y.easing,Y=y.from,ie=y.diff,be=y.to,Ne=(y.t,y.el),ye={},_e={};if(y.initstatus?(W=(y.initstatus*y.anim.top-y.prev)/(y.percent-y.prev)*V,y.status=y.initstatus,delete y.initstatus,y.stop&&ct.splice(m--,1)):y.status=(y.prev+(y.percent-y.prev)*(W/V))/y.anim.top,!(W<0))if(W<V){var Se=U(W/V);for(var Re in Y)if(Y[D](Re)){switch(ae[Re]){case Qe:w=+Y[Re]+Se*V*ie[Re];break;case"colour":w="rgb("+[or($(Y[Re].r+Se*V*ie[Re].r)),or($(Y[Re].g+Se*V*ie[Re].g)),or($(Y[Re].b+Se*V*ie[Re].b))].join(",")+")";break;case"path":w=[];for(var Ce=0,we=Y[Re].length;Ce<we;Ce++){w[Ce]=[Y[Re][Ce][0]];for(var Ke=1,Fe=Y[Re][Ce].length;Ke<Fe;Ke++)w[Ce][Ke]=+Y[Re][Ce][Ke]+Se*V*ie[Re][Ce][Ke];w[Ce]=w[Ce].join(p)}w=w.join(p);break;case"transform":if(ie[Re].real)for(w=[],Ce=0,we=Y[Re].length;Ce<we;Ce++)for(w[Ce]=[Y[Re][Ce][0]],Ke=1,Fe=Y[Re][Ce].length;Ke<Fe;Ke++)w[Ce][Ke]=Y[Re][Ce][Ke]+Se*V*ie[Re][Ce][Ke];else{var Be=function(_t){return+Y[Re][_t]+Se*V*ie[Re][_t]};w=[["m",Be(0),Be(1),Be(2),Be(3),Be(4),Be(5)]]}break;case"csv":if(Re=="clip-rect")for(w=[],Ce=4;Ce--;)w[Ce]=+Y[Re][Ce]+Se*V*ie[Re][Ce];break;default:var ze=[][ee](Y[Re]);for(w=[],Ce=Ne.paper.customAttributes[Re].length;Ce--;)w[Ce]=+ze[Ce]+Se*V*ie[Re][Ce]}ye[Re]=w}Ne.attr(ye),function(_t,ot,pt){setTimeout(function(){l("raphael.anim.frame."+_t,ot,pt)})}(Ne.id,Ne,y.anim)}else{if(function(_t,ot,pt){setTimeout(function(){l("raphael.anim.frame."+ot.id,ot,pt),l("raphael.anim.finish."+ot.id,ot,pt),h.is(_t,"function")&&_t.call(ot)})}(y.callback,Ne,y.anim),Ne.attr(be),ct.splice(m--,1),y.repeat>1&&!y.next){for(I in be)be[D](I)&&(_e[I]=y.totalOrigin[I]);y.el.attr(_e),Un(y.anim,y.el,y.anim.percents[0],null,y.totalOrigin,y.repeat-1)}y.next&&!y.stop&&Un(y.anim,y.el,y.next,null,y.totalOrigin,y.repeat)}}}ct.length&&vr(sr)},or=function(d){return d>255?255:d<0?0:d};function ps(d,m,y,w,I,W){var V=3*m,U=3*(w-m)-V,Y=1-V-U,ie=3*y,be=3*(I-y)-ie,Ne=1-ie-be;function ye(_e){return((Y*_e+U)*_e+V)*_e}return function(_e,Se){var Re=function(Ce,we){var Ke,Fe,Be,ze,_t,ot;for(Be=Ce,ot=0;ot<8;ot++){if(ze=ye(Be)-Ce,it(ze)<we)return Be;if(it(_t=(3*Y*Be+2*U)*Be+V)<1e-6)break;Be-=ze/_t}if(Fe=1,(Be=Ce)<(Ke=0))return Ke;if(Be>Fe)return Fe;for(;Ke<Fe;){if(ze=ye(Be),it(ze-Ce)<we)return Be;Ce>ze?Ke=Be:Fe=Be,Be=(Fe-Ke)/2+Ke}return Be}(_e,Se);return((Ne*Re+be)*Re+ie)*Re}(d,1/(200*W))}function Li(d,m){var y=[],w={};if(this.ms=m,this.times=1,d){for(var I in d)d[D](I)&&(w[B(I)]=d[I],y.push(B(I)));y.sort(J)}this.anim=w,this.top=y[y.length-1],this.percents=y}function Un(d,m,y,w,I,W){y=B(y);var V,U,Y,ie,be,Ne,ye=d.ms,_e={},Se={},Re={};if(w)for(we=0,Ke=ct.length;we<Ke;we++){var Ce=ct[we];if(Ce.el.id==m.id&&Ce.anim==d){Ce.percent!=y?(ct.splice(we,1),Y=1):U=Ce,m.attr(Ce.totalOrigin);break}}else w=+Se;for(var we=0,Ke=d.percents.length;we<Ke;we++){if(d.percents[we]==y||d.percents[we]>w*d.top){y=d.percents[we],be=d.percents[we-1]||0,ye=ye/d.top*(y-be),ie=d.percents[we+1],V=d.anim[y];break}w&&m.attr(d.anim[d.percents[we]])}if(V){if(U)U.initstatus=w,U.start=new Date-U.ms*w;else{for(var Fe in V)if(V[D](Fe)&&(ae[D](Fe)||m.paper.customAttributes[D](Fe)))switch(_e[Fe]=m.attr(Fe),_e[Fe]==null&&(_e[Fe]=fe[Fe]),Se[Fe]=V[Fe],ae[Fe]){case Qe:Re[Fe]=(Se[Fe]-_e[Fe])/ye;break;case"colour":_e[Fe]=h.getRGB(_e[Fe]);var Be=h.getRGB(Se[Fe]);Re[Fe]={r:(Be.r-_e[Fe].r)/ye,g:(Be.g-_e[Fe].g)/ye,b:(Be.b-_e[Fe].b)/ye};break;case"path":var ze=en(_e[Fe],Se[Fe]),_t=ze[1];for(_e[Fe]=ze[0],Re[Fe]=[],we=0,Ke=_e[Fe].length;we<Ke;we++){Re[Fe][we]=[0];for(var ot=1,pt=_e[Fe][we].length;ot<pt;ot++)Re[Fe][we][ot]=(_t[we][ot]-_e[Fe][we][ot])/ye}break;case"transform":var zn=m._,Yn=ui(zn[Fe],Se[Fe]);if(Yn)for(_e[Fe]=Yn.from,Se[Fe]=Yn.to,Re[Fe]=[],Re[Fe].real=!0,we=0,Ke=_e[Fe].length;we<Ke;we++)for(Re[Fe][we]=[_e[Fe][we][0]],ot=1,pt=_e[Fe][we].length;ot<pt;ot++)Re[Fe][we][ot]=(Se[Fe][we][ot]-_e[Fe][we][ot])/ye;else{var Ti=m.matrix||new Di,un={_:{transform:zn.transform},getBBox:function(){return m.getBBox(1)}};_e[Fe]=[Ti.a,Ti.b,Ti.c,Ti.d,Ti.e,Ti.f],gr(un,Se[Fe]),Se[Fe]=un._.transform,Re[Fe]=[(un.matrix.a-Ti.a)/ye,(un.matrix.b-Ti.b)/ye,(un.matrix.c-Ti.c)/ye,(un.matrix.d-Ti.d)/ye,(un.matrix.e-Ti.e)/ye,(un.matrix.f-Ti.f)/ye]}break;case"csv":var Fn=H(V[Fe])[oe](x),dn=H(_e[Fe])[oe](x);if(Fe=="clip-rect")for(_e[Fe]=dn,Re[Fe]=[],we=dn.length;we--;)Re[Fe][we]=(Fn[we]-_e[Fe][we])/ye;Se[Fe]=Fn;break;default:for(Fn=[][ee](V[Fe]),dn=[][ee](_e[Fe]),Re[Fe]=[],we=m.paper.customAttributes[Fe].length;we--;)Re[Fe][we]=((Fn[we]||0)-(dn[we]||0))/ye}var qn=V.easing,qi=h.easing_formulas[qn];if(!qi)if((qi=H(qn).match(k))&&qi.length==5){var En=qi;qi=function(S){return ps(S,+En[1],+En[2],+En[3],+En[4],ye)}}else qi=ue;if(Ce={anim:d,percent:y,timestamp:Ne=V.start||d.start||+new Date,start:Ne+(d.del||0),status:0,initstatus:w||0,stop:!1,ms:ye,easing:qi,from:_e,diff:Re,to:Se,el:m,callback:V.callback,prev:be,next:ie,repeat:W||d.times,origin:m.attr(),totalOrigin:I},ct.push(Ce),w&&!U&&!Y&&(Ce.stop=!0,Ce.start=new Date-ye*w,ct.length==1))return sr();Y&&(Ce.start=new Date-Ce.ms*w),ct.length==1&&vr(sr)}l("raphael.anim.start."+m.id,m,d)}}function Rr(d){for(var m=0;m<ct.length;m++)ct[m].el.paper==d&&ct.splice(m--,1)}Ue.animateWith=function(d,m,y,w,I,W){if(this.removed)return W&&W.call(this),this;var V=y instanceof Li?y:h.animation(y,w,I,W);Un(V,this,V.percents[0],null,this.attr());for(var U=0,Y=ct.length;U<Y;U++)if(ct[U].anim==m&&ct[U].el==d){ct[Y-1].start=ct[U].start;break}return this},Ue.onAnimation=function(d){return d?l.on("raphael.anim.frame."+this.id,d):l.unbind("raphael.anim.frame."+this.id),this},Li.prototype.delay=function(d){var m=new Li(this.anim,this.ms);return m.times=this.times,m.del=+d||0,m},Li.prototype.repeat=function(d){var m=new Li(this.anim,this.ms);return m.del=this.del,m.times=ve.floor(Le(d,0))||1,m},h.animation=function(d,m,y,w){if(d instanceof Li)return d;!h.is(y,"function")&&y||(w=w||y||null,y=null),d=Object(d),m=+m||0;var I,W,V={};for(W in d)d[D](W)&&B(W)!=W&&B(W)+"%"!=W&&(I=!0,V[W]=d[W]);if(I)return y&&(V.easing=y),w&&(V.callback=w),new Li({100:V},m);if(w){var U=0;for(var Y in d){var ie=te(Y);d[D](Y)&&ie>U&&(U=ie)}!d[U+="%"].callback&&(d[U].callback=w)}return new Li(d,m)},Ue.animate=function(d,m,y,w){if(this.removed)return w&&w.call(this),this;var I=d instanceof Li?d:h.animation(d,m,y,w);return Un(I,this,I.percents[0],null,this.attr()),this},Ue.setTime=function(d,m){return d&&m!=null&&this.status(d,We(m,d.ms)/d.ms),this},Ue.status=function(d,m){var y,w,I=[],W=0;if(m!=null)return Un(d,this,-1,We(m,1)),this;for(y=ct.length;W<y;W++)if((w=ct[W]).el.id==this.id&&(!d||w.anim==d)){if(d)return w.status;I.push({anim:w.anim,status:w.status})}return d?0:I},Ue.pause=function(d){for(var m=0;m<ct.length;m++)ct[m].el.id!=this.id||d&&ct[m].anim!=d||l("raphael.anim.pause."+this.id,this,ct[m].anim)!==!1&&(ct[m].paused=!0);return this},Ue.resume=function(d){for(var m=0;m<ct.length;m++)if(ct[m].el.id==this.id&&(!d||ct[m].anim==d)){var y=ct[m];l("raphael.anim.resume."+this.id,this,y.anim)!==!1&&(delete y.paused,this.status(y.anim,y.status))}return this},Ue.stop=function(d){for(var m=0;m<ct.length;m++)ct[m].el.id!=this.id||d&&ct[m].anim!=d||l("raphael.anim.stop."+this.id,this,ct[m].anim)!==!1&&ct.splice(m--,1);return this},l.on("raphael.remove",Rr),l.on("raphael.clear",Rr),Ue.toString=function(){return"Raphaël’s object"};var Gr,Pi,xn,Vn,br=function(d){if(this.items=[],this.length=0,this.type="set",d)for(var m=0,y=d.length;m<y;m++)!d[m]||d[m].constructor!=Ue.constructor&&d[m].constructor!=br||(this[this.items.length]=this.items[this.items.length]=d[m],this.length++)},_i=br.prototype;for(var yi in _i.push=function(){for(var d,m,y=0,w=arguments.length;y<w;y++)!(d=arguments[y])||d.constructor!=Ue.constructor&&d.constructor!=br||(this[m=this.items.length]=this.items[m]=d,this.length++);return this},_i.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},_i.forEach=function(d,m){for(var y=0,w=this.items.length;y<w;y++)if(d.call(m,this.items[y],y)===!1)return this;return this},Ue)Ue[D](yi)&&(_i[yi]=function(d){return function(){var m=arguments;return this.forEach(function(y){y[d][Z](y,m)})}}(yi));return _i.attr=function(d,m){if(d&&h.is(d,st)&&h.is(d[0],"object"))for(var y=0,w=d.length;y<w;y++)this.items[y].attr(d[y]);else for(var I=0,W=this.items.length;I<W;I++)this.items[I].attr(d,m);return this},_i.clear=function(){for(;this.length;)this.pop()},_i.splice=function(d,m,y){d=d<0?Le(this.length+d,0):d,m=Le(0,We(this.length-d,m));var w,I=[],W=[],V=[];for(w=2;w<arguments.length;w++)V.push(arguments[w]);for(w=0;w<m;w++)W.push(this[d+w]);for(;w<this.length-d;w++)I.push(this[d+w]);var U=V.length;for(w=0;w<U+I.length;w++)this.items[d+w]=this[d+w]=w<U?V[w]:I[w-U];for(w=this.items.length=this.length-=m-U;this[w];)delete this[w++];return new br(W)},_i.exclude=function(d){for(var m=0,y=this.length;m<y;m++)if(this[m]==d)return this.splice(m,1),!0},_i.animate=function(d,m,y,w){(h.is(y,"function")||!y)&&(w=y||null);var I,W,V=this.items.length,U=V,Y=this;if(!V)return this;w&&(W=function(){!--V&&w.call(Y)}),y=h.is(y,"string")?y:W;var ie=h.animation(d,m,y,W);for(I=this.items[--U].animate(ie);U--;)this.items[U]&&!this.items[U].removed&&this.items[U].animateWith(I,ie,ie),this.items[U]&&!this.items[U].removed||V--;return this},_i.insertAfter=function(d){for(var m=this.items.length;m--;)this.items[m].insertAfter(d);return this},_i.getBBox=function(){for(var d=[],m=[],y=[],w=[],I=this.items.length;I--;)if(!this.items[I].removed){var W=this.items[I].getBBox();d.push(W.x),m.push(W.y),y.push(W.x+W.width),w.push(W.y+W.height)}return{x:d=We[Z](0,d),y:m=We[Z](0,m),x2:y=Le[Z](0,y),y2:w=Le[Z](0,w),width:y-d,height:w-m}},_i.clone=function(d){d=this.paper.set();for(var m=0,y=this.items.length;m<y;m++)d.push(this.items[m].clone());return d},_i.toString=function(){return"Raphaël‘s set"},_i.glow=function(d){var m=this.paper.set();return this.forEach(function(y,w){var I=y.glow(d);I!=null&&I.forEach(function(W,V){m.push(W)})}),m},_i.isPointInside=function(d,m){var y=!1;return this.forEach(function(w){if(w.isPointInside(d,m))return y=!0,!1}),y},h.registerFont=function(d){if(!d.face)return d;this.fonts=this.fonts||{};var m={w:d.w,face:{},glyphs:{}},y=d.face["font-family"];for(var w in d.face)d.face[D](w)&&(m.face[w]=d.face[w]);if(this.fonts[y]?this.fonts[y].push(m):this.fonts[y]=[m],!d.svg){for(var I in m.face["units-per-em"]=te(d.face["units-per-em"],10),d.glyphs)if(d.glyphs[D](I)){var W=d.glyphs[I];if(m.glyphs[I]={w:W.w,k:{},d:W.d&&"M"+W.d.replace(/[mlcxtrv]/g,function(U){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[U]||"M"})+"z"},W.k)for(var V in W.k)W[D](V)&&(m.glyphs[I].k[V]=W.k[V])}}return d},_.getFont=function(d,m,y,w){if(w=w||"normal",y=y||"normal",m=+m||{normal:400,bold:700,lighter:300,bolder:800}[m]||400,h.fonts){var I,W=h.fonts[d];if(!W){var V=new RegExp("(^|\\s)"+d.replace(/[^\w\d\s+!~.:_-]/g,pe)+"(\\s|$)","i");for(var U in h.fonts)if(h.fonts[D](U)&&V.test(U)){W=h.fonts[U];break}}if(W)for(var Y=0,ie=W.length;Y<ie&&((I=W[Y]).face["font-weight"]!=m||I.face["font-style"]!=y&&I.face["font-style"]||I.face["font-stretch"]!=w);Y++);return I}},_.print=function(d,m,y,w,I,W,V,U){W=W||"middle",V=Le(We(V||0,1),-1),U=Le(We(U||1,3),1);var Y,ie=H(y)[oe](pe),be=0,Ne=0,ye=pe;if(h.is(w,"string")&&(w=this.getFont(w)),w){Y=(I||16)/w.face["units-per-em"];for(var _e=w.face.bbox[oe](x),Se=+_e[0],Re=_e[3]-_e[1],Ce=0,we=+_e[1]+(W=="baseline"?Re+ +w.face.descent:Re/2),Ke=0,Fe=ie.length;Ke<Fe;Ke++){if(ie[Ke]==`
`)be=0,ze=0,Ne=0,Ce+=Re*U;else{var Be=Ne&&w.glyphs[ie[Ke-1]]||{},ze=w.glyphs[ie[Ke]];be+=Ne?(Be.w||w.w)+(Be.k&&Be.k[ie[Ke]]||0)+w.w*V:0,Ne=1}ze&&ze.d&&(ye+=h.transformPath(ze.d,["t",be*Y,Ce*Y,"s",Y,Y,Se,we,"t",(d-Se)/Y,(m-we)/Y]))}}return this.path(ye).attr({fill:"#000",stroke:"none"})},_.add=function(d){if(h.is(d,"array"))for(var m,y=this.set(),w=0,I=d.length;w<I;w++)m=d[w]||{},T[D](m.type)&&y.push(this[m.type]().attr(m));return y},h.format=function(d,m){var y=h.is(m,st)?[0][ee](m):arguments;return d&&h.is(d,"string")&&y.length-1&&(d=d.replace(M,function(w,I){return y[++I]==null?pe:y[I]})),d||pe},h.fullfill=(Gr=/\{([^\}]+)\}/g,Pi=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(d,m){return String(d).replace(Gr,function(y,w){return function(I,W,V){var U=V;return W.replace(Pi,function(Y,ie,be,Ne,ye){ie=ie||Ne,U&&(ie in U&&(U=U[ie]),typeof U=="function"&&ye&&(U=U()))}),U=(U==null||U==V?I:U)+""}(y,w,m)})}),h.ninja=function(){if(Q.was)F.win.Raphael=Q.is;else{window.Raphael=void 0;try{delete window.Raphael}catch{}}return h},h.st=_i,l.on("raphael.DOMload",function(){g=!0}),(xn=document).readyState==null&&xn.addEventListener&&(xn.addEventListener("DOMContentLoaded",Vn=function(){xn.removeEventListener("DOMContentLoaded",Vn,!1),xn.readyState="complete"},!1),xn.readyState="loading"),function d(){/in/.test(xn.readyState)?setTimeout(d,9):h.eve("raphael.DOMload")}(),h}).apply(n,o))===void 0||(i.exports=a)},function(i,n,r){var o,a;o=[r(0),r(3),r(4)],(a=(function(l){return l}).apply(n,o))===void 0||(i.exports=a)},function(i,n,r){var o,a,l,h,g,_,x,T,M,D,F,Q,K,Z;h="hasOwnProperty",g=/[\.\/]/,_=/\s*,\s*/,x=function(ee,he){return ee-he},T={n:{}},M=function(){for(var ee=0,he=this.length;ee<he;ee++)if(this[ee]!==void 0)return this[ee]},D=function(){for(var ee=this.length;--ee;)if(this[ee]!==void 0)return this[ee]},F=Object.prototype.toString,Q=String,K=Array.isArray||function(ee){return ee instanceof Array||F.call(ee)=="[object Array]"},(Z=function(ee,he){var pe,p=l,H=Array.prototype.slice.call(arguments,2),oe=Z.listeners(ee),me=0,Te=[],Ae={},ve=[],Le=a;ve.firstDefined=M,ve.lastDefined=D,a=ee,l=0;for(var We=0,it=oe.length;We<it;We++)"zIndex"in oe[We]&&(Te.push(oe[We].zIndex),oe[We].zIndex<0&&(Ae[oe[We].zIndex]=oe[We]));for(Te.sort(x);Te[me]<0;)if(pe=Ae[Te[me++]],ve.push(pe.apply(he,H)),l)return l=p,ve;for(We=0;We<it;We++)if("zIndex"in(pe=oe[We]))if(pe.zIndex==Te[me]){if(ve.push(pe.apply(he,H)),l)break;do if((pe=Ae[Te[++me]])&&ve.push(pe.apply(he,H)),l)break;while(pe)}else Ae[pe.zIndex]=pe;else if(ve.push(pe.apply(he,H)),l)break;return l=p,a=Le,ve})._events=T,Z.listeners=function(ee){var he,pe,p,H,oe,me,Te,Ae,ve=K(ee)?ee:ee.split(g),Le=T,We=[Le],it=[];for(H=0,oe=ve.length;H<oe;H++){for(Ae=[],me=0,Te=We.length;me<Te;me++)for(pe=[(Le=We[me].n)[ve[H]],Le["*"]],p=2;p--;)(he=pe[p])&&(Ae.push(he),it=it.concat(he.f||[]));We=Ae}return it},Z.separator=function(ee){ee?(ee="["+(ee=Q(ee).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",g=new RegExp(ee)):g=/[\.\/]/},Z.on=function(ee,he){if(typeof he!="function")return function(){};for(var pe=K(ee)?K(ee[0])?ee:[ee]:Q(ee).split(_),p=0,H=pe.length;p<H;p++)(function(oe){for(var me,Te=K(oe)?oe:Q(oe).split(g),Ae=T,ve=0,Le=Te.length;ve<Le;ve++)Ae=(Ae=Ae.n).hasOwnProperty(Te[ve])&&Ae[Te[ve]]||(Ae[Te[ve]]={n:{}});for(Ae.f=Ae.f||[],ve=0,Le=Ae.f.length;ve<Le;ve++)if(Ae.f[ve]==he){me=!0;break}!me&&Ae.f.push(he)})(pe[p]);return function(oe){+oe==+oe&&(he.zIndex=+oe)}},Z.f=function(ee){var he=[].slice.call(arguments,1);return function(){Z.apply(null,[ee,null].concat(he).concat([].slice.call(arguments,0)))}},Z.stop=function(){l=1},Z.nt=function(ee){var he=K(a)?a.join("."):a;return ee?new RegExp("(?:\\.|\\/|^)"+ee+"(?:\\.|\\/|$)").test(he):he},Z.nts=function(){return K(a)?a:a.split(g)},Z.off=Z.unbind=function(ee,he){if(ee){var pe=K(ee)?K(ee[0])?ee:[ee]:Q(ee).split(_);if(pe.length>1)for(var p=0,H=pe.length;p<H;p++)Z.off(pe[p],he);else{pe=K(ee)?ee:Q(ee).split(g);var oe,me,Te,Ae,ve,Le=[T];for(p=0,H=pe.length;p<H;p++)for(Ae=0;Ae<Le.length;Ae+=Te.length-2){if(Te=[Ae,1],oe=Le[Ae].n,pe[p]!="*")oe[pe[p]]&&Te.push(oe[pe[p]]);else for(me in oe)oe[h](me)&&Te.push(oe[me]);Le.splice.apply(Le,Te)}for(p=0,H=Le.length;p<H;p++)for(oe=Le[p];oe.n;){if(he){if(oe.f){for(Ae=0,ve=oe.f.length;Ae<ve;Ae++)if(oe.f[Ae]==he){oe.f.splice(Ae,1);break}!oe.f.length&&delete oe.f}for(me in oe.n)if(oe.n[h](me)&&oe.n[me].f){var We=oe.n[me].f;for(Ae=0,ve=We.length;Ae<ve;Ae++)if(We[Ae]==he){We.splice(Ae,1);break}!We.length&&delete oe.n[me].f}}else for(me in delete oe.f,oe.n)oe.n[h](me)&&oe.n[me].f&&delete oe.n[me].f;oe=oe.n}}}else Z._events=T={n:{}}},Z.once=function(ee,he){var pe=function(){return Z.off(ee,pe),he.apply(this,arguments)};return Z.on(ee,pe)},Z.version="0.5.0",Z.toString=function(){return"You are running Eve 0.5.0"},i.exports?i.exports=Z:(o=(function(){return Z}).apply(n,[]))===void 0||(i.exports=o)},function(i,n,r){var o,a;o=[r(0)],(a=(function(l){if(!l||l.svg){var h="hasOwnProperty",g=String,_=parseFloat,x=parseInt,T=Math,M=T.max,D=T.abs,F=T.pow,Q=/[, ]+/,K=l.eve,Z="",ee=" ",he="http://www.w3.org/1999/xlink",pe={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},p={};l.toString=function(){return`Your browser supports SVG.
You are running Raphaël `+this.version};var H=function(N,O){if(O)for(var k in typeof N=="string"&&(N=H(N)),O)O[h](k)&&(k.substring(0,6)=="xlink:"?N.setAttributeNS(he,k.substring(6),g(O[k])):N.setAttribute(k,g(O[k])));else(N=l._g.doc.createElementNS("http://www.w3.org/2000/svg",N)).style&&(N.style.webkitTapHighlightColor="rgba(0,0,0,0)");return N},oe=function(N,O){var k="linear",$=N.id+O,B=.5,te=.5,X=N.node,fe=N.paper,ae=X.style,Ee=l._g.doc.getElementById($);if(!Ee){if(O=(O=g(O).replace(l._radial_gradient,function(J,ue,ce){if(k="radial",ue&&ce){B=_(ue);var Oe=2*((te=_(ce))>.5)-1;F(B-.5,2)+F(te-.5,2)>.25&&(te=T.sqrt(.25-F(B-.5,2))*Oe+.5)&&te!=.5&&(te=te.toFixed(5)-1e-5*Oe)}return Z})).split(/\s*\-\s*/),k=="linear"){var He=O.shift();if(He=-_(He),isNaN(He))return null;var Ge=[0,0,T.cos(l.rad(He)),T.sin(l.rad(He))],nt=1/(M(D(Ge[2]),D(Ge[3]))||1);Ge[2]*=nt,Ge[3]*=nt,Ge[2]<0&&(Ge[0]=-Ge[2],Ge[2]=0),Ge[3]<0&&(Ge[1]=-Ge[3],Ge[3]=0)}var E=l._parseDots(O);if(!E)return null;if($=$.replace(/[\(\)\s,\xb0#]/g,"_"),N.gradient&&$!=N.gradient.id&&(fe.defs.removeChild(N.gradient),delete N.gradient),!N.gradient){Ee=H(k+"Gradient",{id:$}),N.gradient=Ee,H(Ee,k=="radial"?{fx:B,fy:te}:{x1:Ge[0],y1:Ge[1],x2:Ge[2],y2:Ge[3],gradientTransform:N.matrix.invert()}),fe.defs.appendChild(Ee);for(var R=0,L=E.length;R<L;R++)Ee.appendChild(H("stop",{offset:E[R].offset?E[R].offset:R?"100%":"0%","stop-color":E[R].color||"#fff","stop-opacity":isFinite(E[R].opacity)?E[R].opacity:1}))}}return H(X,{fill:me($),opacity:1,"fill-opacity":1}),ae.fill=Z,ae.opacity=1,ae.fillOpacity=1,1},me=function(N){if((O=document.documentMode)&&(O===9||O===10))return"url('#"+N+"')";var O,k=document.location;return"url('"+(k.protocol+"//"+k.host+k.pathname+k.search)+"#"+N+"')"},Te=function(N){var O=N.getBBox(1);H(N.pattern,{patternTransform:N.matrix.invert()+" translate("+O.x+","+O.y+")"})},Ae=function(N,O,k){if(N.type=="path"){for(var $,B,te,X,fe,ae=g(O).toLowerCase().split("-"),Ee=N.paper,He=k?"end":"start",Ge=N.node,nt=N.attrs,E=nt["stroke-width"],R=ae.length,L="classic",J=3,ue=3,ce=5;R--;)switch(ae[R]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":L=ae[R];break;case"wide":ue=5;break;case"narrow":ue=2;break;case"long":J=5;break;case"short":J=2}if(L=="open"?(J+=2,ue+=2,ce+=2,te=1,X=k?4:1,fe={fill:"none",stroke:nt.stroke}):(X=te=J/2,fe={fill:nt.stroke,stroke:"none"}),N._.arrows?k?(N._.arrows.endPath&&p[N._.arrows.endPath]--,N._.arrows.endMarker&&p[N._.arrows.endMarker]--):(N._.arrows.startPath&&p[N._.arrows.startPath]--,N._.arrows.startMarker&&p[N._.arrows.startMarker]--):N._.arrows={},L!="none"){var Oe="raphael-marker-"+L,et="raphael-marker-"+He+L+J+ue+"-obj"+N.id;l._g.doc.getElementById(Oe)?p[Oe]++:(Ee.defs.appendChild(H(H("path"),{"stroke-linecap":"round",d:pe[L],id:Oe})),p[Oe]=1);var Ze,lt=l._g.doc.getElementById(et);lt?(p[et]++,Ze=lt.getElementsByTagName("use")[0]):(lt=H(H("marker"),{id:et,markerHeight:ue,markerWidth:J,orient:"auto",refX:X,refY:ue/2}),Ze=H(H("use"),{"xlink:href":"#"+Oe,transform:(k?"rotate(180 "+J/2+" "+ue/2+") ":Z)+"scale("+J/ce+","+ue/ce+")","stroke-width":(1/((J/ce+ue/ce)/2)).toFixed(4)}),lt.appendChild(Ze),Ee.defs.appendChild(lt),p[et]=1),H(Ze,fe);var xt=te*(L!="diamond"&&L!="oval");k?($=N._.arrows.startdx*E||0,B=l.getTotalLength(nt.path)-xt*E):($=xt*E,B=l.getTotalLength(nt.path)-(N._.arrows.enddx*E||0)),(fe={})["marker-"+He]="url(#"+et+")",(B||$)&&(fe.d=l.getSubpath(nt.path,$,B)),H(Ge,fe),N._.arrows[He+"Path"]=Oe,N._.arrows[He+"Marker"]=et,N._.arrows[He+"dx"]=xt,N._.arrows[He+"Type"]=L,N._.arrows[He+"String"]=O}else k?($=N._.arrows.startdx*E||0,B=l.getTotalLength(nt.path)-$):($=0,B=l.getTotalLength(nt.path)-(N._.arrows.enddx*E||0)),N._.arrows[He+"Path"]&&H(Ge,{d:l.getSubpath(nt.path,$,B)}),delete N._.arrows[He+"Path"],delete N._.arrows[He+"Marker"],delete N._.arrows[He+"dx"],delete N._.arrows[He+"Type"],delete N._.arrows[He+"String"];for(fe in p)if(p[h](fe)&&!p[fe]){var ht=l._g.doc.getElementById(fe);ht&&ht.parentNode.removeChild(ht)}}},ve={"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},Le=function(N,O,k){if(O=ve[g(O).toLowerCase()]){for(var $=N.attrs["stroke-width"]||"1",B={round:$,square:$,butt:0}[N.attrs["stroke-linecap"]||k["stroke-linecap"]]||0,te=[],X=O.length;X--;)te[X]=O[X]*$+(X%2?1:-1)*B;H(N.node,{"stroke-dasharray":te.join(",")})}else H(N.node,{"stroke-dasharray":"none"})},We=function(N,O){var k=N.node,$=N.attrs,B=k.style.visibility;for(var te in k.style.visibility="hidden",O)if(O[h](te)){if(!l._availableAttrs[h](te))continue;var X=O[te];switch($[te]=X,te){case"blur":N.blur(X);break;case"title":var fe=k.getElementsByTagName("title");if(fe.length&&(fe=fe[0]))fe.firstChild.nodeValue=X;else{fe=H("title");var ae=l._g.doc.createTextNode(X);fe.appendChild(ae),k.appendChild(fe)}break;case"href":case"target":var Ee=k.parentNode;if(Ee.tagName.toLowerCase()!="a"){var He=H("a");Ee.insertBefore(He,k),He.appendChild(k),Ee=He}te=="target"?Ee.setAttributeNS(he,"show",X=="blank"?"new":X):Ee.setAttributeNS(he,te,X);break;case"cursor":k.style.cursor=X;break;case"transform":N.transform(X);break;case"arrow-start":Ae(N,X);break;case"arrow-end":Ae(N,X,1);break;case"clip-rect":var Ge=g(X).split(Q);if(Ge.length==4){N.clip&&N.clip.parentNode.parentNode.removeChild(N.clip.parentNode);var nt=H("clipPath"),E=H("rect");nt.id=l.createUUID(),H(E,{x:Ge[0],y:Ge[1],width:Ge[2],height:Ge[3]}),nt.appendChild(E),N.paper.defs.appendChild(nt),H(k,{"clip-path":"url(#"+nt.id+")"}),N.clip=E}if(!X){var R=k.getAttribute("clip-path");if(R){var L=l._g.doc.getElementById(R.replace(/(^url\(#|\)$)/g,Z));L&&L.parentNode.removeChild(L),H(k,{"clip-path":Z}),delete N.clip}}break;case"path":N.type=="path"&&(H(k,{d:X?$.path=l._pathToAbsolute(X):"M0,0"}),N._.dirty=1,N._.arrows&&("startString"in N._.arrows&&Ae(N,N._.arrows.startString),"endString"in N._.arrows&&Ae(N,N._.arrows.endString,1)));break;case"width":if(k.setAttribute(te,X),N._.dirty=1,!$.fx)break;te="x",X=$.x;case"x":$.fx&&(X=-$.x-($.width||0));case"rx":if(te=="rx"&&N.type=="rect")break;case"cx":k.setAttribute(te,X),N.pattern&&Te(N),N._.dirty=1;break;case"height":if(k.setAttribute(te,X),N._.dirty=1,!$.fy)break;te="y",X=$.y;case"y":$.fy&&(X=-$.y-($.height||0));case"ry":if(te=="ry"&&N.type=="rect")break;case"cy":k.setAttribute(te,X),N.pattern&&Te(N),N._.dirty=1;break;case"r":N.type=="rect"?H(k,{rx:X,ry:X}):k.setAttribute(te,X),N._.dirty=1;break;case"src":N.type=="image"&&k.setAttributeNS(he,"href",X);break;case"stroke-width":N._.sx==1&&N._.sy==1||(X/=M(D(N._.sx),D(N._.sy))||1),k.setAttribute(te,X),$["stroke-dasharray"]&&Le(N,$["stroke-dasharray"],O),N._.arrows&&("startString"in N._.arrows&&Ae(N,N._.arrows.startString),"endString"in N._.arrows&&Ae(N,N._.arrows.endString,1));break;case"stroke-dasharray":Le(N,X,O);break;case"fill":var J=g(X).match(l._ISURL);if(J){nt=H("pattern");var ue=H("image");nt.id=l.createUUID(),H(nt,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),H(ue,{x:0,y:0,"xlink:href":J[1]}),nt.appendChild(ue),function(lt){l._preload(J[1],function(){var xt=this.offsetWidth,ht=this.offsetHeight;H(lt,{width:xt,height:ht}),H(ue,{width:xt,height:ht})})}(nt),N.paper.defs.appendChild(nt),H(k,{fill:"url(#"+nt.id+")"}),N.pattern=nt,N.pattern&&Te(N);break}var ce=l.getRGB(X);if(ce.error){if((N.type=="circle"||N.type=="ellipse"||g(X).charAt()!="r")&&oe(N,X)){if("opacity"in $||"fill-opacity"in $){var Oe=l._g.doc.getElementById(k.getAttribute("fill").replace(/^url\(#|\)$/g,Z));if(Oe){var et=Oe.getElementsByTagName("stop");H(et[et.length-1],{"stop-opacity":("opacity"in $?$.opacity:1)*("fill-opacity"in $?$["fill-opacity"]:1)})}}$.gradient=X,$.fill="none";break}}else delete O.gradient,delete $.gradient,!l.is($.opacity,"undefined")&&l.is(O.opacity,"undefined")&&H(k,{opacity:$.opacity}),!l.is($["fill-opacity"],"undefined")&&l.is(O["fill-opacity"],"undefined")&&H(k,{"fill-opacity":$["fill-opacity"]});ce[h]("opacity")&&H(k,{"fill-opacity":ce.opacity>1?ce.opacity/100:ce.opacity});case"stroke":ce=l.getRGB(X),k.setAttribute(te,ce.hex),te=="stroke"&&ce[h]("opacity")&&H(k,{"stroke-opacity":ce.opacity>1?ce.opacity/100:ce.opacity}),te=="stroke"&&N._.arrows&&("startString"in N._.arrows&&Ae(N,N._.arrows.startString),"endString"in N._.arrows&&Ae(N,N._.arrows.endString,1));break;case"gradient":(N.type=="circle"||N.type=="ellipse"||g(X).charAt()!="r")&&oe(N,X);break;case"opacity":$.gradient&&!$[h]("stroke-opacity")&&H(k,{"stroke-opacity":X>1?X/100:X});case"fill-opacity":if($.gradient){(Oe=l._g.doc.getElementById(k.getAttribute("fill").replace(/^url\(#|\)$/g,Z)))&&(et=Oe.getElementsByTagName("stop"),H(et[et.length-1],{"stop-opacity":X}));break}default:te=="font-size"&&(X=x(X,10)+"px");var Ze=te.replace(/(\-.)/g,function(lt){return lt.substring(1).toUpperCase()});k.style[Ze]=X,N._.dirty=1,k.setAttribute(te,X)}}it(N,O),k.style.visibility=B},it=function(N,O){if(N.type=="text"&&(O[h]("text")||O[h]("font")||O[h]("font-size")||O[h]("x")||O[h]("y"))){var k=N.attrs,$=N.node,B=$.firstChild?x(l._g.doc.defaultView.getComputedStyle($.firstChild,Z).getPropertyValue("font-size"),10):10;if(O[h]("text")){for(k.text=O.text;$.firstChild;)$.removeChild($.firstChild);for(var te,X=g(O.text).split(`
`),fe=[],ae=0,Ee=X.length;ae<Ee;ae++)te=H("tspan"),ae&&H(te,{dy:1.2*B,x:k.x}),te.appendChild(l._g.doc.createTextNode(X[ae])),$.appendChild(te),fe[ae]=te}else for(ae=0,Ee=(fe=$.getElementsByTagName("tspan")).length;ae<Ee;ae++)ae?H(fe[ae],{dy:1.2*B,x:k.x}):H(fe[0],{dy:0});H($,{x:k.x,y:k.y}),N._.dirty=1;var He=N._getBBox(),Ge=k.y-(He.y+He.height/2);Ge&&l.is(Ge,"finite")&&H(fe[0],{dy:Ge})}},Ye=function(N){return N.parentNode&&N.parentNode.tagName.toLowerCase()==="a"?N.parentNode:N},tt=function(N,O){this[0]=this.node=N,N.raphael=!0,this.id=("0000"+(Math.random()*Math.pow(36,5)<<0).toString(36)).slice(-5),N.raphaelid=this.id,this.matrix=l.matrix(),this.realPath=null,this.paper=O,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!O.bottom&&(O.bottom=this),this.prev=O.top,O.top&&(O.top.next=this),O.top=this,this.next=null},Qe=l.el;tt.prototype=Qe,Qe.constructor=tt,l._engine.path=function(N,O){var k=H("path");O.canvas&&O.canvas.appendChild(k);var $=new tt(k,O);return $.type="path",We($,{fill:"none",stroke:"#000",path:N}),$},Qe.rotate=function(N,O,k){if(this.removed)return this;if((N=g(N).split(Q)).length-1&&(O=_(N[1]),k=_(N[2])),N=_(N[0]),k==null&&(O=k),O==null||k==null){var $=this.getBBox(1);O=$.x+$.width/2,k=$.y+$.height/2}return this.transform(this._.transform.concat([["r",N,O,k]])),this},Qe.scale=function(N,O,k,$){if(this.removed)return this;if((N=g(N).split(Q)).length-1&&(O=_(N[1]),k=_(N[2]),$=_(N[3])),N=_(N[0]),O==null&&(O=N),$==null&&(k=$),k==null||$==null)var B=this.getBBox(1);return k=k??B.x+B.width/2,$=$??B.y+B.height/2,this.transform(this._.transform.concat([["s",N,O,k,$]])),this},Qe.translate=function(N,O){return this.removed?this:((N=g(N).split(Q)).length-1&&(O=_(N[1])),N=_(N[0])||0,O=+O||0,this.transform(this._.transform.concat([["t",N,O]])),this)},Qe.transform=function(N){var O=this._;if(N==null)return O.transform;if(l._extractTransform(this,N),this.clip&&H(this.clip,{transform:this.matrix.invert()}),this.pattern&&Te(this),this.node&&H(this.node,{transform:this.matrix}),O.sx!=1||O.sy!=1){var k=this.attrs[h]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":k})}return this},Qe.hide=function(){return this.removed||(this.node.style.display="none"),this},Qe.show=function(){return this.removed||(this.node.style.display=""),this},Qe.remove=function(){var N=Ye(this.node);if(!this.removed&&N.parentNode){var O=this.paper;for(var k in O.__set__&&O.__set__.exclude(this),K.unbind("raphael.*.*."+this.id),this.gradient&&O.defs.removeChild(this.gradient),l._tear(this,O),N.parentNode.removeChild(N),this.removeData(),this)this[k]=typeof this[k]=="function"?l._removedFactory(k):null;this.removed=!0}},Qe._getBBox=function(){if(this.node.style.display=="none"){this.show();var N=!0}var O,k=!1;this.paper.canvas.parentElement?O=this.paper.canvas.parentElement.style:this.paper.canvas.parentNode&&(O=this.paper.canvas.parentNode.style),O&&O.display=="none"&&(k=!0,O.display="");var $={};try{$=this.node.getBBox()}catch{$={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}finally{$=$||{},k&&(O.display="none")}return N&&this.hide(),$},Qe.attr=function(N,O){if(this.removed)return this;if(N==null){var k={};for(var $ in this.attrs)this.attrs[h]($)&&(k[$]=this.attrs[$]);return k.gradient&&k.fill=="none"&&(k.fill=k.gradient)&&delete k.gradient,k.transform=this._.transform,k}if(O==null&&l.is(N,"string")){if(N=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;if(N=="transform")return this._.transform;for(var B=N.split(Q),te={},X=0,fe=B.length;X<fe;X++)(N=B[X])in this.attrs?te[N]=this.attrs[N]:l.is(this.paper.customAttributes[N],"function")?te[N]=this.paper.customAttributes[N].def:te[N]=l._availableAttrs[N];return fe-1?te:te[B[0]]}if(O==null&&l.is(N,"array")){for(te={},X=0,fe=N.length;X<fe;X++)te[N[X]]=this.attr(N[X]);return te}if(O!=null){var ae={};ae[N]=O}else N!=null&&l.is(N,"object")&&(ae=N);for(var Ee in ae)K("raphael.attr."+Ee+"."+this.id,this,ae[Ee]);for(Ee in this.paper.customAttributes)if(this.paper.customAttributes[h](Ee)&&ae[h](Ee)&&l.is(this.paper.customAttributes[Ee],"function")){var He=this.paper.customAttributes[Ee].apply(this,[].concat(ae[Ee]));for(var Ge in this.attrs[Ee]=ae[Ee],He)He[h](Ge)&&(ae[Ge]=He[Ge])}return We(this,ae),this},Qe.toFront=function(){if(this.removed)return this;var N=Ye(this.node);N.parentNode.appendChild(N);var O=this.paper;return O.top!=this&&l._tofront(this,O),this},Qe.toBack=function(){if(this.removed)return this;var N=Ye(this.node),O=N.parentNode;return O.insertBefore(N,O.firstChild),l._toback(this,this.paper),this.paper,this},Qe.insertAfter=function(N){if(this.removed||!N)return this;var O=Ye(this.node),k=Ye(N.node||N[N.length-1].node);return k.nextSibling?k.parentNode.insertBefore(O,k.nextSibling):k.parentNode.appendChild(O),l._insertafter(this,N,this.paper),this},Qe.insertBefore=function(N){if(this.removed||!N)return this;var O=Ye(this.node),k=Ye(N.node||N[0].node);return k.parentNode.insertBefore(O,k),l._insertbefore(this,N,this.paper),this},Qe.blur=function(N){var O=this;if(+N!=0){var k=H("filter"),$=H("feGaussianBlur");O.attrs.blur=N,k.id=l.createUUID(),H($,{stdDeviation:+N||1.5}),k.appendChild($),O.paper.defs.appendChild(k),O._blur=k,H(O.node,{filter:"url(#"+k.id+")"})}else O._blur&&(O._blur.parentNode.removeChild(O._blur),delete O._blur,delete O.attrs.blur),O.node.removeAttribute("filter");return O},l._engine.circle=function(N,O,k,$){var B=H("circle");N.canvas&&N.canvas.appendChild(B);var te=new tt(B,N);return te.attrs={cx:O,cy:k,r:$,fill:"none",stroke:"#000"},te.type="circle",H(B,te.attrs),te},l._engine.rect=function(N,O,k,$,B,te){var X=H("rect");N.canvas&&N.canvas.appendChild(X);var fe=new tt(X,N);return fe.attrs={x:O,y:k,width:$,height:B,rx:te||0,ry:te||0,fill:"none",stroke:"#000"},fe.type="rect",H(X,fe.attrs),fe},l._engine.ellipse=function(N,O,k,$,B){var te=H("ellipse");N.canvas&&N.canvas.appendChild(te);var X=new tt(te,N);return X.attrs={cx:O,cy:k,rx:$,ry:B,fill:"none",stroke:"#000"},X.type="ellipse",H(te,X.attrs),X},l._engine.image=function(N,O,k,$,B,te){var X=H("image");H(X,{x:k,y:$,width:B,height:te,preserveAspectRatio:"none"}),X.setAttributeNS(he,"href",O),N.canvas&&N.canvas.appendChild(X);var fe=new tt(X,N);return fe.attrs={x:k,y:$,width:B,height:te,src:O},fe.type="image",fe},l._engine.text=function(N,O,k,$){var B=H("text");N.canvas&&N.canvas.appendChild(B);var te=new tt(B,N);return te.attrs={x:O,y:k,"text-anchor":"middle",text:$,"font-family":l._availableAttrs["font-family"],"font-size":l._availableAttrs["font-size"],stroke:"none",fill:"#000"},te.type="text",We(te,te.attrs),te},l._engine.setSize=function(N,O){return this.width=N||this.width,this.height=O||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},l._engine.create=function(){var N=l._getContainer.apply(0,arguments),O=N&&N.container;if(!O)throw new Error("SVG container not found.");var k,$=N.x,B=N.y,te=N.width,X=N.height,fe=H("svg"),ae="overflow:hidden;";return $=$||0,B=B||0,H(fe,{height:X=X||342,version:1.1,width:te=te||512,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),O==1?(fe.style.cssText=ae+"position:absolute;left:"+$+"px;top:"+B+"px",l._g.doc.body.appendChild(fe),k=1):(fe.style.cssText=ae+"position:relative",O.firstChild?O.insertBefore(fe,O.firstChild):O.appendChild(fe)),(O=new l._Paper).width=te,O.height=X,O.canvas=fe,O.clear(),O._left=O._top=0,k&&(O.renderfix=function(){}),O.renderfix(),O},l._engine.setViewBox=function(N,O,k,$,B){K("raphael.setViewBox",this,this._viewBox,[N,O,k,$,B]);var te,X,fe=this.getSize(),ae=M(k/fe.width,$/fe.height),Ee=this.top,He=B?"xMidYMid meet":"xMinYMin";for(N==null?(this._vbSize&&(ae=1),delete this._vbSize,te="0 0 "+this.width+ee+this.height):(this._vbSize=ae,te=N+ee+O+ee+k+ee+$),H(this.canvas,{viewBox:te,preserveAspectRatio:He});ae&&Ee;)X="stroke-width"in Ee.attrs?Ee.attrs["stroke-width"]:1,Ee.attr({"stroke-width":X}),Ee._.dirty=1,Ee._.dirtyT=1,Ee=Ee.prev;return this._viewBox=[N,O,k,$,!!B],this},l.prototype.renderfix=function(){var N,O=this.canvas,k=O.style;try{N=O.getScreenCTM()||O.createSVGMatrix()}catch{N=O.createSVGMatrix()}var $=-N.e%1,B=-N.f%1;($||B)&&($&&(this._left=(this._left+$)%1,k.left=this._left+"px"),B&&(this._top=(this._top+B)%1,k.top=this._top+"px"))},l.prototype.clear=function(){l.eve("raphael.clear",this);for(var N=this.canvas;N.firstChild;)N.removeChild(N.firstChild);this.bottom=this.top=null,(this.desc=H("desc")).appendChild(l._g.doc.createTextNode("Created with Raphaël "+l.version)),N.appendChild(this.desc),N.appendChild(this.defs=H("defs"))},l.prototype.remove=function(){for(var N in K("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[N]=typeof this[N]=="function"?l._removedFactory(N):null};var st=l.st;for(var Tt in Qe)Qe[h](Tt)&&!st[h](Tt)&&(st[Tt]=function(N){return function(){var O=arguments;return this.forEach(function(k){k[N].apply(k,O)})}}(Tt))}}).apply(n,o))===void 0||(i.exports=a)},function(i,n,r){var o,a;o=[r(0)],(a=(function(l){if(!l||l.vml){var h="hasOwnProperty",g=String,_=parseFloat,x=Math,T=x.round,M=x.max,D=x.min,F=x.abs,Q=/[, ]+/,K=l.eve,Z=" ",ee="",he={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},pe=/([clmz]),?([^clmz]*)/gi,p=/ progid:\S+Blur\([^\)]+\)/g,H=/-?[^,\s-]+/g,oe="position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)",me=21600,Te={path:1,rect:1,image:1},Ae={circle:1,ellipse:1},ve=function(O,k,$){var B=l.matrix();return B.rotate(-O,.5,.5),{dx:B.x(k,$),dy:B.y(k,$)}},Le=function(O,k,$,B,te,X){var fe=O._,ae=O.matrix,Ee=fe.fillpos,He=O.node,Ge=He.style,nt=1,E="",R=me/k,L=me/$;if(Ge.visibility="hidden",k&&$){if(He.coordsize=F(R)+Z+F(L),Ge.rotation=X*(k*$<0?-1:1),X){var J=ve(X,B,te);B=J.dx,te=J.dy}if(k<0&&(E+="x"),$<0&&(E+=" y")&&(nt=-1),Ge.flip=E,He.coordorigin=B*-R+Z+te*-L,Ee||fe.fillsize){var ue=He.getElementsByTagName("fill");ue=ue&&ue[0],He.removeChild(ue),Ee&&(J=ve(X,ae.x(Ee[0],Ee[1]),ae.y(Ee[0],Ee[1])),ue.position=J.dx*nt+Z+J.dy*nt),fe.fillsize&&(ue.size=fe.fillsize[0]*F(k)+Z+fe.fillsize[1]*F($)),He.appendChild(ue)}Ge.visibility="visible"}};l.toString=function(){return`Your browser doesn’t support SVG. Falling down to VML.
You are running Raphaël `+this.version};var We,it=function(O,k,$){for(var B=g(k).toLowerCase().split("-"),te=$?"end":"start",X=B.length,fe="classic",ae="medium",Ee="medium";X--;)switch(B[X]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":fe=B[X];break;case"wide":case"narrow":Ee=B[X];break;case"long":case"short":ae=B[X]}var He=O.node.getElementsByTagName("stroke")[0];He[te+"arrow"]=fe,He[te+"arrowlength"]=ae,He[te+"arrowwidth"]=Ee},Ye=function(O,k){O.attrs=O.attrs||{};var $=O.node,B=O.attrs,te=$.style,X=Te[O.type]&&(k.x!=B.x||k.y!=B.y||k.width!=B.width||k.height!=B.height||k.cx!=B.cx||k.cy!=B.cy||k.rx!=B.rx||k.ry!=B.ry||k.r!=B.r),fe=Ae[O.type]&&(B.cx!=k.cx||B.cy!=k.cy||B.r!=k.r||B.rx!=k.rx||B.ry!=k.ry),ae=O;for(var Ee in k)k[h](Ee)&&(B[Ee]=k[Ee]);if(X&&(B.path=l._getPath[O.type](O),O._.dirty=1),k.href&&($.href=k.href),k.title&&($.title=k.title),k.target&&($.target=k.target),k.cursor&&(te.cursor=k.cursor),"blur"in k&&O.blur(k.blur),(k.path&&O.type=="path"||X)&&($.path=function(Gt){var xi=/[ahqstv]/gi,Wt=l._pathToAbsolute;if(g(Gt).match(xi)&&(Wt=l._path2curve),xi=/[clmz]/g,Wt==l._pathToAbsolute&&!g(Gt).match(xi)){var Dt=g(Gt).replace(pe,function(an,Ui,Vi){var Oi=[],ln=Ui.toLowerCase()=="m",Qi=he[Ui];return Vi.replace(H,function(cn){ln&&Oi.length==2&&(Qi+=Oi+he[Ui=="m"?"l":"L"],Oi=[]),Oi.push(T(cn*me))}),Qi+Oi});return Dt}var ji,hi,vn=Wt(Gt);Dt=[];for(var bi=0,zi=vn.length;bi<zi;bi++){ji=vn[bi],(hi=vn[bi][0].toLowerCase())=="z"&&(hi="x");for(var Ei=1,Mt=ji.length;Ei<Mt;Ei++)hi+=T(ji[Ei]*me)+(Ei!=Mt-1?",":ee);Dt.push(hi)}return Dt.join(Z)}(~g(B.path).toLowerCase().indexOf("r")?l._pathToAbsolute(B.path):B.path),O._.dirty=1,O.type=="image"&&(O._.fillpos=[B.x,B.y],O._.fillsize=[B.width,B.height],Le(O,1,1,0,0,0))),"transform"in k&&O.transform(k.transform),fe){var He=+B.cx,Ge=+B.cy,nt=+B.rx||+B.r||0,E=+B.ry||+B.r||0;$.path=l.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",T((He-nt)*me),T((Ge-E)*me),T((He+nt)*me),T((Ge+E)*me),T(He*me)),O._.dirty=1}if("clip-rect"in k){var R=g(k["clip-rect"]).split(Q);if(R.length==4){R[2]=+R[2]+ +R[0],R[3]=+R[3]+ +R[1];var L=$.clipRect||l._g.doc.createElement("div"),J=L.style;J.clip=l.format("rect({1}px {2}px {3}px {0}px)",R),$.clipRect||(J.position="absolute",J.top=0,J.left=0,J.width=O.paper.width+"px",J.height=O.paper.height+"px",$.parentNode.insertBefore(L,$),L.appendChild($),$.clipRect=L)}k["clip-rect"]||$.clipRect&&($.clipRect.style.clip="auto")}if(O.textpath){var ue=O.textpath.style;k.font&&(ue.font=k.font),k["font-family"]&&(ue.fontFamily='"'+k["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,ee)+'"'),k["font-size"]&&(ue.fontSize=k["font-size"]),k["font-weight"]&&(ue.fontWeight=k["font-weight"]),k["font-style"]&&(ue.fontStyle=k["font-style"])}if("arrow-start"in k&&it(ae,k["arrow-start"]),"arrow-end"in k&&it(ae,k["arrow-end"],1),k.opacity!=null||k.fill!=null||k.src!=null||k.stroke!=null||k["stroke-width"]!=null||k["stroke-opacity"]!=null||k["fill-opacity"]!=null||k["stroke-dasharray"]!=null||k["stroke-miterlimit"]!=null||k["stroke-linejoin"]!=null||k["stroke-linecap"]!=null){var ce=$.getElementsByTagName("fill");if(!(ce=ce&&ce[0])&&(ce=We("fill")),O.type=="image"&&k.src&&(ce.src=k.src),k.fill&&(ce.on=!0),ce.on!=null&&k.fill!="none"&&k.fill!==null||(ce.on=!1),ce.on&&k.fill){var Oe=g(k.fill).match(l._ISURL);if(Oe){ce.parentNode==$&&$.removeChild(ce),ce.rotate=!0,ce.src=Oe[1],ce.type="tile";var et=O.getBBox(1);ce.position=et.x+Z+et.y,O._.fillpos=[et.x,et.y],l._preload(Oe[1],function(){O._.fillsize=[this.offsetWidth,this.offsetHeight]})}else ce.color=l.getRGB(k.fill).hex,ce.src=ee,ce.type="solid",l.getRGB(k.fill).error&&(ae.type in{circle:1,ellipse:1}||g(k.fill).charAt()!="r")&&tt(ae,k.fill,ce)&&(B.fill="none",B.gradient=k.fill,ce.rotate=!1)}if("fill-opacity"in k||"opacity"in k){var Ze=((+B["fill-opacity"]+1||2)-1)*((+B.opacity+1||2)-1)*((+l.getRGB(k.fill).o+1||2)-1);Ze=D(M(Ze,0),1),ce.opacity=Ze,ce.src&&(ce.color="none")}$.appendChild(ce);var lt=$.getElementsByTagName("stroke")&&$.getElementsByTagName("stroke")[0],xt=!1;!lt&&(xt=lt=We("stroke")),(k.stroke&&k.stroke!="none"||k["stroke-width"]||k["stroke-opacity"]!=null||k["stroke-dasharray"]||k["stroke-miterlimit"]||k["stroke-linejoin"]||k["stroke-linecap"])&&(lt.on=!0),(k.stroke=="none"||k.stroke===null||lt.on==null||k.stroke==0||k["stroke-width"]==0)&&(lt.on=!1);var ht=l.getRGB(k.stroke);lt.on&&k.stroke&&(lt.color=ht.hex),Ze=((+B["stroke-opacity"]+1||2)-1)*((+B.opacity+1||2)-1)*((+ht.o+1||2)-1);var Ot=.75*(_(k["stroke-width"])||1);if(Ze=D(M(Ze,0),1),k["stroke-width"]==null&&(Ot=B["stroke-width"]),k["stroke-width"]&&(lt.weight=Ot),Ot&&Ot<1&&(Ze*=Ot)&&(lt.weight=1),lt.opacity=Ze,k["stroke-linejoin"]&&(lt.joinstyle=k["stroke-linejoin"]||"miter"),lt.miterlimit=k["stroke-miterlimit"]||8,k["stroke-linecap"]&&(lt.endcap=k["stroke-linecap"]=="butt"?"flat":k["stroke-linecap"]=="square"?"square":"round"),"stroke-dasharray"in k){var qt={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};lt.dashstyle=qt[h](k["stroke-dasharray"])?qt[k["stroke-dasharray"]]:ee}xt&&$.appendChild(lt)}if(ae.type=="text"){ae.paper.canvas.style.display=ee;var Zt=ae.paper.span,Pt=B.font&&B.font.match(/\d+(?:\.\d*)?(?=px)/);te=Zt.style,B.font&&(te.font=B.font),B["font-family"]&&(te.fontFamily=B["font-family"]),B["font-weight"]&&(te.fontWeight=B["font-weight"]),B["font-style"]&&(te.fontStyle=B["font-style"]),Pt=_(B["font-size"]||Pt&&Pt[0])||10,te.fontSize=100*Pt+"px",ae.textpath.string&&(Zt.innerHTML=g(ae.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var Ut=Zt.getBoundingClientRect();ae.W=B.w=(Ut.right-Ut.left)/100,ae.H=B.h=(Ut.bottom-Ut.top)/100,ae.X=B.x,ae.Y=B.y+ae.H/2,("x"in k||"y"in k)&&(ae.path.v=l.format("m{0},{1}l{2},{1}",T(B.x*me),T(B.y*me),T(B.x*me)+1));for(var ci=["x","y","text","font","font-family","font-weight","font-style","font-size"],pi=0,Ii=ci.length;pi<Ii;pi++)if(ci[pi]in k){ae._.dirty=1;break}switch(B["text-anchor"]){case"start":ae.textpath.style["v-text-align"]="left",ae.bbx=ae.W/2;break;case"end":ae.textpath.style["v-text-align"]="right",ae.bbx=-ae.W/2;break;default:ae.textpath.style["v-text-align"]="center",ae.bbx=0}ae.textpath.style["v-text-kern"]=!0}},tt=function(O,k,$){O.attrs=O.attrs||{},O.attrs;var B=Math.pow,te="linear",X=".5 .5";if(O.attrs.gradient=k,k=(k=g(k).replace(l._radial_gradient,function(nt,E,R){return te="radial",E&&R&&(E=_(E),R=_(R),B(E-.5,2)+B(R-.5,2)>.25&&(R=x.sqrt(.25-B(E-.5,2))*(2*(R>.5)-1)+.5),X=E+Z+R),ee})).split(/\s*\-\s*/),te=="linear"){var fe=k.shift();if(fe=-_(fe),isNaN(fe))return null}var ae=l._parseDots(k);if(!ae)return null;if(O=O.shape||O.node,ae.length){O.removeChild($),$.on=!0,$.method="none",$.color=ae[0].color,$.color2=ae[ae.length-1].color;for(var Ee=[],He=0,Ge=ae.length;He<Ge;He++)ae[He].offset&&Ee.push(ae[He].offset+Z+ae[He].color);$.colors=Ee.length?Ee.join():"0% "+$.color,te=="radial"?($.type="gradientTitle",$.focus="100%",$.focussize="0 0",$.focusposition=X,$.angle=0):($.type="gradient",$.angle=(270-fe)%360),O.appendChild($)}return 1},Qe=function(O,k){this[0]=this.node=O,O.raphael=!0,this.id=l._oid++,O.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=k,this.matrix=l.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!k.bottom&&(k.bottom=this),this.prev=k.top,k.top&&(k.top.next=this),k.top=this,this.next=null},st=l.el;Qe.prototype=st,st.constructor=Qe,st.transform=function(O){if(O==null)return this._.transform;var k,$=this.paper._viewBoxShift,B=$?"s"+[$.scale,$.scale]+"-1-1t"+[$.dx,$.dy]:ee;$&&(k=O=g(O).replace(/\.{3}|\u2026/g,this._.transform||ee)),l._extractTransform(this,B+O);var te,X=this.matrix.clone(),fe=this.skew,ae=this.node,Ee=~g(this.attrs.fill).indexOf("-"),He=!g(this.attrs.fill).indexOf("url(");if(X.translate(1,1),He||Ee||this.type=="image")if(fe.matrix="1 0 0 1",fe.offset="0 0",te=X.split(),Ee&&te.noRotation||!te.isSimple){ae.style.filter=X.toFilter();var Ge=this.getBBox(),nt=this.getBBox(1),E=Ge.x-nt.x,R=Ge.y-nt.y;ae.coordorigin=E*-me+Z+R*-me,Le(this,1,1,E,R,0)}else ae.style.filter=ee,Le(this,te.scalex,te.scaley,te.dx,te.dy,te.rotate);else ae.style.filter=ee,fe.matrix=g(X),fe.offset=X.offset();return k!==null&&(this._.transform=k,l._extractTransform(this,k)),this},st.rotate=function(O,k,$){if(this.removed)return this;if(O!=null){if((O=g(O).split(Q)).length-1&&(k=_(O[1]),$=_(O[2])),O=_(O[0]),$==null&&(k=$),k==null||$==null){var B=this.getBBox(1);k=B.x+B.width/2,$=B.y+B.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",O,k,$]])),this}},st.translate=function(O,k){return this.removed?this:((O=g(O).split(Q)).length-1&&(k=_(O[1])),O=_(O[0])||0,k=+k||0,this._.bbox&&(this._.bbox.x+=O,this._.bbox.y+=k),this.transform(this._.transform.concat([["t",O,k]])),this)},st.scale=function(O,k,$,B){if(this.removed)return this;if((O=g(O).split(Q)).length-1&&(k=_(O[1]),$=_(O[2]),B=_(O[3]),isNaN($)&&($=null),isNaN(B)&&(B=null)),O=_(O[0]),k==null&&(k=O),B==null&&($=B),$==null||B==null)var te=this.getBBox(1);return $=$??te.x+te.width/2,B=B??te.y+te.height/2,this.transform(this._.transform.concat([["s",O,k,$,B]])),this._.dirtyT=1,this},st.hide=function(){return!this.removed&&(this.node.style.display="none"),this},st.show=function(){return!this.removed&&(this.node.style.display=ee),this},st.auxGetBBox=l.el.getBBox,st.getBBox=function(){var O=this.auxGetBBox();if(this.paper&&this.paper._viewBoxShift){var k={},$=1/this.paper._viewBoxShift.scale;return k.x=O.x-this.paper._viewBoxShift.dx,k.x*=$,k.y=O.y-this.paper._viewBoxShift.dy,k.y*=$,k.width=O.width*$,k.height=O.height*$,k.x2=k.x+k.width,k.y2=k.y+k.height,k}return O},st._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},st.remove=function(){if(!this.removed&&this.node.parentNode){for(var O in this.paper.__set__&&this.paper.__set__.exclude(this),l.eve.unbind("raphael.*.*."+this.id),l._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape),this)this[O]=typeof this[O]=="function"?l._removedFactory(O):null;this.removed=!0}},st.attr=function(O,k){if(this.removed)return this;if(O==null){var $={};for(var B in this.attrs)this.attrs[h](B)&&($[B]=this.attrs[B]);return $.gradient&&$.fill=="none"&&($.fill=$.gradient)&&delete $.gradient,$.transform=this._.transform,$}if(k==null&&l.is(O,"string")){if(O=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;for(var te=O.split(Q),X={},fe=0,ae=te.length;fe<ae;fe++)(O=te[fe])in this.attrs?X[O]=this.attrs[O]:l.is(this.paper.customAttributes[O],"function")?X[O]=this.paper.customAttributes[O].def:X[O]=l._availableAttrs[O];return ae-1?X:X[te[0]]}if(this.attrs&&k==null&&l.is(O,"array")){for(X={},fe=0,ae=O.length;fe<ae;fe++)X[O[fe]]=this.attr(O[fe]);return X}var Ee;for(var He in k!=null&&((Ee={})[O]=k),k==null&&l.is(O,"object")&&(Ee=O),Ee)K("raphael.attr."+He+"."+this.id,this,Ee[He]);if(Ee){for(He in this.paper.customAttributes)if(this.paper.customAttributes[h](He)&&Ee[h](He)&&l.is(this.paper.customAttributes[He],"function")){var Ge=this.paper.customAttributes[He].apply(this,[].concat(Ee[He]));for(var nt in this.attrs[He]=Ee[He],Ge)Ge[h](nt)&&(Ee[nt]=Ge[nt])}Ee.text&&this.type=="text"&&(this.textpath.string=Ee.text),Ye(this,Ee)}return this},st.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&l._tofront(this,this.paper),this},st.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),l._toback(this,this.paper)),this)},st.insertAfter=function(O){return this.removed?this:(O.constructor==l.st.constructor&&(O=O[O.length-1]),O.node.nextSibling?O.node.parentNode.insertBefore(this.node,O.node.nextSibling):O.node.parentNode.appendChild(this.node),l._insertafter(this,O,this.paper),this)},st.insertBefore=function(O){return this.removed?this:(O.constructor==l.st.constructor&&(O=O[0]),O.node.parentNode.insertBefore(this.node,O.node),l._insertbefore(this,O,this.paper),this)},st.blur=function(O){var k=this.node.runtimeStyle,$=k.filter;return $=$.replace(p,ee),+O!=0?(this.attrs.blur=O,k.filter=$+Z+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+O||1.5)+")",k.margin=l.format("-{0}px 0 0 -{0}px",T(+O||1.5))):(k.filter=$,k.margin=0,delete this.attrs.blur),this},l._engine.path=function(O,k){var $=We("shape");$.style.cssText=oe,$.coordsize=me+Z+me,$.coordorigin=k.coordorigin;var B=new Qe($,k),te={fill:"none",stroke:"#000"};O&&(te.path=O),B.type="path",B.path=[],B.Path=ee,Ye(B,te),k.canvas&&k.canvas.appendChild($);var X=We("skew");return X.on=!0,$.appendChild(X),B.skew=X,B.transform(ee),B},l._engine.rect=function(O,k,$,B,te,X){var fe=l._rectPath(k,$,B,te,X),ae=O.path(fe),Ee=ae.attrs;return ae.X=Ee.x=k,ae.Y=Ee.y=$,ae.W=Ee.width=B,ae.H=Ee.height=te,Ee.r=X,Ee.path=fe,ae.type="rect",ae},l._engine.ellipse=function(O,k,$,B,te){var X=O.path();return X.attrs,X.X=k-B,X.Y=$-te,X.W=2*B,X.H=2*te,X.type="ellipse",Ye(X,{cx:k,cy:$,rx:B,ry:te}),X},l._engine.circle=function(O,k,$,B){var te=O.path();return te.attrs,te.X=k-B,te.Y=$-B,te.W=te.H=2*B,te.type="circle",Ye(te,{cx:k,cy:$,r:B}),te},l._engine.image=function(O,k,$,B,te,X){var fe=l._rectPath($,B,te,X),ae=O.path(fe).attr({stroke:"none"}),Ee=ae.attrs,He=ae.node,Ge=He.getElementsByTagName("fill")[0];return Ee.src=k,ae.X=Ee.x=$,ae.Y=Ee.y=B,ae.W=Ee.width=te,ae.H=Ee.height=X,Ee.path=fe,ae.type="image",Ge.parentNode==He&&He.removeChild(Ge),Ge.rotate=!0,Ge.src=k,Ge.type="tile",ae._.fillpos=[$,B],ae._.fillsize=[te,X],He.appendChild(Ge),Le(ae,1,1,0,0,0),ae},l._engine.text=function(O,k,$,B){var te=We("shape"),X=We("path"),fe=We("textpath");k=k||0,$=$||0,B=B||"",X.v=l.format("m{0},{1}l{2},{1}",T(k*me),T($*me),T(k*me)+1),X.textpathok=!0,fe.string=g(B),fe.on=!0,te.style.cssText=oe,te.coordsize=me+Z+me,te.coordorigin="0 0";var ae=new Qe(te,O),Ee={fill:"#000",stroke:"none",font:l._availableAttrs.font,text:B};ae.shape=te,ae.path=X,ae.textpath=fe,ae.type="text",ae.attrs.text=g(B),ae.attrs.x=k,ae.attrs.y=$,ae.attrs.w=1,ae.attrs.h=1,Ye(ae,Ee),te.appendChild(fe),te.appendChild(X),O.canvas.appendChild(te);var He=We("skew");return He.on=!0,te.appendChild(He),ae.skew=He,ae.transform(ee),ae},l._engine.setSize=function(O,k){var $=this.canvas.style;return this.width=O,this.height=k,O==+O&&(O+="px"),k==+k&&(k+="px"),$.width=O,$.height=k,$.clip="rect(0 "+O+" "+k+" 0)",this._viewBox&&l._engine.setViewBox.apply(this,this._viewBox),this},l._engine.setViewBox=function(O,k,$,B,te){l.eve("raphael.setViewBox",this,this._viewBox,[O,k,$,B,te]);var X,fe,ae=this.getSize(),Ee=ae.width,He=ae.height;return te&&($*(X=He/B)<Ee&&(O-=(Ee-$*X)/2/X),B*(fe=Ee/$)<He&&(k-=(He-B*fe)/2/fe)),this._viewBox=[O,k,$,B,!!te],this._viewBoxShift={dx:-O,dy:-k,scale:ae},this.forEach(function(Ge){Ge.transform("...")}),this},l._engine.initWin=function(O){var k=O.document;k.styleSheets.length<31?k.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"):k.styleSheets[0].addRule(".rvml","behavior:url(#default#VML)");try{!k.namespaces.rvml&&k.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),We=function($){return k.createElement("<rvml:"+$+' class="rvml">')}}catch{We=function(B){return k.createElement("<"+B+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},l._engine.initWin(l._g.win),l._engine.create=function(){var O=l._getContainer.apply(0,arguments),k=O.container,$=O.height,B=O.width,te=O.x,X=O.y;if(!k)throw new Error("VML container not found.");var fe=new l._Paper,ae=fe.canvas=l._g.doc.createElement("div"),Ee=ae.style;return te=te||0,X=X||0,B=B||512,$=$||342,fe.width=B,fe.height=$,B==+B&&(B+="px"),$==+$&&($+="px"),fe.coordsize=216e5+Z+216e5,fe.coordorigin="0 0",fe.span=l._g.doc.createElement("span"),fe.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",ae.appendChild(fe.span),Ee.cssText=l.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",B,$),k==1?(l._g.doc.body.appendChild(ae),Ee.left=te+"px",Ee.top=X+"px",Ee.position="absolute"):k.firstChild?k.insertBefore(ae,k.firstChild):k.appendChild(ae),fe.renderfix=function(){},fe},l.prototype.clear=function(){l.eve("raphael.clear",this),this.canvas.innerHTML=ee,this.span=l._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},l.prototype.remove=function(){for(var O in l.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas),this)this[O]=typeof this[O]=="function"?l._removedFactory(O):null;return!0};var Tt=l.st;for(var N in st)st[h](N)&&!Tt[h](N)&&(Tt[N]=function(O){return function(){var k=arguments;return this.forEach(function($){$[O].apply($,k)})}}(N))}}).apply(n,o))===void 0||(i.exports=a)}])})})(Mh);var pm=Mh.exports;const Ri=Oo(pm),ql=ft.View.extend({handle_wh:6,default_line_attrs:{"stroke-width":0,stroke:"#4b80f9",cursor:"default","fill-opacity":.01,fill:"#fff"},selected_line_attrs:{stroke:"#4b80f9","stroke-width":2},handle_attrs:{stroke:"#4b80f9",fill:"#fff",cursor:"default","fill-opacity":1},events:{},initialize:function(t){var e=this;this.paper=t.paper,this.handle_wh=t.handle_wh||this.handle_wh,this.handles_toFront=t.handles_toFront||!1,this.disable_handles=t.disable_handles||!1,this.fixed_ratio=t.fixed_ratio||!1,this.x=this.model.get("x"),this.y=this.model.get("y"),this.width=this.model.get("width"),this.height=this.model.get("height"),this.handleIds={nw:[this.x,this.y],n:[this.x+this.width/2,this.y],ne:[this.x+this.width,this.y],w:[this.x,this.y+this.height/2],e:[this.x+this.width,this.y+this.height/2],sw:[this.x,this.y+this.height],s:[this.x+this.width/2,this.y+this.height],se:[this.x+this.width,this.y+this.height]},e.handles=this.paper.set();var i=function(){return function(_,x,T,M,D){if(e.disable_handles)return!1;var F=e.fixed_ratio||D.shiftKey;F&&this.h_id.length===2&&(this.h_id==="se"||this.h_id==="nw"?Math.abs(_/x)>this.aspect?x=_/this.aspect:_=x*this.aspect:Math.abs(_/x)>this.aspect?x=-_/this.aspect:_=-x*this.aspect);var Q=this.ox+_,K=this.oy+x,Z={x:this.rect.x,y:this.rect.y,width:this.rect.width,height:this.rect.height};return this.h_id.indexOf("e")>-1&&(Z.width=Q-e.x+e.handle_wh/2),this.h_id.indexOf("s")>-1&&(Z.height=K-e.y+e.handle_wh/2),this.h_id.indexOf("n")>-1&&(Z.y=K+e.handle_wh/2,Z.height=this.obottom-K),this.h_id.indexOf("w")>-1&&(Z.x=Q+e.handle_wh/2,Z.width=this.oright-Q),Z.width<1||Z.height<1||(this.rect.x=Z.x,this.rect.y=Z.y,this.rect.width=Z.width,this.rect.height=Z.height,this.rect.model.trigger("drag_resize",[this.rect.x,this.rect.y,this.rect.width,this.rect.height]),this.rect.updateShape()),!1}},n=function(){return function(){return e.disable_handles||(this.ox=this.attr("x"),this.oy=this.attr("y"),this.oright=e.width+this.ox,this.obottom=e.height+this.oy,this.aspect=e.model.get("width")/e.model.get("height")),!1}},r=function(){return function(){return e.disable_handles||this.rect.model.trigger("drag_resize_stop",[this.rect.x,this.rect.y,this.rect.width,this.rect.height]),!1}},o=function(_){_.stopImmediatePropagation()};for(var a in this.handleIds){var l=this.handleIds[a][0],h=this.handleIds[a][1],g=this.paper.rect(l-e.handle_wh/2,h-e.handle_wh/2,e.handle_wh,e.handle_wh).attr(e.handle_attrs);g.attr({cursor:a+"-resize"}),g.h_id=a,g.rect=e,g.drag(i(),n(),r()),g.mousedown(o),e.handles.push(g)}e.handles.hide(),this.element=this.paper.rect(),this.element.attr(e.default_line_attrs),this.setElement(this.element.node),this.delegateEvents(this.events),this.element.drag(function(_,x){return e.x=_+this.ox,e.y=this.oy+x,e.dragging=!0,e.model.trigger("drag_xy",[_,x]),e.updateShape(),!1},function(){return this.ox=this.attr("x"),this.oy=this.attr("y"),!1},function(){return e.model.trigger("drag_xy_stop",[e.x-this.ox,e.y-this.oy]),e.dragging=!1,!1}),this.element.mousedown(function(_){_.stopImmediatePropagation(),e.selectShape(_)}),this.updateShape(),this.model.on("change",this.render,this),this.model.on("destroy",this.destroy,this)},render:function(t){this.dragging||(this.x=this.model.get("x"),this.y=this.model.get("y"),this.width=this.model.get("width"),this.height=this.model.get("height"),this.updateShape())},updateShape:function(){if(this.element.attr({x:this.x,y:this.y,width:this.width,height:this.height}),this.model.get("selected")){this.element.attr(this.selected_line_attrs);var t=this;this.handles_toFront?setTimeout(function(){t.handles.show().toFront()},50):this.handles.show().toFront()}else this.element.attr(this.default_line_attrs),this.handles.hide();this.handleIds={nw:[this.x,this.y],n:[this.x+this.width/2,this.y],ne:[this.x+this.width,this.y],w:[this.x,this.y+this.height/2],e:[this.x+this.width,this.y+this.height/2],sw:[this.x,this.y+this.height],s:[this.x+this.width/2,this.y+this.height],se:[this.x+this.width,this.y+this.height]};for(var e,i,n,r,o=0,a=this.handles.length;o<a;o++)e=this.handles[o],i=e.h_id,n=this.handleIds[i][0],r=this.handleIds[i][1],e.attr({x:n-this.handle_wh/2,y:r-this.handle_wh/2})},selectShape:function(t){this.model.trigger("clicked",[t])},destroy:function(){this.element.remove(),this.handles.remove(),this.model.off("change",this.render,this)}}),gm=`
<tr class="roiPickMe">
    <td>
        <div class="roi_wrapper" style="position: relative; overflow: hidden; margin: 5px; height: <%= h %>px; width: <%= w %>px">
            <img id="<%= id %>"
                class="roi_content"
                data-roiId="<%= roiId %>"
                data-rotation="<%= rect.rotation %>"
                data-x="<%= rect.x %>" data-y="<%= rect.y %>" 
                data-width="<%= rect.width %>" data-height="<%= rect.height %>"
                data-theT="<%= rect.theT %>" data-theZ="<%= rect.theZ %>"
                style="position: absolute; top: <%= top %>px; left: <%= left %>px; width: <%= img_w %>px; height: <%= img_h %>px;
                transform: <%= css.transform %>;
                transform-origin: <%= css['transform-origin'] %>;"
                src='<%= src %>' />
        </div>
    </td>
    <% if (zStart) { %>
    <td>
        <%= zStart %>
        <% if (zStart !== zEnd) print(" - " + zEnd); %>
    </td>
    <% } %>
    <% if (tStart) { %>
    <td>
        <%= tStart %>
        <% if (tStart !== tEnd) print(" - " + tEnd); %>
    </td>
    <% } %>
</tr>
`,mm=ft.View.extend({el:C("#cropModal"),roiTemplate:$e.template(gm),model:_n,roisPageSize:200,roisPage:0,roisCount:0,roisLoaded:0,roiRects:[],initialize:function(){var t=this;document.getElementById("cropModal").addEventListener("shown.bs.modal",()=>{t.m=t.model.getSelected().head().clone(),t.listenTo(t.m,"change:theZ change:theT",t.render),t.cropModel.set({selected:!1,width:0,height:0});var e=t.m.getViewportAsRect();t.applyRotation(e),(e.x!==0||e.y!==0||e.width!==t.m.get("orig_width")||e.height!==t.m.get("orig_height"))&&(t.currentROI=e,t.cropModel.set({selected:!0})),t.m.set({zoom:100,dx:0,dy:0}),t.zoomToFit(),t.enableSubmit(!1),t.roiRects=[],t.roisLoaded=0,t.roisPage=0,t.loadRoiRects(),t.showClipboardFigureRois()}),this.currentROI={x:0,y:0,width:0,height:0},this.cropModel=new ft.Model({x:0,y:0,width:0,height:0,selected:!1}),this.cropModel.bind("drag_resize_stop",function(e){this.set({x:e[0],y:e[1],width:e[2],height:e[3]})}),this.cropModel.bind("drag_xy_stop",function(e){this.set({x:e[0]+this.get("x"),y:e[1]+this.get("y")})}),this.listenTo(this.cropModel,"change:x change:y change:width change:height",function(e){var i=t.zoom/100;t.currentROI={x:e.get("x")/i,y:e.get("y")/i,width:e.get("width")/i,height:e.get("height")/i},t.currentRoiId=void 0,t.regionValid(t.currentROI)?t.enableSubmit(!0):t.enableSubmit(!1)}),this.paper=Ri("crop_paper",500,500),this.rect=new ql({model:this.cropModel,paper:this.paper}),this.$cropImg=C(".crop_image",this.$el)},events:{"click .roiPickMe":"roiPicked","click .loadRoiRects":"loadRoiRects","mousedown svg":"mousedown","mousemove svg":"mousemove","mouseup svg":"mouseup","submit .cropModalForm":"handleRoiForm"},enableSubmit:function(t){var e=C('button[type="submit"]',this.$el);t?(e.prop("disabled",!1),e.prop("title","Crop selected images to chosen region")):(e.prop("disabled","disabled"),e.prop("title","No valid region selected"))},regionValid:function(t){return!(t.width<2||t.height<2||t.x>this.m.get("orig_width")||t.y>this.m.get("orig_height")||t.x+t.width<0||t.y+t.height<0)},roiPicked:function(t){var e=C(t.target),i=e.parent(),n=i.find("img.roi_content"),r=parseInt(n.attr("data-x"),10),o=parseInt(n.attr("data-y"),10),a=parseInt(n.attr("data-width"),10),l=parseInt(n.attr("data-height"),10),h=n.attr("data-rotation")||0,g=parseInt(n.attr("data-theT"),10),_=parseInt(n.attr("data-theZ"),10);h=parseInt(h),this.m.set("rotation",h),this.m.set({theT:g,theZ:_}),this.currentROI={x:r,y:o,width:a,height:l},this.applyRotation(this.currentROI,1,h),this.render(),this.cropModel.set({selected:!0}),this.currentRoiId=n.attr("data-roiId")},applyRotation:function(t,e=1,i){if(i===void 0&&(i=this.m.get("rotation")),i!=0){var n=this.m.get("orig_width")/2,r=this.m.get("orig_height")/2,o=t.x+t.width/2,a=t.y+t.height/2,l=Js(o,a,n,r,i*e);t.x=l.x-t.width/2,t.y=l.y-t.height/2}},handleRoiForm:function(t){t.preventDefault();var e=this,i=this.currentROI,n=this.model.getSelected(),r=n.allEqual("theT"),o=function(_,x){r&&(x=e.m.get("theT")),e.applyRotation(i,-1);var T={x:i.x,y:i.y,width:i.width,height:i.height,theZ:e.m.get("theZ"),theT:x};return T};this.currentRoiId&&(o=function(_,x){var T=e.cachedRois[e.currentRoiId],M=$e.keys(T).sort(),D,F,Q,K;return T[x]?Q=x:Q=M[parseInt(M.length/2,10)],D=$e.keys(T[Q]).sort(),T[Q][_]?F=_:F=D[parseInt(D.length/2,10)],K=T[Q][F],r||(Q=x),{x:K.X,y:K.Y,width:K.Width,height:K.Height,theZ:F,theT:Q}}),Mr("cropModal");function a(g){n.each(function(_){var x=o(_.get("theZ"),_.get("theT")),T=Math.min(parseInt(x.theZ,10),_.get("sizeZ")-1),M=Math.min(parseInt(x.theT,10),_.get("sizeT")-1);_.cropToRoi({x:x.x,y:x.y,width:x.width,height:x.height}),g&&_.unset("shapes"),_.save({theZ:T,theT:M,rotation:e.m.get("rotation")})})}var l=!1,h=n.length>0?"s":"";n.each(function(g){g.get("shapes")&&(l=!0)}),l?Pn("Delete ROIs?","Delete ROIs on the image"+h+" you are cropping?",["Yes","No","Cancel"],function(g){g!="Cancel"&&(g=="Yes"?a(!0):a())}):a()},mousedown:function(t){this.dragging=!0;var e=C(t.target).offset();return this.clientX_start=t.clientX,this.clientY_start=t.clientY,this.imageX_start=this.clientX_start-e.left,this.imageY_start=this.clientY_start-e.top,this.cropModel.set({x:this.imageX_start,y:this.imageY_start,width:0,height:0,selected:!0}),!1},mouseup:function(t){if(this.dragging)return this.dragging=!1,!1},mousemove:function(t){if(this.dragging){var e=t.clientX-this.clientX_start,i=t.clientY-this.clientY_start;t.shiftKey&&(Math.abs(e)>Math.abs(i)?i>0?i=Math.abs(e):i=-1*Math.abs(e):e>0?e=Math.abs(i):e=-1*Math.abs(i));var n=Math.min(0,e),r=Math.min(0,i);return this.cropModel.set({x:this.imageX_start+n,y:this.imageY_start+r,width:Math.abs(e),height:Math.abs(i)}),!1}},showClipboardFigureRois:function(){var t=[],e=this.model.get("clipboard");if(e&&e.CROP){var i=e.CROP;t.push({x:i.x,y:i.y,width:i.width,height:i.height,rotation:i.rotation})}else e&&e.SHAPES&&e.SHAPES.forEach(function(a){a.type==="Rectangle"&&t.push({x:a.x,y:a.y,width:a.width,height:a.height})});var n="No Regions copied to clipboard";this.renderRois(t,".roisFromClipboard",n);var r=[],o=this.model.getSelected();o.forEach(function(a){var l=a.get("shapes");l&&l.forEach(function(h){h.type==="Rectangle"&&r.push({x:h.x,y:h.y,width:h.width,height:h.height})})}),n="No Rectangular ROIs on selected panel in figure",this.renderRois(r,".roisFromFigure",n)},loadRoiRects:function(t){t&&t.preventDefault();var e=this,i=e.m.get("imageId"),n=this.roisPageSize*this.roisPage,r=BASE_WEBFIGURE_URL+"roiRectangles/"+i+"/?limit="+e.roisPageSize+"&offset="+n;Yr(r).then(o=>{var a=o.data;e.roisLoaded+=a.length,e.roisPage+=1,e.roisCount=o.meta.totalCount;for(var l=e.m.get("theT"),h=e.m.get("theZ"),g={},_,x,T,M,D,F,Q,K,Z,ee,he,pe,p=0;p<a.length;p++){_=a[p],x=_["@id"],pe={},ee=void 0,he=0;for(var H=0;H<_.shapes.length;H++){T=_.shapes[H];var oe=T["@type"].split("#")[1];oe==="Rectangle"&&(T.TheZ===void 0&&(T.TheZ=h),D=T.TheZ,T.TheT===void 0&&(T.TheT=l),M=T.TheT,ee===void 0?ee=M:ee=Math.min(ee,M),he=Math.max(he,M),pe[M]===void 0&&(pe[M]={}),pe[M][D]=T)}g[x]=pe,K=$e.keys(pe).map(function(Te){return parseInt(Te,10)}).sort(function(Te,Ae){return Te-Ae}),K.length!==0&&(pe[l]?Q=l:Q=K[K.length/2>>0],Z=$e.keys(pe[Q]).map(function(Te){return parseInt(Te,10)}).sort(function(Te,Ae){return Te-Ae}),pe[Q][h]?F=h:F=Z[Z.length/2>>0],T=pe[Q][F],e.roiRects.push({theZ:T.TheZ,theT:T.TheT,x:T.X,y:T.Y,width:T.Width,height:T.Height,roiId:x,tStart:ee,tEnd:he,zStart:Z[0],zEnd:Z[Z.length-1]}))}var me="No rectangular ROIs found on this image in OMERO";e.renderRois(e.roiRects,".roisFromOMERO",me),e.roisLoaded<e.roisCount?C(".loadRoiRects",this.$el).show():C(".loadRoiRects",this.$el).hide(),C("#cropRoiMessage").html(`Loaded ${e.roisLoaded} / ${e.roisCount} ROIs`),e.cachedRois=g})},renderRois:function(t,e,i){var n=this.m.get("orig_width"),r=this.m.get("orig_height"),o=this.m.get("theT"),a=this.m.get("theZ"),l="",h=50,g,_,x,T,M,D,F,Q,K;this.m.set("z_projection",!1);for(var Z=0;Z<t.length;Z++){g=t[Z];let he=g.rotation||0;g.theT>-1&&this.m.set("theT",g.theT,{silent:!0}),g.theZ>-1&&this.m.set("theZ",g.theZ,{silent:!0}),g.width>g.height?(D=h,F=g.height/g.width*D):(F=h,D=g.width/g.height*F),x=D/g.width,Q=n*x,K=r*x,T=-(x*g.y),M=-(x*g.x),g.theT=g.theT!==void 0?g.theT:o,g.theZ=g.theZ!==void 0?g.theZ:a;let pe=this.m._viewport_css(M,T,Q,K,h,h,he),p="rect_"+Math.random();this.m.get_img_src(!0).then(H=>document.getElementById(p).src=H);var ee={id:p,msg:i,src:_,rect:g,w:D,h:F,css:pe,top:T,left:M,img_w:Q,img_h:K,theZ:g.theZ+1,theT:g.theT+1,roiId:g.roiId,tStart:!1,zStart:!1};g.tStart!==void 0&&(ee.tStart=+g.tStart+1),g.tEnd!==void 0&&(ee.tEnd=+g.tEnd+1),g.zStart!==void 0&&(ee.zStart=+g.zStart+1),g.zEnd!==void 0&&(ee.zEnd=+g.zEnd+1),l+=this.roiTemplate(ee)}l.length===0&&(l="<tr><td colspan='3' style='color: #999'>"+i+"</td></tr>"),C(e+" tbody",this.$el).html(l),this.m.set({theT:o,theZ:a})},zoomToFit:function(){var t=500,e=450,i=this.m.get("orig_width"),n=this.m.get("orig_height"),r=Math.min(t/i,e/n);this.setZoom(r*100)},setZoom:function(t){this.zoom=t,this.render()},render:function(){var t=this.zoom/100,e=this.m.get("orig_width"),i=this.m.get("orig_height"),n=e*t,r=i*t;this.m.set("zoom",100),this.m.set("width",n),this.m.set("height",r),this.m.get_img_src(!0).then(_=>this.$cropImg.attr("src",_));var o=this.m.get_vp_full_plane_css(100,n,r);this.paper.setSize(n,r),C("#crop_paper").css({height:r,width:n}),C("#cropViewer").css({height:r,width:n}),this.$cropImg.css(o);var a=this.currentROI.x*t,l=this.currentROI.y*t,h=this.currentROI.width*t,g=this.currentROI.height*t;this.cropModel.set({x:a,y:l,width:h,height:g,selected:!0})}}),_m=ft.View.extend({el:C("#chgrpModal"),model:_n,imagesByGroup:{},omeroGroups:[],initialize:function(){var t=this;document.getElementById("chgrpModal").addEventListener("shown.bs.modal",()=>{t.enableSubmit(!1),t.model.get("fileId")?(C("#chgrpModal .modal-body").html(""),t.loadGroups(),t.loadImageDetails()):C("#chgrpModal .modal-body").html("<p>Figure not saved. Please Save the Figure first.</p>")})},events:{"click .chgrpForm input":"inputClicked","submit .chgrpForm":"handleSubmit"},loadImageDetails:function(){var t=this.model.panels.pluck("imageId"),e=`${BASE_WEBFIGURE_URL}images_details/?image=${$e.uniq(t).join(",")}`;Yr(e).then(i=>{this.imagesByGroup=i.data.reduce(function(n,r){return n[r.group.id]||(n[r.group.id]=[]),n[r.group.id].push(r),n},{}),this.render()})},loadGroups:function(){var t=`${API_BASE_URL_V0}m/experimenters/${USER_ID}/experimentergroups/`;Yr(t).then(e=>{this.omeroGroups=e.data.map(i=>({id:i["@id"],name:i.Name})).filter(i=>i.name!="user"),this.render()})},inputClicked:function(){this.enableSubmit(!0)},enableSubmit:function(t){var e=C('button[type="submit"]',this.$el);t?(e.prop("disabled",!1),e.prop("title","Move to Group")):(e.prop("disabled","disabled"),e.prop("title","No Group selected"))},handleSubmit:function(t){t.preventDefault();var e=parseInt(C('input[name="target_group"]:checked',this.$el).val()),i=this.omeroGroups.filter(o=>o.id===e)[0].name,n=this.model.get("fileId"),r=BASE_WEBFIGURE_URL+"chgrp/";this.enableSubmit(!1),setTimeout(function(){C("#chgrpModal .modal-body").append("<p>Moving to Group: "+$e.escape(i)+"...</p>")},1e3),C.post(r,{group_id:e,ann_id:n}).done((function(o){if(Mr("chgrpModal"),o.success)this.model.set({groupId:e}),Pn("Success","Figure moved to Group: "+$e.escape(i),["OK"]);else{var a=o.error||"No error message available";Pn("Move Failed",a,["OK"])}}).bind(this))},render:function(){var t="",e=this.model.get("groupId"),i=this.omeroGroups.filter(o=>o.id===e)[0];i&&(t+="<p>This figure is currently in Group: <strong>"+$e.escape(i.name)+"</strong>.</p>");var n=Object.keys(this.imagesByGroup).length;t+=`<p>Images in this figure belong to ${n} Group${n==1?"":"s"}: `,t+=Object.keys(this.imagesByGroup).map(o=>{var a=this.imagesByGroup[o].map(h=>h.id),l=this.imagesByGroup[o][0].group.name;return`
                <b>${$e.escape(l)}</b>
                (<a target="_blank" href="${WEBINDEX_URL}?show=image-${a.join("|image-")}">${a.length} image${a.length==1?"":"s"}</a>)`}).join(", ")+".</p>",t+=`<p><b>NB:</b> If a figure contains images from a <i>different</i> group, it is possible that some
            users may be able to open the figure but not see those images in it.</p>`;var r=this.omeroGroups.filter(o=>o.id!=e);r.length===0?t+="<p>No other Groups available (You are not a member of any other groups)</p>":(t+="<p>Move to Group...</p>",t+=r.map(o=>`<div class="radio">
                <label><input type="radio" name="target_group" value="${o.id}">
                    ${$e.escape(o.name)}
                </label></div>`).join(`
`)),C(".modal-body",this.$el).html(t)}});var vm=ft.Model.extend({parse:function(t){var e=function(o){return o[0].toLowerCase()+o.slice(1)},i=function(o){o<0&&(o=o>>>0);var a=o.toString(16);return a=("00000000"+a).slice(-8),"#"+a.substring(0,6)},n=function(o){o<0&&(o=o>>>0);var a=o.toString(16);return a=("00000000"+a).slice(-2),parseInt(a,16)/255};if(t.id=t["@id"],t.type=t["@type"].split("#")[1],delete t["@id"],delete t["@type"],t.StrokeWidth&&(t.strokeWidth=t.StrokeWidth.Value,delete t.StrokeWidth),$e.each(["StrokeColor","FillColor"],function(o){if(t[o]!==void 0){t[e(o)]=i(t[o]);let a=e(o).replace("Color","Opacity");t[a]=n(t[o]),delete t[o]}}),$e.each(["Points","MarkerEnd","MarkerStart","X","Y","RadiusX","RadiusY","X1","Y1","X2","Y2","Width","Height","TheZ","TheT"],function(o){t[o]!==void 0&&(t[e(o)]=t[o],delete t[o])}),(t.markerEnd==="Arrow"||t.markerStart==="Arrow")&&(t.type="Arrow",t.markerEnd!=="Arrow")){var r={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2};t.x1=r.x2,t.y1=r.y2,t.x2=r.x1,t.y2=r.y1}return t},convertOMEROShape:function(){var t=this.toJSON();if((t.markerEnd==="Arrow"||t.markerStart==="Arrow")&&(t.type="Arrow",t.markerEnd!=="Arrow")){var e={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2};t.x1=e.x2,t.y1=e.y2,t.x2=e.x1,t.y2=e.y1}return t.type==="Ellipse"&&t.rx!==void 0&&(t.x=t.cx,t.y=t.cy,t.radiusX=t.rx,t.radiusY=t.ry),t}}),bm=ft.Collection.extend({model:vm}),ym=ft.Model.extend({initialize:function(t){this.set("id",t["@id"]),this.shapes=new bm(t.shapes,{parse:!0})}}),wm=ft.Collection.extend({model:ym,deselectShapes:function(){this.forEach(function(t){t.shapes.forEach(function(e){e.get("selected")&&e.set("selected",!1)})})},selectShape:function(t){var e,i;this.forEach(function(n){n.shapes.forEach(function(r){r.get("id")===t&&r.set("selected")})}),e=this.getShape(t),e&&(i=e.toJSON()),this.trigger("change:selection",[i])},getShape:function(t){var e;return this.forEach(function(i){var n=i.shapes.get(t);n&&(e=n)}),e}}),ai=function(e){var i=this;this.paper=e.paper,this.manager=e.manager,e.id?this._id=e.id:this._id=this.manager.getRandomId(),this._x=e.x,this._y=e.y,this._width=e.width,this._height=e.height,e.area?this._area=e.area:this._area=this._width*this._height,this._strokeColor=e.strokeColor,e.fillColor?this._fillColor=e.fillColor:this._fillColor="#ffffff",e.fillOpacity?this._fillOpacity=e.fillOpacity:this._fillOpacity=0,this._strokeWidth=e.strokeWidth||2,this._selected=!1,this._zoomFraction=1,e.zoom&&(this._zoomFraction=e.zoom/100),this._rotation=e.rotation||0,this.handle_wh=6,this.element=this.paper.rect(),this.element.attr({"fill-opacity":this._fillOpacity,fill:this._fillColor,cursor:"pointer"}),this.manager.canEdit&&this.element.drag(function(n,r){n=n/i._zoomFraction,r=r/i._zoomFraction;var o=n-this.prevX,a=r-this.prevY;this.prevX=n,this.prevY=r,i.manager.moveSelectedShapes(o,a,!0)},function(){return i._handleMousedown(),this.prevX=0,this.prevY=0,!1},function(){return(this.prevX!==0||this.prevY!==0)&&i.manager.notifySelectedShapesChanged(),!1}),this.createHandles(),this.drawShape()};ai.prototype.toJson=function(){var e={type:"Rectangle",x:this._x,y:this._y,width:this._width,height:this._height,area:this._width*this._height,strokeWidth:this._strokeWidth,strokeColor:this._strokeColor,rotation:this._rotation,fillColor:this._fillColor,fillOpacity:this._fillOpacity};return this._id&&(e.id=this._id),e};ai.prototype.intersectRegion=function(e){var i=this.manager.regionToPath(e,this._zoomFraction*100),n=this._zoomFraction,r=parseInt(this._x*n,10),o=parseInt(this._y*n,10);if(Ri.isPointInsidePath(i,r,o))return!0;var a=this.getPath(),l=Ri.pathIntersection(i,a);return l.length>0};ai.prototype.getPath=function(){for(var e=this._zoomFraction,i=parseInt(this._x*e,10),n=parseInt(this._y*e,10),r=parseInt(this._width*e,10),o=parseInt(this._height*e,10),a=[[i,n],[i+r,n],[i+r,n+o],[i,n+o]],l=[],h=0;h<=3;h++)h===0&&l.push("M"+a[0].join(",")),h<3?l.push("L"+a[h+1].join(",")):l.push("Z");return l.join(",")};ai.prototype.compareCoords=function(e){if(e.type!=="Rectangle")return!1;var i=this.toJson(),n=!0;return["x","y","width","height"].forEach(function(r){e[r]!==i[r]&&(n=!1)}),n};ai.prototype.offsetCoords=function(e,i,n){return e.x=e.x+i,e.y=e.y+n,e};ai.prototype.offsetShape=function(e,i){this._x=this._x+e,this._y=this._y+i,this.drawShape()};ai.prototype._handleMousedown=function(){this._selected||this.manager.selectShapes([this])};ai.prototype.setSelected=function(e){this._selected=!!e,this.drawShape()};ai.prototype.isSelected=function(){return this._selected};ai.prototype.setZoom=function(e){this._zoomFraction=e/100,this.drawShape()};ai.prototype.setCoords=function(e){this._x=e.x||this._x,this._y=e.y||this._y,this._width=e.width||this._width,this._height=e.height||this._height,this.drawShape()};ai.prototype.getCoords=function(){return{x:this._x,y:this._y,width:this._width,height:this._height}};ai.prototype.setStrokeColor=function(e){this._strokeColor=e,this.drawShape()};ai.prototype.getStrokeColor=function(){return this._strokeColor};ai.prototype.setFillColor=function(e){this._fillColor=e,this.drawShape()};ai.prototype.getFillColor=function(){return this._fillColor};ai.prototype.setFillOpacity=function(e){this._fillOpacity=e,this.drawShape()};ai.prototype.getFillOpacity=function(){return this._fillOpacity};ai.prototype.setStrokeWidth=function(e){this._strokeWidth=e,this.drawShape()};ai.prototype.getStrokeWidth=function(){return this._strokeWidth};ai.prototype.destroy=function(){this.element.remove(),this.handles.remove()};ai.prototype.drawShape=function(){var e=this._strokeColor,i=this._strokeWidth,n=this._fillColor,r=this._fillOpacity,o=this._zoomFraction,a=this._x*o,l=this._y*o,h=this._width*o,g=this._height*o;this.element.attr({x:a,y:l,width:h,height:g,stroke:e,"stroke-width":i,fill:n,"fill-opacity":r}),this.element.transform("r"+this._rotation+","+(a+h/2)+","+(l+g/2)),this.isSelected()?this.handles.show().toFront():this.handles.hide();for(var _=this.getHandleCoords(),x,T,M,D,F=0,Q=this.handles.length;F<Q;F++)x=this.handles[F],T=x.h_id,M=_[T][0],D=_[T][1],x.attr({x:M-this.handle_wh/2,y:D-this.handle_wh/2}),x.transform("r"+this._rotation+","+(a+h/2)+","+(l+g/2))};ai.prototype.getHandleCoords=function(){var e=this._zoomFraction,i=this._x*e,n=this._y*e,r=this._width*e,o=this._height*e,a={nw:[i,n],n:[i+r/2,n],ne:[i+r,n],w:[i,n+o/2],e:[i+r,n+o/2],sw:[i,n+o],s:[i+r/2,n+o],se:[i+r,n+o]};return a};function xm(t,e,i){if(t===0&&e===0)return{x:t,y:e};var n=Math.sqrt(t*t+e*e),r=Math.atan(e/t);t<0&&(r=Math.PI+r);var o=i*(Math.PI/180),a=r-o;return t=Math.cos(a)*n,e=Math.sin(a)*n,{x:t,y:e}}ai.prototype.createHandles=function(){var e=this,i={stroke:"#4b80f9",fill:"#fff",cursor:"default","fill-opacity":1},n=this.getHandleCoords();e.handles=this.paper.set();var r=function(){return function(M,D,F,Q,K){if(M=M/e._zoomFraction,D=D/e._zoomFraction,e._rotation!=0){let p=xm(M,D,e._rotation);M=p.x,D=p.y}var Z=e.fixed_ratio||K.shiftKey;Z&&this.h_id.length===2&&(this.h_id==="se"||this.h_id==="nw"?Math.abs(M/D)>this.aspect?D=M/this.aspect:M=D*this.aspect:Math.abs(M/D)>this.aspect?D=-M/this.aspect:M=-D*this.aspect);var ee=this.ox+M,he=this.oy+D,pe={x:e._x,y:e._y,width:e._width,height:e._height};return this.h_id.indexOf("e")>-1&&(pe.width=ee-e._x+e.handle_wh/2),this.h_id.indexOf("s")>-1&&(pe.height=he-e._y+e.handle_wh/2),this.h_id.indexOf("n")>-1&&(pe.y=he+e.handle_wh/2,pe.height=this.oheight-D),this.h_id.indexOf("w")>-1&&(pe.x=ee+e.handle_wh/2,pe.width=this.owidth-M),pe.width<1||pe.height<1||(e._x=pe.x,e._y=pe.y,e._width=pe.width,e._height=pe.height,e._area=pe.width*pe.height,e.drawShape()),!1}},o=function(){return function(){return this.ox=this.attr("x")/e._zoomFraction,this.oy=this.attr("y")/e._zoomFraction,this.owidth=e._width,this.oheight=e._height,this.aspect=e._width/e._height,!1}},a=function(){return function(){return(this.owidth!==e._width||this.oheight!==e._height)&&e.manager.notifyShapesChanged([e]),!1}};let l=n.n[0],h=n.e[1];for(var g in n){var _=n[g][0],x=n[g][1],T=this.paper.rect(_-e.handle_wh/2,x-e.handle_wh/2,e.handle_wh,e.handle_wh).attr(i).rotate(e._rotation,l,h);T.attr({cursor:g+"-resize"}),T.h_id=g,T.rect=e,e.manager.canEdit&&T.drag(r(),o(),a()),e.handles.push(T)}e.handles.hide()};var Wa=function(e){this.paper=e.paper,this.manager=e.manager};Wa.prototype.startDrag=function(e,i){var n=this.manager.getStrokeColor(),r=this.manager.getStrokeWidth(),o=this.manager.getFillColor(),a=this.manager.getFillOpacity(),l=this.manager.getZoom();this.startX=e,this.startY=i,this.rect=new ai({manager:this.manager,paper:this.paper,x:e,y:i,width:0,height:0,area:0,strokeWidth:r,zoom:l,strokeColor:n,fillColor:o,fillOpacity:a})};Wa.prototype.drag=function(e,i,n){var r=this.startX-e,o=this.startY-i;n&&(r*o>0?Math.abs(r/o)>1?o=r:r=o:Math.abs(r/o)>1?o=-r:r=-o,e=(r-this.startX)*-1,i=(o-this.startY)*-1),this.rect.setCoords({x:Math.min(e,this.startX),y:Math.min(i,this.startY),width:Math.abs(r),height:Math.abs(o)}),this.rect._area=Math.abs(r)*Math.abs(o)};Wa.prototype.stopDrag=function(){var e=this.rect.getCoords();if(e.width<2||e.height<2){this.rect.destroy(),delete this.rect;return}this.rect.setSelected(!0),this.manager.addShape(this.rect)};var ei=function(e){var i=this;this.manager=e.manager,this.paper=e.paper,e.id?this._id=e.id:this._id=this.manager.getRandomId(),this._x1=e.x1,this._y1=e.y1,this._x2=e.x2,this._y2=e.y2,this._strokeColor=e.strokeColor,this._strokeWidth=e.strokeWidth||2,this._area=Math.pow(Math.pow(this._x2-this._x1,2)+Math.pow(this._y2-this._y1,2),.5)*this._strokeWidth,this.handle_wh=6,this._selected=!1,this._zoomFraction=1,e.zoom&&(this._zoomFraction=e.zoom/100),this.element=this.paper.path(),this.element.attr({cursor:"pointer"}),this.manager.canEdit&&this.element.drag(function(n,r){n=n/i._zoomFraction,r=r/i._zoomFraction;var o=n-this.prevX,a=r-this.prevY;return this.prevX=n,this.prevY=r,i.manager.moveSelectedShapes(o,a,!0),!1},function(){return i._handleMousedown(),this.prevX=0,this.prevY=0,!1},function(){return(this.prevX!==0||this.prevY!==0)&&i.manager.notifySelectedShapesChanged(),!1}),this.createHandles(),this.drawShape()};ei.prototype.toJson=function(){var e={type:"Line",x1:this._x1,x2:this._x2,y1:this._y1,y2:this._y2,area:Math.pow(Math.pow(this._x2-this._x1,2)+Math.pow(this._y2-this._y1,2),.5)*this._strokeWidth,strokeWidth:this._strokeWidth,strokeColor:this._strokeColor};return this._id&&(e.id=this._id),e};ei.prototype.compareCoords=function(e){var i=this.toJson(),n=!0;return e.type!==i.type?!1:(["x1","y1","x2","y2"].forEach(function(r){e[r]!==i[r]&&(n=!1)}),n)};ei.prototype.offsetCoords=function(e,i,n){return e.x1=e.x1+i,e.y1=e.y1+n,e.x2=e.x2+i,e.y2=e.y2+n,e};ei.prototype.offsetShape=function(e,i){this._x1=this._x1+e,this._y1=this._y1+i,this._x2=this._x2+e,this._y2=this._y2+i,this.drawShape()};ei.prototype._handleMousedown=function(){this._selected||this.manager.selectShapes([this])};ei.prototype.setCoords=function(e){this._x1=e.x1||this._x1,this._y1=e.y1||this._y1,this._x2=e.x2||this._x2,this._y2=e.y2||this._y2,this.drawShape()};ei.prototype.getCoords=function(){return{x1:this._x1,y1:this._y1,x2:this._x2,y2:this._y2}};ei.prototype.setStrokeColor=function(e){this._strokeColor=e,this.drawShape()};ei.prototype.getStrokeColor=function(){return this._strokeColor};ei.prototype.setStrokeWidth=function(e){this._strokeWidth=e,this._area=Math.abs((this._x2-this._x1)*(this._y2-this._y1))*this._strokeWidth,this.drawShape()};ei.prototype.getStrokeWidth=function(){return this._strokeWidth};ei.prototype.getFillColor=function(){return this._strokeColor};ei.prototype.setFillColor=function(e){};ei.prototype.setFillOpacity=function(e){};ei.prototype.getFillOpacity=function(){return 1};ei.prototype.destroy=function(){this.element.remove(),this.handles.remove()};ei.prototype.intersectRegion=function(e){var i=this.manager.regionToPath(e,this._zoomFraction*100),n=this._zoomFraction,r=parseInt(this._x1*n,10),o=parseInt(this._y1*n,10);if(Ri.isPointInsidePath(i,r,o))return!0;var a=this.getPath(),l=Ri.pathIntersection(i,a);return l.length>0};ei.prototype.getPath=function(){var e=this._zoomFraction,i=this._x1*e,n=this._y1*e,r=this._x2*e,o=this._y2*e;return"M"+i+" "+n+"L"+r+" "+o};ei.prototype.isSelected=function(){return this._selected};ei.prototype.setZoom=function(e){this._zoomFraction=e/100,this.drawShape()};ei.prototype._getLineWidth=function(){return this._strokeWidth};ei.prototype.drawShape=function(){var e=this.getPath(),i=this._strokeColor,n=this._getLineWidth();this.element.attr({path:e,stroke:i,fill:i,"stroke-width":n}),this.isSelected()?this.handles.show().toFront():this.handles.hide();for(var r=this.getHandleCoords(),o,a,l,h,g=0,_=this.handles.length;g<_;g++)o=this.handles[g],a=o.h_id,l=r[a].x,h=r[a].y,o.attr({x:l-this.handle_wh/2,y:h-this.handle_wh/2})};ei.prototype.setSelected=function(e){this._selected=!!e,this.drawShape()};ei.prototype.createHandles=function(){var e=this,i=this.getHandleCoords(),n={stroke:"#4b80f9",fill:"#fff",cursor:"move","fill-opacity":1};e.handles=this.paper.set();var r=function(){return function(T,M,D,F,Q){var K,Z;return T=T/e._zoomFraction,M=M/e._zoomFraction,(this.h_id==="start"||this.h_id==="middle")&&(e._x1=this.old.x1+T,e._y1=this.old.y1+M,Q.shiftKey&&this.h_id==="start"&&(K=e._x1-e._x2,Z=e._y1-e._y2,Math.abs(K/Z)>1?e._y1=this.old.y2:Math.abs(K/Z)<1&&(e._x1=this.old.x2))),(this.h_id==="end"||this.h_id==="middle")&&(e._x2=this.old.x2+T,e._y2=this.old.y2+M,Q.shiftKey&&this.h_id==="end"&&(K=e._x1-e._x2,Z=e._y1-e._y2,Math.abs(K/Z)>1?e._y2=this.old.y1:Math.abs(K/Z)<1&&(e._x2=this.old.x1))),e._area=Math.pow(Math.pow(e._x2-e._x1,2)+Math.pow(e._y2-e._y1,2),.5)*e._strokeWidth,e.drawShape(),!1}},o=function(){return function(){return this.old={x1:e._x1,x2:e._x2,y1:e._y1,y2:e._y2},!1}},a=function(){return function(){return(e._x1!==this.old.x1||e._y1!==this.old.y1||e._x2!==this.old.x2||e._y2!==this.old.y2)&&e.manager.notifyShapesChanged([e]),!1}},l=this.handle_wh,h,g,_;for(var x in i)h=i[x].x,g=i[x].y,_=this.paper.rect(h-l/2,g-l/2,l,l),_.attr({cursor:"move"}),_.h_id=x,_.line=e,this.manager.canEdit&&_.drag(r(),o(),a()),e.handles.push(_);e.handles.attr(n).hide()};ei.prototype.getHandleCoords=function(){var e=this._zoomFraction,i=this._x1*e,n=this._y1*e,r=this._x2*e,o=this._y2*e;return{start:{x:i,y:n},middle:{x:(i+r)/2,y:(n+o)/2},end:{x:r,y:o}}};var Nh=function(e){var i=new ei(e),n=i.toJson;return i.toJson=function(){var o=n.call(i);return o.type="Arrow",o},i._getLineWidth=function(){return 0},i.getPath=function(){var o=this._zoomFraction,a=this._x1*o,l=this._y1*o,h=this._x2*o,g=this._y2*o,_=this._strokeWidth*.5,x=this._strokeWidth*4+5,T=h-a,M=g-l,D=Math.atan(T/M),F=M<0?1:-1,Q=h+F*Math.sin(D-.4)*x,K=g+F*Math.cos(D-.4)*x,Z=h+F*Math.sin(D+.4)*x,ee=g+F*Math.cos(D+.4)*x,he=h+F*Math.sin(D)*x*.5,pe=g+F*Math.cos(D)*x*.5,p=F*Math.cos(D)*_,H=F*Math.sin(D)*_,oe=a-p,me=l+H,Te=a+p,Ae=l-H,ve=he-p,Le=pe+H,We=he+p,it=pe-H,Ye="M"+We+" "+it+" L"+ve+" "+Le;Ye=Ye+" L"+oe+" "+me+" L"+Te+" "+Ae,Ye=Ye+" L"+We+" "+it;var tt=Ye+" L"+Q+" "+K+" L"+Z+" "+ee;return tt=tt+" L"+h+" "+g+" L"+Q+" "+K+" L"+h+" "+g,tt=tt+" L"+Q+" "+K,tt},i.drawShape(),i},Ro=function(e){this.paper=e.paper,this.manager=e.manager};Ro.prototype.startDrag=function(e,i){var n=this.manager.getStrokeColor(),r=this.manager.getStrokeWidth(),o=this.manager.getZoom();this.startX=e,this.startY=i,this.line=new ei({manager:this.manager,paper:this.paper,x1:e,y1:i,x2:e,y2:i,area:0,strokeWidth:r,zoom:o,strokeColor:n})};Ro.prototype.drag=function(e,i,n){if(n){var r=this.startX-e,o=this.startY-i;Math.abs(r/o)>1?o=0:r=0,e=(r-this.startX)*-1,i=(o-this.startY)*-1}this.line.setCoords({x2:e,y2:i}),this._area=Math.pow(Math.pow(e-this._x1,2)+Math.pow(i-this._y1,2),.5)*this._strokeWidth};Ro.prototype.stopDrag=function(){var e=this.line.getCoords();if(Math.abs(e.x1-e.x2)<2&&Math.abs(e.y1-e.y2)<2){this.line.destroy(),delete this.line;return}this.line.setSelected(!0),this.manager.addShape(this.line)};var Em=function(e){var i=new Ro(e);return i.startDrag=function(r,o){var a=this.manager.getStrokeColor(),l=this.manager.getStrokeWidth(),h=this.manager.getZoom();this.startX=r,this.startY=o,this.line=new Nh({manager:this.manager,paper:this.paper,x1:r,y1:o,x2:r,y2:o,area:0,strokeWidth:l,zoom:h,strokeColor:a})},i},ri=function(e){var i=this;if(this.manager=e.manager,this.paper=e.paper,e.id?this._id=e.id:this._id=this.manager.getRandomId(),this._x=e.x,this._y=e.y,this._radiusX=e.radiusX,this._radiusY=e.radiusY,this._rotation=e.rotation||0,e.transform&&e.transform.startsWith("matrix")){var n=e.transform.replace("matrix(","").replace(")","").split(" "),r=parseFloat(n[0]),o=parseFloat(n[1]),a=parseFloat(n[2]),l=parseFloat(n[3]),h=parseFloat(n[4]),g=parseFloat(n[5]);this.Matrix=Ri.matrix(r,o,a,l,h,g)}this._radiusX===0||this._radiusY===0?this._yxRatio=.5:this._yxRatio=this._radiusY/this._radiusX,this._strokeColor=e.strokeColor,e.fillColor?this._fillColor=e.fillColor:this._fillColor="#ffffff",e.fillOpacity?this._fillOpacity=e.fillOpacity:this._fillOpacity=0,this._strokeWidth=e.strokeWidth||2,this._selected=!1,this._zoomFraction=1,e.zoom&&(this._zoomFraction=e.zoom/100),e.area?this._area=e.area:this._area=this._radiusX*this._radiusY*Math.PI,this.handle_wh=6,this.element=this.paper.ellipse(),this.element.attr({"fill-opacity":this._fillOpacity,fill:this._fillColor,cursor:"pointer"}),this.manager.canEdit&&this.element.drag(function(x,T){x=x/i._zoomFraction,T=T/i._zoomFraction;var M=x-this.prevX,D=T-this.prevY;return this.prevX=x,this.prevY=T,i.manager.moveSelectedShapes(M,D,!0),!1},function(){return i._handleMousedown(),this.prevX=0,this.prevY=0,!1},function(){return(this.prevX!==0||this.prevY!==0)&&i.manager.notifySelectedShapesChanged(),!1}),this.createHandles();var _=!!this.Matrix;this.updateShapeFromHandles(_),this.drawShape()};ri.prototype.toJson=function(){var e={type:"Ellipse",x:this._x,y:this._y,radiusX:this._radiusX,radiusY:this._radiusY,area:this._radiusX*this._radiusY*Math.PI,rotation:this._rotation,strokeWidth:this._strokeWidth,strokeColor:this._strokeColor,fillColor:this._fillColor,fillOpacity:this._fillOpacity};return this._id&&(e.id=this._id),e};ri.prototype.compareCoords=function(e){var i=this.toJson(),n=!0;return e.type!==i.type?!1:(["x","y","radiusX","radiusY","rotation"].forEach(function(r){Math.round(e[r])!==Math.round(i[r])&&(n=!1)}),n)};ri.prototype.offsetCoords=function(e,i,n){return e.x=e.x+i,e.y=e.y+n,e};ri.prototype.offsetShape=function(e,i){this._x=this._x+e,this._y=this._y+i,this.drawShape()};ri.prototype._handleMousedown=function(){this._selected||this.manager.selectShapes([this])};ri.prototype.setColor=function(e){this._strokeColor=e,this.drawShape()};ri.prototype.getStrokeColor=function(){return this._strokeColor};ri.prototype.setStrokeColor=function(e){this._strokeColor=e,this.drawShape()};ri.prototype.setStrokeWidth=function(e){this._strokeWidth=e,this.drawShape()};ri.prototype.getStrokeWidth=function(){return this._strokeWidth};ri.prototype.setFillColor=function(e){this._fillColor=e,this.drawShape()};ri.prototype.getFillColor=function(){return this._fillColor};ri.prototype.setFillOpacity=function(e){this._fillOpacity=e,this.drawShape()};ri.prototype.getFillOpacity=function(){return this._fillOpacity};ri.prototype.destroy=function(){this.element.remove(),this.handles.remove()};ri.prototype.intersectRegion=function(e){var i=this.manager.regionToPath(e,this._zoomFraction*100),n=this._zoomFraction,r=parseInt(this._x*n,10),o=parseInt(this._y*n,10);if(Ri.isPointInsidePath(i,r,o))return!0;var a=this.getPath(),l=Ri.pathIntersection(i,a);return l.length>0};ri.prototype.getPath=function(){for(var e=this.element.attrs,i=e.radiusX,n=e.radiusY,r=[[e.x-i,e.y-n],[e.x+i,e.y-n],[e.x+i,e.y+n],[e.x-i,e.y+n]],o=[],a=[[[0,1],[1,0]],[[-1,0],[0,1]],[[0,-1],[-1,0]],[[1,0],[0,-1]]],l=0;l<=3;l++){l===0&&o.push(["M",r[0][0],r[0][1]+n]);var h=[r[l][0]+a[l][0][0]*i*.446,r[l][1]+a[l][0][1]*n*.446],g=[r[l][0]+a[l][1][0]*i*.446,r[l][1]+a[l][1][1]*n*.446],_=[r[l][0]+a[l][1][0]*i,r[l][1]+a[l][1][1]*n];o.push(["C",h[0],h[1],g[0],g[1],_[0],_[1]])}return o.push(["Z"]),o=o.join(",").replace(/,?([achlmqrstvxz]),?/gi,"$1"),this._rotation!==0&&(o=Ri.transformPath(o,"r"+this._rotation)),o};ri.prototype.isSelected=function(){return this._selected};ri.prototype.setZoom=function(e){this._zoomFraction=e/100,this.drawShape()};ri.prototype.updateHandle=function(e,i,n,r){this._handleIds=this.getHandleCoords();var o=this._handleIds[e];o.x=i,o.y=n;var a=e==="left"||e==="right";this.updateShapeFromHandles(a,r)};ri.prototype.updateShapeFromHandles=function(e,i){var n=this._handleIds,r=n.end.x-n.start.x,o=n.end.y-n.start.y,a=n.left.x-n.right.x,l=n.left.y-n.right.y,h;r===0?this._rotation=90:r>0?(h=Math.atan(o/r),this._rotation=Ri.deg(h)):r<0&&(h=Math.atan(o/r),this._rotation=180+Ri.deg(h)),this._x=(n.start.x+n.end.x)/2,this._y=(n.start.y+n.end.y)/2,this._radiusX=Math.sqrt(r*r+o*o)/2,e?(this._radiusY=Math.sqrt(a*a+l*l)/2,this._yxRatio=this._radiusY/this._radiusX):(i&&(this._yxRatio=1),this._radiusY=this._yxRatio*this._radiusX),this._area=this._radiusX*this._radiusY*Math.PI,this.drawShape()};ri.prototype.drawShape=function(){var e=this._strokeColor,i=this._strokeWidth,n=this._fillColor,r=this._fillOpacity,o=this._zoomFraction,a=this._x*o,l=this._y*o,h=this._radiusX*o,g=this._radiusY*o;this.element.attr({cx:a,cy:l,rx:h,ry:g,stroke:e,"stroke-width":i,fill:n,"fill-opacity":r}),this.element.transform("r"+this._rotation),this.isSelected()?this.handles.show().toFront():this.handles.hide(),this._handleIds=this.getHandleCoords();for(var _,x,T,M,D=0,F=this.handles.length;D<F;D++)_=this.handles[D],x=_.h_id,T=this._handleIds[x].x*this._zoomFraction,M=this._handleIds[x].y*this._zoomFraction,_.attr({x:T-this.handle_wh/2,y:M-this.handle_wh/2})};ri.prototype.setSelected=function(e){this._selected=!!e,this.drawShape()};ri.prototype.createHandles=function(){this._handleIds=this.getHandleCoords();var e=this,i={stroke:"#4b80f9",fill:"#fff",cursor:"move","fill-opacity":1};e.handles=this.paper.set();var n=function(){return function(D,F,Q,K,Z){D=D/e._zoomFraction,F=F/e._zoomFraction;var ee=D+this.ox,he=F+this.oy;return e.updateHandle(this.h_id,ee,he,Z.shiftKey),!1}},r=function(){return function(){return this.ox=(this.attr("x")+this.attr("width")/2)/e._zoomFraction,this.oy=(this.attr("y")+this.attr("height")/2)/e._zoomFraction,!1}},o=function(){return function(){return e.manager.notifyShapesChanged([e]),!1}},a=this.handle_wh,l,h,g;for(var _ in this._handleIds){if(l=this._handleIds[_].x,h=this._handleIds[_].y,this.Matrix){var x=this.Matrix.toTransformString();x.indexOf("m")>-1&&console.log("Matrix only supports rotation & translation. "+x+" may contain skew for shape: ",this.toJson());var T=this.Matrix.x(l,h),M=this.Matrix.y(l,h);l=T,h=M,this._handleIds[_].x=l,this._handleIds[_].y=h}g=this.paper.rect(l-a/2,h-a/2,a,a),g.attr({cursor:"move"}),g.h_id=_,this.manager.canEdit&&g.drag(n(),r(),o()),e.handles.push(g)}e.handles.attr(i).hide()};ri.prototype.getHandleCoords=function(){var e=Ri.rad(this._rotation),i=this._x,n=this._y,r=this._radiusX,o=this._radiusY,a=i-Math.cos(e)*r,l=n-Math.sin(e)*r,h=i+Math.cos(e)*r,g=n+Math.sin(e)*r,_=i+Math.sin(e)*o,x=n-Math.cos(e)*o,T=i-Math.sin(e)*o,M=n+Math.cos(e)*o;return{start:{x:a,y:l},end:{x:h,y:g},left:{x:_,y:x},right:{x:T,y:M}}};var Ha=function(e){this.paper=e.paper,this.manager=e.manager};Ha.prototype.startDrag=function(e,i){var n=this.manager.getStrokeColor(),r=this.manager.getStrokeWidth(),o=this.manager.getFillColor(),a=this.manager.getFillOpacity(),l=this.manager.getZoom();this.ellipse=new ri({manager:this.manager,paper:this.paper,x:e,y:i,radiusX:0,radiusY:0,area:0,rotation:0,strokeWidth:r,zoom:l,strokeColor:n,fillColor:o,fillOpacity:a})};Ha.prototype.drag=function(e,i,n){this.ellipse.updateHandle("end",e,i,n)};Ha.prototype.stopDrag=function(){var e=this.ellipse.toJson();if(e.radiusX<2){this.ellipse.destroy(),delete this.ellipse;return}this.ellipse.setSelected(!0),this.manager.addShape(this.ellipse)};const xa=5;var si=function(e){var i=this;this.manager=e.manager,this.paper=e.paper,e.id?this._id=e.id:this._id=this.manager.getRandomId(),this._x=e.x,this._y=e.y,this._radiusX=xa,this._radiusY=xa,this._rotation=e.rotation||0,this._radiusX===0||this._radiusY===0?this._yxRatio=.5:this._yxRatio=this._radiusY/this._radiusX,this._strokeColor=e.strokeColor,e.fillColor?this._fillColor=e.fillColor:this._fillColor="#ffffff",e.fillOpacity?this._fillOpacity=e.fillOpacity:this._fillOpacity=0,this._strokeWidth=e.strokeWidth||2,this._selected=!1,this._zoomFraction=1,e.zoom&&(this._zoomFraction=e.zoom/100),e.area?this._area=e.area:this._area=this._radiusX*this._radiusY*Math.PI,this.handle_wh=6,this.element=this.paper.ellipse(),this.element.attr({"fill-opacity":this._fillOpacity,fill:this._fillColor,cursor:"pointer"}),this.manager.canEdit&&this.element.drag(function(r,o){r=r/i._zoomFraction,o=o/i._zoomFraction;var a=r-this.prevX,l=o-this.prevY;return this.prevX=r,this.prevY=o,i.manager.moveSelectedShapes(a,l,!0),!1},function(){return i._handleMousedown(),this.prevX=0,this.prevY=0,!1},function(){return(this.prevX!==0||this.prevY!==0)&&i.manager.notifySelectedShapesChanged(),!1}),this.createHandles();var n=!!this.Matrix;this.updateShapeFromHandles(n),this.drawShape()};si.prototype.toJson=function(){var e={type:"Point",x:this._x,y:this._y,strokeWidth:this._strokeWidth,strokeColor:this._strokeColor,fillColor:this._fillColor,fillOpacity:this._fillOpacity};return this._id&&(e.id=this._id),e};si.prototype.compareCoords=function(e){var i=this.toJson(),n=!0;return e.type!==i.type?!1:(["x","y"].forEach(function(r){Math.round(e[r])!==Math.round(i[r])&&(n=!1)}),n)};si.prototype.offsetCoords=function(e,i,n){return e.x=e.x+i,e.y=e.y+n,e};si.prototype.offsetShape=function(e,i){this._x=this._x+e,this._y=this._y+i,this.drawShape()};si.prototype._handleMousedown=function(){this._selected||this.manager.selectShapes([this])};si.prototype.setColor=function(e){this._strokeColor=e,this.drawShape()};si.prototype.getStrokeColor=function(){return this._strokeColor};si.prototype.setStrokeColor=function(e){this._strokeColor=e,this.drawShape()};si.prototype.setStrokeWidth=function(e){this._strokeWidth=e,this.drawShape()};si.prototype.getStrokeWidth=function(){return this._strokeWidth};si.prototype.getFillColor=function(){return this._fillColor};si.prototype.setFillColor=function(e){this._fillColor=e,this.drawShape()};si.prototype.setFillOpacity=function(e){this._fillOpacity=e,this.drawShape()};si.prototype.getFillOpacity=function(){return this._fillOpacity};si.prototype.destroy=function(){this.element.remove(),this.handles.remove()};si.prototype.intersectRegion=function(e){var i=this.manager.regionToPath(e,this._zoomFraction*100),n=this._zoomFraction,r=parseInt(this._x*n,10),o=parseInt(this._y*n,10);return Ri.isPointInsidePath(i,r,o)};si.prototype.getPath=function(){for(var e=this.element.attrs,i=e.radiusX,n=e.radiusY,r=[[e.x-i,e.y-n],[e.x+i,e.y-n],[e.x+i,e.y+n],[e.x-i,e.y+n]],o=[],a=[[[0,1],[1,0]],[[-1,0],[0,1]],[[0,-1],[-1,0]],[[1,0],[0,-1]]],l=0;l<=3;l++){l===0&&o.push(["M",r[0][0],r[0][1]+n]);var h=[r[l][0]+a[l][0][0]*i*.446,r[l][1]+a[l][0][1]*n*.446],g=[r[l][0]+a[l][1][0]*i*.446,r[l][1]+a[l][1][1]*n*.446],_=[r[l][0]+a[l][1][0]*i,r[l][1]+a[l][1][1]*n];o.push(["C",h[0],h[1],g[0],g[1],_[0],_[1]])}return o.push(["Z"]),o=o.join(",").replace(/,?([achlmqrstvxz]),?/gi,"$1"),this._rotation!==0&&(o=Ri.transformPath(o,"r"+this._rotation)),o};si.prototype.isSelected=function(){return this._selected};si.prototype.setZoom=function(e){this._zoomFraction=e/100,this.drawShape()};si.prototype.updateHandle=function(e,i,n,r){this._handleIds=this.getHandleCoords();var o=this._handleIds[e];o.x=i,o.y=n;var a=e==="left"||e==="right";this.updateShapeFromHandles(a,r)};si.prototype.updateShapeFromHandles=function(e,i){var n=this._handleIds,r=n.end.x-n.start.x,o=n.end.y-n.start.y,a=n.left.x-n.right.x,l=n.left.y-n.right.y,h;r===0?this._rotation=90:r>0?(h=Math.atan(o/r),this._rotation=Ri.deg(h)):r<0&&(h=Math.atan(o/r),this._rotation=180+Ri.deg(h)),this._x=(n.start.x+n.end.x)/2,this._y=(n.start.y+n.end.y)/2,this._radiusX=Math.sqrt(r*r+o*o)/2,e?(this._radiusY=Math.sqrt(a*a+l*l)/2,this._yxRatio=this._radiusY/this._radiusX):(i&&(this._yxRatio=1),this._radiusY=this._yxRatio*this._radiusX),this._area=this._radiusX*this._radiusY*Math.PI,this.drawShape()};si.prototype.drawShape=function(){var e=this._strokeColor,i=this._strokeWidth,n=this._fillColor,r=this._fillOpacity,o=this._zoomFraction,a=this._x*o,l=this._y*o,h=this._radiusX*o,g=this._radiusY*o;this.element.attr({cx:a,cy:l,rx:h,ry:g,stroke:e,"stroke-width":i,fill:n,"fill-opacity":r}),this.element.transform("r"+this._rotation),this.isSelected()?this.handles.show().toFront():this.handles.hide(),this._handleIds=this.getHandleCoords();for(var _,x,T,M,D=0,F=this.handles.length;D<F;D++)_=this.handles[D],x=_.h_id,T=this._handleIds[x].x*this._zoomFraction,M=this._handleIds[x].y*this._zoomFraction,_.attr({x:T-this.handle_wh/2,y:M-this.handle_wh/2})};si.prototype.setSelected=function(e){this._selected=!!e,this.drawShape()};si.prototype.createHandles=function(){this._handleIds=this.getHandleCoords();var e=this,i={stroke:"#4b80f9",fill:"#fff",cursor:"default","fill-opacity":1};e.handles=this.paper.set();var n=this.handle_wh,r,o,a;for(var l in this._handleIds)r=this._handleIds[l].x,o=this._handleIds[l].y,a=this.paper.rect(r-n/2,o-n/2,n,n),a.attr({cursor:"move"}),a.h_id=l,a.line=e,e.handles.push(a);e.handles.attr(i).hide()};si.prototype.getHandleCoords=function(){let e=2;var i=Ri.rad(this._rotation),n=this._x,r=this._y,o=this._radiusX+e,a=this._radiusY+e,l=n-Math.cos(i)*o,h=r-Math.sin(i)*o,g=n+Math.cos(i)*o,_=r+Math.sin(i)*o,x=n+Math.sin(i)*a,T=r-Math.cos(i)*a,M=n-Math.sin(i)*a,D=r+Math.cos(i)*a;return{start:{x:l,y:h},end:{x:g,y:_},left:{x,y:T},right:{x:M,y:D}}};var ja=function(e){this.paper=e.paper,this.manager=e.manager};ja.prototype.startDrag=function(e,i){var n=this.manager.getStrokeColor(),r=this.manager.getStrokeWidth(),o=this.manager.getFillColor(),a=this.manager.getFillOpacity(),l=this.manager.getZoom();this.point=new si({manager:this.manager,paper:this.paper,x:e,y:i,radiusX:xa,radiusY:xa,area:0,rotation:0,strokeWidth:r,zoom:l,strokeColor:n,fillColor:o,fillOpacity:a})};ja.prototype.drag=function(e,i,n){};ja.prototype.stopDrag=function(){var e=this.point.toJson();if(e.radiusX<2){this.point.destroy(),delete this.ellipse;return}this.point.setSelected(!0),this.manager.addShape(this.point)};var li=function(e){var i=this;this.manager=e.manager,this.paper=e.paper,e.id?this._id=e.id:this._id=this.manager.getRandomId(),this._points=e.points,this._bbox=this.getBBox(this._points),this._area=Math.abs((this._bbox.x2-this._bbox.x1)*(this._bbox.y2-this._bbox.y1)),this._strokeColor=e.strokeColor,e.fillColor?this._fillColor=e.fillColor:this._fillColor="#ffffff",e.fillOpacity?this._fillOpacity=e.fillOpacity:this._fillOpacity=0,this._strokeWidth=e.strokeWidth||2,this._selected=!1,this._zoomFraction=1,e.zoom&&(this._zoomFraction=e.zoom/100),this.handle_wh=6,this.element=this.paper.path(""),this.element.attr({"fill-opacity":this._fillOpacity,fill:this._fillColor,cursor:"pointer"}),this.manager.canEdit&&this.element.drag(function(n,r){if(i._zoomFraction!==0){n=n/i._zoomFraction,r=r/i._zoomFraction;var o=n-this.prevX,a=r-this.prevY;this.prevX=n,this.prevY=r,i.manager.moveSelectedShapes(o,a,!0)}},function(){return i._handleMousedown(),this.prevX=0,this.prevY=0,!1},function(){return(this.prevX!==0||this.prevY!==0)&&i.manager.notifySelectedShapesChanged(),!1}),this.createHandles(),this.drawShape()};li.prototype.getBBox=function(e){var i=e.split(" "),n=[],r=[];return i.forEach(function(o){var a=o.split(",");n.push(parseInt(a[0])),r.push(parseInt(a[1]))}),{x1:Math.min(...n),x2:Math.max(...n),y1:Math.min(...r),y2:Math.max(...r)}};li.prototype.toJson=function(){var e={type:"Polygon",points:this._points,area:this._area,strokeWidth:this._strokeWidth,strokeColor:this._strokeColor,fillColor:this._fillColor,fillOpacity:this._fillOpacity};return this._id&&(e.id=this._id),e};li.prototype.compareCoords=function(e){var i=this.toJson();return e.type!==i.type?!1:e.points===i.points};li.prototype.offsetCoords=function(e,i,n){return e.points=e.points.split(" ").map(function(r){return r.split(",").map(function(o,a){return parseFloat(o,10)+[i,n][a]}).join(",")}).join(" "),e};li.prototype.offsetShape=function(e,i){var n=this._points.split(" ").map(function(r){return r.split(",").map(function(o,a){return parseFloat(o,10)+[e,i][a]}).join(",")}).join(" ");this._points=n,this.drawShape()};li.prototype._handleMousedown=function(){this._selected||this.manager.selectShapes([this])};li.prototype.setColor=function(e){this._strokeColor=e,this.drawShape()};li.prototype.getStrokeColor=function(){return this._strokeColor};li.prototype.setStrokeColor=function(e){this._strokeColor=e,this.drawShape()};li.prototype.setStrokeWidth=function(e){this._strokeWidth=e,this.drawShape()};li.prototype.getStrokeWidth=function(){return this._strokeWidth};li.prototype.setFillColor=function(e){this._fillColor=e,this.drawShape()};li.prototype.getFillColor=function(){return this._fillColor};li.prototype.setFillOpacity=function(e){this._fillOpacity=e,this.drawShape()};li.prototype.getFillOpacity=function(){return this._fillOpacity};li.prototype.destroy=function(){this.element.remove(),this.handles.remove()};li.prototype.intersectRegion=function(e){var i=this._points.split(" ").reduce(function(n,r){var o=parseInt(r.split(",")[0],10),a=parseInt(r.split(",")[1],10);return n?(n.min_x=Math.min(n.min_x,o),n.min_y=Math.min(n.min_y,a),n.max_x=Math.max(n.max_x,o),n.max_y=Math.max(n.max_y,a)):n={min_x:o,min_y:a,max_x:o,max_y:a},n},void 0);return!(i.min_x>e.x+e.width||i.min_y>e.y+e.height||i.max_x<e.x||i.max_y<e.y)};li.prototype.getPath=function(){var e=this._zoomFraction,i=this._points.split(" ").map(function(n){return n.split(",").map(function(r){return parseInt(r,10)*e}).join(",")}).join("L");return i="M"+i+"Z",i};li.prototype.isSelected=function(){return this._selected};li.prototype.setZoom=function(e){this._zoomFraction=e/100,this.drawShape()};li.prototype.updateHandle=function(e,i,n,r){var o=this._points.split(" ");o[e]=i+","+n,this._points=o.join(" "),i<this._bbox.x1&&(this._bbox.x1=i),i>this._bbox.x2&&(this._bbox.x2=i),n<this._bbox.y1&&(this._bbox.y1=n),n>this._bbox.y2&&(this._bbox.y2=n),this._area=Math.abs((this._bbox.x2-this._bbox.x1)*(this._bbox.y2-this._bbox.y1))};li.prototype.drawShape=function(){var e=this._strokeColor,i=this._strokeWidth,n=this._fillColor,r=this._fillOpacity;this._zoomFraction;var o=this.getPath();this.element.attr({path:o,stroke:e,"stroke-width":i,fill:n,"fill-opacity":r}),this.isSelected()?this.handles.show().toFront():this.handles.hide();var a,l,h;this._points.split(" ").forEach((function(x,_){var x=x.split(",");l=parseInt(x[0])*this._zoomFraction,h=parseInt(x[1])*this._zoomFraction,a=this.handles[_],a.attr({x:l-this.handle_wh/2,y:h-this.handle_wh/2})}).bind(this))};li.prototype.setSelected=function(e){this._selected=!!e,this.drawShape()};li.prototype.createHandles=function(){var e=this,i={stroke:"#4b80f9",fill:"#fff",cursor:"move","fill-opacity":1};e.handles=this.paper.set();var n=function(){return function(_,x,T,M,D){_=_/e._zoomFraction,x=x/e._zoomFraction;var F=_+this.ox,Q=x+this.oy;return e.updateHandle(this.h_id,F,Q,D.shiftKey),e.drawShape(),!1}},r=function(){return function(){return this.ox=(this.attr("x")+this.attr("width")/2)/e._zoomFraction,this.oy=(this.attr("y")+this.attr("height")/2)/e._zoomFraction,!1}},o=function(){return function(){return e.manager.notifyShapesChanged([e]),!1}},a=this.handle_wh,l,h,g;this._points.split(" ").forEach(function(T,x){var T=T.split(",");l=parseInt(T[0]),h=parseInt(T[1]),g=e.paper.rect(l-a/2,h-a/2,a,a),g.attr({cursor:"move"}),g.h_id=x,e.manager.canEdit&&g.drag(n(),r(),o()),e.handles.push(g)}),e.handles.attr(i).hide()};var Sm=function(e){var i=new li(e),n=i.toJson;i.toJson=function(){var a=n.call(i);return a.type="Polyline",a};var r=i.getPath;return i.getPath=function(){var a=r.call(i);return a.replace("Z","")},i.drawShape(),i},It=function(e,i,n,r){var o=this;r=r||{},this.STATES=["SELECT","RECT","LINE","ARROW","ELLIPSE","POLYGON","POINT"],this._state="SELECT",this._strokeColor="#ff0000",this._strokeWidth=2,this._fillColor="#ffffff",this._fillOpacity=0,this._orig_width=i,this._orig_height=n,this._zoom=100,this.canEdit=!r.readOnly,this.paper=Ri(e,i,n),this.$el=C("#"+e),this._shapes=[],this.newShapeBg=this.paper.rect(0,0,i,n),this.newShapeBg.attr({fill:"#000","fill-opacity":.01,"stroke-width":0,cursor:"default"}),this.selectRegion=this.paper.rect(0,0,i,n),this.selectRegion.hide().attr({stroke:"#ddd","stroke-width":0,"stroke-dasharray":"- "}),this.canEdit?(this.newShapeBg.drag(function(){o.drag.apply(o,arguments)},function(){o.startDrag.apply(o,arguments)},function(){o.stopDrag.apply(o,arguments)}),this.shapeFactories={RECT:new Wa({manager:this,paper:this.paper}),ELLIPSE:new Ha({manager:this,paper:this.paper}),LINE:new Ro({manager:this,paper:this.paper}),ARROW:new Em({manager:this,paper:this.paper}),POINT:new ja({manager:this,paper:this.paper})},this.createShape=this.shapeFactories.LINE):this.shapeFactories={}};It.prototype.startDrag=function(e,i,n){this.clearSelectedShapes();var r=this.$el.offset(),o=e-r.left,a=i-r.top;if(this.getState()==="SELECT")this._dragStart={x:o,y:a},this.selectRegion.attr({x:o,y:a,width:0,height:0}),this.selectRegion.toFront().show();else{var l=this._zoom/100;o=o/l,a=a/l,this.createShape.startDrag(o,a)}this.newShapeBg.toFront()};It.prototype.drag=function(e,i,n,r,o){var a=this.$el.offset(),l=n-a.left,h=r-a.top;if(this.getState()==="SELECT")e=this._dragStart.x-l,i=this._dragStart.y-h,this.selectRegion.attr({x:Math.min(l,this._dragStart.x),y:Math.min(h,this._dragStart.y),width:Math.abs(e),height:Math.abs(i)});else{var g=this._zoom/100,_=o.shiftKey;l=l/g,h=h/g,this.createShape.drag(l,h,_)}};It.prototype.stopDrag=function(e,i,n){if(this.getState()==="SELECT"){var r=this.selectRegion.attr(),o=this._zoom/100,a=r.x/o,l=r.y/o,h=r.width/o,g=r.height/o;this.selectShapesByRegion({x:a,y:l,width:h,height:g}),this.selectRegion.hide(),this.newShapeBg.toBack()}else this.createShape.stopDrag()};It.prototype.setState=function(e){if(this.STATES.indexOf(e)===-1){console.log("Invalid state: ",e,"Needs to be in",this.STATES);return}var i=["RECT","LINE","ARROW","ELLIPSE","POLYGON","POINT"];i.indexOf(e)>-1?(this.newShapeBg.toFront(),this.newShapeBg.attr({cursor:"crosshair"}),this.clearSelectedShapes(),this.shapeFactories[e]&&(this.createShape=this.shapeFactories[e])):e==="SELECT"&&(this.newShapeBg.toBack(),this.newShapeBg.attr({cursor:"default"})),this._state=e};It.prototype.getState=function(){return this._state};It.prototype.setZoom=function(e){this._zoom=e;var i=this._orig_width*e/100,n=this._orig_height*e/100;this.paper.setSize(i,n),this.paper.canvas.setAttribute("viewBox","0 0 "+i+" "+n),this.newShapeBg.attr({width:i,height:n}),this._shapes.forEach(function(r){r.setZoom(e)})};It.prototype.getZoom=function(e){return this._zoom};It.prototype.setStrokeColor=function(e){this._strokeColor=e;for(var i=this.getSelectedShapes(),n=0;n<i.length;n++)i[n].setStrokeColor(e)};It.prototype.getStrokeColor=function(){return this._strokeColor};It.prototype.setStrokeWidth=function(e){e=parseFloat(e,10),this._strokeWidth=e;for(var i=this.getSelectedShapes(),n=0;n<i.length;n++)i[n].setStrokeWidth(e)};It.prototype.getStrokeWidth=function(){return this._strokeWidth};It.prototype.getFillColor=function(){return this._fillColor};It.prototype.setFillColor=function(e){this._fillColor=e;for(var i=this.getSelectedShapes(),n=0;n<i.length;n++)i[n].setFillColor(e)};It.prototype.getFillOpacity=function(){return this._fillOpacity};It.prototype.setFillOpacity=function(i){var i=parseFloat(i,10).toFixed(1);i==0&&(i=.01),this._fillOpacity=i;for(var n=this.getSelectedShapes(),r=0;r<n.length;r++)n[r].setFillOpacity(i)};It.prototype.getShapesJson=function(){var e=[];return this.getShapes().forEach(function(i){e.push(i.toJson())}),e};It.prototype.setShapesJson=function(e){this.deleteAllShapes();var i=this;e.forEach(function(n){i.addShapeJson(n)})};It.prototype.regionToPath=function(e,i){var n=i?i/100:this._zoom/100,r=parseInt(e.x*n,10),o=parseInt(e.y*n,10),a=parseInt(e.width*n,10),l=parseInt(e.height*n,10);return[["M"+r+","+o],["L"+(r+a)+","+o],["L"+(r+a)+","+(o+l)],["L"+r+","+(o+l)+"Z"]].join(",")};It.prototype.findShapeAtCoords=function(e){for(var i=this.getShapes(),n=0;n<i.length;n++)if(i[n].compareCoords(e))return i[n];return!1};It.prototype.pasteShapesJson=function(e,i){var n=this,r=[],o=!0;return e.forEach(function(a){var l=n.createShapeJson(a);a=l.toJson(),l.destroy();for(var h=n.findShapeAtCoords(a);h;)a=C.extend({},a),a=h.offsetCoords(a,20,10),h=n.findShapeAtCoords(a);var g=n.addShapeJson(a,i);g?r.push(g):o=!1}),this.selectShapes(r),o};It.prototype.addShapesJson=function(e,i){var n=!0;return e.forEach((function(r){var o=this.addShapeJson(r,i);o||(n=!1)}).bind(this)),n};It.prototype.addShapeJson=function(e,i){var n=this.createShapeJson(e);if(n)return i&&(typeof i=="boolean"&&(i={x:0,y:0,width:this._orig_width,height:this._orig_height}),!n.intersectRegion(i))?(n.destroy(),!1):(this._shapes.push(n),this.sortShape(this._shapes),n)};It.prototype.createShapeJson=function(e){var i=e,n,r=i.strokeColor||this.getStrokeColor(),o=i.fillColor||this.getFillColor(),a=i.fillOpacity==null?this.getFillOpacity():i.fillOpacity,l=i.strokeWidth||this.getStrokeWidth(),h=this.getZoom(),g={manager:this,paper:this.paper,strokeWidth:l,zoom:h,strokeColor:r,fillColor:o,fillOpacity:parseFloat(a).toFixed(1)};return e.id&&(g.id=e.id),i.type==="Ellipse"?(g.x=i.x,g.y=i.y,g.radiusX=i.radiusX,g.radiusY=i.radiusY,g.rotation=i.rotation||0,g.transform=i.transform,g.area=i.radiusX*i.radiusY*Math.PI,n=new ri(g)):i.type==="Point"?(g.x=i.x,g.y=i.y,g.area=0,n=new si(g)):i.type==="Rectangle"?(g.x=i.x,g.y=i.y,g.width=i.width,g.height=i.height,g.area=i.width*i.height,g.rotation=i.rotation,n=new ai(g)):i.type==="Line"?(g.x1=i.x1,g.y1=i.y1,g.x2=i.x2,g.y2=i.y2,g.area=Math.abs((i.x2-i.x1)*(i.y2-i.y1)),n=new ei(g)):i.type==="Arrow"?(g.x1=i.x1,g.y1=i.y1,g.x2=i.x2,g.y2=i.y2,g.area=Math.abs((i.x2-i.x1)*(i.y2-i.y1)),n=new Nh(g)):i.type==="Polygon"?(g.points=i.points,n=new li(g)):i.type==="Polyline"&&(g.points=i.points,n=new Sm(g)),n};It.prototype.addShape=function(e){this._shapes.push(e),this.sortShape(this._shapes),this.$el.trigger("new:shape",[e])};It.prototype.sortShape=function(e){e.sort(function(i,n){var r=i._area,o=n._area;return r==null&&(r=Number.MAX_SAFE_INTEGER),o==null&&(o=Number.MAX_SAFE_INTEGER),r<o?-1:r>o?1:0}),e.reverse().forEach(function(i){i.element.toFront()}),this.state!="SELECT"&&this.newShapeBg.toFront()};It.prototype.getShapes=function(){return this._shapes};It.prototype.getShape=function(e){for(var i=this.getShapes(),n=0;n<i.length;n++)if(i[n]._id===e)return i[n]};It.prototype.getSelectedShapes=function(){for(var e=[],i=this.getShapes(),n=0;n<i.length;n++)i[n].isSelected()&&e.push(i[n]);return e};It.prototype.getSelectedShapesJson=function(){var e=[];return this.getShapes().forEach(function(i){i.isSelected()&&e.push(i.toJson())}),e};It.prototype.getShapeBoundingBox=function(e){var i=this.getShape(e),n=i.element.getBBox(),r=this.getZoom()/100;return{x:n.x/r,y:n.y/r,width:n.width/r,height:n.height/r}};It.prototype.moveSelectedShapes=function(e,i,n){this.getSelectedShapes().forEach(function(r){r.offsetShape(e,i)})};It.prototype.deleteAllShapes=function(){this.getShapes().forEach(function(e){e.destroy()}),this._shapes=[],this.$el.trigger("change:selected")};It.prototype.deleteShapesByIds=function(e){var i=[];this.getShapes().forEach(function(n){e.indexOf(n._id)>-1?n.destroy():i.push(n)}),this._shapes=i,this.$el.trigger("change:selected")};It.prototype.deleteSelectedShapes=function(){var e=[];this.getShapes().forEach(function(i){i.isSelected()?i.destroy():e.push(i)}),this._shapes=e,this.$el.trigger("change:selected")};It.prototype.selectShapesById=function(e){this.clearSelectedShapes(!0);var i=[];this.getShapes().forEach(function(n){n.toJson().id===e&&i.push(n)}),this.selectShapes(i)};It.prototype.clearSelectedShapes=function(e){for(var i=0;i<this._shapes.length;i++)this._shapes[i].setSelected(!1);e||this.$el.trigger("change:selected")};It.prototype.selectShapesByRegion=function(e){this.clearSelectedShapes(!0);var i=[];this.getShapes().forEach(function(n){n.intersectRegion(e)&&i.push(n)}),this.selectShapes(i)};It.prototype.selectAllShapes=function(e){this.selectShapes(this.getShapes())};It.prototype.selectShapes=function(e){var i,n,r,o;this.clearSelectedShapes(!0),e.forEach(function(a,l){typeof a=="number"&&(a=this.getShape(a)),a&&(i===void 0?i=a.getStrokeColor():i!==a.getStrokeColor()&&(i=!1),r===void 0?r=a.getFillColor():r!==a.getFillColor()&&(r=!1),n===void 0?n=a.getStrokeWidth():n!==a.getStrokeWidth()&&(n=!1),o===void 0?o=a.getFillOpacity():o!==a.getFillOpacity()&&(o=!1),a.setSelected(!0))}),i&&(this._strokeColor=i),n&&(this._strokeWidth=n),r&&(this._fillColor=r),o&&(this._fillOpacity=o),this.$el.trigger("change:selected")};It.prototype.notifySelectedShapesChanged=function(){this.notifyShapesChanged(this.getSelectedShapes())};It.prototype.notifyShapesChanged=function(e){this.sortShape(this._shapes),this.$el.trigger("change:shape",[e])};It.prototype.getRandomId=function(){var e=Math.random()+"";return-parseInt(e.slice(2),10)};const Tm=`

<div class="btn-group me-2 shape-option" role="group" aria-label="...">
    <button type="button" data-state="SELECT"
        class="btn btn-outline-secondary <% if (state==='SELECT')print('pressed') %>">
        <span class="glyphicon select-icon"></span></button>
</div>


<div class="btn-group me-2 shape-option" role="group" aria-label="...">
    <button type="button" class="btn btn-outline-secondary <% if (state==='RECT')print('pressed') %>"
            title="Rectangle" data-state="RECT">
        <span class="glyphicon rect-icon"></span></button>
    <button type="button" class="btn btn-outline-secondary <% if (state==='LINE')print('pressed') %>"
            title="Line" data-state="LINE">
        <span class="glyphicon line-icon"></span></button>
    <button type="button" class="btn btn-outline-secondary <% if (state==='ARROW')print('pressed') %>"
            title="Arrow" data-state="ARROW">
        <span class="glyphicon arrow-icon"></span></button>
    <button type="button" class="btn btn-outline-secondary <% if (state==='ELLIPSE')print('pressed') %>"
            title="Ellipse" data-state="ELLIPSE">
        <span class="glyphicon ellipse-icon"></span></button>
    <button type="button" class="btn btn-outline-secondary <% if (state==='POINT')print('pressed') %>"
            title="Point" data-state="POINT">
        <span class="glyphicon point-icon"></span></button>
</div>


<div class="btn-group me-2">
    <button type="button" class="shape-color btn btn-outline-secondary dropdown-toggle" title="Shape Color"
        data-bs-toggle="dropdown">
        <span data-color="<%= color %>" style="background-color:#<%= color %>">&nbsp &nbsp &nbsp</span>
        <span class="caret"></span>
    </button>
    <ul class="dropdown-menu dropdownSelect colorpicker" role="menu">
        <li><a class="dropdown-item" href="#">
            <span data-color="000000" style="background-color:#000">&nbsp &nbsp &nbsp</span>&nbsp Black
        </a></li>
        <li><a class="dropdown-item" href="#">
            <span data-color="0000FF" style="background-color:#00f">&nbsp &nbsp &nbsp</span>&nbsp Blue
        </a></li>
        <li><a class="dropdown-item" href="#">
            <span data-color="00FF00" style="background-color:#0f0">&nbsp &nbsp &nbsp</span>&nbsp Green
        </a></li>
        <li><a class="dropdown-item" href="#">
            <span data-color="FF0000" style="background-color:#f00">&nbsp &nbsp &nbsp</span>&nbsp Red
        </a></li>
        <li><a class="dropdown-item" href="#">
            <span data-color="FFFF00" style="background-color:#ff0">&nbsp &nbsp &nbsp</span>&nbsp Yellow
        </a></li>
        <li><a class="dropdown-item" href="#">
            <span data-color="FFFFFF" style="background-color:#fff">&nbsp &nbsp &nbsp</span>&nbsp White
        </a></li>
        <li><a class="dropdown-item" href="#">
            <span data-color="FF00FF" style="background-color:#f0f">&nbsp &nbsp &nbsp</span>&nbsp Magenta
        </a></li>
        <li><a class="dropdown-item" href="#">
            <span data-color="00FFFF" style="background-color:#0ff">&nbsp &nbsp &nbsp</span>&nbsp Cyan
        </a></li>
        <li class="dropdown-divider"></li>
        <li><a class="dropdown-item" data-color="colorpicker" data-oldcolor="<%= color %>" href="#">
            <span class="colorpickerOption">&nbsp &nbsp &nbsp</span>&nbsp More Colors...
        </a></li>
    </ul>
</div>

<div class="btn-group me-2">
    <button type="button" class="line-width btn btn-outline-secondary dropdown-toggle" title="Line Width: <%= lineWidth %>"
        data-bs-toggle="dropdown">
        <span data-line-width="<%= lineWidth %>"><%= lineWidth %> pt</span>
        <span class="caret"></span>
    </button>
    <ul class="dropdown-menu dropdownSelect lineWidth" style="min-width: 0" role="menu">
        <% _.each(lineWidths,function(p){ %>
            <li><a class="dropdown-item" href='#'><span data-line-width='<%= p %>'><%= p %> pt</span></a></li>
        <% }); %>
    </ul>
</div>

<div class="btn-group me-2">
    <button type="button" class="fill-color btn btn-outline-secondary dropdown-toggle" title="Fill Color"
        data-bs-toggle="dropdown">
        <span data-fill-color="<%= fillColor %>" style="background-color:#<%= fillColor %>">&nbsp &nbsp &nbsp</span>
        <span class="caret"></span>
    </button>
    <ul class="dropdown-menu dropdownSelect colorpicker" role="menu">
        <li><a class="dropdown-item" href="#">
            <span data-fill-color="000000" style="background-color:#000">&nbsp &nbsp &nbsp</span>&nbsp Black
        </a></li>
        <li><a class="dropdown-item" href="#">
            <span data-fill-color="0000FF" style="background-color:#00f">&nbsp &nbsp &nbsp</span>&nbsp Blue
        </a></li>
        <li><a class="dropdown-item" href="#">
            <span data-fill-color="00FF00" style="background-color:#0f0">&nbsp &nbsp &nbsp</span>&nbsp Green
        </a></li>
        <li><a class="dropdown-item" href="#">
            <span data-fill-color="FF0000" style="background-color:#f00">&nbsp &nbsp &nbsp</span>&nbsp Red
        </a></li>
        <li><a class="dropdown-item" href="#">
            <span data-fill-color="FFFF00" style="background-color:#ff0">&nbsp &nbsp &nbsp</span>&nbsp Yellow
        </a></li>
        <li><a class="dropdown-item" href="#">
            <span data-fill-color="FFFFFF" style="background-color:#fff">&nbsp &nbsp &nbsp</span>&nbsp White
        </a></li>
        <li><a class="dropdown-item" href="#">
            <span data-fill-color="FF00FF" style="background-color:#f0f">&nbsp &nbsp &nbsp</span>&nbsp Magenta
        </a></li>
        <li><a class="dropdown-item" href="#">
            <span data-fill-color="00FFFF" style="background-color:#0ff">&nbsp &nbsp &nbsp</span>&nbsp Cyan
        </a></li>
        <li class="dropdown-divider"></li>
        <li><a class="dropdown-item" data-fill-color="colorpicker" data-oldcolor="<%= fillColor %>" href="#">
            <span class="colorpickerOption">&nbsp &nbsp &nbsp</span>&nbsp More Colors...
        </a></li>
    </ul>
</div>

<div class="btn-group me-2">
    <button type="button" class="fill-opacity btn btn-outline-secondary dropdown-toggle" title="Fill opacity: <%= opacity %>"
        data-bs-toggle="dropdown">
        <span data-fill-opacity="<%= opacity %>"><%= opacity %></span>
        <span class="caret"></span>
    </button>
    <ul class="dropdown-menu dropdownSelect opacity" style="min-width: 0" role="menu">
        <% _.each(opacities,function(p){ %>
            <li><a class="dropdown-item" href='#'><span data-fill-opacity='<%= p %>'><%= p %></span></a></li>
        <% }); %>
    </ul>
</div>

<div class="btn-group me-2">
    <button type="button" class="line-width btn btn-outline-secondary dropdown-toggle" title="Delete, Copy, Paste etc"
        data-bs-toggle="dropdown">
        <span>Edit</span>
        <span class="caret"></span>
    </button>
    <ul class="dropdown-menu" role="menu">
        <li <% if (!sel) print('class="disabled"') %> >
            <a class="dropdown-item copyShape" href="#">
                Copy Shape   &nbsp&nbsp&nbsp <%= cmdKey %>C
            </a>
        </li>
        <li <% if (!toPaste) print('class="disabled"') %> >
            <a class="dropdown-item pasteShape" href="#">
                Paste Shape   &nbsp&nbsp&nbsp <%= cmdKey %>V
            </a>
        </li>
        <li <% if (!sel) print('class="disabled"') %> >
            <a class="dropdown-item deleteShape" href="#">
                Delete Shape    &nbsp&nbsp&nbsp Del
            </a>
        </li>
        <li>
            <a class="dropdown-item selectAll" href="#">
                Select All Shapes    &nbsp&nbsp <%= cmdKey %>A
            </a>
        </li>
    </ul>
</div>

<div style="flex: auto 1 1"></div>

<div class="btn-group me-2" style="float: right"
    <% if (omeroRoiCount > 0) { %>
        title="Load <%=omeroRoiCount%> ROIs from OMERO"
    <% } else { %>
        title="This image has no ROIs on the OMERO server"
    <% } %>>
    <button class="loadRois btn btn-success"
        <% if (omeroRoiCount == 0) { %>
            disabled='disabled'
        <% } %>
    >
        <% if (roisLoaded) {%>
            Refresh ROIs
        <% } else { %>
            Load ROIs
        <% } %>
    </button>
</div>
`,km=`
<span class="badge text-bg-secondary" style="font-size: 12px">Z: <%= theZ + 1 %></span>
<% if (theZ != origZ) { %>
    <button type="button" class="revert_theZ btn btn-success btn-xs">Revert to Z: <%= origZ + 1 %></button>
<% } %>
<span class="badge text-bg-secondary" style="font-size: 12px">T: <%= theT +1 %></span>
<% if (theT != origT) { %>
    <button type="button" class="revert_theT btn btn-success btn-xs">Revert to T: <%= origT + 1 %></button>
<% } %>
`,Cm=`
<tr>
    <th></th>
    <th></th>
    <th>Z</th>
    <th>T</th>
    <th></th>
</tr>
<% _.each(rois, function(roi) { %>

<tr class="roiModalRoiItem"
        data-roiId="<%= roi.id %>"
        <% if (!roi.shapes[0].icon) { %>
            title="<%= roi.shapes[0].type %> not supported in OMERO.figure"
        <% } %>
        <% if (roi.shapes.length === 1) { %>
            data-shapeId="<%= roi.shapes[0].id %>"
            title="<%= roi.shapes[0].tooltip %>"
        <% } %>
        >
    <td>
        <% if (roi.shapes.length > 1) { %>
            <i class="toggleRoi bi bi-play-fill"></i>
        <% } %>
    </td>
    <td>
        <span class="glyphicon <% if (roi.shapes[0].icon) { %><%= roi.icon %><% } %>"></span>
    </td>

    <td style="padding-left: 0; padding-right: 0">
        <% if (roi.minZ !== undefined) { %>
            <%= roi.minZ + 1 %><% if (roi.maxZ !== roi.minZ) print("-" + (roi.maxZ + 1)); %>
        <% } %>
    </td>
    <td style="padding-left: 0; padding-right: 0">
        <% if (roi.minT !== undefined) { %>
            <%= roi.minT + 1 %><% if (roi.maxT !== roi.minT) print("-" + (roi.maxT + 1)); %>
        <% } %>
    </td>
    <td style="padding: 4px;">
        <% if (roi.shapes.length === 1 && roi.shapes[0].icon) { %>
        <button type="button" class="addOmeroShape btn btn-success btn-sm"
                title="Add Shape to image">
            Add
        </button>
        <% } %>
    </td>
</tr>

<% }) %>
`,Am=`

<% if (shapes.length > 1) { %>
    <% _.each(shapes, function(shape) { %>
    <tr class="roiModalRoiItem shape" data-shapeId="<%= shape.id %>"
        title="<%= shape.tooltip %>"
        <% if (!shape.icon) { %>title="<%= shape.type %> not supported in OMERO.figure"<% } %>
        >
        <td></td>
        <td>
            <span class="glyphicon <% if (shape.icon) { %><%= shape.icon %><% } %>"></span>
        </td>
        <td>
            <% if (shape.theZ !== undefined) { %>
                <%= shape.theZ + 1 %>
            <% } %>
        </td>
        <td>
            <% if (shape.theT !== undefined) { %>
                <%= shape.theT + 1 %>
            <% } %>
        </td>
        <td>
            <% if (shape.icon) { %>
            <button type="button" class="addOmeroShape btn btn-success btn-sm"
                    title="Add Shape to image">
                Add
            </button>
            <% } else { %>
                <span>
                    <%= shape.type %>
                </span>
            <% } %>
        </td>
    </tr>
    <% }) %>
<% } %>
`;var Im=ft.View.extend({tagName:"tbody",template:$e.template(Cm),shapeTemplate:$e.template(Am),initialize:function(t){this.render=$e.debounce(this.render),this.totalCount=t.totalCount,this.panel=t.panel,this.listenTo(this.collection,"add",this.render)},events:{"mouseover .roiModalRoiItem":"mouseoverRoiItem","mouseout .roiModalRoiItem":"mouseoutRoiItem","click .roiModalRoiItem":"clickRoiItem","click .addOmeroShape":"addOmeroShape"},roiIcons:{Rectangle:"rect-icon",Ellipse:"ellipse-icon",Line:"line-icon",Arrow:"arrow-icon",Polygon:"polygon-icon",Point:"point-icon",Polyline:"polyline-icon"},addOmeroShape:function(t){for(var e=C(t.target);!e.hasClass("roiModalRoiItem");)e=e.parent();if(e.attr("data-shapeId")){var i=parseInt(e.attr("data-shapeId"),10),n=this.collection.getShape(i),r=n.toJSON();this.collection.trigger("shape_add",[r])}},removeShapes:function(t){var e=this.collection.get(t).toJSON();e.shapes.forEach(i=>{C(".roiModalRoiItem[data-shapeId='"+i.id+"']",this.$el).remove()})},renderShapes:function(t){var e=this.collection.get(t),i=e.shapes.map((function(r){var o=r.toJSON();return o.tooltip=this.getTooltip(o),o.icon=this.roiIcons[o.type],o}).bind(this)),n=this.shapeTemplate({shapes:i});C(".roiModalRoiItem[data-roiId='"+t+"']",this.$el).after(n)},clickRoiItem:function(t){for(var e=C(t.target);!e.hasClass("roiModalRoiItem");)e=e.parent();if(e.attr("data-shapeId")){var i=parseInt(e.attr("data-shapeId"),10),n=this.collection.getShape(i),r=n.toJSON();this.collection.trigger("shape_click",[r])}else{var o=parseInt(e.attr("data-roiId"),10),a=C(".toggleRoi",e).toggleClass("rotate90");a.hasClass("rotate90")?this.renderShapes(o):this.removeShapes(o)}},mouseoverRoiItem:function(t){for(var e=C(t.target);!e.hasClass("roiModalRoiItem");)e=e.parent();var i=parseInt(e.attr("data-shapeId"),10);this.collection.selectShape(i)},mouseoutRoiItem:function(t){this.collection.selectShape()},getTooltip:function(t){var e=[];return t.type==="Rectangle"?e=["x","y","width","height"]:t.type==="Ellipse"?e=["x","y","radiusX","radiusY"]:(t.type==="Line"||t.type=="Arrow")&&(e=["x1","y1","x2","y2"]),e=e.map(function(i){return i+": "+t[i]}),"ID: "+t.id+" "+e.join(" ")},render:function(){var t=this.collection;this.newPlaneCount=0;var e=t.map((function(n){var r={id:n.get("id"),shapes:[]},o,a=0,l,h=0;if(n.shapes&&n.shapes.length>0)r.shapes=n.shapes.map((function(g){var _=g.convertOMEROShape();return _.icon=this.roiIcons[_.type],_.theZ!==void 0&&(l===void 0?l=_.theZ:l=Math.min(l,_.theZ),h=Math.max(h,_.theZ)),_.theT!==void 0&&(o===void 0?o=_.theT:o=Math.min(o,_.theT),a=Math.max(a,_.theT)),_.tooltip=this.getTooltip(_),_}).bind(this));else return;return r.type=r.shapes[0].type,r.icon=r.shapes[0].icon,r.minZ=l,r.maxZ=h,r.minT=o,r.maxT=a,r}).bind(this));e=e.filter(function(n){return n});var i=this.template({rois:e,showLoadMore:this.totalCount>this.collection.length,totalCount:this.totalCount,count:this.collection.length});return this.$el.html(i),this}});const Om=ft.View.extend({template:$e.template(Tm),roi_zt_buttons_template:$e.template(km),el:C("#roiModal"),model:_n,TEMP_SHAPE_ID:-1234,omeroRoiCount:0,roisLoaded:!1,roisPageSize:500,roisPage:0,initialize:function(){var t=this;this.Rois=new wm,this.listenTo(this.Rois,"change:selection",this.showTempShape),this.listenTo(this.Rois,"shape_add",this.addShapeFromOmero),this.listenTo(this.Rois,"shape_click",this.showShapePlane);var e=document.getElementById("body");Qs(e).bind(["backspace","del"],function(i,n){return t.$el.is(":visible")?(t.deleteShapes(i),!1):!0}),Qs(e).bind("mod+c",function(i,n){return t.$el.is(":visible")?(t.copyShapes(i),!1):!0}),Qs(e).bind("mod+v",function(i,n){return t.$el.is(":visible")?(t.pasteShapes(i),!1):!0}),Qs(e).bind("mod+a",function(i,n){return t.$el.is(":visible")?(t.selectAllShapes(i),!1):!0}),document.getElementById("roiModal").addEventListener("shown.bs.modal",()=>{t.m=t.model.getSelected().head().clone(),t.rotated=t.m.get("rotation")!==0||t.m.get("vertical_flip")||t.m.get("horizontal_flip"),t.m.set("rotation",0),t.m.set("vertical_flip",!1),t.m.set("horizontal_flip",!1),t.shapeManager.setState("SELECT"),t.shapeManager.deleteAllShapes();var i=t.m.get("shapes");i&&t.shapeManager.setShapesJson(i),t.shapeManager.setStrokeWidth(1),C("#roiModalRoiList table").empty(),t.roisLoaded=!1,t.render(),t.checkForRois(),t.renderPagination()}),this.shapeManager=new It("roi_paper",1,1),t.shapeManager.setStrokeColor("#FFFFFF"),t.shapeManager.setFillColor("#FFFFFF"),this.$roiImg=C(".roi_image",this.$el)},events:{"submit .roiModalForm":"handleRoiForm","click .shape-option .btn":"selectState","click .dropdownSelect a":"select_dropdown_option","change .line-width":"changeLineWidth","change .shape-color":"changeColor","change .fill-color":"changeFillColor","change .fill-opacity":"changeFillOpacity","change:selected .roi_paper":"shapeSelected","new:shape .roi_paper":"shapeSelected","click .copyShape":"copyShapes","click .pasteShape":"pasteShapes","click .deleteShape":"deleteShapes","click .selectAll":"selectAllShapes","click .loadRois":"loadRoisFirstPage","click .roisPrevPage":"roisPrevPage","click .roisNextPage":"roisNextPage","click .roisJumpPage":"roisJumpPage","click .revert_theZ":"revertTheZ","click .revert_theT":"revertTheT"},revertTheZ:function(){var t=this.model.getSelected().head();this.m.set("theZ",t.get("theZ")),this.renderImagePlane()},revertTheT:function(){var t=this.model.getSelected().head();this.m.set("theT",t.get("theT")),this.renderImagePlane()},checkForRois:function(){var t=BASE_WEBFIGURE_URL+"roiCount/"+this.m.get("imageId")+"/",e=C(".loadRois",this.$el).attr({disabled:"disabled"});e.parent().attr("title","Checking for ROIs..."),Yr(t).then(i=>{this.omeroRoiCount=i.roi,this.renderToolbar()})},loadRoisFirstPage:function(t){t.preventDefault(),C(".loadRois",this.$el).prop("disabled",!0),C("#roiModalTip").hide(),this.roisPage=0,this.loadRois()},roisPrevPage:function(t){t.preventDefault(),this.roisPage-=1,this.loadRois()},roisNextPage:function(t){t.preventDefault(),this.roisPage+=1,this.loadRois()},roisJumpPage:function(t){t.preventDefault();var e=C(t.target).data("page");isNaN(e)||(this.roisPage=parseInt(e),this.loadRois())},loadRois:function(){var t=this.m.get("imageId"),i=BASE_OMEROWEB_URL+"api/v0/m/rois/"+"?image="+t+"&limit="+this.roisPageSize+"&offset="+this.roisPageSize*this.roisPage;Yr(i).then(n=>{this.Rois.set(n.data),C(".loadRois",this.$el).prop("disabled",!1),C("#roiModalRoiList table").empty(),this.roisLoaded=!0,this.renderToolbar();var r=new Im({collection:this.Rois,panel:this.m,totalCount:this.omeroRoiCount});C("#roiModalRoiList table").append(r.el),r.render(),this.renderPagination()})},showShapePlane:function(t){var e=t[0];if(e){var i={};e.theZ!==void 0&&(i.theZ=e.theZ),e.theT!==void 0&&(i.theT=e.theT),this.m.set(i),this.renderImagePlane()}},addShapeFromOmero:function(t){var e=t[0],i;this.shapeManager.deleteShapesByIds([this.TEMP_SHAPE_ID]);var n=this.m.getViewportAsRect();i=this.shapeManager.pasteShapesJson([e],n),i||alert("Couldn't add shape outside of current view. Try zooming out.")},showTempShape:function(t){const e=t[0];if(this.shapeManager.deleteShapesByIds([this.TEMP_SHAPE_ID]),e){var i=this.m.getViewportAsRect();e.id=this.TEMP_SHAPE_ID,this.shapeManager.addShapeJson(e,i)}},copyShapes:function(t){t.preventDefault();var e=this.shapeManager.getSelectedShapesJson();e.length>0&&this.model.set("clipboard",{SHAPES:e}),this.renderToolbar()},pasteShapes:function(t){t.preventDefault();var e=this.model.get("clipboard");if(e.SHAPES)e=e.SHAPES;else if(e.CROP){var i=C(".roi_toolbar .shape-color span:first",this.$el).attr("data-color"),n=C(".roi_toolbar .fill-color span:first",this.$el).attr("data-fill-color"),r=C(".roi_toolbar .fill-opacity span:first",this.$el).attr("data-fill-opacity"),o=C(".roi_toolbar .line-width span:first",this.$el).attr("data-line-width"),a=e.CROP;e=[{type:"Rectangle",x:a.x,y:a.y,width:a.width,height:a.height,strokeColor:"#"+i,fillColor:"#"+n,fillOpacity:r,lineWidth:o}]}else return;var l=this.m.getViewportAsRect(),h=this.shapeManager.pasteShapesJson(e,l);h||this.renderSidebarWarning("Could not paste ROI outside viewport.")},deleteShapes:function(t){t.preventDefault(),this.shapeManager.deleteSelectedShapes()},handleRoiForm:function(t){t.preventDefault();var e=this.shapeManager.getShapesJson();e=e.filter((function(r){return r.id!==this.TEMP_SHAPE_ID}).bind(this));var i=this.m.get("theZ"),n=this.m.get("theT");return this.model.getSelected().forEach(function(r){r.save({shapes:e,theZ:i,theT:n})}),Mr("roiModal"),!1},shapeSelected:function(){this.renderToolbar()},changeLineWidth:function(t){var e=C("span:first",t.target).attr("data-line-width");e=parseFloat(e,10),this.shapeManager.setStrokeWidth(e)},changeColor:function(t){var e=C("span:first",t.target).attr("data-color");this.shapeManager.setStrokeColor("#"+e)},changeFillColor:function(t){var e=C("span:first",t.target).attr("data-fill-color");this.shapeManager.setFillColor("#"+e)},changeFillOpacity:function(t){var e=C("span:first",t.target).attr("data-fill-opacity");e=parseFloat(e,10).toFixed(1),this.shapeManager.setFillOpacity(e)},select_dropdown_option:function(t){t.preventDefault();var e=C(t.target),i=e.children("span");i.length===0&&(i=e);var n=i.parent().parent(),r=C("button.dropdown-toggle",n.parent().parent());if(i=i.clone(),i.hasClass("colorpickerOption")){var o=e.attr("data-oldcolor");Ba.show({color:o,success:function(a){i.css({"background-color":a,"background-image":"none"}),a=a.replace("#",""),e.attr("data-color")?i.attr("data-color",a):i.attr("data-fill-color",a),C("span:first",r).replaceWith(i),r.trigger("change")}})}else C("span:first",r).replaceWith(i),i.prop("title")&&r.prop("title",i.prop("title")),r.trigger("change")},selectAllShapes:function(t){t.preventDefault(),this.shapeManager.selectAllShapes()},selectState:function(t){var e=C(t.target),i=e.attr("data-state");i===void 0&&(i=e.parent().attr("data-state")),this.shapeManager.setState(i),this.renderToolbar()},enableSubmit:function(t){var e=C('button[type="submit"]',this.$el);t?(e.prop("disabled",!1),e.prop("title","Crop selected images to chosen region")):(e.prop("disabled","disabled"),e.prop("title","No valid region selected"))},renderToolbar:function(){var t=this.shapeManager.getState(),e=this.shapeManager.getStrokeWidth(),i=this.shapeManager.getStrokeColor(),n=this.shapeManager.getFillColor(),r=this.shapeManager.getFillOpacity(),o=this.zoom,a=this.shapeManager.getSelectedShapes().length>0,l=this.model.get("clipboard"),h=navigator.platform.toUpperCase().indexOf("WIN")>-1,g=[.25,.5,.75,1,2,3,4,5,7,10,15,20,30],_=["0","0.1","0.2","0.3","0.4","0.5","0.6","0.7","0.8","0.9","1"];i=i?i.replace("#",""):"FFFFFF",n=n?n.replace("#",""):"FFFFFF",l=l&&(l.SHAPES||l.CROP);var x={state:t,lineWidths:g,lineWidth:e,color:i,fillColor:n,opacities:_,opacity:r,sel:a,cmdKey:h?"Ctrl+":"⌘",toPaste:l,zoom:parseInt(o*100,10),omeroRoiCount:this.omeroRoiCount,roisLoaded:this.roisLoaded};C(".roi_toolbar",this.$el).html(this.template(x))},renderSidebarWarning:function(t){var e="<p><span class='label label-warning'>Warning</span> "+t+"</p>";C("#roiModalTip").html(e).show().fadeOut(1e4)},renderSidebar:function(){var t=["You can copy and paste shapes to duplicate them or move them between panels.","If you copy a region from the Crop dialog (under the 'Preview' tab), you can paste it here to create a new Rectangle."],e;this.rotated?e="<span class='badge text-bg-primary'>Warning</span> This image panel is rotated or flipped in the figure, but this ROI editor can't work with rotated/flipped images. The image is displayed here <b>without</b> rotation/flipping, but the ROIs you add will be applied correctly to the image panel in the figure.":e="<span class='badge text-bg-primary'>Tip</span> "+t[parseInt(Math.random()*t.length,10)],C("#roiModalTip").show().html(e)},renderImagePlane:function(){this.m.get_img_src().then(n=>this.$roiImg.attr("src",n));var t=this.model.getSelected().head(),e={theZ:this.m.get("theZ"),theT:this.m.get("theT"),origZ:t.get("theZ"),origT:t.get("theT")},i=this.roi_zt_buttons_template(e);C("#roi_zt_buttons").html(i)},renderPagination:function(){if(!this.roisLoaded){C("#roiPageControls").html("").hide();return}var t=Math.ceil(this.omeroRoiCount/this.roisPageSize),e=`<span>${this.omeroRoiCount} ROIs`;t>1?e+=`: page ${this.roisPage+1}/${t}</span>
                <div class="btn-group" style="float:right">
                    <button title="Load previous page of ROIs" ${this.roisPage===0?"disabled='disabled'":""}
                        type="button" class="btn btn-default btn-sm roisPrevPage">
                        Prev
                    </button>
                    <button title="Load next page of ROIs" ${this.roisPage+1>=t?"disabled='disabled'":""}
                        type="button" class="btn btn-default btn-sm roisNextPage">
                        Next
                    </button>
                    <button type="button" class="btn btn-default btn-sm dropdown-toggle" title="Select page" data-bs-toggle="dropdown">
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu">
                    ${$e.range(t).map(i=>`<li>
                        <a class="roisJumpPage" href="#" data-page="${i}">
                            <span class="glyphicon glyphicon-ok" ${this.roisPage!==i?"style='visibility:hidden'":""}></span>
                            Page ${i+1}
                        </a>
                        </li>`).join(`
`)}
                    </ul>
                </div>`:e+="</span>",C("#roiPageControls").html(e).show()},render:function(){var t=550,e=t,i=t,n=this.m.get("width")/this.m.get("height");n<=1?(i=t,e=t*n):(e=t,i=t/n);var r=this.m.get_vp_img_css(this.m.get("zoom"),e,i);this.$roiImg.css(r);var o=this.m.get_vp_full_plane_css(this.m.get("zoom"),e,i),a=this.m.get("orig_width"),l=this.m.get("orig_height"),h=o.width/a;this.shapeManager._orig_width=a,this.shapeManager._orig_height=l,this.shapeManager.setZoom(h*100),C("#roi_paper").css(o),C("#roiViewer").css({width:e+"px",height:i+"px"}),this.renderImagePlane(),this.renderToolbar(),this.renderSidebar()}});function Rh(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let Hs=Rh();function Mm(t){Hs=t}const zh=/[&<>"']/,Nm=new RegExp(zh.source,"g"),Fh=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Rm=new RegExp(Fh.source,"g"),zm={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},H2=t=>zm[t];function Wi(t,e){if(e){if(zh.test(t))return t.replace(Nm,H2)}else if(Fh.test(t))return t.replace(Rm,H2);return t}const Fm=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Dh(t){return t.replace(Fm,(e,i)=>(i=i.toLowerCase(),i==="colon"?":":i.charAt(0)==="#"?i.charAt(1)==="x"?String.fromCharCode(parseInt(i.substring(2),16)):String.fromCharCode(+i.substring(1)):""))}const Dm=/(^|[^\[])\^/g;function ni(t,e){t=typeof t=="string"?t:t.source,e=e||"";const i={replace:(n,r)=>(r=r.source||r,r=r.replace(Dm,"$1"),t=t.replace(n,r),i),getRegex:()=>new RegExp(t,e)};return i}const Lm=/[^\w:]/g,Pm=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function j2(t,e,i){if(t){let n;try{n=decodeURIComponent(Dh(i)).replace(Lm,"").toLowerCase()}catch{return null}if(n.indexOf("javascript:")===0||n.indexOf("vbscript:")===0||n.indexOf("data:")===0)return null}e&&!Pm.test(i)&&(i=Hm(e,i));try{i=encodeURI(i).replace(/%25/g,"%")}catch{return null}return i}const Jo={},$m=/^[^:]+:\/*[^/]*$/,Bm=/^([^:]+:)[\s\S]*$/,Wm=/^([^:]+:\/*[^/]*)[\s\S]*$/;function Hm(t,e){Jo[" "+t]||($m.test(t)?Jo[" "+t]=t+"/":Jo[" "+t]=la(t,"/",!0)),t=Jo[" "+t];const i=t.indexOf(":")===-1;return e.substring(0,2)==="//"?i?e:t.replace(Bm,"$1")+e:e.charAt(0)==="/"?i?e:t.replace(Wm,"$1")+e:t+e}const Ea={exec:function(){}};function nr(t){let e=1,i,n;for(;e<arguments.length;e++){i=arguments[e];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}function U2(t,e){const i=t.replace(/\|/g,(o,a,l)=>{let h=!1,g=a;for(;--g>=0&&l[g]==="\\";)h=!h;return h?"|":" |"}),n=i.split(/ \|/);let r=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function la(t,e,i){const n=t.length;if(n===0)return"";let r=0;for(;r<n;){const o=t.charAt(n-r-1);if(o===e&&!i)r++;else if(o!==e&&i)r++;else break}return t.slice(0,n-r)}function jm(t,e){if(t.indexOf(e[1])===-1)return-1;const i=t.length;let n=0,r=0;for(;r<i;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return-1}function Lh(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function V2(t,e){if(e<1)return"";let i="";for(;e>1;)e&1&&(i+=t),e>>=1,t+=t;return i+t}function Y2(t,e,i,n){const r=e.href,o=e.title?Wi(e.title):null,a=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){n.state.inLink=!0;const l={type:"link",raw:i,href:r,title:o,text:a,tokens:n.inlineTokens(a)};return n.state.inLink=!1,l}return{type:"image",raw:i,href:r,title:o,text:Wi(a)}}function Um(t,e){const i=t.match(/^(\s+)(?:```)/);if(i===null)return e;const n=i[1];return e.split(`
`).map(r=>{const o=r.match(/^\s+/);if(o===null)return r;const[a]=o;return a.length>=n.length?r.slice(n.length):r}).join(`
`)}class C1{constructor(e){this.options=e||Hs}space(e){const i=this.rules.block.newline.exec(e);if(i&&i[0].length>0)return{type:"space",raw:i[0]}}code(e){const i=this.rules.block.code.exec(e);if(i){const n=i[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:i[0],codeBlockStyle:"indented",text:this.options.pedantic?n:la(n,`
`)}}}fences(e){const i=this.rules.block.fences.exec(e);if(i){const n=i[0],r=Um(n,i[3]||"");return{type:"code",raw:n,lang:i[2]?i[2].trim().replace(this.rules.inline._escapes,"$1"):i[2],text:r}}}heading(e){const i=this.rules.block.heading.exec(e);if(i){let n=i[2].trim();if(/#$/.test(n)){const r=la(n,"#");(this.options.pedantic||!r||/ $/.test(r))&&(n=r.trim())}return{type:"heading",raw:i[0],depth:i[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){const i=this.rules.block.hr.exec(e);if(i)return{type:"hr",raw:i[0]}}blockquote(e){const i=this.rules.block.blockquote.exec(e);if(i){const n=i[0].replace(/^ *>[ \t]?/gm,""),r=this.lexer.state.top;this.lexer.state.top=!0;const o=this.lexer.blockTokens(n);return this.lexer.state.top=r,{type:"blockquote",raw:i[0],tokens:o,text:n}}}list(e){let i=this.rules.block.list.exec(e);if(i){let n,r,o,a,l,h,g,_,x,T,M,D,F=i[1].trim();const Q=F.length>1,K={type:"list",raw:"",ordered:Q,start:Q?+F.slice(0,-1):"",loose:!1,items:[]};F=Q?`\\d{1,9}\\${F.slice(-1)}`:`\\${F}`,this.options.pedantic&&(F=Q?F:"[*+-]");const Z=new RegExp(`^( {0,3}${F})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;e&&(D=!1,!(!(i=Z.exec(e))||this.rules.block.hr.test(e)));){if(n=i[0],e=e.substring(n.length),_=i[2].split(`
`,1)[0].replace(/^\t+/,he=>" ".repeat(3*he.length)),x=e.split(`
`,1)[0],this.options.pedantic?(a=2,M=_.trimLeft()):(a=i[2].search(/[^ ]/),a=a>4?1:a,M=_.slice(a),a+=i[1].length),h=!1,!_&&/^ *$/.test(x)&&(n+=x+`
`,e=e.substring(x.length+1),D=!0),!D){const he=new RegExp(`^ {0,${Math.min(3,a-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),pe=new RegExp(`^ {0,${Math.min(3,a-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),p=new RegExp(`^ {0,${Math.min(3,a-1)}}(?:\`\`\`|~~~)`),H=new RegExp(`^ {0,${Math.min(3,a-1)}}#`);for(;e&&(T=e.split(`
`,1)[0],x=T,this.options.pedantic&&(x=x.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(p.test(x)||H.test(x)||he.test(x)||pe.test(e)));){if(x.search(/[^ ]/)>=a||!x.trim())M+=`
`+x.slice(a);else{if(h||_.search(/[^ ]/)>=4||p.test(_)||H.test(_)||pe.test(_))break;M+=`
`+x}!h&&!x.trim()&&(h=!0),n+=T+`
`,e=e.substring(T.length+1),_=x.slice(a)}}K.loose||(g?K.loose=!0:/\n *\n *$/.test(n)&&(g=!0)),this.options.gfm&&(r=/^\[[ xX]\] /.exec(M),r&&(o=r[0]!=="[ ] ",M=M.replace(/^\[[ xX]\] +/,""))),K.items.push({type:"list_item",raw:n,task:!!r,checked:o,loose:!1,text:M}),K.raw+=n}K.items[K.items.length-1].raw=n.trimRight(),K.items[K.items.length-1].text=M.trimRight(),K.raw=K.raw.trimRight();const ee=K.items.length;for(l=0;l<ee;l++)if(this.lexer.state.top=!1,K.items[l].tokens=this.lexer.blockTokens(K.items[l].text,[]),!K.loose){const he=K.items[l].tokens.filter(p=>p.type==="space"),pe=he.length>0&&he.some(p=>/\n.*\n/.test(p.raw));K.loose=pe}if(K.loose)for(l=0;l<ee;l++)K.items[l].loose=!0;return K}}html(e){const i=this.rules.block.html.exec(e);if(i){const n={type:"html",raw:i[0],pre:!this.options.sanitizer&&(i[1]==="pre"||i[1]==="script"||i[1]==="style"),text:i[0]};if(this.options.sanitize){const r=this.options.sanitizer?this.options.sanitizer(i[0]):Wi(i[0]);n.type="paragraph",n.text=r,n.tokens=this.lexer.inline(r)}return n}}def(e){const i=this.rules.block.def.exec(e);if(i){const n=i[1].toLowerCase().replace(/\s+/g," "),r=i[2]?i[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",o=i[3]?i[3].substring(1,i[3].length-1).replace(this.rules.inline._escapes,"$1"):i[3];return{type:"def",tag:n,raw:i[0],href:r,title:o}}}table(e){const i=this.rules.block.table.exec(e);if(i){const n={type:"table",header:U2(i[1]).map(r=>({text:r})),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:i[3]&&i[3].trim()?i[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(n.header.length===n.align.length){n.raw=i[0];let r=n.align.length,o,a,l,h;for(o=0;o<r;o++)/^ *-+: *$/.test(n.align[o])?n.align[o]="right":/^ *:-+: *$/.test(n.align[o])?n.align[o]="center":/^ *:-+ *$/.test(n.align[o])?n.align[o]="left":n.align[o]=null;for(r=n.rows.length,o=0;o<r;o++)n.rows[o]=U2(n.rows[o],n.header.length).map(g=>({text:g}));for(r=n.header.length,a=0;a<r;a++)n.header[a].tokens=this.lexer.inline(n.header[a].text);for(r=n.rows.length,a=0;a<r;a++)for(h=n.rows[a],l=0;l<h.length;l++)h[l].tokens=this.lexer.inline(h[l].text);return n}}}lheading(e){const i=this.rules.block.lheading.exec(e);if(i)return{type:"heading",raw:i[0],depth:i[2].charAt(0)==="="?1:2,text:i[1],tokens:this.lexer.inline(i[1])}}paragraph(e){const i=this.rules.block.paragraph.exec(e);if(i){const n=i[1].charAt(i[1].length-1)===`
`?i[1].slice(0,-1):i[1];return{type:"paragraph",raw:i[0],text:n,tokens:this.lexer.inline(n)}}}text(e){const i=this.rules.block.text.exec(e);if(i)return{type:"text",raw:i[0],text:i[0],tokens:this.lexer.inline(i[0])}}escape(e){const i=this.rules.inline.escape.exec(e);if(i)return{type:"escape",raw:i[0],text:Wi(i[1])}}tag(e){const i=this.rules.inline.tag.exec(e);if(i)return!this.lexer.state.inLink&&/^<a /i.test(i[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(i[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(i[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(i[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:i[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):Wi(i[0]):i[0]}}link(e){const i=this.rules.inline.link.exec(e);if(i){const n=i[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;const a=la(n.slice(0,-1),"\\");if((n.length-a.length)%2===0)return}else{const a=jm(i[2],"()");if(a>-1){const h=(i[0].indexOf("!")===0?5:4)+i[1].length+a;i[2]=i[2].substring(0,a),i[0]=i[0].substring(0,h).trim(),i[3]=""}}let r=i[2],o="";if(this.options.pedantic){const a=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);a&&(r=a[1],o=a[3])}else o=i[3]?i[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(n)?r=r.slice(1):r=r.slice(1,-1)),Y2(i,{href:r&&r.replace(this.rules.inline._escapes,"$1"),title:o&&o.replace(this.rules.inline._escapes,"$1")},i[0],this.lexer)}}reflink(e,i){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let r=(n[2]||n[1]).replace(/\s+/g," ");if(r=i[r.toLowerCase()],!r){const o=n[0].charAt(0);return{type:"text",raw:o,text:o}}return Y2(n,r,n[0],this.lexer)}}emStrong(e,i,n=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!r||r[3]&&n.match(/[\p{L}\p{N}]/u))return;const o=r[1]||r[2]||"";if(!o||o&&(n===""||this.rules.inline.punctuation.exec(n))){const a=r[0].length-1;let l,h,g=a,_=0;const x=r[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(x.lastIndex=0,i=i.slice(-1*e.length+a);(r=x.exec(i))!=null;){if(l=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!l)continue;if(h=l.length,r[3]||r[4]){g+=h;continue}else if((r[5]||r[6])&&a%3&&!((a+h)%3)){_+=h;continue}if(g-=h,g>0)continue;h=Math.min(h,h+g+_);const T=e.slice(0,a+r.index+(r[0].length-l.length)+h);if(Math.min(a,h)%2){const D=T.slice(1,-1);return{type:"em",raw:T,text:D,tokens:this.lexer.inlineTokens(D)}}const M=T.slice(2,-2);return{type:"strong",raw:T,text:M,tokens:this.lexer.inlineTokens(M)}}}}codespan(e){const i=this.rules.inline.code.exec(e);if(i){let n=i[2].replace(/\n/g," ");const r=/[^ ]/.test(n),o=/^ /.test(n)&&/ $/.test(n);return r&&o&&(n=n.substring(1,n.length-1)),n=Wi(n,!0),{type:"codespan",raw:i[0],text:n}}}br(e){const i=this.rules.inline.br.exec(e);if(i)return{type:"br",raw:i[0]}}del(e){const i=this.rules.inline.del.exec(e);if(i)return{type:"del",raw:i[0],text:i[2],tokens:this.lexer.inlineTokens(i[2])}}autolink(e,i){const n=this.rules.inline.autolink.exec(e);if(n){let r,o;return n[2]==="@"?(r=Wi(this.options.mangle?i(n[1]):n[1]),o="mailto:"+r):(r=Wi(n[1]),o=r),{type:"link",raw:n[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}url(e,i){let n;if(n=this.rules.inline.url.exec(e)){let r,o;if(n[2]==="@")r=Wi(this.options.mangle?i(n[0]):n[0]),o="mailto:"+r;else{let a;do a=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0];while(a!==n[0]);r=Wi(n[0]),n[1]==="www."?o="http://"+n[0]:o=n[0]}return{type:"link",raw:n[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e,i){const n=this.rules.inline.text.exec(e);if(n){let r;return this.lexer.state.inRawBlock?r=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):Wi(n[0]):n[0]:r=Wi(this.options.smartypants?i(n[0]):n[0]),{type:"text",raw:n[0],text:r}}}}const mt={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Ea,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};mt._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;mt._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;mt.def=ni(mt.def).replace("label",mt._label).replace("title",mt._title).getRegex();mt.bullet=/(?:[*+-]|\d{1,9}[.)])/;mt.listItemStart=ni(/^( *)(bull) */).replace("bull",mt.bullet).getRegex();mt.list=ni(mt.list).replace(/bull/g,mt.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+mt.def.source+")").getRegex();mt._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";mt._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;mt.html=ni(mt.html,"i").replace("comment",mt._comment).replace("tag",mt._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();mt.paragraph=ni(mt._paragraph).replace("hr",mt.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mt._tag).getRegex();mt.blockquote=ni(mt.blockquote).replace("paragraph",mt.paragraph).getRegex();mt.normal=nr({},mt);mt.gfm=nr({},mt.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});mt.gfm.table=ni(mt.gfm.table).replace("hr",mt.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mt._tag).getRegex();mt.gfm.paragraph=ni(mt._paragraph).replace("hr",mt.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",mt.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mt._tag).getRegex();mt.pedantic=nr({},mt.normal,{html:ni(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",mt._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ea,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ni(mt.normal._paragraph).replace("hr",mt.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",mt.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const rt={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Ea,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Ea,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};rt._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";rt.punctuation=ni(rt.punctuation).replace(/punctuation/g,rt._punctuation).getRegex();rt.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;rt.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g;rt._comment=ni(mt._comment).replace("(?:-->|$)","-->").getRegex();rt.emStrong.lDelim=ni(rt.emStrong.lDelim).replace(/punct/g,rt._punctuation).getRegex();rt.emStrong.rDelimAst=ni(rt.emStrong.rDelimAst,"g").replace(/punct/g,rt._punctuation).getRegex();rt.emStrong.rDelimUnd=ni(rt.emStrong.rDelimUnd,"g").replace(/punct/g,rt._punctuation).getRegex();rt._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;rt._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;rt._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;rt.autolink=ni(rt.autolink).replace("scheme",rt._scheme).replace("email",rt._email).getRegex();rt._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;rt.tag=ni(rt.tag).replace("comment",rt._comment).replace("attribute",rt._attribute).getRegex();rt._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;rt._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;rt._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;rt.link=ni(rt.link).replace("label",rt._label).replace("href",rt._href).replace("title",rt._title).getRegex();rt.reflink=ni(rt.reflink).replace("label",rt._label).replace("ref",mt._label).getRegex();rt.nolink=ni(rt.nolink).replace("ref",mt._label).getRegex();rt.reflinkSearch=ni(rt.reflinkSearch,"g").replace("reflink",rt.reflink).replace("nolink",rt.nolink).getRegex();rt.normal=nr({},rt);rt.pedantic=nr({},rt.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:ni(/^!?\[(label)\]\((.*?)\)/).replace("label",rt._label).getRegex(),reflink:ni(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",rt._label).getRegex()});rt.gfm=nr({},rt.normal,{escape:ni(rt.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});rt.gfm.url=ni(rt.gfm.url,"i").replace("email",rt.gfm._extended_email).getRegex();rt.breaks=nr({},rt.gfm,{br:ni(rt.br).replace("{2,}","*").getRegex(),text:ni(rt.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function Vm(t){return t.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function q2(t){let e="",i,n;const r=t.length;for(i=0;i<r;i++)n=t.charCodeAt(i),Math.random()>.5&&(n="x"+n.toString(16)),e+="&#"+n+";";return e}class Ar{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Hs,this.options.tokenizer=this.options.tokenizer||new C1,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const i={block:mt.normal,inline:rt.normal};this.options.pedantic?(i.block=mt.pedantic,i.inline=rt.pedantic):this.options.gfm&&(i.block=mt.gfm,this.options.breaks?i.inline=rt.breaks:i.inline=rt.gfm),this.tokenizer.rules=i}static get rules(){return{block:mt,inline:rt}}static lex(e,i){return new Ar(i).lex(e)}static lexInline(e,i){return new Ar(i).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);let i;for(;i=this.inlineQueue.shift();)this.inlineTokens(i.src,i.tokens);return this.tokens}blockTokens(e,i=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(l,h,g)=>h+"    ".repeat(g.length));let n,r,o,a;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(l=>(n=l.call({lexer:this},e,i))?(e=e.substring(n.raw.length),i.push(n),!0):!1))){if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length),n.raw.length===1&&i.length>0?i[i.length-1].raw+=`
`:i.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length),r=i[i.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+n.raw,r.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text):i.push(n);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),i.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),i.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),i.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),i.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),i.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),i.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length),r=i[i.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+n.raw,r.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),i.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),i.push(n);continue}if(o=e,this.options.extensions&&this.options.extensions.startBlock){let l=1/0;const h=e.slice(1);let g;this.options.extensions.startBlock.forEach(function(_){g=_.call({lexer:this},h),typeof g=="number"&&g>=0&&(l=Math.min(l,g))}),l<1/0&&l>=0&&(o=e.substring(0,l+1))}if(this.state.top&&(n=this.tokenizer.paragraph(o))){r=i[i.length-1],a&&r.type==="paragraph"?(r.raw+=`
`+n.raw,r.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):i.push(n),a=o.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length),r=i[i.length-1],r&&r.type==="text"?(r.raw+=`
`+n.raw,r.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):i.push(n);continue}if(e){const l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,i}inline(e,i=[]){return this.inlineQueue.push({src:e,tokens:i}),i}inlineTokens(e,i=[]){let n,r,o,a=e,l,h,g;if(this.tokens.links){const _=Object.keys(this.tokens.links);if(_.length>0)for(;(l=this.tokenizer.rules.inline.reflinkSearch.exec(a))!=null;)_.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(a=a.slice(0,l.index)+"["+V2("a",l[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(l=this.tokenizer.rules.inline.blockSkip.exec(a))!=null;)a=a.slice(0,l.index)+"["+V2("a",l[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(l=this.tokenizer.rules.inline.escapedEmSt.exec(a))!=null;)a=a.slice(0,l.index+l[0].length-2)+"++"+a.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;e;)if(h||(g=""),h=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(_=>(n=_.call({lexer:this},e,i))?(e=e.substring(n.raw.length),i.push(n),!0):!1))){if(n=this.tokenizer.escape(e)){e=e.substring(n.raw.length),i.push(n);continue}if(n=this.tokenizer.tag(e)){e=e.substring(n.raw.length),r=i[i.length-1],r&&n.type==="text"&&r.type==="text"?(r.raw+=n.raw,r.text+=n.text):i.push(n);continue}if(n=this.tokenizer.link(e)){e=e.substring(n.raw.length),i.push(n);continue}if(n=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(n.raw.length),r=i[i.length-1],r&&n.type==="text"&&r.type==="text"?(r.raw+=n.raw,r.text+=n.text):i.push(n);continue}if(n=this.tokenizer.emStrong(e,a,g)){e=e.substring(n.raw.length),i.push(n);continue}if(n=this.tokenizer.codespan(e)){e=e.substring(n.raw.length),i.push(n);continue}if(n=this.tokenizer.br(e)){e=e.substring(n.raw.length),i.push(n);continue}if(n=this.tokenizer.del(e)){e=e.substring(n.raw.length),i.push(n);continue}if(n=this.tokenizer.autolink(e,q2)){e=e.substring(n.raw.length),i.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(e,q2))){e=e.substring(n.raw.length),i.push(n);continue}if(o=e,this.options.extensions&&this.options.extensions.startInline){let _=1/0;const x=e.slice(1);let T;this.options.extensions.startInline.forEach(function(M){T=M.call({lexer:this},x),typeof T=="number"&&T>=0&&(_=Math.min(_,T))}),_<1/0&&_>=0&&(o=e.substring(0,_+1))}if(n=this.tokenizer.inlineText(o,Vm)){e=e.substring(n.raw.length),n.raw.slice(-1)!=="_"&&(g=n.raw.slice(-1)),h=!0,r=i[i.length-1],r&&r.type==="text"?(r.raw+=n.raw,r.text+=n.text):i.push(n);continue}if(e){const _="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(_);break}else throw new Error(_)}}return i}}class A1{constructor(e){this.options=e||Hs}code(e,i,n){const r=(i||"").match(/\S*/)[0];if(this.options.highlight){const o=this.options.highlight(e,r);o!=null&&o!==e&&(n=!0,e=o)}return e=e.replace(/\n$/,"")+`
`,r?'<pre><code class="'+this.options.langPrefix+Wi(r)+'">'+(n?e:Wi(e,!0))+`</code></pre>
`:"<pre><code>"+(n?e:Wi(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e){return e}heading(e,i,n,r){if(this.options.headerIds){const o=this.options.headerPrefix+r.slug(n);return`<h${i} id="${o}">${e}</h${i}>
`}return`<h${i}>${e}</h${i}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,i,n){const r=i?"ol":"ul",o=i&&n!==1?' start="'+n+'"':"";return"<"+r+o+`>
`+e+"</"+r+`>
`}listitem(e){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>
`}table(e,i){return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+i+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,i){const n=i.header?"th":"td";return(i.align?`<${n} align="${i.align}">`:`<${n}>`)+e+`</${n}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,i,n){if(e=j2(this.options.sanitize,this.options.baseUrl,e),e===null)return n;let r='<a href="'+e+'"';return i&&(r+=' title="'+i+'"'),r+=">"+n+"</a>",r}image(e,i,n){if(e=j2(this.options.sanitize,this.options.baseUrl,e),e===null)return n;let r=`<img src="${e}" alt="${n}"`;return i&&(r+=` title="${i}"`),r+=this.options.xhtml?"/>":">",r}text(e){return e}}class Ph{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,i,n){return""+n}image(e,i,n){return""+n}br(){return""}}class $h{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,i){let n=e,r=0;if(this.seen.hasOwnProperty(n)){r=this.seen[e];do r++,n=e+"-"+r;while(this.seen.hasOwnProperty(n))}return i||(this.seen[e]=r,this.seen[n]=0),n}slug(e,i={}){const n=this.serialize(e);return this.getNextSafeSlug(n,i.dryrun)}}class hr{constructor(e){this.options=e||Hs,this.options.renderer=this.options.renderer||new A1,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Ph,this.slugger=new $h}static parse(e,i){return new hr(i).parse(e)}static parseInline(e,i){return new hr(i).parseInline(e)}parse(e,i=!0){let n="",r,o,a,l,h,g,_,x,T,M,D,F,Q,K,Z,ee,he,pe,p;const H=e.length;for(r=0;r<H;r++){if(M=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[M.type]&&(p=this.options.extensions.renderers[M.type].call({parser:this},M),p!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(M.type))){n+=p||"";continue}switch(M.type){case"space":continue;case"hr":{n+=this.renderer.hr();continue}case"heading":{n+=this.renderer.heading(this.parseInline(M.tokens),M.depth,Dh(this.parseInline(M.tokens,this.textRenderer)),this.slugger);continue}case"code":{n+=this.renderer.code(M.text,M.lang,M.escaped);continue}case"table":{for(x="",_="",l=M.header.length,o=0;o<l;o++)_+=this.renderer.tablecell(this.parseInline(M.header[o].tokens),{header:!0,align:M.align[o]});for(x+=this.renderer.tablerow(_),T="",l=M.rows.length,o=0;o<l;o++){for(g=M.rows[o],_="",h=g.length,a=0;a<h;a++)_+=this.renderer.tablecell(this.parseInline(g[a].tokens),{header:!1,align:M.align[a]});T+=this.renderer.tablerow(_)}n+=this.renderer.table(x,T);continue}case"blockquote":{T=this.parse(M.tokens),n+=this.renderer.blockquote(T);continue}case"list":{for(D=M.ordered,F=M.start,Q=M.loose,l=M.items.length,T="",o=0;o<l;o++)Z=M.items[o],ee=Z.checked,he=Z.task,K="",Z.task&&(pe=this.renderer.checkbox(ee),Q?Z.tokens.length>0&&Z.tokens[0].type==="paragraph"?(Z.tokens[0].text=pe+" "+Z.tokens[0].text,Z.tokens[0].tokens&&Z.tokens[0].tokens.length>0&&Z.tokens[0].tokens[0].type==="text"&&(Z.tokens[0].tokens[0].text=pe+" "+Z.tokens[0].tokens[0].text)):Z.tokens.unshift({type:"text",text:pe}):K+=pe),K+=this.parse(Z.tokens,Q),T+=this.renderer.listitem(K,he,ee);n+=this.renderer.list(T,D,F);continue}case"html":{n+=this.renderer.html(M.text);continue}case"paragraph":{n+=this.renderer.paragraph(this.parseInline(M.tokens));continue}case"text":{for(T=M.tokens?this.parseInline(M.tokens):M.text;r+1<H&&e[r+1].type==="text";)M=e[++r],T+=`
`+(M.tokens?this.parseInline(M.tokens):M.text);n+=i?this.renderer.paragraph(T):T;continue}default:{const oe='Token with "'+M.type+'" type was not found.';if(this.options.silent){console.error(oe);return}else throw new Error(oe)}}}return n}parseInline(e,i){i=i||this.renderer;let n="",r,o,a;const l=e.length;for(r=0;r<l;r++){if(o=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]&&(a=this.options.extensions.renderers[o.type].call({parser:this},o),a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type))){n+=a||"";continue}switch(o.type){case"escape":{n+=i.text(o.text);break}case"html":{n+=i.html(o.text);break}case"link":{n+=i.link(o.href,o.title,this.parseInline(o.tokens,i));break}case"image":{n+=i.image(o.href,o.title,o.text);break}case"strong":{n+=i.strong(this.parseInline(o.tokens,i));break}case"em":{n+=i.em(this.parseInline(o.tokens,i));break}case"codespan":{n+=i.codespan(o.text);break}case"br":{n+=i.br();break}case"del":{n+=i.del(this.parseInline(o.tokens,i));break}case"text":{n+=i.text(o.text);break}default:{const h='Token with "'+o.type+'" type was not found.';if(this.options.silent){console.error(h);return}else throw new Error(h)}}}return n}}function wt(t,e,i){if(typeof t>"u"||t===null)throw new Error("marked(): input parameter is undefined or null");if(typeof t!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if(typeof e=="function"&&(i=e,e=null),e=nr({},wt.defaults,e||{}),Lh(e),i){const r=e.highlight;let o;try{o=Ar.lex(t,e)}catch(h){return i(h)}const a=function(h){let g;if(!h)try{e.walkTokens&&wt.walkTokens(o,e.walkTokens),g=hr.parse(o,e)}catch(_){h=_}return e.highlight=r,h?i(h):i(null,g)};if(!r||r.length<3||(delete e.highlight,!o.length))return a();let l=0;wt.walkTokens(o,function(h){h.type==="code"&&(l++,setTimeout(()=>{r(h.text,h.lang,function(g,_){if(g)return a(g);_!=null&&_!==h.text&&(h.text=_,h.escaped=!0),l--,l===0&&a()})},0))}),l===0&&a();return}function n(r){if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+Wi(r.message+"",!0)+"</pre>";throw r}try{const r=Ar.lex(t,e);if(e.walkTokens){if(e.async)return Promise.all(wt.walkTokens(r,e.walkTokens)).then(()=>hr.parse(r,e)).catch(n);wt.walkTokens(r,e.walkTokens)}return hr.parse(r,e)}catch(r){n(r)}}wt.options=wt.setOptions=function(t){return nr(wt.defaults,t),Mm(wt.defaults),wt};wt.getDefaults=Rh;wt.defaults=Hs;wt.use=function(...t){const e=wt.defaults.extensions||{renderers:{},childTokens:{}};t.forEach(i=>{const n=nr({},i);if(n.async=wt.defaults.async||n.async,i.extensions&&(i.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if(r.renderer){const o=e.renderers[r.name];o?e.renderers[r.name]=function(...a){let l=r.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:e.renderers[r.name]=r.renderer}if(r.tokenizer){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");e[r.level]?e[r.level].unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&(r.level==="block"?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:r.level==="inline"&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),n.extensions=e),i.renderer){const r=wt.defaults.renderer||new A1;for(const o in i.renderer){const a=r[o];r[o]=(...l)=>{let h=i.renderer[o].apply(r,l);return h===!1&&(h=a.apply(r,l)),h}}n.renderer=r}if(i.tokenizer){const r=wt.defaults.tokenizer||new C1;for(const o in i.tokenizer){const a=r[o];r[o]=(...l)=>{let h=i.tokenizer[o].apply(r,l);return h===!1&&(h=a.apply(r,l)),h}}n.tokenizer=r}if(i.walkTokens){const r=wt.defaults.walkTokens;n.walkTokens=function(o){let a=[];return a.push(i.walkTokens.call(this,o)),r&&(a=a.concat(r.call(this,o))),a}}wt.setOptions(n)})};wt.walkTokens=function(t,e){let i=[];for(const n of t)switch(i=i.concat(e.call(wt,n)),n.type){case"table":{for(const r of n.header)i=i.concat(wt.walkTokens(r.tokens,e));for(const r of n.rows)for(const o of r)i=i.concat(wt.walkTokens(o.tokens,e));break}case"list":{i=i.concat(wt.walkTokens(n.items,e));break}default:wt.defaults.extensions&&wt.defaults.extensions.childTokens&&wt.defaults.extensions.childTokens[n.type]?wt.defaults.extensions.childTokens[n.type].forEach(function(r){i=i.concat(wt.walkTokens(n[r],e))}):n.tokens&&(i=i.concat(wt.walkTokens(n.tokens,e)))}return i};wt.parseInline=function(t,e){if(typeof t>"u"||t===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof t!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");e=nr({},wt.defaults,e||{}),Lh(e);try{const i=Ar.lexInline(t,e);return e.walkTokens&&wt.walkTokens(i,e.walkTokens),hr.parseInline(i,e)}catch(i){if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+Wi(i.message+"",!0)+"</pre>";throw i}};wt.Parser=hr;wt.parser=hr.parse;wt.Renderer=A1;wt.TextRenderer=Ph;wt.Lexer=Ar;wt.lexer=Ar.lex;wt.Tokenizer=C1;wt.Slugger=$h;wt.parse=wt;wt.options;wt.setOptions;wt.use;wt.walkTokens;wt.parseInline;const Bh=wt;hr.parse;Ar.lex;/*! @license DOMPurify 2.5.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.4/LICENSE */function $r(t){"@babel/helpers - typeof";return $r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$r(t)}function Xl(t,e){return Xl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Xl(t,e)}function Ym(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ca(t,e,i){return Ym()?ca=Reflect.construct:ca=function(r,o,a){var l=[null];l.push.apply(l,o);var h=Function.bind.apply(r,l),g=new h;return a&&Xl(g,a.prototype),g},ca.apply(null,arguments)}function Jn(t){return qm(t)||Xm(t)||Zm(t)||Gm()}function qm(t){if(Array.isArray(t))return Zl(t)}function Xm(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Zm(t,e){if(t){if(typeof t=="string")return Zl(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Zl(t,e)}}function Zl(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Gm(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Km=Object.hasOwnProperty,X2=Object.setPrototypeOf,Jm=Object.isFrozen,Qm=Object.getPrototypeOf,e4=Object.getOwnPropertyDescriptor,on=Object.freeze,Wn=Object.seal,t4=Object.create,Wh=typeof Reflect<"u"&&Reflect,Sa=Wh.apply,Gl=Wh.construct;Sa||(Sa=function(e,i,n){return e.apply(i,n)});on||(on=function(e){return e});Wn||(Wn=function(e){return e});Gl||(Gl=function(e,i){return ca(e,Jn(i))});var i4=Hn(Array.prototype.forEach),Z2=Hn(Array.prototype.pop),Gs=Hn(Array.prototype.push),ha=Hn(String.prototype.toLowerCase),vl=Hn(String.prototype.toString),G2=Hn(String.prototype.match),Gn=Hn(String.prototype.replace),n4=Hn(String.prototype.indexOf),r4=Hn(String.prototype.trim),$i=Hn(RegExp.prototype.test),bl=s4(TypeError);function K2(t){return typeof t=="number"&&isNaN(t)}function Hn(t){return function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return Sa(t,e,n)}}function s4(t){return function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return Gl(t,i)}}function Nt(t,e,i){var n;i=(n=i)!==null&&n!==void 0?n:ha,X2&&X2(t,null);for(var r=e.length;r--;){var o=e[r];if(typeof o=="string"){var a=i(o);a!==o&&(Jm(e)||(e[r]=a),o=a)}t[o]=!0}return t}function is(t){var e=t4(null),i;for(i in t)Sa(Km,t,[i])===!0&&(e[i]=t[i]);return e}function Qo(t,e){for(;t!==null;){var i=e4(t,e);if(i){if(i.get)return Hn(i.get);if(typeof i.value=="function")return Hn(i.value)}t=Qm(t)}function n(r){return console.warn("fallback value for",r),null}return n}var J2=on(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),yl=on(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),wl=on(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),o4=on(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),xl=on(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),a4=on(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Q2=on(["#text"]),ec=on(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),El=on(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),tc=on(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ea=on(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),l4=Wn(/\{\{[\w\W]*|[\w\W]*\}\}/gm),c4=Wn(/<%[\w\W]*|[\w\W]*%>/gm),h4=Wn(/\${[\w\W]*}/gm),u4=Wn(/^data-[\-\w.\u00B7-\uFFFF]/),d4=Wn(/^aria-[\-\w]+$/),f4=Wn(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),p4=Wn(/^(?:\w+script|data):/i),g4=Wn(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),m4=Wn(/^html$/i),_4=Wn(/^[a-z][.\w]*(-[.\w]+)+$/i),v4=function(){return typeof window>"u"?null:window},b4=function(e,i){if($r(e)!=="object"||typeof e.createPolicy!="function")return null;var n=null,r="data-tt-policy-suffix";i.currentScript&&i.currentScript.hasAttribute(r)&&(n=i.currentScript.getAttribute(r));var o="dompurify"+(n?"#"+n:"");try{return e.createPolicy(o,{createHTML:function(l){return l},createScriptURL:function(l){return l}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function Hh(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v4(),e=function(ne){return Hh(ne)};if(e.version="2.5.4",e.removed=[],!t||!t.document||t.document.nodeType!==9)return e.isSupported=!1,e;var i=t.document,n=t.document,r=t.DocumentFragment,o=t.HTMLTemplateElement,a=t.Node,l=t.Element,h=t.NodeFilter,g=t.NamedNodeMap,_=g===void 0?t.NamedNodeMap||t.MozNamedAttrMap:g,x=t.HTMLFormElement,T=t.DOMParser,M=t.trustedTypes,D=l.prototype,F=Qo(D,"cloneNode"),Q=Qo(D,"nextSibling"),K=Qo(D,"childNodes"),Z=Qo(D,"parentNode");if(typeof o=="function"){var ee=n.createElement("template");ee.content&&ee.content.ownerDocument&&(n=ee.content.ownerDocument)}var he=b4(M,i),pe=he?he.createHTML(""):"",p=n,H=p.implementation,oe=p.createNodeIterator,me=p.createDocumentFragment,Te=p.getElementsByTagName,Ae=i.importNode,ve={};try{ve=is(n).documentMode?n.documentMode:{}}catch{}var Le={};e.isSupported=typeof Z=="function"&&H&&H.createHTMLDocument!==void 0&&ve!==9;var We=l4,it=c4,Ye=h4,tt=u4,Qe=d4,st=p4,Tt=g4,N=_4,O=f4,k=null,$=Nt({},[].concat(Jn(J2),Jn(yl),Jn(wl),Jn(xl),Jn(Q2))),B=null,te=Nt({},[].concat(Jn(ec),Jn(El),Jn(tc),Jn(ea))),X=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),fe=null,ae=null,Ee=!0,He=!0,Ge=!1,nt=!0,E=!1,R=!0,L=!1,J=!1,ue=!1,ce=!1,Oe=!1,et=!1,Ze=!0,lt=!1,xt="user-content-",ht=!0,Ot=!1,qt={},Zt=null,Pt=Nt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ut=null,ci=Nt({},["audio","video","img","source","image","track"]),pi=null,Ii=Nt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Gt="http://www.w3.org/1998/Math/MathML",xi="http://www.w3.org/2000/svg",Wt="http://www.w3.org/1999/xhtml",Dt=Wt,ji=!1,hi=null,vn=Nt({},[Gt,xi,Wt],vl),bi,zi=["application/xhtml+xml","text/html"],Ei="text/html",Mt,an=null,Ui=255,Vi=n.createElement("form"),Oi=function(ne){return ne instanceof RegExp||ne instanceof Function},ln=function(ne){an&&an===ne||((!ne||$r(ne)!=="object")&&(ne={}),ne=is(ne),bi=zi.indexOf(ne.PARSER_MEDIA_TYPE)===-1?bi=Ei:bi=ne.PARSER_MEDIA_TYPE,Mt=bi==="application/xhtml+xml"?vl:ha,k="ALLOWED_TAGS"in ne?Nt({},ne.ALLOWED_TAGS,Mt):$,B="ALLOWED_ATTR"in ne?Nt({},ne.ALLOWED_ATTR,Mt):te,hi="ALLOWED_NAMESPACES"in ne?Nt({},ne.ALLOWED_NAMESPACES,vl):vn,pi="ADD_URI_SAFE_ATTR"in ne?Nt(is(Ii),ne.ADD_URI_SAFE_ATTR,Mt):Ii,Ut="ADD_DATA_URI_TAGS"in ne?Nt(is(ci),ne.ADD_DATA_URI_TAGS,Mt):ci,Zt="FORBID_CONTENTS"in ne?Nt({},ne.FORBID_CONTENTS,Mt):Pt,fe="FORBID_TAGS"in ne?Nt({},ne.FORBID_TAGS,Mt):{},ae="FORBID_ATTR"in ne?Nt({},ne.FORBID_ATTR,Mt):{},qt="USE_PROFILES"in ne?ne.USE_PROFILES:!1,Ee=ne.ALLOW_ARIA_ATTR!==!1,He=ne.ALLOW_DATA_ATTR!==!1,Ge=ne.ALLOW_UNKNOWN_PROTOCOLS||!1,nt=ne.ALLOW_SELF_CLOSE_IN_ATTR!==!1,E=ne.SAFE_FOR_TEMPLATES||!1,R=ne.SAFE_FOR_XML!==!1,L=ne.WHOLE_DOCUMENT||!1,ce=ne.RETURN_DOM||!1,Oe=ne.RETURN_DOM_FRAGMENT||!1,et=ne.RETURN_TRUSTED_TYPE||!1,ue=ne.FORCE_BODY||!1,Ze=ne.SANITIZE_DOM!==!1,lt=ne.SANITIZE_NAMED_PROPS||!1,ht=ne.KEEP_CONTENT!==!1,Ot=ne.IN_PLACE||!1,O=ne.ALLOWED_URI_REGEXP||O,Dt=ne.NAMESPACE||Wt,X=ne.CUSTOM_ELEMENT_HANDLING||{},ne.CUSTOM_ELEMENT_HANDLING&&Oi(ne.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(X.tagNameCheck=ne.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ne.CUSTOM_ELEMENT_HANDLING&&Oi(ne.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(X.attributeNameCheck=ne.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ne.CUSTOM_ELEMENT_HANDLING&&typeof ne.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(X.allowCustomizedBuiltInElements=ne.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),E&&(He=!1),Oe&&(ce=!0),qt&&(k=Nt({},Jn(Q2)),B=[],qt.html===!0&&(Nt(k,J2),Nt(B,ec)),qt.svg===!0&&(Nt(k,yl),Nt(B,El),Nt(B,ea)),qt.svgFilters===!0&&(Nt(k,wl),Nt(B,El),Nt(B,ea)),qt.mathMl===!0&&(Nt(k,xl),Nt(B,tc),Nt(B,ea))),ne.ADD_TAGS&&(k===$&&(k=is(k)),Nt(k,ne.ADD_TAGS,Mt)),ne.ADD_ATTR&&(B===te&&(B=is(B)),Nt(B,ne.ADD_ATTR,Mt)),ne.ADD_URI_SAFE_ATTR&&Nt(pi,ne.ADD_URI_SAFE_ATTR,Mt),ne.FORBID_CONTENTS&&(Zt===Pt&&(Zt=is(Zt)),Nt(Zt,ne.FORBID_CONTENTS,Mt)),ht&&(k["#text"]=!0),L&&Nt(k,["html","head","body"]),k.table&&(Nt(k,["tbody"]),delete fe.tbody),on&&on(ne),an=ne)},Qi=Nt({},["mi","mo","mn","ms","mtext"]),cn=Nt({},["foreignobject","annotation-xml"]),en=Nt({},["title","style","font","a","script"]),tn=Nt({},yl);Nt(tn,wl),Nt(tn,o4);var hn=Nt({},xl);Nt(hn,a4);var gr=function(ne){var Me=Z(ne);(!Me||!Me.tagName)&&(Me={namespaceURI:Dt,tagName:"template"});var Ve=ha(ne.tagName),dt=ha(Me.tagName);return hi[ne.namespaceURI]?ne.namespaceURI===xi?Me.namespaceURI===Wt?Ve==="svg":Me.namespaceURI===Gt?Ve==="svg"&&(dt==="annotation-xml"||Qi[dt]):!!tn[Ve]:ne.namespaceURI===Gt?Me.namespaceURI===Wt?Ve==="math":Me.namespaceURI===xi?Ve==="math"&&cn[dt]:!!hn[Ve]:ne.namespaceURI===Wt?Me.namespaceURI===xi&&!cn[dt]||Me.namespaceURI===Gt&&!Qi[dt]?!1:!hn[Ve]&&(en[Ve]||!tn[Ve]):!!(bi==="application/xhtml+xml"&&hi[ne.namespaceURI]):!1},Kt=function(ne){Gs(e.removed,{element:ne});try{ne.parentNode.removeChild(ne)}catch{try{ne.outerHTML=pe}catch{ne.remove()}}},ui=function(ne,Me){try{Gs(e.removed,{attribute:Me.getAttributeNode(ne),from:Me})}catch{Gs(e.removed,{attribute:null,from:Me})}if(Me.removeAttribute(ne),ne==="is"&&!B[ne])if(ce||Oe)try{Kt(Me)}catch{}else try{Me.setAttribute(ne,"")}catch{}},Di=function(ne){var Me,Ve;if(ue)ne="<remove></remove>"+ne;else{var dt=G2(ne,/^[\r\n\t ]+/);Ve=dt&&dt[0]}bi==="application/xhtml+xml"&&Dt===Wt&&(ne='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ne+"</body></html>");var Jt=he?he.createHTML(ne):ne;if(Dt===Wt)try{Me=new T().parseFromString(Jt,bi)}catch{}if(!Me||!Me.documentElement){Me=H.createDocument(Dt,"template",null);try{Me.documentElement.innerHTML=ji?pe:Jt}catch{}}var oi=Me.body||Me.documentElement;return ne&&Ve&&oi.insertBefore(n.createTextNode(Ve),oi.childNodes[0]||null),Dt===Wt?Te.call(Me,L?"html":"body")[0]:L?Me.documentElement:oi},bn=function(ne){return oe.call(ne.ownerDocument||ne,ne,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null,!1)},yn=function(ne){return ne instanceof x&&(typeof ne.__depth<"u"&&typeof ne.__depth!="number"||typeof ne.__removalCount<"u"&&typeof ne.__removalCount!="number"||typeof ne.nodeName!="string"||typeof ne.textContent!="string"||typeof ne.removeChild!="function"||!(ne.attributes instanceof _)||typeof ne.removeAttribute!="function"||typeof ne.setAttribute!="function"||typeof ne.namespaceURI!="string"||typeof ne.insertBefore!="function"||typeof ne.hasChildNodes!="function")},Rn=function(ne){return $r(a)==="object"?ne instanceof a:ne&&$r(ne)==="object"&&typeof ne.nodeType=="number"&&typeof ne.nodeName=="string"},Si=function(ne,Me,Ve){Le[ne]&&i4(Le[ne],function(dt){dt.call(e,Me,Ve,an)})},rr=function(ne){var Me;if(Si("beforeSanitizeElements",ne,null),yn(ne)||$i(/[\u0080-\uFFFF]/,ne.nodeName))return Kt(ne),!0;var Ve=Mt(ne.nodeName);if(Si("uponSanitizeElement",ne,{tagName:Ve,allowedTags:k}),ne.hasChildNodes()&&!Rn(ne.firstElementChild)&&(!Rn(ne.content)||!Rn(ne.content.firstElementChild))&&$i(/<[/\w]/g,ne.innerHTML)&&$i(/<[/\w]/g,ne.textContent)||Ve==="select"&&$i(/<template/i,ne.innerHTML)||ne.nodeType===7||R&&ne.nodeType===8&&$i(/<[/\w]/g,ne.data))return Kt(ne),!0;if(!k[Ve]||fe[Ve]){if(!fe[Ve]&&Yi(Ve)&&(X.tagNameCheck instanceof RegExp&&$i(X.tagNameCheck,Ve)||X.tagNameCheck instanceof Function&&X.tagNameCheck(Ve)))return!1;if(ht&&!Zt[Ve]){var dt=Z(ne)||ne.parentNode,Jt=K(ne)||ne.childNodes;if(Jt&&dt)for(var oi=Jt.length,Ft=oi-1;Ft>=0;--Ft){var Bt=F(Jt[Ft],!0);Bt.__removalCount=(ne.__removalCount||0)+1,dt.insertBefore(Bt,Q(ne))}}return Kt(ne),!0}return ne instanceof l&&!gr(ne)||(Ve==="noscript"||Ve==="noembed"||Ve==="noframes")&&$i(/<\/no(script|embed|frames)/i,ne.innerHTML)?(Kt(ne),!0):(E&&ne.nodeType===3&&(Me=ne.textContent,Me=Gn(Me,We," "),Me=Gn(Me,it," "),Me=Gn(Me,Ye," "),ne.textContent!==Me&&(Gs(e.removed,{element:ne.cloneNode()}),ne.textContent=Me)),Si("afterSanitizeElements",ne,null),!1)},mr=function(ne,Me,Ve){if(Ze&&(Me==="id"||Me==="name")&&(Ve in n||Ve in Vi||Ve==="__depth"||Ve==="__removalCount"))return!1;if(!(He&&!ae[Me]&&$i(tt,Me))){if(!(Ee&&$i(Qe,Me))){if(!B[Me]||ae[Me]){if(!(Yi(ne)&&(X.tagNameCheck instanceof RegExp&&$i(X.tagNameCheck,ne)||X.tagNameCheck instanceof Function&&X.tagNameCheck(ne))&&(X.attributeNameCheck instanceof RegExp&&$i(X.attributeNameCheck,Me)||X.attributeNameCheck instanceof Function&&X.attributeNameCheck(Me))||Me==="is"&&X.allowCustomizedBuiltInElements&&(X.tagNameCheck instanceof RegExp&&$i(X.tagNameCheck,Ve)||X.tagNameCheck instanceof Function&&X.tagNameCheck(Ve))))return!1}else if(!pi[Me]){if(!$i(O,Gn(Ve,Tt,""))){if(!((Me==="src"||Me==="xlink:href"||Me==="href")&&ne!=="script"&&n4(Ve,"data:")===0&&Ut[ne])){if(!(Ge&&!$i(st,Gn(Ve,Tt,"")))){if(Ve)return!1}}}}}}return!0},Yi=function(ne){return ne!=="annotation-xml"&&G2(ne,N)},wn=function(ne){var Me,Ve,dt,Jt;Si("beforeSanitizeAttributes",ne,null);var oi=ne.attributes;if(oi){var Ft={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:B};for(Jt=oi.length;Jt--;){Me=oi[Jt];var Bt=Me,$t=Bt.name,ct=Bt.namespaceURI;if(Ve=$t==="value"?Me.value:r4(Me.value),dt=Mt($t),Ft.attrName=dt,Ft.attrValue=Ve,Ft.keepAttr=!0,Ft.forceKeepAttr=void 0,Si("uponSanitizeAttribute",ne,Ft),Ve=Ft.attrValue,!Ft.forceKeepAttr&&(ui($t,ne),!!Ft.keepAttr)){if(!nt&&$i(/\/>/i,Ve)){ui($t,ne);continue}if(R&&$i(/((--!?|])>)|<\/(style|title)/i,Ve)){ui($t,ne);continue}E&&(Ve=Gn(Ve,We," "),Ve=Gn(Ve,it," "),Ve=Gn(Ve,Ye," "));var vr=Mt(ne.nodeName);if(mr(vr,dt,Ve)){if(lt&&(dt==="id"||dt==="name")&&(ui($t,ne),Ve=xt+Ve),he&&$r(M)==="object"&&typeof M.getAttributeType=="function"&&!ct)switch(M.getAttributeType(vr,dt)){case"TrustedHTML":{Ve=he.createHTML(Ve);break}case"TrustedScriptURL":{Ve=he.createScriptURL(Ve);break}}try{ct?ne.setAttributeNS(ct,$t,Ve):ne.setAttribute($t,Ve),yn(ne)?Kt(ne):Z2(e.removed)}catch{}}}}Si("afterSanitizeAttributes",ne,null)}},_r=function Ue(ne){var Me,Ve=bn(ne);for(Si("beforeSanitizeShadowDOM",ne,null);Me=Ve.nextNode();)if(Si("uponSanitizeShadowNode",Me,null),!rr(Me)){var dt=Z(Me);Me.nodeType===1&&(dt&&dt.__depth?Me.__depth=(Me.__removalCount||0)+dt.__depth+1:Me.__depth=1),(Me.__depth>=Ui||K2(Me.__depth))&&Kt(Me),Me.content instanceof r&&(Me.content.__depth=Me.__depth,Ue(Me.content)),wn(Me)}Si("afterSanitizeShadowDOM",ne,null)};return e.sanitize=function(Ue){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Me,Ve,dt,Jt,oi;if(ji=!Ue,ji&&(Ue="<!-->"),typeof Ue!="string"&&!Rn(Ue))if(typeof Ue.toString=="function"){if(Ue=Ue.toString(),typeof Ue!="string")throw bl("dirty is not a string, aborting")}else throw bl("toString is not a function");if(!e.isSupported){if($r(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof Ue=="string")return t.toStaticHTML(Ue);if(Rn(Ue))return t.toStaticHTML(Ue.outerHTML)}return Ue}if(J||ln(ne),e.removed=[],typeof Ue=="string"&&(Ot=!1),Ot){if(Ue.nodeName){var Ft=Mt(Ue.nodeName);if(!k[Ft]||fe[Ft])throw bl("root node is forbidden and cannot be sanitized in-place")}}else if(Ue instanceof a)Me=Di("<!---->"),Ve=Me.ownerDocument.importNode(Ue,!0),Ve.nodeType===1&&Ve.nodeName==="BODY"||Ve.nodeName==="HTML"?Me=Ve:Me.appendChild(Ve);else{if(!ce&&!E&&!L&&Ue.indexOf("<")===-1)return he&&et?he.createHTML(Ue):Ue;if(Me=Di(Ue),!Me)return ce?null:et?pe:""}Me&&ue&&Kt(Me.firstChild);for(var Bt=bn(Ot?Ue:Me);dt=Bt.nextNode();)if(!(dt.nodeType===3&&dt===Jt)&&!rr(dt)){var $t=Z(dt);dt.nodeType===1&&($t&&$t.__depth?dt.__depth=(dt.__removalCount||0)+$t.__depth+1:dt.__depth=1),(dt.__depth>=Ui||K2(dt.__depth))&&Kt(dt),dt.content instanceof r&&(dt.content.__depth=dt.__depth,_r(dt.content)),wn(dt),Jt=dt}if(Jt=null,Ot)return Ue;if(ce){if(Oe)for(oi=me.call(Me.ownerDocument);Me.firstChild;)oi.appendChild(Me.firstChild);else oi=Me;return(B.shadowroot||B.shadowrootmod)&&(oi=Ae.call(i,oi,!0)),oi}var ct=L?Me.outerHTML:Me.innerHTML;return L&&k["!doctype"]&&Me.ownerDocument&&Me.ownerDocument.doctype&&Me.ownerDocument.doctype.name&&$i(m4,Me.ownerDocument.doctype.name)&&(ct="<!DOCTYPE "+Me.ownerDocument.doctype.name+`>
`+ct),E&&(ct=Gn(ct,We," "),ct=Gn(ct,it," "),ct=Gn(ct,Ye," ")),he&&et?he.createHTML(ct):ct},e.setConfig=function(Ue){ln(Ue),J=!0},e.clearConfig=function(){an=null,J=!1},e.isValidAttribute=function(Ue,ne,Me){an||ln({});var Ve=Mt(Ue),dt=Mt(ne);return mr(Ve,dt,Me)},e.addHook=function(Ue,ne){typeof ne=="function"&&(Le[Ue]=Le[Ue]||[],Gs(Le[Ue],ne))},e.removeHook=function(Ue){if(Le[Ue])return Z2(Le[Ue])},e.removeHooks=function(Ue){Le[Ue]&&(Le[Ue]=[])},e.removeAllHooks=function(){Le={}},e}var jh=Hh();const y4=ft.View.extend({el:C("body"),model:_n,editing:!1,initialize:function(){this.listenTo(this.model,"change:x change:legend",this.legendChanged),this.render()},events:{"click .edit-legend":"editLegend","click .cancel-legend":"cancelLegend","click .save-legend":"saveLegend","click .collapse-legend":"collapseLegend","click .expand-legend":"expandLegend","click .markdown-info":"markdownInfo","click .panel-body p":"legendClick"},legendClick:function(t){if(t.preventDefault(),t.target.nodeName.toLowerCase()=="a"){var e=t.target.getAttribute("href");return window.open(e,"_blank"),!1}else this.model.get("legend_collapsed")?this.expandLegend():this.editLegend()},markdownInfo:function(t){t.preventDefault(),Hi("markdownInfoModal")},collapseLegend:function(t){this.renderCollapsed(!0),this.model.set("legend_collapsed",!0)},expandLegend:function(t){this.renderCollapsed(!1),this.model.set("legend_collapsed",!1)},saveLegend:function(t){t.preventDefault();var e=C("#js-legend textarea").val();this.model.save("legend",e),this.editing=!1,this.render()},editLegend:function(t){t&&t.preventDefault(),this.editing=!0,this.model.get("legend_collapsed")&&this.model.set("legend_collapsed",!1),this.render()},cancelLegend:function(t){t.preventDefault(),this.editing=!1,this.render()},renderCollapsed:function(t){var e=C(".panel",self.el);t?(e.addClass("legend-collapsed"),e.removeClass("legend-expanded")):(e.removeClass("legend-collapsed"),e.addClass("legend-expanded"))},legendChanged:function(){this.editing=!1,this.render()},render:function(){var t=this,e=this.model.get("legend")||"",i=this.model.get("legend_collapsed"),n=C("#js-legend"),r=C(".edit-legend",n),o=C(".save-legend",n),a=C(".cancel-legend",n),l=C(".panel",n),h=C(".legend",n);if(t.renderCollapsed(i),t.editing){r.hide(),o.show(),a.show(),l.addClass("editing"),l.show();var g='<textarea class="form-control" rows="9" style="resize:none">'+e+"</textarea>";h.html(g),C(".legend-container").css("z-index",100)}else r.show(),o.hide(),a.hide(),C(".legend-container").css("z-index",1),l.removeClass("editing"),e.length===0?(l.hide(),r.text("Add Figure Legend")):(l.show(),e=jh.sanitize(Bh(e)),h.html(e),r.text("Edit Figure Legend"))}});var w4=ft.View.extend({el:C("#labelsFromMapAnns"),model:_n,options:{},initialize:function(){document.getElementById("labelsFromMapAnns").addEventListener("shown.bs.modal",t=>{this.options=t.relatedTarget,this.loadMapAnns()})},events:{"submit .labelsFromMapAnnsForm":"handleForm","change select":"renderExampleLabel","change input":"renderExampleLabel"},loadMapAnns(){let t=this.model.getSelected().map(function(i){return i.get("imageId")});this.isLoading=!0,C("select",this.el).html("<option>Loading data...</option>");var e=WEBINDEX_URL+"api/annotations/?type=map&parents=true&image=";e+=t.join("&image="),Yr(e).then(i=>{i.hasOwnProperty("parents")&&i.parents.annotations.forEach(function(n){let r=n.link.parent.class,o=""+n.link.parent.id,a=i.parents.lineage[r][o];for(let l=0;l<a.length;l++){let h=JSON.parse(JSON.stringify(n));h.link.parent.id=a[l].id,i.annotations.push(h)}}),this.isLoading=!1,this.annotations=i.annotations,this.render()})},handleForm:function(t){if(t.preventDefault(),!this.isLoading){var e=C("input[name='kvpChoice']:checked").val(),i;e==="single-key"&&(i=C("select",this.el).val());var n=C("input[name='includeKey']").is(":checked"),r=this.options.size||"12",o=this.options.position||"top",a=this.options.color||"000000",l=this.annotations.reduce(function(h,g){var _=g.link.parent.id;return h[_]||(h[_]=[]),g.values.forEach(function(x){var T=x[1];(e==="all-keys"||x[0]===i)&&h[_].indexOf(T)===-1&&h[_].push(x)}),h},{});return this.model.getSelected().forEach(function(h){var g=h.get("imageId");if(l[g]){var _=l[g].map(function(x){return{text:n?x[0].replaceAll("_","\\_")+": "+x[1].replaceAll("_","\\_"):x[1].replaceAll("_","\\_"),size:r,position:o,color:a}});h.add_labels(_)}}),Mr("labelsFromMapAnns"),!1}},renderExampleLabel:function(){for(var t=C("select",this.el).val(),e=C("input[name='includeKey']").is(":checked"),i,n=0;n<this.annotations.length&&(this.annotations[n].values.forEach(function(r){r[0]===t&&(i=r[1])}),!i);n++);e&&(i=t+": "+i),this.annotations.length==0&&(i=""),C("#exampleLabelFromMap").html($e.escape(i))},render:function(){var t={};this.annotations.forEach(function(o){let a=o.link.parent.id;o.values.forEach(function(l){var h=l[0];t[h]||(t[h]={}),t[h][a]=!0})});var e=[],i={};for(var n in t)t.hasOwnProperty(n)&&(e.push(n),i[n]=Object.keys(t[n]).length);e.sort(function(o,a){return o.toUpperCase()<a.toUpperCase()?-1:1});var r=e.map(function(o){return"<option value='"+$e.escape(o)+"'>"+$e.escape(o)+" ("+i[o]+")</option>"}).join("");e.length===0&&(r="<option>No Key-Value Pairs found</option>"),C("select",this.el).html(r),this.renderExampleLabel()}});const x4=`    <!-- The content of <div class='imagePanel'> for each panel -->
    <div class="imgContainer">
        <i class="bi-arrow-repeat image_panel_spinner"></i>
        <img class="img_panel" />
        <div id="<%= randomId %>" class="panel_canvas"></div>
    </div>
`,E4=`

    <!-- One of these added to each position 'top', 'topleft' etc within Panel $el -->
    <div class="label_layout label_<%= position %>">
        <% _.each(labels, function(l, i) { %>
            <div style='color:#<%= l.color %>; font-size:<%= l.size %>px'><%= l.text %></div>
        <% }); %>
    </div>
`,S4=`
    <div class="label_layout left_vlabels">
        <div>
            <% _.each(labels, function(l, i) { %>
                <div style='color:#<%= l.color %>; font-size:<%= l.size %>px'><%= l.text %></div>
            <% }); %>
        </div>
    </div>
`,T4=`
<div class="label_layout right_vlabels">
    <div>
        <% _.each(labels, function(l, i) { %>
            <div style='color:#<%= l.color %>; font-size:<%= l.size %>px'><%= l.text %></div>
        <% }); %>
    </div>
</div>
`,k4=`
    <!-- Alternative label_template - uses table to valign middle for 'left' & 'right' labels -->
    <div class="label_layout label_middle label_<%= position %>">
        <table>
            <tr><td>
                <% _.each(labels, function(l, i) { %>
                    <div style='color:#<%= l.color %>; font-size:<%= l.size %>px'><%= l.text %></div>
                <% }); %>
            </td></tr>
        </table>
    </div>
`,C4=`
    <div class="scalebar label_<%= position %>" style="background-color: #<%= color %>; height: <%= height %>px">
        <% if (show_label) { %>
            <div class='scalebar-label' style='color: #<%= color %>; font-size: <%= font_size %>px;
            <% if(position === "bottomleft"  || position === "bottomright") print("margin-bottom:" + height);%>px;
            <% if(position === "topleft"  || position === "topright") print("margin-top:" + height);%>px;'>
                <%= length %> <%= symbol %>
            </div>
        <% } %>
    </div>
`,A4=`<div class="colorbar" style="<%= inv_position %>: 100%;">
    <% if (show) { %>
        <div class="colorbar_<%= position %>"
             style="margin-<%= inv_position %>: <%= gap %>px;">

            <div class="colorbar_bg "
                style="height: <%= thickness + 1 %>px;
                        background-image: <%= isLUT ? 'url(' + lut_url + ')' : 'linear-gradient(to left, #' + color + ', black)' %>;
                        <%= isLUT ? 'background-position: ' + lutBgPos : '' %>;
                        <%= reverseIntensity ? 'transform: scaleX(-1);' : '' %>;">
            </div>
        </div>

        <div class="colorbar_ticks_<%= position %>" style="border-<%= inv_position %>: 2px solid #<%= axis_color %>; margin-<%= inv_position %>: <%= thickness + gap %>px; ">
            <% for (let i = 0; i < num_ticks; i++) { %>
                <div class="colorbar_tick_<%= orientation %>">
                    <% if (position == "right" || position == "bottom") { %>
                        <div class="colorbar_dash_<%= orientation %>"
                            style="background-color: #<%= axis_color %>;
                                   <%= position == 'right' ? 'width' : 'height' %>: <%= mark_len + 1 %>px;
                                   <%= position %>: 1px">
                        </div>
                    <% } %>
                        <span class="label colorbar_label_<%= orientation %>"
                              style="color: #<%= axis_color %>;
                                     font-size: <%= font_size %>px;
                                     margin-<%= inv_position %>: <%= tick_margin %>px;">
                            <!-- Label is rounded to decimal proportionally to the spacing between each tick.  -->
                            <%= ((end - start) * i / (num_ticks-1) + start).toFixed(Math.max(0, Math.ceil(-Math.log10((end - start) / num_ticks)))) %>
                        </span>
                    <% if (position == "left" || position == "top") { %>
                        <div class="colorbar_dash_<%= orientation %>"
                             style="background-color: #<%= axis_color %>;
                                    <%= position == 'left' ? 'width' : 'height' %>: <%= mark_len + 1 %>px;
                                    <%= position %>: 1px">
                        </div>
                    <% } %>
                </div>
            <% } %>
        </div>
    <% } %>
</div>
`,I4=`

<div class="btn-group-vertical col-sm-6" role="group">

	<% _.each(luts, function(lut, i) { %>

		<button type="button" class="btn btn-default lutOption" data-lut="<%= lut.name %>">
			<% if (lut.png) { %>
				<img height="24px" src="<%= lut.png %>" />
			<% } else { %>
				<span class="lutBg" style="background-position: <%= lut.bgPos %>;">&nbsp</span>
			<% } %>
			<%= lut.displayName %> </button>

		<% if (i === parseInt(luts.length/2)) { %>
			</div>
			<div class="btn-group-vertical col-sm-6" role="group">
		<% } %>

	<% }) %>
</div>
`,O4=""+new URL("luts_10-CgN3hjir.png",import.meta.url).href;var M4=ft.View.extend({el:C("#lutpickerModal"),template:$e.template(I4),initialize:function(){this.lutModal=new Ji("#lutpickerModal"),this.lut_names=[],this.luts=Mg(),this.loadLuts()},events:{"click button[type='submit']":"handleSubmit","click .lutOption":"pickLut"},handleSubmit:function(){this.success(this.pickedLut),this.lutModal.hide()},pickLut:function(t){var e=t.currentTarget.getAttribute("data-lut");this.pickedLut=e;var i=this.luts.find(r=>r.name==e);if(i.png)C(".lutPreview",this.el).css({"background-position":"0 0","background-image":"url('"+i.png+"')","background-size":"100% 100%"});else{var n=this.getLutBackgroundPosition(e);C(".lutPreview",this.el).css({"background-position":n,"background-image":`url(${this.lutsPngUrl})`})}C("button[type='submit']",this.el).removeAttr("disabled")},loadLuts:async function(t=!1){if(!APP_SERVED_BY_OMERO){C(":root").css({"--pngHeight":"100%"});return}var e=WEBGATEWAYINDEX+"luts/";let i={mode:"cors",credentials:"include"};if(t||this.lut_names===void 0||this.lutsPngUrl===void 0||this.luts===void 0){const o=await(await fetch(e,i)).json();this.luts=o.luts,this.lut_names=o.png_luts,this.is_dynamic_lut=!!o.png_luts_new,this.is_dynamic_lut?(this.luts=this.luts.map(function(a){return a.png_index=a.png_index_new,a}),this.lut_names=o.png_luts_new,this.lutsPngUrl=`${WEBGATEWAYINDEX}luts_png/`):this.lutsPngUrl=STATIC_DIR+O4,this.lut_names=this.lut_names.map(a=>a.split("/").pop());var n=this.lut_names.length;this.is_dynamic_lut||(n=n-1),C(":root").css({"--pngHeight":n*1e3+"px","--lutPng":"url("+this.lutsPngUrl+")"})}return this.lutsPngUrl},getLutPng(t){var e=this.luts.find(i=>i.name==t);if(e&&e.png)return e.png},getLutBackgroundPosition:function(t){var e=this.lut_names.indexOf(t);return e>-1?"0px -"+(e*1e3+2)+"px":"0px 100px"},formatLutName:function(t){return t=t.replace(".lut",""),t=t.replace(/_/g," "),t=t[0].toUpperCase()+t.slice(1),t},show:function(t){Hi("lutpickerModal"),t.success&&(this.success=t.success),this.render()},render:function(){var t="",e;this.luts?(e=this.luts.map((function(i){return{bgPos:this.getLutBackgroundPosition(i.name),name:i.name,png:i.png,displayName:this.formatLutName(i.name)}}).bind(this)),t=this.template({luts:e})):(t="<p>Loading Lookup Tables failed.</p>",t+="<p>Your OMERO version does not support LUTs. Please upgrade.</p>"),C(".modal-body",this.el).html(t)}});const Ts=new M4;var N4=ft.View.extend({tagName:"div",className:"imagePanel",template:$e.template(x4),label_template:$e.template(E4),label_vertical_template:$e.template(S4),label_right_vertical_template:$e.template(T4),label_table_template:$e.template(k4),scalebar_template:$e.template(C4),colorbar_template:$e.template(A4),initialize:function(t){this.model.on("destroy",this.remove,this),this.listenTo(this.model,"change:x change:y change:width change:height change:zoom change:dx change:dy change:rotation change:vertical_flip change:horizontal_flip",this.render_layout),this.listenTo(this.model,"change:scalebar change:pixel_size_x",this.render_scalebar),this.listenTo(this.model,"change:colorbar change:channels",this.render_colorbar),this.listenTo(this.model,"change:zoom change:dx change:dy change:width change:height change:channels change:theZ change:theT change:z_start change:z_end change:z_projection change:min_export_dpi change:pixel_range change:vertical_flip change:horizontal_flip",this.render_image),this.listenTo(this.model,"change:channels change:zoom change:dx change:dy change:width change:height change:rotation change:labels change:theT change:deltaT change:theZ change:deltaZ change:z_projection change:z_start change:z_end",this.render_labels),this.listenTo(this.model,"change:shapes",this.render_shapes),this.listenTo(this.model,"change:border",this.render_layout),this.model.on("drag_resize",this.drag_resize,this),t.page_color&&(this.page_color=t.page_color),this.render()},events:{},drag_resize:function(t){var e=t[0],i=t[1],n=t[2],r=t[3];if(n==this.model.get("width")&&r==this.model.get("height")){var o=this.model.get("border");if(o!=null&&o.showBorder){let a=o.strokeWidth;e=e-a,i=i-a}this.$el.css({top:i+"px",left:e+"px"})}else this.update_resize(e,i,n,r),this.render_shapes();this.$el.addClass("dragging")},render_layout:function(){var t=this.model.get("x"),e=this.model.get("y"),i=this.model.get("width"),n=this.model.get("height");this.update_resize(t,e,i,n),this.render_labels(),this.$el.removeClass("dragging")},update_resize:function(t,e,i,n){var r=this.model.get("border"),o=i,a=n;if(r!=null&&r.showBorder){let ee=r.strokeWidth;this.$el.css({border:`solid ${ee}px ${r.color}`}),t=t-ee,e=e-ee,o=i+ee*2,a=n+ee*2}else this.$el.css({border:""});this.$el.css({top:e+"px",left:t+"px",width:o+"px",height:a+"px"}),C(".left_vlabels",this.$el).css("width",3*a+"px"),C(".right_vlabels",this.$el).css("width",3*a+"px");var l=this.model.get("zoom"),h=this.model.get_vp_img_css(l,i,n),g=this.model.get_vp_full_plane_css(l,i,n),_=g.width/this.model.get("orig_width");this.model.is_big_image()&&(i!==this.model.get("width")||n!==this.model.get("height"))&&(h.width=0,h.height=0),this.$img_panel.css(h),this.$panel_canvas.css(g),this.shapeManager&&this.shapeManager.setZoom(_*100);var x=this.model.get("scalebar");if(x&&x.show){var T=x.length,M=this.model.get("pixel_size_x_unit"),D=x.units,F=LENGTH_UNITS[D].microns/LENGTH_UNITS[M].microns,Q=F*T/this.model.get("pixel_size_x"),K=_*Q;this.$scalebar.css("width",K)}var Z=this.model.get("colorbar");Z&&Z.show&&(Z.position=="left"||Z.position=="right")&&this.$colorbar&&(this.$colorbar.css("width",n),this.$colorbar.css("height",n))},render_shapes:function(){var t=this.model.get("shapes"),e=this.model.get("orig_width"),i=this.model.get("orig_height");if(t){if(!this.shapeManager){var n=this.$panel_canvas.attr("id");this.$panel_canvas.attr({width:e+"px",height:i+"px"});var r=this.$panel_canvas.width()/e;this.shapeManager=new It(n,e,i,{readOnly:!0}),this.shapeManager.setZoom(r*100)}this.shapeManager.setShapesJson(t)}else this.shapeManager&&this.shapeManager.deleteAllShapes()},render_image:function(){this.model.is_big_image()&&(this.$img_panel.hide(),C(".image_panel_spinner",this.$el).show()),this.$img_panel.one("load",(function(){C(".image_panel_spinner",this.$el).hide(),this.$img_panel.show()}).bind(this)),this.model.get_img_src().then(t=>this.$img_panel.attr("src",t)),this.model.get("min_export_dpi")>100?this.$img_panel.removeClass("pixelated"):this.$img_panel.addClass("pixelated")},render_labels:function(){C(".label_layout",this.$el).remove();var t=this.model.get("labels"),e=this,i={top:[],bottom:[],left:[],right:[],leftvert:[],rightvert:[],topleft:[],topright:[],bottomleft:[],bottomright:[]};$e.each(t,function(a){var l=C.extend(!0,{},a);l.color.toLowerCase()==e.page_color.toLowerCase()&&["top","bottom","left","right","leftvert","rightvert"].indexOf(a.position)>-1&&(l.color==="000000"?l.color="ffffff":l.color="000000");const h=[...l.text.matchAll(/\[.+?\]/g)];if(h.length>0){var g="",_=0;for(const K of h){var g=g+l.text.slice(_,K.index),x=K[0].slice(1,-1).split(";"),T=x[0].trim().split("."),M={};x.slice(1).forEach(function(ee){var he=ee.split("=");he.length>1&&(M[he[0].trim()]=parseInt(he[1].trim()))});var D="",F,Q;["time","t"].includes(T[0])?(F=T[1]?T[1]:"index",Q=M.precision!==void 0?M.precision:0,D=e.model.get_time_label_text(F,M.offset,Q)):["image","dataset"].includes(T[0])?(F=T[1]?T[1]:"name",D=e.model.get_name_label_text(T[0],F),D=D.replaceAll("_","\\_")):["x","y","z","width","height","w","h","rotation","rot"].includes(T[0])?(F=T[1]?T[1]:"pixel",Q=M.precision!==void 0?M.precision:2,D=e.model.get_view_label_text(T[0],F,M.offset,Q)):["channels","c"].includes(T[0])?D=e.model.get_channels_label_text():["zoom"].includes(T[0])&&(D=e.model.get_zoom_label_text()),g=g+(D||K[0]),_=K.index+K[0].length}l.text=g+l.text.slice(_)}l.text=jh.sanitize(Bh(l.text)),i[a.position].push(l)});var n="";$e.each(i,function(a,l){var h={position:l,labels:a};a.length!==0&&(l=="leftvert"?n+=e.label_vertical_template(h):l=="rightvert"?n+=e.label_right_vertical_template(h):l=="left"||l=="right"?n+=e.label_table_template(h):n+=e.label_template(h))}),e.$el.append(n),C(".left_vlabels",e.$el).css("width",3*e.$el.height()+"px"),C(".right_vlabels",e.$el).css("width",3*e.$el.height()+"px");var r=this.model.get("border");if(r!=null){var o=5+r.strokeWidth;C(".left_vlabels>div",e.$el).css("margin-bottom",o+"px"),C(".right_vlabels>div",e.$el).css("margin-bottom",o+"px"),o=3+r.strokeWidth,C(".label_top",e.$el).css("margin-bottom",o+"px"),o=r.strokeWidth,C(".label_bottom",e.$el).css("margin-top",o+"px"),C(".label_left",e.$el).css("margin-right",o+"px"),C(".label_right",e.$el).css("margin-left",o+"px")}else C(".left_vlabels>div",e.$el).css("mSargin-bottom","5px"),C(".right_vlabels>div",e.$el).css("margin-bottom","5px"),C(".label_top",e.$el).css("margin-bottom","3px"),C(".label_bottom",e.$el).css("margin-top",""),C(".label_left",e.$el).css("margin-right",""),C(".label_right",e.$el).css("margin-left","");return this},render_scalebar:function(){this.$scalebar&&this.$scalebar.remove();var t=this.model.get("scalebar");if(t&&t.show){var e={};e.position=t.position,e.color=t.color,e.length=t.length,e.height=t.height,e.font_size=t.font_size,e.show_label=t.show_label,e.symbol=t.units,LENGTH_UNITS&&LENGTH_UNITS[t.units]&&(e.symbol=LENGTH_UNITS[t.units].symbol);var i=this.scalebar_template(e);this.$el.append(i)}this.$scalebar=C(".scalebar",this.$el),this.render_layout()},render_colorbar:async function(){var M,D;this.$colorbar&&this.$colorbar.remove();var t=this.model.get("colorbar"),e=0,i=125,n=!1,r="";for(const F of this.model.get("channels"))if(F.active){r=F.color,e=(M=F.window)==null?void 0:M.start,i=(D=F.window)==null?void 0:D.end,n=F.reverseIntensity;break}var o,a,l=!/^[0-9a-fA-F]+$/.test(r);if(l){var h=Ts.getLutPng(r);h?(o=h,a="0 0"):(o=await Ts.loadLuts(),a=Ts.getLutBackgroundPosition(r))}var g={left:"right",right:"left",top:"bottom",bottom:"top"},_={left:"vertical",right:"vertical",top:"horizontal",bottom:"horizontal"};if(t&&t.show){var x={position:t.position,inv_position:g[t.position],orientation:_[t.position],show:t.show,thickness:t.thickness,font_size:t.font_size,axis_color:t.axis_color,num_ticks:t.num_ticks,mark_len:t.mark_len,gap:t.gap,tick_margin:t.tick_margin,start:e,end:i,color:r,isLUT:l,lutBgPos:a,lut_url:o,reverseIntensity:n},T=this.colorbar_template(x);this.$el.append(T)}this.$colorbar=C(".colorbar",this.$el),this.render_layout()},render:function(){var t={randomId:"r"+Math.random()},e=this.template(t);this.$el.html(e),this.$img_panel=C(".img_panel",this.$el),this.$imgContainer=C(".imgContainer",this.$el),this.$panel_canvas=C(".panel_canvas",this.$el),this.render_image(),this.render_labels(),this.render_scalebar(),this.render_colorbar();var i=this;return setTimeout(function(){i.render_shapes()},10),this}});em($e,ft,Qs);const R4=ft.View.extend({el:C("#body"),initialize:function(t){this.app=t.app,new z4({model:this.model}),this.addImagesModal=new dm({model:this.model,figureView:this}),new um({model:this.model}),new hm({model:this.model}),new mm({model:this.model}),new _m({model:this.model}),new Om({model:this.model}),new cm({model:this.model}),new y4({model:this.model}),new w4({model:this.model}),new fm({model:this.model,app:this.app}),this.figureFiles=new nm,this.fileListViewModal=new rm({model:this.figureFiles,figureModel:this.model}),this.$main=C("main"),this.$canvas=C("#canvas"),this.$canvas_wrapper=C("#canvas_wrapper"),this.$figure=C("#figure"),this.$copyBtn=C(".copy"),this.$pasteBtn=C(".paste"),this.$saveBtn=C(".save_figure.btn"),this.$saveOption=C("li.save_figure"),this.$saveAsOption=C("li.save_as"),this.$deleteOption=C("li.delete_figure"),this.aboutModal=new Ji("#aboutModal");var e=this;this.model.on("change:paper_width change:paper_height change:page_count",this.render,this),this.model.panels.on("add",this.addOne,this),window.onbeforeunload=function(){if(e.model.get("canEdit"),e.model.get("unsaved"))return"Leave page with unsaved changes?"},C("#zoom_slider").on("input",i=>{e.model.set("curr_zoom",i.target.value)}),EXPORT_ENABLED&&C("button.export_pdf").removeAttr("disabled"),this.listenTo(this.model,"change:curr_zoom",this.renderZoom),this.listenTo(this.model,"change:selection",this.renderSelectionChange),this.listenTo(this.model,"change:unsaved",this.renderSaveBtn),this.listenTo(this.model,"change:figureName",this.renderFigureName),this.listenTo(this.model,"change:page_color",this.render),this.listenTo(this.model,"change:page_color",this.renderPanels),this.listenTo(this.model,"change:loading_count",this.renderLoadingSpinner),this.renderZoom(),this.render(),this.renderSelectionChange()},events:{"click .export_pdf":"export_pdf","click .export_options li":"export_options","click .add_panel":"addPanel","click .delete_panel":"deleteSelectedPanels","click .copy":"copy_selected_panels","click .paste":"paste_panels","click .save_figure":"save_figure_event","click .save_as":"save_as_event","click .new_figure":"goto_newfigure","click .open_figure":"open_figure","click .export_json":"export_json","click .import_json":"import_json","click .delete_figure":"delete_figure","click .chgrp_figure":"chgrp_figure","click .local_storage":"local_storage","click .paper_setup":"paper_setup","click .export-options a":"select_export_option","click .zoom-paper-to-fit":"zoom_paper_to_fit","click .about_figure":"show_about_dialog","click .figure-title":"start_editing_name","keyup .figure-title input":"figuretitle_keyup","blur .figure-title input":"stop_editing_name","submit .importJsonForm":"import_json_form"},keyboardEvents:{backspace:"deleteSelectedPanels",del:"deleteSelectedPanels","mod+a":"select_all","mod+c":"copy_selected_panels","mod+v":"paste_panels","mod+s":"save_figure_event","mod+n":"goto_newfigure","mod+o":"open_figure",down:"nudge_down",up:"nudge_up",left:"nudge_left",right:"nudge_right"},modal_visible:function(){return C("div.modal.show").length>0},export_options:function(t){t.preventDefault();var e=C(t.target);C(".export_options .bi-check-lg").css("visibility","hidden"),C(".bi-check-lg",e).css("visibility","visible");var i=e.attr("data-export-option");C(".export_pdf").text("Export "+i).attr("data-export-option",i),C("#pdf_download").hide()},paper_setup:function(t){t.preventDefault(),Hi("paperSetupModal")},show_about_dialog:function(t){t.preventDefault(),this.aboutModal.show()},start_editing_name:function(t){var e=C(t.target),i=e.text();i=i.replace(/"/g,"&quot;"),e.html('<input value="'+i+'"/>'),C("input",e).focus()},figuretitle_keyup:function(t){t.which===13&&(t.preventDefault(),this.stop_editing_name())},stop_editing_name:function(){var t=C(".figure-title input"),e=t.val().trim();if(e.length===0){alert("Can't have empty name.");return}C(".figure-title").html($e.escape(e)),this.model.save("figureName",e),this.figureFiles.reset()},export_pdf:function(t){console.log("Export pdf..."),t.preventDefault(),this.model;var e=C(t.target),i=e.attr("data-export-option"),n=C("#pdf_inprogress"),r=C("#pdf_download"),o=C("#script_error"),a="PDF";e.hide(),r.hide(),o.hide(),n.show(),a={PDF:"PDF","PDF & images":"PDF_IMAGES",TIFF:"TIFF","TIFF & images":"TIFF_IMAGES","to OMERO":"OMERO"}[i];var h=this.model.figure_toJSON(),g=MAKE_WEBFIGURE_URL,_={figureJSON:JSON.stringify(h),exportOption:a};C.post(g,_).done(function(x){var T=x.jobId;if(!T){x.error?alert(x.error):alert("Error exporting figure"),e.show(),n.hide();return}var M=setInterval(function(){C.getJSON(ACTIVITIES_JSON_URL,function(D){var F=D[T];if(F.status=="finished"){if(clearInterval(M),e.show(),n.hide(),F.results.New_Figure){var Q=F.results.New_Figure.id;if(F.results.New_Figure.type==="FileAnnotation"){var K=WEBINDEX_URL+"annotation/"+Q+"/";r.attr({href:K,"data-original-title":"Download Figure"}).show().children("span").prop("class","glyphicon glyphicon-download-alt")}else if(F.results.New_Figure.type==="Image"){var K=F.results.New_Figure.browse_url;r.attr({href:K,"data-original-title":"Go to Figure Image"}).show().tooltip().children("span").prop("class","glyphicon glyphicon-share")}}else if(F.stderr){var Z=WEBINDEX_URL+"get_original_file/"+F.stderr+"/";o.attr("href",Z).show()}}D.inprogress===0&&clearInterval(M)}).fail(function(){clearInterval(M)})},1e3)})},select_export_option:function(t){t.preventDefault();var e=C(t.target),i=e.children("span.glyphicon");i.length===0&&(i=e);var n=i.parent().parent(),r=n.parent().prev().prev(),o=i.attr("data-option"),a=r.find("span[data-option='"+o+"']");a.length>0?a.remove():(i=i.clone(),r.append(i)),r.trigger("change")},nudge_right:function(t){if(t.preventDefault(),this.modal_visible())return!0;this.model.nudge_right()},nudge_left:function(t){if(t.preventDefault(),this.modal_visible())return!0;this.model.nudge_left()},nudge_down:function(t){if(t.preventDefault(),this.modal_visible())return!0;this.model.nudge_down()},nudge_up:function(t){if(t.preventDefault(),this.modal_visible())return!0;this.model.nudge_up()},local_storage:function(t){var e=["Close"];let i=Ah();var n="<p>Any figure that fails to Save is stored in the browser's local storage.</p>";i?(e=e.concat(["Clear Storage","Recover Figure"]),n+="<p>You can Clear local storage or Recover the figure from local storage with the options below:</p>"):n+="<p>No Figure currently found.</p>";var r=function(o){o==="Clear Storage"?Ch():o==="Recover Figure"&&(window.location=BASE_WEBFIGURE_URL+"recover/")};Pn("Local Storage",n,e,r)},goto_newfigure:function(t){t&&t.preventDefault();var e=this,i=function(){e.model.clearFigure(),e.addImagesModal.modal.show(),e.app.navigate("new/",{trigger:!0})};if(this.model.get("unsaved")){var n="Save",r=this.model.get("canEdit");r||(n="Save a Copy"),Pn("Save Changes to Figure?","Your changes will be lost if you don't save them",["Cancel","Don't Save",n],function(o){o===n?e.save_figure({success:i}):o==="Don't Save"&&i()})}else i()},delete_figure:function(t){t.preventDefault();var e=this.model.get("fileId"),i=this.model.get("figureName");if(e){this.model.set("unsaved",!1);var n="Delete '"+i+"'?",r=this;confirm(n)&&C.post(BASE_WEBFIGURE_URL+"delete_web_figure/",{fileId:e}).done(function(){r.figureFiles.removeFile(e),r.app.navigate("",{trigger:!0})})}},chgrp_figure:function(t){t.preventDefault(),os(),Hi("chgrpModal")},open_figure:function(t){t.preventDefault(),os();var e=this,i=function(){APP_SERVED_BY_OMERO?e.fileListViewModal.modal.show():Hi("openLocalFileModal")};if(this.model.get("unsaved")){var n="Save",r=this.model.get("canEdit");r||(n="Save a Copy"),Pn("Save Changes to Figure?","Your changes will be lost if you don't save them",["Cancel","Don't Save",n],function(o){o===n?e.save_figure({success:i}):o==="Don't Save"&&(e.model.set("unsaved",!1),i())})}else i()},save_figure_event:function(t){t&&t.preventDefault(),this.save_figure()},save_figure:function(t){t=t||{};var e=this.model.get("fileId"),i=this.model.get("canEdit");e&&i&&APP_SERVED_BY_OMERO?(this.$saveBtn.attr("disabled","disabled"),t.fileId=e,this.model.save_to_OMERO(t)):this.save_as(t)},save_as_event:function(t){t&&t.preventDefault(),this.save_as()},save_as:function(t){this.figureFiles.reset();var e=this;t=t||{};var i=this.model.get("figureName");if(!i){var n=this.model.getDefaultFigureName();i=prompt("Enter Figure Name",n)}var r=function(o){e.app.navigate("file/"+o),e.model.set("canEdit",!0)};if(i){if(t.figureName=i,!APP_SERVED_BY_OMERO){this.model.set("figureName",i),this.model.save_to_download(t);return}t.success=t.success||r,this.model.save_to_OMERO(t)}},export_json:function(t){t.preventDefault(),Yg(this.model.figure_toJSON())},import_json:function(t){t.preventDefault();var e=!0;this.model.checkSaveAndClear(function(){Hi("importJsonModal")},e)},import_json_form:function(t){t.preventDefault();var e=C(".importJsonForm .form-control").val();this.model.figure_fromJSON(e),Mr("importJsonModal"),C("#importJsonModal textarea").val(""),this.render()},copy_selected_panels:function(t){if(t.preventDefault(),this.modal_visible())return!0;var e=this.model.getSelected(),i=[];e.forEach(function(n){var r=n.toJSON();r=JSON.parse(JSON.stringify(r)),delete r.id,i.push(r)}),this.model.set("clipboard",{PANELS:i}),this.$pasteBtn.removeClass("disabled")},paste_panels:function(t){if(t.preventDefault(),this.modal_visible())return!0;var e=this.model.get("clipboard"),i;if(e&&"PANELS"in e)i=e.PANELS;else if(e&&"SHAPES"in e){i=e.SHAPES;var n=this.model.getSelected(),r=!0;n.forEach(function(F){var Q=F.add_shapes(i);Q||(r=!1)});var o=n.length>1?"s":"";r||Pn("Paste Failure","Some shapes may be outside the visible 'viewport' of panel"+o+". Target image"+o+" may be too small or zoomed in too much. Try zooming out before pasting again, or paste to a bigger image.",["OK"]);return}else return;var a=this;this.model.clearSelected();var l,h,g,_;$e.each(i,function(F,Q){var K=F.y,Z=F.x,ee=K+F.height,he=Z+F.width;Q===0?(l=K,h=Z,g=ee,_=he):(l=Math.min(l,K),h=Math.min(h,Z),g=Math.max(g,ee),_=Math.max(_,he))});var x=g-l,T=_-h,M=0,D=0;T>x?D=x+x/20:M=T+T/20,i=Gg(i),$e.each(i,function(F){F.x=F.x+M,F.y=F.y+D,a.model.panels.create(F)}),this.model.notifySelectionChange()},select_all:function(t){if(t.preventDefault(),this.modal_visible())return!0;this.model.select_all()},deleteSelectedPanels:function(t){if(t.preventDefault(),this.modal_visible())return!0;this.model.deleteSelected()},renderZoom:function(){var t=this.model.get("curr_zoom"),e=t*.01,i="scale("+e+", "+e+")",n=this.getCentre(!0);this.$canvas.css({transform:i,"-webkit-transform":i,"-ms-transform":i});var r=this.model.get("canvas_width"),o=this.model.get("canvas_height"),a=r*e,l=o*e;this.$canvas_wrapper.css({width:a+"px",height:l+"px"});var h=(l-o)/2,g=(a-r)/2;this.$canvas.css({top:h+"px",left:g+"px"}),n&&this.setCentre(n),C("#zoom_input").val(t)},reCentre:function(){var t=this.model.getFigureSize();this.setCentre({x:t.w/2,y:t.h/2})},getCentre:function(t){var e=this.model,i=e.get("curr_zoom");if(t&&(i=e.previous("curr_zoom")),i!==void 0){var n=this.$main.width(),r=this.$main.height(),o=this.$canvas_wrapper.offset(),a=this.$main.offset(),l=o.left-a.left,h=o.top-a.top,g=-l+n/2,_=-h+r/2,x=i*.01,T=this.model.getFigureSize(),M=(e.get("canvas_width")-T.w)/2,D=(e.get("canvas_height")-T.h)/2;return{x:g/x-M,y:_/x-D}}},setCentre:function(t,e){var i=this.model,n=this.model.getFigureSize(),r=(i.get("canvas_width")-n.w)/2,o=(i.get("canvas_height")-n.h)/2,a=i.get("curr_zoom"),l=a*.01,h=(t.x+r)*l,g=(t.y+o)*l,_=this.$main.width(),x=this.$main.height(),T=h-_/2,M=g-x/2;e=e||0,this.$main.animate({scrollLeft:T,scrollTop:M},e)},zoom_paper_to_fit:function(t){var e=this.model,i=this.model.getFigureSize(),n=this.$main.width(),r=this.$main.height(),o=n/(i.w+100),a=r/(i.h+100),l=Math.min(o,a);l=l*100>>0,e.set("curr_zoom",l),C("#zoom_slider").val(l);var h=this;setTimeout(function(){h.reCentre()},10)},addOne:function(t){var e=this.model.get("page_color"),i=new N4({model:t,page_color:e});this.$figure.append(i.render().el)},renderLoadingSpinner:function(){this.model.get("loading_count")>0?C("#addImagesSpinner").show():C("#addImagesSpinner").hide()},renderFigureName:function(){var t="OMERO.figure",e=this.model.get("figureName");e&&e.length>0?t+=" - "+e:e="",C("title").text(t),C(".figure-title").text(e)},renderSaveBtn:function(){var t=this.model.get("canEdit"),e=typeof this.model.get("fileId")>"u",i=t||e?"Save":"Can't Save";this.$saveBtn.text(i),this.model.get("unsaved")&&(t||e)?(this.$saveBtn.removeAttr("disabled"),this.$saveOption.removeClass("disabled")):(this.$saveBtn.attr("disabled","disabled"),this.$saveOption.addClass("disabled")),this.model.get("fileId")?this.$deleteOption.removeClass("disabled"):this.$deleteOption.addClass("disabled")},renderSelectionChange:function(){var t=C(".delete_panel",this.$el);this.model.getSelected().length>0?(t.removeAttr("disabled"),this.$copyBtn.removeClass("disabled")):(t.attr("disabled","disabled"),this.$copyBtn.addClass("disabled"))},renderPanels:function(){C(".imagePanel",this.$figure).remove(),this.model.panels.forEach((function(t){this.addOne(t)}).bind(this))},render:function(){var t=this.model;t.get("curr_zoom")*.01;var e=t.get("paper_width"),i=t.get("paper_height"),n=t.get("page_color"),r=this.model.getFigureSize(),o=Math.max(t.get("canvas_width"),r.w),a=Math.max(t.get("canvas_height"),r.h),l=t.get("page_count"),h=t.get("paper_spacing"),g=(o-r.w)/2,_=(a-r.h)/2,x=C(".paper"),T,M,D,F;if(x.length!==l){x.remove();for(var Q=0;Q<l;Q++)D=Math.floor(Q/r.cols),F=Q%r.cols,M=D*(i+h),T=F*(e+h),C("<div class='paper'></div>").css({left:T,top:M}).prependTo(this.$figure);x=C(".paper")}return x.css({width:e,height:i,"background-color":"#"+n}),this.$figure.css({width:r.w,height:r.h,left:g,top:_}),C("#canvas").css({width:o,height:a}),this.zoom_paper_to_fit(),this}});var z4=ft.View.extend({el:C("#alignment-toolbars"),model:_n,events:{"click .aleft":"align_left","click .agrid":"align_grid","click .atop":"align_top","click .aright":"align_right","click .abottom":"align_bottom","click .awidth":"align_width","click .aheight":"align_height","click .asize":"align_size","click .amagnification":"align_magnification","click #custom_grid_gap":"custom_grid_gap"},initialize:function(){this.listenTo(this.model,"change:selection",this.render),this.$buttons=C(".alignment-buttons button",this.$el)},align_left:function(t){t.preventDefault(),this.model.align_left()},align_grid:function(t){t.preventDefault();let e=document.querySelector('input[name="grid_gap"]:checked').value;this.model.align_grid(e)},align_width:function(t){t.preventDefault(),this.model.align_size(!0,!1)},align_height:function(t){t.preventDefault(),this.model.align_size(!1,!0)},align_size:function(t){t.preventDefault(),this.model.align_size(!0,!0)},align_magnification:function(t){t.preventDefault(),this.model.align_magnification()},align_top:function(t){t.preventDefault(),this.model.align_top()},align_right:function(t){t.preventDefault(),this.model.align_right()},align_bottom:function(t){t.preventDefault(),this.model.align_bottom()},custom_grid_gap:function(){let t=C("#custom_grid_gap").attr("value"),e=prompt("Enter grid gap in pixels:",t);if(e=parseFloat(e),isNaN(e)){alert("Please enter a valid number (of pixels)");return}C("#custom_grid_gap").attr("value",e),C("#custom_grid_gap_label").text("("+e+" px)")},render:function(){this.model.getSelected().length>1?this.$buttons.removeAttr("disabled"):this.$buttons.attr("disabled","disabled")}});function F4(t){return new R4(t)}var Uh=function(t){var e=this.figureModel.get("curr_zoom")*.01,i=this.figureModel.getFigureSize(),n=(this.figureModel.get("canvas_height")-i.h)/2,r=(this.figureModel.get("canvas_width")-i.w)/2,o=t.x/e-r-1,a=t.y/e-n-1,l=t.width/e,h=t.height/e;return{x:o>>0,y:a>>0,width:l>>0,height:h>>0}},Vh=ft.Model.extend({initialize:function(t){this.panelModel=t.panel,this.figureModel=t.figure,this.renderFromModel(),this.listenTo(this.figureModel,"change:curr_zoom change:paper_width change:paper_height change:page_count",this.renderFromModel),this.listenTo(this.panelModel,"change:x change:y change:width change:height",this.renderFromModel),this.listenTo(this.panelModel,"drag_resize",this.renderFromTrigger),this.listenTo(this.panelModel,"change:selected",this.renderSelection),this.panelModel.on("destroy",this.clear,this),this.listenTo(this,"drag_xy",this.drag_xy),this.listenTo(this,"drag_xy_stop",this.drag_xy_stop),this.listenTo(this,"drag_resize",this.drag_resize),this.listenTo(this,"drag_resize_stop",this.drag_resize_stop),this.bind("clicked",function(e){this.handleClick(e[0])})},getSvgCoords:function(t){var e=this.figureModel.get("curr_zoom")*.01,i=this.figureModel.getFigureSize(),n=(this.figureModel.get("canvas_height")-i.h)/2,r=(this.figureModel.get("canvas_width")-i.w)/2,o=(r+1+t.x)*e,a=(n+1+t.y)*e,l=t.width*e,h=t.height*e;return{x:o,y:a,width:l,height:h}},getModelCoords:Uh,drag_xy:function(t,e){var i=this.figureModel.get("curr_zoom")*.01,n=t[0]/i,r=t[1]/i;this.figureModel.drag_xy(n,r,e)},drag_xy_stop:function(t){this.drag_xy(t,!0)},drag_resize:function(t){var e=this.getModelCoords({x:t[0],y:t[1],width:t[2],height:t[3]});this.panelModel.drag_resize(e.x,e.y,e.width,e.height)},drag_resize_stop:function(t){var e=this.getModelCoords({x:t[0],y:t[1],width:t[2],height:t[3]});this.panelModel.save(e)},renderFromModel:function(){this.set(this.getSvgCoords({x:this.panelModel.get("x"),y:this.panelModel.get("y"),width:this.panelModel.get("width"),height:this.panelModel.get("height")}))},renderFromTrigger:function(t){this.getSvgCoords({x:t[0],y:t[1],width:t[2],height:t[3]}),this.set(this.getSvgCoords({x:t[0],y:t[1],width:t[2],height:t[3]}))},renderSelection:function(){this.set("selected",this.panelModel.get("selected"))},handleClick:function(t){t.shiftKey?this.figureModel.addSelected(this.panelModel):this.figureModel.setSelected(this.panelModel)},clear:function(){this.destroy()}}),D4=Vh.extend({defaults:{x:0,y:0,width:0,height:0},initialize:function(t){this.figureModel=t.figureModel,this.listenTo(this,"drag_xy",this.drag_xy),this.listenTo(this,"drag_xy_stop",this.drag_xy_stop),this.listenTo(this,"drag_resize",this.drag_resize),this.listenTo(this,"drag_resize_stop",this.drag_resize_stop),this.listenTo(this.figureModel,"change:selection",this.updateSelection),this.listenTo(this.figureModel,"change:curr_zoom change:paper_height change:paper_width",this.updateSelection),this.listenTo(this.figureModel,"drag_xy",this.update_xy)},updateSelection:function(){var t=this.figureModel.getSelected();if(t.length<1){this.set({x:0,y:0,width:0,height:0,selected:!1});return}var e=0,i=0;t.forEach(function(o){var a=o.get("x"),l=o.get("y"),h=o.get("width"),g=o.get("height");e=Math.max(e,a+h),i=Math.max(i,l+g)});const n=t.getMin("x"),r=t.getMin("y");this.set(this.getSvgCoords({x:n,y:r,width:e-n,height:i-r})),this.set("selected",!0)},update_xy:function(t){if(this.get("selected")){var e=this.getSvgCoords({x:t[0],y:t[1],width:0,height:0});this.set({x:e.x,y:e.y})}},drag_xy:function(t,e){var i=t[0]+this.get("x"),n=t[1]+this.get("y"),r=[i,n,this.get("width"),this.get("height")];this.notifyModelofDrag(r,e)},drag_xy_stop:function(t,e){this.drag_xy(t,!0),this.set({x:t[0]+this.get("x"),y:t[1]+this.get("y")})},drag_resize:function(t,e){this.notifyModelofDrag(t,e)},drag_resize_stop:function(t){this.notifyModelofDrag(t,!0),this.set({x:t[0],y:t[1],width:t[2],height:t[3]})},notifyModelofDrag:function(t,e){var i=this.getModelCoords({x:this.get("x"),y:this.get("y"),width:this.get("width"),height:this.get("height")}),n=this.getModelCoords({x:t[0],y:t[1],width:t[2],height:t[3]});this.figureModel.multiselectdrag(i.x,i.y,i.width,i.height,n.x,n.y,n.width,n.height,e)},handleClick:function(t){}}),L4=ft.View.extend({initialize:function(t){var e=this,i=this.model.get("canvas_width"),n=this.model.get("canvas_height");this.figureModel=this.model,this.raphael_paper=Ri("canvas_wrapper",i,n),e.$dragOutline=C("<div style='border: dotted #0a0a0a 1px; position:absolute; z-index:1'></div>").appendTo("#canvas_wrapper"),e.outlineStyle=e.$dragOutline.get(0).style,e.dragging=!1,e.drag_start_x=0,e.drag_start_y=0,C("#canvas_wrapper>svg").mousedown(function(a){e.dragging=!0;var l=C(this).parent().offset();e.left=e.drag_start_x=a.pageX-l.left,e.top=e.drag_start_y=a.pageY-l.top,e.dx=0,e.dy=0,e.$dragOutline.css({left:e.drag_start_x,top:e.drag_start_y,width:0,height:0}).show()}).mousemove(function(a){if(e.dragging){var l=C(this).parent().offset();e.left=e.drag_start_x,e.top=e.drag_start_y,e.dx=a.pageX-l.left-e.drag_start_x,e.dy=a.pageY-l.top-e.drag_start_y,e.dx<0&&(e.left=e.left+e.dx,e.dx=Math.abs(e.dx)),e.dy<0&&(e.top=e.top+e.dy,e.dy=Math.abs(e.dy)),e.$dragOutline.css({left:e.left,top:e.top,width:e.dx,height:e.dy})}}).mouseup(function(a){e.dragging&&(e.handleClick(a),e.$dragOutline.hide()),e.dragging=!1}),this.model.panels.on("add",this.addOne,this),this.listenTo(this.model,"change:curr_zoom",this.renderZoom);var r=new D4({figureModel:this.model}),o=new ql({model:r,paper:this.raphael_paper,handle_wh:7,handles_toFront:!0,fixed_ratio:!0});o.selected_line_attrs={"stroke-width":1,stroke:"#4b80f9"},this.renderZoom()},addOne:function(t){var e=new Vh({panel:t,figure:this.model});new ql({model:e,paper:this.raphael_paper,handle_wh:5,disable_handles:!0,fixed_ratio:!0})},remove:function(){},renderZoom:function(){var t=this.model.get("curr_zoom")*.01,e=this.model.get("canvas_width")*t,i=this.model.get("canvas_height")*t;this.raphael_paper.setSize(e,i)},getModelCoords:Uh,handleClick:function(t){if(t.shiftKey||this.model.clearSelected(),this.dx>0||this.dy>0){var e=this.getModelCoords({x:this.left,y:this.top,width:this.dx,height:this.dy});this.model.selectByRegion(e)}}});/**!
 * Sortable 1.15.3
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ic(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function fr(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?ic(Object(i),!0).forEach(function(n){P4(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ic(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function ua(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ua=function(e){return typeof e}:ua=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ua(t)}function P4(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Ir(){return Ir=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},Ir.apply(this,arguments)}function $4(t,e){if(t==null)return{};var i={},n=Object.keys(t),r,o;for(o=0;o<n.length;o++)r=n[o],!(e.indexOf(r)>=0)&&(i[r]=t[r]);return i}function B4(t,e){if(t==null)return{};var i=$4(t,e),n,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var W4="1.15.3";function kr(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Nr=kr(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),zo=kr(/Edge/i),nc=kr(/firefox/i),so=kr(/safari/i)&&!kr(/chrome/i)&&!kr(/android/i),Yh=kr(/iP(ad|od|hone)/i),qh=kr(/chrome/i)&&kr(/android/i),Xh={capture:!1,passive:!1};function Yt(t,e,i){t.addEventListener(e,i,!Nr&&Xh)}function jt(t,e,i){t.removeEventListener(e,i,!Nr&&Xh)}function Ta(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function Zh(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Qn(t,e,i,n){if(t){i=i||document;do{if(e!=null&&(e[0]===">"?t.parentNode===i&&Ta(t,e):Ta(t,e))||n&&t===i)return t;if(t===i)break}while(t=Zh(t))}return null}var rc=/\s+/g;function An(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(rc," ").replace(" "+e+" "," ");t.className=(n+(i?" "+e:"")).replace(rc," ")}}function Et(t,e,i){var n=t&&t.style;if(n){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),e===void 0?i:i[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=i+(typeof i=="string"?"":"px")}}function ks(t,e){var i="";if(typeof t=="string")i=t;else do{var n=Et(t,"transform");n&&n!=="none"&&(i=n+" "+i)}while(!e&&(t=t.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(i)}function Gh(t,e,i){if(t){var n=t.getElementsByTagName(e),r=0,o=n.length;if(i)for(;r<o;r++)i(n[r],r);return n}return[]}function ur(){var t=document.scrollingElement;return t||document.documentElement}function Ai(t,e,i,n,r){if(!(!t.getBoundingClientRect&&t!==window)){var o,a,l,h,g,_,x;if(t!==window&&t.parentNode&&t!==ur()?(o=t.getBoundingClientRect(),a=o.top,l=o.left,h=o.bottom,g=o.right,_=o.height,x=o.width):(a=0,l=0,h=window.innerHeight,g=window.innerWidth,_=window.innerHeight,x=window.innerWidth),(e||i)&&t!==window&&(r=r||t.parentNode,!Nr))do if(r&&r.getBoundingClientRect&&(Et(r,"transform")!=="none"||i&&Et(r,"position")!=="static")){var T=r.getBoundingClientRect();a-=T.top+parseInt(Et(r,"border-top-width")),l-=T.left+parseInt(Et(r,"border-left-width")),h=a+o.height,g=l+o.width;break}while(r=r.parentNode);if(n&&t!==window){var M=ks(r||t),D=M&&M.a,F=M&&M.d;M&&(a/=F,l/=D,x/=D,_/=F,h=a+_,g=l+x)}return{top:a,left:l,bottom:h,right:g,width:x,height:_}}}function sc(t,e,i){for(var n=Hr(t,!0),r=Ai(t)[e];n;){var o=Ai(n)[i],a=void 0;if(a=r>=o,!a)return n;if(n===ur())break;n=Hr(n,!1)}return!1}function Ls(t,e,i,n){for(var r=0,o=0,a=t.children;o<a.length;){if(a[o].style.display!=="none"&&a[o]!==St.ghost&&(n||a[o]!==St.dragged)&&Qn(a[o],i.draggable,t,!1)){if(r===e)return a[o];r++}o++}return null}function I1(t,e){for(var i=t.lastElementChild;i&&(i===St.ghost||Et(i,"display")==="none"||e&&!Ta(i,e));)i=i.previousElementSibling;return i||null}function Ln(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==St.clone&&(!e||Ta(t,e))&&i++;return i}function oc(t){var e=0,i=0,n=ur();if(t)do{var r=ks(t),o=r.a,a=r.d;e+=t.scrollLeft*o,i+=t.scrollTop*a}while(t!==n&&(t=t.parentNode));return[e,i]}function H4(t,e){for(var i in t)if(t.hasOwnProperty(i)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t[i][n])return Number(i)}return-1}function Hr(t,e){if(!t||!t.getBoundingClientRect)return ur();var i=t,n=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var r=Et(i);if(i.clientWidth<i.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return ur();if(n||e)return i;n=!0}}while(i=i.parentNode);return ur()}function j4(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function Sl(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var oo;function Kh(t,e){return function(){if(!oo){var i=arguments,n=this;i.length===1?t.call(n,i[0]):t.apply(n,i),oo=setTimeout(function(){oo=void 0},e)}}}function U4(){clearTimeout(oo),oo=void 0}function Jh(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function Qh(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}function eu(t,e,i){var n={};return Array.from(t.children).forEach(function(r){var o,a,l,h;if(!(!Qn(r,e.draggable,t,!1)||r.animated||r===i)){var g=Ai(r);n.left=Math.min((o=n.left)!==null&&o!==void 0?o:1/0,g.left),n.top=Math.min((a=n.top)!==null&&a!==void 0?a:1/0,g.top),n.right=Math.max((l=n.right)!==null&&l!==void 0?l:-1/0,g.right),n.bottom=Math.max((h=n.bottom)!==null&&h!==void 0?h:-1/0,g.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var mn="Sortable"+new Date().getTime();function V4(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(r){if(!(Et(r,"display")==="none"||r===St.ghost)){t.push({target:r,rect:Ai(r)});var o=fr({},t[t.length-1].rect);if(r.thisAnimationDuration){var a=ks(r,!0);a&&(o.top-=a.f,o.left-=a.e)}r.fromRect=o}})}},addAnimationState:function(n){t.push(n)},removeAnimationState:function(n){t.splice(H4(t,{target:n}),1)},animateAll:function(n){var r=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var o=!1,a=0;t.forEach(function(l){var h=0,g=l.target,_=g.fromRect,x=Ai(g),T=g.prevFromRect,M=g.prevToRect,D=l.rect,F=ks(g,!0);F&&(x.top-=F.f,x.left-=F.e),g.toRect=x,g.thisAnimationDuration&&Sl(T,x)&&!Sl(_,x)&&(D.top-x.top)/(D.left-x.left)===(_.top-x.top)/(_.left-x.left)&&(h=q4(D,T,M,r.options)),Sl(x,_)||(g.prevFromRect=_,g.prevToRect=x,h||(h=r.options.animation),r.animate(g,D,x,h)),h&&(o=!0,a=Math.max(a,h),clearTimeout(g.animationResetTimer),g.animationResetTimer=setTimeout(function(){g.animationTime=0,g.prevFromRect=null,g.fromRect=null,g.prevToRect=null,g.thisAnimationDuration=null},h),g.thisAnimationDuration=h)}),clearTimeout(e),o?e=setTimeout(function(){typeof n=="function"&&n()},a):typeof n=="function"&&n(),t=[]},animate:function(n,r,o,a){if(a){Et(n,"transition",""),Et(n,"transform","");var l=ks(this.el),h=l&&l.a,g=l&&l.d,_=(r.left-o.left)/(h||1),x=(r.top-o.top)/(g||1);n.animatingX=!!_,n.animatingY=!!x,Et(n,"transform","translate3d("+_+"px,"+x+"px,0)"),this.forRepaintDummy=Y4(n),Et(n,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),Et(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){Et(n,"transition",""),Et(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},a)}}}}function Y4(t){return t.offsetWidth}function q4(t,e,i,n){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*n.animation}var _s=[],Tl={initializeByDefault:!0},Fo={mount:function(e){for(var i in Tl)Tl.hasOwnProperty(i)&&!(i in e)&&(e[i]=Tl[i]);_s.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),_s.push(e)},pluginEvent:function(e,i,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var o=e+"Global";_s.forEach(function(a){i[a.pluginName]&&(i[a.pluginName][o]&&i[a.pluginName][o](fr({sortable:i},n)),i.options[a.pluginName]&&i[a.pluginName][e]&&i[a.pluginName][e](fr({sortable:i},n)))})},initializePlugins:function(e,i,n,r){_s.forEach(function(l){var h=l.pluginName;if(!(!e.options[h]&&!l.initializeByDefault)){var g=new l(e,i,e.options);g.sortable=e,g.options=e.options,e[h]=g,Ir(n,g.defaults)}});for(var o in e.options)if(e.options.hasOwnProperty(o)){var a=this.modifyOption(e,o,e.options[o]);typeof a<"u"&&(e.options[o]=a)}},getEventProperties:function(e,i){var n={};return _s.forEach(function(r){typeof r.eventProperties=="function"&&Ir(n,r.eventProperties.call(i[r.pluginName],e))}),n},modifyOption:function(e,i,n){var r;return _s.forEach(function(o){e[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[i]=="function"&&(r=o.optionListeners[i].call(e[o.pluginName],n))}),r}};function X4(t){var e=t.sortable,i=t.rootEl,n=t.name,r=t.targetEl,o=t.cloneEl,a=t.toEl,l=t.fromEl,h=t.oldIndex,g=t.newIndex,_=t.oldDraggableIndex,x=t.newDraggableIndex,T=t.originalEvent,M=t.putSortable,D=t.extraEventProperties;if(e=e||i&&i[mn],!!e){var F,Q=e.options,K="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!Nr&&!zo?F=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(F=document.createEvent("Event"),F.initEvent(n,!0,!0)),F.to=a||i,F.from=l||i,F.item=r||i,F.clone=o,F.oldIndex=h,F.newIndex=g,F.oldDraggableIndex=_,F.newDraggableIndex=x,F.originalEvent=T,F.pullMode=M?M.lastPutMode:void 0;var Z=fr(fr({},D),Fo.getEventProperties(n,e));for(var ee in Z)F[ee]=Z[ee];i&&i.dispatchEvent(F),Q[K]&&Q[K].call(e,F)}}var Z4=["evt"],gn=function(e,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.evt,o=B4(n,Z4);Fo.pluginEvent.bind(St)(e,i,fr({dragEl:qe,parentEl:vi,ghostEl:At,rootEl:fi,nextEl:ss,lastDownEl:da,cloneEl:mi,cloneHidden:Br,dragStarted:eo,putSortable:Bi,activeSortable:St.active,originalEvent:r,oldIndex:Ss,oldDraggableIndex:ao,newIndex:In,newDraggableIndex:Lr,hideGhostForTarget:ru,unhideGhostForTarget:su,cloneNowHidden:function(){Br=!0},cloneNowShown:function(){Br=!1},dispatchSortableEvent:function(l){nn({sortable:i,name:l,originalEvent:r})}},o))};function nn(t){X4(fr({putSortable:Bi,cloneEl:mi,targetEl:qe,rootEl:fi,oldIndex:Ss,oldDraggableIndex:ao,newIndex:In,newDraggableIndex:Lr},t))}var qe,vi,At,fi,ss,da,mi,Br,Ss,In,ao,Lr,ta,Bi,xs=!1,ka=!1,Ca=[],ns,Kn,kl,Cl,ac,lc,eo,vs,lo,co=!1,ia=!1,fa,Zi,Al=[],Kl=!1,Aa=[],Ua=typeof document<"u",na=Yh,cc=zo||Nr?"cssFloat":"float",G4=Ua&&!qh&&!Yh&&"draggable"in document.createElement("div"),tu=function(){if(Ua){if(Nr)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),iu=function(e,i){var n=Et(e),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=Ls(e,0,i),a=Ls(e,1,i),l=o&&Et(o),h=a&&Et(a),g=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Ai(o).width,_=h&&parseInt(h.marginLeft)+parseInt(h.marginRight)+Ai(a).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&l.float&&l.float!=="none"){var x=l.float==="left"?"left":"right";return a&&(h.clear==="both"||h.clear===x)?"vertical":"horizontal"}return o&&(l.display==="block"||l.display==="flex"||l.display==="table"||l.display==="grid"||g>=r&&n[cc]==="none"||a&&n[cc]==="none"&&g+_>r)?"vertical":"horizontal"},K4=function(e,i,n){var r=n?e.left:e.top,o=n?e.right:e.bottom,a=n?e.width:e.height,l=n?i.left:i.top,h=n?i.right:i.bottom,g=n?i.width:i.height;return r===l||o===h||r+a/2===l+g/2},J4=function(e,i){var n;return Ca.some(function(r){var o=r[mn].options.emptyInsertThreshold;if(!(!o||I1(r))){var a=Ai(r),l=e>=a.left-o&&e<=a.right+o,h=i>=a.top-o&&i<=a.bottom+o;if(l&&h)return n=r}}),n},nu=function(e){function i(o,a){return function(l,h,g,_){var x=l.options.group.name&&h.options.group.name&&l.options.group.name===h.options.group.name;if(o==null&&(a||x))return!0;if(o==null||o===!1)return!1;if(a&&o==="clone")return o;if(typeof o=="function")return i(o(l,h,g,_),a)(l,h,g,_);var T=(a?l:h).options.group.name;return o===!0||typeof o=="string"&&o===T||o.join&&o.indexOf(T)>-1}}var n={},r=e.group;(!r||ua(r)!="object")&&(r={name:r}),n.name=r.name,n.checkPull=i(r.pull,!0),n.checkPut=i(r.put),n.revertClone=r.revertClone,e.group=n},ru=function(){!tu&&At&&Et(At,"display","none")},su=function(){!tu&&At&&Et(At,"display","")};Ua&&!qh&&document.addEventListener("click",function(t){if(ka)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),ka=!1,!1},!0);var rs=function(e){if(qe){e=e.touches?e.touches[0]:e;var i=J4(e.clientX,e.clientY);if(i){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.target=n.rootEl=i,n.preventDefault=void 0,n.stopPropagation=void 0,i[mn]._onDragOver(n)}}},Q4=function(e){qe&&qe.parentNode[mn]._isOutsideThisEl(e.target)};function St(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Ir({},e),t[mn]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return iu(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,l){a.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:St.supportPointer!==!1&&"PointerEvent"in window&&!so,emptyInsertThreshold:5};Fo.initializePlugins(this,t,i);for(var n in i)!(n in e)&&(e[n]=i[n]);nu(e);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=e.forceFallback?!1:G4,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Yt(t,"pointerdown",this._onTapStart):(Yt(t,"mousedown",this._onTapStart),Yt(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Yt(t,"dragover",this),Yt(t,"dragenter",this)),Ca.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Ir(this,V4())}St.prototype={constructor:St,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(vs=null)},_getDirection:function(e,i){return typeof this.options.direction=="function"?this.options.direction.call(this,e,i,qe):this.options.direction},_onTapStart:function(e){if(e.cancelable){var i=this,n=this.el,r=this.options,o=r.preventOnFilter,a=e.type,l=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,h=(l||e).target,g=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||h,_=r.filter;if(a_(n),!qe&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||r.disabled)&&!g.isContentEditable&&!(!this.nativeDraggable&&so&&h&&h.tagName.toUpperCase()==="SELECT")&&(h=Qn(h,r.draggable,n,!1),!(h&&h.animated)&&da!==h)){if(Ss=Ln(h),ao=Ln(h,r.draggable),typeof _=="function"){if(_.call(this,e,h,this)){nn({sortable:i,rootEl:g,name:"filter",targetEl:h,toEl:n,fromEl:n}),gn("filter",i,{evt:e}),o&&e.cancelable&&e.preventDefault();return}}else if(_&&(_=_.split(",").some(function(x){if(x=Qn(g,x.trim(),n,!1),x)return nn({sortable:i,rootEl:x,name:"filter",targetEl:h,fromEl:n,toEl:n}),gn("filter",i,{evt:e}),!0}),_)){o&&e.cancelable&&e.preventDefault();return}r.handle&&!Qn(g,r.handle,n,!1)||this._prepareDragStart(e,l,h)}}},_prepareDragStart:function(e,i,n){var r=this,o=r.el,a=r.options,l=o.ownerDocument,h;if(n&&!qe&&n.parentNode===o){var g=Ai(n);if(fi=o,qe=n,vi=qe.parentNode,ss=qe.nextSibling,da=n,ta=a.group,St.dragged=qe,ns={target:qe,clientX:(i||e).clientX,clientY:(i||e).clientY},ac=ns.clientX-g.left,lc=ns.clientY-g.top,this._lastX=(i||e).clientX,this._lastY=(i||e).clientY,qe.style["will-change"]="all",h=function(){if(gn("delayEnded",r,{evt:e}),St.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!nc&&r.nativeDraggable&&(qe.draggable=!0),r._triggerDragStart(e,i),nn({sortable:r,name:"choose",originalEvent:e}),An(qe,a.chosenClass,!0)},a.ignore.split(",").forEach(function(_){Gh(qe,_.trim(),Il)}),Yt(l,"dragover",rs),Yt(l,"mousemove",rs),Yt(l,"touchmove",rs),Yt(l,"mouseup",r._onDrop),Yt(l,"touchend",r._onDrop),Yt(l,"touchcancel",r._onDrop),nc&&this.nativeDraggable&&(this.options.touchStartThreshold=4,qe.draggable=!0),gn("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||i)&&(!this.nativeDraggable||!(zo||Nr))){if(St.eventCanceled){this._onDrop();return}Yt(l,"mouseup",r._disableDelayedDrag),Yt(l,"touchend",r._disableDelayedDrag),Yt(l,"touchcancel",r._disableDelayedDrag),Yt(l,"mousemove",r._delayedDragTouchMoveHandler),Yt(l,"touchmove",r._delayedDragTouchMoveHandler),a.supportPointer&&Yt(l,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(h,a.delay)}else h()}},_delayedDragTouchMoveHandler:function(e){var i=e.touches?e.touches[0]:e;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){qe&&Il(qe),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;jt(e,"mouseup",this._disableDelayedDrag),jt(e,"touchend",this._disableDelayedDrag),jt(e,"touchcancel",this._disableDelayedDrag),jt(e,"mousemove",this._delayedDragTouchMoveHandler),jt(e,"touchmove",this._delayedDragTouchMoveHandler),jt(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,i){i=i||e.pointerType=="touch"&&e,!this.nativeDraggable||i?this.options.supportPointer?Yt(document,"pointermove",this._onTouchMove):i?Yt(document,"touchmove",this._onTouchMove):Yt(document,"mousemove",this._onTouchMove):(Yt(qe,"dragend",this),Yt(fi,"dragstart",this._onDragStart));try{document.selection?pa(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,i){if(xs=!1,fi&&qe){gn("dragStarted",this,{evt:i}),this.nativeDraggable&&Yt(document,"dragover",Q4);var n=this.options;!e&&An(qe,n.dragClass,!1),An(qe,n.ghostClass,!0),St.active=this,e&&this._appendGhost(),nn({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(Kn){this._lastX=Kn.clientX,this._lastY=Kn.clientY,ru();for(var e=document.elementFromPoint(Kn.clientX,Kn.clientY),i=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Kn.clientX,Kn.clientY),e!==i);)i=e;if(qe.parentNode[mn]._isOutsideThisEl(e),i)do{if(i[mn]){var n=void 0;if(n=i[mn]._onDragOver({clientX:Kn.clientX,clientY:Kn.clientY,target:e,rootEl:i}),n&&!this.options.dragoverBubble)break}e=i}while(i=Zh(i));su()}},_onTouchMove:function(e){if(ns){var i=this.options,n=i.fallbackTolerance,r=i.fallbackOffset,o=e.touches?e.touches[0]:e,a=At&&ks(At,!0),l=At&&a&&a.a,h=At&&a&&a.d,g=na&&Zi&&oc(Zi),_=(o.clientX-ns.clientX+r.x)/(l||1)+(g?g[0]-Al[0]:0)/(l||1),x=(o.clientY-ns.clientY+r.y)/(h||1)+(g?g[1]-Al[1]:0)/(h||1);if(!St.active&&!xs){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(At){a?(a.e+=_-(kl||0),a.f+=x-(Cl||0)):a={a:1,b:0,c:0,d:1,e:_,f:x};var T="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");Et(At,"webkitTransform",T),Et(At,"mozTransform",T),Et(At,"msTransform",T),Et(At,"transform",T),kl=_,Cl=x,Kn=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!At){var e=this.options.fallbackOnBody?document.body:fi,i=Ai(qe,!0,na,!0,e),n=this.options;if(na){for(Zi=e;Et(Zi,"position")==="static"&&Et(Zi,"transform")==="none"&&Zi!==document;)Zi=Zi.parentNode;Zi!==document.body&&Zi!==document.documentElement?(Zi===document&&(Zi=ur()),i.top+=Zi.scrollTop,i.left+=Zi.scrollLeft):Zi=ur(),Al=oc(Zi)}At=qe.cloneNode(!0),An(At,n.ghostClass,!1),An(At,n.fallbackClass,!0),An(At,n.dragClass,!0),Et(At,"transition",""),Et(At,"transform",""),Et(At,"box-sizing","border-box"),Et(At,"margin",0),Et(At,"top",i.top),Et(At,"left",i.left),Et(At,"width",i.width),Et(At,"height",i.height),Et(At,"opacity","0.8"),Et(At,"position",na?"absolute":"fixed"),Et(At,"zIndex","100000"),Et(At,"pointerEvents","none"),St.ghost=At,e.appendChild(At),Et(At,"transform-origin",ac/parseInt(At.style.width)*100+"% "+lc/parseInt(At.style.height)*100+"%")}},_onDragStart:function(e,i){var n=this,r=e.dataTransfer,o=n.options;if(gn("dragStart",this,{evt:e}),St.eventCanceled){this._onDrop();return}gn("setupClone",this),St.eventCanceled||(mi=Qh(qe),mi.removeAttribute("id"),mi.draggable=!1,mi.style["will-change"]="",this._hideClone(),An(mi,this.options.chosenClass,!1),St.clone=mi),n.cloneId=pa(function(){gn("clone",n),!St.eventCanceled&&(n.options.removeCloneOnHide||fi.insertBefore(mi,qe),n._hideClone(),nn({sortable:n,name:"clone"}))}),!i&&An(qe,o.dragClass,!0),i?(ka=!0,n._loopId=setInterval(n._emulateDragOver,50)):(jt(document,"mouseup",n._onDrop),jt(document,"touchend",n._onDrop),jt(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",o.setData&&o.setData.call(n,r,qe)),Yt(document,"drop",n),Et(qe,"transform","translateZ(0)")),xs=!0,n._dragStartId=pa(n._dragStarted.bind(n,i,e)),Yt(document,"selectstart",n),eo=!0,so&&Et(document.body,"user-select","none")},_onDragOver:function(e){var i=this.el,n=e.target,r,o,a,l=this.options,h=l.group,g=St.active,_=ta===h,x=l.sort,T=Bi||g,M,D=this,F=!1;if(Kl)return;function Q(Qe,st){gn(Qe,D,fr({evt:e,isOwner:_,axis:M?"vertical":"horizontal",revert:a,dragRect:r,targetRect:o,canSort:x,fromSortable:T,target:n,completed:Z,onMove:function(N,O){return ra(fi,i,qe,r,N,Ai(N),e,O)},changed:ee},st))}function K(){Q("dragOverAnimationCapture"),D.captureAnimationState(),D!==T&&T.captureAnimationState()}function Z(Qe){return Q("dragOverCompleted",{insertion:Qe}),Qe&&(_?g._hideClone():g._showClone(D),D!==T&&(An(qe,Bi?Bi.options.ghostClass:g.options.ghostClass,!1),An(qe,l.ghostClass,!0)),Bi!==D&&D!==St.active?Bi=D:D===St.active&&Bi&&(Bi=null),T===D&&(D._ignoreWhileAnimating=n),D.animateAll(function(){Q("dragOverAnimationComplete"),D._ignoreWhileAnimating=null}),D!==T&&(T.animateAll(),T._ignoreWhileAnimating=null)),(n===qe&&!qe.animated||n===i&&!n.animated)&&(vs=null),!l.dragoverBubble&&!e.rootEl&&n!==document&&(qe.parentNode[mn]._isOutsideThisEl(e.target),!Qe&&rs(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),F=!0}function ee(){In=Ln(qe),Lr=Ln(qe,l.draggable),nn({sortable:D,name:"change",toEl:i,newIndex:In,newDraggableIndex:Lr,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=Qn(n,l.draggable,i,!0),Q("dragOver"),St.eventCanceled)return F;if(qe.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||D._ignoreWhileAnimating===n)return Z(!1);if(ka=!1,g&&!l.disabled&&(_?x||(a=vi!==fi):Bi===this||(this.lastPutMode=ta.checkPull(this,g,qe,e))&&h.checkPut(this,g,qe,e))){if(M=this._getDirection(e,n)==="vertical",r=Ai(qe),Q("dragOverValid"),St.eventCanceled)return F;if(a)return vi=fi,K(),this._hideClone(),Q("revert"),St.eventCanceled||(ss?fi.insertBefore(qe,ss):fi.appendChild(qe)),Z(!0);var he=I1(i,l.draggable);if(!he||n_(e,M,this)&&!he.animated){if(he===qe)return Z(!1);if(he&&i===e.target&&(n=he),n&&(o=Ai(n)),ra(fi,i,qe,r,n,o,e,!!n)!==!1)return K(),he&&he.nextSibling?i.insertBefore(qe,he.nextSibling):i.appendChild(qe),vi=i,ee(),Z(!0)}else if(he&&i_(e,M,this)){var pe=Ls(i,0,l,!0);if(pe===qe)return Z(!1);if(n=pe,o=Ai(n),ra(fi,i,qe,r,n,o,e,!1)!==!1)return K(),i.insertBefore(qe,pe),vi=i,ee(),Z(!0)}else if(n.parentNode===i){o=Ai(n);var p=0,H,oe=qe.parentNode!==i,me=!K4(qe.animated&&qe.toRect||r,n.animated&&n.toRect||o,M),Te=M?"top":"left",Ae=sc(n,"top","top")||sc(qe,"top","top"),ve=Ae?Ae.scrollTop:void 0;vs!==n&&(H=o[Te],co=!1,ia=!me&&l.invertSwap||oe),p=r_(e,n,o,M,me?1:l.swapThreshold,l.invertedSwapThreshold==null?l.swapThreshold:l.invertedSwapThreshold,ia,vs===n);var Le;if(p!==0){var We=Ln(qe);do We-=p,Le=vi.children[We];while(Le&&(Et(Le,"display")==="none"||Le===At))}if(p===0||Le===n)return Z(!1);vs=n,lo=p;var it=n.nextElementSibling,Ye=!1;Ye=p===1;var tt=ra(fi,i,qe,r,n,o,e,Ye);if(tt!==!1)return(tt===1||tt===-1)&&(Ye=tt===1),Kl=!0,setTimeout(t_,30),K(),Ye&&!it?i.appendChild(qe):n.parentNode.insertBefore(qe,Ye?it:n),Ae&&Jh(Ae,0,ve-Ae.scrollTop),vi=qe.parentNode,H!==void 0&&!ia&&(fa=Math.abs(H-Ai(n)[Te])),ee(),Z(!0)}if(i.contains(qe))return Z(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){jt(document,"mousemove",this._onTouchMove),jt(document,"touchmove",this._onTouchMove),jt(document,"pointermove",this._onTouchMove),jt(document,"dragover",rs),jt(document,"mousemove",rs),jt(document,"touchmove",rs)},_offUpEvents:function(){var e=this.el.ownerDocument;jt(e,"mouseup",this._onDrop),jt(e,"touchend",this._onDrop),jt(e,"pointerup",this._onDrop),jt(e,"touchcancel",this._onDrop),jt(document,"selectstart",this)},_onDrop:function(e){var i=this.el,n=this.options;if(In=Ln(qe),Lr=Ln(qe,n.draggable),gn("drop",this,{evt:e}),vi=qe&&qe.parentNode,In=Ln(qe),Lr=Ln(qe,n.draggable),St.eventCanceled){this._nulling();return}xs=!1,ia=!1,co=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Jl(this.cloneId),Jl(this._dragStartId),this.nativeDraggable&&(jt(document,"drop",this),jt(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),so&&Et(document.body,"user-select",""),Et(qe,"transform",""),e&&(eo&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),At&&At.parentNode&&At.parentNode.removeChild(At),(fi===vi||Bi&&Bi.lastPutMode!=="clone")&&mi&&mi.parentNode&&mi.parentNode.removeChild(mi),qe&&(this.nativeDraggable&&jt(qe,"dragend",this),Il(qe),qe.style["will-change"]="",eo&&!xs&&An(qe,Bi?Bi.options.ghostClass:this.options.ghostClass,!1),An(qe,this.options.chosenClass,!1),nn({sortable:this,name:"unchoose",toEl:vi,newIndex:null,newDraggableIndex:null,originalEvent:e}),fi!==vi?(In>=0&&(nn({rootEl:vi,name:"add",toEl:vi,fromEl:fi,originalEvent:e}),nn({sortable:this,name:"remove",toEl:vi,originalEvent:e}),nn({rootEl:vi,name:"sort",toEl:vi,fromEl:fi,originalEvent:e}),nn({sortable:this,name:"sort",toEl:vi,originalEvent:e})),Bi&&Bi.save()):In!==Ss&&In>=0&&(nn({sortable:this,name:"update",toEl:vi,originalEvent:e}),nn({sortable:this,name:"sort",toEl:vi,originalEvent:e})),St.active&&((In==null||In===-1)&&(In=Ss,Lr=ao),nn({sortable:this,name:"end",toEl:vi,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){gn("nulling",this),fi=qe=vi=At=ss=mi=da=Br=ns=Kn=eo=In=Lr=Ss=ao=vs=lo=Bi=ta=St.dragged=St.ghost=St.clone=St.active=null,Aa.forEach(function(e){e.checked=!0}),Aa.length=kl=Cl=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":qe&&(this._onDragOver(e),e_(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],i,n=this.el.children,r=0,o=n.length,a=this.options;r<o;r++)i=n[r],Qn(i,a.draggable,this.el,!1)&&e.push(i.getAttribute(a.dataIdAttr)||o_(i));return e},sort:function(e,i){var n={},r=this.el;this.toArray().forEach(function(o,a){var l=r.children[a];Qn(l,this.options.draggable,r,!1)&&(n[o]=l)},this),i&&this.captureAnimationState(),e.forEach(function(o){n[o]&&(r.removeChild(n[o]),r.appendChild(n[o]))}),i&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,i){return Qn(e,i||this.options.draggable,this.el,!1)},option:function(e,i){var n=this.options;if(i===void 0)return n[e];var r=Fo.modifyOption(this,e,i);typeof r<"u"?n[e]=r:n[e]=i,e==="group"&&nu(n)},destroy:function(){gn("destroy",this);var e=this.el;e[mn]=null,jt(e,"mousedown",this._onTapStart),jt(e,"touchstart",this._onTapStart),jt(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(jt(e,"dragover",this),jt(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(i){i.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Ca.splice(Ca.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Br){if(gn("hideClone",this),St.eventCanceled)return;Et(mi,"display","none"),this.options.removeCloneOnHide&&mi.parentNode&&mi.parentNode.removeChild(mi),Br=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Br){if(gn("showClone",this),St.eventCanceled)return;qe.parentNode==fi&&!this.options.group.revertClone?fi.insertBefore(mi,qe):ss?fi.insertBefore(mi,ss):fi.appendChild(mi),this.options.group.revertClone&&this.animate(qe,mi),Et(mi,"display",""),Br=!1}}};function e_(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function ra(t,e,i,n,r,o,a,l){var h,g=t[mn],_=g.options.onMove,x;return window.CustomEvent&&!Nr&&!zo?h=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(h=document.createEvent("Event"),h.initEvent("move",!0,!0)),h.to=e,h.from=t,h.dragged=i,h.draggedRect=n,h.related=r||e,h.relatedRect=o||Ai(e),h.willInsertAfter=l,h.originalEvent=a,t.dispatchEvent(h),_&&(x=_.call(g,h,a)),x}function Il(t){t.draggable=!1}function t_(){Kl=!1}function i_(t,e,i){var n=Ai(Ls(i.el,0,i.options,!0)),r=eu(i.el,i.options,At),o=10;return e?t.clientX<r.left-o||t.clientY<n.top&&t.clientX<n.right:t.clientY<r.top-o||t.clientY<n.bottom&&t.clientX<n.left}function n_(t,e,i){var n=Ai(I1(i.el,i.options.draggable)),r=eu(i.el,i.options,At),o=10;return e?t.clientX>r.right+o||t.clientY>n.bottom&&t.clientX>n.left:t.clientY>r.bottom+o||t.clientX>n.right&&t.clientY>n.top}function r_(t,e,i,n,r,o,a,l){var h=n?t.clientY:t.clientX,g=n?i.height:i.width,_=n?i.top:i.left,x=n?i.bottom:i.right,T=!1;if(!a){if(l&&fa<g*r){if(!co&&(lo===1?h>_+g*o/2:h<x-g*o/2)&&(co=!0),co)T=!0;else if(lo===1?h<_+fa:h>x-fa)return-lo}else if(h>_+g*(1-r)/2&&h<x-g*(1-r)/2)return s_(e)}return T=T||a,T&&(h<_+g*o/2||h>x-g*o/2)?h>_+g/2?1:-1:0}function s_(t){return Ln(qe)<Ln(t)?1:-1}function o_(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,n=0;i--;)n+=e.charCodeAt(i);return n.toString(36)}function a_(t){Aa.length=0;for(var e=t.getElementsByTagName("input"),i=e.length;i--;){var n=e[i];n.checked&&Aa.push(n)}}function pa(t){return setTimeout(t,0)}function Jl(t){return clearTimeout(t)}Ua&&Yt(document,"touchmove",function(t){(St.active||xs)&&t.cancelable&&t.preventDefault()});St.utils={on:Yt,off:jt,css:Et,find:Gh,is:function(e,i){return!!Qn(e,i,e,!1)},extend:j4,throttle:Kh,closest:Qn,toggleClass:An,clone:Qh,index:Ln,nextTick:pa,cancelNextTick:Jl,detectDirection:iu,getChild:Ls,expando:mn};St.get=function(t){return t[mn]};St.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(St.utils=fr(fr({},St.utils),n.utils)),Fo.mount(n)})};St.create=function(t,e){return new St(t,e)};St.version=W4;var Ci=[],to,Ql,e1=!1,Ol,Ml,Ia,io;function l_(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(i){var n=i.originalEvent;this.sortable.nativeDraggable?Yt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Yt(document,"pointermove",this._handleFallbackAutoScroll):n.touches?Yt(document,"touchmove",this._handleFallbackAutoScroll):Yt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(i){var n=i.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?jt(document,"dragover",this._handleAutoScroll):(jt(document,"pointermove",this._handleFallbackAutoScroll),jt(document,"touchmove",this._handleFallbackAutoScroll),jt(document,"mousemove",this._handleFallbackAutoScroll)),hc(),ga(),U4()},nulling:function(){Ia=Ql=to=e1=io=Ol=Ml=null,Ci.length=0},_handleFallbackAutoScroll:function(i){this._handleAutoScroll(i,!0)},_handleAutoScroll:function(i,n){var r=this,o=(i.touches?i.touches[0]:i).clientX,a=(i.touches?i.touches[0]:i).clientY,l=document.elementFromPoint(o,a);if(Ia=i,n||this.options.forceAutoScrollFallback||zo||Nr||so){Nl(i,this.options,l,n);var h=Hr(l,!0);e1&&(!io||o!==Ol||a!==Ml)&&(io&&hc(),io=setInterval(function(){var g=Hr(document.elementFromPoint(o,a),!0);g!==h&&(h=g,ga()),Nl(i,r.options,g,n)},10),Ol=o,Ml=a)}else{if(!this.options.bubbleScroll||Hr(l,!0)===ur()){ga();return}Nl(i,this.options,Hr(l,!1),!1)}}},Ir(t,{pluginName:"scroll",initializeByDefault:!0})}function ga(){Ci.forEach(function(t){clearInterval(t.pid)}),Ci=[]}function hc(){clearInterval(io)}var Nl=Kh(function(t,e,i,n){if(e.scroll){var r=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,a=e.scrollSensitivity,l=e.scrollSpeed,h=ur(),g=!1,_;Ql!==i&&(Ql=i,ga(),to=e.scroll,_=e.scrollFn,to===!0&&(to=Hr(i,!0)));var x=0,T=to;do{var M=T,D=Ai(M),F=D.top,Q=D.bottom,K=D.left,Z=D.right,ee=D.width,he=D.height,pe=void 0,p=void 0,H=M.scrollWidth,oe=M.scrollHeight,me=Et(M),Te=M.scrollLeft,Ae=M.scrollTop;M===h?(pe=ee<H&&(me.overflowX==="auto"||me.overflowX==="scroll"||me.overflowX==="visible"),p=he<oe&&(me.overflowY==="auto"||me.overflowY==="scroll"||me.overflowY==="visible")):(pe=ee<H&&(me.overflowX==="auto"||me.overflowX==="scroll"),p=he<oe&&(me.overflowY==="auto"||me.overflowY==="scroll"));var ve=pe&&(Math.abs(Z-r)<=a&&Te+ee<H)-(Math.abs(K-r)<=a&&!!Te),Le=p&&(Math.abs(Q-o)<=a&&Ae+he<oe)-(Math.abs(F-o)<=a&&!!Ae);if(!Ci[x])for(var We=0;We<=x;We++)Ci[We]||(Ci[We]={});(Ci[x].vx!=ve||Ci[x].vy!=Le||Ci[x].el!==M)&&(Ci[x].el=M,Ci[x].vx=ve,Ci[x].vy=Le,clearInterval(Ci[x].pid),(ve!=0||Le!=0)&&(g=!0,Ci[x].pid=setInterval((function(){n&&this.layer===0&&St.active._onTouchMove(Ia);var it=Ci[this.layer].vy?Ci[this.layer].vy*l:0,Ye=Ci[this.layer].vx?Ci[this.layer].vx*l:0;typeof _=="function"&&_.call(St.dragged.parentNode[mn],Ye,it,t,Ia,Ci[this.layer].el)!=="continue"||Jh(Ci[this.layer].el,Ye,it)}).bind({layer:x}),24))),x++}while(e.bubbleScroll&&T!==h&&(T=Hr(T,!1)));e1=g}},30),ou=function(e){var i=e.originalEvent,n=e.putSortable,r=e.dragEl,o=e.activeSortable,a=e.dispatchSortableEvent,l=e.hideGhostForTarget,h=e.unhideGhostForTarget;if(i){var g=n||o;l();var _=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,x=document.elementFromPoint(_.clientX,_.clientY);h(),g&&!g.el.contains(x)&&(a("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function O1(){}O1.prototype={startIndex:null,dragStart:function(e){var i=e.oldDraggableIndex;this.startIndex=i},onSpill:function(e){var i=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=Ls(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(i,r):this.sortable.el.appendChild(i),this.sortable.animateAll(),n&&n.animateAll()},drop:ou};Ir(O1,{pluginName:"revertOnSpill"});function M1(){}M1.prototype={onSpill:function(e){var i=e.dragEl,n=e.putSortable,r=n||this.sortable;r.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),r.animateAll()},drop:ou};Ir(M1,{pluginName:"removeOnSpill"});St.mount(new l_);St.mount(M1,O1);const c_=`
    <p><% print(_.escape(name)) %></p>
    <div class="clearfix"></div>

    <table class="table" style="margin-bottom: 0;">
        <tbody>
            <tr><td style="border-top-width: 1px;">
                <span class="glyphicon glyphicon-share"></span> Open with:
                <% _.each(imageLinks, function(link, i) { %>
                    <% if (i > 0) {print("|")} %>
                    <a target="_blank" href="<%= link.url %>">
                        <%= link.text %>
                    </a>
                <% }) %>
            </td></tr>
            <tr><td class="row">
                <div class="col-sm-5"><small><strong>Image ID</strong>:</small></div>
                <div class="col-sm-7" style="position: relative">
                    <small><%= imageId %></small>
                    <button type="button"
                            style="position:absolute; top:0px; right:0px"
                            <% if(!setImageId) { %>disabled="disabled"<% } %>
                            class="btn btn-small btn-success setId">
                        Edit ID
                    </button>
                </div>

                <div class="col-sm-5"><small><strong>Dimensions (XY)</strong>:</small></div>
                <div class="col-sm-7"><small><%= orig_width %> x <%= orig_height %></small></div>

                <div class="col-sm-5"><small><strong>Z-sections</strong>:</small></div>
                <div class="col-sm-7"><small><%= sizeZ %></small></div>
                <div class="clearfix"></div>
                <div class="col-sm-5"><small><strong>Timepoints</strong>:</small></div>
                <div class="col-sm-7"><small><%= sizeT %></small></div>
                <div class="clearfix"></div>
                <div class="col-sm-5"><small><strong>Channels</strong>:</small></div>
                <div class="col-sm-7"><small>
                    <% _.each(channel_labels, function(c, i) {
                        print(_.escape(c)); print((i < channels.length-1) ? ", " : "");
                    }); %>
                </small></div>
                <div class="col-sm-5"><small><strong>Pixels Type</strong>:</small></div>
                <div class="col-sm-7"><small><%= pixelsType %></small></div>
            </td></tr>
        </tbody>
    </table>
`,h_=`


    <table id="xywh_table" class="table">
        <tbody>
            <tr><td>
                Panel

                <form class="form-inline float-end">
                    <div style="display: inline-block;">
                        <%= dpi %> dpi

                        <% if (export_dpi != dpi && !isNaN(export_dpi)) { %>
                        (Export at <%= export_dpi %> dpi
                            <% if (export_dpi > dpi) { %>
                            <button type="button" title="Delete Label" class="close btn btn-sm btn-light clear_dpi"
                                title="Remove (don't change dpi on export)"
                                aria-hidden="true" style="float: none; padding: 0; margin-top: -3px;">×</button>
                            <% } %>
                        <label>)</label>
                        <% } %>
                    </div>
                    <button class="btn btn-sm btn-success set_dpi"
                        title="Resample to a higher dpi at export">Set dpi</button>
                </form>
                
            </td></tr>
            <tr><td style="border-bottom-width: 0">
                <form class="form-horizontal xywh_form" role="form" style="position:relative">
                    <div class="form-group row mb-3">
                        <label class="col-sm-2 col-form-label">X</label>
                        <div class="col-sm-4">
                            <input type="number" name="x" min="0" class="form-control input-sm" value="<%= x %>">
                        </div>
                        <label class="col-sm-2  col-form-label">Width</label>
                        <div class="col-sm-4">
                            <input type="number" name="width" min="0" class="form-control input-sm" value="<%= width %>">
                        </div>
                    </div>
                    <div class="form-group row mb-2">
                        <label class="col-sm-2 col-form-label">Y</label>
                        <div class="col-sm-4">
                            <input type="number" name="y" min="0" class="form-control input-sm" value="<%= y %>">
                        </div>
                        <label class="col-sm-2 col-form-label">
                            Height
                        </label>
                        <div class="col-sm-4">
                            <input type="number" name="height" min="0" class="form-control input-sm" value="<%= height %>">
                        </div>
                    </div>
                    <button type="button" class="btn btn-link setAspectRatio" title="Maintain aspect ratio">
                        <i class="bi-link-45deg"></i>
                        <i class="bi-check-circle-fill okSign"></i>
                    </button>
                    <div style="position:absolute; right: 100px; top: 19px; border: solid #bbb 1px; width: 9px; height: 55px; border-right: 0px;"></div>
                </form>
            </td></tr>
        </tbody>
    </table>
`;var u_=ft.View.extend({template:$e.template(c_),xywh_template:$e.template(h_),initialize:function(t){if(this.render=$e.debounce(this.render),this.figureModel=t.figureModel,this.models=t.models,t.models.length>1){var e=this;this.models.forEach(function(i){e.listenTo(i,"change:x change:y change:width change:height change:imageId change:zoom change:min_export_dpi change:max_export_dpi",e.render)})}else t.models.length==1&&(this.model=t.models.head(),this.listenTo(this.model,"change:x change:y change:width change:height change:zoom change:min_export_dpi change:max_export_dpi",this.render),this.listenTo(this.model,"drag_resize",this.drag_resize))},events:{"click .setId":"setImageId","click .set_dpi":"set_dpi","click .clear_dpi":"clear_dpi","blur .xywh_form input":"handle_xywh","keyup .xywh_form input":"handle_xywh","click .setAspectRatio":"lockAspectRatio"},handle_xywh:function(t){if(!this.rendering&&!(t.type==="keyup"&&t.which!==13)){var e=t.target.getAttribute("name"),i=parseInt(t.target.value,10);if(!isNaN(i)){var n=this.figureModel.getFigureSize();this.ignoreChange=!0;var r=!1;this.models.forEach((function(o){if(e==="x"||e==="y"){var a=o.get(e),l={};l[e]=a;var h=this.figureModel.getPageOffset(l),g=a-h[e]+i;e==="x"?((g>n.w||g<0)&&(this.ignoreChange=!1),g=Math.min(n.w,g)):e==="y"&&((g>n.h||g<0)&&(this.ignoreChange=!1),g=Math.min(n.h,g)),g=Math.max(0,g),o.set(e,g)}else{if(i<1){this.render();return}var _={};if(_[e]=i,C(".setAspectRatio",this.$el).hasClass("aspectRatioSelected")){r=!0;var x=o.get("width"),T=o.get("height"),M=x/T;if(e==="width"){var D=i/M;_.height=D}else{var F=i*M;_.width=F}this.ignoreChange=!1}o.save(_)}}).bind(this)),setTimeout((function(){this.ignoreChange=!1,r&&C(".setAspectRatio",this.$el).addClass("aspectRatioSelected")}).bind(this),50)}}},set_dpi:function(t){t.preventDefault(),Hi("dpiModal")},clear_dpi:function(t){t.preventDefault(),this.models.forEach(function(e){e.unset("min_export_dpi")})},setImageId:function(t){t.preventDefault(),Hi("setIdModal"),C("#setIdModal .imgId").val("").focus()},lockAspectRatio:function(t){t.preventDefault(),C(".setAspectRatio",this.$el).toggleClass("aspectRatioSelected")},drag_resize:function(t){C("#xywh_table").remove();var e={x:t[0].toFixed(0),y:t[1].toFixed(0),width:t[2].toFixed(0),height:t[3].toFixed(0)},i=this.figureModel.getPageOffset(e);e.x=i.x,e.y=i.y,e.dpi=this.model.getPanelDpi(e.width,e.height),e.export_dpi=this.model.get("min_export_dpi"),this.$el.append(this.xywh_template(e))},getImageLinks:function(t,e){var i=t.map((a,l)=>({id:a,name:e[l],type:"image"})).filter(function(a){return!isNaN(a.id)}),n=t.filter(function(a){return typeof a=="string"&&a.indexOf("zarr")>-1}),r=[];if(i.length>0){var o=i.map(a=>a.id);r.push({text:"Webclient",url:WEBINDEX_URL+"?show=image-"+o.join("|image-")}),fo.forEach(function(a){var l=!1;if(typeof a.isEnabled=="function"?l=a.isEnabled(i):typeof a.supported_objects=="object"&&a.supported_objects.length>0&&(l=a.supported_objects.reduce(function(_,x){return _||x==="images"||x==="image"&&t.length===1},!1)),!!l){var h=a.url+"?image="+t.join("&image=");if(a.getUrl&&(h=a.getUrl(i,a.url)),h.indexOf(BASE_WEBFIGURE_URL)!==0){var g=a.label||a.id;r.push({text:g,url:h})}}})}return n.length==1&&r.push({text:"ome-ngff-validator",url:"https://ome.github.io/ome-ngff-validator/?source="+n[0]}),r},render:function(){if(!this.ignoreChange){this.rendering=!0;var t,e=this.models.length+" Panels Selected...",i=this.models.pluck("imageId"),n=this.models.pluck("name");if(this.models.forEach((function(a){var l=a.toJSON();$e.each(["x","y","width","height"],function(_){l[_]!="-"&&(l[_]=l[_].toFixed(0))});var h=this.figureModel.getPageOffset(l);if(l.x=h.x,l.y=h.y,l.dpi=a.getPanelDpi(),l.channel_labels=l.channels.map(function(_){return _.label}),!t)t=l;else{t.name=e;var g=["imageId","orig_width","orig_height","sizeT","sizeZ","x","y","width","height","dpi","min_export_dpi","max_export_dpi","pixelsType"];$e.each(g,function(_){t[_]!=l[_]&&(_==="x"||_==="y"||_==="width"||_==="height"?t[_]="":t[_]="-")}),l.channels.length!=t.channel_labels.length?t.channel_labels=["-"]:$e.each(l.channels,function(_,x){t.channel_labels[x]!=_.label&&(t.channel_labels[x]="-")})}}).bind(this)),t.export_dpi=Math.min(t.dpi,t.max_export_dpi),isNaN(t.min_export_dpi)||(t.export_dpi=Math.max(t.export_dpi,t.min_export_dpi)),t.imageLinks=this.getImageLinks(i,n),t.setImageId=$e.uniq(i).length==1,t){var r=this.template(t),o=this.xywh_template(t);this.$el.html(r+o)}return this.rendering=!1,this}}});const d_=`
 <div class="clearfix channel_slider_<%=idx%>" style="position: relative; padding-bottom: 4px">


    <div class="btn-group">
            <button type="button"
            title="<%= _.escape(label) %>"
                    class="btn btn-default channel-btn lutBg <% if (isDark) { print('font-white') } %>"
                    data-index="<%= idx %>"
                    style="background-color:#<%= color %>; <%= lutBgCss %>">

                    <%= _.escape(label) %>
                    <div class="<% if(active) { %>ch-btn-down<% } else if (typeof active == 'boolean') { %>ch-btn-up<% } else { %>ch-btn-flat<% }%>">&nbsp</div>
            </button>
            <button type="button" class="btn btn-default dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown" aria-expanded="false">
                <span class="visually-hidden">Toggle Dropdown</span>
              </button>
            <ul class="dropdown-menu colorpicker" data-index="<%= idx %>">
                <li>
                    <a data-color="reverse" class="reverseIntensity dropdown-item" href="#">
                        <% if(reverse) { %> <i class="bi-check-lg"></i> <% } else { %> &nbsp &nbsp <% } %>
                        Invert
                    </a>
                </li>
                <li class="dropdown-divider"></li>
                <li><a data-color="0000FF" href="#" class="dropdown-item">
                    <span style="background-color:#00f">&nbsp &nbsp &nbsp</span>&nbsp Blue
                </a></li>
                <li><a data-color="00FF00" href="#" class="dropdown-item">
                    <span style="background-color:#0f0">&nbsp &nbsp &nbsp</span>&nbsp Green
                </a></li>
                <li><a data-color="FF0000" href="#" class="dropdown-item">
                    <span style="background-color:#f00">&nbsp &nbsp &nbsp</span>&nbsp Red
                </a></li>
                <li><a data-color="FFFF00" href="#" class="dropdown-item">
                    <span style="background-color:#ff0">&nbsp &nbsp &nbsp</span>&nbsp Yellow
                </a></li>
                <li><a data-color="FFFFFF" href="#" class="dropdown-item">
                    <span style="background-color:#fff">&nbsp &nbsp &nbsp</span>&nbsp White
                </a></li>
                <li><a data-color="FF00FF" href="#" class="dropdown-item">
                    <span style="background-color:#f0f">&nbsp &nbsp &nbsp</span>&nbsp Magenta
                </a></li>
                <li><a data-color="00FFFF" href="#" class="dropdown-item">
                    <span style="background-color:#0ff">&nbsp &nbsp &nbsp</span>&nbsp Cyan
                </a></li>
                <li class="dropdown-divider"></li>
                <li><a data-color="lutpicker" href="#" class="dropdown-item">
                    <span class="hueBg">&nbsp &nbsp &nbsp</span>&nbsp Lookup Tables
                </a></li>
                <li><a data-color="colorpicker" data-oldcolor="<%= color %>" href="#" class="dropdown-item">
                    <span class="colorpickerOption">&nbsp &nbsp &nbsp</span>&nbsp More Colors...
                </a></li>
            </ul>
    </div>

    <span class="ch_start">
        <input type="number" data-window="start"
        <% if (startsNotEqual) { %>
            title="Average: <%= startAvg %> (selected images have different start values)"
            style="color: #ccc;"
        <% } %>
        data-idx="<%=idx%>" value="<%= startAvg %>" max="<%= endAvg %>">
    </span>
    <div class="ch_slider">
        <!-- We use 2 sliders to simulate a 2-handled slider -->
        <!-- We use a ::before element for background so we can 'flip' it scaleX(-1)
            without flipping the slider itself (can't just flip background-image)
         -->
        <input class="ch_start_slider" data-idx="<%=idx%>"
            data-slidemax="<%= endAvg %>"
            min="<%= min %>" max="<%= max %>" step="<%= step %>"
            type="range" value="<%= startAvg %>"
            style="background-color:#<%=color%>;
                <%= lutBgCss %>
                --scaleX: <%= reverse ? -1 : 1 %>"/>
        <!-- data-slidemin and data-slidemax used to prevent sliding start > end etc -->
        <input class="ch_end_slider" data-idx="<%=idx%>" data-slidemin="<%= startAvg %>"
            min="<%= min %>" max="<%= max %>" step="<%= step %>"
            type="range" value="<%= endAvg %>" style="background-color: rbga(1,1,1,0)"/>
    </div>
    <span class="ch_end">
        <input type="number" data-window="end"
        <% if (endsNotEqual) { %>
            title="Average: <%= endAvg %> (selected images have different end values)"
            style="color: #ccc;"
        <% } %>
        data-idx="<%=idx%>" value="<%= endAvg %>" min="<%= startAvg %>">
    </span>
</div>
`,f_=`<div class="checkbox-container" title="Toggle Hilo LUT mode on channels">\r
    <input type="checkbox" id="hiloCheckbox" name="hiloCheckbox">\r
    <label for="hiloCheckbox">  Hilo LUT</label>\r
</div>\r
`,Rl=100;var p_=ft.View.extend({template:$e.template(d_),checkboxTemplate:$e.template(f_),initialize:function(t){this.models=t.models;var e=this;this.models.forEach(function(i){e.listenTo(i,"change:channels",e.render)})},events:{"keyup .ch_start":"handle_channel_input","keyup .ch_end":"handle_channel_input","click .channel-btn":"toggle_channel","click .dropdown-menu a":"pick_color","input .ch_slider input":"channel_slider_slide","change .ch_slider input":"channel_slider_stop","mousemove .ch_start_slider":"start_slider_mousemove","mousemove .ch_end_slider":"end_slider_mousemove","change #hiloCheckbox":"handle_hilo_checkbox"},start_slider_mousemove:function(t){let e=C(t.target),i=t.offsetX/e.width(),n=parseFloat(e.data("slidemax")),r=parseFloat(e.val()),o=this.get_midfraction(r,n,e);i>o&&C(".ch_end_slider",e.parent()).css("pointer-events","all")},end_slider_mousemove:function(t){let e=C(t.target),i=t.offsetX/e.width(),n=parseFloat(e.data("slidemin")),r=parseFloat(e.val()),o=this.get_midfraction(n,r,e);i<o&&e.css("pointer-events","none")},get_midfraction(t,e,i){let n=(t+e)/2,r=parseFloat(i.attr("min")),o=parseFloat(i.attr("max"));return(n-r)/(o-r)},pick_color:function(t){var e=t.currentTarget.getAttribute("data-color"),i=C(t.currentTarget).parent().parent(),n=C(t.currentTarget).attr("data-oldcolor"),r=i.attr("data-index"),o=this;if(e=="colorpicker")Ba.show({color:n,success:function(l){l=l.replace("#",""),o.set_color(r,l)}});else if(e=="lutpicker")Ts.show({success:function(l){o.set_color(r,l)}});else if(e=="reverse"){var a=C("i",t.currentTarget).length>0;o.models.forEach(function(l){l.save_channel(r,"reverseIntensity",!a)})}else this.set_color(r,e);return!1},set_color:function(t,e){this.models&&this.models.forEach(function(i){i.save_channel(t,"color",e)})},hexToRgb:function(e){var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(i)return{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)};if(i=/^#?([a-f\d]{1})([a-f\d]{1})([a-f\d]{1})$/i.exec(e),i)return{r:parseInt(i[1]+"0",16),g:parseInt(i[2]+"0",16),b:parseInt(i[3]+"0",16)}},isDark:function(t){if(t.endsWith(".lut"))return!1;var e=this.hexToRgb(t);if(!e)return!1;var i,n,r,o,a,l;return i=Math.min(e.r,e.g,e.b),n=Math.max(e.r,e.g,e.b),o=n,r=n-i,n!==0?a=r/n:(o=0,a=0,l=0),r===0?l=0:e.r==n?l=(e.g-e.b)/r:e.g==n?l=2+(e.b-e.r)/r:l=4+(e.r-e.g)/r,l=l*60,l<0&&(l+=360),l=l/360,o=o/255,o<.6||l>.6&&a>.7},toggle_channel:function(t){var e=t.currentTarget.getAttribute("data-index");if(this.model)this.model.toggle_channel(e);else if(this.models){var i=C("div",t.currentTarget).hasClass("ch-btn-flat");this.models.forEach(function(n){i?n.toggle_channel(e,!0):n.toggle_channel(e)})}return!1},handle_channel_input:function(t){if(!(t.type==="keyup"&&t.which!==13)){var e=t.target.getAttribute("data-idx"),i=t.target.getAttribute("data-window");e=parseInt(e,10);var n=parseFloat(t.target.value,10);if(!isNaN(n)){if(t.target.getAttribute("max")&&n>t.target.getAttribute("max")){alert("Enter a value less than "+t.target.getAttribute("max"));return}if(t.target.getAttribute("min")&&n<t.target.getAttribute("min")){alert("Enter a value greater than "+t.target.getAttribute("min"));return}var r={};r[i]=n,this.models.forEach(function(o){o.save_channel_window(e,r)})}}},channel_slider_slide:function(t){let e=C(t.target),i=parseFloat(t.target.value),n=e.attr("max"),r=e.attr("min"),o=e.data("idx");const a=e.hasClass("ch_start_slider");if(a){let l=e.data("slidemax");if(i>l){e.val(l);return}}else{let l=e.data("slidemin");if(i<l){e.val(l);return}}i=n-r>Rl?i:i.toFixed(2),a?C(`.channel_slider_${o} .ch_start input`).val(i):C(`.channel_slider_${o}  .ch_end input`).val(i)},channel_slider_stop:function(t){let e=parseFloat(t.target.value),i=C(t.target),n=i.data("idx"),r={};i.hasClass("ch_start_slider")?r.start=e:r.end=e,this.models.forEach(function(o){o.save_channel_window(n,r)})},clear:function(){return C("#channel_sliders").empty(),this},handle_hilo_checkbox:function(t){var e=t.target.checked;this.models.forEach(function(i){if(e&&!i.get("hilo_enabled")){i.save({hilo_enabled:!0,hilo_channels_state:i.get("channels").map(function(o){return{color:o.color,active:o.active}})});let n=!1,r=i.get("channels").map(function(o,a){let l={color:"hilo.lut",active:!n&&o.active};return n=n||o.active,l});i.save_channels(r)}else if(!e&&i.get("hilo_enabled")){i.save("hilo_enabled",!1);let n=i.get("channels").map(function(r,o){return i.get("hilo_channels_state")[o]});i.save_channels(n)}})},loadCheckboxState:function(){var t=this.$("#hiloCheckbox")[0];this.models.forEach(function(e){t.checked=e.get("hilo_enabled")||t.checked})},render:function(){var t=this,e=function(T,M){return T+M},i=function(T){return function(M){return M[T].color}},n=function(T){return function(M){return M[T].label}},r=function(T){return function(M){return M[T].reverseIntensity===!0}},o=function(T){return function(M){return M[T].active===!0}},a=function(T,M){return function(D){return parseFloat(D[T].window[M])}},l=function(T,M){return M===T?T:void 0},h=function(T){return function(M,D){return T(M,D)}},g=this.models.map(function(T){return T.get("channels")}),_=g.reduce(function(T,M){return M.length===T?T:!1},g[0].length);if(!_)return this;this.$el.empty(),g[0].forEach((function(T,M){var D=g.map(a(M,"start")),F=g.map(a(M,"end")),Q=g.map(a(M,"min")),K=g.map(a(M,"max")),Z=g.map(i(M)),ee=g.map(r(M)),he=g.map(o(M)),pe=g.map(n(M)),p=D.reduce(e,0)/D.length,H=F.reduce(e,0)/F.length,oe=D.reduce(l,D[0])===void 0,me=F.reduce(l,F[0])===void 0,Te=Q.reduce(h(Math.min)),Ae=K.reduce(h(Math.max));Ae-Te>Rl?(p=parseInt(p),H=parseInt(H)):(p=p.toFixed(2),H=H.toFixed(2));var ve=Z.reduce(l,Z[0])?Z[0]:"ccc",Le=pe.reduce(l,pe[0])?pe[0]:" ",We=!!ee.reduce(l,ee[0]),it=he.reduce(l,he[0]),Ye=Ts.getLutBackgroundPosition(ve),tt=Ts.getLutPng(ve);console.log("lutPng",tt);var Qe="--bgPos: 0 0;";ve.endsWith(".lut")&&tt?(Qe=`--bgPos: 0 0; --lutPng: url('${tt}'); --pngHeight: 100%;`,ve="ccc"):Qe=`--bgPos: ${Ye};`,ve.toUpperCase()==="FFFFFF"&&(ve="ccc"),ve=="FFFFFF"&&(ve="ccc"),Te=Math.min(Te,p),Ae=Math.max(Ae,H);var st=t.template({idx:M,label:Le,startAvg:p,startsNotEqual:oe,endAvg:H,endsNotEqual:me,min:Te,max:Ae,step:Ae-Te>Rl?1:.01,active:it,lutBgCss:Qe,reverse:We,color:ve,isDark:this.isDark(ve)});C(st).appendTo(this.$el)}).bind(this));var x=this.checkboxTemplate();return this.$el.append(x),this.loadCheckboxState(),this}});const g_=`
    <div class="pixel_size_form" style="position:relative">
        <div class="pixel_size_div">
            Pixel Size:
            <input class="input-sm form-control pixel_size_input" placeholder="Pixel Size (<%= pixel_size_symbol %>)"
                    style="width:100px; display:none" value="<%= pixel_size_x %>">
            <span class="pixel_size_display">
                <% if (!pixel_size_x)
                    {print('<span style="color:red">NOT SET</span>')}
                else if (typeof pixel_size_x === 'number')
                    {print(pixel_size_x.toFixed(3) + " " + pixel_size_symbol)}
                else
                    {print(pixel_size_x + " " + pixel_size_symbol)} %>
            </span>
        </div>
    </div>
<form class="scalebar_form">
    <div class="row gy-2 gx-3 align-items-center" style="--bs-gutter-x: 0.3rem;">
        <div class="col-auto input-group-sm">
            <label class="col-form-label col-form-label-sm" style="width:50px">Length</label>
        </div>
        <div class="col-auto input-group-sm">
          <input type="number" class="scalebar-length input-sm form-control"
            placeholder="Length" value="<%= length %>" style="width:52px"/>
        </div>
        <div class="col-auto form-group btn-group scalebar_unit">
            <button type="button" class="scalebar-units btn btn-outline-secondary btn-sm dropdown-toggle"
                    title="Units" data-bs-toggle="dropdown">
                <span class="dropdown_icon" data-unit="<%= units %>"><%= units_symbol %></span>
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu">
                <% _.each(unit_symbols, function(u){ %>
                    <li><a class='dropdown-item' href='#'>
                        <%= u.unit %> (<span class="dropdown_icon" data-unit="<%= u.unit %>"><%= u.symbol %></span>)
                    </a></li>
                <% }); %>
            </ul>
        </div>
        <div class="form-group col-sm-auto btn-group">
            <button type="button" class="label-position btn btn-outline-secondary btn-sm dropdown-toggle" 
                    title="Position" data-bs-toggle="dropdown">
                <!-- e.g. position 'topleft' -> class 'bi-box-arrow-in-up-left' -->
                <i data-position="<%= position %>" class="bi-box-arrow-in-<%= position.replace('bottom', 'down-').replace('top', 'up-') %> dropdown_icon"></i>
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu">
                <li role="presentation" class="dropdown-header">Inside Corners</li>
                <li><a class="dropdown-item" href="#">
                    <i data-position="topleft" class="bi-box-arrow-in-up-left dropdown_icon"></i>
                    Top Left</a>
                </li>
                <li><a class="dropdown-item" href="#">
                    <i data-position="topright" class="bi-box-arrow-in-up-right dropdown_icon"></i>
                    Top Right</a>
                </li>
                <li><a class="dropdown-item" href="#">
                    <i data-position="bottomleft" class="bi-box-arrow-in-down-left dropdown_icon"></i>
                    Bottom Left</a>
                </li>
                <li><a class="dropdown-item" href="#">
                    <i data-position="bottomright" class="bi-box-arrow-in-down-right dropdown_icon"></i>
                    Bottom Right</a>
                </li>
            </ul>
        </div>
        <div class="form-group col-sm-auto btn-group">
            <button type="button" class="label-color btn btn-outline-secondary btn-sm dropdown-toggle" title="Label Color"
                data-bs-toggle="dropdown">
                <span class="dropdown_icon" data-color="<%= color %>" style="background-color:#<%= color %>">&nbsp &nbsp &nbsp</span>
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu colorpicker" role="menu">
                <!-- NB: dropdown_icon is picked on choosing dropdown, replaces icon in button above -->
                <li><a class="dropdown-item" href="#">
                    <span class="dropdown_icon" data-color="000000" style="background-color:#000">&nbsp &nbsp &nbsp</span>&nbsp Black
                </a></li>
                <li><a class="dropdown-item" href="#">
                    <span class="dropdown_icon" data-color="0000FF" style="background-color:#00f">&nbsp &nbsp &nbsp</span>&nbsp Blue
                </a></li>
                <li><a class="dropdown-item" href="#">
                    <span class="dropdown_icon" data-color="00FF00" style="background-color:#0f0">&nbsp &nbsp &nbsp</span>&nbsp Green
                </a></li>
                <li><a class="dropdown-item" href="#">
                    <span class="dropdown_icon" data-color="FF0000" style="background-color:#f00">&nbsp &nbsp &nbsp</span>&nbsp Red
                </a></li>
                <li><a class="dropdown-item" href="#">
                    <span class="dropdown_icon" data-color="FFFF00" style="background-color:#ff0">&nbsp &nbsp &nbsp</span>&nbsp Yellow
                </a></li>
                <li><a class="dropdown-item" href="#">
                    <span class="dropdown_icon" data-color="FFFFFF" style="background-color:#fff">&nbsp &nbsp &nbsp</span>&nbsp White
                </a></li>
                <li><a class="dropdown-item" href="#">
                    <span class="dropdown_icon" data-color="FF00FF" style="background-color:#f0f">&nbsp &nbsp &nbsp</span>&nbsp Magenta
                </a></li>
                <li><a class="dropdown-item" href="#">
                    <span class="dropdown_icon" data-color="00FFFF" style="background-color:#0ff">&nbsp &nbsp &nbsp</span>&nbsp Cyan
                </a></li>
            </ul>
        </div>

        <div class="col-auto input-group-sm" style="flex: 1 1 auto; padding-right: 0">
            <% if (show){ %>
                <button type="submit" class="show_scalebar btn btn-sm btn-success float-end">Show</button>
            <% } else { %>
                <button type="button" class="hide_scalebar btn btn-outline-secondary btn-sm float-end">Hide</button>
            <% } %>
        </div>
    </div>
    <div class="row gy-2 gx-3 align-items-center" style="--bs-gutter-x: 0.3rem;">
        <div class="col-auto input-group-sm">
            <label class="col-form-label col-form-label-sm" style="width:50px">Height</label>
        </div>
        <div class="form-group col-auto scalebar_length input-group-sm">
            <input type="number" class="label-text scalebar-height form-control input-sm" 
            placeholder="Height" value="<%= height %>" style="width:52px" />
        </div>
        <div class="col-auto input-group-sm" style="margin-right: 10px;">
            <label class="col-form-label col-form-label-sm">px</label>
        </div>

        <div class="col-auto input-group-sm">
            <label class="form-check-label">Label</label>
            <input type="checkbox" class="scalebar_label form-check-input" <% if (show_label) print("checked") %> />
        </div>

        <div class="col-auto btn-group" style="padding: 0; width: 50px;">
            <button type="button" class="scalebar_font_size btn btn-outline-secondary btn-sm dropdown-toggle" title="Font Size"
            data-bs-toggle="dropdown" style="width:33px; <% if (!show_label) print("display:none") %>">
                <span class='dropdown_icon'><%= font_size %></span>
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu">
            <% _.each([6,8,10,12,14,18,21,24,36,48],function(p){
                print ("<li><a class='dropdown-item' href='#'><span class='dropdown_icon'>"+p+"</span></a></li>")
            }); %>
            </ul>
        </div>
        <div class="form-group col-auto scalebar_text" style="padding-left: 2px;">
            <% if (show_label) print("pt") %>
        </div>
    </div>
</form>
`;var m_=ft.View.extend({template:$e.template(g_),initialize:function(t){this.render=$e.debounce(this.render),this.models=t.models;var e=this;this.models.forEach(function(i){e.listenTo(i,"change:scalebar change:pixel_size_x change:scalebar_label",e.render)})},events:{"submit .scalebar_form":"update_scalebar","click .scalebar_label":"update_scalebar","change .btn":"dropdown_btn_changed","click .hide_scalebar":"hide_scalebar","click .pixel_size_display":"edit_pixel_size","keypress .pixel_size_input":"enter_pixel_size","blur .pixel_size_input":"save_pixel_size","keyup input[type='number']":"handle_keyup"},handle_keyup:function(t){t.which==13&&this.update_scalebar()},edit_pixel_size:function(){C(".pixel_size_display",this.$el).hide(),C(".pixel_size_input",this.$el).css("display","inline-block").focus()},done_pixel_size:function(){C(".pixel_size_display",this.$el).show(),C(".pixel_size_input",this.$el).css("display","none").focus()},enter_pixel_size:function(t){t.keyCode==13&&this.save_pixel_size(t)},save_pixel_size:function(t){this.done_pixel_size();var e=C(t.target).val();if(e.length!==0){var i=parseFloat(e);isNaN(i)||this.models.forEach(function(n){n.save("pixel_size_x",i)})}},dropdown_btn_changed:function(t){C(t.target).closest("form").submit()},hide_scalebar:function(){this.models.forEach(function(t){t.hide_scalebar()})},update_scalebar:function(t){var e=C(".scalebar_form "),i=C(".scalebar-length",e).val(),n=C(".scalebar-units span:first",e).attr("data-unit"),r=C(".label-position i:first",e).attr("data-position"),o=C(".label-color span:first",e).attr("data-color"),a=C(".scalebar_label",e).prop("checked"),l=C(".scalebar_font_size span:first",e).text().trim(),h=parseInt(C(".scalebar-height",e).val());return this.models.forEach(function(g){var _=g.get("scalebar"),x={show:!0};i!="-"&&(x.length=parseFloat(i,10)),n!="-"?x.units=n:_&&_.units?x.units=_.units:g.get("pixel_size_x_unit")?x.units=g.get("pixel_size_x_unit"):x.units="MICROMETER",r!="-"&&(x.position=r),o!="-"&&(x.color=o),x.show_label=a,l!="-"&&(x.font_size=l),h!="-"&&(x.height=h),g.save_scalebar(x)}),!1},render:function(){var t={show:!1,show_label:!0},e=!1,i,n=["PICOMETER","ANGSTROM","NANOMETER","MICROMETER","MILLIMETER","CENTIMETER","METER","KILOMETER","MEGAMETER"],r=Object.keys(LENGTH_UNITS).filter(function(a){return n.indexOf(a)>-1}).map(function(a){return C.extend({unit:a},LENGTH_UNITS[a])});r.sort(function(a,l){return a.microns>l.microns?1:-1}),t.unit_symbols=r,this.models.forEach(function(a){if(!t.pixel_size_x)t.pixel_size_x=a.get("pixel_size_x"),t.pixel_size_symbol=a.get("pixel_size_x_symbol"),t.pixel_size_unit=a.get("pixel_size_x_unit");else{let l=a.get("pixel_size_x");l=l&&l.toFixed(10),t.pixel_size_x!="-"&&t.pixel_size_x.toFixed(10)!=l&&(t.pixel_size_x="-"),t.pixel_size_symbol!=a.get("pixel_size_x_symbol")&&(t.pixel_size_symbol="-"),t.pixel_size_unit!=a.get("pixel_size_x_unit")&&(t.pixel_size_unit="-")}i=a.get("scalebar"),i&&(t.length?(t.length!=i.length&&(t.length="-"),t.units!=i.units&&(t.units="-"),t.position!=i.position&&(t.position="-"),t.color!=i.color&&(t.color="-"),i.show_label||(t.show_label=!1),t.font_size!=i.font_size&&(t.font_size="-"),t.height!=i.height&&(t.height="-")):(t.length=i.length,t.units=i.units,t.position=i.position,t.color=i.color,t.show_label=i.show_label,t.font_size=i.font_size,t.height=i.height)),(!i||!i.show)&&(e=!0)}),(this.models.length===0||e)&&(t.show=!0),t.length=t.length||10,t.units=t.units||t.pixel_size_unit,t.units_symbol="-",t.units!=="-"&&(t.units_symbol=LENGTH_UNITS[t.units].symbol),t.position=t.position||"bottomright",t.color=t.color||"FFFFFF",t.font_size=t.font_size||10,t.pixel_size_symbol=t.pixel_size_symbol||"-",t.height=t.height||3;var o=this.template(t);return this.$el.html(o),this}});const __=`<form class="colorbar_form">
    <div class="row gy-2 gx-3 align-items-center" style="--bs-gutter-x: 0.3rem;">

        <div class="col-auto input-group-sm" style="padding-right: 0px;">
            <label class="col-form-label col-form-label-sm" style="width: 60px;">Thickness</label>
        </div>
        <div class="col-auto input-group-sm"  style="padding-right: 0px;">
            <input type="number" class="colorbar-thickness input-sm form-control"
            value="<%= thickness %>" style="width:42px;" min="1" max="1000" />
        </div>
        <div class="col-auto input-group-sm"  style="padding-left: 0px; margin-right: 3px;">
            <label class="col-form-label col-form-label-sm">px</label>
        </div>

        <div class="col-auto input-group-sm" style="padding-right: 0px;">
            <label class="col-form-label col-form-label-sm">Gap</label>
        </div>
        <div class="col-auto input-group-sm"  style="padding-right: 0px;" title="Distance between panel and colorbar (negative value allowed)">
            <input type="number" class="colorbar-gap input-sm form-control"
            value="<%= gap %>" style="width:42px" />
        </div>
        <div class="col-auto input-group-sm"  style="padding-left: 0px; margin-right: 3px;">
            <label class="col-form-label col-form-label-sm">px</label>
        </div>

        <div class="form-group col-sm-auto btn-group">
            <button type="button" class="label-position btn btn-outline-secondary btn-sm dropdown-toggle"
                    title="Position" data-bs-toggle="dropdown">
                <i data-position="<%= position %>" class="bi-box-arrow-in-<%= position.replace('bottom', 'down').replace('top', 'up') %> dropdown_icon"></i>
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu">
                <li><a class="dropdown-item" href="#">
                    <i data-position="right" class="bi-box-arrow-right dropdown_icon"></i> Right</a>
                </li>
                <li><a class="dropdown-item" href="#">
                    <i data-position="left" class="bi-box-arrow-left dropdown_icon"></i> Left</a>
                </li>
                <li><a class="dropdown-item" href="#">
                    <i data-position="top" class="bi-box-arrow-up dropdown_icon"></i> Top</a>
                </li>
                <li><a class="dropdown-item" href="#">
                    <i data-position="bottom" class="bi-box-arrow-down dropdown_icon"></i> Bottom</a>
                </li>
            </ul>
        </div>

        <div class="col-auto input-group-sm" style="flex: 1 1 auto; padding-right: 0">
            <% if (show){ %>
                <button type="submit" class="show_colorbar btn btn-sm btn-success float-end">Show</button>
            <% } else { %>
                <button type="button" class="hide_colorbar btn btn-outline-secondary btn-sm float-end">Hide</button>
            <% } %>
        </div>

    </div>
    <div class="row gy-2 gx-3 align-items-center" style="--bs-gutter-x: 0.3rem;">

        <div class="col-auto input-group-sm" style="padding-right: 0px;" title="Number of ticks">
            <input type="number" class="colorbar-num-ticks input-sm form-control"
            value="<%= num_ticks %>" style="width:33px" min="2"/>
        </div>
        <div class="col-auto input-group-sm" style="padding-left: 0px;">
            <label class="col-form-label col-form-label-sm">Ticks</label>
        </div>

        <div class="form-group col-sm-auto btn-group">
            <button type="button" class="colorbar-axis-color btn btn-outline-secondary btn-sm dropdown-toggle" title="Tick Color"
                data-bs-toggle="dropdown">
                <span class="dropdown_icon" data-axis-color="<%= axis_color %>" style="background-color:#<%= axis_color %>">&nbsp &nbsp &nbsp</span>
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu colorpicker" role="menu">
                <!-- NB: dropdown_icon is picked on choosing dropdown, replaces icon in button above -->
                <li><a class="dropdown-item" href="#">
                    <span class="dropdown_icon" data-axis-color="000000" style="background-color:#000">&nbsp &nbsp &nbsp</span>&nbsp Black
                </a></li>
                <li><a class="dropdown-item" href="#">
                    <span class="dropdown_icon" data-axis-color="0000FF" style="background-color:#00f">&nbsp &nbsp &nbsp</span>&nbsp Blue
                </a></li>
                <li><a class="dropdown-item" href="#">
                    <span class="dropdown_icon" data-axis-color="00FF00" style="background-color:#0f0">&nbsp &nbsp &nbsp</span>&nbsp Green
                </a></li>
                <li><a class="dropdown-item" href="#">
                    <span class="dropdown_icon" data-axis-color="FF0000" style="background-color:#f00">&nbsp &nbsp &nbsp</span>&nbsp Red
                </a></li>
                <li><a class="dropdown-item" href="#">
                    <span class="dropdown_icon" data-axis-color="FFFF00" style="background-color:#ff0">&nbsp &nbsp &nbsp</span>&nbsp Yellow
                </a></li>
                <li><a class="dropdown-item" href="#">
                    <span class="dropdown_icon" data-axis-color="FFFFFF" style="background-color:#fff">&nbsp &nbsp &nbsp</span>&nbsp White
                </a></li>
                <li><a class="dropdown-item" href="#">
                    <span class="dropdown_icon" data-axis-color="FF00FF" style="background-color:#f0f">&nbsp &nbsp &nbsp</span>&nbsp Magenta
                </a></li>
                <li><a class="dropdown-item" href="#">
                    <span class="dropdown_icon" data-axis-color="00FFFF" style="background-color:#0ff">&nbsp &nbsp &nbsp</span>&nbsp Cyan
                </a></li>
            </ul>
        </div>

        <div class="col-auto btn-group" style="padding: 0;">
            <button type="button" class="colorbar_font_size btn btn-outline-secondary btn-sm dropdown-toggle" title="Font Size"
            data-bs-toggle="dropdown">
                <span class='dropdown_icon'><%= font_size %></span>
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu">
            <% _.each([6,8,10,12,14,18,21,24,36,48],function(p){
                print ("<li><a class='dropdown-item' href='#'><span class='dropdown_icon'>"+p+"</span></a></li>")
            }); %>
            </ul>
        </div>

        <!-- <div class="col-auto input-group-sm">
            <label class="col-form-label col-form-label-sm">Length</label>
        </div> -->
        <div class="col-auto input-group-sm" style="padding-right: 0px;">
          <input type="number" class="colorbar-mark-length input-sm form-control"
            value="<%= mark_len %>" style="width:35px" min="0" title="Tick mark length"/>
        </div>
        <div class="col-auto input-group-sm" style="padding-left: 0px; margin-right: 3px;">
            <label class="col-form-label col-form-label-sm">px</label>
        </div>

        <div class="col-auto input-group-sm" style="padding-right: 0px;">
            <label class="col-form-label col-form-label-sm">Margin</label>
        </div>
        <div class="col-auto input-group-sm" style="padding-right: 0px;" title="Margin between the ticks mark and label">
            <input type="number" class="colorbar-tick-margin input-sm form-control"
            value="<%= tick_margin %>" style="width:35px" />
        </div>
        <div class="col-auto input-group-sm" style="padding-left: 0px;">
            <label class="col-form-label col-form-label-sm">px</label>
        </div>
    </div>
</form>
`;var v_=ft.View.extend({template:$e.template(__),initialize:function(t){this.render=$e.debounce(this.render),this.models=t.models;var e=this;this.models.forEach(function(i){e.listenTo(i,"change:colorbar",e.render)})},events:{"submit .colorbar_form":"update_colorbar","change .btn":"dropdown_btn_changed","click .hide_colorbar":"hide_colorbar","keyup input[type='number']":"handle_keyup"},handle_keyup:function(t){t.which==13&&this.update_colorbar()},dropdown_btn_changed:function(t){C(t.target).closest("form").submit()},hide_colorbar:function(){this.models.forEach(function(t){t.hide_colorbar()})},update_colorbar:function(t){var e=C(".colorbar_form"),i=C(".label-position i:first",e).attr("data-position"),n=parseInt(C(".colorbar-thickness",e).val()),r=C(".colorbar_font_size span:first",e).text().trim(),o=C(".colorbar-axis-color span:first",e).attr("data-axis-color"),a=parseInt(C(".colorbar-num-ticks",e).val()),l=parseInt(C(".colorbar-mark-length",e).val()),h=parseInt(C(".colorbar-gap",e).val()),g=parseInt(C(".colorbar-tick-margin",e).val());return this.models.forEach(function(_){var x=_.get("lutBgPos"),T={show:!0,lutBgPos:x};i!="-"&&(T.position=i),n!="-"&&(T.thickness=n),r!="-"&&(T.font_size=r),o!="-"&&(T.axis_color=o),a!="-"&&(T.num_ticks=a),l!="-"&&(T.mark_len=l),h!="-"&&(T.gap=h),g!="-"&&(T.tick_margin=g),_.save_colorbar(T)}),!1},render:function(){var t={show:!1},e=!1,i;this.models.forEach(function(r){i=r.get("colorbar"),i&&(t.length?(t.position!=i.position&&(t.position="-"),t.thickness!=i.thickness&&(t.thickness="-"),t.font_size!=i.font_size&&(t.font_size="-"),t.axis_color!=i.axis_color&&(t.axis_color="-"),t.num_ticks!=i.num_ticks&&(t.num_ticks="-"),t.mark_len!=i.mark_len&&(t.mark_len="-"),t.gap!=i.gap&&(t.gap="-"),t.tick_margin!=i.tick_margin&&(t.tick_margin="-")):(t.position=i.position,t.thickness=i.thickness,t.font_size=i.font_size,t.axis_color=i.axis_color,t.num_ticks=i.num_ticks,t.mark_len=i.mark_len,t.gap=i.gap,t.tick_margin=i.tick_margin)),(!i||!i.show)&&(e=!0)}),(this.models.length===0||e)&&(t.show=!0),t.position=t.position??"right",t.thickness=t.thickness??15,t.font_size=t.font_size??10,t.axis_color=t.axis_color??"000000",t.num_ticks=t.num_ticks??7,t.mark_len=t.mark_len??3,t.gap=t.gap??5,t.tick_margin=t.tick_margin??2;var n=this.template(t);return this.$el.html(n),this}});const b_=ft.View.extend({className:"ztSliders",initialize:function(t){this.models=t.models,this.models.forEach(e=>{this.listenTo(e,"change:z_projection change:theT change:theZ change:z_start",this.render)}),this.render()},events:{"click .z-increment":"z_increment","click .z-decrement":"z_decrement","click .time-increment":"time_increment","click .time-decrement":"time_decrement","input #vp_t_slider input[type='range']":"slide_time","change #vp_t_slider input[type='range']":"slidestop_time","input #vp_z_slider input[type='range']":"slide_z","change #vp_z_slider input[type='range']":"slidestop_z","mousemove .z_start":"start_slider_mousemove","mousemove .z_end":"end_slider_mousemove"},start_slider_mousemove:function(t){let e=C(t.target),i=t.offsetX/e.width(),n=this.get_midfraction(e);i>n&&C(".z_end",e.parent()).css("pointer-events","all")},end_slider_mousemove:function(t){let e=C(t.target),i=t.offsetX/e.width(),n=this.get_midfraction(e);i<n&&e.css("pointer-events","none")},get_midfraction(t){let e=parseInt(C("#vp_z_slider .z_start").val()),i=parseInt(C("#vp_z_slider .z_end").val()),n=(e+i)/2,r=parseFloat(t.attr("min")),o=parseFloat(t.attr("max"));return(n-r)/(o-r)},slide_time(t){var e=t.target.value;C("#vp_t_value").text(e+"/"+(this.sizeT||"-"));var i=this.models.head().get("deltaT")[e-1];this.models.forEach(function(n){n.get("deltaT")[e-1]!=i&&(i=void 0)}),C("#vp_deltaT").text(this.formatTime(i))},slidestop_time(t){this.models.forEach(function(e){e.save("theT",t.target.value-1)})},slide_z(t){var e=this.models.allTrue("z_projection");let i=C(t.target),n=parseInt(t.target.value),r=parseInt(C("#vp_z_slider .z_start").val()),o=parseInt(C("#vp_z_slider .z_end").val());const a=i.hasClass("z_start");if(e){if(a){if(n>=o){i.val(o-1);return}}else if(n<=r){i.val(r+1);return}r=r+"-"+o}C("#vp_z_value").text(r+"/"+this.sizeZ)},slidestop_z(t){var e=this.models.allTrue("z_projection");let i=C("#vp_z_slider .z_start").val(),n=C("#vp_z_slider .z_end").val();this.models.forEach(function(r){e?r.save({z_start:i-1,z_end:n-1}):r.save("theZ",t.target.value-1)})},formatTime:function(t){if(typeof t>"u")return"";var e=t<0;t=Math.abs(t);function i(a){return a=a+"",a.split(".")[0].length===1?"0"+a:a}var n=parseInt(t/3600),r=parseInt(t%3600/60),o=(t%60).toFixed(2);return(e?"-":"")+i(n)+":"+i(r)+":"+i(o)},z_increment:function(t){return this.models.forEach(function(e){var i={};e.get("z_projection")?(i.z_start=e.get("z_start")+1,i.z_end=e.get("z_end")+1):i.theZ=e.get("theZ")+1,e.set(i,{validate:!0})}),!1},z_decrement:function(t){return this.models.forEach(function(e){var i={};e.get("z_projection")?(i.z_start=e.get("z_start")-1,i.z_end=e.get("z_end")-1):i.theZ=e.get("theZ")-1,e.set(i,{validate:!0})}),!1},time_increment:function(t){return this.models.forEach(function(e){e.set({theT:e.get("theT")+1},{validate:!0})}),!1},time_decrement:function(t){return this.models.forEach(function(e){e.set({theT:e.get("theT")-1},{validate:!0})}),!1},render_z_t_labels:function(){var t=this.models.getIfEqual("sizeZ"),e=this.models.getIfEqual("sizeT"),i=this.models.getAverage("theT"),n=this.models.getAverage("theZ"),r=this.models.allTrue("z_projection"),o=this.models.getDeltaTIfEqual();!t||t===1?C("#vp_z_slider",this.$el).hide():C("#vp_z_slider",this.$el).show();var a=this.models.getMin("sizeT");a===1?C("#vp_t_slider",this.$el).hide():C("#vp_t_slider",this.$el).show();var l=n+1;if(C("#vp_z_slider input[type='range']",this.$el).val(n+1),r){var h=Math.round(this.models.getAverage("z_start")),g=Math.round(this.models.getAverage("z_end"));l=h+1+"-"+(g+1),C("#vp_z_slider .z_end",this.$el).val(g+1),C("#vp_z_slider .z_start",this.$el).val(h+1)}else this.models.allEqual("theZ")||(l="-");C("#vp_z_value",this.$el).text(l+"/"+(t||"-"));var _=i+1,x;this.models.allEqual("theT")||(_="-"),C("#vp_t_slider input[type='range']",this.$el).val(i+1),C("#vp_t_value",this.$el).show().text(_+"/"+(e||"-")),(o===0||o)&&e>1?x=this.formatTime(o):x="",C("#vp_deltaT",this.$el).text(x)},render(){var t=this.models.getAverage("theZ"),e=Math.round(this.models.getAverage("z_start")),i=Math.round(this.models.getAverage("z_end")),n=this.models.getAverage("theT"),r=this.models.getIfEqual("sizeZ"),o=this.models.getIfEqual("sizeT"),a=this.models.getDeltaTIfEqual(),l=this.models.allTrue("z_projection"),D="";this.sizeZ=r,this.sizeT=o;var h=!1,g=r;(!r||r===1)&&(h=!0,g=1);var _=this.models.getMin("sizeT"),x=_===1;(a===0||a)&&o>1&&(D=this.formatTime(a));var T=Math.min(n,_),M=n+1,D;this.models.allEqual("theT")||(M="-");var F=t+1;l?(t=e,F=e+1+"-"+(i+1)):this.models.allEqual("theZ")||(F="-"),this.$el.html(`<div id="vp_z_label">Z</div>
        <div id="vp_z_value">${F}/${r||"-"}</div>
        <div id="vp_t_label">T</div>
        <div id="vp_t_value">${M}/${o||"-"}</div>
        <div id="vp_deltaT">${D}</div>
        
        <div id="vp_z_slider" style="${h?"display:none":""}">
            <input type="range" class="z_start" value="${t+1}" min="1" max="${g}" />
            <input type="range" class="z_end" value="${i+1}" min="1" max="${g}" style="${l?"":"display:none"}" />
            <button
              type="button"
              class="btn btn-link btn-sm z-decrement"
              title="Decrease Z-index">
                <i class="bi-chevron-down" style="font-size: 1rem"></i>
            </button>
            <button
              type="button"
              class="btn btn-link btn-sm z-increment"
              title="Increase Z-index">
                <i class="bi-chevron-up" style="font-size: 1rem"></i>
            </button>
        </div>
        
        <div id="vp_t_slider" style="${x?"display:none":""}">
            <input type="range" value="${T+1}" min="1" max="${_}" />
            <button
              type="button"
              class="btn btn-link btn-sm time-decrement"
              title="Decrease T-index">
                <i class="bi-chevron-left" style="font-size: 1rem"></i>
            </button>
            <button
              type="button"
              class="btn btn-link btn-sm time-increment"
              title="Increase T-index">
                <i class="bi-chevron-right" style="font-size: 1rem"></i>
            </button>
        </div>`)}}),y_=`    <div class="image-display-options rotation-controls">
        <button type="button" class="btn btn-outline-secondary btn-sm show-rotation" title="Rotate image">
            <span class="glyphicon glyphicon-repeat"></span>
            <i class="bi-arrow-clockwise" style="font-size: 1rem"></i>
            <span class="rotation_value"><%= rotation %></span> &deg;
        </button>

        <input type="range" class="rotation-slider" max="360" value="<%= rotation %>"></input>
        <button type="button" class="btn btn-outline-secondary btn-sm panel-rotation" title="Panel rotation">
            <i class="bi-arrow-90deg-right" style="font-size: 14px"></i>
            <span>90</span>&deg;
        </button>

    </div>
    <div class="btn-group image-display-options"
         title="Maximum intensity Z-projection <% if (proj_bytes_exceeded) { print('exceeds MAX_PROJECTION_BYTES: ' + max_projection_bytes ) }
         else { %>(choose range with 2 handles on Z-slider)<% } %>">
        <button type="button" class="btn btn-outline-secondary btn-sm z-projection
                <% if(z_projection) { %>zp-btn-down<% } else if (typeof z_projection == 'boolean') { %><% } else { %>ch-btn-flat<% }%>"
                <% if ((!z_projection && proj_bytes_exceeded) || z_projection_disabled) { %>disabled="disabled"<% } %>
                >

            <img src="<%= projectionIconUrl %>" />
        </button>
    </div>
    <div class="flipping">
        <button type="button" class="btn btn-group btn-outline-secondary btn-sm flipping_vertical" title="Flipping Vertical">
            <i class="bi bi-arrow-down-up" style="font-size: 14px"></i>
        </button>
        <button type="button" class="btn btn-group btn-outline-secondary btn-sm flipping_horizontal" title="Flipping Horizontal">
            <i class="bi bi-arrow-left-right"  style='font-size:14px'></i>
        </button>
    </div>

`,w_=`

<h5>ROIs
    <% if (panelCount > 0) { %>
        <span style="font-weight:normal; padding-left:64px"><%= roiCount %> ROIs selected</span>
    <% } %>
</h5>

<% if (panelCount > 0) { %>

<form class="form-inline" role="form">

    <div class="btn-group">

        <button type="button" class="shape-color btn btn-outline-secondary btn-sm dropdown-toggle" title="ROI Color"
            <% if (roiCount === 0) print('disabled') %>
            data-bs-toggle="dropdown">
            <span class="dropdown_icon" data-color="<%= color %>" style="background-color:#<%= color %>">&nbsp &nbsp &nbsp</span>
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu dropdownSelect colorpicker" role="menu">
            <!-- NB: dropdown_icon is picked on choosing dropdown, replaces icon in button above -->
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="000000" style="background-color:#000">&nbsp &nbsp &nbsp</span>&nbsp Black
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="0000FF" style="background-color:#00f">&nbsp &nbsp &nbsp</span>&nbsp Blue
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="00FF00" style="background-color:#0f0">&nbsp &nbsp &nbsp</span>&nbsp Green
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="FF0000" style="background-color:#f00">&nbsp &nbsp &nbsp</span>&nbsp Red
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="FFFF00" style="background-color:#ff0">&nbsp &nbsp &nbsp</span>&nbsp Yellow
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="FFFFFF" style="background-color:#fff">&nbsp &nbsp &nbsp</span>&nbsp White
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="FF00FF" style="background-color:#f0f">&nbsp &nbsp &nbsp</span>&nbsp Magenta
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="00FFFF" style="background-color:#0ff">&nbsp &nbsp &nbsp</span>&nbsp Cyan
            </a></li>
        </ul>
    </div>

    <div class="btn-group">
        <button type="button" class="line-width btn btn-outline-secondary btn-sm dropdown-toggle" title="Line Width: <%= lineWidth %>"
            <% if (roiCount === 0) print('disabled') %>
            data-bs-toggle="dropdown">
            <span class='dropdown_icon' data-line-width="<%= lineWidth %>"><%= lineWidth %> pt</span>
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu dropdownSelect lineWidth" role="menu">

            <% _.each([0.25, 0.5, 0.75, 1, 2, 3, 4, 5, 7, 10, 15, 20, 30],function(p){ %>
                <li><a class='dropdown-item' href='#'><span class="dropdown_icon" data-line-width='<%= p %>'><%= p %> pt</span></a></li>
            <% }); %>

        </ul>
    </div>

    <div class="btn-group">
        <button type="button" class="btn btn-sm btn-outline-secondary copyROIs" title="Copy All ROIs"
                <% if (roiCount === 0) print('disabled') %> >
            Copy
        </button>
        <button type="button" class="btn btn-sm btn-outline-secondary pasteROIs" title="Paste ROIs"
                <% if (!canPaste) print('disabled') %> >
            Paste
        </button>
        <button type="button" class="btn btn-sm btn-outline-secondary deleteROIs" title="Delete All ROIs"
                <% if (roiCount === 0) print('disabled') %> >
            Delete
        </button>
    </div>

    <div class="float-end"
        <% if (panelCount > 1) { %>
            title="Cannot draw ROIs on multiple panels. Select a single panel"
        <% } else if (panelCount === 0) { %>
            title="Select a panel to draw ROIs"
        <% } %> >
        <button class="edit_rois btn btn-sm btn-success"
            <% if (panelCount !== 1) { %> disabled="disabled"<% } %> >
            Edit
        </button>
    </div>

</form>

<form class="form-inline clearfix" role="form" style="margin-top: 10px;">
    <h5>Inset Panel</h5>

    <div class="btn-group">
        <button type="button" class="label-position btn btn-outline-secondary btn-sm dropdown-toggle"
                title="Position" data-bs-toggle="dropdown">
            <i data-position="right" class="bi-box-arrow-right dropdown_icon"></i>
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
            <!-- NB: dropdown_icon is picked on choosing dropdown, replaces icon in button above -->
            <li><a class="dropdown-item" href="#">
                <i data-position="left" class="bi-box-arrow-left dropdown_icon"></i> Left</a>
            </li>
            <li><a class="dropdown-item" href="#">
                <i data-position="top" class="bi-box-arrow-up dropdown_icon"></i> Top</a>
            </li>
            <li><a class="dropdown-item" href="#">
                <i data-position="right" class="bi-box-arrow-right dropdown_icon"></i> Right</a>
            </li>
            <li><a class="dropdown-item" href="#">
                <i data-position="bottom" class="bi-box-arrow-down dropdown_icon"></i> Bottom</a>
            </li>
        </ul>
    </div>

    <div class="btn-group">
        <button type="button" class="inset-color btn btn-outline-secondary btn-sm dropdown-toggle" title="Label Color"
            data-bs-toggle="dropdown">
            <span data-color="FFFFFF" style="background-color:#FFFFFF" class="dropdown_icon">&nbsp &nbsp &nbsp</span>
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu colorpicker" role="menu">
            <!-- NB: dropdown_icon is picked on choosing dropdown, replaces icon in button above -->
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="000000" style="background-color:#000">&nbsp &nbsp &nbsp</span>&nbsp Black
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="0000FF" style="background-color:#00f">&nbsp &nbsp &nbsp</span>&nbsp Blue
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="00FF00" style="background-color:#0f0">&nbsp &nbsp &nbsp</span>&nbsp Green
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="FF0000" style="background-color:#f00">&nbsp &nbsp &nbsp</span>&nbsp Red
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="FFFF00" style="background-color:#ff0">&nbsp &nbsp &nbsp</span>&nbsp Yellow
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="FFFFFF" style="background-color:#fff">&nbsp &nbsp &nbsp</span>&nbsp White
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="FF00FF" style="background-color:#f0f">&nbsp &nbsp &nbsp</span>&nbsp Magenta
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="00FFFF" style="background-color:#0ff">&nbsp &nbsp &nbsp</span>&nbsp Cyan
            </a></li>
            <li class="dropdown-divider"></li>
            <li><a class="dropdown-item" data-color="colorpicker" data-oldcolor="FFFFFF" href="#">
                <span class="dropdown_icon colorpickerOption">&nbsp &nbsp &nbsp</span>&nbsp More Colors...
            </a></li>
        </ul>
    </div>

    <div class="btn-group">
        <button type="button" class="inset-width btn btn-outline-secondary btn-sm dropdown-toggle" title="Inset line width"
            data-bs-toggle="dropdown">
            <span class='dropdown_icon' data-line-width="<%= lineWidth %>"><%= lineWidth %> pt</span>
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu dropdownSelect lineWidth" role="menu">

            <% _.each([0.25, 0.5, 0.75, 1, 2, 3, 4, 5, 7, 10, 15, 20, 30],function(p){ %>
                <li><a class='dropdown-item' href='#'><span class="dropdown_icon" data-line-width='<%= p %>'><%= p %> pt</span></a></li>
            <% }); %>

        </ul>
    </div>

    <button class="create_inset btn btn-sm btn-success float-end"
        title="Create a new Inset panel for each selected panel">
        Create Inset
    </button>
</form>

<form class="form-inline clearfix" role="form" style="margin-top: 10px;">
    <h5>Border</h5>

    <div class="btn-group">
        <button type="button" class="border-color btn btn-outline-secondary btn-sm dropdown-toggle" title="Border Color"
            data-bs-toggle="dropdown">
            <span  data-color="<%= borderColor %>" style="background-color:#<%= borderColor %>" class="dropdown_icon">&nbsp &nbsp &nbsp</span>
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu colorpicker" role="menu">
            <!-- NB: dropdown_icon is picked on choosing dropdown, replaces icon in button above -->
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="000000" style="background-color:#000">&nbsp &nbsp &nbsp</span>&nbsp Black
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="0000FF" style="background-color:#00f">&nbsp &nbsp &nbsp</span>&nbsp Blue
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="00FF00" style="background-color:#0f0">&nbsp &nbsp &nbsp</span>&nbsp Green
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="FF0000" style="background-color:#f00">&nbsp &nbsp &nbsp</span>&nbsp Red
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="FFFF00" style="background-color:#ff0">&nbsp &nbsp &nbsp</span>&nbsp Yellow
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="FFFFFF" style="background-color:#fff">&nbsp &nbsp &nbsp</span>&nbsp White
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="FF00FF" style="background-color:#f0f">&nbsp &nbsp &nbsp</span>&nbsp Magenta
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="00FFFF" style="background-color:#0ff">&nbsp &nbsp &nbsp</span>&nbsp Cyan
            </a></li>
            <li class="dropdown-divider"></li>
            <li><a class="dropdown-item" data-color="colorpicker" data-oldcolor="FFFFFF" href="#">
                <span class="dropdown_icon colorpickerOption">&nbsp &nbsp &nbsp</span>&nbsp More Colors...
            </a></li>
        </ul>
    </div>

    <div class="btn-group">
        <button type="button" class="border-width btn btn-outline-secondary btn-sm dropdown-toggle" title ="Line Width: <%= borderWidth %>" data-bs-toggle="dropdown">
            <span class='dropdown_icon' data-line-width="<%= borderWidth %>"><%= borderWidth %> pt</span>
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu dropdownSelect lineWidth" role="menu">

            <% _.each([0.25, 0.5, 0.75, 1, 2, 3, 4, 5, 7, 10, 15, 20, 30],function(p){ %>
                <li><a class='dropdown-item' href='#'><span class="dropdown_icon" data-line-width='<%= p %>'><%= p %> pt</span></a></li>
            <% }); %>

        </ul>
    </div>

    <div class="float-end" style="flex: 1 1 auto; padding-right: 0">
        <% if (showState){ %>
            <button type="button" class="show_border btn btn-sm btn-success ">Show</button>
        <% } else { %>
            <button type="button" class="remove_border btn btn-outline-secondary btn-sm">Hide</button>
        <% } %>
    </div>
</form>

<% } %>
`,au=`
    <div class="input-group input-group-sm float-start">
        <input type="text" class="label-text form-control input-sm"
                placeholder="Label" value="<% print(_.escape(l.text)) %>" />
        <% if (!edit){ %>
            <div class="input-group-btn">
                <button type="button" class="btn btn-sm dropdown-toggle dropdown-toggle-split"
                        data-bs-toggle="dropdown" title="Label from data...">
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu dropdown-menu-end">
                    <li role="presentation" class="dropdown-header">Create Label(s) From:</li>
                    <li role="presentation" class="dropdown-divider"></li>
                    <li><a class="dropdown-item" href="#" data-label="[image.name]">Image Name</a></li>
                    <li><a class="dropdown-item" href="#" data-label="[dataset.name]">Dataset Name</a></li>
                    <li title="Create labels from active Channels on the selected panel">
                        <a class="dropdown-item" href="#" data-label="[channels labels]">Channels (separate labels)</a>
                    </li>
                    <li title="Create labels from active Channels on the selected panel">
                        <a class="dropdown-item" href="#" data-label="[channels]">Channels (single label)</a>
                    </li>
                    <li title="Create labels from Tags on this Image in OMERO">
                        <a class="dropdown-item" href="#" data-label="[tags]">Tags</a>
                    </li>
                    <li title="Create labels from Map Annotations on this Image in OMERO">
                        <a class="dropdown-item" href="#" data-label="[key-values]">Key-Value Pairs</a>
                    </li>
                    <li title="Add a label that shows the current T-index">
                        <a class="dropdown-item" href="#" data-label="[time.index]">Time (T-index)</a>
                    </li>
                    <li class="add_time_label" title="Label shows time in milliseconds">
                        <a class="dropdown-item" href="#" data-label="[time.milliseconds]">Time (milliseconds)</a>
                    </li>
                    <li class="add_time_label">
                        <a class="dropdown-item" href="#" data-label="[time.secs]">Time (seconds)</a>
                    </li>
                    <li class="add_time_label">
                        <a class="dropdown-item" href="#" data-label="[time.mins]">Time (mins)</a>
                    </li>
                    <li class="add_time_label" title="Label shows time in mins:secs">
                        <a class="dropdown-item" href="#" data-label="[time.mins:secs]">Time (mins:secs)</a>
                    </li>
                    <li class="add_time_label">
                        <a class="dropdown-item" href="#" data-label="[time.hrs:mins:secs]">Time (hrs:mins:secs)</a>
                    </li>
                    <li class="add_time_label">
                        <a class="dropdown-item" href="#" data-label="[time.hrs:mins]">Time (hrs:mins)</a>
                    </li>
                    <li title="Add a label that shows the viewport X and Y in pixels">
                        <a class="dropdown-item" href="#" data-label="X: [x.pixel] Y: [y.pixel]">X and Y (pixel or unit)</a>
                    </li>
                    <li  title="Add a label that shows the current Z-index">
                        <a class="dropdown-item" href="#" data-label="Z: [z.pixel]">Z (pixel or unit)</a>
                    </li>
                    <li  title="Add a label that shows the current Zoom level">
                        <a class="dropdown-item" href="#" data-label="[zoom]">Zoom level (%)</a>
                    </li>
                </ul>
            </div>
        <% } %>
    </div>

    <div class="btn-group">
        <button type="button" class="font-size btn btn-outline-secondary btn-sm dropdown-toggle" title="Font Size"
            data-bs-toggle="dropdown">
            <span class='dropdown_icon'><%= l.size %></span>
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
        <% _.each([6,8,10,12,14,18,21,24,36,48],function(p){
            print ("<li><a class='dropdown-item' href='#'><span class='dropdown_icon'>"+p+"</span></a></li>")
        }); %>
        </ul>
    </div>

    <div class="btn-group">
        <button type="button" class="label-position btn btn-outline-secondary btn-sm dropdown-toggle"
                title="Position" data-bs-toggle="dropdown">
            <i data-position="<%= position %>" class="<%= position_icon_cls %> dropdown_icon"></i>
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
            <li role="presentation" class="dropdown-header">Inside Corners</li>
            <!-- NB: dropdown_icon is picked on choosing dropdown, replaces icon in button above -->
            <li><a class="dropdown-item" href="#">
                <i data-position="topleft" class="bi-box-arrow-in-up-left dropdown_icon"></i>
                Top Left</a>
            </li>
            <li><a class="dropdown-item" href="#">
                <i data-position="topright" class="bi-box-arrow-in-up-right dropdown_icon"></i>
                Top Right</a>
            </li>
            <li><a class="dropdown-item" href="#">
                <i data-position="bottomleft" class="bi-box-arrow-in-down-left dropdown_icon"></i>
                Bottom Left</a>
            </li>
            <li><a class="dropdown-item" href="#">
                <i data-position="bottomright" class="bi-box-arrow-in-down-right dropdown_icon"></i>
                Bottom Right</a>
            </li>

            <li role="presentation" class="dropdown-divider"></li>
            <li role="presentation" class="dropdown-header">Outside Edges</li>
            <li><a class="dropdown-item" href="#">
                <i data-position="left" class="bi-box-arrow-left dropdown_icon"></i> Left</a>
            </li>
            <li><a class="dropdown-item" href="#">
                    <i data-position="leftvert" class="bi-box-arrow-left dropdown_icon"></i>
                    Left vertical
                </a>
            </li>
            <li><a class="dropdown-item" href="#">
                <i data-position="top" class="bi-box-arrow-up dropdown_icon"></i> Top</a>
            </li>
            <li><a class="dropdown-item" href="#">
                <i data-position="right" class="bi-box-arrow-right dropdown_icon"></i> Right</a>
            </li>
            <li><a class="dropdown-item" href="#">
                <i data-position="rightvert" class="bi-box-arrow-right dropdown_icon"></i> Right Vertical</a>
            </li>
            <li><a class="dropdown-item" href="#">
                <i data-position="bottom" class="bi-box-arrow-down dropdown_icon"></i> Bottom</a>
            </li>
        </ul>
    </div>

    <div class="btn-group">
        <button type="button" class="label-color btn btn-outline-secondary btn-sm dropdown-toggle" title="Label Color"
            data-bs-toggle="dropdown">
            <span data-color="<%= l.color %>" style="background-color:#<%= l.color %>" class="dropdown_icon">&nbsp &nbsp &nbsp</span>
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu colorpicker" role="menu">
            <!-- NB: dropdown_icon is picked on choosing dropdown, replaces icon in button above -->
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="000000" style="background-color:#000">&nbsp &nbsp &nbsp</span>&nbsp Black
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="0000FF" style="background-color:#00f">&nbsp &nbsp &nbsp</span>&nbsp Blue
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="00FF00" style="background-color:#0f0">&nbsp &nbsp &nbsp</span>&nbsp Green
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="FF0000" style="background-color:#f00">&nbsp &nbsp &nbsp</span>&nbsp Red
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="FFFF00" style="background-color:#ff0">&nbsp &nbsp &nbsp</span>&nbsp Yellow
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="FFFFFF" style="background-color:#fff">&nbsp &nbsp &nbsp</span>&nbsp White
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="FF00FF" style="background-color:#f0f">&nbsp &nbsp &nbsp</span>&nbsp Magenta
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="00FFFF" style="background-color:#0ff">&nbsp &nbsp &nbsp</span>&nbsp Cyan
            </a></li>
            <li class="dropdown-divider"></li>
            <li><a class="dropdown-item" data-color="colorpicker" data-oldcolor="<%= l.color %>" href="#">
                <span class="dropdown_icon colorpickerOption">&nbsp &nbsp &nbsp</span>&nbsp More Colors...
            </a></li>
        </ul>
    </div>

    <% if (edit){ %>
        <i id="sort_label_icon" class="bi-arrow-down-up" title="Drag to rearrange labels" ></i>
        <button type="button" title="Delete Label" class="close btn btn-sm btn-light delete-label" aria-hidden="true">&times;</button>
    <% } else { %>

        <button type="submit" class="btn btn-sm btn-success float-end">Add</button>

    <% } %>
`,x_=`
        <div class="labels-container">

            <% _.each(labels, function(l, i) { %>

                <form class="edit-label-form form-inline" role="form" data-key="<%= l.key %>">

                    <%= inner_template({l:l, position:position, position_icon_cls, edit:true}) %>

                </form>

            <% }); %>
        </div>
`,E_=`

        <div class="vp_frame" style="width:<%= frame_w %>px; height:<%= frame_h %>px">
            <%= inner_template({imgs_css:imgs_css, opacity:opacity}) %>
        </div>
`,S_=`
    <% _.each(imgs_css, function(css, i) { %>
    <img id='<%= css.id %>'
        class="vp_img<% if (css.pixelated) {%> pixelated<% } %>"
        style="opacity:<%= opacity %>; left:<%= css.left %>px; top:<%= css.top %>px;
            width:<%= css.width %>px; height:<%= css.height %>px;
            -webkit-transform-origin:<%= css['transform-origin'] %>;
            transform-origin:<%= css['transform-origin'] %>;
            -webkit-transform:<%= css['transform'] %>;
            transform:<%= css['transform'] %>"
        src='<%= css.src %>' />
    <% }); %>
`,T_=`
<h5 style="margin-top:6px">
    View
    <span style="font-weight:normal; float:right; font-size: 15px">
        x: <span style="color: #aaa"><%= x %></span>
        y: <span style="color: #aaa"><%= y %></span>
        width: <span style="color: #aaa"><%= width %></span>
        height: <span style="color: #aaa"><%= height %></span>
    </span>
</h5>

<div class="btn-group">
    <button type="button" class="btn btn-sm btn-outline-secondary copyCropRegion" title="Copy crop region"
        <% if (!canCopyRect) print('disabled') %> >
        Copy
    </button>
    <button type="button" class="btn btn-sm btn-outline-secondary pasteCropRegion" title="Paste crop region"
        <% if (!canPasteRect) print('disabled') %> >
        Paste
    </button>
    <button type="button" class="btn btn-sm btn-outline-secondary reset-zoom-shape" title="Reset crop">
        Reset
    </button>
</div>

<button class="float-end crop-btn btn btn-sm btn-success">
    Crop
</button>
`,k_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAyxJREFUeNqslE9II3cUx7/TZCIienEmM5PfjM6tBzEFXUPQOTSMbggLxVwUPBiECmoLxUor+I8ecgiFLeaw4GpCwGXVUqR4K2jFQ6BQgj3G2PagicZDY+rK+icxvh62pmZZXbbs9/jjvQ/vvd/3PY6I8D71Ad6zrACgadqdAUSEq6urRwBKVqv1J47j7oxNp9OvgPfBCoVCe11d3edEVDo9PT222Wy/3ge13gNyV1dXj7e1tXUPDw/j8vISCwsLj5LJ5Or5+fljm832yxvBRARVVaGqKhhjsNvtrYyx516vl2KxGL2uaDRKPp+PNE37QRTFDsZYOZ+I/gNKkuRkjD3r7Oyk2dlZepvm5+dvwN9LkuSuACqKEvR6vbS0tETvqrW1NfL7/cQYe0JEr2zDcdzR8fHx38lk8p1tcnBwgHw+fw4gV56hpmmw2+1qfX19wuVy0djY2FsrC4VC5PF4SBTFtCAIH920zP07w08kSXpiGIba3t6OxcVFnJycoLW1FeFwuKKiUCiEzc1NFAoF+P1+ZLNZbG1t/XV4ePj1/v5+7MY2H8uyrHo8HnR3d6O3txerq6tYXl6GYRhoampCQ0MDNjY2UFVVBdM0MT4+DgA4OzvD3t6ecHR0ZAKIlX9ZFMUHDofjN9M0KRKJlFtbWVmhnp4e8vl8FAwGy+/xeJz8fj/pup4RBOEhY6yi5Q+tVuu3LS0tpq7rNdvb27BYLAgEAujv769oeXd3FxMTE8hms3A6ncjn85eJRCJ+cXHxTSaTiYOI4HA4fgwEAhVDn5ycpI6ODurq6qJoNEqJRIL6+vrI5XLR4OAgpVKpcuzo6Cg1Njb+XPYhY6xGluWvnE7nnyMjI5TL5crBU1NTZJomGYZBAwMDFaDp6Wlyu905RVFCjDF7xaaoqgpFUWyCIIw1Nzf/MTQ0dKdlZmZmyDCMF6IofifLsnB79bgbH95WqVSqKhaLnzHGvnC73Q1zc3MAgGAwiPX19UIqlXoK4DHP83uvn683Am+Ba4rF4qe6rn9ZW1sr7ezsRK6vr8M8z//+v+6hxWJ5yXFcOJ1OZziOa+Q4LsLz/Iv7cv4ZAMslUhVJh/y8AAAAAElFTkSuQmCC";var C_=ft.View.extend({initialize:function(t){this.listenTo(this.model,"change:selection",this.render),new I_({model:this.model}),new A_({model:this.model})},render:function(){var t=this.model.getSelected();this.vp&&(this.vp.clear().remove(),delete this.vp),this.ztsliders&&(this.ztsliders.remove(),delete this.ztsliders),t.length>0&&(this.vp=new M_({models:t,figureModel:this.model}),C("#viewportContainer").append(this.vp.el),this.ztsliders=new b_({models:t}),C("#viewportContainer").append(this.ztsliders.el)),this.ipv&&this.ipv.remove(),t.length>0&&(this.ipv=new u_({models:t,figureModel:this.model}),this.ipv.render(),C("#info-tab-pane").append(this.ipv.el)),this.ctv&&this.ctv.remove(),t.length>0&&(this.ctv=new R_({models:t}),C("#channelToggle").empty().append(this.ctv.render().el)),this.csv&&this.csv.clear().remove(),t.length>0&&(this.csv=new p_({models:t}),C("#channel_sliders").empty().append(this.csv.render().el))}}),A_=ft.View.extend({model:_n,roisTemplate:$e.template(w_),el:C("#labelsTab"),initialize:function(t){this.listenTo(this.model,"change:selection",this.render),this.listenTo(this.model,"change:selection",this.addListeners),this.render()},addListeners:function(){var t=this;this.model.getSelected().forEach(function(e){t.listenTo(e,"change:shapes",t.render),t.listenTo(e,"change:border",t.render)})},events:{"click .edit_rois":"editRois","click .show_border":"showBorder","click .remove_border":"removeBorder","change .border-color":"changeBorderColor","change .border-width":"changeBorderStrokeWidth","click .copyROIs":"copyROIs","click .pasteROIs":"pasteROIs","click .deleteROIs":"deleteROIs","click .create_inset":"createInset","change .shape-color":"changeROIColor","change .line-width":"changeLineWidth"},createInset:function(){this.model.getSelected().forEach(e=>{let i=Zg(),n=e.getViewportAsRect(),o=Math.min(n.width,n.height)/3;var a=C(".inset-color span:first",this.$el).attr("data-color"),l=C(".label-position i:first",this.$el).attr("data-position"),h=parseFloat(C("button.inset-width span:first",this.$el).attr("data-line-width"));let g={type:"Rectangle",strokeWidth:h,strokeColor:"#"+a,x:n.x+(n.width-o)/2,y:n.y+(n.height-o)/2,width:o,height:o,id:i,rotation:n.rotation||0};e.add_shapes([g]);let _=e.toJSON(),x=Math.min(_.width,_.height);_.width=x,_.height=x,l=="bottom"?_.y=_.y+1.1*e.get("height"):l=="left"?_.x=_.x-1.1*_.width:l=="top"?_.y=_.y-1.1*_.height:_.x=_.x+1.1*e.get("width");let T=_.orig_width,M=_.orig_height,D=Math.round(g.x+g.width/2),F=Math.round(g.y+g.height/2);_.dx=T/2-D,_.dy=M/2-F;var Q=T/g.width,K=M/g.height;_.zoom=Math.min(Q,K)*100,_.selected=!1,_.shapes=[],_.insetRoiId=i,this.model.panels.create(_)})},changeLineWidth:function(){var t=C("button.line-width span:first",this.$el).attr("data-line-width"),e=this.model.getSelected();t=parseFloat(t,10),e.forEach(function(i){i.setROIStrokeWidth(t)})},changeROIColor:function(){var t=C("button.shape-color span:first",this.$el).attr("data-color"),e=this.model.getSelected();e.forEach(function(i){i.setROIColor(t)})},changeBorderColor:function(){var t=C("button.border-color span:first",this.$el).attr("data-color"),e=this.model.getSelected();e.forEach(function(i){i.setBorderColor(t)})},changeBorderStrokeWidth:function(){var t=C("button.border-width span:first",this.$el).attr("data-line-width"),e=this.model.getSelected();t=parseFloat(t,10),e.forEach(function(i){i.setBorderStrokeWidth(t)})},copyROIs:function(t){t.preventDefault();var e=this.model.getSelected(),i=[];e.forEach(function(n){var r=n.get("shapes");r&&r.forEach(function(o){i.push(C.extend(!0,{},o))})}),i.length>0&&this.model.set("clipboard",{SHAPES:i}),this.render()},showBorder:function(t){var e=C("button.border-width span:first",this.$el).attr("data-line-width"),i=C("button.border-color span:first",this.$el).attr("data-color");e=parseFloat(e,10),this.model.getSelected().forEach(n=>{n.show_border(i,e)}),t.preventDefault()},removeBorder:function(t){this.model.getSelected().forEach(e=>{e.remove_border()}),t.preventDefault()},rectToPolygon:function(t,e){let i=t.x+t.width/2,n=t.y+t.height/2,r=Js(t.x,t.y,i,n,e),o=Js(t.x+t.width,t.y,i,n,e),a=Js(t.x+t.width,t.y+t.height,i,n,e),l=Js(t.x,t.y+t.height,i,n,e);return[r,o,a,l].map(h=>h.x+","+h.y).join(", ")},pasteROIs:function(t){t.preventDefault();var e=this.model.getSelected(),i=this.model.get("clipboard"),n=!0;if(i){if(i.SHAPES)i=i.SHAPES;else if(i.CROP){var r=C("button.shape-color span:first",this.$el).attr("data-color"),o=parseFloat(C("button.line-width span:first",this.$el).attr("data-line-width")),a=i.CROP;if(a.rotation&&!isNaN(a.rotation)){var l=this.rectToPolygon(a,-a.rotation);i=[{type:"Polygon",strokeColor:"#"+r,points:l,strokeWidth:o}]}else i=[{type:"Rectangle",x:a.x,y:a.y,width:a.width,height:a.height,strokeColor:"#"+r,strokeWidth:o}]}else return;e.forEach(function(g){var _=g.add_shapes(i);_||(n=!1)});var h=e.length>1?"s":"";n||Pn("Paste Failure","Some shapes may be outside the visible 'viewport' of panel"+h+". Target image"+h+" may be too small or zoomed in too much. Try zooming out before pasting again, or paste to a bigger image.",["OK"]),this.render()}},deleteROIs:function(t){t.preventDefault();var e=this.model.getSelected();e.forEach(function(i){i.unset("shapes")}),this.render()},editRois:function(t){return Hi("roiModal"),!1},render:function(){var t=this.model.getSelected(),e=this.model.getSelected().length,i=0,n=this.model.get("clipboard"),r=n&&("SHAPES"in n||"CROP"in n),o,a,l,h=!1;t.forEach(function(_){var x=_.get("shapes");x&&(i+=x.length,x.forEach(function(T){o===void 0?o=T.strokeColor:o!=T.strokeColor&&(o=!1),a===void 0?a=T.strokeWidth:a!=T.strokeWidth&&(a=!1)})),l=_.get("border"),l!=null&&l.showBorder?_.show_border(l.color.replace("#",""),parseFloat(l.strokeWidth,10)):h=!0});var g={panelCount:e,color:o?o.replace("#",""):"FFFFFF",lineWidth:a||2,roiCount:i,canPaste:r,borderWidth:l?l.strokeWidth:2,borderColor:l?l.color.replace("#",""):"FFFFFF",showState:h};C("#edit_rois_form").html(this.roisTemplate(g))}});const lu={topleft:"bi-box-arrow-in-up-left",topright:"bi-box-arrow-in-up-right",bottomleft:"bi-box-arrow-in-down-left",bottomright:"bi-box-arrow-in-down-right",left:"bi-box-arrow-left",leftvert:"bi-box-arrow-left",top:"bi-box-arrow-up",right:"bi-box-arrow-right",rightvert:"bi-box-arrow-right",bottom:"bi-box-arrow-down"};var I_=ft.View.extend({model:_n,template:$e.template(au),el:C("#labelsTab"),initialize:function(t){this.listenTo(this.model,"change:selection",this.render);var e={l:{text:"",size:12,color:"000000"},position:"top",edit:!1,position_icon_cls:lu.top};C(".new-label-form",this.$el).html(this.template(e)),this.render()},events:{"submit .new-label-form":"handle_new_label","click .dropdown-menu a":"select_dropdown_option","click .markdown-info":"markdownInfo"},markdownInfo:function(t){t.preventDefault(),Hi("markdownInfoModal")},select_dropdown_option:function(t){t.preventDefault();var e=C(t.target),i=e.children(".dropdown_icon");if(e.attr("data-label")){C(".new-label-form .label-text",this.$el).val(e.attr("data-label"));return}i.length===0&&(i=e);var n=i.closest("li"),r=C("button.dropdown-toggle",n.parent().parent());if(i=i.clone(),i.hasClass("colorpickerOption")){var o=e.attr("data-oldcolor");Ba.show({color:o,success:function(a){i.css({"background-color":a,"background-image":"none"}),a=a.replace("#",""),i.attr("data-color",a),C("span:first",r).replaceWith(i),r.trigger("change")}})}else C(".dropdown_icon",r).replaceWith(i),r.trigger("change")},handle_new_label:function(t){t.preventDefault();var e=C(t.target),i=C(".label-text",e).val(),n=C(".font-size",e).text().trim(),r=C(".label-position i:first",e).attr("data-position"),o=C(".label-color span:first",e).attr("data-color");if(i.length===0)return alert("Please enter some text for the label"),!1;var a=this.model.getSelected();if(i=="[channels labels]")return a.forEach(function(h){h.create_labels_from_channels({position:r,size:n})}),!1;if(i=="[key-values]")return Hi("labelsFromMapAnns",{position:r,size:n,color:o}),!1;if(i=="[tags]")return a.createLabelsFromTags({position:r,size:n,color:o}),!1;var l={text:i,size:parseInt(n,10),position:r,color:o};return a.forEach(function(h){h.add_labels([l])}),!1},render:function(){var t=this.model.getSelected();if(t.length===0)C(".new-label-form",this.$el).hide();else{C(".new-label-form",this.$el).show();var e=!1,i;t.forEach(function(h){i=h.get("deltaT"),i&&i.length>0&&(e=!0)}),e?C(".add_time_label",this.$el).removeClass("disabled"):C(".add_time_label",this.$el).addClass("disabled")}var n=this.sel_labels_panel;t.length>0&&(this.sel_labels_panel=new O_({models:t}),this.sel_labels_panel.render(),C("#selected_panels_labels").empty().append(this.sel_labels_panel.$el)),n&&n.clear().remove();var r=this.scalebar_form,o=C("#scalebar_form");t.length>0&&(this.scalebar_form=new m_({models:t}),this.scalebar_form.render(),o.empty().append(this.scalebar_form.$el)),r&&r.remove();var a=this.colorbar_form,l=C("#colorbar_form");return t.length>0&&(this.colorbar_form=new v_({models:t}),this.colorbar_form.render(),l.empty().append(this.colorbar_form.$el)),a&&a.remove(),this}}),O_=ft.View.extend({template:$e.template(x_),inner_template:$e.template(au),initialize:function(t){this.render=$e.debounce(this.render),this.models=t.models;var e=this;this.models.forEach(function(i){e.listenTo(i,"change:labels change:theT",e.render)})},events:{"submit .edit-label-form":"handle_label_edit","change .btn":"form_field_changed","blur .label-text":"form_field_changed","click .delete-label":"handle_label_delete"},handle_label_delete:function(t){var e=C(t.target).parent(),i=e.attr("data-key"),n={};return i=$e.escape(i),n[i]=!1,this.models.forEach(function(r){r.edit_labels(n)}),!1},form_field_changed:function(t){C(t.target).closest("form").submit()},handle_label_edit:function(t){var e=C(t.target),i=C(".label-text",e).val(),n=C(".font-size",e).text().trim(),r=C(".label-position i:first",e).attr("data-position"),o=C(".label-color span:first",e).attr("data-color"),a=e.attr("data-key");a=$e.escape(a);var l={text:i,size:n,position:r,color:o},h={};return h[a]=l,this.models.forEach(function(g){g.edit_labels(h)}),!1},initialize_sortable:function(){var t=this,e=t.$el.find(".labels-container");e.length!==0&&(t.sortables&&t.sortables.forEach(function(i){i.destroy()}),t.sortables=[],e.each(function(i,n){var r=new St(n,{animation:150,fallbackOnBody:!0,onMove:function(o){return o.related===null||o.related!==o.from},onEnd:function(o){t.handle_sort(o)},filter:"input",preventOnFilter:!1});t.sortables.push(r)}))},clear:function(){return this.sortables&&this.sortables.forEach(function(t){t.destroy()}),this.sortables=[],this},handle_sort:function(t){var e=t.srcElement,i=e.querySelectorAll(".edit-label-form"),n=Array.from(i).map(o=>o.getAttribute("data-key")),r=n[0].split("_").pop();this.models.forEach(function(o){var a=o.get("labels"),l={},h=[];for(let T=0;T<a.length;T++){var g=a[T];if(g.position==r){var _=[g.text,g.size,g.color,g.position].join("_");l[_]=g}else h.push(g)}var x=[];for(let T=0;T<n.length;T++)n[T]in l&&(x.push(l[n[T]]),delete l[n[T]]);x.push(...h),o.set("labels",x)})},render:function(){var t=this,e={top:{},bottom:{},left:{},leftvert:{},right:{},rightvert:{},topleft:{},topright:{},bottomleft:{},bottomright:{}};this.models.forEach(function(n){$e.each(n.get("labels"),function(r){var o=n.get_label_key(r),a=C.extend(!0,{},r);a.key=o,e[r.position][o]=a})}),this.$el.empty();var i="";return $e.each(e,function(n,r){let o=lu[r];n=$e.map(n,function(l,h){return{...l,position_icon_cls:o}});var a={position:r,labels:n,position_icon_cls:o};n.length!==0&&(a.inner_template=t.inner_template,i+=t.template(a))}),t.$el.append(i),this.initialize_sortable(),this}}),M_=ft.View.extend({template:$e.template(E_),inner_template:$e.template(S_),className:"imageViewer",initialize:function(t){this.render=$e.debounce(this.render),this.figureModel=t.figureModel,this.full_size=250,this.models=t.models;var e=this;this.models.forEach(function(i){e.listenTo(i,"change:width change:height change:rotation change:z_projection change:z_start change:z_end change:min_export_dpi change:vertical_flip change:horizontal_flip",e.render),e.listenTo(i,"change:channels change:theZ change:theT",e.rerender_image_change)}),C("#vp_zoom_slider").attr({max:1e3}).on("input",i=>{let n=Math.round(parseFloat(i.target.value));this.update_img_css(n,0,0),C("#vp_zoom_value").val(n)}).on("change",i=>{let n=Math.round(parseFloat(i.target.value));this.zoom_avg=n;var r={zoom:n};n===100&&(r.dx=0,r.dy=0),this.models.forEach(function(o){o.save(r)}),this.rerender_image_change()}),this.$vp_zoom_value=C("#vp_zoom_value"),this.zmView=new N_({models:this.models,figureModel:this.figureModel}),C("#reset-zoom-view").append(this.zmView.el),C("#vp_zoom_value").on("keyup",(function(i){this.handle_user_zoom(i)}).bind(this)),this.render()},events:{"mousedown .vp_img":"mousedown","mousemove .vp_img":"mousemove","mouseup .vp_img":"mouseup"},mousedown:function(t){return this.dragging=!0,this.dragstart_x=t.clientX,this.dragstart_y=t.clientY,this.r=this.models.head().get("rotation"),!1},mouseup:function(t){var e=t.clientX-this.dragstart_x,i=t.clientY-this.dragstart_y;if(this.r!==0){var n=this.correct_rotation(e,i);e=n.dx,i=n.dy}return this.update_img_css(this.zoom_avg,e,i,!0),this.rerender_image_change(),this.dragging=!1,!1},mousemove:function(t){if(this.dragging){var e=t.clientX-this.dragstart_x,i=t.clientY-this.dragstart_y;if(this.r!==0){var n=this.correct_rotation(e,i);e=n.dx,i=n.dy}this.update_img_css(this.zoom_avg,e,i)}return!1},handle_user_zoom:function(t){if(t.type==="keyup"&&t.which!==13)return;var e=Math.round(parseFloat(t.target.value));if(isNaN(e))return;const i=document.getElementById("vp_zoom_slider");var n=parseFloat(i.min),r=parseFloat(i.max);e<n&&(e=n),e>r&&(e=r),i.value=e,this.update_img_css(e,0,0),this.zoom_avg=e;var o={zoom:e};e==100&&(o.dx=0,o.dy=0),this.models.forEach(function(a){a.save(o)}),this.rerender_image_change()},correct_rotation:function(t,e){if(t===0&&e===0)return{dx:t,dy:e};var i=Math.sqrt(t*t+e*e),n=Math.atan(e/t);t<0&&(n=Math.PI+n);var r=this.r*(Math.PI/180),o=n-r;return t=Math.cos(o)*i,e=Math.sin(o)*i,{dx:t,dy:e}},clear:function(){return C("#vp_zoom_slider").off(),C("#vp_zoom_value").off(),this.$vp_zoom_value.val(),this.zmView&&(this.zmView.remove(),delete this.zmView),this},update_img_css:function(t,e,i,n){const r=this.models.some(Z=>Z.get("vertical_flip")),o=this.models.some(Z=>Z.get("horizontal_flip"));r&&(i=-i),o&&(e=-e);var a=e/(t/100),l=i/(t/100),h=this.models.reduce(function(Z,ee){return Z||ee.is_big_image()},!1),g=this.models.getAverage("dx"),_=this.models.getAverage("dy");if(this.$vp_img){var x=this.$vp_frame.width()+2,T=this.$vp_frame.height()+2,M=this.models.head().get("orig_width")/x,D=this.models.head().get("orig_height")/T,F=Math.min(M,D);a=a*F,l=l*F,a+=g,l+=_;var Q=a,K=l;h&&(Q=e,K=i),this.$vp_img.css(this.models.head().get_vp_img_css(t,x,T,Q,K)),this.$vp_zoom_value.val(t),n&&(typeof e>"u"&&(e=0),typeof i>"u"&&(i=0),this.models.forEach(function(Z){Z.save({dx:a,dy:l})}))}this.zmView.renderXYWH(t,a,l)},get_imgs_css:function(){var t=[],e=this.models.getAverageWH();if(e<=1)var i=this.full_size,n=this.full_size*e;else var n=this.full_size,i=this.full_size/e;return this.models.forEach(function(r){var o="image_"+Math.random();r.get_img_src().then(h=>{document.getElementById(o).src=h});var a=r.get_vp_img_css(r.get("zoom"),n,i);a.id=o;var l=r.get("min_export_dpi")>100;a.pixelated=!l,t.push(a)}),t},rerender_image_change:function(){var t={};t.imgs_css=this.get_imgs_css(),t.opacity=1/t.imgs_css.length;var e=this.inner_template(t);t.imgs_css.length>1&&this.$vp_img.remove(),this.$vp_frame.append(e),this.$vp_img=C(".vp_img",this.$el)},render:function(){this.zmView.render();var t=this.models.getAverageWH(),e=Math.round(this.models.getAverage("zoom"));if(t<=1)var i=this.full_size,n=this.full_size*t;else var n=this.full_size,i=this.full_size/t;var r=this.get_imgs_css(),o={};o.inner_template=this.inner_template,o.opacity=1/r.length,o.imgs_css=r,o.frame_w=n,o.frame_h=i;var a=this.template(o);this.$el.html(a),this.$vp_frame=C(".vp_frame",this.$el),this.$vp_img=C(".vp_img",this.$el),this.zoom_avg=e>>0,this.$vp_zoom_value.val(this.zoom_avg);var l=this.models.getMax("orig_width"),h=parseInt(l/250)*100;return h=Math.max(this.zoom_avg,h,1e3),C("#vp_zoom_slider").attr({max:h}).val(this.zoom_avg),this}}),N_=ft.View.extend({template:$e.template(T_),initialize:function(t){this.models=t.models,this.figureModel=t.figureModel,this.render()},events:{"click .reset-zoom-shape":"resetZoomShape","click .crop-btn":"show_crop_dialog","click .copyCropRegion":"copyCropRegion","click .pasteCropRegion":"pasteCropRegion"},copyCropRegion:function(t){t.preventDefault();var e=this.getXYWH();if([e.x,e.y,e.width,e.height].indexOf("-")>-1){alert("Failed to copy region");return}this.figureModel.set("clipboard",{CROP:e})},pasteCropRegion:function(t){t.preventDefault();var e=this.figureModel.get("clipboard"),i;if(e){if("CROP"in e)i=e.CROP;else if("SHAPES"in e){var n=e.SHAPES;if(n.forEach(function(r){!i&&r.type==="Rectangle"&&(i={x:r.x,y:r.y,width:r.width,height:r.height,rotation:r.rotation})}),!i){alert("No Rectangle found in shapes copied to clipboard");return}}this.models.forEach(function(r){r.cropToRoi(i)})}},show_crop_dialog:function(t){t.preventDefault(),Hi("cropModal")},resetZoomShape:function(t){t.preventDefault(),this.models.forEach(function(e){e.set("vertical_flip",!1),e.set("horizontal_flip",!1),e.cropToRoi({x:0,y:0,width:e.get("orig_width"),height:e.get("orig_height")})})},getXYWH:function(t,e,i){var n,r,o,a,l;this.models.forEach(function(g,_){var x=g.getViewportAsRect(t,e,i);_===0?(n=x.x,r=x.y,o=x.width,a=x.height,l=x.rotation):(n!==x.x&&(n="-"),r!==x.y&&(r="-"),o!==x.width&&(o="-"),a!==x.height&&(a="-"),l!==x.rotation&&(l="-"))});var h={x:n!=="-"?parseFloat(n,10):n,y:r!=="-"?parseFloat(r,10):r,width:o!=="-"?parseFloat(o,10):o,height:a!=="-"?parseFloat(a,10):a,rotation:l!=="-"?parseFloat(l,10):"-"};return h},renderXYWH:function(t,e,i){var n=this.getXYWH(t,e,i),r=this.figureModel.get("clipboard");n.canCopyRect=!0,n.canPasteRect=r&&("CROP"in r||"SHAPES"in r),[n.x,n.y,n.width,n.height].indexOf("-")>-1?n.canCopyRect=!1:(n.x=Math.round(n.x),n.y=Math.round(n.y),n.width=Math.round(n.width),n.height=Math.round(n.height),n.rotation=Math.round(n.rotation)),this.$el.html(this.template(n))},render:function(){this.renderXYWH()}}),R_=ft.View.extend({tagName:"div",template:$e.template(y_),initialize:function(t){this.models=t.models;var e=this;this.models.forEach(function(i){e.listenTo(i,"change:channels change:z_projection",e.render),e.listenTo(i,"change:vertical_flip change:horizontal_flip",e.loadButtonState)})},events:{"click .show-rotation":"show_rotation","click .z-projection":"z_projection","click .flipping_vertical":"flipping_vertical","click .flipping_horizontal":"flipping_horizontal","input .rotation-slider":"rotation_input","change .rotation-slider":"rotation_change","click .panel-rotation":"rotate_panel"},rotation_input:function(t){let e=parseInt(t.target.value);this.models.forEach(function(i){const n=i.get("vertical_flip")?-1:1,r=i.get("horizontal_flip")?-1:1;C(".vp_img").css({transform:"scaleX("+r+") scaleY("+n+") rotate("+e+"deg)"})}),C(".rotation_value").text(e)},rotation_change:function(t){let e=parseInt(t.target.value);this.rotation=e,this.models.forEach(function(i){i.save("rotation",e)})},flipping_vertical:function(t){const e=C(t.currentTarget);e.toggleClass("active");const i=e.hasClass("active");this.models.forEach(function(n){n.save("vertical_flip",i)})},flipping_horizontal:function(t){const e=C(t.currentTarget);e.toggleClass("active");const i=e.hasClass("active");this.models.forEach(function(n){n.save("horizontal_flip",i)})},loadButtonState:function(){const t=this.$(".flipping_vertical"),e=this.$(".flipping_horizontal");this.models.forEach(function(i){i.get("vertical_flip")?t.addClass("active"):t.removeClass("active"),i.get("horizontal_flip")?e.addClass("active"):e.removeClass("active")})},rotate_panel:function(t){t.preventDefault(),this.models.forEach(function(e){var i=e.setPanelRotation();console.log(i),C(".vp_img").css({transform:"rotate("+i+"deg)"}),C(".rotation_value").text(i),C(".rotation-slider").val(i)})},z_projection:function(t){var e=C(t.currentTarget).hasClass("ch-btn-flat");this.models.forEach(function(i){var n;e?n=!0:n=!i.get("z_projection"),i.set_z_projection(n)})},show_rotation:function(t){this.$el.find(".rotation-controls").toggleClass("rotation-controls-shown")},render:function(){var t,e=0,i=0,n=0,r,o,a=[],l;if(this.models){this.models.forEach(function(T,M){a.push(T.isMaxProjectionBytesExceeded()),r=T.get("rotation"),e=Math.max(e,r),i+=r,n+=T.get("sizeZ"),M===0?o=!!T.get("z_projection"):(l=!!T.get("z_projection"),l!==o&&(o=void 0))});let _=a.some(T=>T);var h=i/this.models.length;h===e?r=h:r="-",this.rotation=h;var g=this.models.any(function(T){return T.is_big_image()});const x=n===this.models.length||g;t=this.template({max_projection_bytes:MAX_PROJECTION_BYTES,proj_bytes_exceeded:_,projectionIconUrl:k_,z_projection_disabled:x,rotation:r,z_projection:o}),this.$el.html(t)}return this.loadButtonState(),this}});const z_=ft.Model.extend({defaults:function(){return{undo_pointer:-1}},initialize:function(t){this.figureModel=t.figureModel,this.figureModel.on("change:figureName change:paper_width change:paper_height change:page_count change:legend",this.handleChange,this),this.listenTo(this.figureModel,"reset_undo_redo",this.resetQueue),this.undoQueue=[],this.undoInProgress=!1,this.undo_functions=[],this.redo_functions=[]},resetQueue:function(){this.undoQueue=[],this.set("undo_pointer",-1),this.canUndo()},canUndo:function(){return this.get("undo_pointer")>=0},undo:function(){var t=this.get("undo_pointer");t<0||(this.undoQueue[t].undo(),this.set("undo_pointer",t-1))},canRedo:function(){return this.get("undo_pointer")+1<this.undoQueue.length},redo:function(){var t=this.get("undo_pointer");t+1>=this.undoQueue.length||(this.undoQueue[t+1].redo(),this.set("undo_pointer",t+1))},postEdit:function(t){var e=this.get("undo_pointer");this.undoQueue.length>e+1&&(this.undoQueue=this.undoQueue.slice(0,e+1)),this.undoQueue.push(t),this.set("undo_pointer",e+1)},listenToCollection:function(t){var e=this;t.each(function(i){e.listenToModel(i)}),t.on("add",function(i){e.listenToModel(i),e.undoInProgress||e.handleAdd(i,t)}),t.on("remove",function(i){e.undoInProgress||e.handleRemove(i,t)})},handleRemove:function(t,e){var i=this;i.postEdit({name:"Undo Remove",undo:function(){i.undoInProgress=!0,e.add(t),i.figureModel.notifySelectionChange(),i.undoInProgress=!1},redo:function(){i.undoInProgress=!0,t.destroy(),i.figureModel.notifySelectionChange(),i.undoInProgress=!1}})},handleAdd:function(t,e){var i=this;i.postEdit({name:"Undo Add",undo:function(){i.undoInProgress=!0,t.destroy(),i.figureModel.notifySelectionChange(),i.undoInProgress=!1},redo:function(){i.undoInProgress=!0,e.add(t),i.figureModel.notifySelectionChange(),i.undoInProgress=!1}})},listenToModel:function(t){t.on("change",this.handleChange,this)},handleChange:function(t){var e=this;if(!e.undoInProgress){var i=["selected","id"],n={},r={},o;for(o in t.changed)i.indexOf(o)<0&&(n[o]=t.previous(o),r[o]=t.get(o));if($e.size(r)!==0){e.undo_functions.push(function(){t.save(n)}),e.redo_functions.push(function(){t.save(r)});var a=function(h){h.forEach(function(g,_){_===0?e.figureModel.setSelected(g,!0):e.figureModel.addSelected(g)})},l=function(h){for(var g=[],_=h.length-1;_>=0;_--)g.push(h[_]);var x=e.figureModel.getSelected();return function(){e.undoInProgress=!0;for(var T=0;T<g.length;T++)g[T]();a(x),e.undoInProgress=!1}};typeof e.createEditTimeout<"u"&&clearTimeout(e.createEditTimeout),e.createEditTimeout=setTimeout(function(){e.postEdit({name:"Undo...",undo:l(e.undo_functions),redo:l(e.redo_functions)}),e.undo_functions=[],e.redo_functions=[]},10)}}}}),F_=ft.View.extend({el:C("#edit_actions"),events:{"click .undo":"undo","click .redo":"redo"},keyboardEvents:{"mod+z":"undo","mod+y":"redo"},initialize:function(){this.model.on("change",this.render,this),this.undoEl=C(".undo",this.$el),this.redoEl=C(".redo",this.$el),this.render()},render:function(){return this.model.canUndo()?this.undoEl.removeClass("disabled"):this.undoEl.addClass("disabled"),this.model.canRedo()?this.redoEl.removeClass("disabled"):this.redoEl.addClass("disabled"),this},modal_visible:function(){return C("div.modal.show").length>0},undo:function(t){t.preventDefault(),!this.modal_visible()&&this.model.undo()},redo:function(t){t.preventDefault(),!this.modal_visible()&&this.model.redo()}});function D_(t){var e=null;if(document.cookie&&document.cookie!="")for(var i=document.cookie.split(";"),n=0;n<i.length;n++){var r=i[n].trim();if(r.substring(0,t.length+1)==t+"="){e=decodeURIComponent(r.substring(t.length+1));break}}return e}var L_=D_("csrftoken");function P_(t){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(t)}function $_(t){var e=document.location.host,i=document.location.protocol,n="//"+e,r=i+n;return t==r||t.slice(0,r.length+1)==r+"/"||t==n||t.slice(0,n.length+1)==n+"/"||!/^(\/\/|http:|https:).*/.test(t)}function B_(){C.ajaxSetup({cache:!1,beforeSend:function(t,e){!P_(e.type)&&$_(e.url)&&t.setRequestHeader("X-CSRFToken",L_)}})}const Ki=new _n;window.figureModel=Ki;const cu="7.1.1.dev0";console.log("RELEASE_VERSION",cu);document.getElementById("release_version").innerHTML=cu;ft.ajaxSync=ft.sync;ft.getSyncMethod=function(t){return t.syncOverride||t.collection&&t.collection.syncOverride?function(e,i,n,r){Ki.set("unsaved",!0)}:ft.ajaxSync};ft.sync=function(t,e,i,n){return ft.getSyncMethod(e).apply(this,[t,e,i,n])};new L4({model:Ki});new C_({model:Ki});PING_URL&&setInterval(function(){fetch(PING_URL)},6e4);var hu=new z_({figureModel:Ki});new F_({model:hu});hu.listenToCollection(Ki.panels);let uu={"":"index","new(/)":"newFigure","recover(/)":"recoverFigure","open(/)":"openFigure","file/:id(/)":"loadFigure"};APP_SERVED_BY_OMERO||(uu={"omero-figure(/)":"index","omero-figure/new(/)":"newFigure","omero-figure/recover(/)":"recoverFigure","omero-figure/open(/)":"openFigure","omero-figure/file/:id(/)":"loadFigure"});var W_=ft.Router.extend({routes:uu,index:function(){if(console.log("index"),window.location.search.length>1){const e=new URLSearchParams(window.location.search.substring(1));if(e.has("file")){const i=e.get("file");var t=function(){Ki.load_from_url(i)};Ki.checkSaveAndClear(t);return}}os();var t=()=>{Hi("welcomeModal")};Ki.checkSaveAndClear(t)},openFigure:function(){console.log("openFigure..."),os();var t=function(){Hi("openFigureModal")};Ki.checkSaveAndClear(t)},recoverFigure:function(){os(),Ki.recoverFromLocalStorage()},newFigure:function(){console.log("newFigure"),os();var t=function(){Hi("addImagesModal")};if(window.location.search.length>1){var e=window.location.search.substring(1).split("&"),i=e.reduce(function(n,r){return r.split("=")[0]==="image"&&n.push(r.split("=")[1]),n},[]);i.length>0&&(t=function(){Ki.addImages(i)})}Ki.checkSaveAndClear(t)},loadFigure:function(t){console.log("LoadFigure",t),os();var e=parseInt(t,10),i=function(){Ki.load_from_OMERO(e)};Ki.checkSaveAndClear(i)}});let du={pushState:!0};APP_ROOT_URL&&(du.root=APP_ROOT_URL);B_();const fu=new W_;F4({model:Ki,app:fu});ft.history.start(du);C(document).on("click","a",function(t){var e=C(this).attr("href");if(e.substring(0,BASE_WEBFIGURE_URL.length)===BASE_WEBFIGURE_URL){t.preventDefault();let i=APP_SERVED_BY_OMERO?"/":"/omero-figure/";e=e.replace(BASE_WEBFIGURE_URL,i),fu.navigate(e,{trigger:!0})}});
//# sourceMappingURL=index-D-uixjtK.js.map
