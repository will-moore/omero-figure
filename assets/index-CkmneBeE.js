const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./blosc-E49GQuAK.js","./chunk-INHXZS53-D3tQiqtZ.js","./lz4-BIGKWw27.js","./zstd-IvP746pw.js"])))=>i.map(i=>d[i]);
var n0=Object.defineProperty;var rc=t=>{throw TypeError(t)};var i0=(t,e,n)=>e in t?n0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ht=(t,e,n)=>i0(t,typeof e!="symbol"?e+"":e,n),Nl=(t,e,n)=>e.has(t)||rc("Cannot "+n);var Ot=(t,e,n)=>(Nl(t,e,"read from private field"),n?n.call(t):e.get(t)),Dn=(t,e,n)=>e.has(t)?rc("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),wn=(t,e,n,i)=>(Nl(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),Dl=(t,e,n)=>(Nl(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var di="top",Hi="bottom",Vi="right",pi="left",cl="auto",io=[di,Hi,Vi,pi],bs="start",Xs="end",jh="clippingParents",Z1="viewport",Ns="popper",Yh="reference",b1=io.reduce(function(t,e){return t.concat([e+"-"+bs,e+"-"+Xs])},[]),G1=[].concat(io,[cl]).reduce(function(t,e){return t.concat([e,e+"-"+bs,e+"-"+Xs])},[]),Xh="beforeRead",qh="read",Zh="afterRead",Gh="beforeMain",Kh="main",Jh="afterMain",Qh="beforeWrite",eu="write",tu="afterWrite",nu=[Xh,qh,Zh,Gh,Kh,Jh,Qh,eu,tu];function br(t){return t?(t.nodeName||"").toLowerCase():null}function hr(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function qs(t){var e=hr(t).Element;return t instanceof e||t instanceof Element}function Gi(t){var e=hr(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function K1(t){if(typeof ShadowRoot>"u")return!1;var e=hr(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function r0(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var i=e.styles[n]||{},r=e.attributes[n]||{},s=e.elements[n];!Gi(s)||!br(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(o){var l=r[o];l===!1?s.removeAttribute(o):s.setAttribute(o,l===!0?"":l)}))})}function s0(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],s=e.attributes[i]||{},o=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:n[i]),l=o.reduce(function(h,p){return h[p]="",h},{});!Gi(r)||!br(r)||(Object.assign(r.style,l),Object.keys(s).forEach(function(h){r.removeAttribute(h)}))})}}const J1={name:"applyStyles",enabled:!0,phase:"write",fn:r0,effect:s0,requires:["computeStyles"]};function mr(t){return t.split("-")[0]}var ys=Math.max,qa=Math.min,Zs=Math.round;function Gs(t,e){e===void 0&&(e=!1);var n=t.getBoundingClientRect(),i=1,r=1;if(Gi(t)&&e){var s=t.offsetHeight,o=t.offsetWidth;o>0&&(i=Zs(n.width)/o||1),s>0&&(r=Zs(n.height)/s||1)}return{width:n.width/i,height:n.height/r,top:n.top/r,right:n.right/i,bottom:n.bottom/r,left:n.left/i,x:n.left/i,y:n.top/r}}function Q1(t){var e=Gs(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function iu(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&K1(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Fr(t){return hr(t).getComputedStyle(t)}function o0(t){return["table","td","th"].indexOf(br(t))>=0}function is(t){return((qs(t)?t.ownerDocument:t.document)||window.document).documentElement}function hl(t){return br(t)==="html"?t:t.assignedSlot||t.parentNode||(K1(t)?t.host:null)||is(t)}function sc(t){return!Gi(t)||Fr(t).position==="fixed"?null:t.offsetParent}function a0(t){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,n=navigator.userAgent.indexOf("Trident")!==-1;if(n&&Gi(t)){var i=Fr(t);if(i.position==="fixed")return null}var r=hl(t);for(K1(r)&&(r=r.host);Gi(r)&&["html","body"].indexOf(br(r))<0;){var s=Fr(r);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return r;r=r.parentNode}return null}function Ko(t){for(var e=hr(t),n=sc(t);n&&o0(n)&&Fr(n).position==="static";)n=sc(n);return n&&(br(n)==="html"||br(n)==="body"&&Fr(n).position==="static")?e:n||a0(t)||e}function e2(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Co(t,e,n){return ys(t,qa(e,n))}function l0(t,e,n){var i=Co(t,e,n);return i>n?n:i}function ru(){return{top:0,right:0,bottom:0,left:0}}function su(t){return Object.assign({},ru(),t)}function ou(t,e){return e.reduce(function(n,i){return n[i]=t,n},{})}var c0=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,su(typeof e!="number"?e:ou(e,io))};function h0(t){var e,n=t.state,i=t.name,r=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,l=mr(n.placement),h=e2(l),p=[pi,Vi].indexOf(l)>=0,m=p?"height":"width";if(!(!s||!o)){var y=c0(r.padding,n),E=Q1(s),C=h==="y"?di:pi,N=h==="y"?Hi:Vi,F=n.rects.reference[m]+n.rects.reference[h]-o[h]-n.rects.popper[m],X=o[h]-n.rects.reference[h],G=Ko(s),V=G?h==="y"?G.clientHeight||0:G.clientWidth||0:0,K=F/2-X/2,ae=y[C],de=V-E[m]-y[N],g=V/2-E[m]/2+K,H=Co(ae,g,de),re=h;n.modifiersData[i]=(e={},e[re]=H,e.centerOffset=H-g,e)}}function u0(t){var e=t.state,n=t.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||iu(e.elements.popper,r)&&(e.elements.arrow=r))}const au={name:"arrow",enabled:!0,phase:"main",fn:h0,effect:u0,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ks(t){return t.split("-")[1]}var f0={top:"auto",right:"auto",bottom:"auto",left:"auto"};function d0(t){var e=t.x,n=t.y,i=window,r=i.devicePixelRatio||1;return{x:Zs(e*r)/r||0,y:Zs(n*r)/r||0}}function oc(t){var e,n=t.popper,i=t.popperRect,r=t.placement,s=t.variation,o=t.offsets,l=t.position,h=t.gpuAcceleration,p=t.adaptive,m=t.roundOffsets,y=t.isFixed,E=o.x,C=E===void 0?0:E,N=o.y,F=N===void 0?0:N,X=typeof m=="function"?m({x:C,y:F}):{x:C,y:F};C=X.x,F=X.y;var G=o.hasOwnProperty("x"),V=o.hasOwnProperty("y"),K=pi,ae=di,de=window;if(p){var g=Ko(n),H="clientHeight",re="clientWidth";if(g===hr(n)&&(g=is(n),Fr(g).position!=="static"&&l==="absolute"&&(H="scrollHeight",re="scrollWidth")),g=g,r===di||(r===pi||r===Vi)&&s===Xs){ae=Hi;var _e=y&&g===de&&de.visualViewport?de.visualViewport.height:g[H];F-=_e-i.height,F*=h?1:-1}if(r===pi||(r===di||r===Hi)&&s===Xs){K=Vi;var Te=y&&g===de&&de.visualViewport?de.visualViewport.width:g[re];C-=Te-i.width,C*=h?1:-1}}var ye=Object.assign({position:l},p&&f0),le=m===!0?d0({x:C,y:F}):{x:C,y:F};if(C=le.x,F=le.y,h){var Pe;return Object.assign({},ye,(Pe={},Pe[ae]=V?"0":"",Pe[K]=G?"0":"",Pe.transform=(de.devicePixelRatio||1)<=1?"translate("+C+"px, "+F+"px)":"translate3d("+C+"px, "+F+"px, 0)",Pe))}return Object.assign({},ye,(e={},e[ae]=V?F+"px":"",e[K]=G?C+"px":"",e.transform="",e))}function p0(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=i===void 0?!0:i,s=n.adaptive,o=s===void 0?!0:s,l=n.roundOffsets,h=l===void 0?!0:l,p={placement:mr(e.placement),variation:Ks(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,oc(Object.assign({},p,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:h})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,oc(Object.assign({},p,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:h})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const t2={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:p0,data:{}};var ya={passive:!0};function g0(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,s=r===void 0?!0:r,o=i.resize,l=o===void 0?!0:o,h=hr(e.elements.popper),p=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&p.forEach(function(m){m.addEventListener("scroll",n.update,ya)}),l&&h.addEventListener("resize",n.update,ya),function(){s&&p.forEach(function(m){m.removeEventListener("scroll",n.update,ya)}),l&&h.removeEventListener("resize",n.update,ya)}}const n2={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:g0,data:{}};var m0={left:"right",right:"left",bottom:"top",top:"bottom"};function Na(t){return t.replace(/left|right|bottom|top/g,function(e){return m0[e]})}var _0={start:"end",end:"start"};function ac(t){return t.replace(/start|end/g,function(e){return _0[e]})}function i2(t){var e=hr(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function r2(t){return Gs(is(t)).left+i2(t).scrollLeft}function v0(t){var e=hr(t),n=is(t),i=e.visualViewport,r=n.clientWidth,s=n.clientHeight,o=0,l=0;return i&&(r=i.width,s=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=i.offsetLeft,l=i.offsetTop)),{width:r,height:s,x:o+r2(t),y:l}}function y0(t){var e,n=is(t),i=i2(t),r=(e=t.ownerDocument)==null?void 0:e.body,s=ys(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=ys(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),l=-i.scrollLeft+r2(t),h=-i.scrollTop;return Fr(r||n).direction==="rtl"&&(l+=ys(n.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:l,y:h}}function s2(t){var e=Fr(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function lu(t){return["html","body","#document"].indexOf(br(t))>=0?t.ownerDocument.body:Gi(t)&&s2(t)?t:lu(hl(t))}function ko(t,e){var n;e===void 0&&(e=[]);var i=lu(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),s=hr(i),o=r?[s].concat(s.visualViewport||[],s2(i)?i:[]):i,l=e.concat(o);return r?l:l.concat(ko(hl(o)))}function w1(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function b0(t){var e=Gs(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}function lc(t,e){return e===Z1?w1(v0(t)):qs(e)?b0(e):w1(y0(is(t)))}function w0(t){var e=ko(hl(t)),n=["absolute","fixed"].indexOf(Fr(t).position)>=0,i=n&&Gi(t)?Ko(t):t;return qs(i)?e.filter(function(r){return qs(r)&&iu(r,i)&&br(r)!=="body"}):[]}function x0(t,e,n){var i=e==="clippingParents"?w0(t):[].concat(e),r=[].concat(i,[n]),s=r[0],o=r.reduce(function(l,h){var p=lc(t,h);return l.top=ys(p.top,l.top),l.right=qa(p.right,l.right),l.bottom=qa(p.bottom,l.bottom),l.left=ys(p.left,l.left),l},lc(t,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function cu(t){var e=t.reference,n=t.element,i=t.placement,r=i?mr(i):null,s=i?Ks(i):null,o=e.x+e.width/2-n.width/2,l=e.y+e.height/2-n.height/2,h;switch(r){case di:h={x:o,y:e.y-n.height};break;case Hi:h={x:o,y:e.y+e.height};break;case Vi:h={x:e.x+e.width,y:l};break;case pi:h={x:e.x-n.width,y:l};break;default:h={x:e.x,y:e.y}}var p=r?e2(r):null;if(p!=null){var m=p==="y"?"height":"width";switch(s){case bs:h[p]=h[p]-(e[m]/2-n[m]/2);break;case Xs:h[p]=h[p]+(e[m]/2-n[m]/2);break}}return h}function Js(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=i===void 0?t.placement:i,s=n.boundary,o=s===void 0?jh:s,l=n.rootBoundary,h=l===void 0?Z1:l,p=n.elementContext,m=p===void 0?Ns:p,y=n.altBoundary,E=y===void 0?!1:y,C=n.padding,N=C===void 0?0:C,F=su(typeof N!="number"?N:ou(N,io)),X=m===Ns?Yh:Ns,G=t.rects.popper,V=t.elements[E?X:m],K=x0(qs(V)?V:V.contextElement||is(t.elements.popper),o,h),ae=Gs(t.elements.reference),de=cu({reference:ae,element:G,placement:r}),g=w1(Object.assign({},G,de)),H=m===Ns?g:ae,re={top:K.top-H.top+F.top,bottom:H.bottom-K.bottom+F.bottom,left:K.left-H.left+F.left,right:H.right-K.right+F.right},_e=t.modifiersData.offset;if(m===Ns&&_e){var Te=_e[r];Object.keys(re).forEach(function(ye){var le=[Vi,Hi].indexOf(ye)>=0?1:-1,Pe=[di,Hi].indexOf(ye)>=0?"y":"x";re[ye]+=Te[Pe]*le})}return re}function E0(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=n.boundary,s=n.rootBoundary,o=n.padding,l=n.flipVariations,h=n.allowedAutoPlacements,p=h===void 0?G1:h,m=Ks(i),y=m?l?b1:b1.filter(function(N){return Ks(N)===m}):io,E=y.filter(function(N){return p.indexOf(N)>=0});E.length===0&&(E=y);var C=E.reduce(function(N,F){return N[F]=Js(t,{placement:F,boundary:r,rootBoundary:s,padding:o})[mr(F)],N},{});return Object.keys(C).sort(function(N,F){return C[N]-C[F]})}function S0(t){if(mr(t)===cl)return[];var e=Na(t);return[ac(t),e,ac(e)]}function T0(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,s=r===void 0?!0:r,o=n.altAxis,l=o===void 0?!0:o,h=n.fallbackPlacements,p=n.padding,m=n.boundary,y=n.rootBoundary,E=n.altBoundary,C=n.flipVariations,N=C===void 0?!0:C,F=n.allowedAutoPlacements,X=e.options.placement,G=mr(X),V=G===X,K=h||(V||!N?[Na(X)]:S0(X)),ae=[X].concat(K).reduce(function(P,B){return P.concat(mr(B)===cl?E0(e,{placement:B,boundary:m,rootBoundary:y,padding:p,flipVariations:N,allowedAutoPlacements:F}):B)},[]),de=e.rects.reference,g=e.rects.popper,H=new Map,re=!0,_e=ae[0],Te=0;Te<ae.length;Te++){var ye=ae[Te],le=mr(ye),Pe=Ks(ye)===bs,Le=[di,Hi].indexOf(le)>=0,Ze=Le?"width":"height",je=Js(e,{placement:ye,boundary:m,rootBoundary:y,altBoundary:E,padding:p}),Je=Le?Pe?Vi:pi:Pe?Hi:di;de[Ze]>g[Ze]&&(Je=Na(Je));var Ye=Na(Je),it=[];if(s&&it.push(je[le]<=0),l&&it.push(je[Je]<=0,je[Ye]<=0),it.every(function(P){return P})){_e=ye,re=!1;break}H.set(ye,it)}if(re)for(var ft=N?3:1,z=function(B){var te=ae.find(function(ee){var ge=H.get(ee);if(ge)return ge.slice(0,B).every(function(ce){return ce})});if(te)return _e=te,"break"},M=ft;M>0;M--){var k=z(M);if(k==="break")break}e.placement!==_e&&(e.modifiersData[i]._skip=!0,e.placement=_e,e.reset=!0)}}const hu={name:"flip",enabled:!0,phase:"main",fn:T0,requiresIfExists:["offset"],data:{_skip:!1}};function cc(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function hc(t){return[di,Vi,Hi,pi].some(function(e){return t[e]>=0})}function C0(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,s=e.modifiersData.preventOverflow,o=Js(e,{elementContext:"reference"}),l=Js(e,{altBoundary:!0}),h=cc(o,i),p=cc(l,r,s),m=hc(h),y=hc(p);e.modifiersData[n]={referenceClippingOffsets:h,popperEscapeOffsets:p,isReferenceHidden:m,hasPopperEscaped:y},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":m,"data-popper-escaped":y})}const uu={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:C0};function k0(t,e,n){var i=mr(t),r=[pi,di].indexOf(i)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],l=s[1];return o=o||0,l=(l||0)*r,[pi,Vi].indexOf(i)>=0?{x:l,y:o}:{x:o,y:l}}function A0(t){var e=t.state,n=t.options,i=t.name,r=n.offset,s=r===void 0?[0,0]:r,o=G1.reduce(function(m,y){return m[y]=k0(y,e.rects,s),m},{}),l=o[e.placement],h=l.x,p=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=h,e.modifiersData.popperOffsets.y+=p),e.modifiersData[i]=o}const fu={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:A0};function I0(t){var e=t.state,n=t.name;e.modifiersData[n]=cu({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const o2={name:"popperOffsets",enabled:!0,phase:"read",fn:I0,data:{}};function O0(t){return t==="x"?"y":"x"}function M0(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,s=r===void 0?!0:r,o=n.altAxis,l=o===void 0?!1:o,h=n.boundary,p=n.rootBoundary,m=n.altBoundary,y=n.padding,E=n.tether,C=E===void 0?!0:E,N=n.tetherOffset,F=N===void 0?0:N,X=Js(e,{boundary:h,rootBoundary:p,padding:y,altBoundary:m}),G=mr(e.placement),V=Ks(e.placement),K=!V,ae=e2(G),de=O0(ae),g=e.modifiersData.popperOffsets,H=e.rects.reference,re=e.rects.popper,_e=typeof F=="function"?F(Object.assign({},e.rects,{placement:e.placement})):F,Te=typeof _e=="number"?{mainAxis:_e,altAxis:_e}:Object.assign({mainAxis:0,altAxis:0},_e),ye=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,le={x:0,y:0};if(g){if(s){var Pe,Le=ae==="y"?di:pi,Ze=ae==="y"?Hi:Vi,je=ae==="y"?"height":"width",Je=g[ae],Ye=Je+X[Le],it=Je-X[Ze],ft=C?-re[je]/2:0,z=V===bs?H[je]:re[je],M=V===bs?-re[je]:-H[je],k=e.elements.arrow,P=C&&k?Q1(k):{width:0,height:0},B=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:ru(),te=B[Le],ee=B[Ze],ge=Co(0,H[je],P[je]),ce=K?H[je]/2-ft-ge-te-Te.mainAxis:z-ge-te-Te.mainAxis,Se=K?-H[je]/2+ft+ge+ee+Te.mainAxis:M+ge+ee+Te.mainAxis,Ve=e.elements.arrow&&Ko(e.elements.arrow),Ge=Ve?ae==="y"?Ve.clientTop||0:Ve.clientLeft||0:0,rt=(Pe=ye==null?void 0:ye[ae])!=null?Pe:0,S=Je+ce-rt-Ge,R=Je+Se-rt,$=Co(C?qa(Ye,S):Ye,Je,C?ys(it,R):it);g[ae]=$,le[ae]=$-Je}if(l){var Q,ue=ae==="x"?di:pi,fe=ae==="x"?Hi:Vi,Me=g[de],tt=de==="y"?"height":"width",Ke=Me+X[ue],at=Me-X[fe],mt=[di,pi].indexOf(G)!==-1,lt=(Q=ye==null?void 0:ye[de])!=null?Q:0,It=mt?Ke:Me-H[tt]-re[tt]-lt+Te.altAxis,sn=mt?Me+H[tt]+re[tt]-lt-Te.altAxis:at,ln=C&&mt?l0(It,Me,sn):Co(C?It:Ke,Me,C?sn:at);g[de]=ln,le[de]=ln-Me}e.modifiersData[i]=le}}const du={name:"preventOverflow",enabled:!0,phase:"main",fn:M0,requiresIfExists:["offset"]};function z0(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function R0(t){return t===hr(t)||!Gi(t)?i2(t):z0(t)}function F0(t){var e=t.getBoundingClientRect(),n=Zs(e.width)/t.offsetWidth||1,i=Zs(e.height)/t.offsetHeight||1;return n!==1||i!==1}function N0(t,e,n){n===void 0&&(n=!1);var i=Gi(e),r=Gi(e)&&F0(e),s=is(e),o=Gs(t,r),l={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(i||!i&&!n)&&((br(e)!=="body"||s2(s))&&(l=R0(e)),Gi(e)?(h=Gs(e,!0),h.x+=e.clientLeft,h.y+=e.clientTop):s&&(h.x=r2(s))),{x:o.left+l.scrollLeft-h.x,y:o.top+l.scrollTop-h.y,width:o.width,height:o.height}}function D0(t){var e=new Map,n=new Set,i=[];t.forEach(function(s){e.set(s.name,s)});function r(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(l){if(!n.has(l)){var h=e.get(l);h&&r(h)}}),i.push(s)}return t.forEach(function(s){n.has(s.name)||r(s)}),i}function L0(t){var e=D0(t);return nu.reduce(function(n,i){return n.concat(e.filter(function(r){return r.phase===i}))},[])}function P0(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function $0(t){var e=t.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(e).map(function(n){return e[n]})}var uc={placement:"bottom",modifiers:[],strategy:"absolute"};function fc(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function ul(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,i=n===void 0?[]:n,r=e.defaultOptions,s=r===void 0?uc:r;return function(l,h,p){p===void 0&&(p=s);var m={placement:"bottom",orderedModifiers:[],options:Object.assign({},uc,s),modifiersData:{},elements:{reference:l,popper:h},attributes:{},styles:{}},y=[],E=!1,C={state:m,setOptions:function(G){var V=typeof G=="function"?G(m.options):G;F(),m.options=Object.assign({},s,m.options,V),m.scrollParents={reference:qs(l)?ko(l):l.contextElement?ko(l.contextElement):[],popper:ko(h)};var K=L0($0([].concat(i,m.options.modifiers)));return m.orderedModifiers=K.filter(function(ae){return ae.enabled}),N(),C.update()},forceUpdate:function(){if(!E){var G=m.elements,V=G.reference,K=G.popper;if(fc(V,K)){m.rects={reference:N0(V,Ko(K),m.options.strategy==="fixed"),popper:Q1(K)},m.reset=!1,m.placement=m.options.placement,m.orderedModifiers.forEach(function(Te){return m.modifiersData[Te.name]=Object.assign({},Te.data)});for(var ae=0;ae<m.orderedModifiers.length;ae++){if(m.reset===!0){m.reset=!1,ae=-1;continue}var de=m.orderedModifiers[ae],g=de.fn,H=de.options,re=H===void 0?{}:H,_e=de.name;typeof g=="function"&&(m=g({state:m,options:re,name:_e,instance:C})||m)}}}},update:P0(function(){return new Promise(function(X){C.forceUpdate(),X(m)})}),destroy:function(){F(),E=!0}};if(!fc(l,h))return C;C.setOptions(p).then(function(X){!E&&p.onFirstUpdate&&p.onFirstUpdate(X)});function N(){m.orderedModifiers.forEach(function(X){var G=X.name,V=X.options,K=V===void 0?{}:V,ae=X.effect;if(typeof ae=="function"){var de=ae({state:m,name:G,instance:C,options:K}),g=function(){};y.push(de||g)}})}function F(){y.forEach(function(X){return X()}),y=[]}return C}}var B0=ul(),W0=[n2,o2,t2,J1],H0=ul({defaultModifiers:W0}),V0=[n2,o2,t2,J1,fu,hu,du,au,uu],a2=ul({defaultModifiers:V0});const pu=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Jh,afterRead:Zh,afterWrite:tu,applyStyles:J1,arrow:au,auto:cl,basePlacements:io,beforeMain:Gh,beforeRead:Xh,beforeWrite:Qh,bottom:Hi,clippingParents:jh,computeStyles:t2,createPopper:a2,createPopperBase:B0,createPopperLite:H0,detectOverflow:Js,end:Xs,eventListeners:n2,flip:hu,hide:uu,left:pi,main:Kh,modifierPhases:nu,offset:fu,placements:G1,popper:Ns,popperGenerator:ul,popperOffsets:o2,preventOverflow:du,read:qh,reference:Yh,right:Vi,start:bs,top:di,variationPlacements:b1,viewport:Z1,write:eu},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.2.0 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const U0=1e6,j0=1e3,x1="transitionend",Y0=t=>t==null?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),X0=t=>{do t+=Math.floor(Math.random()*U0);while(document.getElementById(t));return t},gu=t=>{let e=t.getAttribute("data-bs-target");if(!e||e==="#"){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&n!=="#"?n.trim():null}return e},mu=t=>{const e=gu(t);return e&&document.querySelector(e)?e:null},Ir=t=>{const e=gu(t);return e?document.querySelector(e):null},q0=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const i=Number.parseFloat(e),r=Number.parseFloat(n);return!i&&!r?0:(e=e.split(",")[0],n=n.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(n))*j0)},_u=t=>{t.dispatchEvent(new Event(x1))},Or=t=>!t||typeof t!="object"?!1:(typeof t.jquery<"u"&&(t=t[0]),typeof t.nodeType<"u"),Qr=t=>Or(t)?t.jquery?t[0]:t:typeof t=="string"&&t.length>0?document.querySelector(t):null,ro=t=>{if(!Or(t)||t.getClientRects().length===0)return!1;const e=getComputedStyle(t).getPropertyValue("visibility")==="visible",n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const i=t.closest("summary");if(i&&i.parentNode!==n||i===null)return!1}return e},es=t=>!t||t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("disabled")?!0:typeof t.disabled<"u"?t.disabled:t.hasAttribute("disabled")&&t.getAttribute("disabled")!=="false",vu=t=>{if(!document.documentElement.attachShadow)return null;if(typeof t.getRootNode=="function"){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?vu(t.parentNode):null},Za=()=>{},Jo=t=>{t.offsetHeight},yu=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Ll=[],Z0=t=>{document.readyState==="loading"?(Ll.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of Ll)e()}),Ll.push(t)):t()},Ki=()=>document.documentElement.dir==="rtl",Qi=t=>{Z0(()=>{const e=yu();if(e){const n=t.NAME,i=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=i,t.jQueryInterface)}})},Ar=t=>{typeof t=="function"&&t()},bu=(t,e,n=!0)=>{if(!n){Ar(t);return}const r=q0(e)+5;let s=!1;const o=({target:l})=>{l===e&&(s=!0,e.removeEventListener(x1,o),Ar(t))};e.addEventListener(x1,o),setTimeout(()=>{s||_u(e)},r)},l2=(t,e,n,i)=>{const r=t.length;let s=t.indexOf(e);return s===-1?!n&&i?t[r-1]:t[0]:(s+=n?1:-1,i&&(s=(s+r)%r),t[Math.max(0,Math.min(s,r-1))])},G0=/[^.]*(?=\..*)\.|.*/,K0=/\..*/,J0=/::\d+$/,Pl={};let dc=1;const wu={mouseenter:"mouseover",mouseleave:"mouseout"},Q0=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function xu(t,e){return e&&`${e}::${dc++}`||t.uidEvent||dc++}function Eu(t){const e=xu(t);return t.uidEvent=e,Pl[e]=Pl[e]||{},Pl[e]}function ep(t,e){return function n(i){return c2(i,{delegateTarget:t}),n.oneOff&&He.off(t,i.type,e),e.apply(t,[i])}}function tp(t,e,n){return function i(r){const s=t.querySelectorAll(e);for(let{target:o}=r;o&&o!==this;o=o.parentNode)for(const l of s)if(l===o)return c2(r,{delegateTarget:o}),i.oneOff&&He.off(t,r.type,e,n),n.apply(o,[r])}}function Su(t,e,n=null){return Object.values(t).find(i=>i.callable===e&&i.delegationSelector===n)}function Tu(t,e,n){const i=typeof e=="string",r=i?n:e||n;let s=Cu(t);return Q0.has(s)||(s=t),[i,r,s]}function pc(t,e,n,i,r){if(typeof e!="string"||!t)return;let[s,o,l]=Tu(e,n,i);e in wu&&(o=(N=>function(F){if(!F.relatedTarget||F.relatedTarget!==F.delegateTarget&&!F.delegateTarget.contains(F.relatedTarget))return N.call(this,F)})(o));const h=Eu(t),p=h[l]||(h[l]={}),m=Su(p,o,s?n:null);if(m){m.oneOff=m.oneOff&&r;return}const y=xu(o,e.replace(G0,"")),E=s?tp(t,n,o):ep(t,o);E.delegationSelector=s?n:null,E.callable=o,E.oneOff=r,E.uidEvent=y,p[y]=E,t.addEventListener(l,E,s)}function E1(t,e,n,i,r){const s=Su(e[n],i,r);s&&(t.removeEventListener(n,s,!!r),delete e[n][s.uidEvent])}function np(t,e,n,i){const r=e[n]||{};for(const s of Object.keys(r))if(s.includes(i)){const o=r[s];E1(t,e,n,o.callable,o.delegationSelector)}}function Cu(t){return t=t.replace(K0,""),wu[t]||t}const He={on(t,e,n,i){pc(t,e,n,i,!1)},one(t,e,n,i){pc(t,e,n,i,!0)},off(t,e,n,i){if(typeof e!="string"||!t)return;const[r,s,o]=Tu(e,n,i),l=o!==e,h=Eu(t),p=h[o]||{},m=e.startsWith(".");if(typeof s<"u"){if(!Object.keys(p).length)return;E1(t,h,o,s,r?n:null);return}if(m)for(const y of Object.keys(h))np(t,h,y,e.slice(1));for(const y of Object.keys(p)){const E=y.replace(J0,"");if(!l||e.includes(E)){const C=p[y];E1(t,h,o,C.callable,C.delegationSelector)}}},trigger(t,e,n){if(typeof e!="string"||!t)return null;const i=yu(),r=Cu(e),s=e!==r;let o=null,l=!0,h=!0,p=!1;s&&i&&(o=i.Event(e,n),i(t).trigger(o),l=!o.isPropagationStopped(),h=!o.isImmediatePropagationStopped(),p=o.isDefaultPrevented());let m=new Event(e,{bubbles:l,cancelable:!0});return m=c2(m,n),p&&m.preventDefault(),h&&t.dispatchEvent(m),m.defaultPrevented&&o&&o.preventDefault(),m}};function c2(t,e){for(const[n,i]of Object.entries(e||{}))try{t[n]=i}catch{Object.defineProperty(t,n,{configurable:!0,get(){return i}})}return t}const jr=new Map,$l={set(t,e,n){jr.has(t)||jr.set(t,new Map);const i=jr.get(t);if(!i.has(e)&&i.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`);return}i.set(e,n)},get(t,e){return jr.has(t)&&jr.get(t).get(e)||null},remove(t,e){if(!jr.has(t))return;const n=jr.get(t);n.delete(e),n.size===0&&jr.delete(t)}};function gc(t){if(t==="true")return!0;if(t==="false")return!1;if(t===Number(t).toString())return Number(t);if(t===""||t==="null")return null;if(typeof t!="string")return t;try{return JSON.parse(decodeURIComponent(t))}catch{return t}}function Bl(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const Mr={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${Bl(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${Bl(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter(i=>i.startsWith("bs")&&!i.startsWith("bsConfig"));for(const i of n){let r=i.replace(/^bs/,"");r=r.charAt(0).toLowerCase()+r.slice(1,r.length),e[r]=gc(t.dataset[i])}return e},getDataAttribute(t,e){return gc(t.getAttribute(`data-bs-${Bl(e)}`))}};class Qo{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,n){const i=Or(n)?Mr.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof i=="object"?i:{},...Or(n)?Mr.getDataAttributes(n):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,n=this.constructor.DefaultType){for(const i of Object.keys(n)){const r=n[i],s=e[i],o=Or(s)?"element":Y0(s);if(!new RegExp(r).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${o}" but expected type "${r}".`)}}}const ip="5.2.0";class ur extends Qo{constructor(e,n){super(),e=Qr(e),e&&(this._element=e,this._config=this._getConfig(n),$l.set(this._element,this.constructor.DATA_KEY,this))}dispose(){$l.remove(this._element,this.constructor.DATA_KEY),He.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,n,i=!0){bu(e,n,i)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return $l.get(Qr(e),this.DATA_KEY)}static getOrCreateInstance(e,n={}){return this.getInstance(e)||new this(e,typeof n=="object"?n:null)}static get VERSION(){return ip}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const fl=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,i=t.NAME;He.on(document,n,`[data-bs-dismiss="${i}"]`,function(r){if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),es(this))return;const s=Ir(this)||this.closest(`.${i}`);t.getOrCreateInstance(s)[e]()})},rp="alert",sp="bs.alert",ku=`.${sp}`,op=`close${ku}`,ap=`closed${ku}`,lp="fade",cp="show";class dl extends ur{static get NAME(){return rp}close(){if(He.trigger(this._element,op).defaultPrevented)return;this._element.classList.remove(cp);const n=this._element.classList.contains(lp);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),He.trigger(this._element,ap),this.dispose()}static jQueryInterface(e){return this.each(function(){const n=dl.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}fl(dl,"close");Qi(dl);const hp="button",up="bs.button",fp=`.${up}`,dp=".data-api",pp="active",mc='[data-bs-toggle="button"]',gp=`click${fp}${dp}`;class pl extends ur{static get NAME(){return hp}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(pp))}static jQueryInterface(e){return this.each(function(){const n=pl.getOrCreateInstance(this);e==="toggle"&&n[e]()})}}He.on(document,gp,mc,t=>{t.preventDefault();const e=t.target.closest(mc);pl.getOrCreateInstance(e).toggle()});Qi(pl);const Rt={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter(n=>n.matches(e))},parents(t,e){const n=[];let i=t.parentNode.closest(e);for(;i;)n.push(i),i=i.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(e,t).filter(n=>!es(n)&&ro(n))}},mp="swipe",so=".bs.swipe",_p=`touchstart${so}`,vp=`touchmove${so}`,yp=`touchend${so}`,bp=`pointerdown${so}`,wp=`pointerup${so}`,xp="touch",Ep="pen",Sp="pointer-event",Tp=40,Cp={endCallback:null,leftCallback:null,rightCallback:null},kp={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Ga extends Qo{constructor(e,n){super(),this._element=e,!(!e||!Ga.isSupported())&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Cp}static get DefaultType(){return kp}static get NAME(){return mp}dispose(){He.off(this._element,so)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),Ar(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=Tp)return;const n=e/this._deltaX;this._deltaX=0,n&&Ar(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(He.on(this._element,bp,e=>this._start(e)),He.on(this._element,wp,e=>this._end(e)),this._element.classList.add(Sp)):(He.on(this._element,_p,e=>this._start(e)),He.on(this._element,vp,e=>this._move(e)),He.on(this._element,yp,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===Ep||e.pointerType===xp)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Ap="carousel",Ip="bs.carousel",rs=`.${Ip}`,Au=".data-api",Op="ArrowLeft",Mp="ArrowRight",zp=500,go="next",Ms="prev",Ds="left",Da="right",Rp=`slide${rs}`,Wl=`slid${rs}`,Fp=`keydown${rs}`,Np=`mouseenter${rs}`,Dp=`mouseleave${rs}`,Lp=`dragstart${rs}`,Pp=`load${rs}${Au}`,$p=`click${rs}${Au}`,Iu="carousel",ba="active",Bp="slide",Wp="carousel-item-end",Hp="carousel-item-start",Vp="carousel-item-next",Up="carousel-item-prev",Ou=".active",Mu=".carousel-item",jp=Ou+Mu,Yp=".carousel-item img",Xp=".carousel-indicators",qp="[data-bs-slide], [data-bs-slide-to]",Zp='[data-bs-ride="carousel"]',Gp={[Op]:Da,[Mp]:Ds},Kp={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Jp={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class ea extends ur{constructor(e,n){super(e,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Rt.findOne(Xp,this._element),this._addEventListeners(),this._config.ride===Iu&&this.cycle()}static get Default(){return Kp}static get DefaultType(){return Jp}static get NAME(){return Ap}next(){this._slide(go)}nextWhenVisible(){!document.hidden&&ro(this._element)&&this.next()}prev(){this._slide(Ms)}pause(){this._isSliding&&_u(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){He.one(this._element,Wl,()=>this.cycle());return}this.cycle()}}to(e){const n=this._getItems();if(e>n.length-1||e<0)return;if(this._isSliding){He.one(this._element,Wl,()=>this.to(e));return}const i=this._getItemIndex(this._getActive());if(i===e)return;const r=e>i?go:Ms;this._slide(r,n[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&He.on(this._element,Fp,e=>this._keydown(e)),this._config.pause==="hover"&&(He.on(this._element,Np,()=>this.pause()),He.on(this._element,Dp,()=>this._maybeEnableCycle())),this._config.touch&&Ga.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const i of Rt.find(Yp,this._element))He.on(i,Lp,r=>r.preventDefault());const n={leftCallback:()=>this._slide(this._directionToOrder(Ds)),rightCallback:()=>this._slide(this._directionToOrder(Da)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),zp+this._config.interval))}};this._swipeHelper=new Ga(this._element,n)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const n=Gp[e.key];n&&(e.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const n=Rt.findOne(Ou,this._indicatorsElement);n.classList.remove(ba),n.removeAttribute("aria-current");const i=Rt.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);i&&(i.classList.add(ba),i.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const n=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(e,n=null){if(this._isSliding)return;const i=this._getActive(),r=e===go,s=n||l2(this._getItems(),i,r,this._config.wrap);if(s===i)return;const o=this._getItemIndex(s),l=C=>He.trigger(this._element,C,{relatedTarget:s,direction:this._orderToDirection(e),from:this._getItemIndex(i),to:o});if(l(Rp).defaultPrevented||!i||!s)return;const p=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=s;const m=r?Hp:Wp,y=r?Vp:Up;s.classList.add(y),Jo(s),i.classList.add(m),s.classList.add(m);const E=()=>{s.classList.remove(m,y),s.classList.add(ba),i.classList.remove(ba,y,m),this._isSliding=!1,l(Wl)};this._queueCallback(E,i,this._isAnimated()),p&&this.cycle()}_isAnimated(){return this._element.classList.contains(Bp)}_getActive(){return Rt.findOne(jp,this._element)}_getItems(){return Rt.find(Mu,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return Ki()?e===Ds?Ms:go:e===Ds?go:Ms}_orderToDirection(e){return Ki()?e===Ms?Ds:Da:e===Ms?Da:Ds}static jQueryInterface(e){return this.each(function(){const n=ea.getOrCreateInstance(this,e);if(typeof e=="number"){n.to(e);return}if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}He.on(document,$p,qp,function(t){const e=Ir(this);if(!e||!e.classList.contains(Iu))return;t.preventDefault();const n=ea.getOrCreateInstance(e),i=this.getAttribute("data-bs-slide-to");if(i){n.to(i),n._maybeEnableCycle();return}if(Mr.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()});He.on(window,Pp,()=>{const t=Rt.find(Zp);for(const e of t)ea.getOrCreateInstance(e)});Qi(ea);const Qp="collapse",e5="bs.collapse",ta=`.${e5}`,t5=".data-api",n5=`show${ta}`,i5=`shown${ta}`,r5=`hide${ta}`,s5=`hidden${ta}`,o5=`click${ta}${t5}`,Hl="show",Bs="collapse",wa="collapsing",a5="collapsed",l5=`:scope .${Bs} .${Bs}`,c5="collapse-horizontal",h5="width",u5="height",f5=".collapse.show, .collapse.collapsing",S1='[data-bs-toggle="collapse"]',d5={parent:null,toggle:!0},p5={parent:"(null|element)",toggle:"boolean"};class Ro extends ur{constructor(e,n){super(e,n),this._isTransitioning=!1,this._triggerArray=[];const i=Rt.find(S1);for(const r of i){const s=mu(r),o=Rt.find(s).filter(l=>l===this._element);s!==null&&o.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return d5}static get DefaultType(){return p5}static get NAME(){return Qp}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(f5).filter(l=>l!==this._element).map(l=>Ro.getOrCreateInstance(l,{toggle:!1}))),e.length&&e[0]._isTransitioning||He.trigger(this._element,n5).defaultPrevented)return;for(const l of e)l.hide();const i=this._getDimension();this._element.classList.remove(Bs),this._element.classList.add(wa),this._element.style[i]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(wa),this._element.classList.add(Bs,Hl),this._element.style[i]="",He.trigger(this._element,i5)},o=`scroll${i[0].toUpperCase()+i.slice(1)}`;this._queueCallback(r,this._element,!0),this._element.style[i]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||He.trigger(this._element,r5).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,Jo(this._element),this._element.classList.add(wa),this._element.classList.remove(Bs,Hl);for(const r of this._triggerArray){const s=Ir(r);s&&!this._isShown(s)&&this._addAriaAndCollapsedClass([r],!1)}this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(wa),this._element.classList.add(Bs),He.trigger(this._element,s5)};this._element.style[n]="",this._queueCallback(i,this._element,!0)}_isShown(e=this._element){return e.classList.contains(Hl)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=Qr(e.parent),e}_getDimension(){return this._element.classList.contains(c5)?h5:u5}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(S1);for(const n of e){const i=Ir(n);i&&this._addAriaAndCollapsedClass([n],this._isShown(i))}}_getFirstLevelChildren(e){const n=Rt.find(l5,this._config.parent);return Rt.find(e,this._config.parent).filter(i=>!n.includes(i))}_addAriaAndCollapsedClass(e,n){if(e.length)for(const i of e)i.classList.toggle(a5,!n),i.setAttribute("aria-expanded",n)}static jQueryInterface(e){const n={};return typeof e=="string"&&/show|hide/.test(e)&&(n.toggle=!1),this.each(function(){const i=Ro.getOrCreateInstance(this,n);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e]()}})}}He.on(document,o5,S1,function(t){(t.target.tagName==="A"||t.delegateTarget&&t.delegateTarget.tagName==="A")&&t.preventDefault();const e=mu(this),n=Rt.find(e);for(const i of n)Ro.getOrCreateInstance(i,{toggle:!1}).toggle()});Qi(Ro);const _c="dropdown",g5="bs.dropdown",Es=`.${g5}`,h2=".data-api",m5="Escape",vc="Tab",_5="ArrowUp",yc="ArrowDown",v5=2,y5=`hide${Es}`,b5=`hidden${Es}`,w5=`show${Es}`,x5=`shown${Es}`,zu=`click${Es}${h2}`,Ru=`keydown${Es}${h2}`,E5=`keyup${Es}${h2}`,Ls="show",S5="dropup",T5="dropend",C5="dropstart",k5="dropup-center",A5="dropdown-center",gl='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',I5=`${gl}.${Ls}`,Fu=".dropdown-menu",O5=".navbar",M5=".navbar-nav",z5=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",R5=Ki()?"top-end":"top-start",F5=Ki()?"top-start":"top-end",N5=Ki()?"bottom-end":"bottom-start",D5=Ki()?"bottom-start":"bottom-end",L5=Ki()?"left-start":"right-start",P5=Ki()?"right-start":"left-start",$5="top",B5="bottom",W5={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},H5={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class _r extends ur{constructor(e,n){super(e,n),this._popper=null,this._parent=this._element.parentNode,this._menu=Rt.findOne(Fu,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return W5}static get DefaultType(){return H5}static get NAME(){return _c}toggle(){return this._isShown()?this.hide():this.show()}show(){if(es(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!He.trigger(this._element,w5,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(M5))for(const i of[].concat(...document.body.children))He.on(i,"mouseover",Za);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Ls),this._element.classList.add(Ls),He.trigger(this._element,x5,e)}}hide(){if(es(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!He.trigger(this._element,y5,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))He.off(i,"mouseover",Za);this._popper&&this._popper.destroy(),this._menu.classList.remove(Ls),this._element.classList.remove(Ls),this._element.setAttribute("aria-expanded","false"),Mr.removeDataAttribute(this._menu,"popper"),He.trigger(this._element,b5,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!Or(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${_c.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof pu>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:Or(this._config.reference)?e=Qr(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const n=this._getPopperConfig();this._popper=a2(e,this._menu,n)}_isShown(){return this._menu.classList.contains(Ls)}_getPlacement(){const e=this._parent;if(e.classList.contains(T5))return L5;if(e.classList.contains(C5))return P5;if(e.classList.contains(k5))return $5;if(e.classList.contains(A5))return B5;const n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(S5)?n?F5:R5:n?D5:N5}_detectNavbar(){return this._element.closest(O5)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Mr.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...typeof this._config.popperConfig=="function"?this._config.popperConfig(e):this._config.popperConfig}}_selectMenuItem({key:e,target:n}){const i=Rt.find(z5,this._menu).filter(r=>ro(r));i.length&&l2(i,n,e===yc,!i.includes(n)).focus()}static jQueryInterface(e){return this.each(function(){const n=_r.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}static clearMenus(e){if(e.button===v5||e.type==="keyup"&&e.key!==vc)return;const n=Rt.find(I5);for(const i of n){const r=_r.getInstance(i);if(!r||r._config.autoClose===!1)continue;const s=e.composedPath(),o=s.includes(r._menu);if(s.includes(r._element)||r._config.autoClose==="inside"&&!o||r._config.autoClose==="outside"&&o||r._menu.contains(e.target)&&(e.type==="keyup"&&e.key===vc||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const l={relatedTarget:r._element};e.type==="click"&&(l.clickEvent=e),r._completeHide(l)}}static dataApiKeydownHandler(e){const n=/input|textarea/i.test(e.target.tagName),i=e.key===m5,r=[_5,yc].includes(e.key);if(!r&&!i||n&&!i)return;e.preventDefault();const s=Rt.findOne(gl,e.delegateTarget.parentNode),o=_r.getOrCreateInstance(s);if(r){e.stopPropagation(),o.show(),o._selectMenuItem(e);return}o._isShown()&&(e.stopPropagation(),o.hide(),s.focus())}}He.on(document,Ru,gl,_r.dataApiKeydownHandler);He.on(document,Ru,Fu,_r.dataApiKeydownHandler);He.on(document,zu,_r.clearMenus);He.on(document,E5,_r.clearMenus);He.on(document,zu,gl,function(t){t.preventDefault(),_r.getOrCreateInstance(this).toggle()});Qi(_r);const bc=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",wc=".sticky-top",xa="padding-right",xc="margin-right";class T1{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,xa,n=>n+e),this._setElementAttributes(bc,xa,n=>n+e),this._setElementAttributes(wc,xc,n=>n-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,xa),this._resetElementAttributes(bc,xa),this._resetElementAttributes(wc,xc)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,n,i){const r=this.getWidth(),s=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+r)return;this._saveInitialAttribute(o,n);const l=window.getComputedStyle(o).getPropertyValue(n);o.style.setProperty(n,`${i(Number.parseFloat(l))}px`)};this._applyManipulationCallback(e,s)}_saveInitialAttribute(e,n){const i=e.style.getPropertyValue(n);i&&Mr.setDataAttribute(e,n,i)}_resetElementAttributes(e,n){const i=r=>{const s=Mr.getDataAttribute(r,n);if(s===null){r.style.removeProperty(n);return}Mr.removeDataAttribute(r,n),r.style.setProperty(n,s)};this._applyManipulationCallback(e,i)}_applyManipulationCallback(e,n){if(Or(e)){n(e);return}for(const i of Rt.find(e,this._element))n(i)}}const Nu="backdrop",V5="fade",Ec="show",Sc=`mousedown.bs.${Nu}`,U5={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},j5={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Du extends Qo{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return U5}static get DefaultType(){return j5}static get NAME(){return Nu}show(e){if(!this._config.isVisible){Ar(e);return}this._append();const n=this._getElement();this._config.isAnimated&&Jo(n),n.classList.add(Ec),this._emulateAnimation(()=>{Ar(e)})}hide(e){if(!this._config.isVisible){Ar(e);return}this._getElement().classList.remove(Ec),this._emulateAnimation(()=>{this.dispose(),Ar(e)})}dispose(){this._isAppended&&(He.off(this._element,Sc),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(V5),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=Qr(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),He.on(e,Sc,()=>{Ar(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){bu(e,this._getElement(),this._config.isAnimated)}}const Y5="focustrap",X5="bs.focustrap",Ka=`.${X5}`,q5=`focusin${Ka}`,Z5=`keydown.tab${Ka}`,G5="Tab",K5="forward",Tc="backward",J5={autofocus:!0,trapElement:null},Q5={autofocus:"boolean",trapElement:"element"};class Lu extends Qo{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return J5}static get DefaultType(){return Q5}static get NAME(){return Y5}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),He.off(document,Ka),He.on(document,q5,e=>this._handleFocusin(e)),He.on(document,Z5,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,He.off(document,Ka))}_handleFocusin(e){const{trapElement:n}=this._config;if(e.target===document||e.target===n||n.contains(e.target))return;const i=Rt.focusableChildren(n);i.length===0?n.focus():this._lastTabNavDirection===Tc?i[i.length-1].focus():i[0].focus()}_handleKeydown(e){e.key===G5&&(this._lastTabNavDirection=e.shiftKey?Tc:K5)}}const eg="modal",tg="bs.modal",xr=`.${tg}`,ng=".data-api",ig="Escape",rg=`hide${xr}`,sg=`hidePrevented${xr}`,Pu=`hidden${xr}`,$u=`show${xr}`,og=`shown${xr}`,ag=`resize${xr}`,lg=`mousedown.dismiss${xr}`,cg=`keydown.dismiss${xr}`,hg=`click${xr}${ng}`,Cc="modal-open",ug="fade",kc="show",Vl="modal-static",fg=".modal.show",dg=".modal-dialog",pg=".modal-body",gg='[data-bs-toggle="modal"]',mg={backdrop:!0,focus:!0,keyboard:!0},_g={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class ri extends ur{constructor(e,n){super(e,n),this._dialog=Rt.findOne(dg,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new T1,this._addEventListeners()}static get Default(){return mg}static get DefaultType(){return _g}static get NAME(){return eg}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||He.trigger(this._element,$u,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Cc),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||He.trigger(this._element,rg).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(kc),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const e of[window,this._dialog])He.off(e,xr);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Du({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Lu({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=Rt.findOne(pg,this._dialog);n&&(n.scrollTop=0),Jo(this._element),this._element.classList.add(kc);const i=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,He.trigger(this._element,og,{relatedTarget:e})};this._queueCallback(i,this._dialog,this._isAnimated())}_addEventListeners(){He.on(this._element,cg,e=>{if(e.key===ig){if(this._config.keyboard){e.preventDefault(),this.hide();return}this._triggerBackdropTransition()}}),He.on(window,ag,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),He.on(this._element,lg,e=>{if(e.target===e.currentTarget){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Cc),this._resetAdjustments(),this._scrollBar.reset(),He.trigger(this._element,Pu)})}_isAnimated(){return this._element.classList.contains(ug)}_triggerBackdropTransition(){if(He.trigger(this._element,sg).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,i=this._element.style.overflowY;i==="hidden"||this._element.classList.contains(Vl)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(Vl),this._queueCallback(()=>{this._element.classList.remove(Vl),this._queueCallback(()=>{this._element.style.overflowY=i},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),i=n>0;if(i&&!e){const r=Ki()?"paddingLeft":"paddingRight";this._element.style[r]=`${n}px`}if(!i&&e){const r=Ki()?"paddingRight":"paddingLeft";this._element.style[r]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,n){return this.each(function(){const i=ri.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e](n)}})}}He.on(document,hg,gg,function(t){const e=Ir(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),He.one(e,$u,r=>{r.defaultPrevented||He.one(e,Pu,()=>{ro(this)&&this.focus()})});const n=Rt.findOne(fg);n&&ri.getInstance(n).hide(),ri.getOrCreateInstance(e).toggle(this)});fl(ri);Qi(ri);const vg="offcanvas",yg="bs.offcanvas",Pr=`.${yg}`,Bu=".data-api",bg=`load${Pr}${Bu}`,wg="Escape",Ac="show",Ic="showing",Oc="hiding",xg="offcanvas-backdrop",Wu=".offcanvas.show",Eg=`show${Pr}`,Sg=`shown${Pr}`,Tg=`hide${Pr}`,Mc=`hidePrevented${Pr}`,Hu=`hidden${Pr}`,Cg=`resize${Pr}`,kg=`click${Pr}${Bu}`,Ag=`keydown.dismiss${Pr}`,Ig='[data-bs-toggle="offcanvas"]',Og={backdrop:!0,keyboard:!0,scroll:!1},Mg={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class ts extends ur{constructor(e,n){super(e,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Og}static get DefaultType(){return Mg}static get NAME(){return vg}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||He.trigger(this._element,Eg,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new T1().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Ic);const i=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Ac),this._element.classList.remove(Ic),He.trigger(this._element,Sg,{relatedTarget:e})};this._queueCallback(i,this._element,!0)}hide(){if(!this._isShown||He.trigger(this._element,Tg).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Oc),this._backdrop.hide();const n=()=>{this._element.classList.remove(Ac,Oc),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new T1().reset(),He.trigger(this._element,Hu)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){He.trigger(this._element,Mc);return}this.hide()},n=!!this._config.backdrop;return new Du({className:xg,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?e:null})}_initializeFocusTrap(){return new Lu({trapElement:this._element})}_addEventListeners(){He.on(this._element,Ag,e=>{if(e.key===wg){if(!this._config.keyboard){He.trigger(this._element,Mc);return}this.hide()}})}static jQueryInterface(e){return this.each(function(){const n=ts.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}He.on(document,kg,Ig,function(t){const e=Ir(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),es(this))return;He.one(e,Hu,()=>{ro(this)&&this.focus()});const n=Rt.findOne(Wu);n&&n!==e&&ts.getInstance(n).hide(),ts.getOrCreateInstance(e).toggle(this)});He.on(window,bg,()=>{for(const t of Rt.find(Wu))ts.getOrCreateInstance(t).show()});He.on(window,Cg,()=>{for(const t of Rt.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(t).position!=="fixed"&&ts.getOrCreateInstance(t).hide()});fl(ts);Qi(ts);const zg=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Rg=/^aria-[\w-]*$/i,Fg=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Ng=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,Dg=(t,e)=>{const n=t.nodeName.toLowerCase();return e.includes(n)?zg.has(n)?!!(Fg.test(t.nodeValue)||Ng.test(t.nodeValue)):!0:e.filter(i=>i instanceof RegExp).some(i=>i.test(n))},Vu={"*":["class","dir","id","lang","role",Rg],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function Lg(t,e,n){if(!t.length)return t;if(n&&typeof n=="function")return n(t);const r=new window.DOMParser().parseFromString(t,"text/html"),s=[].concat(...r.body.querySelectorAll("*"));for(const o of s){const l=o.nodeName.toLowerCase();if(!Object.keys(e).includes(l)){o.remove();continue}const h=[].concat(...o.attributes),p=[].concat(e["*"]||[],e[l]||[]);for(const m of h)Dg(m,p)||o.removeAttribute(m.nodeName)}return r.body.innerHTML}const Pg="TemplateFactory",$g={allowList:Vu,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Bg={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Wg={entry:"(string|element|function|null)",selector:"(string|element)"};class Hg extends Qo{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return $g}static get DefaultType(){return Bg}static get NAME(){return Pg}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[r,s]of Object.entries(this._config.content))this._setContent(e,s,r);const n=e.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&n.classList.add(...i.split(" ")),n}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[n,i]of Object.entries(e))super._typeCheckConfig({selector:n,entry:i},Wg)}_setContent(e,n,i){const r=Rt.findOne(i,e);if(r){if(n=this._resolvePossibleFunction(n),!n){r.remove();return}if(Or(n)){this._putElementInTemplate(Qr(n),r);return}if(this._config.html){r.innerHTML=this._maybeSanitize(n);return}r.textContent=n}}_maybeSanitize(e){return this._config.sanitize?Lg(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return typeof e=="function"?e(this):e}_putElementInTemplate(e,n){if(this._config.html){n.innerHTML="",n.append(e);return}n.textContent=e.textContent}}const Vg="tooltip",Ug=new Set(["sanitize","allowList","sanitizeFn"]),Ul="fade",jg="modal",Ea="show",Yg=".tooltip-inner",zc=`.${jg}`,Rc="hide.bs.modal",mo="hover",jl="focus",Xg="click",qg="manual",Zg="hide",Gg="hidden",Kg="show",Jg="shown",Qg="inserted",em="click",tm="focusin",nm="focusout",im="mouseenter",rm="mouseleave",sm={AUTO:"auto",TOP:"top",RIGHT:Ki()?"left":"right",BOTTOM:"bottom",LEFT:Ki()?"right":"left"},om={allowList:Vu,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},am={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class oo extends ur{constructor(e,n){if(typeof pu>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,n),this._isEnabled=!0,this._timeout=0,this._isHovered=!1,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners()}static get Default(){return om}static get DefaultType(){return am}static get NAME(){return Vg}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(e){if(this._isEnabled){if(e){const n=this._initializeOnDelegatedTarget(e);n._activeTrigger.click=!n._activeTrigger.click,n._isWithActiveTrigger()?n._enter():n._leave();return}if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),He.off(this._element.closest(zc),Rc,this._hideModalHandler),this.tip&&this.tip.remove(),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=He.trigger(this._element,this.constructor.eventName(Kg)),i=(vu(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!i)return;this.tip&&(this.tip.remove(),this.tip=null);const r=this._getTipElement();this._element.setAttribute("aria-describedby",r.getAttribute("id"));const{container:s}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(s.append(r),He.trigger(this._element,this.constructor.eventName(Qg))),this._popper?this._popper.update():this._popper=this._createPopper(r),r.classList.add(Ea),"ontouchstart"in document.documentElement)for(const l of[].concat(...document.body.children))He.on(l,"mouseover",Za);const o=()=>{const l=this._isHovered;this._isHovered=!1,He.trigger(this._element,this.constructor.eventName(Jg)),l&&this._leave()};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()||He.trigger(this._element,this.constructor.eventName(Zg)).defaultPrevented)return;const n=this._getTipElement();if(n.classList.remove(Ea),"ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))He.off(r,"mouseover",Za);this._activeTrigger[Xg]=!1,this._activeTrigger[jl]=!1,this._activeTrigger[mo]=!1,this._isHovered=!1;const i=()=>{this._isWithActiveTrigger()||(this._isHovered||n.remove(),this._element.removeAttribute("aria-describedby"),He.trigger(this._element,this.constructor.eventName(Gg)),this._disposePopper())};this._queueCallback(i,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const n=this._getTemplateFactory(e).toHtml();if(!n)return null;n.classList.remove(Ul,Ea),n.classList.add(`bs-${this.constructor.NAME}-auto`);const i=X0(this.constructor.NAME).toString();return n.setAttribute("id",i),this._isAnimated()&&n.classList.add(Ul),n}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new Hg({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Yg]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._config.originalTitle}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Ul)}_isShown(){return this.tip&&this.tip.classList.contains(Ea)}_createPopper(e){const n=typeof this._config.placement=="function"?this._config.placement.call(this,e,this._element):this._config.placement,i=sm[n.toUpperCase()];return a2(this._element,e,this._getPopperConfig(i))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_resolvePossibleFunction(e){return typeof e=="function"?e.call(this._element):e}_getPopperConfig(e){const n={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:i=>{this._getTipElement().setAttribute("data-popper-placement",i.state.placement)}}]};return{...n,...typeof this._config.popperConfig=="function"?this._config.popperConfig(n):this._config.popperConfig}}_setListeners(){const e=this._config.trigger.split(" ");for(const n of e)if(n==="click")He.on(this._element,this.constructor.eventName(em),this._config.selector,i=>this.toggle(i));else if(n!==qg){const i=n===mo?this.constructor.eventName(im):this.constructor.eventName(tm),r=n===mo?this.constructor.eventName(rm):this.constructor.eventName(nm);He.on(this._element,i,this._config.selector,s=>{const o=this._initializeOnDelegatedTarget(s);o._activeTrigger[s.type==="focusin"?jl:mo]=!0,o._enter()}),He.on(this._element,r,this._config.selector,s=>{const o=this._initializeOnDelegatedTarget(s);o._activeTrigger[s.type==="focusout"?jl:mo]=o._element.contains(s.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},He.on(this._element.closest(zc),Rc,this._hideModalHandler),this._config.selector?this._config={...this._config,trigger:"manual",selector:""}:this._fixTitle()}_fixTitle(){const e=this._config.originalTitle;e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,n){clearTimeout(this._timeout),this._timeout=setTimeout(e,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const n=Mr.getDataAttributes(this._element);for(const i of Object.keys(n))Ug.has(i)&&delete n[i];return e={...n,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:Qr(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),e.originalTitle=this._element.getAttribute("title")||"",typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const n in this._config)this.constructor.Default[n]!==this._config[n]&&(e[n]=this._config[n]);return e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null)}static jQueryInterface(e){return this.each(function(){const n=oo.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}Qi(oo);const lm="popover",cm=".popover-header",hm=".popover-body",um={...oo.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},fm={...oo.DefaultType,content:"(null|string|element|function)"};class u2 extends oo{static get Default(){return um}static get DefaultType(){return fm}static get NAME(){return lm}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[cm]:this._getTitle(),[hm]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const n=u2.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}Qi(u2);const dm="scrollspy",pm="bs.scrollspy",f2=`.${pm}`,gm=".data-api",mm=`activate${f2}`,Fc=`click${f2}`,_m=`load${f2}${gm}`,vm="dropdown-item",zs="active",ym='[data-bs-spy="scroll"]',Yl="[href]",bm=".nav, .list-group",Nc=".nav-link",wm=".nav-item",xm=".list-group-item",Em=`${Nc}, ${wm} > ${Nc}, ${xm}`,Sm=".dropdown",Tm=".dropdown-toggle",Cm={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null},km={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element"};class ml extends ur{constructor(e,n){super(e,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Cm}static get DefaultType(){return km}static get NAME(){return dm}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=Qr(e.target)||document.body,e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(He.off(this._config.target,Fc),He.on(this._config.target,Fc,Yl,e=>{const n=this._observableSections.get(e.target.hash);if(n){e.preventDefault();const i=this._rootElement||window,r=n.offsetTop-this._element.offsetTop;if(i.scrollTo){i.scrollTo({top:r,behavior:"smooth"});return}i.scrollTop=r}}))}_getNewObserver(){const e={root:this._rootElement,threshold:[.1,.5,1],rootMargin:this._getRootMargin()};return new IntersectionObserver(n=>this._observerCallback(n),e)}_observerCallback(e){const n=o=>this._targetLinks.get(`#${o.target.id}`),i=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(n(o))},r=(this._rootElement||document.documentElement).scrollTop,s=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(const o of e){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(o));continue}const l=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(s&&l){if(i(o),!r)return;continue}!s&&!l&&i(o)}}_getRootMargin(){return this._config.offset?`${this._config.offset}px 0px -30%`:this._config.rootMargin}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=Rt.find(Yl,this._config.target);for(const n of e){if(!n.hash||es(n))continue;const i=Rt.findOne(n.hash,this._element);ro(i)&&(this._targetLinks.set(n.hash,n),this._observableSections.set(n.hash,i))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(zs),this._activateParents(e),He.trigger(this._element,mm,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(vm)){Rt.findOne(Tm,e.closest(Sm)).classList.add(zs);return}for(const n of Rt.parents(e,bm))for(const i of Rt.prev(n,Em))i.classList.add(zs)}_clearActiveClass(e){e.classList.remove(zs);const n=Rt.find(`${Yl}.${zs}`,e);for(const i of n)i.classList.remove(zs)}static jQueryInterface(e){return this.each(function(){const n=ml.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}He.on(window,_m,()=>{for(const t of Rt.find(ym))ml.getOrCreateInstance(t)});Qi(ml);const Am="tab",Im="bs.tab",Ss=`.${Im}`,Om=`hide${Ss}`,Mm=`hidden${Ss}`,zm=`show${Ss}`,Rm=`shown${Ss}`,Fm=`click${Ss}`,Nm=`keydown${Ss}`,Dm=`load${Ss}`,Lm="ArrowLeft",Dc="ArrowRight",Pm="ArrowUp",Lc="ArrowDown",Xr="active",Pc="fade",Xl="show",$m="dropdown",Bm=".dropdown-toggle",Wm=".dropdown-menu",Hm=".dropdown-item",ql=":not(.dropdown-toggle)",Vm='.list-group, .nav, [role="tablist"]',Um=".nav-item, .list-group-item",jm=`.nav-link${ql}, .list-group-item${ql}, [role="tab"]${ql}`,Uu='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Zl=`${jm}, ${Uu}`,Ym=`.${Xr}[data-bs-toggle="tab"], .${Xr}[data-bs-toggle="pill"], .${Xr}[data-bs-toggle="list"]`;class Qs extends ur{constructor(e){super(e),this._parent=this._element.closest(Vm),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),He.on(this._element,Nm,n=>this._keydown(n)))}static get NAME(){return Am}show(){const e=this._element;if(this._elemIsActive(e))return;const n=this._getActiveElem(),i=n?He.trigger(n,Om,{relatedTarget:e}):null;He.trigger(e,zm,{relatedTarget:n}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(n,e),this._activate(e,n))}_activate(e,n){if(!e)return;e.classList.add(Xr),this._activate(Ir(e));const i=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(Xl);return}e.focus(),e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),He.trigger(e,Rm,{relatedTarget:n})};this._queueCallback(i,e,e.classList.contains(Pc))}_deactivate(e,n){if(!e)return;e.classList.remove(Xr),e.blur(),this._deactivate(Ir(e));const i=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(Xl);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),He.trigger(e,Mm,{relatedTarget:n})};this._queueCallback(i,e,e.classList.contains(Pc))}_keydown(e){if(![Lm,Dc,Pm,Lc].includes(e.key))return;e.stopPropagation(),e.preventDefault();const n=[Dc,Lc].includes(e.key),i=l2(this._getChildren().filter(r=>!es(r)),e.target,n,!0);i&&Qs.getOrCreateInstance(i).show()}_getChildren(){return Rt.find(Zl,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,n){this._setAttributeIfNotExists(e,"role","tablist");for(const i of n)this._setInitialAttributesOnChild(i)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const n=this._elemIsActive(e),i=this._getOuterElement(e);e.setAttribute("aria-selected",n),i!==e&&this._setAttributeIfNotExists(i,"role","presentation"),n||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const n=Ir(e);n&&(this._setAttributeIfNotExists(n,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`#${e.id}`))}_toggleDropDown(e,n){const i=this._getOuterElement(e);if(!i.classList.contains($m))return;const r=(s,o)=>{const l=Rt.findOne(s,i);l&&l.classList.toggle(o,n)};r(Bm,Xr),r(Wm,Xl),r(Hm,Xr),i.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(e,n,i){e.hasAttribute(n)||e.setAttribute(n,i)}_elemIsActive(e){return e.classList.contains(Xr)}_getInnerElement(e){return e.matches(Zl)?e:Rt.findOne(Zl,e)}_getOuterElement(e){return e.closest(Um)||e}static jQueryInterface(e){return this.each(function(){const n=Qs.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}He.on(document,Fm,Uu,function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),!es(this)&&Qs.getOrCreateInstance(this).show()});He.on(window,Dm,()=>{for(const t of Rt.find(Ym))Qs.getOrCreateInstance(t)});Qi(Qs);const Xm="toast",qm="bs.toast",ss=`.${qm}`,Zm=`mouseover${ss}`,Gm=`mouseout${ss}`,Km=`focusin${ss}`,Jm=`focusout${ss}`,Qm=`hide${ss}`,e4=`hidden${ss}`,t4=`show${ss}`,n4=`shown${ss}`,i4="fade",$c="hide",Sa="show",Ta="showing",r4={animation:"boolean",autohide:"boolean",delay:"number"},s4={animation:!0,autohide:!0,delay:5e3};class _l extends ur{constructor(e,n){super(e,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return s4}static get DefaultType(){return r4}static get NAME(){return Xm}show(){if(He.trigger(this._element,t4).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(i4);const n=()=>{this._element.classList.remove(Ta),He.trigger(this._element,n4),this._maybeScheduleHide()};this._element.classList.remove($c),Jo(this._element),this._element.classList.add(Sa,Ta),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown()||He.trigger(this._element,Qm).defaultPrevented)return;const n=()=>{this._element.classList.add($c),this._element.classList.remove(Ta,Sa),He.trigger(this._element,e4)};this._element.classList.add(Ta),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Sa),super.dispose()}isShown(){return this._element.classList.contains(Sa)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,n){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=n;break;case"focusin":case"focusout":this._hasKeyboardInteraction=n;break}if(n){this._clearTimeout();return}const i=e.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){He.on(this._element,Zm,e=>this._onInteraction(e,!0)),He.on(this._element,Gm,e=>this._onInteraction(e,!1)),He.on(this._element,Km,e=>this._onInteraction(e,!0)),He.on(this._element,Jm,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const n=_l.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}fl(_l);Qi(_l);var Kr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gl={},La={exports:{}},o4=La.exports,Bc;function a4(){return Bc||(Bc=1,function(t,e){(function(n,i){t.exports=i()})(o4,function(){var n="1.13.4",i=typeof self=="object"&&self.self===self&&self||typeof Kr=="object"&&Kr.global===Kr&&Kr||Function("return this")()||{},r=Array.prototype,s=Object.prototype,o=typeof Symbol<"u"?Symbol.prototype:null,l=r.push,h=r.slice,p=s.toString,m=s.hasOwnProperty,y=typeof ArrayBuffer<"u",E=typeof DataView<"u",C=Array.isArray,N=Object.keys,F=Object.create,X=y&&ArrayBuffer.isView,G=isNaN,V=isFinite,K=!{toString:null}.propertyIsEnumerable("toString"),ae=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],de=Math.pow(2,53)-1;function g(T,D){return D=D==null?T.length-1:+D,function(){for(var a=Math.max(arguments.length-D,0),c=Array(a),u=0;u<a;u++)c[u]=arguments[u+D];switch(D){case 0:return T.call(this,c);case 1:return T.call(this,arguments[0],c);case 2:return T.call(this,arguments[0],arguments[1],c)}var d=Array(D+1);for(u=0;u<D;u++)d[u]=arguments[u];return d[D]=c,T.apply(this,d)}}function H(T){var D=typeof T;return D==="function"||D==="object"&&!!T}function re(T){return T===void 0}function _e(T){return T===!0||T===!1||p.call(T)==="[object Boolean]"}function Te(T){var D="[object "+T+"]";return function(a){return p.call(a)===D}}var ye=Te("String"),le=Te("Number"),Pe=Te("Date"),Le=Te("RegExp"),Ze=Te("Error"),je=Te("Symbol"),Je=Te("ArrayBuffer"),Ye=Te("Function"),it=i.document&&i.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof it!="function"&&(Ye=function(T){return typeof T=="function"||!1});var ft=Ye,z=Te("Object"),M=E&&z(new DataView(new ArrayBuffer(8))),k=typeof Map<"u"&&z(new Map),P=Te("DataView"),B=M?function(T){return T!=null&&ft(T.getInt8)&&Je(T.buffer)}:P,te=C||Te("Array");function ee(T,D){return T!=null&&m.call(T,D)}var ge=Te("Arguments");(function(){ge(arguments)||(ge=function(T){return ee(T,"callee")})})();var ce=ge;function Se(T){return le(T)&&G(T)}function Ve(T){return function(){return T}}function Ge(T){return function(D){var a=T(D);return typeof a=="number"&&a>=0&&a<=de}}function rt(T){return function(D){return D==null?void 0:D[T]}}var S=rt("byteLength"),R=Ge(S),$=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,Q=y?function(T){return X?X(T)&&!B(T):R(T)&&$.test(p.call(T))}:Ve(!1),ue=rt("length");function fe(T,D){D=function(v){for(var b={},I=v.length,U=0;U<I;++U)b[v[U]]=!0;return{contains:function(Z){return b[Z]===!0},push:function(Z){return b[Z]=!0,v.push(Z)}}}(D);var a=ae.length,c=T.constructor,u=ft(c)&&c.prototype||s,d="constructor";for(ee(T,d)&&!D.contains(d)&&D.push(d);a--;)(d=ae[a])in T&&T[d]!==u[d]&&!D.contains(d)&&D.push(d)}function Me(T){if(!H(T))return[];if(N)return N(T);var D=[];for(var a in T)ee(T,a)&&D.push(a);return K&&fe(T,D),D}function tt(T,D){var a=Me(D),c=a.length;if(T==null)return!c;for(var u=Object(T),d=0;d<c;d++){var v=a[d];if(D[v]!==u[v]||!(v in u))return!1}return!0}function Ke(T){return T instanceof Ke?T:this instanceof Ke?void(this._wrapped=T):new Ke(T)}function at(T){return new Uint8Array(T.buffer||T,T.byteOffset||0,S(T))}Ke.VERSION=n,Ke.prototype.value=function(){return this._wrapped},Ke.prototype.valueOf=Ke.prototype.toJSON=Ke.prototype.value,Ke.prototype.toString=function(){return String(this._wrapped)};var mt="[object DataView]";function lt(T,D,a,c){if(T===D)return T!==0||1/T==1/D;if(T==null||D==null)return!1;if(T!=T)return D!=D;var u=typeof T;return(u==="function"||u==="object"||typeof D=="object")&&function d(v,b,I,U){v instanceof Ke&&(v=v._wrapped),b instanceof Ke&&(b=b._wrapped);var Z=p.call(v);if(Z!==p.call(b))return!1;if(M&&Z=="[object Object]"&&B(v)){if(!B(b))return!1;Z=mt}switch(Z){case"[object RegExp]":case"[object String]":return""+v==""+b;case"[object Number]":return+v!=+v?+b!=+b:+v==0?1/+v==1/b:+v==+b;case"[object Date]":case"[object Boolean]":return+v==+b;case"[object Symbol]":return o.valueOf.call(v)===o.valueOf.call(b);case"[object ArrayBuffer]":case mt:return d(at(v),at(b),I,U)}var se=Z==="[object Array]";if(!se&&Q(v)){if(S(v)!==S(b))return!1;if(v.buffer===b.buffer&&v.byteOffset===b.byteOffset)return!0;se=!0}if(!se){if(typeof v!="object"||typeof b!="object")return!1;var me=v.constructor,Ne=b.constructor;if(me!==Ne&&!(ft(me)&&me instanceof me&&ft(Ne)&&Ne instanceof Ne)&&"constructor"in v&&"constructor"in b)return!1}U=U||[];for(var pe=(I=I||[]).length;pe--;)if(I[pe]===v)return U[pe]===b;if(I.push(v),U.push(b),se){if((pe=v.length)!==b.length)return!1;for(;pe--;)if(!lt(v[pe],b[pe],I,U))return!1}else{var Ee,ht=Me(v);if(pe=ht.length,Me(b).length!==pe)return!1;for(;pe--;)if(Ee=ht[pe],!ee(b,Ee)||!lt(v[Ee],b[Ee],I,U))return!1}return I.pop(),U.pop(),!0}(T,D,a,c)}function It(T){if(!H(T))return[];var D=[];for(var a in T)D.push(a);return K&&fe(T,D),D}function sn(T){var D=ue(T);return function(a){if(a==null)return!1;var c=It(a);if(ue(c))return!1;for(var u=0;u<D;u++)if(!ft(a[T[u]]))return!1;return T!==kn||!ft(a[ln])}}var ln="forEach",Ft="has",Dt=["clear","delete"],un=["get",Ft,"set"],fn=Dt.concat(ln,un),kn=Dt.concat(un),Lt=["add"].concat(Dt,ln,Ft),En=k?sn(fn):Te("Map"),Jt=k?sn(kn):Te("WeakMap"),Pt=k?sn(Lt):Te("Set"),vi=Te("WeakSet");function cn(T){for(var D=Me(T),a=D.length,c=Array(a),u=0;u<a;u++)c[u]=T[D[u]];return c}function Gn(T){for(var D={},a=Me(T),c=0,u=a.length;c<u;c++)D[T[a[c]]]=a[c];return D}function oi(T){var D=[];for(var a in T)ft(T[a])&&D.push(a);return D.sort()}function Sn(T,D){return function(a){var c=arguments.length;if(D&&(a=Object(a)),c<2||a==null)return a;for(var u=1;u<c;u++)for(var d=arguments[u],v=T(d),b=v.length,I=0;I<b;I++){var U=v[I];D&&a[U]!==void 0||(a[U]=d[U])}return a}}var Mn=Sn(It),vn=Sn(Me),on=Sn(It,!0);function zn(T){if(!H(T))return{};if(F)return F(T);var D=function(){};D.prototype=T;var a=new D;return D.prototype=null,a}function Kn(T){return te(T)?T:[T]}function $n(T){return Ke.toPath(T)}function yi(T,D){for(var a=D.length,c=0;c<a;c++){if(T==null)return;T=T[D[c]]}return a?T:void 0}function ai(T,D,a){var c=yi(T,$n(D));return re(c)?a:c}function bi(T){return T}function li(T){return T=vn({},T),function(D){return tt(D,T)}}function An(T){return T=$n(T),function(D){return yi(D,T)}}function ci(T,D,a){if(D===void 0)return T;switch(a??3){case 1:return function(c){return T.call(D,c)};case 3:return function(c,u,d){return T.call(D,c,u,d)};case 4:return function(c,u,d,v){return T.call(D,c,u,d,v)}}return function(){return T.apply(D,arguments)}}function dr(T,D,a){return T==null?bi:ft(T)?ci(T,D,a):H(T)&&!te(T)?li(T):An(T)}function Jn(T,D){return dr(T,D,1/0)}function yn(T,D,a){return Ke.iteratee!==Jn?Ke.iteratee(T,D):dr(T,D,a)}function jn(){}function Rn(T,D){return D==null&&(D=T,T=0),T+Math.floor(Math.random()*(D-T+1))}Ke.toPath=Kn,Ke.iteratee=Jn;var Mi=Date.now||function(){return new Date().getTime()};function Er(T){var D=function(d){return T[d]},a="(?:"+Me(T).join("|")+")",c=RegExp(a),u=RegExp(a,"g");return function(d){return d=d==null?"":""+d,c.test(d)?d.replace(u,D):d}}var zi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},pr=Er(zi),Wr=Er(Gn(zi)),nt=Ke.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},ie=/(.)^/,Ue={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},We=/\\|'|\r|\n|\u2028|\u2029/g;function Vt(T){return"\\"+Ue[T]}var Zt=/^\s*(\w|\$)+\s*$/,dn=0;function pn(T,D,a,c,u){if(!(c instanceof D))return T.apply(a,u);var d=zn(T.prototype),v=T.apply(d,u);return H(v)?v:d}var gn=g(function(T,D){var a=gn.placeholder,c=function(){for(var u=0,d=D.length,v=Array(d),b=0;b<d;b++)v[b]=D[b]===a?arguments[u++]:D[b];for(;u<arguments.length;)v.push(arguments[u++]);return pn(T,c,this,this,v)};return c});gn.placeholder=Ke;var hi=g(function(T,D,a){if(!ft(T))throw new TypeError("Bind must be called on a function");var c=g(function(u){return pn(T,c,D,this,a.concat(u))});return c}),Nt=Ge(ue);function Xt(T,D,a,c){if(c=c||[],D||D===0){if(D<=0)return c.concat(T)}else D=1/0;for(var u=c.length,d=0,v=ue(T);d<v;d++){var b=T[d];if(Nt(b)&&(te(b)||ce(b)))if(D>1)Xt(b,D-1,a,c),u=c.length;else for(var I=0,U=b.length;I<U;)c[u++]=b[I++];else a||(c[u++]=b)}return c}var hn=g(function(T,D){var a=(D=Xt(D,!1,!1)).length;if(a<1)throw new Error("bindAll must be passed function names");for(;a--;){var c=D[a];T[c]=hi(T[c],T)}return T}),At=g(function(T,D,a){return setTimeout(function(){return T.apply(null,a)},D)}),Is=gn(At,Ke,1);function Sr(T){return function(){return!T.apply(this,arguments)}}function gr(T,D){var a;return function(){return--T>0&&(a=D.apply(this,arguments)),T<=1&&(D=null),a}}var Os=gn(gr,2);function Yn(T,D,a){D=yn(D,a);for(var c,u=Me(T),d=0,v=u.length;d<v;d++)if(D(T[c=u[d]],c,T))return c}function er(T){return function(D,a,c){a=yn(a,c);for(var u=ue(D),d=T>0?0:u-1;d>=0&&d<u;d+=T)if(a(D[d],d,D))return d;return-1}}var Hr=er(1),as=er(-1);function Xn(T,D,a,c){for(var u=(a=yn(a,c,1))(D),d=0,v=ue(T);d<v;){var b=Math.floor((d+v)/2);a(T[b])<u?d=b+1:v=b}return d}function Ri(T,D,a){return function(c,u,d){var v=0,b=ue(c);if(typeof d=="number")T>0?v=d>=0?d:Math.max(d+b,v):b=d>=0?Math.min(d+1,b):d+b+1;else if(a&&d&&b)return c[d=a(c,u)]===u?d:-1;if(u!=u)return(d=D(h.call(c,v,b),Se))>=0?d+v:-1;for(d=T>0?v:b-1;d>=0&&d<b;d+=T)if(c[d]===u)return d;return-1}}var tr=Ri(1,Hr,Xn),Tr=Ri(-1,as);function Tn(T,D,a){var c=(Nt(T)?Hr:Yn)(T,D,a);if(c!==void 0&&c!==-1)return T[c]}function In(T,D,a){var c,u;if(D=ci(D,a),Nt(T))for(c=0,u=T.length;c<u;c++)D(T[c],c,T);else{var d=Me(T);for(c=0,u=d.length;c<u;c++)D(T[d[c]],d[c],T)}return T}function f(T,D,a){D=yn(D,a);for(var c=!Nt(T)&&Me(T),u=(c||T).length,d=Array(u),v=0;v<u;v++){var b=c?c[v]:v;d[v]=D(T[b],b,T)}return d}function _(T){var D=function(a,c,u,d){var v=!Nt(a)&&Me(a),b=(v||a).length,I=T>0?0:b-1;for(d||(u=a[v?v[I]:I],I+=T);I>=0&&I<b;I+=T){var U=v?v[I]:I;u=c(u,a[U],U,a)}return u};return function(a,c,u,d){var v=arguments.length>=3;return D(a,ci(c,d,4),u,v)}}var w=_(1),x=_(-1);function O(T,D,a){var c=[];return D=yn(D,a),In(T,function(u,d,v){D(u,d,v)&&c.push(u)}),c}function W(T,D,a){D=yn(D,a);for(var c=!Nt(T)&&Me(T),u=(c||T).length,d=0;d<u;d++){var v=c?c[d]:d;if(!D(T[v],v,T))return!1}return!0}function Y(T,D,a){D=yn(D,a);for(var c=!Nt(T)&&Me(T),u=(c||T).length,d=0;d<u;d++){var v=c?c[d]:d;if(D(T[v],v,T))return!0}return!1}function j(T,D,a,c){return Nt(T)||(T=cn(T)),(typeof a!="number"||c)&&(a=0),tr(T,D,a)>=0}var q=g(function(T,D,a){var c,u;return ft(D)?u=D:(D=$n(D),c=D.slice(0,-1),D=D[D.length-1]),f(T,function(d){var v=u;if(!v){if(c&&c.length&&(d=yi(d,c)),d==null)return;v=d[D]}return v==null?v:v.apply(d,a)})});function ne(T,D){return f(T,An(D))}function be(T,D,a){var c,u,d=-1/0,v=-1/0;if(D==null||typeof D=="number"&&typeof T[0]!="object"&&T!=null)for(var b=0,I=(T=Nt(T)?T:cn(T)).length;b<I;b++)(c=T[b])!=null&&c>d&&(d=c);else D=yn(D,a),In(T,function(U,Z,se){((u=D(U,Z,se))>v||u===-1/0&&d===-1/0)&&(d=U,v=u)});return d}var Oe=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function we(T){return T?te(T)?h.call(T):ye(T)?T.match(Oe):Nt(T)?f(T,bi):cn(T):[]}function ve(T,D,a){if(D==null||a)return Nt(T)||(T=cn(T)),T[Rn(T.length-1)];var c=we(T),u=ue(c);D=Math.max(Math.min(D,u),0);for(var d=u-1,v=0;v<D;v++){var b=Rn(v,d),I=c[v];c[v]=c[b],c[b]=I}return c.slice(0,D)}function Ce(T,D){return function(a,c,u){var d=D?[[],[]]:{};return c=yn(c,u),In(a,function(v,b){var I=c(v,b,a);T(d,v,I)}),d}}var ze=Ce(function(T,D,a){ee(T,a)?T[a].push(D):T[a]=[D]}),Ae=Ce(function(T,D,a){T[a]=D}),xe=Ce(function(T,D,a){ee(T,a)?T[a]++:T[a]=1}),Qe=Ce(function(T,D,a){T[a?0:1].push(D)},!0);function Fe(T,D,a){return D in a}var Be=g(function(T,D){var a={},c=D[0];if(T==null)return a;ft(c)?(D.length>1&&(c=ci(c,D[1])),D=It(T)):(c=Fe,D=Xt(D,!1,!1),T=Object(T));for(var u=0,d=D.length;u<d;u++){var v=D[u],b=T[v];c(b,v,T)&&(a[v]=b)}return a}),Re=g(function(T,D){var a,c=D[0];return ft(c)?(c=Sr(c),D.length>1&&(a=D[1])):(D=f(Xt(D,!1,!1),String),c=function(u,d){return!j(D,d)}),Be(T,c,a)});function vt(T,D,a){return h.call(T,0,Math.max(0,T.length-(D==null||a?1:D)))}function ct(T,D,a){return T==null||T.length<1?D==null||a?void 0:[]:D==null||a?T[0]:vt(T,T.length-D)}function pt(T,D,a){return h.call(T,D==null||a?1:D)}var ji=g(function(T,D){return D=Xt(D,!0,!0),O(T,function(a){return!j(D,a)})}),nr=g(function(T,D){return ji(T,D)});function Fn(T,D,a,c){_e(D)||(c=a,a=D,D=!1),a!=null&&(a=yn(a,c));for(var u=[],d=[],v=0,b=ue(T);v<b;v++){var I=T[v],U=a?a(I,v,T):I;D&&!a?(v&&d===U||u.push(I),d=U):a?j(d,U)||(d.push(U),u.push(I)):j(u,I)||u.push(I)}return u}var wi=g(function(T){return Fn(Xt(T,!0,!0))});function Yi(T){for(var D=T&&be(T,ue).length||0,a=Array(D),c=0;c<D;c++)a[c]=ne(T,c);return a}var xi=g(Yi);function ir(T,D){return T._chain?Ke(D).chain():D}function Qn(T){return In(oi(T),function(D){var a=Ke[D]=T[D];Ke.prototype[D]=function(){var c=[this._wrapped];return l.apply(c,arguments),ir(this,a.apply(Ke,c))}}),Ke}In(["pop","push","reverse","shift","sort","splice","unshift"],function(T){var D=r[T];Ke.prototype[T]=function(){var a=this._wrapped;return a!=null&&(D.apply(a,arguments),T!=="shift"&&T!=="splice"||a.length!==0||delete a[0]),ir(this,a)}}),In(["concat","join","slice"],function(T){var D=r[T];Ke.prototype[T]=function(){var a=this._wrapped;return a!=null&&(a=D.apply(a,arguments)),ir(this,a)}});var Fi=Qn({__proto__:null,VERSION:n,restArguments:g,isObject:H,isNull:function(T){return T===null},isUndefined:re,isBoolean:_e,isElement:function(T){return!(!T||T.nodeType!==1)},isString:ye,isNumber:le,isDate:Pe,isRegExp:Le,isError:Ze,isSymbol:je,isArrayBuffer:Je,isDataView:B,isArray:te,isFunction:ft,isArguments:ce,isFinite:function(T){return!je(T)&&V(T)&&!isNaN(parseFloat(T))},isNaN:Se,isTypedArray:Q,isEmpty:function(T){if(T==null)return!0;var D=ue(T);return typeof D=="number"&&(te(T)||ye(T)||ce(T))?D===0:ue(Me(T))===0},isMatch:tt,isEqual:function(T,D){return lt(T,D)},isMap:En,isWeakMap:Jt,isSet:Pt,isWeakSet:vi,keys:Me,allKeys:It,values:cn,pairs:function(T){for(var D=Me(T),a=D.length,c=Array(a),u=0;u<a;u++)c[u]=[D[u],T[D[u]]];return c},invert:Gn,functions:oi,methods:oi,extend:Mn,extendOwn:vn,assign:vn,defaults:on,create:function(T,D){var a=zn(T);return D&&vn(a,D),a},clone:function(T){return H(T)?te(T)?T.slice():Mn({},T):T},tap:function(T,D){return D(T),T},get:ai,has:function(T,D){for(var a=(D=$n(D)).length,c=0;c<a;c++){var u=D[c];if(!ee(T,u))return!1;T=T[u]}return!!a},mapObject:function(T,D,a){D=yn(D,a);for(var c=Me(T),u=c.length,d={},v=0;v<u;v++){var b=c[v];d[b]=D(T[b],b,T)}return d},identity:bi,constant:Ve,noop:jn,toPath:Kn,property:An,propertyOf:function(T){return T==null?jn:function(D){return ai(T,D)}},matcher:li,matches:li,times:function(T,D,a){var c=Array(Math.max(0,T));D=ci(D,a,1);for(var u=0;u<T;u++)c[u]=D(u);return c},random:Rn,now:Mi,escape:pr,unescape:Wr,templateSettings:nt,template:function(T,D,a){!D&&a&&(D=a),D=on({},D,Ke.templateSettings);var c=RegExp([(D.escape||ie).source,(D.interpolate||ie).source,(D.evaluate||ie).source].join("|")+"|$","g"),u=0,d="__p+='";T.replace(c,function(U,Z,se,me,Ne){return d+=T.slice(u,Ne).replace(We,Vt),u=Ne+U.length,Z?d+=`'+
((__t=(`+Z+`))==null?'':_.escape(__t))+
'`:se?d+=`'+
((__t=(`+se+`))==null?'':__t)+
'`:me&&(d+=`';
`+me+`
__p+='`),U}),d+=`';
`;var v,b=D.variable;if(b){if(!Zt.test(b))throw new Error("variable is not a bare identifier: "+b)}else d=`with(obj||{}){
`+d+`}
`,b="obj";d=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+d+`return __p;
`;try{v=new Function(b,"_",d)}catch(U){throw U.source=d,U}var I=function(U){return v.call(this,U,Ke)};return I.source="function("+b+`){
`+d+"}",I},result:function(T,D,a){var c=(D=$n(D)).length;if(!c)return ft(a)?a.call(T):a;for(var u=0;u<c;u++){var d=T==null?void 0:T[D[u]];d===void 0&&(d=a,u=c),T=ft(d)?d.call(T):d}return T},uniqueId:function(T){var D=++dn+"";return T?T+D:D},chain:function(T){var D=Ke(T);return D._chain=!0,D},iteratee:Jn,partial:gn,bind:hi,bindAll:hn,memoize:function(T,D){var a=function(c){var u=a.cache,d=""+(D?D.apply(this,arguments):c);return ee(u,d)||(u[d]=T.apply(this,arguments)),u[d]};return a.cache={},a},delay:At,defer:Is,throttle:function(T,D,a){var c,u,d,v,b=0;a||(a={});var I=function(){b=a.leading===!1?0:Mi(),c=null,v=T.apply(u,d),c||(u=d=null)},U=function(){var Z=Mi();b||a.leading!==!1||(b=Z);var se=D-(Z-b);return u=this,d=arguments,se<=0||se>D?(c&&(clearTimeout(c),c=null),b=Z,v=T.apply(u,d),c||(u=d=null)):c||a.trailing===!1||(c=setTimeout(I,se)),v};return U.cancel=function(){clearTimeout(c),b=0,c=u=d=null},U},debounce:function(T,D,a){var c,u,d,v,b,I=function(){var Z=Mi()-u;D>Z?c=setTimeout(I,D-Z):(c=null,a||(v=T.apply(b,d)),c||(d=b=null))},U=g(function(Z){return b=this,d=Z,u=Mi(),c||(c=setTimeout(I,D),a&&(v=T.apply(b,d))),v});return U.cancel=function(){clearTimeout(c),c=d=b=null},U},wrap:function(T,D){return gn(D,T)},negate:Sr,compose:function(){var T=arguments,D=T.length-1;return function(){for(var a=D,c=T[D].apply(this,arguments);a--;)c=T[a].call(this,c);return c}},after:function(T,D){return function(){if(--T<1)return D.apply(this,arguments)}},before:gr,once:Os,findKey:Yn,findIndex:Hr,findLastIndex:as,sortedIndex:Xn,indexOf:tr,lastIndexOf:Tr,find:Tn,detect:Tn,findWhere:function(T,D){return Tn(T,li(D))},each:In,forEach:In,map:f,collect:f,reduce:w,foldl:w,inject:w,reduceRight:x,foldr:x,filter:O,select:O,reject:function(T,D,a){return O(T,Sr(yn(D)),a)},every:W,all:W,some:Y,any:Y,contains:j,includes:j,include:j,invoke:q,pluck:ne,where:function(T,D){return O(T,li(D))},max:be,min:function(T,D,a){var c,u,d=1/0,v=1/0;if(D==null||typeof D=="number"&&typeof T[0]!="object"&&T!=null)for(var b=0,I=(T=Nt(T)?T:cn(T)).length;b<I;b++)(c=T[b])!=null&&c<d&&(d=c);else D=yn(D,a),In(T,function(U,Z,se){((u=D(U,Z,se))<v||u===1/0&&d===1/0)&&(d=U,v=u)});return d},shuffle:function(T){return ve(T,1/0)},sample:ve,sortBy:function(T,D,a){var c=0;return D=yn(D,a),ne(f(T,function(u,d,v){return{value:u,index:c++,criteria:D(u,d,v)}}).sort(function(u,d){var v=u.criteria,b=d.criteria;if(v!==b){if(v>b||v===void 0)return 1;if(v<b||b===void 0)return-1}return u.index-d.index}),"value")},groupBy:ze,indexBy:Ae,countBy:xe,partition:Qe,toArray:we,size:function(T){return T==null?0:Nt(T)?T.length:Me(T).length},pick:Be,omit:Re,first:ct,head:ct,take:ct,initial:vt,last:function(T,D,a){return T==null||T.length<1?D==null||a?void 0:[]:D==null||a?T[T.length-1]:pt(T,Math.max(0,T.length-D))},rest:pt,tail:pt,drop:pt,compact:function(T){return O(T,Boolean)},flatten:function(T,D){return Xt(T,D,!1)},without:nr,uniq:Fn,unique:Fn,union:wi,intersection:function(T){for(var D=[],a=arguments.length,c=0,u=ue(T);c<u;c++){var d=T[c];if(!j(D,d)){var v;for(v=1;v<a&&j(arguments[v],d);v++);v===a&&D.push(d)}}return D},difference:ji,unzip:Yi,transpose:Yi,zip:xi,object:function(T,D){for(var a={},c=0,u=ue(T);c<u;c++)D?a[T[c]]=D[c]:a[T[c][0]]=T[c][1];return a},range:function(T,D,a){D==null&&(D=T||0,T=0),a||(a=D<T?-1:1);for(var c=Math.max(Math.ceil((D-T)/a),0),u=Array(c),d=0;d<c;d++,T+=a)u[d]=T;return u},chunk:function(T,D){if(D==null||D<1)return[];for(var a=[],c=0,u=T.length;c<u;)a.push(h.call(T,c,c+=D));return a},mixin:Qn,default:Ke});return Fi._=Fi,Fi})}(La)),La.exports}var Pa={exports:{}};/*!
 * jQuery JavaScript Library v3.6.0
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2021-03-02T17:08Z
 */var l4=Pa.exports,Wc;function ju(){return Wc||(Wc=1,function(t){(function(e,n){t.exports=e.document?n(e,!0):function(i){if(!i.document)throw new Error("jQuery requires a window with a document");return n(i)}})(typeof window<"u"?window:l4,function(e,n){var i=[],r=Object.getPrototypeOf,s=i.slice,o=i.flat?function(a){return i.flat.call(a)}:function(a){return i.concat.apply([],a)},l=i.push,h=i.indexOf,p={},m=p.toString,y=p.hasOwnProperty,E=y.toString,C=E.call(Object),N={},F=function(c){return typeof c=="function"&&typeof c.nodeType!="number"&&typeof c.item!="function"},X=function(c){return c!=null&&c===c.window},G=e.document,V={type:!0,src:!0,nonce:!0,noModule:!0};function K(a,c,u){u=u||G;var d,v,b=u.createElement("script");if(b.text=a,c)for(d in V)v=c[d]||c.getAttribute&&c.getAttribute(d),v&&b.setAttribute(d,v);u.head.appendChild(b).parentNode.removeChild(b)}function ae(a){return a==null?a+"":typeof a=="object"||typeof a=="function"?p[m.call(a)]||"object":typeof a}var de="3.6.0",g=function(a,c){return new g.fn.init(a,c)};g.fn=g.prototype={jquery:de,constructor:g,length:0,toArray:function(){return s.call(this)},get:function(a){return a==null?s.call(this):a<0?this[a+this.length]:this[a]},pushStack:function(a){var c=g.merge(this.constructor(),a);return c.prevObject=this,c},each:function(a){return g.each(this,a)},map:function(a){return this.pushStack(g.map(this,function(c,u){return a.call(c,u,c)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(g.grep(this,function(a,c){return(c+1)%2}))},odd:function(){return this.pushStack(g.grep(this,function(a,c){return c%2}))},eq:function(a){var c=this.length,u=+a+(a<0?c:0);return this.pushStack(u>=0&&u<c?[this[u]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:i.sort,splice:i.splice},g.extend=g.fn.extend=function(){var a,c,u,d,v,b,I=arguments[0]||{},U=1,Z=arguments.length,se=!1;for(typeof I=="boolean"&&(se=I,I=arguments[U]||{},U++),typeof I!="object"&&!F(I)&&(I={}),U===Z&&(I=this,U--);U<Z;U++)if((a=arguments[U])!=null)for(c in a)d=a[c],!(c==="__proto__"||I===d)&&(se&&d&&(g.isPlainObject(d)||(v=Array.isArray(d)))?(u=I[c],v&&!Array.isArray(u)?b=[]:!v&&!g.isPlainObject(u)?b={}:b=u,v=!1,I[c]=g.extend(se,b,d)):d!==void 0&&(I[c]=d));return I},g.extend({expando:"jQuery"+(de+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isPlainObject:function(a){var c,u;return!a||m.call(a)!=="[object Object]"?!1:(c=r(a),c?(u=y.call(c,"constructor")&&c.constructor,typeof u=="function"&&E.call(u)===C):!0)},isEmptyObject:function(a){var c;for(c in a)return!1;return!0},globalEval:function(a,c,u){K(a,{nonce:c&&c.nonce},u)},each:function(a,c){var u,d=0;if(H(a))for(u=a.length;d<u&&c.call(a[d],d,a[d])!==!1;d++);else for(d in a)if(c.call(a[d],d,a[d])===!1)break;return a},makeArray:function(a,c){var u=c||[];return a!=null&&(H(Object(a))?g.merge(u,typeof a=="string"?[a]:a):l.call(u,a)),u},inArray:function(a,c,u){return c==null?-1:h.call(c,a,u)},merge:function(a,c){for(var u=+c.length,d=0,v=a.length;d<u;d++)a[v++]=c[d];return a.length=v,a},grep:function(a,c,u){for(var d,v=[],b=0,I=a.length,U=!u;b<I;b++)d=!c(a[b],b),d!==U&&v.push(a[b]);return v},map:function(a,c,u){var d,v,b=0,I=[];if(H(a))for(d=a.length;b<d;b++)v=c(a[b],b,u),v!=null&&I.push(v);else for(b in a)v=c(a[b],b,u),v!=null&&I.push(v);return o(I)},guid:1,support:N}),typeof Symbol=="function"&&(g.fn[Symbol.iterator]=i[Symbol.iterator]),g.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,c){p["[object "+c+"]"]=c.toLowerCase()});function H(a){var c=!!a&&"length"in a&&a.length,u=ae(a);return F(a)||X(a)?!1:u==="array"||c===0||typeof c=="number"&&c>0&&c-1 in a}var re=function(a){var c,u,d,v,b,I,U,Z,se,me,Ne,pe,Ee,ht,Ct,ut,Bn,Nn,Ni,Gt="sizzle"+1*new Date,Tt=a.document,Ei=0,$t=0,bn=ga(),ho=ga(),fa=ga(),Di=ga(),ls=function(L,J){return L===J&&(Ne=!0),0},cs={}.hasOwnProperty,Si=[],Vr=Si.pop,Xi=Si.push,Ur=Si.push,Z2=Si.slice,hs=function(L,J){for(var oe=0,ke=L.length;oe<ke;oe++)if(L[oe]===J)return oe;return-1},kl="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",jt="[\\x20\\t\\r\\n\\f]",us="(?:\\\\[\\da-fA-F]{1,6}"+jt+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",G2="\\["+jt+"*("+us+")(?:"+jt+"*([*^$|!~]?=)"+jt+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+us+"))|)"+jt+"*\\]",Al=":("+us+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+G2+")*)|.*)\\)|)",Hd=new RegExp(jt+"+","g"),da=new RegExp("^"+jt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+jt+"+$","g"),Vd=new RegExp("^"+jt+"*,"+jt+"*"),K2=new RegExp("^"+jt+"*([>+~]|"+jt+")"+jt+"*"),Ud=new RegExp(jt+"|>"),jd=new RegExp(Al),Yd=new RegExp("^"+us+"$"),pa={ID:new RegExp("^#("+us+")"),CLASS:new RegExp("^\\.("+us+")"),TAG:new RegExp("^("+us+"|[*])"),ATTR:new RegExp("^"+G2),PSEUDO:new RegExp("^"+Al),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+jt+"*(even|odd|(([+-]|)(\\d*)n|)"+jt+"*(?:([+-]|)"+jt+"*(\\d+)|))"+jt+"*\\)|)","i"),bool:new RegExp("^(?:"+kl+")$","i"),needsContext:new RegExp("^"+jt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+jt+"*((?:-\\d)?\\d*)"+jt+"*\\)|)(?=[^-]|$)","i")},Xd=/HTML$/i,qd=/^(?:input|select|textarea|button)$/i,Zd=/^h\d$/i,uo=/^[^{]+\{\s*\[native \w/,Gd=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Il=/[+~]/,Cr=new RegExp("\\\\[\\da-fA-F]{1,6}"+jt+"?|\\\\([^\\r\\n\\f])","g"),kr=function(L,J){var oe="0x"+L.slice(1)-65536;return J||(oe<0?String.fromCharCode(oe+65536):String.fromCharCode(oe>>10|55296,oe&1023|56320))},J2=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Q2=function(L,J){return J?L==="\0"?"":L.slice(0,-1)+"\\"+L.charCodeAt(L.length-1).toString(16)+" ":"\\"+L},ec=function(){pe()},Kd=_a(function(L){return L.disabled===!0&&L.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{Ur.apply(Si=Z2.call(Tt.childNodes),Tt.childNodes),Si[Tt.childNodes.length].nodeType}catch{Ur={apply:Si.length?function(J,oe){Xi.apply(J,Z2.call(oe))}:function(J,oe){for(var ke=J.length,he=0;J[ke++]=oe[he++];);J.length=ke-1}}}function Qt(L,J,oe,ke){var he,Ie,$e,qe,et,yt,gt,wt=J&&J.ownerDocument,Mt=J?J.nodeType:9;if(oe=oe||[],typeof L!="string"||!L||Mt!==1&&Mt!==9&&Mt!==11)return oe;if(!ke&&(pe(J),J=J||Ee,Ct)){if(Mt!==11&&(et=Gd.exec(L)))if(he=et[1]){if(Mt===9)if($e=J.getElementById(he)){if($e.id===he)return oe.push($e),oe}else return oe;else if(wt&&($e=wt.getElementById(he))&&Ni(J,$e)&&$e.id===he)return oe.push($e),oe}else{if(et[2])return Ur.apply(oe,J.getElementsByTagName(L)),oe;if((he=et[3])&&u.getElementsByClassName&&J.getElementsByClassName)return Ur.apply(oe,J.getElementsByClassName(he)),oe}if(u.qsa&&!Di[L+" "]&&(!ut||!ut.test(L))&&(Mt!==1||J.nodeName.toLowerCase()!=="object")){if(gt=L,wt=J,Mt===1&&(Ud.test(L)||K2.test(L))){for(wt=Il.test(L)&&Ml(J.parentNode)||J,(wt!==J||!u.scope)&&((qe=J.getAttribute("id"))?qe=qe.replace(J2,Q2):J.setAttribute("id",qe=Gt)),yt=I(L),Ie=yt.length;Ie--;)yt[Ie]=(qe?"#"+qe:":scope")+" "+ma(yt[Ie]);gt=yt.join(",")}try{return Ur.apply(oe,wt.querySelectorAll(gt)),oe}catch{Di(L,!0)}finally{qe===Gt&&J.removeAttribute("id")}}}return Z(L.replace(da,"$1"),J,oe,ke)}function ga(){var L=[];function J(oe,ke){return L.push(oe+" ")>d.cacheLength&&delete J[L.shift()],J[oe+" "]=ke}return J}function rr(L){return L[Gt]=!0,L}function sr(L){var J=Ee.createElement("fieldset");try{return!!L(J)}catch{return!1}finally{J.parentNode&&J.parentNode.removeChild(J),J=null}}function Ol(L,J){for(var oe=L.split("|"),ke=oe.length;ke--;)d.attrHandle[oe[ke]]=J}function tc(L,J){var oe=J&&L,ke=oe&&L.nodeType===1&&J.nodeType===1&&L.sourceIndex-J.sourceIndex;if(ke)return ke;if(oe){for(;oe=oe.nextSibling;)if(oe===J)return-1}return L?1:-1}function Jd(L){return function(J){var oe=J.nodeName.toLowerCase();return oe==="input"&&J.type===L}}function Qd(L){return function(J){var oe=J.nodeName.toLowerCase();return(oe==="input"||oe==="button")&&J.type===L}}function nc(L){return function(J){return"form"in J?J.parentNode&&J.disabled===!1?"label"in J?"label"in J.parentNode?J.parentNode.disabled===L:J.disabled===L:J.isDisabled===L||J.isDisabled!==!L&&Kd(J)===L:J.disabled===L:"label"in J?J.disabled===L:!1}}function fs(L){return rr(function(J){return J=+J,rr(function(oe,ke){for(var he,Ie=L([],oe.length,J),$e=Ie.length;$e--;)oe[he=Ie[$e]]&&(oe[he]=!(ke[he]=oe[he]))})})}function Ml(L){return L&&typeof L.getElementsByTagName<"u"&&L}u=Qt.support={},b=Qt.isXML=function(L){var J=L&&L.namespaceURI,oe=L&&(L.ownerDocument||L).documentElement;return!Xd.test(J||oe&&oe.nodeName||"HTML")},pe=Qt.setDocument=function(L){var J,oe,ke=L?L.ownerDocument||L:Tt;return ke==Ee||ke.nodeType!==9||!ke.documentElement||(Ee=ke,ht=Ee.documentElement,Ct=!b(Ee),Tt!=Ee&&(oe=Ee.defaultView)&&oe.top!==oe&&(oe.addEventListener?oe.addEventListener("unload",ec,!1):oe.attachEvent&&oe.attachEvent("onunload",ec)),u.scope=sr(function(he){return ht.appendChild(he).appendChild(Ee.createElement("div")),typeof he.querySelectorAll<"u"&&!he.querySelectorAll(":scope fieldset div").length}),u.attributes=sr(function(he){return he.className="i",!he.getAttribute("className")}),u.getElementsByTagName=sr(function(he){return he.appendChild(Ee.createComment("")),!he.getElementsByTagName("*").length}),u.getElementsByClassName=uo.test(Ee.getElementsByClassName),u.getById=sr(function(he){return ht.appendChild(he).id=Gt,!Ee.getElementsByName||!Ee.getElementsByName(Gt).length}),u.getById?(d.filter.ID=function(he){var Ie=he.replace(Cr,kr);return function($e){return $e.getAttribute("id")===Ie}},d.find.ID=function(he,Ie){if(typeof Ie.getElementById<"u"&&Ct){var $e=Ie.getElementById(he);return $e?[$e]:[]}}):(d.filter.ID=function(he){var Ie=he.replace(Cr,kr);return function($e){var qe=typeof $e.getAttributeNode<"u"&&$e.getAttributeNode("id");return qe&&qe.value===Ie}},d.find.ID=function(he,Ie){if(typeof Ie.getElementById<"u"&&Ct){var $e,qe,et,yt=Ie.getElementById(he);if(yt){if($e=yt.getAttributeNode("id"),$e&&$e.value===he)return[yt];for(et=Ie.getElementsByName(he),qe=0;yt=et[qe++];)if($e=yt.getAttributeNode("id"),$e&&$e.value===he)return[yt]}return[]}}),d.find.TAG=u.getElementsByTagName?function(he,Ie){if(typeof Ie.getElementsByTagName<"u")return Ie.getElementsByTagName(he);if(u.qsa)return Ie.querySelectorAll(he)}:function(he,Ie){var $e,qe=[],et=0,yt=Ie.getElementsByTagName(he);if(he==="*"){for(;$e=yt[et++];)$e.nodeType===1&&qe.push($e);return qe}return yt},d.find.CLASS=u.getElementsByClassName&&function(he,Ie){if(typeof Ie.getElementsByClassName<"u"&&Ct)return Ie.getElementsByClassName(he)},Bn=[],ut=[],(u.qsa=uo.test(Ee.querySelectorAll))&&(sr(function(he){var Ie;ht.appendChild(he).innerHTML="<a id='"+Gt+"'></a><select id='"+Gt+"-\r\\' msallowcapture=''><option selected=''></option></select>",he.querySelectorAll("[msallowcapture^='']").length&&ut.push("[*^$]="+jt+`*(?:''|"")`),he.querySelectorAll("[selected]").length||ut.push("\\["+jt+"*(?:value|"+kl+")"),he.querySelectorAll("[id~="+Gt+"-]").length||ut.push("~="),Ie=Ee.createElement("input"),Ie.setAttribute("name",""),he.appendChild(Ie),he.querySelectorAll("[name='']").length||ut.push("\\["+jt+"*name"+jt+"*="+jt+`*(?:''|"")`),he.querySelectorAll(":checked").length||ut.push(":checked"),he.querySelectorAll("a#"+Gt+"+*").length||ut.push(".#.+[+~]"),he.querySelectorAll("\\\f"),ut.push("[\\r\\n\\f]")}),sr(function(he){he.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var Ie=Ee.createElement("input");Ie.setAttribute("type","hidden"),he.appendChild(Ie).setAttribute("name","D"),he.querySelectorAll("[name=d]").length&&ut.push("name"+jt+"*[*^$|!~]?="),he.querySelectorAll(":enabled").length!==2&&ut.push(":enabled",":disabled"),ht.appendChild(he).disabled=!0,he.querySelectorAll(":disabled").length!==2&&ut.push(":enabled",":disabled"),he.querySelectorAll("*,:x"),ut.push(",.*:")})),(u.matchesSelector=uo.test(Nn=ht.matches||ht.webkitMatchesSelector||ht.mozMatchesSelector||ht.oMatchesSelector||ht.msMatchesSelector))&&sr(function(he){u.disconnectedMatch=Nn.call(he,"*"),Nn.call(he,"[s!='']:x"),Bn.push("!=",Al)}),ut=ut.length&&new RegExp(ut.join("|")),Bn=Bn.length&&new RegExp(Bn.join("|")),J=uo.test(ht.compareDocumentPosition),Ni=J||uo.test(ht.contains)?function(he,Ie){var $e=he.nodeType===9?he.documentElement:he,qe=Ie&&Ie.parentNode;return he===qe||!!(qe&&qe.nodeType===1&&($e.contains?$e.contains(qe):he.compareDocumentPosition&&he.compareDocumentPosition(qe)&16))}:function(he,Ie){if(Ie){for(;Ie=Ie.parentNode;)if(Ie===he)return!0}return!1},ls=J?function(he,Ie){if(he===Ie)return Ne=!0,0;var $e=!he.compareDocumentPosition-!Ie.compareDocumentPosition;return $e||($e=(he.ownerDocument||he)==(Ie.ownerDocument||Ie)?he.compareDocumentPosition(Ie):1,$e&1||!u.sortDetached&&Ie.compareDocumentPosition(he)===$e?he==Ee||he.ownerDocument==Tt&&Ni(Tt,he)?-1:Ie==Ee||Ie.ownerDocument==Tt&&Ni(Tt,Ie)?1:me?hs(me,he)-hs(me,Ie):0:$e&4?-1:1)}:function(he,Ie){if(he===Ie)return Ne=!0,0;var $e,qe=0,et=he.parentNode,yt=Ie.parentNode,gt=[he],wt=[Ie];if(!et||!yt)return he==Ee?-1:Ie==Ee?1:et?-1:yt?1:me?hs(me,he)-hs(me,Ie):0;if(et===yt)return tc(he,Ie);for($e=he;$e=$e.parentNode;)gt.unshift($e);for($e=Ie;$e=$e.parentNode;)wt.unshift($e);for(;gt[qe]===wt[qe];)qe++;return qe?tc(gt[qe],wt[qe]):gt[qe]==Tt?-1:wt[qe]==Tt?1:0}),Ee},Qt.matches=function(L,J){return Qt(L,null,null,J)},Qt.matchesSelector=function(L,J){if(pe(L),u.matchesSelector&&Ct&&!Di[J+" "]&&(!Bn||!Bn.test(J))&&(!ut||!ut.test(J)))try{var oe=Nn.call(L,J);if(oe||u.disconnectedMatch||L.document&&L.document.nodeType!==11)return oe}catch{Di(J,!0)}return Qt(J,Ee,null,[L]).length>0},Qt.contains=function(L,J){return(L.ownerDocument||L)!=Ee&&pe(L),Ni(L,J)},Qt.attr=function(L,J){(L.ownerDocument||L)!=Ee&&pe(L);var oe=d.attrHandle[J.toLowerCase()],ke=oe&&cs.call(d.attrHandle,J.toLowerCase())?oe(L,J,!Ct):void 0;return ke!==void 0?ke:u.attributes||!Ct?L.getAttribute(J):(ke=L.getAttributeNode(J))&&ke.specified?ke.value:null},Qt.escape=function(L){return(L+"").replace(J2,Q2)},Qt.error=function(L){throw new Error("Syntax error, unrecognized expression: "+L)},Qt.uniqueSort=function(L){var J,oe=[],ke=0,he=0;if(Ne=!u.detectDuplicates,me=!u.sortStable&&L.slice(0),L.sort(ls),Ne){for(;J=L[he++];)J===L[he]&&(ke=oe.push(he));for(;ke--;)L.splice(oe[ke],1)}return me=null,L},v=Qt.getText=function(L){var J,oe="",ke=0,he=L.nodeType;if(he){if(he===1||he===9||he===11){if(typeof L.textContent=="string")return L.textContent;for(L=L.firstChild;L;L=L.nextSibling)oe+=v(L)}else if(he===3||he===4)return L.nodeValue}else for(;J=L[ke++];)oe+=v(J);return oe},d=Qt.selectors={cacheLength:50,createPseudo:rr,match:pa,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(L){return L[1]=L[1].replace(Cr,kr),L[3]=(L[3]||L[4]||L[5]||"").replace(Cr,kr),L[2]==="~="&&(L[3]=" "+L[3]+" "),L.slice(0,4)},CHILD:function(L){return L[1]=L[1].toLowerCase(),L[1].slice(0,3)==="nth"?(L[3]||Qt.error(L[0]),L[4]=+(L[4]?L[5]+(L[6]||1):2*(L[3]==="even"||L[3]==="odd")),L[5]=+(L[7]+L[8]||L[3]==="odd")):L[3]&&Qt.error(L[0]),L},PSEUDO:function(L){var J,oe=!L[6]&&L[2];return pa.CHILD.test(L[0])?null:(L[3]?L[2]=L[4]||L[5]||"":oe&&jd.test(oe)&&(J=I(oe,!0))&&(J=oe.indexOf(")",oe.length-J)-oe.length)&&(L[0]=L[0].slice(0,J),L[2]=oe.slice(0,J)),L.slice(0,3))}},filter:{TAG:function(L){var J=L.replace(Cr,kr).toLowerCase();return L==="*"?function(){return!0}:function(oe){return oe.nodeName&&oe.nodeName.toLowerCase()===J}},CLASS:function(L){var J=bn[L+" "];return J||(J=new RegExp("(^|"+jt+")"+L+"("+jt+"|$)"))&&bn(L,function(oe){return J.test(typeof oe.className=="string"&&oe.className||typeof oe.getAttribute<"u"&&oe.getAttribute("class")||"")})},ATTR:function(L,J,oe){return function(ke){var he=Qt.attr(ke,L);return he==null?J==="!=":J?(he+="",J==="="?he===oe:J==="!="?he!==oe:J==="^="?oe&&he.indexOf(oe)===0:J==="*="?oe&&he.indexOf(oe)>-1:J==="$="?oe&&he.slice(-oe.length)===oe:J==="~="?(" "+he.replace(Hd," ")+" ").indexOf(oe)>-1:J==="|="?he===oe||he.slice(0,oe.length+1)===oe+"-":!1):!0}},CHILD:function(L,J,oe,ke,he){var Ie=L.slice(0,3)!=="nth",$e=L.slice(-4)!=="last",qe=J==="of-type";return ke===1&&he===0?function(et){return!!et.parentNode}:function(et,yt,gt){var wt,Mt,en,bt,Wn,ei,Li=Ie!==$e?"nextSibling":"previousSibling",mn=et.parentNode,fo=qe&&et.nodeName.toLowerCase(),po=!gt&&!qe,Pi=!1;if(mn){if(Ie){for(;Li;){for(bt=et;bt=bt[Li];)if(qe?bt.nodeName.toLowerCase()===fo:bt.nodeType===1)return!1;ei=Li=L==="only"&&!ei&&"nextSibling"}return!0}if(ei=[$e?mn.firstChild:mn.lastChild],$e&&po){for(bt=mn,en=bt[Gt]||(bt[Gt]={}),Mt=en[bt.uniqueID]||(en[bt.uniqueID]={}),wt=Mt[L]||[],Wn=wt[0]===Ei&&wt[1],Pi=Wn&&wt[2],bt=Wn&&mn.childNodes[Wn];bt=++Wn&&bt&&bt[Li]||(Pi=Wn=0)||ei.pop();)if(bt.nodeType===1&&++Pi&&bt===et){Mt[L]=[Ei,Wn,Pi];break}}else if(po&&(bt=et,en=bt[Gt]||(bt[Gt]={}),Mt=en[bt.uniqueID]||(en[bt.uniqueID]={}),wt=Mt[L]||[],Wn=wt[0]===Ei&&wt[1],Pi=Wn),Pi===!1)for(;(bt=++Wn&&bt&&bt[Li]||(Pi=Wn=0)||ei.pop())&&!((qe?bt.nodeName.toLowerCase()===fo:bt.nodeType===1)&&++Pi&&(po&&(en=bt[Gt]||(bt[Gt]={}),Mt=en[bt.uniqueID]||(en[bt.uniqueID]={}),Mt[L]=[Ei,Pi]),bt===et)););return Pi-=he,Pi===ke||Pi%ke===0&&Pi/ke>=0}}},PSEUDO:function(L,J){var oe,ke=d.pseudos[L]||d.setFilters[L.toLowerCase()]||Qt.error("unsupported pseudo: "+L);return ke[Gt]?ke(J):ke.length>1?(oe=[L,L,"",J],d.setFilters.hasOwnProperty(L.toLowerCase())?rr(function(he,Ie){for(var $e,qe=ke(he,J),et=qe.length;et--;)$e=hs(he,qe[et]),he[$e]=!(Ie[$e]=qe[et])}):function(he){return ke(he,0,oe)}):ke}},pseudos:{not:rr(function(L){var J=[],oe=[],ke=U(L.replace(da,"$1"));return ke[Gt]?rr(function(he,Ie,$e,qe){for(var et,yt=ke(he,null,qe,[]),gt=he.length;gt--;)(et=yt[gt])&&(he[gt]=!(Ie[gt]=et))}):function(he,Ie,$e){return J[0]=he,ke(J,null,$e,oe),J[0]=null,!oe.pop()}}),has:rr(function(L){return function(J){return Qt(L,J).length>0}}),contains:rr(function(L){return L=L.replace(Cr,kr),function(J){return(J.textContent||v(J)).indexOf(L)>-1}}),lang:rr(function(L){return Yd.test(L||"")||Qt.error("unsupported lang: "+L),L=L.replace(Cr,kr).toLowerCase(),function(J){var oe;do if(oe=Ct?J.lang:J.getAttribute("xml:lang")||J.getAttribute("lang"))return oe=oe.toLowerCase(),oe===L||oe.indexOf(L+"-")===0;while((J=J.parentNode)&&J.nodeType===1);return!1}}),target:function(L){var J=a.location&&a.location.hash;return J&&J.slice(1)===L.id},root:function(L){return L===ht},focus:function(L){return L===Ee.activeElement&&(!Ee.hasFocus||Ee.hasFocus())&&!!(L.type||L.href||~L.tabIndex)},enabled:nc(!1),disabled:nc(!0),checked:function(L){var J=L.nodeName.toLowerCase();return J==="input"&&!!L.checked||J==="option"&&!!L.selected},selected:function(L){return L.parentNode&&L.parentNode.selectedIndex,L.selected===!0},empty:function(L){for(L=L.firstChild;L;L=L.nextSibling)if(L.nodeType<6)return!1;return!0},parent:function(L){return!d.pseudos.empty(L)},header:function(L){return Zd.test(L.nodeName)},input:function(L){return qd.test(L.nodeName)},button:function(L){var J=L.nodeName.toLowerCase();return J==="input"&&L.type==="button"||J==="button"},text:function(L){var J;return L.nodeName.toLowerCase()==="input"&&L.type==="text"&&((J=L.getAttribute("type"))==null||J.toLowerCase()==="text")},first:fs(function(){return[0]}),last:fs(function(L,J){return[J-1]}),eq:fs(function(L,J,oe){return[oe<0?oe+J:oe]}),even:fs(function(L,J){for(var oe=0;oe<J;oe+=2)L.push(oe);return L}),odd:fs(function(L,J){for(var oe=1;oe<J;oe+=2)L.push(oe);return L}),lt:fs(function(L,J,oe){for(var ke=oe<0?oe+J:oe>J?J:oe;--ke>=0;)L.push(ke);return L}),gt:fs(function(L,J,oe){for(var ke=oe<0?oe+J:oe;++ke<J;)L.push(ke);return L})}},d.pseudos.nth=d.pseudos.eq;for(c in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[c]=Jd(c);for(c in{submit:!0,reset:!0})d.pseudos[c]=Qd(c);function ic(){}ic.prototype=d.filters=d.pseudos,d.setFilters=new ic,I=Qt.tokenize=function(L,J){var oe,ke,he,Ie,$e,qe,et,yt=ho[L+" "];if(yt)return J?0:yt.slice(0);for($e=L,qe=[],et=d.preFilter;$e;){(!oe||(ke=Vd.exec($e)))&&(ke&&($e=$e.slice(ke[0].length)||$e),qe.push(he=[])),oe=!1,(ke=K2.exec($e))&&(oe=ke.shift(),he.push({value:oe,type:ke[0].replace(da," ")}),$e=$e.slice(oe.length));for(Ie in d.filter)(ke=pa[Ie].exec($e))&&(!et[Ie]||(ke=et[Ie](ke)))&&(oe=ke.shift(),he.push({value:oe,type:Ie,matches:ke}),$e=$e.slice(oe.length));if(!oe)break}return J?$e.length:$e?Qt.error(L):ho(L,qe).slice(0)};function ma(L){for(var J=0,oe=L.length,ke="";J<oe;J++)ke+=L[J].value;return ke}function _a(L,J,oe){var ke=J.dir,he=J.next,Ie=he||ke,$e=oe&&Ie==="parentNode",qe=$t++;return J.first?function(et,yt,gt){for(;et=et[ke];)if(et.nodeType===1||$e)return L(et,yt,gt);return!1}:function(et,yt,gt){var wt,Mt,en,bt=[Ei,qe];if(gt){for(;et=et[ke];)if((et.nodeType===1||$e)&&L(et,yt,gt))return!0}else for(;et=et[ke];)if(et.nodeType===1||$e)if(en=et[Gt]||(et[Gt]={}),Mt=en[et.uniqueID]||(en[et.uniqueID]={}),he&&he===et.nodeName.toLowerCase())et=et[ke]||et;else{if((wt=Mt[Ie])&&wt[0]===Ei&&wt[1]===qe)return bt[2]=wt[2];if(Mt[Ie]=bt,bt[2]=L(et,yt,gt))return!0}return!1}}function zl(L){return L.length>1?function(J,oe,ke){for(var he=L.length;he--;)if(!L[he](J,oe,ke))return!1;return!0}:L[0]}function e0(L,J,oe){for(var ke=0,he=J.length;ke<he;ke++)Qt(L,J[ke],oe);return oe}function va(L,J,oe,ke,he){for(var Ie,$e=[],qe=0,et=L.length,yt=J!=null;qe<et;qe++)(Ie=L[qe])&&(!oe||oe(Ie,ke,he))&&($e.push(Ie),yt&&J.push(qe));return $e}function Rl(L,J,oe,ke,he,Ie){return ke&&!ke[Gt]&&(ke=Rl(ke)),he&&!he[Gt]&&(he=Rl(he,Ie)),rr(function($e,qe,et,yt){var gt,wt,Mt,en=[],bt=[],Wn=qe.length,ei=$e||e0(J||"*",et.nodeType?[et]:et,[]),Li=L&&($e||!J)?va(ei,en,L,et,yt):ei,mn=oe?he||($e?L:Wn||ke)?[]:qe:Li;if(oe&&oe(Li,mn,et,yt),ke)for(gt=va(mn,bt),ke(gt,[],et,yt),wt=gt.length;wt--;)(Mt=gt[wt])&&(mn[bt[wt]]=!(Li[bt[wt]]=Mt));if($e){if(he||L){if(he){for(gt=[],wt=mn.length;wt--;)(Mt=mn[wt])&&gt.push(Li[wt]=Mt);he(null,mn=[],gt,yt)}for(wt=mn.length;wt--;)(Mt=mn[wt])&&(gt=he?hs($e,Mt):en[wt])>-1&&($e[gt]=!(qe[gt]=Mt))}}else mn=va(mn===qe?mn.splice(Wn,mn.length):mn),he?he(null,qe,mn,yt):Ur.apply(qe,mn)})}function Fl(L){for(var J,oe,ke,he=L.length,Ie=d.relative[L[0].type],$e=Ie||d.relative[" "],qe=Ie?1:0,et=_a(function(wt){return wt===J},$e,!0),yt=_a(function(wt){return hs(J,wt)>-1},$e,!0),gt=[function(wt,Mt,en){var bt=!Ie&&(en||Mt!==se)||((J=Mt).nodeType?et(wt,Mt,en):yt(wt,Mt,en));return J=null,bt}];qe<he;qe++)if(oe=d.relative[L[qe].type])gt=[_a(zl(gt),oe)];else{if(oe=d.filter[L[qe].type].apply(null,L[qe].matches),oe[Gt]){for(ke=++qe;ke<he&&!d.relative[L[ke].type];ke++);return Rl(qe>1&&zl(gt),qe>1&&ma(L.slice(0,qe-1).concat({value:L[qe-2].type===" "?"*":""})).replace(da,"$1"),oe,qe<ke&&Fl(L.slice(qe,ke)),ke<he&&Fl(L=L.slice(ke)),ke<he&&ma(L))}gt.push(oe)}return zl(gt)}function t0(L,J){var oe=J.length>0,ke=L.length>0,he=function(Ie,$e,qe,et,yt){var gt,wt,Mt,en=0,bt="0",Wn=Ie&&[],ei=[],Li=se,mn=Ie||ke&&d.find.TAG("*",yt),fo=Ei+=Li==null?1:Math.random()||.1,po=mn.length;for(yt&&(se=$e==Ee||$e||yt);bt!==po&&(gt=mn[bt])!=null;bt++){if(ke&&gt){for(wt=0,!$e&&gt.ownerDocument!=Ee&&(pe(gt),qe=!Ct);Mt=L[wt++];)if(Mt(gt,$e||Ee,qe)){et.push(gt);break}yt&&(Ei=fo)}oe&&((gt=!Mt&&gt)&&en--,Ie&&Wn.push(gt))}if(en+=bt,oe&&bt!==en){for(wt=0;Mt=J[wt++];)Mt(Wn,ei,$e,qe);if(Ie){if(en>0)for(;bt--;)Wn[bt]||ei[bt]||(ei[bt]=Vr.call(et));ei=va(ei)}Ur.apply(et,ei),yt&&!Ie&&ei.length>0&&en+J.length>1&&Qt.uniqueSort(et)}return yt&&(Ei=fo,se=Li),Wn};return oe?rr(he):he}return U=Qt.compile=function(L,J){var oe,ke=[],he=[],Ie=fa[L+" "];if(!Ie){for(J||(J=I(L)),oe=J.length;oe--;)Ie=Fl(J[oe]),Ie[Gt]?ke.push(Ie):he.push(Ie);Ie=fa(L,t0(he,ke)),Ie.selector=L}return Ie},Z=Qt.select=function(L,J,oe,ke){var he,Ie,$e,qe,et,yt=typeof L=="function"&&L,gt=!ke&&I(L=yt.selector||L);if(oe=oe||[],gt.length===1){if(Ie=gt[0]=gt[0].slice(0),Ie.length>2&&($e=Ie[0]).type==="ID"&&J.nodeType===9&&Ct&&d.relative[Ie[1].type]){if(J=(d.find.ID($e.matches[0].replace(Cr,kr),J)||[])[0],J)yt&&(J=J.parentNode);else return oe;L=L.slice(Ie.shift().value.length)}for(he=pa.needsContext.test(L)?0:Ie.length;he--&&($e=Ie[he],!d.relative[qe=$e.type]);)if((et=d.find[qe])&&(ke=et($e.matches[0].replace(Cr,kr),Il.test(Ie[0].type)&&Ml(J.parentNode)||J))){if(Ie.splice(he,1),L=ke.length&&ma(Ie),!L)return Ur.apply(oe,ke),oe;break}}return(yt||U(L,gt))(ke,J,!Ct,oe,!J||Il.test(L)&&Ml(J.parentNode)||J),oe},u.sortStable=Gt.split("").sort(ls).join("")===Gt,u.detectDuplicates=!!Ne,pe(),u.sortDetached=sr(function(L){return L.compareDocumentPosition(Ee.createElement("fieldset"))&1}),sr(function(L){return L.innerHTML="<a href='#'></a>",L.firstChild.getAttribute("href")==="#"})||Ol("type|href|height|width",function(L,J,oe){if(!oe)return L.getAttribute(J,J.toLowerCase()==="type"?1:2)}),(!u.attributes||!sr(function(L){return L.innerHTML="<input/>",L.firstChild.setAttribute("value",""),L.firstChild.getAttribute("value")===""}))&&Ol("value",function(L,J,oe){if(!oe&&L.nodeName.toLowerCase()==="input")return L.defaultValue}),sr(function(L){return L.getAttribute("disabled")==null})||Ol(kl,function(L,J,oe){var ke;if(!oe)return L[J]===!0?J.toLowerCase():(ke=L.getAttributeNode(J))&&ke.specified?ke.value:null}),Qt}(e);g.find=re,g.expr=re.selectors,g.expr[":"]=g.expr.pseudos,g.uniqueSort=g.unique=re.uniqueSort,g.text=re.getText,g.isXMLDoc=re.isXML,g.contains=re.contains,g.escapeSelector=re.escape;var _e=function(a,c,u){for(var d=[],v=u!==void 0;(a=a[c])&&a.nodeType!==9;)if(a.nodeType===1){if(v&&g(a).is(u))break;d.push(a)}return d},Te=function(a,c){for(var u=[];a;a=a.nextSibling)a.nodeType===1&&a!==c&&u.push(a);return u},ye=g.expr.match.needsContext;function le(a,c){return a.nodeName&&a.nodeName.toLowerCase()===c.toLowerCase()}var Pe=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Le(a,c,u){return F(c)?g.grep(a,function(d,v){return!!c.call(d,v,d)!==u}):c.nodeType?g.grep(a,function(d){return d===c!==u}):typeof c!="string"?g.grep(a,function(d){return h.call(c,d)>-1!==u}):g.filter(c,a,u)}g.filter=function(a,c,u){var d=c[0];return u&&(a=":not("+a+")"),c.length===1&&d.nodeType===1?g.find.matchesSelector(d,a)?[d]:[]:g.find.matches(a,g.grep(c,function(v){return v.nodeType===1}))},g.fn.extend({find:function(a){var c,u,d=this.length,v=this;if(typeof a!="string")return this.pushStack(g(a).filter(function(){for(c=0;c<d;c++)if(g.contains(v[c],this))return!0}));for(u=this.pushStack([]),c=0;c<d;c++)g.find(a,v[c],u);return d>1?g.uniqueSort(u):u},filter:function(a){return this.pushStack(Le(this,a||[],!1))},not:function(a){return this.pushStack(Le(this,a||[],!0))},is:function(a){return!!Le(this,typeof a=="string"&&ye.test(a)?g(a):a||[],!1).length}});var Ze,je=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Je=g.fn.init=function(a,c,u){var d,v;if(!a)return this;if(u=u||Ze,typeof a=="string")if(a[0]==="<"&&a[a.length-1]===">"&&a.length>=3?d=[null,a,null]:d=je.exec(a),d&&(d[1]||!c))if(d[1]){if(c=c instanceof g?c[0]:c,g.merge(this,g.parseHTML(d[1],c&&c.nodeType?c.ownerDocument||c:G,!0)),Pe.test(d[1])&&g.isPlainObject(c))for(d in c)F(this[d])?this[d](c[d]):this.attr(d,c[d]);return this}else return v=G.getElementById(d[2]),v&&(this[0]=v,this.length=1),this;else return!c||c.jquery?(c||u).find(a):this.constructor(c).find(a);else{if(a.nodeType)return this[0]=a,this.length=1,this;if(F(a))return u.ready!==void 0?u.ready(a):a(g)}return g.makeArray(a,this)};Je.prototype=g.fn,Ze=g(G);var Ye=/^(?:parents|prev(?:Until|All))/,it={children:!0,contents:!0,next:!0,prev:!0};g.fn.extend({has:function(a){var c=g(a,this),u=c.length;return this.filter(function(){for(var d=0;d<u;d++)if(g.contains(this,c[d]))return!0})},closest:function(a,c){var u,d=0,v=this.length,b=[],I=typeof a!="string"&&g(a);if(!ye.test(a)){for(;d<v;d++)for(u=this[d];u&&u!==c;u=u.parentNode)if(u.nodeType<11&&(I?I.index(u)>-1:u.nodeType===1&&g.find.matchesSelector(u,a))){b.push(u);break}}return this.pushStack(b.length>1?g.uniqueSort(b):b)},index:function(a){return a?typeof a=="string"?h.call(g(a),this[0]):h.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,c){return this.pushStack(g.uniqueSort(g.merge(this.get(),g(a,c))))},addBack:function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))}});function ft(a,c){for(;(a=a[c])&&a.nodeType!==1;);return a}g.each({parent:function(a){var c=a.parentNode;return c&&c.nodeType!==11?c:null},parents:function(a){return _e(a,"parentNode")},parentsUntil:function(a,c,u){return _e(a,"parentNode",u)},next:function(a){return ft(a,"nextSibling")},prev:function(a){return ft(a,"previousSibling")},nextAll:function(a){return _e(a,"nextSibling")},prevAll:function(a){return _e(a,"previousSibling")},nextUntil:function(a,c,u){return _e(a,"nextSibling",u)},prevUntil:function(a,c,u){return _e(a,"previousSibling",u)},siblings:function(a){return Te((a.parentNode||{}).firstChild,a)},children:function(a){return Te(a.firstChild)},contents:function(a){return a.contentDocument!=null&&r(a.contentDocument)?a.contentDocument:(le(a,"template")&&(a=a.content||a),g.merge([],a.childNodes))}},function(a,c){g.fn[a]=function(u,d){var v=g.map(this,c,u);return a.slice(-5)!=="Until"&&(d=u),d&&typeof d=="string"&&(v=g.filter(d,v)),this.length>1&&(it[a]||g.uniqueSort(v),Ye.test(a)&&v.reverse()),this.pushStack(v)}});var z=/[^\x20\t\r\n\f]+/g;function M(a){var c={};return g.each(a.match(z)||[],function(u,d){c[d]=!0}),c}g.Callbacks=function(a){a=typeof a=="string"?M(a):g.extend({},a);var c,u,d,v,b=[],I=[],U=-1,Z=function(){for(v=v||a.once,d=c=!0;I.length;U=-1)for(u=I.shift();++U<b.length;)b[U].apply(u[0],u[1])===!1&&a.stopOnFalse&&(U=b.length,u=!1);a.memory||(u=!1),c=!1,v&&(u?b=[]:b="")},se={add:function(){return b&&(u&&!c&&(U=b.length-1,I.push(u)),function me(Ne){g.each(Ne,function(pe,Ee){F(Ee)?(!a.unique||!se.has(Ee))&&b.push(Ee):Ee&&Ee.length&&ae(Ee)!=="string"&&me(Ee)})}(arguments),u&&!c&&Z()),this},remove:function(){return g.each(arguments,function(me,Ne){for(var pe;(pe=g.inArray(Ne,b,pe))>-1;)b.splice(pe,1),pe<=U&&U--}),this},has:function(me){return me?g.inArray(me,b)>-1:b.length>0},empty:function(){return b&&(b=[]),this},disable:function(){return v=I=[],b=u="",this},disabled:function(){return!b},lock:function(){return v=I=[],!u&&!c&&(b=u=""),this},locked:function(){return!!v},fireWith:function(me,Ne){return v||(Ne=Ne||[],Ne=[me,Ne.slice?Ne.slice():Ne],I.push(Ne),c||Z()),this},fire:function(){return se.fireWith(this,arguments),this},fired:function(){return!!d}};return se};function k(a){return a}function P(a){throw a}function B(a,c,u,d){var v;try{a&&F(v=a.promise)?v.call(a).done(c).fail(u):a&&F(v=a.then)?v.call(a,c,u):c.apply(void 0,[a].slice(d))}catch(b){u.apply(void 0,[b])}}g.extend({Deferred:function(a){var c=[["notify","progress",g.Callbacks("memory"),g.Callbacks("memory"),2],["resolve","done",g.Callbacks("once memory"),g.Callbacks("once memory"),0,"resolved"],["reject","fail",g.Callbacks("once memory"),g.Callbacks("once memory"),1,"rejected"]],u="pending",d={state:function(){return u},always:function(){return v.done(arguments).fail(arguments),this},catch:function(b){return d.then(null,b)},pipe:function(){var b=arguments;return g.Deferred(function(I){g.each(c,function(U,Z){var se=F(b[Z[4]])&&b[Z[4]];v[Z[1]](function(){var me=se&&se.apply(this,arguments);me&&F(me.promise)?me.promise().progress(I.notify).done(I.resolve).fail(I.reject):I[Z[0]+"With"](this,se?[me]:arguments)})}),b=null}).promise()},then:function(b,I,U){var Z=0;function se(me,Ne,pe,Ee){return function(){var ht=this,Ct=arguments,ut=function(){var Nn,Ni;if(!(me<Z)){if(Nn=pe.apply(ht,Ct),Nn===Ne.promise())throw new TypeError("Thenable self-resolution");Ni=Nn&&(typeof Nn=="object"||typeof Nn=="function")&&Nn.then,F(Ni)?Ee?Ni.call(Nn,se(Z,Ne,k,Ee),se(Z,Ne,P,Ee)):(Z++,Ni.call(Nn,se(Z,Ne,k,Ee),se(Z,Ne,P,Ee),se(Z,Ne,k,Ne.notifyWith))):(pe!==k&&(ht=void 0,Ct=[Nn]),(Ee||Ne.resolveWith)(ht,Ct))}},Bn=Ee?ut:function(){try{ut()}catch(Nn){g.Deferred.exceptionHook&&g.Deferred.exceptionHook(Nn,Bn.stackTrace),me+1>=Z&&(pe!==P&&(ht=void 0,Ct=[Nn]),Ne.rejectWith(ht,Ct))}};me?Bn():(g.Deferred.getStackHook&&(Bn.stackTrace=g.Deferred.getStackHook()),e.setTimeout(Bn))}}return g.Deferred(function(me){c[0][3].add(se(0,me,F(U)?U:k,me.notifyWith)),c[1][3].add(se(0,me,F(b)?b:k)),c[2][3].add(se(0,me,F(I)?I:P))}).promise()},promise:function(b){return b!=null?g.extend(b,d):d}},v={};return g.each(c,function(b,I){var U=I[2],Z=I[5];d[I[1]]=U.add,Z&&U.add(function(){u=Z},c[3-b][2].disable,c[3-b][3].disable,c[0][2].lock,c[0][3].lock),U.add(I[3].fire),v[I[0]]=function(){return v[I[0]+"With"](this===v?void 0:this,arguments),this},v[I[0]+"With"]=U.fireWith}),d.promise(v),a&&a.call(v,v),v},when:function(a){var c=arguments.length,u=c,d=Array(u),v=s.call(arguments),b=g.Deferred(),I=function(U){return function(Z){d[U]=this,v[U]=arguments.length>1?s.call(arguments):Z,--c||b.resolveWith(d,v)}};if(c<=1&&(B(a,b.done(I(u)).resolve,b.reject,!c),b.state()==="pending"||F(v[u]&&v[u].then)))return b.then();for(;u--;)B(v[u],I(u),b.reject);return b.promise()}});var te=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;g.Deferred.exceptionHook=function(a,c){e.console&&e.console.warn&&a&&te.test(a.name)&&e.console.warn("jQuery.Deferred exception: "+a.message,a.stack,c)},g.readyException=function(a){e.setTimeout(function(){throw a})};var ee=g.Deferred();g.fn.ready=function(a){return ee.then(a).catch(function(c){g.readyException(c)}),this},g.extend({isReady:!1,readyWait:1,ready:function(a){(a===!0?--g.readyWait:g.isReady)||(g.isReady=!0,!(a!==!0&&--g.readyWait>0)&&ee.resolveWith(G,[g]))}}),g.ready.then=ee.then;function ge(){G.removeEventListener("DOMContentLoaded",ge),e.removeEventListener("load",ge),g.ready()}G.readyState==="complete"||G.readyState!=="loading"&&!G.documentElement.doScroll?e.setTimeout(g.ready):(G.addEventListener("DOMContentLoaded",ge),e.addEventListener("load",ge));var ce=function(a,c,u,d,v,b,I){var U=0,Z=a.length,se=u==null;if(ae(u)==="object"){v=!0;for(U in u)ce(a,c,U,u[U],!0,b,I)}else if(d!==void 0&&(v=!0,F(d)||(I=!0),se&&(I?(c.call(a,d),c=null):(se=c,c=function(me,Ne,pe){return se.call(g(me),pe)})),c))for(;U<Z;U++)c(a[U],u,I?d:d.call(a[U],U,c(a[U],u)));return v?a:se?c.call(a):Z?c(a[0],u):b},Se=/^-ms-/,Ve=/-([a-z])/g;function Ge(a,c){return c.toUpperCase()}function rt(a){return a.replace(Se,"ms-").replace(Ve,Ge)}var S=function(a){return a.nodeType===1||a.nodeType===9||!+a.nodeType};function R(){this.expando=g.expando+R.uid++}R.uid=1,R.prototype={cache:function(a){var c=a[this.expando];return c||(c={},S(a)&&(a.nodeType?a[this.expando]=c:Object.defineProperty(a,this.expando,{value:c,configurable:!0}))),c},set:function(a,c,u){var d,v=this.cache(a);if(typeof c=="string")v[rt(c)]=u;else for(d in c)v[rt(d)]=c[d];return v},get:function(a,c){return c===void 0?this.cache(a):a[this.expando]&&a[this.expando][rt(c)]},access:function(a,c,u){return c===void 0||c&&typeof c=="string"&&u===void 0?this.get(a,c):(this.set(a,c,u),u!==void 0?u:c)},remove:function(a,c){var u,d=a[this.expando];if(d!==void 0){if(c!==void 0)for(Array.isArray(c)?c=c.map(rt):(c=rt(c),c=c in d?[c]:c.match(z)||[]),u=c.length;u--;)delete d[c[u]];(c===void 0||g.isEmptyObject(d))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var c=a[this.expando];return c!==void 0&&!g.isEmptyObject(c)}};var $=new R,Q=new R,ue=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,fe=/[A-Z]/g;function Me(a){return a==="true"?!0:a==="false"?!1:a==="null"?null:a===+a+""?+a:ue.test(a)?JSON.parse(a):a}function tt(a,c,u){var d;if(u===void 0&&a.nodeType===1)if(d="data-"+c.replace(fe,"-$&").toLowerCase(),u=a.getAttribute(d),typeof u=="string"){try{u=Me(u)}catch{}Q.set(a,c,u)}else u=void 0;return u}g.extend({hasData:function(a){return Q.hasData(a)||$.hasData(a)},data:function(a,c,u){return Q.access(a,c,u)},removeData:function(a,c){Q.remove(a,c)},_data:function(a,c,u){return $.access(a,c,u)},_removeData:function(a,c){$.remove(a,c)}}),g.fn.extend({data:function(a,c){var u,d,v,b=this[0],I=b&&b.attributes;if(a===void 0){if(this.length&&(v=Q.get(b),b.nodeType===1&&!$.get(b,"hasDataAttrs"))){for(u=I.length;u--;)I[u]&&(d=I[u].name,d.indexOf("data-")===0&&(d=rt(d.slice(5)),tt(b,d,v[d])));$.set(b,"hasDataAttrs",!0)}return v}return typeof a=="object"?this.each(function(){Q.set(this,a)}):ce(this,function(U){var Z;if(b&&U===void 0)return Z=Q.get(b,a),Z!==void 0||(Z=tt(b,a),Z!==void 0)?Z:void 0;this.each(function(){Q.set(this,a,U)})},null,c,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){Q.remove(this,a)})}}),g.extend({queue:function(a,c,u){var d;if(a)return c=(c||"fx")+"queue",d=$.get(a,c),u&&(!d||Array.isArray(u)?d=$.access(a,c,g.makeArray(u)):d.push(u)),d||[]},dequeue:function(a,c){c=c||"fx";var u=g.queue(a,c),d=u.length,v=u.shift(),b=g._queueHooks(a,c),I=function(){g.dequeue(a,c)};v==="inprogress"&&(v=u.shift(),d--),v&&(c==="fx"&&u.unshift("inprogress"),delete b.stop,v.call(a,I,b)),!d&&b&&b.empty.fire()},_queueHooks:function(a,c){var u=c+"queueHooks";return $.get(a,u)||$.access(a,u,{empty:g.Callbacks("once memory").add(function(){$.remove(a,[c+"queue",u])})})}}),g.fn.extend({queue:function(a,c){var u=2;return typeof a!="string"&&(c=a,a="fx",u--),arguments.length<u?g.queue(this[0],a):c===void 0?this:this.each(function(){var d=g.queue(this,a,c);g._queueHooks(this,a),a==="fx"&&d[0]!=="inprogress"&&g.dequeue(this,a)})},dequeue:function(a){return this.each(function(){g.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var u,d=1,v=g.Deferred(),b=this,I=this.length,U=function(){--d||v.resolveWith(b,[b])};for(typeof a!="string"&&(c=a,a=void 0),a=a||"fx";I--;)u=$.get(b[I],a+"queueHooks"),u&&u.empty&&(d++,u.empty.add(U));return U(),v.promise(c)}});var Ke=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,at=new RegExp("^(?:([+-])=|)("+Ke+")([a-z%]*)$","i"),mt=["Top","Right","Bottom","Left"],lt=G.documentElement,It=function(a){return g.contains(a.ownerDocument,a)},sn={composed:!0};lt.getRootNode&&(It=function(a){return g.contains(a.ownerDocument,a)||a.getRootNode(sn)===a.ownerDocument});var ln=function(a,c){return a=c||a,a.style.display==="none"||a.style.display===""&&It(a)&&g.css(a,"display")==="none"};function Ft(a,c,u,d){var v,b,I=20,U=d?function(){return d.cur()}:function(){return g.css(a,c,"")},Z=U(),se=u&&u[3]||(g.cssNumber[c]?"":"px"),me=a.nodeType&&(g.cssNumber[c]||se!=="px"&&+Z)&&at.exec(g.css(a,c));if(me&&me[3]!==se){for(Z=Z/2,se=se||me[3],me=+Z||1;I--;)g.style(a,c,me+se),(1-b)*(1-(b=U()/Z||.5))<=0&&(I=0),me=me/b;me=me*2,g.style(a,c,me+se),u=u||[]}return u&&(me=+me||+Z||0,v=u[1]?me+(u[1]+1)*u[2]:+u[2],d&&(d.unit=se,d.start=me,d.end=v)),v}var Dt={};function un(a){var c,u=a.ownerDocument,d=a.nodeName,v=Dt[d];return v||(c=u.body.appendChild(u.createElement(d)),v=g.css(c,"display"),c.parentNode.removeChild(c),v==="none"&&(v="block"),Dt[d]=v,v)}function fn(a,c){for(var u,d,v=[],b=0,I=a.length;b<I;b++)d=a[b],d.style&&(u=d.style.display,c?(u==="none"&&(v[b]=$.get(d,"display")||null,v[b]||(d.style.display="")),d.style.display===""&&ln(d)&&(v[b]=un(d))):u!=="none"&&(v[b]="none",$.set(d,"display",u)));for(b=0;b<I;b++)v[b]!=null&&(a[b].style.display=v[b]);return a}g.fn.extend({show:function(){return fn(this,!0)},hide:function(){return fn(this)},toggle:function(a){return typeof a=="boolean"?a?this.show():this.hide():this.each(function(){ln(this)?g(this).show():g(this).hide()})}});var kn=/^(?:checkbox|radio)$/i,Lt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,En=/^$|^module$|\/(?:java|ecma)script/i;(function(){var a=G.createDocumentFragment(),c=a.appendChild(G.createElement("div")),u=G.createElement("input");u.setAttribute("type","radio"),u.setAttribute("checked","checked"),u.setAttribute("name","t"),c.appendChild(u),N.checkClone=c.cloneNode(!0).cloneNode(!0).lastChild.checked,c.innerHTML="<textarea>x</textarea>",N.noCloneChecked=!!c.cloneNode(!0).lastChild.defaultValue,c.innerHTML="<option></option>",N.option=!!c.lastChild})();var Jt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Jt.tbody=Jt.tfoot=Jt.colgroup=Jt.caption=Jt.thead,Jt.th=Jt.td,N.option||(Jt.optgroup=Jt.option=[1,"<select multiple='multiple'>","</select>"]);function Pt(a,c){var u;return typeof a.getElementsByTagName<"u"?u=a.getElementsByTagName(c||"*"):typeof a.querySelectorAll<"u"?u=a.querySelectorAll(c||"*"):u=[],c===void 0||c&&le(a,c)?g.merge([a],u):u}function vi(a,c){for(var u=0,d=a.length;u<d;u++)$.set(a[u],"globalEval",!c||$.get(c[u],"globalEval"))}var cn=/<|&#?\w+;/;function Gn(a,c,u,d,v){for(var b,I,U,Z,se,me,Ne=c.createDocumentFragment(),pe=[],Ee=0,ht=a.length;Ee<ht;Ee++)if(b=a[Ee],b||b===0)if(ae(b)==="object")g.merge(pe,b.nodeType?[b]:b);else if(!cn.test(b))pe.push(c.createTextNode(b));else{for(I=I||Ne.appendChild(c.createElement("div")),U=(Lt.exec(b)||["",""])[1].toLowerCase(),Z=Jt[U]||Jt._default,I.innerHTML=Z[1]+g.htmlPrefilter(b)+Z[2],me=Z[0];me--;)I=I.lastChild;g.merge(pe,I.childNodes),I=Ne.firstChild,I.textContent=""}for(Ne.textContent="",Ee=0;b=pe[Ee++];){if(d&&g.inArray(b,d)>-1){v&&v.push(b);continue}if(se=It(b),I=Pt(Ne.appendChild(b),"script"),se&&vi(I),u)for(me=0;b=I[me++];)En.test(b.type||"")&&u.push(b)}return Ne}var oi=/^([^.]*)(?:\.(.+)|)/;function Sn(){return!0}function Mn(){return!1}function vn(a,c){return a===on()==(c==="focus")}function on(){try{return G.activeElement}catch{}}function zn(a,c,u,d,v,b){var I,U;if(typeof c=="object"){typeof u!="string"&&(d=d||u,u=void 0);for(U in c)zn(a,U,u,d,c[U],b);return a}if(d==null&&v==null?(v=u,d=u=void 0):v==null&&(typeof u=="string"?(v=d,d=void 0):(v=d,d=u,u=void 0)),v===!1)v=Mn;else if(!v)return a;return b===1&&(I=v,v=function(Z){return g().off(Z),I.apply(this,arguments)},v.guid=I.guid||(I.guid=g.guid++)),a.each(function(){g.event.add(this,c,v,d,u)})}g.event={global:{},add:function(a,c,u,d,v){var b,I,U,Z,se,me,Ne,pe,Ee,ht,Ct,ut=$.get(a);if(S(a))for(u.handler&&(b=u,u=b.handler,v=b.selector),v&&g.find.matchesSelector(lt,v),u.guid||(u.guid=g.guid++),(Z=ut.events)||(Z=ut.events=Object.create(null)),(I=ut.handle)||(I=ut.handle=function(Bn){return typeof g<"u"&&g.event.triggered!==Bn.type?g.event.dispatch.apply(a,arguments):void 0}),c=(c||"").match(z)||[""],se=c.length;se--;)U=oi.exec(c[se])||[],Ee=Ct=U[1],ht=(U[2]||"").split(".").sort(),Ee&&(Ne=g.event.special[Ee]||{},Ee=(v?Ne.delegateType:Ne.bindType)||Ee,Ne=g.event.special[Ee]||{},me=g.extend({type:Ee,origType:Ct,data:d,handler:u,guid:u.guid,selector:v,needsContext:v&&g.expr.match.needsContext.test(v),namespace:ht.join(".")},b),(pe=Z[Ee])||(pe=Z[Ee]=[],pe.delegateCount=0,(!Ne.setup||Ne.setup.call(a,d,ht,I)===!1)&&a.addEventListener&&a.addEventListener(Ee,I)),Ne.add&&(Ne.add.call(a,me),me.handler.guid||(me.handler.guid=u.guid)),v?pe.splice(pe.delegateCount++,0,me):pe.push(me),g.event.global[Ee]=!0)},remove:function(a,c,u,d,v){var b,I,U,Z,se,me,Ne,pe,Ee,ht,Ct,ut=$.hasData(a)&&$.get(a);if(!(!ut||!(Z=ut.events))){for(c=(c||"").match(z)||[""],se=c.length;se--;){if(U=oi.exec(c[se])||[],Ee=Ct=U[1],ht=(U[2]||"").split(".").sort(),!Ee){for(Ee in Z)g.event.remove(a,Ee+c[se],u,d,!0);continue}for(Ne=g.event.special[Ee]||{},Ee=(d?Ne.delegateType:Ne.bindType)||Ee,pe=Z[Ee]||[],U=U[2]&&new RegExp("(^|\\.)"+ht.join("\\.(?:.*\\.|)")+"(\\.|$)"),I=b=pe.length;b--;)me=pe[b],(v||Ct===me.origType)&&(!u||u.guid===me.guid)&&(!U||U.test(me.namespace))&&(!d||d===me.selector||d==="**"&&me.selector)&&(pe.splice(b,1),me.selector&&pe.delegateCount--,Ne.remove&&Ne.remove.call(a,me));I&&!pe.length&&((!Ne.teardown||Ne.teardown.call(a,ht,ut.handle)===!1)&&g.removeEvent(a,Ee,ut.handle),delete Z[Ee])}g.isEmptyObject(Z)&&$.remove(a,"handle events")}},dispatch:function(a){var c,u,d,v,b,I,U=new Array(arguments.length),Z=g.event.fix(a),se=($.get(this,"events")||Object.create(null))[Z.type]||[],me=g.event.special[Z.type]||{};for(U[0]=Z,c=1;c<arguments.length;c++)U[c]=arguments[c];if(Z.delegateTarget=this,!(me.preDispatch&&me.preDispatch.call(this,Z)===!1)){for(I=g.event.handlers.call(this,Z,se),c=0;(v=I[c++])&&!Z.isPropagationStopped();)for(Z.currentTarget=v.elem,u=0;(b=v.handlers[u++])&&!Z.isImmediatePropagationStopped();)(!Z.rnamespace||b.namespace===!1||Z.rnamespace.test(b.namespace))&&(Z.handleObj=b,Z.data=b.data,d=((g.event.special[b.origType]||{}).handle||b.handler).apply(v.elem,U),d!==void 0&&(Z.result=d)===!1&&(Z.preventDefault(),Z.stopPropagation()));return me.postDispatch&&me.postDispatch.call(this,Z),Z.result}},handlers:function(a,c){var u,d,v,b,I,U=[],Z=c.delegateCount,se=a.target;if(Z&&se.nodeType&&!(a.type==="click"&&a.button>=1)){for(;se!==this;se=se.parentNode||this)if(se.nodeType===1&&!(a.type==="click"&&se.disabled===!0)){for(b=[],I={},u=0;u<Z;u++)d=c[u],v=d.selector+" ",I[v]===void 0&&(I[v]=d.needsContext?g(v,this).index(se)>-1:g.find(v,this,null,[se]).length),I[v]&&b.push(d);b.length&&U.push({elem:se,handlers:b})}}return se=this,Z<c.length&&U.push({elem:se,handlers:c.slice(Z)}),U},addProp:function(a,c){Object.defineProperty(g.Event.prototype,a,{enumerable:!0,configurable:!0,get:F(c)?function(){if(this.originalEvent)return c(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(u){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:u})}})},fix:function(a){return a[g.expando]?a:new g.Event(a)},special:{load:{noBubble:!0},click:{setup:function(a){var c=this||a;return kn.test(c.type)&&c.click&&le(c,"input")&&Kn(c,"click",Sn),!1},trigger:function(a){var c=this||a;return kn.test(c.type)&&c.click&&le(c,"input")&&Kn(c,"click"),!0},_default:function(a){var c=a.target;return kn.test(c.type)&&c.click&&le(c,"input")&&$.get(c,"click")||le(c,"a")}},beforeunload:{postDispatch:function(a){a.result!==void 0&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}};function Kn(a,c,u){if(!u){$.get(a,c)===void 0&&g.event.add(a,c,Sn);return}$.set(a,c,!1),g.event.add(a,c,{namespace:!1,handler:function(d){var v,b,I=$.get(this,c);if(d.isTrigger&1&&this[c]){if(I.length)(g.event.special[c]||{}).delegateType&&d.stopPropagation();else if(I=s.call(arguments),$.set(this,c,I),v=u(this,c),this[c](),b=$.get(this,c),I!==b||v?$.set(this,c,!1):b={},I!==b)return d.stopImmediatePropagation(),d.preventDefault(),b&&b.value}else I.length&&($.set(this,c,{value:g.event.trigger(g.extend(I[0],g.Event.prototype),I.slice(1),this)}),d.stopImmediatePropagation())}})}g.removeEvent=function(a,c,u){a.removeEventListener&&a.removeEventListener(c,u)},g.Event=function(a,c){if(!(this instanceof g.Event))return new g.Event(a,c);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.defaultPrevented===void 0&&a.returnValue===!1?Sn:Mn,this.target=a.target&&a.target.nodeType===3?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,c&&g.extend(this,c),this.timeStamp=a&&a.timeStamp||Date.now(),this[g.expando]=!0},g.Event.prototype={constructor:g.Event,isDefaultPrevented:Mn,isPropagationStopped:Mn,isImmediatePropagationStopped:Mn,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Sn,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Sn,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Sn,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},g.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},g.event.addProp),g.each({focus:"focusin",blur:"focusout"},function(a,c){g.event.special[a]={setup:function(){return Kn(this,a,vn),!1},trigger:function(){return Kn(this,a),!0},_default:function(){return!0},delegateType:c}}),g.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,c){g.event.special[a]={delegateType:c,bindType:c,handle:function(u){var d,v=this,b=u.relatedTarget,I=u.handleObj;return(!b||b!==v&&!g.contains(v,b))&&(u.type=I.origType,d=I.handler.apply(this,arguments),u.type=c),d}}}),g.fn.extend({on:function(a,c,u,d){return zn(this,a,c,u,d)},one:function(a,c,u,d){return zn(this,a,c,u,d,1)},off:function(a,c,u){var d,v;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,g(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if(typeof a=="object"){for(v in a)this.off(v,c,a[v]);return this}return(c===!1||typeof c=="function")&&(u=c,c=void 0),u===!1&&(u=Mn),this.each(function(){g.event.remove(this,a,u,c)})}});var $n=/<script|<style|<link/i,yi=/checked\s*(?:[^=]|=\s*.checked.)/i,ai=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function bi(a,c){return le(a,"table")&&le(c.nodeType!==11?c:c.firstChild,"tr")&&g(a).children("tbody")[0]||a}function li(a){return a.type=(a.getAttribute("type")!==null)+"/"+a.type,a}function An(a){return(a.type||"").slice(0,5)==="true/"?a.type=a.type.slice(5):a.removeAttribute("type"),a}function ci(a,c){var u,d,v,b,I,U,Z;if(c.nodeType===1){if($.hasData(a)&&(b=$.get(a),Z=b.events,Z)){$.remove(c,"handle events");for(v in Z)for(u=0,d=Z[v].length;u<d;u++)g.event.add(c,v,Z[v][u])}Q.hasData(a)&&(I=Q.access(a),U=g.extend({},I),Q.set(c,U))}}function dr(a,c){var u=c.nodeName.toLowerCase();u==="input"&&kn.test(a.type)?c.checked=a.checked:(u==="input"||u==="textarea")&&(c.defaultValue=a.defaultValue)}function Jn(a,c,u,d){c=o(c);var v,b,I,U,Z,se,me=0,Ne=a.length,pe=Ne-1,Ee=c[0],ht=F(Ee);if(ht||Ne>1&&typeof Ee=="string"&&!N.checkClone&&yi.test(Ee))return a.each(function(Ct){var ut=a.eq(Ct);ht&&(c[0]=Ee.call(this,Ct,ut.html())),Jn(ut,c,u,d)});if(Ne&&(v=Gn(c,a[0].ownerDocument,!1,a,d),b=v.firstChild,v.childNodes.length===1&&(v=b),b||d)){for(I=g.map(Pt(v,"script"),li),U=I.length;me<Ne;me++)Z=v,me!==pe&&(Z=g.clone(Z,!0,!0),U&&g.merge(I,Pt(Z,"script"))),u.call(a[me],Z,me);if(U)for(se=I[I.length-1].ownerDocument,g.map(I,An),me=0;me<U;me++)Z=I[me],En.test(Z.type||"")&&!$.access(Z,"globalEval")&&g.contains(se,Z)&&(Z.src&&(Z.type||"").toLowerCase()!=="module"?g._evalUrl&&!Z.noModule&&g._evalUrl(Z.src,{nonce:Z.nonce||Z.getAttribute("nonce")},se):K(Z.textContent.replace(ai,""),Z,se))}return a}function yn(a,c,u){for(var d,v=c?g.filter(c,a):a,b=0;(d=v[b])!=null;b++)!u&&d.nodeType===1&&g.cleanData(Pt(d)),d.parentNode&&(u&&It(d)&&vi(Pt(d,"script")),d.parentNode.removeChild(d));return a}g.extend({htmlPrefilter:function(a){return a},clone:function(a,c,u){var d,v,b,I,U=a.cloneNode(!0),Z=It(a);if(!N.noCloneChecked&&(a.nodeType===1||a.nodeType===11)&&!g.isXMLDoc(a))for(I=Pt(U),b=Pt(a),d=0,v=b.length;d<v;d++)dr(b[d],I[d]);if(c)if(u)for(b=b||Pt(a),I=I||Pt(U),d=0,v=b.length;d<v;d++)ci(b[d],I[d]);else ci(a,U);return I=Pt(U,"script"),I.length>0&&vi(I,!Z&&Pt(a,"script")),U},cleanData:function(a){for(var c,u,d,v=g.event.special,b=0;(u=a[b])!==void 0;b++)if(S(u)){if(c=u[$.expando]){if(c.events)for(d in c.events)v[d]?g.event.remove(u,d):g.removeEvent(u,d,c.handle);u[$.expando]=void 0}u[Q.expando]&&(u[Q.expando]=void 0)}}}),g.fn.extend({detach:function(a){return yn(this,a,!0)},remove:function(a){return yn(this,a)},text:function(a){return ce(this,function(c){return c===void 0?g.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=c)})},null,a,arguments.length)},append:function(){return Jn(this,arguments,function(a){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var c=bi(this,a);c.appendChild(a)}})},prepend:function(){return Jn(this,arguments,function(a){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var c=bi(this,a);c.insertBefore(a,c.firstChild)}})},before:function(){return Jn(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return Jn(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,c=0;(a=this[c])!=null;c++)a.nodeType===1&&(g.cleanData(Pt(a,!1)),a.textContent="");return this},clone:function(a,c){return a=a??!1,c=c??a,this.map(function(){return g.clone(this,a,c)})},html:function(a){return ce(this,function(c){var u=this[0]||{},d=0,v=this.length;if(c===void 0&&u.nodeType===1)return u.innerHTML;if(typeof c=="string"&&!$n.test(c)&&!Jt[(Lt.exec(c)||["",""])[1].toLowerCase()]){c=g.htmlPrefilter(c);try{for(;d<v;d++)u=this[d]||{},u.nodeType===1&&(g.cleanData(Pt(u,!1)),u.innerHTML=c);u=0}catch{}}u&&this.empty().append(c)},null,a,arguments.length)},replaceWith:function(){var a=[];return Jn(this,arguments,function(c){var u=this.parentNode;g.inArray(this,a)<0&&(g.cleanData(Pt(this)),u&&u.replaceChild(c,this))},a)}}),g.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,c){g.fn[a]=function(u){for(var d,v=[],b=g(u),I=b.length-1,U=0;U<=I;U++)d=U===I?this:this.clone(!0),g(b[U])[c](d),l.apply(v,d.get());return this.pushStack(v)}});var jn=new RegExp("^("+Ke+")(?!px)[a-z%]+$","i"),Rn=function(a){var c=a.ownerDocument.defaultView;return(!c||!c.opener)&&(c=e),c.getComputedStyle(a)},Mi=function(a,c,u){var d,v,b={};for(v in c)b[v]=a.style[v],a.style[v]=c[v];d=u.call(a);for(v in c)a.style[v]=b[v];return d},Er=new RegExp(mt.join("|"),"i");(function(){function a(){if(se){Z.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",se.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",lt.appendChild(Z).appendChild(se);var me=e.getComputedStyle(se);u=me.top!=="1%",U=c(me.marginLeft)===12,se.style.right="60%",b=c(me.right)===36,d=c(me.width)===36,se.style.position="absolute",v=c(se.offsetWidth/3)===12,lt.removeChild(Z),se=null}}function c(me){return Math.round(parseFloat(me))}var u,d,v,b,I,U,Z=G.createElement("div"),se=G.createElement("div");se.style&&(se.style.backgroundClip="content-box",se.cloneNode(!0).style.backgroundClip="",N.clearCloneStyle=se.style.backgroundClip==="content-box",g.extend(N,{boxSizingReliable:function(){return a(),d},pixelBoxStyles:function(){return a(),b},pixelPosition:function(){return a(),u},reliableMarginLeft:function(){return a(),U},scrollboxSize:function(){return a(),v},reliableTrDimensions:function(){var me,Ne,pe,Ee;return I==null&&(me=G.createElement("table"),Ne=G.createElement("tr"),pe=G.createElement("div"),me.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Ne.style.cssText="border:1px solid",Ne.style.height="1px",pe.style.height="9px",pe.style.display="block",lt.appendChild(me).appendChild(Ne).appendChild(pe),Ee=e.getComputedStyle(Ne),I=parseInt(Ee.height,10)+parseInt(Ee.borderTopWidth,10)+parseInt(Ee.borderBottomWidth,10)===Ne.offsetHeight,lt.removeChild(me)),I}}))})();function zi(a,c,u){var d,v,b,I,U=a.style;return u=u||Rn(a),u&&(I=u.getPropertyValue(c)||u[c],I===""&&!It(a)&&(I=g.style(a,c)),!N.pixelBoxStyles()&&jn.test(I)&&Er.test(c)&&(d=U.width,v=U.minWidth,b=U.maxWidth,U.minWidth=U.maxWidth=U.width=I,I=u.width,U.width=d,U.minWidth=v,U.maxWidth=b)),I!==void 0?I+"":I}function pr(a,c){return{get:function(){if(a()){delete this.get;return}return(this.get=c).apply(this,arguments)}}}var Wr=["Webkit","Moz","ms"],nt=G.createElement("div").style,ie={};function Ue(a){for(var c=a[0].toUpperCase()+a.slice(1),u=Wr.length;u--;)if(a=Wr[u]+c,a in nt)return a}function We(a){var c=g.cssProps[a]||ie[a];return c||(a in nt?a:ie[a]=Ue(a)||a)}var Vt=/^(none|table(?!-c[ea]).+)/,Zt=/^--/,dn={position:"absolute",visibility:"hidden",display:"block"},pn={letterSpacing:"0",fontWeight:"400"};function gn(a,c,u){var d=at.exec(c);return d?Math.max(0,d[2]-(u||0))+(d[3]||"px"):c}function hi(a,c,u,d,v,b){var I=c==="width"?1:0,U=0,Z=0;if(u===(d?"border":"content"))return 0;for(;I<4;I+=2)u==="margin"&&(Z+=g.css(a,u+mt[I],!0,v)),d?(u==="content"&&(Z-=g.css(a,"padding"+mt[I],!0,v)),u!=="margin"&&(Z-=g.css(a,"border"+mt[I]+"Width",!0,v))):(Z+=g.css(a,"padding"+mt[I],!0,v),u!=="padding"?Z+=g.css(a,"border"+mt[I]+"Width",!0,v):U+=g.css(a,"border"+mt[I]+"Width",!0,v));return!d&&b>=0&&(Z+=Math.max(0,Math.ceil(a["offset"+c[0].toUpperCase()+c.slice(1)]-b-Z-U-.5))||0),Z}function Nt(a,c,u){var d=Rn(a),v=!N.boxSizingReliable()||u,b=v&&g.css(a,"boxSizing",!1,d)==="border-box",I=b,U=zi(a,c,d),Z="offset"+c[0].toUpperCase()+c.slice(1);if(jn.test(U)){if(!u)return U;U="auto"}return(!N.boxSizingReliable()&&b||!N.reliableTrDimensions()&&le(a,"tr")||U==="auto"||!parseFloat(U)&&g.css(a,"display",!1,d)==="inline")&&a.getClientRects().length&&(b=g.css(a,"boxSizing",!1,d)==="border-box",I=Z in a,I&&(U=a[Z])),U=parseFloat(U)||0,U+hi(a,c,u||(b?"border":"content"),I,d,U)+"px"}g.extend({cssHooks:{opacity:{get:function(a,c){if(c){var u=zi(a,"opacity");return u===""?"1":u}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(a,c,u,d){if(!(!a||a.nodeType===3||a.nodeType===8||!a.style)){var v,b,I,U=rt(c),Z=Zt.test(c),se=a.style;if(Z||(c=We(U)),I=g.cssHooks[c]||g.cssHooks[U],u!==void 0){if(b=typeof u,b==="string"&&(v=at.exec(u))&&v[1]&&(u=Ft(a,c,v),b="number"),u==null||u!==u)return;b==="number"&&!Z&&(u+=v&&v[3]||(g.cssNumber[U]?"":"px")),!N.clearCloneStyle&&u===""&&c.indexOf("background")===0&&(se[c]="inherit"),(!I||!("set"in I)||(u=I.set(a,u,d))!==void 0)&&(Z?se.setProperty(c,u):se[c]=u)}else return I&&"get"in I&&(v=I.get(a,!1,d))!==void 0?v:se[c]}},css:function(a,c,u,d){var v,b,I,U=rt(c),Z=Zt.test(c);return Z||(c=We(U)),I=g.cssHooks[c]||g.cssHooks[U],I&&"get"in I&&(v=I.get(a,!0,u)),v===void 0&&(v=zi(a,c,d)),v==="normal"&&c in pn&&(v=pn[c]),u===""||u?(b=parseFloat(v),u===!0||isFinite(b)?b||0:v):v}}),g.each(["height","width"],function(a,c){g.cssHooks[c]={get:function(u,d,v){if(d)return Vt.test(g.css(u,"display"))&&(!u.getClientRects().length||!u.getBoundingClientRect().width)?Mi(u,dn,function(){return Nt(u,c,v)}):Nt(u,c,v)},set:function(u,d,v){var b,I=Rn(u),U=!N.scrollboxSize()&&I.position==="absolute",Z=U||v,se=Z&&g.css(u,"boxSizing",!1,I)==="border-box",me=v?hi(u,c,v,se,I):0;return se&&U&&(me-=Math.ceil(u["offset"+c[0].toUpperCase()+c.slice(1)]-parseFloat(I[c])-hi(u,c,"border",!1,I)-.5)),me&&(b=at.exec(d))&&(b[3]||"px")!=="px"&&(u.style[c]=d,d=g.css(u,c)),gn(u,d,me)}}}),g.cssHooks.marginLeft=pr(N.reliableMarginLeft,function(a,c){if(c)return(parseFloat(zi(a,"marginLeft"))||a.getBoundingClientRect().left-Mi(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"}),g.each({margin:"",padding:"",border:"Width"},function(a,c){g.cssHooks[a+c]={expand:function(u){for(var d=0,v={},b=typeof u=="string"?u.split(" "):[u];d<4;d++)v[a+mt[d]+c]=b[d]||b[d-2]||b[0];return v}},a!=="margin"&&(g.cssHooks[a+c].set=gn)}),g.fn.extend({css:function(a,c){return ce(this,function(u,d,v){var b,I,U={},Z=0;if(Array.isArray(d)){for(b=Rn(u),I=d.length;Z<I;Z++)U[d[Z]]=g.css(u,d[Z],!1,b);return U}return v!==void 0?g.style(u,d,v):g.css(u,d)},a,c,arguments.length>1)}});function Xt(a,c,u,d,v){return new Xt.prototype.init(a,c,u,d,v)}g.Tween=Xt,Xt.prototype={constructor:Xt,init:function(a,c,u,d,v,b){this.elem=a,this.prop=u,this.easing=v||g.easing._default,this.options=c,this.start=this.now=this.cur(),this.end=d,this.unit=b||(g.cssNumber[u]?"":"px")},cur:function(){var a=Xt.propHooks[this.prop];return a&&a.get?a.get(this):Xt.propHooks._default.get(this)},run:function(a){var c,u=Xt.propHooks[this.prop];return this.options.duration?this.pos=c=g.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=c=a,this.now=(this.end-this.start)*c+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),u&&u.set?u.set(this):Xt.propHooks._default.set(this),this}},Xt.prototype.init.prototype=Xt.prototype,Xt.propHooks={_default:{get:function(a){var c;return a.elem.nodeType!==1||a.elem[a.prop]!=null&&a.elem.style[a.prop]==null?a.elem[a.prop]:(c=g.css(a.elem,a.prop,""),!c||c==="auto"?0:c)},set:function(a){g.fx.step[a.prop]?g.fx.step[a.prop](a):a.elem.nodeType===1&&(g.cssHooks[a.prop]||a.elem.style[We(a.prop)]!=null)?g.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Xt.propHooks.scrollTop=Xt.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},g.easing={linear:function(a){return a},swing:function(a){return .5-Math.cos(a*Math.PI)/2},_default:"swing"},g.fx=Xt.prototype.init,g.fx.step={};var hn,At,Is=/^(?:toggle|show|hide)$/,Sr=/queueHooks$/;function gr(){At&&(G.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(gr):e.setTimeout(gr,g.fx.interval),g.fx.tick())}function Os(){return e.setTimeout(function(){hn=void 0}),hn=Date.now()}function Yn(a,c){var u,d=0,v={height:a};for(c=c?1:0;d<4;d+=2-c)u=mt[d],v["margin"+u]=v["padding"+u]=a;return c&&(v.opacity=v.width=a),v}function er(a,c,u){for(var d,v=(Xn.tweeners[c]||[]).concat(Xn.tweeners["*"]),b=0,I=v.length;b<I;b++)if(d=v[b].call(u,c,a))return d}function Hr(a,c,u){var d,v,b,I,U,Z,se,me,Ne="width"in c||"height"in c,pe=this,Ee={},ht=a.style,Ct=a.nodeType&&ln(a),ut=$.get(a,"fxshow");u.queue||(I=g._queueHooks(a,"fx"),I.unqueued==null&&(I.unqueued=0,U=I.empty.fire,I.empty.fire=function(){I.unqueued||U()}),I.unqueued++,pe.always(function(){pe.always(function(){I.unqueued--,g.queue(a,"fx").length||I.empty.fire()})}));for(d in c)if(v=c[d],Is.test(v)){if(delete c[d],b=b||v==="toggle",v===(Ct?"hide":"show"))if(v==="show"&&ut&&ut[d]!==void 0)Ct=!0;else continue;Ee[d]=ut&&ut[d]||g.style(a,d)}if(Z=!g.isEmptyObject(c),!(!Z&&g.isEmptyObject(Ee))){Ne&&a.nodeType===1&&(u.overflow=[ht.overflow,ht.overflowX,ht.overflowY],se=ut&&ut.display,se==null&&(se=$.get(a,"display")),me=g.css(a,"display"),me==="none"&&(se?me=se:(fn([a],!0),se=a.style.display||se,me=g.css(a,"display"),fn([a]))),(me==="inline"||me==="inline-block"&&se!=null)&&g.css(a,"float")==="none"&&(Z||(pe.done(function(){ht.display=se}),se==null&&(me=ht.display,se=me==="none"?"":me)),ht.display="inline-block")),u.overflow&&(ht.overflow="hidden",pe.always(function(){ht.overflow=u.overflow[0],ht.overflowX=u.overflow[1],ht.overflowY=u.overflow[2]})),Z=!1;for(d in Ee)Z||(ut?"hidden"in ut&&(Ct=ut.hidden):ut=$.access(a,"fxshow",{display:se}),b&&(ut.hidden=!Ct),Ct&&fn([a],!0),pe.done(function(){Ct||fn([a]),$.remove(a,"fxshow");for(d in Ee)g.style(a,d,Ee[d])})),Z=er(Ct?ut[d]:0,d,pe),d in ut||(ut[d]=Z.start,Ct&&(Z.end=Z.start,Z.start=0))}}function as(a,c){var u,d,v,b,I;for(u in a)if(d=rt(u),v=c[d],b=a[u],Array.isArray(b)&&(v=b[1],b=a[u]=b[0]),u!==d&&(a[d]=b,delete a[u]),I=g.cssHooks[d],I&&"expand"in I){b=I.expand(b),delete a[d];for(u in b)u in a||(a[u]=b[u],c[u]=v)}else c[d]=v}function Xn(a,c,u){var d,v,b=0,I=Xn.prefilters.length,U=g.Deferred().always(function(){delete Z.elem}),Z=function(){if(v)return!1;for(var Ne=hn||Os(),pe=Math.max(0,se.startTime+se.duration-Ne),Ee=pe/se.duration||0,ht=1-Ee,Ct=0,ut=se.tweens.length;Ct<ut;Ct++)se.tweens[Ct].run(ht);return U.notifyWith(a,[se,ht,pe]),ht<1&&ut?pe:(ut||U.notifyWith(a,[se,1,0]),U.resolveWith(a,[se]),!1)},se=U.promise({elem:a,props:g.extend({},c),opts:g.extend(!0,{specialEasing:{},easing:g.easing._default},u),originalProperties:c,originalOptions:u,startTime:hn||Os(),duration:u.duration,tweens:[],createTween:function(Ne,pe){var Ee=g.Tween(a,se.opts,Ne,pe,se.opts.specialEasing[Ne]||se.opts.easing);return se.tweens.push(Ee),Ee},stop:function(Ne){var pe=0,Ee=Ne?se.tweens.length:0;if(v)return this;for(v=!0;pe<Ee;pe++)se.tweens[pe].run(1);return Ne?(U.notifyWith(a,[se,1,0]),U.resolveWith(a,[se,Ne])):U.rejectWith(a,[se,Ne]),this}}),me=se.props;for(as(me,se.opts.specialEasing);b<I;b++)if(d=Xn.prefilters[b].call(se,a,me,se.opts),d)return F(d.stop)&&(g._queueHooks(se.elem,se.opts.queue).stop=d.stop.bind(d)),d;return g.map(me,er,se),F(se.opts.start)&&se.opts.start.call(a,se),se.progress(se.opts.progress).done(se.opts.done,se.opts.complete).fail(se.opts.fail).always(se.opts.always),g.fx.timer(g.extend(Z,{elem:a,anim:se,queue:se.opts.queue})),se}g.Animation=g.extend(Xn,{tweeners:{"*":[function(a,c){var u=this.createTween(a,c);return Ft(u.elem,a,at.exec(c),u),u}]},tweener:function(a,c){F(a)?(c=a,a=["*"]):a=a.match(z);for(var u,d=0,v=a.length;d<v;d++)u=a[d],Xn.tweeners[u]=Xn.tweeners[u]||[],Xn.tweeners[u].unshift(c)},prefilters:[Hr],prefilter:function(a,c){c?Xn.prefilters.unshift(a):Xn.prefilters.push(a)}}),g.speed=function(a,c,u){var d=a&&typeof a=="object"?g.extend({},a):{complete:u||!u&&c||F(a)&&a,duration:a,easing:u&&c||c&&!F(c)&&c};return g.fx.off?d.duration=0:typeof d.duration!="number"&&(d.duration in g.fx.speeds?d.duration=g.fx.speeds[d.duration]:d.duration=g.fx.speeds._default),(d.queue==null||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){F(d.old)&&d.old.call(this),d.queue&&g.dequeue(this,d.queue)},d},g.fn.extend({fadeTo:function(a,c,u,d){return this.filter(ln).css("opacity",0).show().end().animate({opacity:c},a,u,d)},animate:function(a,c,u,d){var v=g.isEmptyObject(a),b=g.speed(c,u,d),I=function(){var U=Xn(this,g.extend({},a),b);(v||$.get(this,"finish"))&&U.stop(!0)};return I.finish=I,v||b.queue===!1?this.each(I):this.queue(b.queue,I)},stop:function(a,c,u){var d=function(v){var b=v.stop;delete v.stop,b(u)};return typeof a!="string"&&(u=c,c=a,a=void 0),c&&this.queue(a||"fx",[]),this.each(function(){var v=!0,b=a!=null&&a+"queueHooks",I=g.timers,U=$.get(this);if(b)U[b]&&U[b].stop&&d(U[b]);else for(b in U)U[b]&&U[b].stop&&Sr.test(b)&&d(U[b]);for(b=I.length;b--;)I[b].elem===this&&(a==null||I[b].queue===a)&&(I[b].anim.stop(u),v=!1,I.splice(b,1));(v||!u)&&g.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var c,u=$.get(this),d=u[a+"queue"],v=u[a+"queueHooks"],b=g.timers,I=d?d.length:0;for(u.finish=!0,g.queue(this,a,[]),v&&v.stop&&v.stop.call(this,!0),c=b.length;c--;)b[c].elem===this&&b[c].queue===a&&(b[c].anim.stop(!0),b.splice(c,1));for(c=0;c<I;c++)d[c]&&d[c].finish&&d[c].finish.call(this);delete u.finish})}}),g.each(["toggle","show","hide"],function(a,c){var u=g.fn[c];g.fn[c]=function(d,v,b){return d==null||typeof d=="boolean"?u.apply(this,arguments):this.animate(Yn(c,!0),d,v,b)}}),g.each({slideDown:Yn("show"),slideUp:Yn("hide"),slideToggle:Yn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,c){g.fn[a]=function(u,d,v){return this.animate(c,u,d,v)}}),g.timers=[],g.fx.tick=function(){var a,c=0,u=g.timers;for(hn=Date.now();c<u.length;c++)a=u[c],!a()&&u[c]===a&&u.splice(c--,1);u.length||g.fx.stop(),hn=void 0},g.fx.timer=function(a){g.timers.push(a),g.fx.start()},g.fx.interval=13,g.fx.start=function(){At||(At=!0,gr())},g.fx.stop=function(){At=null},g.fx.speeds={slow:600,fast:200,_default:400},g.fn.delay=function(a,c){return a=g.fx&&g.fx.speeds[a]||a,c=c||"fx",this.queue(c,function(u,d){var v=e.setTimeout(u,a);d.stop=function(){e.clearTimeout(v)}})},function(){var a=G.createElement("input"),c=G.createElement("select"),u=c.appendChild(G.createElement("option"));a.type="checkbox",N.checkOn=a.value!=="",N.optSelected=u.selected,a=G.createElement("input"),a.value="t",a.type="radio",N.radioValue=a.value==="t"}();var Ri,tr=g.expr.attrHandle;g.fn.extend({attr:function(a,c){return ce(this,g.attr,a,c,arguments.length>1)},removeAttr:function(a){return this.each(function(){g.removeAttr(this,a)})}}),g.extend({attr:function(a,c,u){var d,v,b=a.nodeType;if(!(b===3||b===8||b===2)){if(typeof a.getAttribute>"u")return g.prop(a,c,u);if((b!==1||!g.isXMLDoc(a))&&(v=g.attrHooks[c.toLowerCase()]||(g.expr.match.bool.test(c)?Ri:void 0)),u!==void 0){if(u===null){g.removeAttr(a,c);return}return v&&"set"in v&&(d=v.set(a,u,c))!==void 0?d:(a.setAttribute(c,u+""),u)}return v&&"get"in v&&(d=v.get(a,c))!==null?d:(d=g.find.attr(a,c),d??void 0)}},attrHooks:{type:{set:function(a,c){if(!N.radioValue&&c==="radio"&&le(a,"input")){var u=a.value;return a.setAttribute("type",c),u&&(a.value=u),c}}}},removeAttr:function(a,c){var u,d=0,v=c&&c.match(z);if(v&&a.nodeType===1)for(;u=v[d++];)a.removeAttribute(u)}}),Ri={set:function(a,c,u){return c===!1?g.removeAttr(a,u):a.setAttribute(u,u),u}},g.each(g.expr.match.bool.source.match(/\w+/g),function(a,c){var u=tr[c]||g.find.attr;tr[c]=function(d,v,b){var I,U,Z=v.toLowerCase();return b||(U=tr[Z],tr[Z]=I,I=u(d,v,b)!=null?Z:null,tr[Z]=U),I}});var Tr=/^(?:input|select|textarea|button)$/i,Tn=/^(?:a|area)$/i;g.fn.extend({prop:function(a,c){return ce(this,g.prop,a,c,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[g.propFix[a]||a]})}}),g.extend({prop:function(a,c,u){var d,v,b=a.nodeType;if(!(b===3||b===8||b===2))return(b!==1||!g.isXMLDoc(a))&&(c=g.propFix[c]||c,v=g.propHooks[c]),u!==void 0?v&&"set"in v&&(d=v.set(a,u,c))!==void 0?d:a[c]=u:v&&"get"in v&&(d=v.get(a,c))!==null?d:a[c]},propHooks:{tabIndex:{get:function(a){var c=g.find.attr(a,"tabindex");return c?parseInt(c,10):Tr.test(a.nodeName)||Tn.test(a.nodeName)&&a.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),N.optSelected||(g.propHooks.selected={get:function(a){var c=a.parentNode;return c&&c.parentNode&&c.parentNode.selectedIndex,null},set:function(a){var c=a.parentNode;c&&(c.selectedIndex,c.parentNode&&c.parentNode.selectedIndex)}}),g.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){g.propFix[this.toLowerCase()]=this});function In(a){var c=a.match(z)||[];return c.join(" ")}function f(a){return a.getAttribute&&a.getAttribute("class")||""}function _(a){return Array.isArray(a)?a:typeof a=="string"?a.match(z)||[]:[]}g.fn.extend({addClass:function(a){var c,u,d,v,b,I,U,Z=0;if(F(a))return this.each(function(se){g(this).addClass(a.call(this,se,f(this)))});if(c=_(a),c.length){for(;u=this[Z++];)if(v=f(u),d=u.nodeType===1&&" "+In(v)+" ",d){for(I=0;b=c[I++];)d.indexOf(" "+b+" ")<0&&(d+=b+" ");U=In(d),v!==U&&u.setAttribute("class",U)}}return this},removeClass:function(a){var c,u,d,v,b,I,U,Z=0;if(F(a))return this.each(function(se){g(this).removeClass(a.call(this,se,f(this)))});if(!arguments.length)return this.attr("class","");if(c=_(a),c.length){for(;u=this[Z++];)if(v=f(u),d=u.nodeType===1&&" "+In(v)+" ",d){for(I=0;b=c[I++];)for(;d.indexOf(" "+b+" ")>-1;)d=d.replace(" "+b+" "," ");U=In(d),v!==U&&u.setAttribute("class",U)}}return this},toggleClass:function(a,c){var u=typeof a,d=u==="string"||Array.isArray(a);return typeof c=="boolean"&&d?c?this.addClass(a):this.removeClass(a):F(a)?this.each(function(v){g(this).toggleClass(a.call(this,v,f(this),c),c)}):this.each(function(){var v,b,I,U;if(d)for(b=0,I=g(this),U=_(a);v=U[b++];)I.hasClass(v)?I.removeClass(v):I.addClass(v);else(a===void 0||u==="boolean")&&(v=f(this),v&&$.set(this,"__className__",v),this.setAttribute&&this.setAttribute("class",v||a===!1?"":$.get(this,"__className__")||""))})},hasClass:function(a){var c,u,d=0;for(c=" "+a+" ";u=this[d++];)if(u.nodeType===1&&(" "+In(f(u))+" ").indexOf(c)>-1)return!0;return!1}});var w=/\r/g;g.fn.extend({val:function(a){var c,u,d,v=this[0];return arguments.length?(d=F(a),this.each(function(b){var I;this.nodeType===1&&(d?I=a.call(this,b,g(this).val()):I=a,I==null?I="":typeof I=="number"?I+="":Array.isArray(I)&&(I=g.map(I,function(U){return U==null?"":U+""})),c=g.valHooks[this.type]||g.valHooks[this.nodeName.toLowerCase()],(!c||!("set"in c)||c.set(this,I,"value")===void 0)&&(this.value=I))})):v?(c=g.valHooks[v.type]||g.valHooks[v.nodeName.toLowerCase()],c&&"get"in c&&(u=c.get(v,"value"))!==void 0?u:(u=v.value,typeof u=="string"?u.replace(w,""):u??"")):void 0}}),g.extend({valHooks:{option:{get:function(a){var c=g.find.attr(a,"value");return c??In(g.text(a))}},select:{get:function(a){var c,u,d,v=a.options,b=a.selectedIndex,I=a.type==="select-one",U=I?null:[],Z=I?b+1:v.length;for(b<0?d=Z:d=I?b:0;d<Z;d++)if(u=v[d],(u.selected||d===b)&&!u.disabled&&(!u.parentNode.disabled||!le(u.parentNode,"optgroup"))){if(c=g(u).val(),I)return c;U.push(c)}return U},set:function(a,c){for(var u,d,v=a.options,b=g.makeArray(c),I=v.length;I--;)d=v[I],(d.selected=g.inArray(g.valHooks.option.get(d),b)>-1)&&(u=!0);return u||(a.selectedIndex=-1),b}}}}),g.each(["radio","checkbox"],function(){g.valHooks[this]={set:function(a,c){if(Array.isArray(c))return a.checked=g.inArray(g(a).val(),c)>-1}},N.checkOn||(g.valHooks[this].get=function(a){return a.getAttribute("value")===null?"on":a.value})}),N.focusin="onfocusin"in e;var x=/^(?:focusinfocus|focusoutblur)$/,O=function(a){a.stopPropagation()};g.extend(g.event,{trigger:function(a,c,u,d){var v,b,I,U,Z,se,me,Ne,pe=[u||G],Ee=y.call(a,"type")?a.type:a,ht=y.call(a,"namespace")?a.namespace.split("."):[];if(b=Ne=I=u=u||G,!(u.nodeType===3||u.nodeType===8)&&!x.test(Ee+g.event.triggered)&&(Ee.indexOf(".")>-1&&(ht=Ee.split("."),Ee=ht.shift(),ht.sort()),Z=Ee.indexOf(":")<0&&"on"+Ee,a=a[g.expando]?a:new g.Event(Ee,typeof a=="object"&&a),a.isTrigger=d?2:3,a.namespace=ht.join("."),a.rnamespace=a.namespace?new RegExp("(^|\\.)"+ht.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,a.result=void 0,a.target||(a.target=u),c=c==null?[a]:g.makeArray(c,[a]),me=g.event.special[Ee]||{},!(!d&&me.trigger&&me.trigger.apply(u,c)===!1))){if(!d&&!me.noBubble&&!X(u)){for(U=me.delegateType||Ee,x.test(U+Ee)||(b=b.parentNode);b;b=b.parentNode)pe.push(b),I=b;I===(u.ownerDocument||G)&&pe.push(I.defaultView||I.parentWindow||e)}for(v=0;(b=pe[v++])&&!a.isPropagationStopped();)Ne=b,a.type=v>1?U:me.bindType||Ee,se=($.get(b,"events")||Object.create(null))[a.type]&&$.get(b,"handle"),se&&se.apply(b,c),se=Z&&b[Z],se&&se.apply&&S(b)&&(a.result=se.apply(b,c),a.result===!1&&a.preventDefault());return a.type=Ee,!d&&!a.isDefaultPrevented()&&(!me._default||me._default.apply(pe.pop(),c)===!1)&&S(u)&&Z&&F(u[Ee])&&!X(u)&&(I=u[Z],I&&(u[Z]=null),g.event.triggered=Ee,a.isPropagationStopped()&&Ne.addEventListener(Ee,O),u[Ee](),a.isPropagationStopped()&&Ne.removeEventListener(Ee,O),g.event.triggered=void 0,I&&(u[Z]=I)),a.result}},simulate:function(a,c,u){var d=g.extend(new g.Event,u,{type:a,isSimulated:!0});g.event.trigger(d,null,c)}}),g.fn.extend({trigger:function(a,c){return this.each(function(){g.event.trigger(a,c,this)})},triggerHandler:function(a,c){var u=this[0];if(u)return g.event.trigger(a,c,u,!0)}}),N.focusin||g.each({focus:"focusin",blur:"focusout"},function(a,c){var u=function(d){g.event.simulate(c,d.target,g.event.fix(d))};g.event.special[c]={setup:function(){var d=this.ownerDocument||this.document||this,v=$.access(d,c);v||d.addEventListener(a,u,!0),$.access(d,c,(v||0)+1)},teardown:function(){var d=this.ownerDocument||this.document||this,v=$.access(d,c)-1;v?$.access(d,c,v):(d.removeEventListener(a,u,!0),$.remove(d,c))}}});var W=e.location,Y={guid:Date.now()},j=/\?/;g.parseXML=function(a){var c,u;if(!a||typeof a!="string")return null;try{c=new e.DOMParser().parseFromString(a,"text/xml")}catch{}return u=c&&c.getElementsByTagName("parsererror")[0],(!c||u)&&g.error("Invalid XML: "+(u?g.map(u.childNodes,function(d){return d.textContent}).join(`
`):a)),c};var q=/\[\]$/,ne=/\r?\n/g,be=/^(?:submit|button|image|reset|file)$/i,Oe=/^(?:input|select|textarea|keygen)/i;function we(a,c,u,d){var v;if(Array.isArray(c))g.each(c,function(b,I){u||q.test(a)?d(a,I):we(a+"["+(typeof I=="object"&&I!=null?b:"")+"]",I,u,d)});else if(!u&&ae(c)==="object")for(v in c)we(a+"["+v+"]",c[v],u,d);else d(a,c)}g.param=function(a,c){var u,d=[],v=function(b,I){var U=F(I)?I():I;d[d.length]=encodeURIComponent(b)+"="+encodeURIComponent(U??"")};if(a==null)return"";if(Array.isArray(a)||a.jquery&&!g.isPlainObject(a))g.each(a,function(){v(this.name,this.value)});else for(u in a)we(u,a[u],c,v);return d.join("&")},g.fn.extend({serialize:function(){return g.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=g.prop(this,"elements");return a?g.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!g(this).is(":disabled")&&Oe.test(this.nodeName)&&!be.test(a)&&(this.checked||!kn.test(a))}).map(function(a,c){var u=g(this).val();return u==null?null:Array.isArray(u)?g.map(u,function(d){return{name:c.name,value:d.replace(ne,`\r
`)}}):{name:c.name,value:u.replace(ne,`\r
`)}}).get()}});var ve=/%20/g,Ce=/#.*$/,ze=/([?&])_=[^&]*/,Ae=/^(.*?):[ \t]*([^\r\n]*)$/mg,xe=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Qe=/^(?:GET|HEAD)$/,Fe=/^\/\//,Be={},Re={},vt="*/".concat("*"),ct=G.createElement("a");ct.href=W.href;function pt(a){return function(c,u){typeof c!="string"&&(u=c,c="*");var d,v=0,b=c.toLowerCase().match(z)||[];if(F(u))for(;d=b[v++];)d[0]==="+"?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(u)):(a[d]=a[d]||[]).push(u)}}function ji(a,c,u,d){var v={},b=a===Re;function I(U){var Z;return v[U]=!0,g.each(a[U]||[],function(se,me){var Ne=me(c,u,d);if(typeof Ne=="string"&&!b&&!v[Ne])return c.dataTypes.unshift(Ne),I(Ne),!1;if(b)return!(Z=Ne)}),Z}return I(c.dataTypes[0])||!v["*"]&&I("*")}function nr(a,c){var u,d,v=g.ajaxSettings.flatOptions||{};for(u in c)c[u]!==void 0&&((v[u]?a:d||(d={}))[u]=c[u]);return d&&g.extend(!0,a,d),a}function Fn(a,c,u){for(var d,v,b,I,U=a.contents,Z=a.dataTypes;Z[0]==="*";)Z.shift(),d===void 0&&(d=a.mimeType||c.getResponseHeader("Content-Type"));if(d){for(v in U)if(U[v]&&U[v].test(d)){Z.unshift(v);break}}if(Z[0]in u)b=Z[0];else{for(v in u){if(!Z[0]||a.converters[v+" "+Z[0]]){b=v;break}I||(I=v)}b=b||I}if(b)return b!==Z[0]&&Z.unshift(b),u[b]}function wi(a,c,u,d){var v,b,I,U,Z,se={},me=a.dataTypes.slice();if(me[1])for(I in a.converters)se[I.toLowerCase()]=a.converters[I];for(b=me.shift();b;)if(a.responseFields[b]&&(u[a.responseFields[b]]=c),!Z&&d&&a.dataFilter&&(c=a.dataFilter(c,a.dataType)),Z=b,b=me.shift(),b){if(b==="*")b=Z;else if(Z!=="*"&&Z!==b){if(I=se[Z+" "+b]||se["* "+b],!I){for(v in se)if(U=v.split(" "),U[1]===b&&(I=se[Z+" "+U[0]]||se["* "+U[0]],I)){I===!0?I=se[v]:se[v]!==!0&&(b=U[0],me.unshift(U[1]));break}}if(I!==!0)if(I&&a.throws)c=I(c);else try{c=I(c)}catch(Ne){return{state:"parsererror",error:I?Ne:"No conversion from "+Z+" to "+b}}}}return{state:"success",data:c}}g.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:W.href,type:"GET",isLocal:xe.test(W.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":vt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":g.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,c){return c?nr(nr(a,g.ajaxSettings),c):nr(g.ajaxSettings,a)},ajaxPrefilter:pt(Be),ajaxTransport:pt(Re),ajax:function(a,c){typeof a=="object"&&(c=a,a=void 0),c=c||{};var u,d,v,b,I,U,Z,se,me,Ne,pe=g.ajaxSetup({},c),Ee=pe.context||pe,ht=pe.context&&(Ee.nodeType||Ee.jquery)?g(Ee):g.event,Ct=g.Deferred(),ut=g.Callbacks("once memory"),Bn=pe.statusCode||{},Nn={},Ni={},Gt="canceled",Tt={readyState:0,getResponseHeader:function($t){var bn;if(Z){if(!b)for(b={};bn=Ae.exec(v);)b[bn[1].toLowerCase()+" "]=(b[bn[1].toLowerCase()+" "]||[]).concat(bn[2]);bn=b[$t.toLowerCase()+" "]}return bn==null?null:bn.join(", ")},getAllResponseHeaders:function(){return Z?v:null},setRequestHeader:function($t,bn){return Z==null&&($t=Ni[$t.toLowerCase()]=Ni[$t.toLowerCase()]||$t,Nn[$t]=bn),this},overrideMimeType:function($t){return Z==null&&(pe.mimeType=$t),this},statusCode:function($t){var bn;if($t)if(Z)Tt.always($t[Tt.status]);else for(bn in $t)Bn[bn]=[Bn[bn],$t[bn]];return this},abort:function($t){var bn=$t||Gt;return u&&u.abort(bn),Ei(0,bn),this}};if(Ct.promise(Tt),pe.url=((a||pe.url||W.href)+"").replace(Fe,W.protocol+"//"),pe.type=c.method||c.type||pe.method||pe.type,pe.dataTypes=(pe.dataType||"*").toLowerCase().match(z)||[""],pe.crossDomain==null){U=G.createElement("a");try{U.href=pe.url,U.href=U.href,pe.crossDomain=ct.protocol+"//"+ct.host!=U.protocol+"//"+U.host}catch{pe.crossDomain=!0}}if(pe.data&&pe.processData&&typeof pe.data!="string"&&(pe.data=g.param(pe.data,pe.traditional)),ji(Be,pe,c,Tt),Z)return Tt;se=g.event&&pe.global,se&&g.active++===0&&g.event.trigger("ajaxStart"),pe.type=pe.type.toUpperCase(),pe.hasContent=!Qe.test(pe.type),d=pe.url.replace(Ce,""),pe.hasContent?pe.data&&pe.processData&&(pe.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(pe.data=pe.data.replace(ve,"+")):(Ne=pe.url.slice(d.length),pe.data&&(pe.processData||typeof pe.data=="string")&&(d+=(j.test(d)?"&":"?")+pe.data,delete pe.data),pe.cache===!1&&(d=d.replace(ze,"$1"),Ne=(j.test(d)?"&":"?")+"_="+Y.guid+++Ne),pe.url=d+Ne),pe.ifModified&&(g.lastModified[d]&&Tt.setRequestHeader("If-Modified-Since",g.lastModified[d]),g.etag[d]&&Tt.setRequestHeader("If-None-Match",g.etag[d])),(pe.data&&pe.hasContent&&pe.contentType!==!1||c.contentType)&&Tt.setRequestHeader("Content-Type",pe.contentType),Tt.setRequestHeader("Accept",pe.dataTypes[0]&&pe.accepts[pe.dataTypes[0]]?pe.accepts[pe.dataTypes[0]]+(pe.dataTypes[0]!=="*"?", "+vt+"; q=0.01":""):pe.accepts["*"]);for(me in pe.headers)Tt.setRequestHeader(me,pe.headers[me]);if(pe.beforeSend&&(pe.beforeSend.call(Ee,Tt,pe)===!1||Z))return Tt.abort();if(Gt="abort",ut.add(pe.complete),Tt.done(pe.success),Tt.fail(pe.error),u=ji(Re,pe,c,Tt),!u)Ei(-1,"No Transport");else{if(Tt.readyState=1,se&&ht.trigger("ajaxSend",[Tt,pe]),Z)return Tt;pe.async&&pe.timeout>0&&(I=e.setTimeout(function(){Tt.abort("timeout")},pe.timeout));try{Z=!1,u.send(Nn,Ei)}catch($t){if(Z)throw $t;Ei(-1,$t)}}function Ei($t,bn,ho,fa){var Di,ls,cs,Si,Vr,Xi=bn;Z||(Z=!0,I&&e.clearTimeout(I),u=void 0,v=fa||"",Tt.readyState=$t>0?4:0,Di=$t>=200&&$t<300||$t===304,ho&&(Si=Fn(pe,Tt,ho)),!Di&&g.inArray("script",pe.dataTypes)>-1&&g.inArray("json",pe.dataTypes)<0&&(pe.converters["text script"]=function(){}),Si=wi(pe,Si,Tt,Di),Di?(pe.ifModified&&(Vr=Tt.getResponseHeader("Last-Modified"),Vr&&(g.lastModified[d]=Vr),Vr=Tt.getResponseHeader("etag"),Vr&&(g.etag[d]=Vr)),$t===204||pe.type==="HEAD"?Xi="nocontent":$t===304?Xi="notmodified":(Xi=Si.state,ls=Si.data,cs=Si.error,Di=!cs)):(cs=Xi,($t||!Xi)&&(Xi="error",$t<0&&($t=0))),Tt.status=$t,Tt.statusText=(bn||Xi)+"",Di?Ct.resolveWith(Ee,[ls,Xi,Tt]):Ct.rejectWith(Ee,[Tt,Xi,cs]),Tt.statusCode(Bn),Bn=void 0,se&&ht.trigger(Di?"ajaxSuccess":"ajaxError",[Tt,pe,Di?ls:cs]),ut.fireWith(Ee,[Tt,Xi]),se&&(ht.trigger("ajaxComplete",[Tt,pe]),--g.active||g.event.trigger("ajaxStop")))}return Tt},getJSON:function(a,c,u){return g.get(a,c,u,"json")},getScript:function(a,c){return g.get(a,void 0,c,"script")}}),g.each(["get","post"],function(a,c){g[c]=function(u,d,v,b){return F(d)&&(b=b||v,v=d,d=void 0),g.ajax(g.extend({url:u,type:c,dataType:b,data:d,success:v},g.isPlainObject(u)&&u))}}),g.ajaxPrefilter(function(a){var c;for(c in a.headers)c.toLowerCase()==="content-type"&&(a.contentType=a.headers[c]||"")}),g._evalUrl=function(a,c,u){return g.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(d){g.globalEval(d,c,u)}})},g.fn.extend({wrapAll:function(a){var c;return this[0]&&(F(a)&&(a=a.call(this[0])),c=g(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&c.insertBefore(this[0]),c.map(function(){for(var u=this;u.firstElementChild;)u=u.firstElementChild;return u}).append(this)),this},wrapInner:function(a){return F(a)?this.each(function(c){g(this).wrapInner(a.call(this,c))}):this.each(function(){var c=g(this),u=c.contents();u.length?u.wrapAll(a):c.append(a)})},wrap:function(a){var c=F(a);return this.each(function(u){g(this).wrapAll(c?a.call(this,u):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){g(this).replaceWith(this.childNodes)}),this}}),g.expr.pseudos.hidden=function(a){return!g.expr.pseudos.visible(a)},g.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},g.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var Yi={0:200,1223:204},xi=g.ajaxSettings.xhr();N.cors=!!xi&&"withCredentials"in xi,N.ajax=xi=!!xi,g.ajaxTransport(function(a){var c,u;if(N.cors||xi&&!a.crossDomain)return{send:function(d,v){var b,I=a.xhr();if(I.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(b in a.xhrFields)I[b]=a.xhrFields[b];a.mimeType&&I.overrideMimeType&&I.overrideMimeType(a.mimeType),!a.crossDomain&&!d["X-Requested-With"]&&(d["X-Requested-With"]="XMLHttpRequest");for(b in d)I.setRequestHeader(b,d[b]);c=function(U){return function(){c&&(c=u=I.onload=I.onerror=I.onabort=I.ontimeout=I.onreadystatechange=null,U==="abort"?I.abort():U==="error"?typeof I.status!="number"?v(0,"error"):v(I.status,I.statusText):v(Yi[I.status]||I.status,I.statusText,(I.responseType||"text")!=="text"||typeof I.responseText!="string"?{binary:I.response}:{text:I.responseText},I.getAllResponseHeaders()))}},I.onload=c(),u=I.onerror=I.ontimeout=c("error"),I.onabort!==void 0?I.onabort=u:I.onreadystatechange=function(){I.readyState===4&&e.setTimeout(function(){c&&u()})},c=c("abort");try{I.send(a.hasContent&&a.data||null)}catch(U){if(c)throw U}},abort:function(){c&&c()}}}),g.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),g.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return g.globalEval(a),a}}}),g.ajaxPrefilter("script",function(a){a.cache===void 0&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),g.ajaxTransport("script",function(a){if(a.crossDomain||a.scriptAttrs){var c,u;return{send:function(d,v){c=g("<script>").attr(a.scriptAttrs||{}).prop({charset:a.scriptCharset,src:a.url}).on("load error",u=function(b){c.remove(),u=null,b&&v(b.type==="error"?404:200,b.type)}),G.head.appendChild(c[0])},abort:function(){u&&u()}}}});var ir=[],Qn=/(=)\?(?=&|$)|\?\?/;g.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=ir.pop()||g.expando+"_"+Y.guid++;return this[a]=!0,a}}),g.ajaxPrefilter("json jsonp",function(a,c,u){var d,v,b,I=a.jsonp!==!1&&(Qn.test(a.url)?"url":typeof a.data=="string"&&(a.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Qn.test(a.data)&&"data");if(I||a.dataTypes[0]==="jsonp")return d=a.jsonpCallback=F(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,I?a[I]=a[I].replace(Qn,"$1"+d):a.jsonp!==!1&&(a.url+=(j.test(a.url)?"&":"?")+a.jsonp+"="+d),a.converters["script json"]=function(){return b||g.error(d+" was not called"),b[0]},a.dataTypes[0]="json",v=e[d],e[d]=function(){b=arguments},u.always(function(){v===void 0?g(e).removeProp(d):e[d]=v,a[d]&&(a.jsonpCallback=c.jsonpCallback,ir.push(d)),b&&F(v)&&v(b[0]),b=v=void 0}),"script"}),N.createHTMLDocument=function(){var a=G.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",a.childNodes.length===2}(),g.parseHTML=function(a,c,u){if(typeof a!="string")return[];typeof c=="boolean"&&(u=c,c=!1);var d,v,b;return c||(N.createHTMLDocument?(c=G.implementation.createHTMLDocument(""),d=c.createElement("base"),d.href=G.location.href,c.head.appendChild(d)):c=G),v=Pe.exec(a),b=!u&&[],v?[c.createElement(v[1])]:(v=Gn([a],c,b),b&&b.length&&g(b).remove(),g.merge([],v.childNodes))},g.fn.load=function(a,c,u){var d,v,b,I=this,U=a.indexOf(" ");return U>-1&&(d=In(a.slice(U)),a=a.slice(0,U)),F(c)?(u=c,c=void 0):c&&typeof c=="object"&&(v="POST"),I.length>0&&g.ajax({url:a,type:v||"GET",dataType:"html",data:c}).done(function(Z){b=arguments,I.html(d?g("<div>").append(g.parseHTML(Z)).find(d):Z)}).always(u&&function(Z,se){I.each(function(){u.apply(this,b||[Z.responseText,se,Z])})}),this},g.expr.pseudos.animated=function(a){return g.grep(g.timers,function(c){return a===c.elem}).length},g.offset={setOffset:function(a,c,u){var d,v,b,I,U,Z,se,me=g.css(a,"position"),Ne=g(a),pe={};me==="static"&&(a.style.position="relative"),U=Ne.offset(),b=g.css(a,"top"),Z=g.css(a,"left"),se=(me==="absolute"||me==="fixed")&&(b+Z).indexOf("auto")>-1,se?(d=Ne.position(),I=d.top,v=d.left):(I=parseFloat(b)||0,v=parseFloat(Z)||0),F(c)&&(c=c.call(a,u,g.extend({},U))),c.top!=null&&(pe.top=c.top-U.top+I),c.left!=null&&(pe.left=c.left-U.left+v),"using"in c?c.using.call(a,pe):Ne.css(pe)}},g.fn.extend({offset:function(a){if(arguments.length)return a===void 0?this:this.each(function(v){g.offset.setOffset(this,a,v)});var c,u,d=this[0];if(d)return d.getClientRects().length?(c=d.getBoundingClientRect(),u=d.ownerDocument.defaultView,{top:c.top+u.pageYOffset,left:c.left+u.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var a,c,u,d=this[0],v={top:0,left:0};if(g.css(d,"position")==="fixed")c=d.getBoundingClientRect();else{for(c=this.offset(),u=d.ownerDocument,a=d.offsetParent||u.documentElement;a&&(a===u.body||a===u.documentElement)&&g.css(a,"position")==="static";)a=a.parentNode;a&&a!==d&&a.nodeType===1&&(v=g(a).offset(),v.top+=g.css(a,"borderTopWidth",!0),v.left+=g.css(a,"borderLeftWidth",!0))}return{top:c.top-v.top-g.css(d,"marginTop",!0),left:c.left-v.left-g.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&g.css(a,"position")==="static";)a=a.offsetParent;return a||lt})}}),g.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var u=c==="pageYOffset";g.fn[a]=function(d){return ce(this,function(v,b,I){var U;if(X(v)?U=v:v.nodeType===9&&(U=v.defaultView),I===void 0)return U?U[c]:v[b];U?U.scrollTo(u?U.pageXOffset:I,u?I:U.pageYOffset):v[b]=I},a,d,arguments.length)}}),g.each(["top","left"],function(a,c){g.cssHooks[c]=pr(N.pixelPosition,function(u,d){if(d)return d=zi(u,c),jn.test(d)?g(u).position()[c]+"px":d})}),g.each({Height:"height",Width:"width"},function(a,c){g.each({padding:"inner"+a,content:c,"":"outer"+a},function(u,d){g.fn[d]=function(v,b){var I=arguments.length&&(u||typeof v!="boolean"),U=u||(v===!0||b===!0?"margin":"border");return ce(this,function(Z,se,me){var Ne;return X(Z)?d.indexOf("outer")===0?Z["inner"+a]:Z.document.documentElement["client"+a]:Z.nodeType===9?(Ne=Z.documentElement,Math.max(Z.body["scroll"+a],Ne["scroll"+a],Z.body["offset"+a],Ne["offset"+a],Ne["client"+a])):me===void 0?g.css(Z,se,U):g.style(Z,se,me,U)},c,I?v:void 0,I)}})}),g.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,c){g.fn[c]=function(u){return this.on(c,u)}}),g.fn.extend({bind:function(a,c,u){return this.on(a,null,c,u)},unbind:function(a,c){return this.off(a,null,c)},delegate:function(a,c,u,d){return this.on(c,a,u,d)},undelegate:function(a,c,u){return arguments.length===1?this.off(a,"**"):this.off(c,a||"**",u)},hover:function(a,c){return this.mouseenter(a).mouseleave(c||a)}}),g.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,c){g.fn[c]=function(u,d){return arguments.length>0?this.on(c,null,u,d):this.trigger(c)}});var Fi=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;g.proxy=function(a,c){var u,d,v;if(typeof c=="string"&&(u=a[c],c=a,a=u),!!F(a))return d=s.call(arguments,2),v=function(){return a.apply(c||this,d.concat(s.call(arguments)))},v.guid=a.guid=a.guid||g.guid++,v},g.holdReady=function(a){a?g.readyWait++:g.ready(!0)},g.isArray=Array.isArray,g.parseJSON=JSON.parse,g.nodeName=le,g.isFunction=F,g.isWindow=X,g.camelCase=rt,g.type=ae,g.now=Date.now,g.isNumeric=function(a){var c=g.type(a);return(c==="number"||c==="string")&&!isNaN(a-parseFloat(a))},g.trim=function(a){return a==null?"":(a+"").replace(Fi,"")};var T=e.jQuery,D=e.$;return g.noConflict=function(a){return e.$===g&&(e.$=D),a&&e.jQuery===g&&(e.jQuery=T),g},typeof n>"u"&&(e.jQuery=e.$=g),g})}(Pa)),Pa.exports}var Hc;function c4(){return Hc||(Hc=1,function(t){(function(e){var n=typeof self=="object"&&self.self===self&&self||typeof Kr=="object"&&Kr.global===Kr&&Kr;{var i=a4(),r;try{r=ju()}catch{}e(n,t,i,r)}})(function(e,n,i,r){var s=e.Backbone,o=Array.prototype.slice;n.VERSION="1.4.1",n.$=r,n.noConflict=function(){return e.Backbone=s,this},n.emulateHTTP=!1,n.emulateJSON=!1;var l=n.Events={},h=/\s+/,p,m=function(S,R,$,Q,ue){var fe=0,Me;if($&&typeof $=="object")for(Q!==void 0&&("context"in ue)&&ue.context===void 0&&(ue.context=Q),Me=i.keys($);fe<Me.length;fe++)R=m(S,R,Me[fe],$[Me[fe]],ue);else if($&&h.test($))for(Me=$.split(h);fe<Me.length;fe++)R=S(R,Me[fe],Q,ue);else R=S(R,$,Q,ue);return R};l.on=function(S,R,$){if(this._events=m(y,this._events||{},S,R,{context:$,ctx:this,listening:p}),p){var Q=this._listeners||(this._listeners={});Q[p.id]=p,p.interop=!1}return this},l.listenTo=function(S,R,$){if(!S)return this;var Q=S._listenId||(S._listenId=i.uniqueId("l")),ue=this._listeningTo||(this._listeningTo={}),fe=p=ue[Q];fe||(this._listenId||(this._listenId=i.uniqueId("l")),fe=p=ue[Q]=new G(this,S));var Me=E(S,R,$,this);if(p=void 0,Me)throw Me;return fe.interop&&fe.on(R,$),this};var y=function(S,R,$,Q){if($){var ue=S[R]||(S[R]=[]),fe=Q.context,Me=Q.ctx,tt=Q.listening;tt&&tt.count++,ue.push({callback:$,context:fe,ctx:fe||Me,listening:tt})}return S},E=function(S,R,$,Q){try{S.on(R,$,Q)}catch(ue){return ue}};l.off=function(S,R,$){return this._events?(this._events=m(C,this._events,S,R,{context:$,listeners:this._listeners}),this):this},l.stopListening=function(S,R,$){var Q=this._listeningTo;if(!Q)return this;for(var ue=S?[S._listenId]:i.keys(Q),fe=0;fe<ue.length;fe++){var Me=Q[ue[fe]];if(!Me)break;Me.obj.off(R,$,this),Me.interop&&Me.off(R,$)}return i.isEmpty(Q)&&(this._listeningTo=void 0),this};var C=function(S,R,$,Q){if(S){var ue=Q.context,fe=Q.listeners,Me=0,tt;if(!R&&!ue&&!$){for(tt=i.keys(fe);Me<tt.length;Me++)fe[tt[Me]].cleanup();return}for(tt=R?[R]:i.keys(S);Me<tt.length;Me++){R=tt[Me];var Ke=S[R];if(!Ke)break;for(var at=[],mt=0;mt<Ke.length;mt++){var lt=Ke[mt];if($&&$!==lt.callback&&$!==lt.callback._callback||ue&&ue!==lt.context)at.push(lt);else{var It=lt.listening;It&&It.off(R,$)}}at.length?S[R]=at:delete S[R]}return S}};l.once=function(S,R,$){var Q=m(N,{},S,R,this.off.bind(this));return typeof S=="string"&&$==null&&(R=void 0),this.on(Q,R,$)},l.listenToOnce=function(S,R,$){var Q=m(N,{},R,$,this.stopListening.bind(this,S));return this.listenTo(S,Q)};var N=function(S,R,$,Q){if($){var ue=S[R]=i.once(function(){Q(R,ue),$.apply(this,arguments)});ue._callback=$}return S};l.trigger=function(S){if(!this._events)return this;for(var R=Math.max(0,arguments.length-1),$=Array(R),Q=0;Q<R;Q++)$[Q]=arguments[Q+1];return m(F,this._events,S,void 0,$),this};var F=function(S,R,$,Q){if(S){var ue=S[R],fe=S.all;ue&&fe&&(fe=fe.slice()),ue&&X(ue,Q),fe&&X(fe,[R].concat(Q))}return S},X=function(S,R){var $,Q=-1,ue=S.length,fe=R[0],Me=R[1],tt=R[2];switch(R.length){case 0:for(;++Q<ue;)($=S[Q]).callback.call($.ctx);return;case 1:for(;++Q<ue;)($=S[Q]).callback.call($.ctx,fe);return;case 2:for(;++Q<ue;)($=S[Q]).callback.call($.ctx,fe,Me);return;case 3:for(;++Q<ue;)($=S[Q]).callback.call($.ctx,fe,Me,tt);return;default:for(;++Q<ue;)($=S[Q]).callback.apply($.ctx,R);return}},G=function(S,R){this.id=S._listenId,this.listener=S,this.obj=R,this.interop=!0,this.count=0,this._events=void 0};G.prototype.on=l.on,G.prototype.off=function(S,R){var $;this.interop?(this._events=m(C,this._events,S,R,{context:void 0,listeners:void 0}),$=!this._events):(this.count--,$=this.count===0),$&&this.cleanup()},G.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},l.bind=l.on,l.unbind=l.off,i.extend(n,l);var V=n.Model=function(S,R){var $=S||{};R||(R={}),this.preinitialize.apply(this,arguments),this.cid=i.uniqueId(this.cidPrefix),this.attributes={},R.collection&&(this.collection=R.collection),R.parse&&($=this.parse($,R)||{});var Q=i.result(this,"defaults");$=i.defaults(i.extend({},Q,$),Q),this.set($,R),this.changed={},this.initialize.apply(this,arguments)};i.extend(V.prototype,l,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(S){return i.clone(this.attributes)},sync:function(){return n.sync.apply(this,arguments)},get:function(S){return this.attributes[S]},escape:function(S){return i.escape(this.get(S))},has:function(S){return this.get(S)!=null},matches:function(S){return!!i.iteratee(S,this)(this.attributes)},set:function(S,R,$){if(S==null)return this;var Q;if(typeof S=="object"?(Q=S,$=R):(Q={})[S]=R,$||($={}),!this._validate(Q,$))return!1;var ue=$.unset,fe=$.silent,Me=[],tt=this._changing;this._changing=!0,tt||(this._previousAttributes=i.clone(this.attributes),this.changed={});var Ke=this.attributes,at=this.changed,mt=this._previousAttributes;for(var lt in Q)R=Q[lt],i.isEqual(Ke[lt],R)||Me.push(lt),i.isEqual(mt[lt],R)?delete at[lt]:at[lt]=R,ue?delete Ke[lt]:Ke[lt]=R;if(this.idAttribute in Q){var It=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,It,$)}if(!fe){Me.length&&(this._pending=$);for(var sn=0;sn<Me.length;sn++)this.trigger("change:"+Me[sn],this,Ke[Me[sn]],$)}if(tt)return this;if(!fe)for(;this._pending;)$=this._pending,this._pending=!1,this.trigger("change",this,$);return this._pending=!1,this._changing=!1,this},unset:function(S,R){return this.set(S,void 0,i.extend({},R,{unset:!0}))},clear:function(S){var R={};for(var $ in this.attributes)R[$]=void 0;return this.set(R,i.extend({},S,{unset:!0}))},hasChanged:function(S){return S==null?!i.isEmpty(this.changed):i.has(this.changed,S)},changedAttributes:function(S){if(!S)return this.hasChanged()?i.clone(this.changed):!1;var R=this._changing?this._previousAttributes:this.attributes,$={},Q;for(var ue in S){var fe=S[ue];i.isEqual(R[ue],fe)||($[ue]=fe,Q=!0)}return Q?$:!1},previous:function(S){return S==null||!this._previousAttributes?null:this._previousAttributes[S]},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(S){S=i.extend({parse:!0},S);var R=this,$=S.success;return S.success=function(Q){var ue=S.parse?R.parse(Q,S):Q;if(!R.set(ue,S))return!1;$&&$.call(S.context,R,Q,S),R.trigger("sync",R,Q,S)},rt(this,S),this.sync("read",this,S)},save:function(S,R,$){var Q;S==null||typeof S=="object"?(Q=S,$=R):(Q={})[S]=R,$=i.extend({validate:!0,parse:!0},$);var ue=$.wait;if(Q&&!ue){if(!this.set(Q,$))return!1}else if(!this._validate(Q,$))return!1;var fe=this,Me=$.success,tt=this.attributes;$.success=function(mt){fe.attributes=tt;var lt=$.parse?fe.parse(mt,$):mt;if(ue&&(lt=i.extend({},Q,lt)),lt&&!fe.set(lt,$))return!1;Me&&Me.call($.context,fe,mt,$),fe.trigger("sync",fe,mt,$)},rt(this,$),Q&&ue&&(this.attributes=i.extend({},tt,Q));var Ke=this.isNew()?"create":$.patch?"patch":"update";Ke==="patch"&&!$.attrs&&($.attrs=Q);var at=this.sync(Ke,this,$);return this.attributes=tt,at},destroy:function(S){S=S?i.clone(S):{};var R=this,$=S.success,Q=S.wait,ue=function(){R.stopListening(),R.trigger("destroy",R,R.collection,S)};S.success=function(Me){Q&&ue(),$&&$.call(S.context,R,Me,S),R.isNew()||R.trigger("sync",R,Me,S)};var fe=!1;return this.isNew()?i.defer(S.success):(rt(this,S),fe=this.sync("delete",this,S)),Q||ue(),fe},url:function(){var S=i.result(this,"urlRoot")||i.result(this.collection,"url")||Ge();if(this.isNew())return S;var R=this.get(this.idAttribute);return S.replace(/[^\/]$/,"$&/")+encodeURIComponent(R)},parse:function(S,R){return S},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(S){return this._validate({},i.extend({},S,{validate:!0}))},_validate:function(S,R){if(!R.validate||!this.validate)return!0;S=i.extend({},this.attributes,S);var $=this.validationError=this.validate(S,R)||null;return $?(this.trigger("invalid",this,$,i.extend(R,{validationError:$})),!1):!0}});var K=n.Collection=function(S,R){R||(R={}),this.preinitialize.apply(this,arguments),R.model&&(this.model=R.model),R.comparator!==void 0&&(this.comparator=R.comparator),this._reset(),this.initialize.apply(this,arguments),S&&this.reset(S,i.extend({silent:!0},R))},ae={add:!0,remove:!0,merge:!0},de={add:!0,remove:!1},g=function(S,R,$){$=Math.min(Math.max($,0),S.length);var Q=Array(S.length-$),ue=R.length,fe;for(fe=0;fe<Q.length;fe++)Q[fe]=S[fe+$];for(fe=0;fe<ue;fe++)S[fe+$]=R[fe];for(fe=0;fe<Q.length;fe++)S[fe+ue+$]=Q[fe]};i.extend(K.prototype,l,{model:V,preinitialize:function(){},initialize:function(){},toJSON:function(S){return this.map(function(R){return R.toJSON(S)})},sync:function(){return n.sync.apply(this,arguments)},add:function(S,R){return this.set(S,i.extend({merge:!1},R,de))},remove:function(S,R){R=i.extend({},R);var $=!i.isArray(S);S=$?[S]:S.slice();var Q=this._removeModels(S,R);return!R.silent&&Q.length&&(R.changes={added:[],merged:[],removed:Q},this.trigger("update",this,R)),$?Q[0]:Q},set:function(S,R){if(S!=null){R=i.extend({},ae,R),R.parse&&!this._isModel(S)&&(S=this.parse(S,R)||[]);var $=!i.isArray(S);S=$?[S]:S.slice();var Q=R.at;Q!=null&&(Q=+Q),Q>this.length&&(Q=this.length),Q<0&&(Q+=this.length+1);var ue=[],fe=[],Me=[],tt=[],Ke={},at=R.add,mt=R.merge,lt=R.remove,It=!1,sn=this.comparator&&Q==null&&R.sort!==!1,ln=i.isString(this.comparator)?this.comparator:null,Ft,Dt;for(Dt=0;Dt<S.length;Dt++){Ft=S[Dt];var un=this.get(Ft);if(un){if(mt&&Ft!==un){var fn=this._isModel(Ft)?Ft.attributes:Ft;R.parse&&(fn=un.parse(fn,R)),un.set(fn,R),Me.push(un),sn&&!It&&(It=un.hasChanged(ln))}Ke[un.cid]||(Ke[un.cid]=!0,ue.push(un)),S[Dt]=un}else at&&(Ft=S[Dt]=this._prepareModel(Ft,R),Ft&&(fe.push(Ft),this._addReference(Ft,R),Ke[Ft.cid]=!0,ue.push(Ft)))}if(lt){for(Dt=0;Dt<this.length;Dt++)Ft=this.models[Dt],Ke[Ft.cid]||tt.push(Ft);tt.length&&this._removeModels(tt,R)}var kn=!1,Lt=!sn&&at&&lt;if(ue.length&&Lt?(kn=this.length!==ue.length||i.some(this.models,function(En,Jt){return En!==ue[Jt]}),this.models.length=0,g(this.models,ue,0),this.length=this.models.length):fe.length&&(sn&&(It=!0),g(this.models,fe,Q??this.length),this.length=this.models.length),It&&this.sort({silent:!0}),!R.silent){for(Dt=0;Dt<fe.length;Dt++)Q!=null&&(R.index=Q+Dt),Ft=fe[Dt],Ft.trigger("add",Ft,this,R);(It||kn)&&this.trigger("sort",this,R),(fe.length||tt.length||Me.length)&&(R.changes={added:fe,removed:tt,merged:Me},this.trigger("update",this,R))}return $?S[0]:S}},reset:function(S,R){R=R?i.clone(R):{};for(var $=0;$<this.models.length;$++)this._removeReference(this.models[$],R);return R.previousModels=this.models,this._reset(),S=this.add(S,i.extend({silent:!0},R)),R.silent||this.trigger("reset",this,R),S},push:function(S,R){return this.add(S,i.extend({at:this.length},R))},pop:function(S){var R=this.at(this.length-1);return this.remove(R,S)},unshift:function(S,R){return this.add(S,i.extend({at:0},R))},shift:function(S){var R=this.at(0);return this.remove(R,S)},slice:function(){return o.apply(this.models,arguments)},get:function(S){if(S!=null)return this._byId[S]||this._byId[this.modelId(this._isModel(S)?S.attributes:S,S.idAttribute)]||S.cid&&this._byId[S.cid]},has:function(S){return this.get(S)!=null},at:function(S){return S<0&&(S+=this.length),this.models[S]},where:function(S,R){return this[R?"find":"filter"](S)},findWhere:function(S){return this.where(S,!0)},sort:function(S){var R=this.comparator;if(!R)throw new Error("Cannot sort a set without a comparator");S||(S={});var $=R.length;return i.isFunction(R)&&(R=R.bind(this)),$===1||i.isString(R)?this.models=this.sortBy(R):this.models.sort(R),S.silent||this.trigger("sort",this,S),this},pluck:function(S){return this.map(S+"")},fetch:function(S){S=i.extend({parse:!0},S);var R=S.success,$=this;return S.success=function(Q){var ue=S.reset?"reset":"set";$[ue](Q,S),R&&R.call(S.context,$,Q,S),$.trigger("sync",$,Q,S)},rt(this,S),this.sync("read",this,S)},create:function(S,R){R=R?i.clone(R):{};var $=R.wait;if(S=this._prepareModel(S,R),!S)return!1;$||this.add(S,R);var Q=this,ue=R.success;return R.success=function(fe,Me,tt){$&&Q.add(fe,tt),ue&&ue.call(tt.context,fe,Me,tt)},S.save(null,R),S},parse:function(S,R){return S},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(S,R){return S[R||this.model.prototype.idAttribute||"id"]},values:function(){return new re(this,_e)},keys:function(){return new re(this,Te)},entries:function(){return new re(this,ye)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(S,R){if(this._isModel(S))return S.collection||(S.collection=this),S;R=R?i.clone(R):{},R.collection=this;var $;return this.model.prototype?$=new this.model(S,R):$=this.model(S,R),$.validationError?(this.trigger("invalid",this,$.validationError,R),!1):$},_removeModels:function(S,R){for(var $=[],Q=0;Q<S.length;Q++){var ue=this.get(S[Q]);if(ue){var fe=this.indexOf(ue);this.models.splice(fe,1),this.length--,delete this._byId[ue.cid];var Me=this.modelId(ue.attributes,ue.idAttribute);Me!=null&&delete this._byId[Me],R.silent||(R.index=fe,ue.trigger("remove",ue,this,R)),$.push(ue),this._removeReference(ue,R)}}return $},_isModel:function(S){return S instanceof V},_addReference:function(S,R){this._byId[S.cid]=S;var $=this.modelId(S.attributes,S.idAttribute);$!=null&&(this._byId[$]=S),S.on("all",this._onModelEvent,this)},_removeReference:function(S,R){delete this._byId[S.cid];var $=this.modelId(S.attributes,S.idAttribute);$!=null&&delete this._byId[$],this===S.collection&&delete S.collection,S.off("all",this._onModelEvent,this)},_onModelEvent:function(S,R,$,Q){if(R){if((S==="add"||S==="remove")&&$!==this)return;if(S==="destroy"&&this.remove(R,Q),S==="changeId"){var ue=this.modelId(R.previousAttributes(),R.idAttribute),fe=this.modelId(R.attributes,R.idAttribute);ue!=null&&delete this._byId[ue],fe!=null&&(this._byId[fe]=R)}}this.trigger.apply(this,arguments)}});var H=typeof Symbol=="function"&&Symbol.iterator;H&&(K.prototype[H]=K.prototype.values);var re=function(S,R){this._collection=S,this._kind=R,this._index=0},_e=1,Te=2,ye=3;H&&(re.prototype[H]=function(){return this}),re.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var S=this._collection.at(this._index);this._index++;var R;if(this._kind===_e)R=S;else{var $=this._collection.modelId(S.attributes,S.idAttribute);this._kind===Te?R=$:R=[$,S]}return{value:R,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var le=n.View=function(S){this.cid=i.uniqueId("view"),this.preinitialize.apply(this,arguments),i.extend(this,i.pick(S,Le)),this._ensureElement(),this.initialize.apply(this,arguments)},Pe=/^(\S+)\s*(.*)$/,Le=["model","collection","el","id","attributes","className","tagName","events"];i.extend(le.prototype,l,{tagName:"div",$:function(S){return this.$el.find(S)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(S){return this.undelegateEvents(),this._setElement(S),this.delegateEvents(),this},_setElement:function(S){this.$el=S instanceof n.$?S:n.$(S),this.el=this.$el[0]},delegateEvents:function(S){if(S||(S=i.result(this,"events")),!S)return this;this.undelegateEvents();for(var R in S){var $=S[R];if(i.isFunction($)||($=this[$]),!!$){var Q=R.match(Pe);this.delegate(Q[1],Q[2],$.bind(this))}}return this},delegate:function(S,R,$){return this.$el.on(S+".delegateEvents"+this.cid,R,$),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(S,R,$){return this.$el.off(S+".delegateEvents"+this.cid,R,$),this},_createElement:function(S){return document.createElement(S)},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"));else{var S=i.extend({},i.result(this,"attributes"));this.id&&(S.id=i.result(this,"id")),this.className&&(S.class=i.result(this,"className")),this.setElement(this._createElement(i.result(this,"tagName"))),this._setAttributes(S)}},_setAttributes:function(S){this.$el.attr(S)}});var Ze=function(S,R,$,Q){switch(R){case 1:return function(){return S[$](this[Q])};case 2:return function(ue){return S[$](this[Q],ue)};case 3:return function(ue,fe){return S[$](this[Q],Je(ue,this),fe)};case 4:return function(ue,fe,Me){return S[$](this[Q],Je(ue,this),fe,Me)};default:return function(){var ue=o.call(arguments);return ue.unshift(this[Q]),S[$].apply(S,ue)}}},je=function(S,R,$,Q){i.each($,function(ue,fe){R[fe]&&(S.prototype[fe]=Ze(R,ue,fe,Q))})},Je=function(S,R){return i.isFunction(S)?S:i.isObject(S)&&!R._isModel(S)?Ye(S):i.isString(S)?function($){return $.get(S)}:S},Ye=function(S){var R=i.matches(S);return function($){return R($.attributes)}},it={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},ft={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};i.each([[K,it,"models"],[V,ft,"attributes"]],function(S){var R=S[0],$=S[1],Q=S[2];R.mixin=function(ue){var fe=i.reduce(i.functions(ue),function(Me,tt){return Me[tt]=0,Me},{});je(R,ue,fe,Q)},je(R,i,$,Q)}),n.sync=function(S,R,$){var Q=z[S];i.defaults($||($={}),{emulateHTTP:n.emulateHTTP,emulateJSON:n.emulateJSON});var ue={type:Q,dataType:"json"};if($.url||(ue.url=i.result(R,"url")||Ge()),$.data==null&&R&&(S==="create"||S==="update"||S==="patch")&&(ue.contentType="application/json",ue.data=JSON.stringify($.attrs||R.toJSON($))),$.emulateJSON&&(ue.contentType="application/x-www-form-urlencoded",ue.data=ue.data?{model:ue.data}:{}),$.emulateHTTP&&(Q==="PUT"||Q==="DELETE"||Q==="PATCH")){ue.type="POST",$.emulateJSON&&(ue.data._method=Q);var fe=$.beforeSend;$.beforeSend=function(Ke){if(Ke.setRequestHeader("X-HTTP-Method-Override",Q),fe)return fe.apply(this,arguments)}}ue.type!=="GET"&&!$.emulateJSON&&(ue.processData=!1);var Me=$.error;$.error=function(Ke,at,mt){$.textStatus=at,$.errorThrown=mt,Me&&Me.call($.context,Ke,at,mt)};var tt=$.xhr=n.ajax(i.extend(ue,$));return R.trigger("request",R,tt,$),tt};var z={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};n.ajax=function(){return n.$.ajax.apply(n.$,arguments)};var M=n.Router=function(S){S||(S={}),this.preinitialize.apply(this,arguments),S.routes&&(this.routes=S.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,P=/(\(\?)?:\w+/g,B=/\*\w+/g,te=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(M.prototype,l,{preinitialize:function(){},initialize:function(){},route:function(S,R,$){i.isRegExp(S)||(S=this._routeToRegExp(S)),i.isFunction(R)&&($=R,R=""),$||($=this[R]);var Q=this;return n.history.route(S,function(ue){var fe=Q._extractParameters(S,ue);Q.execute($,fe,R)!==!1&&(Q.trigger.apply(Q,["route:"+R].concat(fe)),Q.trigger("route",R,fe),n.history.trigger("route",Q,R,fe))}),this},execute:function(S,R,$){S&&S.apply(this,R)},navigate:function(S,R){return n.history.navigate(S,R),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var S,R=i.keys(this.routes);(S=R.pop())!=null;)this.route(S,this.routes[S])}},_routeToRegExp:function(S){return S=S.replace(te,"\\$&").replace(k,"(?:$1)?").replace(P,function(R,$){return $?R:"([^/?]+)"}).replace(B,"([^?]*?)"),new RegExp("^"+S+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(S,R){var $=S.exec(R).slice(1);return i.map($,function(Q,ue){return ue===$.length-1?Q||null:Q?decodeURIComponent(Q):null})}});var ee=n.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},ge=/^[#\/]|\s+$/g,ce=/^\/+|\/+$/g,Se=/#.*$/;ee.started=!1,i.extend(ee.prototype,l,{interval:50,atRoot:function(){var S=this.location.pathname.replace(/[^\/]$/,"$&/");return S===this.root&&!this.getSearch()},matchRoot:function(){var S=this.decodeFragment(this.location.pathname),R=S.slice(0,this.root.length-1)+"/";return R===this.root},decodeFragment:function(S){return decodeURI(S.replace(/%25/g,"%2525"))},getSearch:function(){var S=this.location.href.replace(/#.*/,"").match(/\?.+/);return S?S[0]:""},getHash:function(S){var R=(S||this).location.href.match(/#(.*)$/);return R?R[1]:""},getPath:function(){var S=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return S.charAt(0)==="/"?S.slice(1):S},getFragment:function(S){return S==null&&(this._usePushState||!this._wantsHashChange?S=this.getPath():S=this.getHash()),S.replace(ge,"")},start:function(S){if(ee.started)throw new Error("Backbone.history has already been started");if(ee.started=!0,this.options=i.extend({root:"/"},this.options,S),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.history&&this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(ce,"/"),this._wantsHashChange&&this._wantsPushState)if(!this._hasPushState&&!this.atRoot()){var R=this.root.slice(0,-1)||"/";return this.location.replace(R+"#"+this.getPath()),!0}else this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var $=document.body,Q=$.insertBefore(this.iframe,$.firstChild).contentWindow;Q.document.open(),Q.document.close(),Q.location.hash="#"+this.fragment}var ue=window.addEventListener||function(fe,Me){return attachEvent("on"+fe,Me)};if(this._usePushState?ue("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?ue("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var S=window.removeEventListener||function(R,$){return detachEvent("on"+R,$)};this._usePushState?S("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&S("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),ee.started=!1},route:function(S,R){this.handlers.unshift({route:S,callback:R})},checkUrl:function(S){var R=this.getFragment();if(R===this.fragment&&this.iframe&&(R=this.getHash(this.iframe.contentWindow)),R===this.fragment)return!1;this.iframe&&this.navigate(R),this.loadUrl()},loadUrl:function(S){return this.matchRoot()?(S=this.fragment=this.getFragment(S),i.some(this.handlers,function(R){if(R.route.test(S))return R.callback(S),!0})):!1},navigate:function(S,R){if(!ee.started)return!1;(!R||R===!0)&&(R={trigger:!!R}),S=this.getFragment(S||"");var $=this.root;(S===""||S.charAt(0)==="?")&&($=$.slice(0,-1)||"/");var Q=$+S;S=S.replace(Se,"");var ue=this.decodeFragment(S);if(this.fragment!==ue){if(this.fragment=ue,this._usePushState)this.history[R.replace?"replaceState":"pushState"]({},document.title,Q);else if(this._wantsHashChange){if(this._updateHash(this.location,S,R.replace),this.iframe&&S!==this.getHash(this.iframe.contentWindow)){var fe=this.iframe.contentWindow;R.replace||(fe.document.open(),fe.document.close()),this._updateHash(fe.location,S,R.replace)}}else return this.location.assign(Q);if(R.trigger)return this.loadUrl(S)}},_updateHash:function(S,R,$){if($){var Q=S.href.replace(/(javascript:|#).*$/,"");S.replace(Q+"#"+R)}else S.hash="#"+R}}),n.history=new ee;var Ve=function(S,R){var $=this,Q;return S&&i.has(S,"constructor")?Q=S.constructor:Q=function(){return $.apply(this,arguments)},i.extend(Q,$,R),Q.prototype=i.create($.prototype,S),Q.prototype.constructor=Q,Q.__super__=$.prototype,Q};V.extend=K.extend=M.extend=le.extend=ee.extend=Ve;var Ge=function(){throw new Error('A "url" property or function must be specified')},rt=function(S,R){var $=R.error;R.error=function(Q){$&&$.call(R.context,S,Q,R),S.trigger("error",S,Q,R)}};return n})}(Gl)),Gl}var h4=c4();const dt=vl(h4);var u4=ju();const A=vl(u4);var Yu="1.13.4",Vc=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},yl=Array.prototype,d2=Object.prototype,Uc=typeof Symbol<"u"?Symbol.prototype:null,f4=yl.push,na=yl.slice,Fo=d2.toString,d4=d2.hasOwnProperty,Xu=typeof ArrayBuffer<"u",p4=typeof DataView<"u",g4=Array.isArray,jc=Object.keys,Yc=Object.create,Xc=Xu&&ArrayBuffer.isView,m4=isNaN,_4=isFinite,qu=!{toString:null}.propertyIsEnumerable("toString"),qc=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],v4=Math.pow(2,53)-1;function ki(t,e){return e=e==null?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),i=Array(n),r=0;r<n;r++)i[r]=arguments[r+e];switch(e){case 0:return t.call(this,i);case 1:return t.call(this,arguments[0],i);case 2:return t.call(this,arguments[0],arguments[1],i)}var s=Array(e+1);for(r=0;r<e;r++)s[r]=arguments[r];return s[e]=i,t.apply(this,s)}}function Ts(t){var e=typeof t;return e==="function"||e==="object"&&!!t}function y4(t){return t===null}function Zu(t){return t===void 0}function Gu(t){return t===!0||t===!1||Fo.call(t)==="[object Boolean]"}function b4(t){return!!(t&&t.nodeType===1)}function si(t){var e="[object "+t+"]";return function(n){return Fo.call(n)===e}}const p2=si("String"),Ku=si("Number"),w4=si("Date"),x4=si("RegExp"),E4=si("Error"),Ju=si("Symbol"),Qu=si("ArrayBuffer");var ef=si("Function"),S4=Vc.document&&Vc.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof S4!="function"&&(ef=function(t){return typeof t=="function"||!1});const gi=ef,tf=si("Object");var nf=p4&&tf(new DataView(new ArrayBuffer(8))),g2=typeof Map<"u"&&tf(new Map),T4=si("DataView");function C4(t){return t!=null&&gi(t.getInt8)&&Qu(t.buffer)}const Ja=nf?C4:T4,Cs=g4||si("Array");function os(t,e){return t!=null&&d4.call(t,e)}var C1=si("Arguments");(function(){C1(arguments)||(C1=function(t){return os(t,"callee")})})();const m2=C1;function k4(t){return!Ju(t)&&_4(t)&&!isNaN(parseFloat(t))}function rf(t){return Ku(t)&&m4(t)}function sf(t){return function(){return t}}function of(t){return function(e){var n=t(e);return typeof n=="number"&&n>=0&&n<=v4}}function af(t){return function(e){return e==null?void 0:e[t]}}const Qa=af("byteLength"),A4=of(Qa);var I4=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function O4(t){return Xc?Xc(t)&&!Ja(t):A4(t)&&I4.test(Fo.call(t))}const lf=Xu?O4:sf(!1),Ai=af("length");function M4(t){for(var e={},n=t.length,i=0;i<n;++i)e[t[i]]=!0;return{contains:function(r){return e[r]===!0},push:function(r){return e[r]=!0,t.push(r)}}}function cf(t,e){e=M4(e);var n=qc.length,i=t.constructor,r=gi(i)&&i.prototype||d2,s="constructor";for(os(t,s)&&!e.contains(s)&&e.push(s);n--;)s=qc[n],s in t&&t[s]!==r[s]&&!e.contains(s)&&e.push(s)}function Un(t){if(!Ts(t))return[];if(jc)return jc(t);var e=[];for(var n in t)os(t,n)&&e.push(n);return qu&&cf(t,e),e}function z4(t){if(t==null)return!0;var e=Ai(t);return typeof e=="number"&&(Cs(t)||p2(t)||m2(t))?e===0:Ai(Un(t))===0}function hf(t,e){var n=Un(e),i=n.length;if(t==null)return!i;for(var r=Object(t),s=0;s<i;s++){var o=n[s];if(e[o]!==r[o]||!(o in r))return!1}return!0}function Yt(t){if(t instanceof Yt)return t;if(!(this instanceof Yt))return new Yt(t);this._wrapped=t}Yt.VERSION=Yu;Yt.prototype.value=function(){return this._wrapped};Yt.prototype.valueOf=Yt.prototype.toJSON=Yt.prototype.value;Yt.prototype.toString=function(){return String(this._wrapped)};function Zc(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,Qa(t))}var Gc="[object DataView]";function k1(t,e,n,i){if(t===e)return t!==0||1/t===1/e;if(t==null||e==null)return!1;if(t!==t)return e!==e;var r=typeof t;return r!=="function"&&r!=="object"&&typeof e!="object"?!1:uf(t,e,n,i)}function uf(t,e,n,i){t instanceof Yt&&(t=t._wrapped),e instanceof Yt&&(e=e._wrapped);var r=Fo.call(t);if(r!==Fo.call(e))return!1;if(nf&&r=="[object Object]"&&Ja(t)){if(!Ja(e))return!1;r=Gc}switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:+t==0?1/+t===1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return Uc.valueOf.call(t)===Uc.valueOf.call(e);case"[object ArrayBuffer]":case Gc:return uf(Zc(t),Zc(e),n,i)}var s=r==="[object Array]";if(!s&&lf(t)){var o=Qa(t);if(o!==Qa(e))return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;s=!0}if(!s){if(typeof t!="object"||typeof e!="object")return!1;var l=t.constructor,h=e.constructor;if(l!==h&&!(gi(l)&&l instanceof l&&gi(h)&&h instanceof h)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],i=i||[];for(var p=n.length;p--;)if(n[p]===t)return i[p]===e;if(n.push(t),i.push(e),s){if(p=t.length,p!==e.length)return!1;for(;p--;)if(!k1(t[p],e[p],n,i))return!1}else{var m=Un(t),y;if(p=m.length,Un(e).length!==p)return!1;for(;p--;)if(y=m[p],!(os(e,y)&&k1(t[y],e[y],n,i)))return!1}return n.pop(),i.pop(),!0}function R4(t,e){return k1(t,e)}function ia(t){if(!Ts(t))return[];var e=[];for(var n in t)e.push(n);return qu&&cf(t,e),e}function _2(t){var e=Ai(t);return function(n){if(n==null)return!1;var i=ia(n);if(Ai(i))return!1;for(var r=0;r<e;r++)if(!gi(n[t[r]]))return!1;return t!==pf||!gi(n[v2])}}var v2="forEach",ff="has",y2=["clear","delete"],df=["get",ff,"set"],F4=y2.concat(v2,df),pf=y2.concat(df),N4=["add"].concat(y2,v2,ff);const D4=g2?_2(F4):si("Map"),L4=g2?_2(pf):si("WeakMap"),P4=g2?_2(N4):si("Set"),$4=si("WeakSet");function ao(t){for(var e=Un(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=t[e[r]];return i}function B4(t){for(var e=Un(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=[e[r],t[e[r]]];return i}function gf(t){for(var e={},n=Un(t),i=0,r=n.length;i<r;i++)e[t[n[i]]]=n[i];return e}function A1(t){var e=[];for(var n in t)gi(t[n])&&e.push(n);return e.sort()}function b2(t,e){return function(n){var i=arguments.length;if(e&&(n=Object(n)),i<2||n==null)return n;for(var r=1;r<i;r++)for(var s=arguments[r],o=t(s),l=o.length,h=0;h<l;h++){var p=o[h];(!e||n[p]===void 0)&&(n[p]=s[p])}return n}}const mf=b2(ia),el=b2(Un),_f=b2(ia,!0);function W4(){return function(){}}function vf(t){if(!Ts(t))return{};if(Yc)return Yc(t);var e=W4();e.prototype=t;var n=new e;return e.prototype=null,n}function H4(t,e){var n=vf(t);return e&&el(n,e),n}function V4(t){return Ts(t)?Cs(t)?t.slice():mf({},t):t}function U4(t,e){return e(t),t}function yf(t){return Cs(t)?t:[t]}Yt.toPath=yf;function ra(t){return Yt.toPath(t)}function w2(t,e){for(var n=e.length,i=0;i<n;i++){if(t==null)return;t=t[e[i]]}return n?t:void 0}function bf(t,e,n){var i=w2(t,ra(e));return Zu(i)?n:i}function j4(t,e){e=ra(e);for(var n=e.length,i=0;i<n;i++){var r=e[i];if(!os(t,r))return!1;t=t[r]}return!!n}function x2(t){return t}function No(t){return t=el({},t),function(e){return hf(e,t)}}function E2(t){return t=ra(t),function(e){return w2(e,t)}}function sa(t,e,n){if(e===void 0)return t;switch(n??3){case 1:return function(i){return t.call(e,i)};case 3:return function(i,r,s){return t.call(e,i,r,s)};case 4:return function(i,r,s,o){return t.call(e,i,r,s,o)}}return function(){return t.apply(e,arguments)}}function wf(t,e,n){return t==null?x2:gi(t)?sa(t,e,n):Ts(t)&&!Cs(t)?No(t):E2(t)}function S2(t,e){return wf(t,e,1/0)}Yt.iteratee=S2;function Ii(t,e,n){return Yt.iteratee!==S2?Yt.iteratee(t,e):wf(t,e,n)}function Y4(t,e,n){e=Ii(e,n);for(var i=Un(t),r=i.length,s={},o=0;o<r;o++){var l=i[o];s[l]=e(t[l],l,t)}return s}function xf(){}function X4(t){return t==null?xf:function(e){return bf(t,e)}}function q4(t,e,n){var i=Array(Math.max(0,t));e=sa(e,n,1);for(var r=0;r<t;r++)i[r]=e(r);return i}function I1(t,e){return e==null&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}const Do=Date.now||function(){return new Date().getTime()};function Ef(t){var e=function(s){return t[s]},n="(?:"+Un(t).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(s){return s=s==null?"":""+s,i.test(s)?s.replace(r,e):s}}const Sf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Z4=Ef(Sf),G4=gf(Sf),K4=Ef(G4),J4=Yt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Kl=/(.)^/,Q4={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},e_=/\\|'|\r|\n|\u2028|\u2029/g;function t_(t){return"\\"+Q4[t]}var n_=/^\s*(\w|\$)+\s*$/;function i_(t,e,n){!e&&n&&(e=n),e=_f({},e,Yt.templateSettings);var i=RegExp([(e.escape||Kl).source,(e.interpolate||Kl).source,(e.evaluate||Kl).source].join("|")+"|$","g"),r=0,s="__p+='";t.replace(i,function(p,m,y,E,C){return s+=t.slice(r,C).replace(e_,t_),r=C+p.length,m?s+=`'+
((__t=(`+m+`))==null?'':_.escape(__t))+
'`:y?s+=`'+
((__t=(`+y+`))==null?'':__t)+
'`:E&&(s+=`';
`+E+`
__p+='`),p}),s+=`';
`;var o=e.variable;if(o){if(!n_.test(o))throw new Error("variable is not a bare identifier: "+o)}else s=`with(obj||{}){
`+s+`}
`,o="obj";s=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+s+`return __p;
`;var l;try{l=new Function(o,"_",s)}catch(p){throw p.source=s,p}var h=function(p){return l.call(this,p,Yt)};return h.source="function("+o+`){
`+s+"}",h}function r_(t,e,n){e=ra(e);var i=e.length;if(!i)return gi(n)?n.call(t):n;for(var r=0;r<i;r++){var s=t==null?void 0:t[e[r]];s===void 0&&(s=n,r=i),t=gi(s)?s.call(t):s}return t}var s_=0;function o_(t){var e=++s_+"";return t?t+e:e}function a_(t){var e=Yt(t);return e._chain=!0,e}function Tf(t,e,n,i,r){if(!(i instanceof e))return t.apply(n,r);var s=vf(t.prototype),o=t.apply(s,r);return Ts(o)?o:s}var lo=ki(function(t,e){var n=lo.placeholder,i=function(){for(var r=0,s=e.length,o=Array(s),l=0;l<s;l++)o[l]=e[l]===n?arguments[r++]:e[l];for(;r<arguments.length;)o.push(arguments[r++]);return Tf(t,i,this,this,o)};return i});lo.placeholder=Yt;const Cf=ki(function(t,e,n){if(!gi(t))throw new TypeError("Bind must be called on a function");var i=ki(function(r){return Tf(t,i,e,this,n.concat(r))});return i}),Ui=of(Ai);function ks(t,e,n,i){if(i=i||[],!e&&e!==0)e=1/0;else if(e<=0)return i.concat(t);for(var r=i.length,s=0,o=Ai(t);s<o;s++){var l=t[s];if(Ui(l)&&(Cs(l)||m2(l)))if(e>1)ks(l,e-1,n,i),r=i.length;else for(var h=0,p=l.length;h<p;)i[r++]=l[h++];else n||(i[r++]=l)}return i}const l_=ki(function(t,e){e=ks(e,!1,!1);var n=e.length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var i=e[n];t[i]=Cf(t[i],t)}return t});function c_(t,e){var n=function(i){var r=n.cache,s=""+(e?e.apply(this,arguments):i);return os(r,s)||(r[s]=t.apply(this,arguments)),r[s]};return n.cache={},n}const kf=ki(function(t,e,n){return setTimeout(function(){return t.apply(null,n)},e)}),h_=lo(kf,Yt,1);function u_(t,e,n){var i,r,s,o,l=0;n||(n={});var h=function(){l=n.leading===!1?0:Do(),i=null,o=t.apply(r,s),i||(r=s=null)},p=function(){var m=Do();!l&&n.leading===!1&&(l=m);var y=e-(m-l);return r=this,s=arguments,y<=0||y>e?(i&&(clearTimeout(i),i=null),l=m,o=t.apply(r,s),i||(r=s=null)):!i&&n.trailing!==!1&&(i=setTimeout(h,y)),o};return p.cancel=function(){clearTimeout(i),l=0,i=r=s=null},p}function f_(t,e,n){var i,r,s,o,l,h=function(){var m=Do()-r;e>m?i=setTimeout(h,e-m):(i=null,n||(o=t.apply(l,s)),i||(s=l=null))},p=ki(function(m){return l=this,s=m,r=Do(),i||(i=setTimeout(h,e),n&&(o=t.apply(l,s))),o});return p.cancel=function(){clearTimeout(i),i=s=l=null},p}function d_(t,e){return lo(e,t)}function T2(t){return function(){return!t.apply(this,arguments)}}function p_(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}}function g_(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}function Af(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}const m_=lo(Af,2);function If(t,e,n){e=Ii(e,n);for(var i=Un(t),r,s=0,o=i.length;s<o;s++)if(r=i[s],e(t[r],r,t))return r}function Of(t){return function(e,n,i){n=Ii(n,i);for(var r=Ai(e),s=t>0?0:r-1;s>=0&&s<r;s+=t)if(n(e[s],s,e))return s;return-1}}const C2=Of(1),Mf=Of(-1);function zf(t,e,n,i){n=Ii(n,i,1);for(var r=n(e),s=0,o=Ai(t);s<o;){var l=Math.floor((s+o)/2);n(t[l])<r?s=l+1:o=l}return s}function Rf(t,e,n){return function(i,r,s){var o=0,l=Ai(i);if(typeof s=="number")t>0?o=s>=0?s:Math.max(s+l,o):l=s>=0?Math.min(s+1,l):s+l+1;else if(n&&s&&l)return s=n(i,r),i[s]===r?s:-1;if(r!==r)return s=e(na.call(i,o,l),rf),s>=0?s+o:-1;for(s=t>0?o:l-1;s>=0&&s<l;s+=t)if(i[s]===r)return s;return-1}}const Ff=Rf(1,C2,zf),__=Rf(-1,Mf);function O1(t,e,n){var i=Ui(t)?C2:If,r=i(t,e,n);if(r!==void 0&&r!==-1)return t[r]}function v_(t,e){return O1(t,No(e))}function Nr(t,e,n){e=sa(e,n);var i,r;if(Ui(t))for(i=0,r=t.length;i<r;i++)e(t[i],i,t);else{var s=Un(t);for(i=0,r=s.length;i<r;i++)e(t[s[i]],s[i],t)}return t}function ws(t,e,n){e=Ii(e,n);for(var i=!Ui(t)&&Un(t),r=(i||t).length,s=Array(r),o=0;o<r;o++){var l=i?i[o]:o;s[o]=e(t[l],l,t)}return s}function Nf(t){var e=function(n,i,r,s){var o=!Ui(n)&&Un(n),l=(o||n).length,h=t>0?0:l-1;for(s||(r=n[o?o[h]:h],h+=t);h>=0&&h<l;h+=t){var p=o?o[h]:h;r=i(r,n[p],p,n)}return r};return function(n,i,r,s){var o=arguments.length>=3;return e(n,sa(i,s,4),r,o)}}const Jl=Nf(1),Kc=Nf(-1);function eo(t,e,n){var i=[];return e=Ii(e,n),Nr(t,function(r,s,o){e(r,s,o)&&i.push(r)}),i}function y_(t,e,n){return eo(t,T2(Ii(e)),n)}function Jc(t,e,n){e=Ii(e,n);for(var i=!Ui(t)&&Un(t),r=(i||t).length,s=0;s<r;s++){var o=i?i[s]:s;if(!e(t[o],o,t))return!1}return!0}function Qc(t,e,n){e=Ii(e,n);for(var i=!Ui(t)&&Un(t),r=(i||t).length,s=0;s<r;s++){var o=i?i[s]:s;if(e(t[o],o,t))return!0}return!1}function zr(t,e,n,i){return Ui(t)||(t=ao(t)),(typeof n!="number"||i)&&(n=0),Ff(t,e,n)>=0}const b_=ki(function(t,e,n){var i,r;return gi(e)?r=e:(e=ra(e),i=e.slice(0,-1),e=e[e.length-1]),ws(t,function(s){var o=r;if(!o){if(i&&i.length&&(s=w2(s,i)),s==null)return;o=s[e]}return o==null?o:o.apply(s,n)})});function k2(t,e){return ws(t,E2(e))}function w_(t,e){return eo(t,No(e))}function Df(t,e,n){var i=-1/0,r=-1/0,s,o;if(e==null||typeof e=="number"&&typeof t[0]!="object"&&t!=null){t=Ui(t)?t:ao(t);for(var l=0,h=t.length;l<h;l++)s=t[l],s!=null&&s>i&&(i=s)}else e=Ii(e,n),Nr(t,function(p,m,y){o=e(p,m,y),(o>r||o===-1/0&&i===-1/0)&&(i=p,r=o)});return i}function x_(t,e,n){var i=1/0,r=1/0,s,o;if(e==null||typeof e=="number"&&typeof t[0]!="object"&&t!=null){t=Ui(t)?t:ao(t);for(var l=0,h=t.length;l<h;l++)s=t[l],s!=null&&s<i&&(i=s)}else e=Ii(e,n),Nr(t,function(p,m,y){o=e(p,m,y),(o<r||o===1/0&&i===1/0)&&(i=p,r=o)});return i}var E_=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Lf(t){return t?Cs(t)?na.call(t):p2(t)?t.match(E_):Ui(t)?ws(t,x2):ao(t):[]}function Pf(t,e,n){if(e==null||n)return Ui(t)||(t=ao(t)),t[I1(t.length-1)];var i=Lf(t),r=Ai(i);e=Math.max(Math.min(e,r),0);for(var s=r-1,o=0;o<e;o++){var l=I1(o,s),h=i[o];i[o]=i[l],i[l]=h}return i.slice(0,e)}function S_(t){return Pf(t,1/0)}function T_(t,e,n){var i=0;return e=Ii(e,n),k2(ws(t,function(r,s,o){return{value:r,index:i++,criteria:e(r,s,o)}}).sort(function(r,s){var o=r.criteria,l=s.criteria;if(o!==l){if(o>l||o===void 0)return 1;if(o<l||l===void 0)return-1}return r.index-s.index}),"value")}function bl(t,e){return function(n,i,r){var s=e?[[],[]]:{};return i=Ii(i,r),Nr(n,function(o,l){var h=i(o,l,n);t(s,o,h)}),s}}const C_=bl(function(t,e,n){os(t,n)?t[n].push(e):t[n]=[e]}),k_=bl(function(t,e,n){t[n]=e}),A_=bl(function(t,e,n){os(t,n)?t[n]++:t[n]=1}),I_=bl(function(t,e,n){t[n?0:1].push(e)},!0);function O_(t){return t==null?0:Ui(t)?t.length:Un(t).length}function M_(t,e,n){return e in n}const $f=ki(function(t,e){var n={},i=e[0];if(t==null)return n;gi(i)?(e.length>1&&(i=sa(i,e[1])),e=ia(t)):(i=M_,e=ks(e,!1,!1),t=Object(t));for(var r=0,s=e.length;r<s;r++){var o=e[r],l=t[o];i(l,o,t)&&(n[o]=l)}return n}),z_=ki(function(t,e){var n=e[0],i;return gi(n)?(n=T2(n),e.length>1&&(i=e[1])):(e=ws(ks(e,!1,!1),String),n=function(r,s){return!zr(e,s)}),$f(t,n,i)});function Bf(t,e,n){return na.call(t,0,Math.max(0,t.length-(e==null||n?1:e)))}function Ql(t,e,n){return t==null||t.length<1?e==null||n?void 0:[]:e==null||n?t[0]:Bf(t,t.length-e)}function $a(t,e,n){return na.call(t,e==null||n?1:e)}function R_(t,e,n){return t==null||t.length<1?e==null||n?void 0:[]:e==null||n?t[t.length-1]:$a(t,Math.max(0,t.length-e))}function F_(t){return eo(t,Boolean)}function N_(t,e){return ks(t,e,!1)}const Wf=ki(function(t,e){return e=ks(e,!0,!0),eo(t,function(n){return!zr(e,n)})}),D_=ki(function(t,e){return Wf(t,e)});function M1(t,e,n,i){Gu(e)||(i=n,n=e,e=!1),n!=null&&(n=Ii(n,i));for(var r=[],s=[],o=0,l=Ai(t);o<l;o++){var h=t[o],p=n?n(h,o,t):h;e&&!n?((!o||s!==p)&&r.push(h),s=p):n?zr(s,p)||(s.push(p),r.push(h)):zr(r,h)||r.push(h)}return r}const L_=ki(function(t){return M1(ks(t,!0,!0))});function P_(t){for(var e=[],n=arguments.length,i=0,r=Ai(t);i<r;i++){var s=t[i];if(!zr(e,s)){var o;for(o=1;o<n&&zr(arguments[o],s);o++);o===n&&e.push(s)}}return e}function z1(t){for(var e=t&&Df(t,Ai).length||0,n=Array(e),i=0;i<e;i++)n[i]=k2(t,i);return n}const $_=ki(z1);function B_(t,e){for(var n={},i=0,r=Ai(t);i<r;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n}function W_(t,e,n){e==null&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var i=Math.max(Math.ceil((e-t)/n),0),r=Array(i),s=0;s<i;s++,t+=n)r[s]=t;return r}function H_(t,e){if(e==null||e<1)return[];for(var n=[],i=0,r=t.length;i<r;)n.push(na.call(t,i,i+=e));return n}function A2(t,e){return t._chain?Yt(e).chain():e}function Hf(t){return Nr(A1(t),function(e){var n=Yt[e]=t[e];Yt.prototype[e]=function(){var i=[this._wrapped];return f4.apply(i,arguments),A2(this,n.apply(Yt,i))}}),Yt}Nr(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=yl[t];Yt.prototype[t]=function(){var n=this._wrapped;return n!=null&&(e.apply(n,arguments),(t==="shift"||t==="splice")&&n.length===0&&delete n[0]),A2(this,n)}});Nr(["concat","join","slice"],function(t){var e=yl[t];Yt.prototype[t]=function(){var n=this._wrapped;return n!=null&&(n=e.apply(n,arguments)),A2(this,n)}});const V_=Object.freeze(Object.defineProperty({__proto__:null,VERSION:Yu,after:g_,all:Jc,allKeys:ia,any:Qc,assign:el,before:Af,bind:Cf,bindAll:l_,chain:a_,chunk:H_,clone:V4,collect:ws,compact:F_,compose:p_,constant:sf,contains:zr,countBy:A_,create:H4,debounce:f_,default:Yt,defaults:_f,defer:h_,delay:kf,detect:O1,difference:Wf,drop:$a,each:Nr,escape:Z4,every:Jc,extend:mf,extendOwn:el,filter:eo,find:O1,findIndex:C2,findKey:If,findLastIndex:Mf,findWhere:v_,first:Ql,flatten:N_,foldl:Jl,foldr:Kc,forEach:Nr,functions:A1,get:bf,groupBy:C_,has:j4,head:Ql,identity:x2,include:zr,includes:zr,indexBy:k_,indexOf:Ff,initial:Bf,inject:Jl,intersection:P_,invert:gf,invoke:b_,isArguments:m2,isArray:Cs,isArrayBuffer:Qu,isBoolean:Gu,isDataView:Ja,isDate:w4,isElement:b4,isEmpty:z4,isEqual:R4,isError:E4,isFinite:k4,isFunction:gi,isMap:D4,isMatch:hf,isNaN:rf,isNull:y4,isNumber:Ku,isObject:Ts,isRegExp:x4,isSet:P4,isString:p2,isSymbol:Ju,isTypedArray:lf,isUndefined:Zu,isWeakMap:L4,isWeakSet:$4,iteratee:S2,keys:Un,last:R_,lastIndexOf:__,map:ws,mapObject:Y4,matcher:No,matches:No,max:Df,memoize:c_,methods:A1,min:x_,mixin:Hf,negate:T2,noop:xf,now:Do,object:B_,omit:z_,once:m_,pairs:B4,partial:lo,partition:I_,pick:$f,pluck:k2,property:E2,propertyOf:X4,random:I1,range:W_,reduce:Jl,reduceRight:Kc,reject:y_,rest:$a,restArguments:ki,result:r_,sample:Pf,select:eo,shuffle:S_,size:O_,some:Qc,sortBy:T_,sortedIndex:zf,tail:$a,take:Ql,tap:U4,template:i_,templateSettings:J4,throttle:u_,times:q4,toArray:Lf,toPath:yf,transpose:z1,unescape:K4,union:L_,uniq:M1,unique:M1,uniqueId:o_,unzip:z1,values:ao,where:w_,without:D_,wrap:d_,zip:$_},Symbol.toStringTag,{value:"Module"}));var De=Hf(V_);De._=De;function Vf(t,e,n,i={}){return e!==void 0&&n!==void 0&&(i={...i,headers:{...i.headers,Range:`bytes=${e}-${e+n-1}`}}),fetch(t,i)}function U_(t,e){return{...t,...e,headers:{...t.headers,...e.headers}}}function eh(t,e){const n=typeof t=="string"?new URL(t):t;n.pathname.endsWith("/")||(n.pathname+="/");const i=new URL(e.slice(1),n);return i.search=n.search,i}async function th(t){if(t.status!==404){if(t.status===200||t.status===206)return new Uint8Array(await t.arrayBuffer());throw new Error(`Unexpected response status ${t.status} ${t.statusText}`)}}async function j_(t,e,n,i){if(i)return fetch(t,{...n,headers:{...n.headers,Range:`bytes=-${e}`}});let r=await fetch(t,{...n,method:"HEAD"});if(!r.ok)return r;let s=r.headers.get("Content-Length"),o=Number(s);return Vf(t,o-e,o,n)}var $o,Bo,Wo,R1;class I2{constructor(e,n={}){Dn(this,Wo);Ht(this,"url");Dn(this,$o);Dn(this,Bo);this.url=e,wn(this,$o,n.overrides??{}),wn(this,Bo,n.useSuffixRequest??!1)}async get(e,n={}){let i=eh(this.url,e).href,r=await fetch(i,Dl(this,Wo,R1).call(this,n));return th(r)}async getRange(e,n,i={}){let r=eh(this.url,e),s=Dl(this,Wo,R1).call(this,i),o;return"suffixLength"in n?o=await j_(r,n.suffixLength,s,Ot(this,Bo)):o=await Vf(r,n.offset,n.length,s),th(o)}}$o=new WeakMap,Bo=new WeakMap,Wo=new WeakSet,R1=function(e){return U_(Ot(this,$o),e)};const Y_="modulepreload",X_=function(t,e){return new URL(t,e).href},nh={},e1=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){let o=function(m){return Promise.all(m.map(y=>Promise.resolve(y).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};const l=document.getElementsByTagName("link"),h=document.querySelector("meta[property=csp-nonce]"),p=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));r=o(n.map(m=>{if(m=X_(m,i),m in nh)return;nh[m]=!0;const y=m.endsWith(".css"),E=y?'[rel="stylesheet"]':"";if(!!i)for(let F=l.length-1;F>=0;F--){const X=l[F];if(X.href===m&&(!y||X.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${m}"]${E}`))return;const N=document.createElement("link");if(N.rel=y?"stylesheet":Y_,y||(N.as="script"),N.crossOrigin="",N.href=m,p&&N.setAttribute("nonce",p),document.head.appendChild(N),y)return new Promise((F,X)=>{N.addEventListener("load",F),N.addEventListener("error",()=>X(new Error(`Unable to preload CSS for ${m}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return r.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};var Wi;class Uf{constructor(e,n,i){Dn(this,Wi);typeof e=="number"?wn(this,Wi,new Uint8Array(e)):e instanceof ArrayBuffer?wn(this,Wi,new Uint8Array(e,n,i)):wn(this,Wi,new Uint8Array(Array.from(e,r=>r?1:0)))}get BYTES_PER_ELEMENT(){return 1}get byteOffset(){return Ot(this,Wi).byteOffset}get byteLength(){return Ot(this,Wi).byteLength}get buffer(){return Ot(this,Wi).buffer}get length(){return Ot(this,Wi).length}get(e){let n=Ot(this,Wi)[e];return typeof n=="number"?n!==0:n}set(e,n){Ot(this,Wi)[e]=n?1:0}fill(e){Ot(this,Wi).fill(e?1:0)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}Wi=new WeakMap;var Us;class O2{constructor(e,n,i,r){Ht(this,"_data");Ht(this,"chars");Dn(this,Us);if(this.chars=e,wn(this,Us,new TextEncoder),typeof n=="number")this._data=new Uint8Array(n*e);else if(n instanceof ArrayBuffer)r&&(r=r*e),this._data=new Uint8Array(n,i,r);else{let s=Array.from(n);this._data=new Uint8Array(s.length*e);for(let o=0;o<s.length;o++)this.set(o,s[o])}}get BYTES_PER_ELEMENT(){return this.chars}get byteOffset(){return this._data.byteOffset}get byteLength(){return this._data.byteLength}get buffer(){return this._data.buffer}get length(){return this.byteLength/this.BYTES_PER_ELEMENT}get(e){const n=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);return new TextDecoder().decode(n).replace(/\x00/g,"")}set(e,n){const i=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);i.fill(0),i.set(Ot(this,Us).encode(n))}fill(e){const n=Ot(this,Us).encode(e);for(let i=0;i<this.length;i++)this._data.set(n,i*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}Us=new WeakMap;var ni;const U2=class U2{constructor(e,n,i,r){Dn(this,ni);Ht(this,"chars");if(this.chars=e,typeof n=="number")wn(this,ni,new Int32Array(n*e));else if(n instanceof ArrayBuffer)r&&(r*=e),wn(this,ni,new Int32Array(n,i,r));else{const s=n,o=new U2(e,1);wn(this,ni,new Int32Array(function*(){for(let l of s)o.set(0,l),yield*Ot(o,ni)}()))}}get BYTES_PER_ELEMENT(){return Ot(this,ni).BYTES_PER_ELEMENT*this.chars}get byteLength(){return Ot(this,ni).byteLength}get byteOffset(){return Ot(this,ni).byteOffset}get buffer(){return Ot(this,ni).buffer}get length(){return Ot(this,ni).length/this.chars}get(e){const n=this.chars*e;let i="";for(let r=0;r<this.chars;r++)i+=String.fromCodePoint(Ot(this,ni)[n+r]);return i.replace(/\u0000/g,"")}set(e,n){const i=this.chars*e,r=Ot(this,ni).subarray(i,i+this.chars);r.fill(0);for(let s=0;s<this.chars;s++)r[s]=n.codePointAt(s)??0}fill(e){this.set(0,e);let n=Ot(this,ni).subarray(0,this.chars);for(let i=1;i<this.length;i++)Ot(this,ni).set(n,i*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}};ni=new WeakMap;let Lo=U2;function oa(t){const e=new TextDecoder().decode(t);return JSON.parse(e)}function ih(t,e){const n=e/2,i=e-1;let r=0;for(let s=0;s<t.length;s+=e)for(let o=0;o<n;o+=1)r=t[s+o],t[s+o]=t[s+i-o],t[s+i-o]=r}function jf(t){if(t==="v2:object")return globalThis.Array;let e=t.match(/v2:([US])(\d+)/);if(e){let[,i,r]=e;return(i==="U"?Lo:O2).bind(null,Number(r))}let n={int8:Int8Array,int16:Int16Array,int32:Int32Array,int64:globalThis.BigInt64Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,uint64:globalThis.BigUint64Array,float16:globalThis.Float16Array,float32:Float32Array,float64:Float64Array,bool:Uf}[t];return Hn(n,`Unknown or unsupported data_type: ${t}`),n}function xs(t,e){const n=t.length;typeof e=="string"&&(e=e==="C"?Array.from({length:n},(s,o)=>o):Array.from({length:n},(s,o)=>n-1-o)),Hn(n===e.length,"Order length must match the number of dimensions.");let i=1,r=new Array(n);for(let s=e.length-1;s>=0;s--)r[e[s]]=i,i*=t[e[s]];return r}function q_({name:t,configuration:e}){if(t==="default"){const n=(e==null?void 0:e.separator)??"/";return i=>["c",...i].join(n)}if(t==="v2"){const n=(e==null?void 0:e.separator)??".";return i=>i.join(n)||"0"}throw new Error(`Unknown chunk key encoding: ${t}`)}function Z_(t){if(t==="|O")return{data_type:"v2:object"};let e=t.match(/^([<|>])(.*)$/);Hn(e,`Invalid dtype: ${t}`);let[,n,i]=e,r={b1:"bool",i1:"int8",u1:"uint8",i2:"int16",u2:"uint16",i4:"int32",u4:"uint32",i8:"int64",u8:"uint64",f2:"float16",f4:"float32",f8:"float64"}[i]??(i.startsWith("S")||i.startsWith("U")?`v2:${i}`:void 0);return Hn(r,`Unsupported or unknown dtype: ${t}`),n==="|"?{data_type:r}:{data_type:r,endian:n==="<"?"little":"big"}}function G_(t,e={}){let n=[],i=Z_(t.dtype);t.order==="F"&&n.push({name:"transpose",configuration:{order:"F"}}),"endian"in i&&i.endian==="big"&&n.push({name:"bytes",configuration:{endian:"big"}});for(let{id:r,...s}of t.filters??[])n.push({name:r,configuration:s});if(t.compressor){let{id:r,...s}=t.compressor;n.push({name:r,configuration:s})}return{zarr_format:3,node_type:"array",shape:t.shape,data_type:i.data_type,chunk_grid:{name:"regular",configuration:{chunk_shape:t.chunks}},chunk_key_encoding:{name:"v2",configuration:{separator:t.dimension_separator??"."}},codecs:n,fill_value:t.fill_value,attributes:e}}function K_(t,e={}){return{zarr_format:3,node_type:"group",attributes:e}}function J_(t,e){if(e!=="number"&&e!=="bigint"&&e!=="boolean"&&e!=="object"&&e!=="string")return t===e;let n=t==="bool";if(e==="boolean")return n;let i=t.startsWith("v2:U")||t.startsWith("v2:S");if(e==="string")return i;let r=t==="int64"||t==="uint64";if(e==="bigint")return r;let s=t==="v2:object";return e==="object"?s:!i&&!r&&!n&&!s}function Q_(t){return(t==null?void 0:t.name)==="sharding_indexed"}function Yf(t){return(t.data_type==="uint64"||t.data_type==="int64")&&t.fill_value!=null?BigInt(t.fill_value):t.fill_value}function Xf(t,...e){if(!e.some(n=>t instanceof n))throw t}function Hn(t,e=""){if(!t)throw new Error(e)}async function qf(t,{format:e,signal:n}){const i=t instanceof Response?t:new Response(t);Hn(i.body,"Response does not contain body.");try{return await new Response(i.body.pipeThrough(new DecompressionStream(e),{signal:n})).arrayBuffer()}catch{throw n==null||n.throwIfAborted(),new Error(`Failed to decode ${e}`)}}class M2{constructor(e,n){Ht(this,"kind","array_to_array");Hn(e.keepbits>=0,"keepbits must be zero or positive")}static fromConfig(e,n){return new M2(e,n)}encode(e){throw new Error("`BitroundCodec.encode` is not implemented. Please open an issue at https://github.com/manzt/zarrita.js/issues.")}decode(e){return e}}const rh=ev();function ev(){const t=new Uint32Array([305419896]);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)[0]!==18}function sh(t){return"BYTES_PER_ELEMENT"in t?t.BYTES_PER_ELEMENT:4}var Ho,Gr,Vo,Uo,js;const j2=class j2{constructor(e,n){Ht(this,"kind","array_to_bytes");Dn(this,Ho);Dn(this,Gr);Dn(this,Vo);Dn(this,Uo);Dn(this,js);wn(this,js,e==null?void 0:e.endian),wn(this,Gr,jf(n.data_type)),wn(this,Uo,n.shape),wn(this,Ho,xs(n.shape,"C"));const i=new(Ot(this,Gr))(0);wn(this,Vo,i.BYTES_PER_ELEMENT)}static fromConfig(e,n){return new j2(e,n)}encode(e){let n=new Uint8Array(e.data.buffer);return rh&&Ot(this,js)==="big"&&ih(n,sh(Ot(this,Gr))),n}decode(e){return rh&&Ot(this,js)==="big"&&ih(e,sh(Ot(this,Gr))),{data:new(Ot(this,Gr))(e.buffer,e.byteOffset,e.byteLength/Ot(this,Vo)),shape:Ot(this,Uo),stride:Ot(this,Ho)}}};Ho=new WeakMap,Gr=new WeakMap,Vo=new WeakMap,Uo=new WeakMap,js=new WeakMap;let tl=j2;class z2{constructor(){Ht(this,"kind","bytes_to_bytes")}static fromConfig(){return new z2}encode(e){throw new Error("Not implemented")}decode(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength-4)}}class R2{constructor(){Ht(this,"kind","bytes_to_bytes")}static fromConfig(e){return new R2}encode(e){throw new Error("Gzip encoding is not enabled by default. Please register a custom codec with `numcodecs/gzip`.")}async decode(e){const n=await qf(e,{format:"gzip"});return new Uint8Array(n)}}function tv(t,e){return Hn(!Number.isNaN(e),"JsonCodec allow_nan is false but NaN was encountered during encoding."),Hn(e!==Number.POSITIVE_INFINITY,"JsonCodec allow_nan is false but Infinity was encountered during encoding."),Hn(e!==Number.NEGATIVE_INFINITY,"JsonCodec allow_nan is false but -Infinity was encountered during encoding."),e}function nv(t,e){return e instanceof Object&&!Array.isArray(e)?Object.keys(e).sort().reduce((n,i)=>(n[i]=e[i],n),{}):e}var jo,Yo;const Y2=class Y2{constructor(e={}){Ht(this,"configuration");Ht(this,"kind","array_to_bytes");Dn(this,jo);Dn(this,Yo);this.configuration=e;const{encoding:n="utf-8",skipkeys:i=!1,ensure_ascii:r=!0,check_circular:s=!0,allow_nan:o=!0,sort_keys:l=!0,indent:h,strict:p=!0}=e;let m=e.separators;m||(h?m=[", ",": "]:m=[",",":"]),wn(this,jo,{encoding:n,skipkeys:i,ensure_ascii:r,check_circular:s,allow_nan:o,indent:h,separators:m,sort_keys:l}),wn(this,Yo,{strict:p})}static fromConfig(e){return new Y2(e)}encode(e){const{indent:n,encoding:i,ensure_ascii:r,check_circular:s,allow_nan:o,sort_keys:l}=Ot(this,jo);Hn(i==="utf-8","JsonCodec does not yet support non-utf-8 encoding.");const h=[];Hn(s,"JsonCodec does not yet support skipping the check for circular references during encoding."),o||h.push(tv),l&&h.push(nv);const p=Array.from(e.data);p.push("|O"),p.push(e.shape);let m;h.length&&(m=(E,C)=>{let N=C;for(let F of h)N=F(E,N);return N});let y=JSON.stringify(p,m,n);return r&&(y=y.replace(/[\u007F-\uFFFF]/g,E=>{const C=`0000${E.charCodeAt(0).toString(16)}`;return`\\u${C.substring(C.length-4)}`})),new TextEncoder().encode(y)}decode(e){const{strict:n}=Ot(this,Yo);Hn(n,"JsonCodec does not yet support non-strict decoding.");const i=oa(e),r=i.pop();i.pop(),Hn(r,"0D not implemented for JsonCodec.");const s=xs(r,"C");return{data:i,shape:r,stride:s}}};jo=new WeakMap,Yo=new WeakMap;let F1=Y2;function oh(t){return t instanceof Uf||t instanceof O2||t instanceof Lo?new Proxy(t,{get(n,i){return n.get(Number(i))},set(n,i,r){return n.set(Number(i),r),!0}}):t}function iv(t,e){let n;return t.data instanceof O2||t.data instanceof Lo?n=new t.constructor(t.data.length,t.data.chars):n=new t.constructor(t.data.length),{data:n,shape:t.shape,stride:xs(t.shape,e)}}function rv(t,e){let n=iv(t,e),i=t.shape.length,r=t.data.length,s=Array(i).fill(0),o=oh(t.data),l=oh(n.data);for(let h=0;h<r;h++){let p=0;for(let m=0;m<i;m++)p+=s[m]*n.stride[m];l[p]=o[h],s[0]+=1;for(let m=0;m<i;m++)if(s[m]===t.shape[m]){if(m+1===i)break;s[m]=0,s[m+1]+=1}}return n}function sv(t){let e=t.shape.length;return Hn(e===t.stride.length,"Shape and stride must have the same length."),t.stride.map((n,i)=>({stride:n,index:i})).sort((n,i)=>i.stride-n.stride).map(n=>n.index)}function ov(t,e){let n=sv(t);return Hn(n.length===e.length,"Orders must match"),n.every((i,r)=>i===e[r])}var Xo,Ys;const X2=class X2{constructor(e,n){Ht(this,"kind","array_to_array");Dn(this,Xo);Dn(this,Ys);let i=e.order??"C",r=n.shape.length,s=new Array(r),o=new Array(r);if(i==="C")for(let l=0;l<r;++l)s[l]=l,o[l]=l;else if(i==="F")for(let l=0;l<r;++l)s[l]=r-l-1,o[l]=r-l-1;else s=i,s.forEach((l,h)=>{Hn(o[l]===void 0,`Invalid permutation: ${JSON.stringify(i)}`),o[l]=h});wn(this,Xo,s),wn(this,Ys,o)}static fromConfig(e,n){return new X2(e,n)}encode(e){return ov(e,Ot(this,Ys))?e:rv(e,Ot(this,Ys))}decode(e){return{data:e.data,shape:e.shape,stride:xs(e.shape,Ot(this,Xo))}}};Xo=new WeakMap,Ys=new WeakMap;let N1=X2;var qo,Zo;const q2=class q2{constructor(e){Ht(this,"kind","array_to_bytes");Dn(this,qo);Dn(this,Zo);wn(this,qo,e),wn(this,Zo,xs(e,"C"))}static fromConfig(e,n){return new q2(n.shape)}encode(e){throw new Error("Method not implemented.")}decode(e){let n=new TextDecoder,i=new DataView(e.buffer),r=Array(i.getUint32(0,!0)),s=4;for(let o=0;o<r.length;o++){let l=i.getUint32(s,!0);s+=4,r[o]=n.decode(e.buffer.slice(s,s+l)),s+=l}return{data:r,shape:Ot(this,qo),stride:Ot(this,Zo)}}};qo=new WeakMap,Zo=new WeakMap;let D1=q2;class F2{constructor(){Ht(this,"kind","bytes_to_bytes")}static fromConfig(e){return new F2}encode(e){throw new Error("Zlib encoding is not enabled by default. Please register a codec with `numcodecs/zlib`.")}async decode(e){const n=await qf(e,{format:"deflate"});return new Uint8Array(n)}}function av(){return new Map().set("blosc",()=>e1(()=>import("./blosc-E49GQuAK.js"),__vite__mapDeps([0,1]),import.meta.url).then(t=>t.default)).set("lz4",()=>e1(()=>import("./lz4-BIGKWw27.js"),__vite__mapDeps([2,1]),import.meta.url).then(t=>t.default)).set("zstd",()=>e1(()=>import("./zstd-IvP746pw.js"),__vite__mapDeps([3,1]),import.meta.url).then(t=>t.default)).set("gzip",()=>R2).set("zlib",()=>F2).set("transpose",()=>N1).set("bytes",()=>tl).set("crc32c",()=>z2).set("vlen-utf8",()=>D1).set("json2",()=>F1).set("bitround",()=>M2)}const lv=av();function L1(t){let e;return{async encode(n){e||(e=await ah(t));for(const r of e.array_to_array)n=await r.encode(n);let i=await e.array_to_bytes.encode(n);for(const r of e.bytes_to_bytes)i=await r.encode(i);return i},async decode(n){e||(e=await ah(t));for(let r=e.bytes_to_bytes.length-1;r>=0;r--)n=await e.bytes_to_bytes[r].decode(n);let i=await e.array_to_bytes.decode(n);for(let r=e.array_to_array.length-1;r>=0;r--)i=await e.array_to_array[r].decode(i);return i}}}async function ah(t){let e=t.codecs.map(async s=>{var l;let o=await((l=lv.get(s.name))==null?void 0:l());return Hn(o,`Unknown codec: ${s.name}`),{Codec:o,meta:s}}),n=[],i,r=[];for await(let{Codec:s,meta:o}of e){let l=s.fromConfig(o.configuration,t);switch(l.kind){case"array_to_array":n.push(l);break;case"array_to_bytes":i=l;break;default:r.push(l)}}return i||(Hn(cv(t),`Cannot encode ${t.data_type} to bytes without a codec`),i=tl.fromConfig({endian:"little"},t)),{array_to_array:n,array_to_bytes:i,bytes_to_bytes:r}}function cv(t){return t.data_type!=="v2:object"}class aa extends Error{constructor(e,n={}){super(`Node not found: ${e}`,n),this.name="NodeNotFoundError"}}class N2 extends Error{constructor(e){super(`Missing key: ${e}`),this.name="KeyError"}}const lh=18446744073709551615n;function hv(t,e,n,i){Hn(t.store.getRange,"Store does not support range requests");let r=t.store.getRange.bind(t.store),s=e.map((h,p)=>h/i.chunk_shape[p]),o=L1({data_type:"uint64",shape:[...s,2],codecs:i.index_codecs}),l={};return async h=>{let p=h.map((V,K)=>Math.floor(V/s[K])),m=t.resolve(n(p)).path,y;if(m in l)y=l[m];else{let V=4,K=16*s.reduce((de,g)=>de*g,1),ae=await r(m,{suffixLength:K+V});y=l[m]=ae?await o.decode(ae):null}if(y===null)return;let{data:E,shape:C,stride:N}=y,F=h.map((V,K)=>V%C[K]).reduce((V,K,ae)=>V+K*N[ae],0),X=E[F],G=E[F+1];if(!(X===lh&&G===lh))return r(m,{offset:Number(X),length:Number(G)})}}class As{constructor(e,n="/"){Ht(this,"store");Ht(this,"path");this.store=e,this.path=n}resolve(e){let n=new URL(`file://${this.path.endsWith("/")?this.path:`${this.path}/`}`);return new As(this.store,decodeURIComponent(new URL(e,n).pathname))}}function uv(t){return new As(t??new Map)}var Go;class D2 extends As{constructor(n,i,r){super(n,i);Ht(this,"kind","group");Dn(this,Go);wn(this,Go,r)}get attrs(){return Ot(this,Go).attributes}}Go=new WeakMap;function ch(t){var n;const e=t.find(i=>i.name==="transpose");return((n=e==null?void 0:e.configuration)==null?void 0:n.order)??"C"}const xo=Symbol("zarrita.context");function fv(t){return t[xo]}function dv(t,e){let{configuration:n}=e.codecs.find(Q_)??{},i={encode_chunk_key:q_(e.chunk_key_encoding),TypedArray:jf(e.data_type),fill_value:e.fill_value};if(n){let s=ch(n.codecs);return{...i,kind:"sharded",chunk_shape:n.chunk_shape,codec:L1({data_type:e.data_type,shape:n.chunk_shape,codecs:n.codecs}),get_strides(o){return xs(o,s)},get_chunk_bytes:hv(t,e.chunk_grid.configuration.chunk_shape,i.encode_chunk_key,n)}}let r=ch(e.codecs);return{...i,kind:"regular",chunk_shape:e.chunk_grid.configuration.chunk_shape,codec:L1({data_type:e.data_type,shape:e.chunk_grid.configuration.chunk_shape,codecs:e.codecs}),get_strides(s){return xs(s,r)},async get_chunk_bytes(s,o){let l=i.encode_chunk_key(s),h=t.resolve(l).path;return t.store.get(h,o)}}}var Hh,Vh,vs,Uh;let nl=(Uh=class extends(Vh=As,Hh=xo,Vh){constructor(n,i,r){super(n,i);Ht(this,"kind","array");Dn(this,vs);Ht(this,Hh);wn(this,vs,{...r,fill_value:Yf(r)}),this[xo]=dv(this,r)}get attrs(){return Ot(this,vs).attributes}get shape(){return Ot(this,vs).shape}get chunks(){return this[xo].chunk_shape}get dtype(){return Ot(this,vs).data_type}async getChunk(n,i){let r=this[xo],s=await r.get_chunk_bytes(n,i);if(!s){let o=r.chunk_shape.reduce((h,p)=>h*p,1),l=new r.TypedArray(o);return l.fill(r.fill_value),{data:l,shape:r.chunk_shape,stride:r.get_strides(r.chunk_shape)}}return r.codec.decode(s)}is(n){return J_(this.dtype,n)}},vs=new WeakMap,Uh);function*pv(t,e,n=1){e===void 0&&(e=t,t=0);for(let i=t;i<e;i+=n)yield i}function*gv(...t){if(t.length===0)return;const e=t.map(i=>i[Symbol.iterator]()),n=e.map(i=>i.next());if(n.some(i=>i.done))throw new Error("Input contains an empty iterator.");for(let i=0;;){if(n[i].done){if(e[i]=t[i][Symbol.iterator](),n[i]=e[i].next(),++i>=e.length)return}else yield n.map(({value:r})=>r),i=0;n[i]=e[i].next()}}function mv({start:t,stop:e,step:n},i){if(n===0)throw new Error("slice step cannot be zero");n=n??1;const r=n<0,[s,o]=r?[-1,i-1]:[0,i];return t===null?t=r?o:s:t<0?(t+=i,t<s&&(t=s)):t>o&&(t=o),e===null?e=r?s:o:e<0?(e+=i,e<s&&(e=s)):e>o&&(e=o),[t,e,n]}function to(t,e,n=null){return e===void 0&&(e=t,t=null),{start:t,stop:e,step:n}}function _v(){const t=[];return{add:e=>t.push(e()),onIdle:()=>Promise.all(t)}}class L2 extends Error{constructor(e){super(e),this.name="IndexError"}}function vv(t,e){throw new L2(`too many indicies for array; expected ${e.length}, got ${t.length}`)}function yv(t){throw new L2(`index out of bounds for dimension with length ${t}`)}function bv(){throw new L2("only slices with step >= 1 are supported")}function wv(t,e){t.length>e.length&&vv(t,e)}function xv(t,e){return t=Math.trunc(t),t<0&&(t=e+t),(t>=e||t<0)&&yv(e),t}class Ev{constructor({dim_sel:e,dim_len:n,dim_chunk_len:i}){Ht(this,"dim_sel");Ht(this,"dim_len");Ht(this,"dim_chunk_len");Ht(this,"nitems");e=xv(e,n),this.dim_sel=e,this.dim_len=n,this.dim_chunk_len=i,this.nitems=1}*[Symbol.iterator](){const e=Math.floor(this.dim_sel/this.dim_chunk_len),n=e*this.dim_chunk_len,i=this.dim_sel-n;yield{dim_chunk_ix:e,dim_chunk_sel:i}}}class hh{constructor({dim_sel:e,dim_len:n,dim_chunk_len:i}){Ht(this,"start");Ht(this,"stop");Ht(this,"step");Ht(this,"dim_len");Ht(this,"dim_chunk_len");Ht(this,"nitems");Ht(this,"nchunks");const[r,s,o]=mv(e,n);this.start=r,this.stop=s,this.step=o,this.step<1&&bv(),this.dim_len=n,this.dim_chunk_len=i,this.nitems=Math.max(0,Math.ceil((this.stop-this.start)/this.step)),this.nchunks=Math.ceil(this.dim_len/this.dim_chunk_len)}*[Symbol.iterator](){const e=Math.floor(this.start/this.dim_chunk_len),n=Math.ceil(this.stop/this.dim_chunk_len);for(const i of pv(e,n)){const r=i*this.dim_chunk_len,s=Math.min(this.dim_len,(i+1)*this.dim_chunk_len),o=s-r;let l=0,h=0;if(this.start<r){const C=(r-this.start)%this.step;C&&(h+=this.step-C),l=Math.ceil((r-this.start)/this.step)}else h=this.start-r;const p=this.stop>s?o:this.stop-r,m=[h,p,this.step],y=Math.ceil((p-h)/this.step),E=[l,l+y,1];yield{dim_chunk_ix:i,dim_chunk_sel:m,dim_out_sel:E}}}}function Sv(t,e){let n=[];return t===null?n=e.map(i=>to(null)):Array.isArray(t)&&(n=t.map(i=>i??to(null))),wv(n,e),n}class Tv{constructor({selection:e,shape:n,chunk_shape:i}){Ht(this,"dim_indexers");Ht(this,"shape");this.dim_indexers=Sv(e,n).map((r,s)=>new(typeof r=="number"?Ev:hh)({dim_sel:r,dim_len:n[s],dim_chunk_len:i[s]})),this.shape=this.dim_indexers.filter(r=>r instanceof hh).map(r=>r.nitems)}*[Symbol.iterator](){for(const e of gv(...this.dim_indexers)){const n=e.map(r=>r.dim_chunk_ix),i=e.map(r=>"dim_out_sel"in r?{from:r.dim_chunk_sel,to:r.dim_out_sel}:{from:r.dim_chunk_sel,to:null});yield{chunk_coords:n,mapping:i}}}}function Cv(t,e){return"get"in t?t.get(e):t[e]}async function kv(t,e,n,i){var h;let r=fv(t),s=new Tv({selection:e,shape:t.shape,chunk_shape:t.chunks}),o=i.prepare(new r.TypedArray(s.shape.reduce((p,m)=>p*m,1)),s.shape,r.get_strides(s.shape)),l=((h=n.create_queue)==null?void 0:h.call(n))??_v();for(const{chunk_coords:p,mapping:m}of s)l.add(async()=>{let{data:y,shape:E,stride:C}=await t.getChunk(p,n.opts),N=i.prepare(y,E,C);i.set_from_chunk(o,N,m)});return await l.onIdle(),s.shape.length===0?Cv(o.data,0):o}function P2(t,e=0,n){let i=n??t.length-e;return{length:i,subarray(r,s=i){return P2(t,e+r,s-r)},set(r,s=0){for(let o=0;o<r.length;o++)t[e+s+o]=r.get(o)},get(r){return t[e+r]}}}function t1(t){return globalThis.Array.isArray(t.data)?{data:P2(t.data),stride:t.stride,bytes_per_element:1}:{data:new Uint8Array(t.data.buffer,t.data.byteOffset,t.data.byteLength),stride:t.stride,bytes_per_element:t.data.BYTES_PER_ELEMENT}}function Av(t){return"chars"in t?t.constructor.bind(null,t.chars):t.constructor}function Iv(t,e){if(globalThis.Array.isArray(t.data))return P2([e]);let n=Av(t.data),i=new n([e]);return new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}const Ov={prepare(t,e,n){return{data:t,shape:e,stride:n}},set_scalar(t,e,n){let i=t1(t);P1(i,e,Iv(t,n),i.bytes_per_element)},set_from_chunk(t,e,n){let i=t1(t);Ba(i,t1(e),i.bytes_per_element,n)}};async function Zf(t,e=null,n={}){return kv(t,e,n,Ov)}function Gf(t,e,n){return n<0&&e<t?Math.floor((t-e-1)/-n)+1:t<e?Math.floor((e-t-1)/n)+1:0}function P1(t,e,n,i){if(e.length===0){t.data.set(n,0);return}const[r,...s]=e,[o,...l]=t.stride;if(typeof r=="number"){const E=t.data.subarray(o*r*i);P1({data:E,stride:l},s,n,i);return}const[h,p,m]=r,y=Gf(h,p,m);if(s.length===0){for(let E=0;E<y;E++)t.data.set(n,o*(h+m*E)*i);return}for(let E=0;E<y;E++){const C=t.data.subarray(o*(h+m*E)*i);P1({data:C,stride:l},s,n,i)}}function Ba(t,e,n,i){const[r,...s]=i,[o,...l]=t.stride,[h,...p]=e.stride;if(r.from===null){if(s.length===0){t.data.set(e.data.subarray(0,n),r.to*n);return}Ba({data:t.data.subarray(o*r.to*n),stride:l},e,n,s);return}if(r.to===null){if(s.length===0){let G=r.from*n;t.data.set(e.data.subarray(G,G+n),0);return}Ba(t,{data:e.data.subarray(h*r.from*n),stride:p},n,s);return}const[m,y,E]=r.to,[C,N,F]=r.from,X=Gf(m,y,E);if(s.length===0){if(E===1&&F===1&&o===1&&h===1){let G=C*n,V=X*n;t.data.set(e.data.subarray(G,G+V),m*n);return}for(let G=0;G<X;G++){let V=h*(C+F*G)*n;t.data.set(e.data.subarray(V,V+n),o*(m+E*G)*n)}return}for(let G=0;G<X;G++)Ba({data:t.data.subarray(o*(m+G*E)*n),stride:l},{data:e.data.subarray(h*(C+G*F)*n),stride:p},n,s)}let wl=Mv();function Mv(){let t=new WeakMap;function e(n){let i=t.get(n)??{v2:0,v3:0};return t.set(n,i),i}return{increment(n,i){e(n)[i]+=1},version_max(n){let i=e(n);return i.v3>i.v2?"v3":"v2"}}}async function zv(t){let e=await t.store.get(t.resolve(".zattrs").path);return e?oa(e):{}}async function Rv(t,e={}){let n="store"in t?t:new As(t),i={};return(e.attrs??!0)&&(i=await zv(n)),e.kind==="array"?uh(n,i):e.kind==="group"?fh(n,i):uh(n,i).catch(r=>(Xf(r,aa),fh(n,i)))}async function uh(t,e){let{path:n}=t.resolve(".zarray"),i=await t.store.get(n);if(!i)throw new aa("v2 array",{cause:new N2(n)});return wl.increment(t.store,"v2"),new nl(t.store,t.path,G_(oa(i),e))}async function fh(t,e){let{path:n}=t.resolve(".zgroup"),i=await t.store.get(n);if(!i)throw new aa("v2 group",{cause:new N2(n)});return wl.increment(t.store,"v2"),new D2(t.store,t.path,K_(oa(i),e))}async function Fv(t){let{store:e,path:n}=t.resolve("zarr.json"),i=await t.store.get(n);if(!i)throw new aa("v3 array or group",{cause:new N2(n)});let r=oa(i);return r.node_type==="array"&&(r.fill_value=Yf(r)),r.node_type==="array"?new nl(e,t.path,r):new D2(e,t.path,r)}async function Nv(t,e={}){let n="store"in t?t:new As(t),i=await Fv(n);if(wl.increment(n.store,"v3"),e.kind===void 0||e.kind==="array"&&i instanceof nl||e.kind==="group"&&i instanceof D2)return i;let r=i instanceof nl?"array":"group";throw new Error(`Expected node of kind ${e.kind}, found ${r}.`)}async function cr(t,e={}){let n="store"in t?t.store:t,i=wl.version_max(n),r=i==="v2"?cr.v2:cr.v3,s=i==="v2"?cr.v3:cr.v2;return r(t,e).catch(o=>(Xf(o,aa),s(t,e)))}cr.v2=Rv;cr.v3=Nv;function Dv(){return $1.map(t=>({name:t.name,png:Pv(t.rgb)}))}function Lv(t){let e=$1.find(n=>n.name===t);return(e==null?void 0:e.rgb)||$1[0].rgb}function Pv(t){let e=1,n=256,i=new Uint8ClampedArray(4*e*n).fill(255),r=0;for(let l=0;l<e;l++)for(let h=0;h<n;h++){let p=t[h];for(let m=0;m<3;m++)i[r*4+m]=p[m];r+=1}const s=document.createElement("canvas");s.width=n,s.height=e;const o=s.getContext("2d");return o?(o.putImageData(new ImageData(i,n,e),0,0),s.toDataURL("image/png")):""}const $1=[{path:"/luts/ncsa_paledit/",name:"16_colors.lut",rgb:[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[1,1,171],[1,1,171],[1,1,171],[1,1,171],[1,1,171],[1,1,171],[1,1,171],[1,1,171],[1,1,171],[1,1,171],[1,1,171],[1,1,171],[1,1,171],[1,1,171],[1,1,171],[1,1,171],[1,1,224],[1,1,224],[1,1,224],[1,1,224],[1,1,224],[1,1,224],[1,1,224],[1,1,224],[1,1,224],[1,1,224],[1,1,224],[1,1,224],[1,1,224],[1,1,224],[1,1,224],[1,1,224],[0,110,255],[0,110,255],[0,110,255],[0,110,255],[0,110,255],[0,110,255],[0,110,255],[0,110,255],[0,110,255],[0,110,255],[0,110,255],[0,110,255],[0,110,255],[0,110,255],[0,110,255],[0,110,255],[1,171,254],[1,171,254],[1,171,254],[1,171,254],[1,171,254],[1,171,254],[1,171,254],[1,171,254],[1,171,254],[1,171,254],[1,171,254],[1,171,254],[1,171,254],[1,171,254],[1,171,254],[1,171,254],[1,224,254],[1,224,254],[1,224,254],[1,224,254],[1,224,254],[1,224,254],[1,224,254],[1,224,254],[1,224,254],[1,224,254],[1,224,254],[1,224,254],[1,224,254],[1,224,254],[1,224,254],[1,224,254],[1,254,1],[1,254,1],[1,254,1],[1,254,1],[1,254,1],[1,254,1],[1,254,1],[1,254,1],[1,254,1],[1,254,1],[1,254,1],[1,254,1],[1,254,1],[1,254,1],[1,254,1],[1,254,1],[190,255,0],[190,255,0],[190,255,0],[190,255,0],[190,255,0],[190,255,0],[190,255,0],[190,255,0],[190,255,0],[190,255,0],[190,255,0],[190,255,0],[190,255,0],[190,255,0],[190,255,0],[190,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,224,0],[255,224,0],[255,224,0],[255,224,0],[255,224,0],[255,224,0],[255,224,0],[255,224,0],[255,224,0],[255,224,0],[255,224,0],[255,224,0],[255,224,0],[255,224,0],[255,224,0],[255,224,0],[255,141,0],[255,141,0],[255,141,0],[255,141,0],[255,141,0],[255,141,0],[255,141,0],[255,141,0],[255,141,0],[255,141,0],[255,141,0],[255,141,0],[255,141,0],[255,141,0],[255,141,0],[255,141,0],[250,94,0],[250,94,0],[250,94,0],[250,94,0],[250,94,0],[250,94,0],[250,94,0],[250,94,0],[250,94,0],[250,94,0],[250,94,0],[250,94,0],[250,94,0],[250,94,0],[250,94,0],[250,94,0],[245,0,0],[245,0,0],[245,0,0],[245,0,0],[245,0,0],[245,0,0],[245,0,0],[245,0,0],[245,0,0],[245,0,0],[245,0,0],[245,0,0],[245,0,0],[245,0,0],[245,0,0],[245,0,0],[245,0,135],[245,0,141],[245,0,147],[245,0,153],[245,0,160],[245,0,166],[245,0,172],[245,0,178],[245,0,185],[245,0,191],[245,0,197],[245,0,203],[245,0,210],[245,0,216],[245,0,222],[245,0,228],[222,180,222],[222,180,222],[222,180,222],[222,180,222],[222,180,222],[222,180,222],[222,180,222],[222,180,222],[222,180,222],[222,180,222],[222,180,222],[222,180,222],[222,180,222],[222,180,222],[222,180,222],[222,180,222],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255]]},{path:"/luts/",name:"3-3-2_rgb.lut",rgb:[[0,0,0],[0,0,64],[0,0,128],[0,0,192],[0,32,0],[0,32,64],[0,32,128],[0,32,192],[0,64,0],[0,64,64],[0,64,128],[0,64,192],[0,96,0],[0,96,64],[0,96,128],[0,96,192],[0,128,0],[0,128,64],[0,128,128],[0,128,192],[0,160,0],[0,160,64],[0,160,128],[0,160,192],[0,192,0],[0,192,64],[0,192,128],[0,192,192],[0,224,0],[0,224,64],[0,224,128],[0,224,192],[32,0,0],[32,0,64],[32,0,128],[32,0,192],[32,32,0],[32,32,64],[32,32,128],[32,32,192],[32,64,0],[32,64,64],[32,64,128],[32,64,192],[32,96,0],[32,96,64],[32,96,128],[32,96,192],[32,128,0],[32,128,64],[32,128,128],[32,128,192],[32,160,0],[32,160,64],[32,160,128],[32,160,192],[32,192,0],[32,192,64],[32,192,128],[32,192,192],[32,224,0],[32,224,64],[32,224,128],[32,224,192],[64,0,0],[64,0,64],[64,0,128],[64,0,192],[64,32,0],[64,32,64],[64,32,128],[64,32,192],[64,64,0],[64,64,64],[64,64,128],[64,64,192],[64,96,0],[64,96,64],[64,96,128],[64,96,192],[64,128,0],[64,128,64],[64,128,128],[64,128,192],[64,160,0],[64,160,64],[64,160,128],[64,160,192],[64,192,0],[64,192,64],[64,192,128],[64,192,192],[64,224,0],[64,224,64],[64,224,128],[64,224,192],[96,0,0],[96,0,64],[96,0,128],[96,0,192],[96,32,0],[96,32,64],[96,32,128],[96,32,192],[96,64,0],[96,64,64],[96,64,128],[96,64,192],[96,96,0],[96,96,64],[96,96,128],[96,96,192],[96,128,0],[96,128,64],[96,128,128],[96,128,192],[96,160,0],[96,160,64],[96,160,128],[96,160,192],[96,192,0],[96,192,64],[96,192,128],[96,192,192],[96,224,0],[96,224,64],[96,224,128],[96,224,192],[128,0,0],[128,0,64],[128,0,128],[128,0,192],[128,32,0],[128,32,64],[128,32,128],[128,32,192],[128,64,0],[128,64,64],[128,64,128],[128,64,192],[128,96,0],[128,96,64],[128,96,128],[128,96,192],[128,128,0],[128,128,64],[128,128,128],[128,128,192],[128,160,0],[128,160,64],[128,160,128],[128,160,192],[128,192,0],[128,192,64],[128,192,128],[128,192,192],[128,224,0],[128,224,64],[128,224,128],[128,224,192],[160,0,0],[160,0,64],[160,0,128],[160,0,192],[160,32,0],[160,32,64],[160,32,128],[160,32,192],[160,64,0],[160,64,64],[160,64,128],[160,64,192],[160,96,0],[160,96,64],[160,96,128],[160,96,192],[160,128,0],[160,128,64],[160,128,128],[160,128,192],[160,160,0],[160,160,64],[160,160,128],[160,160,192],[160,192,0],[160,192,64],[160,192,128],[160,192,192],[160,224,0],[160,224,64],[160,224,128],[160,224,192],[192,0,0],[192,0,64],[192,0,128],[192,0,192],[192,32,0],[192,32,64],[192,32,128],[192,32,192],[192,64,0],[192,64,64],[192,64,128],[192,64,192],[192,96,0],[192,96,64],[192,96,128],[192,96,192],[192,128,0],[192,128,64],[192,128,128],[192,128,192],[192,160,0],[192,160,64],[192,160,128],[192,160,192],[192,192,0],[192,192,64],[192,192,128],[192,192,192],[192,224,0],[192,224,64],[192,224,128],[192,224,192],[224,0,0],[224,0,64],[224,0,128],[224,0,192],[224,32,0],[224,32,64],[224,32,128],[224,32,192],[224,64,0],[224,64,64],[224,64,128],[224,64,192],[224,96,0],[224,96,64],[224,96,128],[224,96,192],[224,128,0],[224,128,64],[224,128,128],[224,128,192],[224,160,0],[224,160,64],[224,160,128],[224,160,192],[224,192,0],[224,192,64],[224,192,128],[224,192,192],[224,224,0],[224,224,64],[224,224,128],[224,224,192]]},{path:"/luts/ncsa_paledit/",name:"5_ramps.lut",rgb:[[0,0,1],[0,0,5],[0,0,10],[0,0,15],[0,0,20],[0,0,25],[0,0,30],[0,0,35],[0,0,40],[0,0,45],[0,0,50],[0,0,55],[0,0,60],[0,0,65],[0,0,70],[0,0,75],[0,0,80],[0,0,85],[0,0,90],[0,0,95],[0,0,100],[0,0,105],[0,0,110],[0,0,115],[0,0,120],[0,0,125],[0,0,130],[0,0,135],[0,0,140],[0,0,145],[0,0,150],[0,0,155],[0,0,160],[0,0,165],[0,0,170],[0,0,175],[0,0,180],[0,0,185],[0,0,190],[0,0,195],[0,0,200],[0,0,205],[0,0,210],[0,0,215],[0,0,220],[0,0,225],[0,0,230],[0,0,235],[0,0,240],[0,0,245],[0,0,250],[0,1,0],[0,5,0],[0,10,0],[0,15,0],[0,20,0],[0,25,0],[0,30,0],[0,35,0],[0,40,0],[0,45,0],[0,50,0],[0,55,0],[0,60,0],[0,65,0],[0,70,0],[0,75,0],[0,80,0],[0,85,0],[0,90,0],[0,95,0],[0,100,0],[0,105,0],[0,110,0],[0,115,0],[0,120,0],[0,125,0],[0,130,0],[0,135,0],[0,140,0],[0,145,0],[0,150,0],[0,155,0],[0,160,0],[0,165,0],[0,170,0],[0,175,0],[0,180,0],[0,185,0],[0,190,0],[0,195,0],[0,200,0],[0,205,0],[0,210,0],[0,215,0],[0,220,0],[0,225,0],[0,230,0],[0,235,0],[0,240,0],[0,245,0],[0,250,0],[1,1,0],[5,5,0],[10,10,0],[15,15,0],[20,20,0],[25,25,0],[30,30,0],[35,35,0],[40,40,0],[45,45,0],[50,50,0],[55,55,0],[60,60,0],[65,65,0],[70,70,0],[75,75,0],[80,80,0],[85,85,0],[90,90,0],[95,95,0],[100,100,0],[105,105,0],[110,110,0],[115,115,0],[120,120,0],[125,125,0],[130,130,0],[135,135,0],[140,140,0],[145,145,0],[150,150,0],[155,155,0],[160,160,0],[165,165,0],[170,170,0],[175,175,0],[180,180,0],[185,185,0],[190,190,0],[195,195,0],[200,200,0],[205,205,0],[210,210,0],[215,215,0],[220,220,0],[225,225,0],[230,230,0],[235,235,0],[240,240,0],[245,245,0],[250,250,0],[1,0,0],[5,0,0],[10,0,0],[15,0,0],[20,0,0],[25,0,0],[30,0,0],[35,0,0],[40,0,0],[45,0,0],[50,0,0],[55,0,0],[60,0,0],[65,0,0],[70,0,0],[75,0,0],[80,0,0],[85,0,0],[90,0,0],[95,0,0],[100,0,0],[105,0,0],[110,0,0],[115,0,0],[120,0,0],[125,0,0],[130,0,0],[135,0,0],[140,0,0],[145,0,0],[150,0,0],[155,0,0],[160,0,0],[165,0,0],[170,0,0],[175,0,0],[180,0,0],[185,0,0],[190,0,0],[195,0,0],[200,0,0],[205,0,0],[210,0,0],[215,0,0],[220,0,0],[225,0,0],[230,0,0],[235,0,0],[240,0,0],[245,0,0],[250,0,0],[1,1,1],[5,5,5],[10,10,10],[15,15,15],[20,20,20],[25,25,25],[30,30,30],[35,35,35],[40,40,40],[45,45,45],[50,50,50],[55,55,55],[60,60,60],[65,65,65],[70,70,70],[75,75,75],[80,80,80],[85,85,85],[90,90,90],[95,95,95],[100,100,100],[105,105,105],[110,110,110],[115,115,115],[120,120,120],[125,125,125],[130,130,130],[135,135,135],[140,140,140],[145,145,145],[150,150,150],[155,155,155],[160,160,160],[165,165,165],[170,170,170],[175,175,175],[180,180,180],[185,185,185],[190,190,190],[195,195,195],[200,200,200],[205,205,205],[210,210,210],[215,215,215],[220,220,220],[225,225,225],[230,230,230],[235,235,235],[240,240,240],[245,245,245],[250,250,250],[255,255,255]]},{path:"/luts/ncsa_paledit/",name:"6_shades.lut",rgb:[[0,0,0],[3,0,0],[7,0,0],[11,0,0],[15,0,0],[19,0,0],[23,0,0],[27,0,0],[31,0,0],[35,0,0],[39,0,0],[43,0,0],[47,0,0],[51,0,0],[55,0,0],[59,0,0],[63,0,0],[67,0,0],[71,0,0],[75,0,0],[79,0,0],[83,0,0],[87,0,0],[91,0,0],[95,0,0],[99,0,0],[103,0,0],[107,0,0],[111,0,0],[115,0,0],[119,0,0],[123,0,0],[127,0,0],[131,0,0],[135,0,0],[139,0,0],[143,0,0],[147,0,0],[151,0,0],[155,0,0],[159,0,0],[163,0,0],[167,0,0],[171,0,0],[175,0,0],[179,0,0],[183,0,0],[187,0,0],[191,0,0],[195,0,0],[199,0,0],[203,0,0],[207,0,0],[211,0,0],[215,0,0],[219,0,0],[223,0,0],[227,0,0],[231,0,0],[235,0,0],[239,0,0],[243,0,0],[247,0,0],[251,0,0],[255,0,0],[247,7,0],[239,15,0],[231,23,0],[223,31,0],[215,39,0],[207,47,0],[199,55,0],[191,63,0],[183,71,0],[175,79,0],[167,87,0],[159,95,0],[151,103,0],[143,111,0],[135,119,0],[127,127,0],[119,135,0],[111,143,0],[103,151,0],[95,159,0],[87,167,0],[79,175,0],[71,183,0],[63,191,0],[55,199,0],[47,207,0],[39,215,0],[31,223,0],[23,231,0],[15,239,0],[7,247,0],[0,255,0],[0,247,7],[0,239,15],[0,231,23],[0,223,31],[0,215,39],[0,207,47],[0,199,55],[0,191,63],[0,183,71],[0,175,79],[0,167,87],[0,159,95],[0,151,103],[0,143,111],[0,135,119],[0,127,127],[0,119,135],[0,111,143],[0,103,151],[0,95,159],[0,87,167],[0,79,175],[0,71,183],[0,63,191],[0,55,199],[0,47,207],[0,39,215],[0,31,223],[0,23,231],[0,15,239],[0,7,247],[0,0,255],[0,7,255],[0,15,255],[0,23,255],[0,31,255],[0,39,255],[0,47,255],[0,55,255],[0,63,255],[0,71,255],[0,79,255],[0,87,255],[0,95,255],[0,103,255],[0,111,255],[0,119,255],[0,127,255],[0,135,255],[0,143,255],[0,151,255],[0,159,255],[0,167,255],[0,175,255],[0,183,255],[0,191,255],[0,199,255],[0,207,255],[0,215,255],[0,223,255],[0,231,255],[0,239,255],[0,247,255],[0,255,255],[7,247,255],[15,239,255],[23,231,255],[31,223,255],[39,215,255],[47,207,255],[55,199,255],[63,191,255],[71,183,255],[79,175,255],[87,167,255],[95,159,255],[103,151,255],[111,143,255],[119,135,255],[127,127,255],[135,119,255],[143,111,255],[151,103,255],[159,95,255],[167,87,255],[175,79,255],[183,71,255],[191,63,255],[199,55,255],[207,47,255],[215,39,255],[223,31,255],[231,23,255],[239,15,255],[247,7,255],[255,0,255],[255,7,247],[255,15,239],[255,23,231],[255,31,223],[255,39,215],[255,47,207],[255,55,199],[255,63,191],[255,71,183],[255,79,175],[255,87,167],[255,95,159],[255,103,151],[255,111,143],[255,119,135],[255,127,127],[255,135,119],[255,143,111],[255,151,103],[255,159,95],[255,167,87],[255,175,79],[255,183,71],[255,191,63],[255,199,55],[255,207,47],[255,215,39],[255,223,31],[255,231,23],[255,239,15],[255,247,7],[255,255,0],[255,255,7],[255,255,15],[255,255,23],[255,255,31],[255,255,39],[255,255,47],[255,255,55],[255,255,63],[255,255,71],[255,255,79],[255,255,87],[255,255,95],[255,255,103],[255,255,111],[255,255,119],[255,255,127],[255,255,135],[255,255,143],[255,255,151],[255,255,159],[255,255,167],[255,255,175],[255,255,183],[255,255,191],[255,255,199],[255,255,207],[255,255,215],[255,255,223],[255,255,231],[255,255,239],[255,255,247]]},{path:"/luts/ncsa_paledit/",name:"blue_orange_icb.lut",rgb:[[1,2,1],[1,2,1],[1,3,1],[1,4,1],[1,5,1],[1,6,1],[1,7,1],[1,8,1],[1,9,1],[1,10,1],[1,11,1],[1,12,1],[1,13,1],[1,14,1],[1,15,1],[1,16,1],[1,17,1],[1,18,1],[1,19,1],[1,20,1],[1,21,1],[1,22,1],[1,23,1],[1,24,1],[1,25,1],[1,26,1],[1,27,1],[1,28,1],[1,29,1],[1,30,1],[1,31,1],[1,32,1],[1,33,1],[1,34,1],[1,35,1],[1,36,1],[1,37,1],[1,38,1],[1,39,1],[1,40,1],[1,41,1],[1,42,1],[1,43,1],[1,44,1],[1,45,1],[1,46,1],[1,47,1],[1,48,1],[1,49,1],[1,50,1],[1,51,1],[1,52,1],[1,53,1],[1,54,1],[1,55,1],[1,56,1],[1,57,1],[1,58,1],[1,59,1],[1,60,1],[1,61,1],[1,62,1],[1,63,1],[1,64,1],[2,64,2],[4,63,4],[6,62,6],[8,61,8],[10,60,10],[12,59,12],[14,58,14],[16,57,16],[18,56,18],[20,55,20],[22,54,22],[24,53,24],[26,52,26],[28,51,28],[30,50,30],[32,49,32],[34,48,34],[36,47,36],[38,46,38],[40,45,40],[42,44,42],[44,43,44],[46,42,46],[48,41,48],[50,40,50],[52,39,52],[54,38,54],[56,37,56],[58,36,58],[60,35,60],[62,34,62],[64,33,64],[65,32,65],[67,31,67],[69,30,69],[71,29,71],[73,28,73],[75,27,75],[77,26,77],[79,25,79],[81,24,81],[83,23,83],[85,22,85],[87,21,87],[89,20,89],[91,19,91],[93,18,93],[95,17,95],[97,16,97],[99,15,99],[101,14,101],[103,13,103],[105,12,105],[107,11,107],[109,10,109],[111,9,111],[113,8,113],[115,7,115],[117,6,117],[119,5,119],[121,4,121],[123,3,123],[125,2,125],[127,1,127],[129,1,125],[131,3,123],[133,5,121],[135,7,119],[137,9,117],[139,11,115],[141,13,113],[143,15,111],[145,17,109],[147,19,107],[149,21,105],[151,23,103],[153,25,101],[155,27,99],[157,29,97],[159,31,95],[161,33,93],[163,35,91],[165,37,89],[167,39,87],[169,41,85],[171,43,83],[173,45,81],[175,47,79],[177,49,77],[179,51,75],[181,53,73],[183,55,71],[185,57,69],[187,59,67],[189,61,65],[191,63,64],[192,64,62],[194,66,60],[196,68,58],[198,70,56],[200,72,54],[202,74,52],[204,76,50],[206,78,48],[208,80,46],[210,82,44],[212,84,42],[214,86,40],[216,88,38],[218,90,36],[220,92,34],[222,94,32],[224,96,30],[226,98,28],[228,100,26],[230,102,24],[232,104,22],[234,106,20],[236,108,18],[238,110,16],[240,112,14],[242,114,12],[244,116,10],[246,118,8],[248,120,6],[250,122,4],[252,124,2],[254,126,1],[254,128,4],[254,130,8],[254,132,12],[254,134,16],[254,136,20],[254,138,24],[254,140,28],[254,142,32],[254,144,36],[254,146,40],[254,148,44],[254,150,48],[254,152,52],[254,154,56],[254,156,60],[254,158,64],[254,160,67],[254,162,71],[254,164,75],[254,166,79],[254,168,83],[254,170,87],[254,172,91],[254,174,95],[254,176,99],[254,178,103],[254,180,107],[254,182,111],[254,184,115],[254,186,119],[254,188,123],[254,190,127],[254,191,131],[254,193,135],[254,195,139],[254,197,143],[254,199,147],[254,201,151],[254,203,155],[254,205,159],[254,207,163],[254,209,167],[254,211,171],[254,213,175],[254,215,179],[254,217,183],[254,219,187],[254,221,191],[254,223,194],[254,225,198],[254,227,202],[254,229,206],[254,231,210],[254,233,214],[254,235,218],[254,237,222],[254,239,226],[254,241,230],[254,243,234],[254,245,238],[254,247,242],[254,249,246],[254,251,250],[254,251,250]]},{path:"/luts/ncsa_paledit/",name:"brgbcmyw.lut",rgb:[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[255,0,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,0,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[0,255,255],[248,0,255],[248,0,255],[248,0,255],[248,0,255],[248,0,255],[249,0,255],[249,0,255],[249,0,255],[249,0,255],[249,0,255],[250,0,255],[250,0,255],[250,0,255],[250,0,255],[251,0,255],[251,0,255],[251,0,255],[251,0,255],[251,0,255],[252,0,255],[252,0,255],[252,0,255],[252,0,255],[253,0,255],[253,0,255],[253,0,255],[253,0,255],[253,0,255],[254,0,255],[254,0,255],[254,0,255],[254,0,255],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,0],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255]]},{path:"/luts/",name:"cividis.lut",rgb:[[0,32,76],[0,32,78],[0,33,80],[0,34,81],[0,35,83],[0,35,85],[0,36,86],[0,37,88],[0,38,90],[0,38,91],[0,39,93],[0,40,95],[0,40,97],[0,41,99],[0,42,100],[0,42,102],[0,43,104],[0,44,106],[0,45,108],[0,45,109],[0,46,110],[0,46,111],[0,47,111],[0,47,111],[0,48,111],[0,49,111],[0,49,111],[0,50,110],[0,51,110],[0,52,110],[0,52,110],[1,53,110],[6,54,110],[10,55,109],[14,55,109],[18,56,109],[21,57,109],[23,57,109],[26,58,108],[28,59,108],[30,60,108],[32,60,108],[34,61,108],[36,62,108],[38,62,108],[39,63,108],[41,64,107],[43,65,107],[44,65,107],[46,66,107],[47,67,107],[49,68,107],[50,68,107],[51,69,107],[53,70,107],[54,70,107],[55,71,107],[56,72,107],[58,73,107],[59,73,107],[60,74,107],[61,75,107],[62,75,107],[64,76,107],[65,77,107],[66,78,107],[67,78,107],[68,79,107],[69,80,107],[70,80,107],[71,81,107],[72,82,107],[73,83,107],[74,83,107],[75,84,107],[76,85,107],[77,85,107],[78,86,107],[79,87,108],[80,88,108],[81,88,108],[82,89,108],[83,90,108],[84,90,108],[85,91,108],[86,92,108],[87,93,109],[88,93,109],[89,94,109],[90,95,109],[91,95,109],[92,96,109],[93,97,110],[94,98,110],[95,98,110],[95,99,110],[96,100,110],[97,101,111],[98,101,111],[99,102,111],[100,103,111],[101,103,111],[102,104,112],[103,105,112],[104,106,112],[104,106,112],[105,107,113],[106,108,113],[107,109,113],[108,109,114],[109,110,114],[110,111,114],[111,111,114],[111,112,115],[112,113,115],[113,114,115],[114,114,116],[115,115,116],[116,116,117],[117,117,117],[117,117,117],[118,118,118],[119,119,118],[120,120,118],[121,120,119],[122,121,119],[123,122,119],[123,123,120],[124,123,120],[125,124,120],[126,125,120],[127,126,120],[128,126,120],[129,127,120],[130,128,120],[131,129,120],[132,129,120],[133,130,120],[134,131,120],[135,132,120],[136,133,120],[137,133,120],[138,134,120],[139,135,120],[140,136,120],[141,136,120],[142,137,120],[143,138,120],[144,139,120],[145,140,120],[146,140,120],[147,141,120],[148,142,120],[149,143,120],[150,143,119],[151,144,119],[152,145,119],[153,146,119],[154,147,119],[155,147,119],[156,148,119],[157,149,119],[158,150,118],[159,151,118],[160,152,118],[161,152,118],[162,153,118],[163,154,117],[164,155,117],[165,156,117],[166,156,117],[167,157,117],[168,158,116],[169,159,116],[170,160,116],[171,161,116],[172,161,115],[173,162,115],[174,163,115],[175,164,115],[176,165,114],[177,166,114],[178,166,114],[180,167,113],[181,168,113],[182,169,113],[183,170,112],[184,171,112],[185,171,112],[186,172,111],[187,173,111],[188,174,110],[189,175,110],[190,176,110],[191,177,109],[192,177,109],[193,178,108],[194,179,108],[195,180,108],[197,181,107],[198,182,107],[199,183,106],[200,184,106],[201,184,105],[202,185,105],[203,186,104],[204,187,104],[205,188,103],[206,189,103],[208,190,102],[209,191,102],[210,192,101],[211,192,101],[212,193,100],[213,194,99],[214,195,99],[215,196,98],[216,197,97],[217,198,97],[219,199,96],[220,200,96],[221,201,95],[222,202,94],[223,203,93],[224,203,93],[225,204,92],[227,205,91],[228,206,91],[229,207,90],[230,208,89],[231,209,88],[232,210,87],[233,211,86],[235,212,86],[236,213,85],[237,214,84],[238,215,83],[239,216,82],[240,217,81],[241,218,80],[243,219,79],[244,220,78],[245,221,77],[246,222,76],[247,223,75],[249,224,73],[250,224,72],[251,225,71],[252,226,70],[253,227,69],[255,228,67],[255,229,66],[255,230,66],[255,231,67],[255,232,68],[255,233,69]]},{path:"/luts/ncsa_paledit/",name:"cool.lut",rgb:[[1,3,2],[1,3,2],[1,5,4],[1,7,6],[1,9,8],[1,11,10],[1,13,12],[1,15,14],[1,17,16],[1,19,18],[1,21,20],[1,23,22],[1,25,24],[1,27,26],[1,29,28],[1,31,30],[1,33,32],[1,35,34],[1,37,36],[1,39,38],[1,41,40],[1,43,42],[1,45,44],[1,47,46],[1,49,48],[1,51,50],[1,53,52],[1,55,54],[1,57,56],[1,59,58],[1,61,60],[1,63,62],[1,64,64],[1,66,65],[1,68,67],[1,70,69],[1,72,71],[1,74,73],[1,76,75],[1,78,77],[1,80,79],[1,82,81],[1,84,83],[1,86,85],[1,88,87],[1,90,89],[1,92,91],[1,94,93],[1,96,95],[1,98,97],[1,100,99],[1,102,101],[1,104,103],[1,106,105],[1,108,107],[1,110,109],[1,112,111],[1,114,113],[1,116,115],[1,118,117],[1,120,119],[1,122,121],[1,124,123],[1,126,125],[1,128,127],[2,126,129],[4,124,131],[6,122,133],[8,120,135],[10,118,137],[12,116,139],[14,114,141],[16,112,143],[18,110,145],[20,108,147],[22,106,149],[24,104,151],[26,102,153],[28,100,155],[30,98,157],[32,96,159],[34,94,161],[36,92,163],[38,90,165],[40,88,167],[42,86,169],[44,84,171],[46,82,173],[48,80,175],[50,78,177],[52,76,179],[54,74,181],[56,72,183],[58,70,185],[60,68,187],[62,66,189],[64,64,191],[65,63,192],[67,61,194],[69,59,196],[71,57,198],[73,55,200],[75,53,202],[77,51,204],[79,49,206],[81,47,208],[83,45,210],[85,43,212],[87,41,214],[89,39,216],[91,37,218],[93,35,220],[95,33,222],[97,31,224],[99,29,226],[101,27,228],[103,25,230],[105,23,232],[107,21,234],[109,19,236],[111,17,238],[113,15,240],[115,13,242],[117,11,244],[119,9,246],[121,7,248],[123,5,250],[125,3,252],[127,1,254],[129,2,250],[131,4,246],[133,6,242],[135,8,238],[137,10,234],[139,12,230],[141,14,226],[143,16,222],[145,18,218],[147,20,214],[149,22,210],[151,24,206],[153,26,202],[155,28,198],[157,30,194],[159,32,191],[161,34,187],[163,36,183],[165,38,179],[167,40,175],[169,42,171],[171,44,167],[173,46,163],[175,48,159],[177,50,155],[179,52,151],[181,54,147],[183,56,143],[185,58,139],[187,60,135],[189,62,131],[191,64,127],[192,65,123],[194,67,119],[196,69,115],[198,71,111],[200,73,107],[202,75,103],[204,77,99],[206,79,95],[208,81,91],[210,83,87],[212,85,83],[214,87,79],[216,89,75],[218,91,71],[220,93,67],[222,95,64],[224,97,60],[226,99,56],[228,101,52],[230,103,48],[232,105,44],[234,107,40],[236,109,36],[238,111,32],[240,113,28],[242,115,24],[244,117,20],[246,119,16],[248,121,12],[250,123,8],[252,125,4],[254,127,1],[254,129,4],[254,131,8],[254,133,12],[254,135,16],[254,137,20],[254,139,24],[254,141,28],[254,143,32],[254,145,36],[254,147,40],[254,149,44],[254,151,48],[254,153,52],[254,155,56],[254,157,60],[254,159,64],[254,161,67],[254,163,71],[254,165,75],[254,167,79],[254,169,83],[254,171,87],[254,173,91],[254,175,95],[254,177,99],[254,179,103],[254,181,107],[254,183,111],[254,185,115],[254,187,119],[254,189,123],[254,191,127],[254,192,131],[254,194,135],[254,196,139],[254,198,143],[254,200,147],[254,202,151],[254,204,155],[254,206,159],[254,208,163],[254,210,167],[254,212,171],[254,214,175],[254,216,179],[254,218,183],[254,220,187],[254,222,191],[254,224,194],[254,226,198],[254,228,202],[254,230,206],[254,232,210],[254,234,214],[254,236,218],[254,238,222],[254,240,226],[254,242,230],[254,244,234],[254,246,238],[254,248,242],[254,250,246],[254,250,246]]},{path:"/luts/wcif/",name:"cyan_hot.lut",rgb:[[0,0,0],[0,1,2],[0,2,5],[0,4,8],[0,5,11],[0,7,14],[0,8,17],[0,10,20],[0,11,23],[0,12,26],[0,14,29],[0,15,32],[0,17,35],[0,18,38],[0,20,41],[0,21,44],[0,23,47],[0,24,50],[0,25,53],[0,27,56],[0,28,59],[0,30,62],[0,31,65],[0,33,68],[0,34,71],[0,36,74],[0,37,77],[0,38,80],[0,40,83],[0,41,86],[0,43,89],[0,44,92],[0,46,95],[0,47,98],[0,49,101],[0,50,104],[0,51,107],[0,53,110],[0,54,113],[0,56,116],[0,57,119],[0,59,122],[0,60,125],[0,61,128],[0,63,131],[0,64,134],[0,66,137],[0,67,140],[0,69,143],[0,70,146],[0,72,149],[0,73,152],[0,74,155],[0,76,158],[0,77,161],[0,79,164],[0,80,167],[0,82,170],[0,83,173],[0,85,176],[0,86,179],[0,87,182],[0,89,185],[0,90,188],[0,92,191],[0,93,194],[0,95,197],[0,96,200],[0,98,203],[0,99,206],[0,100,209],[0,102,212],[0,103,215],[0,105,218],[0,106,221],[0,108,224],[0,109,227],[0,110,230],[0,112,233],[0,113,236],[0,115,239],[0,116,242],[0,118,245],[0,119,248],[0,123,255],[0,123,255],[0,124,255],[0,126,255],[0,127,255],[0,129,255],[0,130,255],[0,132,255],[0,133,255],[0,135,255],[0,136,255],[0,138,255],[0,140,255],[0,141,255],[0,143,255],[0,144,255],[0,146,255],[0,147,255],[0,149,255],[0,150,255],[0,152,255],[0,153,255],[0,155,255],[0,157,255],[0,158,255],[0,160,255],[0,161,255],[0,163,255],[0,164,255],[0,166,255],[0,167,255],[0,169,255],[0,170,255],[0,172,255],[0,174,255],[0,175,255],[0,177,255],[0,178,255],[0,180,255],[0,181,255],[0,183,255],[0,184,255],[0,186,255],[0,187,255],[0,189,255],[0,191,255],[0,192,255],[0,194,255],[0,195,255],[0,197,255],[0,198,255],[0,200,255],[0,201,255],[0,203,255],[0,204,255],[0,206,255],[0,208,255],[0,209,255],[0,211,255],[0,212,255],[0,214,255],[0,215,255],[0,217,255],[0,218,255],[0,220,255],[0,222,255],[0,223,255],[0,225,255],[0,226,255],[0,228,255],[0,229,255],[0,231,255],[0,232,255],[0,234,255],[0,235,255],[0,237,255],[0,239,255],[0,240,255],[0,242,255],[0,243,255],[0,245,255],[0,246,255],[0,248,255],[0,249,255],[0,251,255],[0,255,255],[0,255,255],[2,255,255],[5,255,255],[8,255,255],[11,255,255],[14,255,255],[17,255,255],[20,255,255],[23,255,255],[26,255,255],[29,255,255],[32,255,255],[35,255,255],[38,255,255],[41,255,255],[44,255,255],[47,255,255],[50,255,255],[53,255,255],[56,255,255],[59,255,255],[62,255,255],[65,255,255],[68,255,255],[71,255,255],[74,255,255],[77,255,255],[80,255,255],[83,255,255],[86,255,255],[89,255,255],[92,255,255],[95,255,255],[98,255,255],[101,255,255],[104,255,255],[107,255,255],[110,255,255],[113,255,255],[116,255,255],[119,255,255],[122,255,255],[125,255,255],[128,255,255],[131,255,255],[134,255,255],[137,255,255],[140,255,255],[143,255,255],[146,255,255],[149,255,255],[152,255,255],[155,255,255],[158,255,255],[161,255,255],[164,255,255],[167,255,255],[170,255,255],[173,255,255],[176,255,255],[179,255,255],[182,255,255],[185,255,255],[188,255,255],[191,255,255],[194,255,255],[197,255,255],[200,255,255],[203,255,255],[206,255,255],[209,255,255],[212,255,255],[215,255,255],[218,255,255],[221,255,255],[224,255,255],[227,255,255],[230,255,255],[233,255,255],[236,255,255],[239,255,255],[242,255,255],[245,255,255],[248,255,255],[251,255,255],[255,255,255]]},{path:"/luts/ncsa_paledit/",name:"edges.lut",rgb:[[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[6,6,6],[11,11,11],[16,16,16],[21,21,21],[26,26,26],[31,31,31],[36,36,36],[41,41,41],[46,46,46],[51,51,51],[61,61,61],[90,90,90],[105,105,1],[120,120,120],[135,135,135],[150,150,150],[165,165,165],[180,180,180],[194,194,194],[204,204,204],[224,224,224],[253,253,253],[224,224,224],[204,204,204],[194,194,194],[180,180,180],[165,165,165],[150,150,150],[135,135,135],[120,120,120],[105,105,105],[80,80,80],[70,70,70],[61,61,61],[51,51,51],[46,46,46],[41,41,41],[36,36,36],[31,31,31],[26,26,26],[21,21,21],[16,16,16],[11,11,11],[6,6,6],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1]]},{path:"/luts/",name:"fire.lut",rgb:[[0,0,0],[0,0,7],[0,0,15],[0,0,22],[0,0,30],[0,0,38],[0,0,45],[0,0,53],[0,0,61],[0,0,65],[0,0,69],[0,0,74],[0,0,78],[0,0,82],[0,0,87],[0,0,91],[1,0,96],[4,0,100],[7,0,104],[10,0,108],[13,0,113],[16,0,117],[19,0,121],[22,0,125],[25,0,130],[28,0,134],[31,0,138],[34,0,143],[37,0,147],[40,0,151],[43,0,156],[46,0,160],[49,0,165],[52,0,168],[55,0,171],[58,0,175],[61,0,178],[64,0,181],[67,0,185],[70,0,188],[73,0,192],[76,0,195],[79,0,199],[82,0,202],[85,0,206],[88,0,209],[91,0,213],[94,0,216],[98,0,220],[101,0,220],[104,0,221],[107,0,222],[110,0,223],[113,0,224],[116,0,225],[119,0,226],[122,0,227],[125,0,224],[128,0,222],[131,0,220],[134,0,218],[137,0,216],[140,0,214],[143,0,212],[146,0,210],[148,0,206],[150,0,202],[152,0,199],[154,0,195],[156,0,191],[158,0,188],[160,0,184],[162,0,181],[163,0,177],[164,0,173],[166,0,169],[167,0,166],[168,0,162],[170,0,158],[171,0,154],[173,0,151],[174,0,147],[175,0,143],[177,0,140],[178,0,136],[179,0,132],[181,0,129],[182,0,125],[184,0,122],[185,0,118],[186,0,114],[188,0,111],[189,0,107],[190,0,103],[192,0,100],[193,0,96],[195,0,93],[196,1,89],[198,3,85],[199,5,82],[201,7,78],[202,8,74],[204,10,71],[205,12,67],[207,14,64],[208,16,60],[209,19,56],[210,21,53],[212,24,49],[213,27,45],[214,29,42],[215,32,38],[217,35,35],[218,37,31],[220,40,27],[221,43,23],[223,46,20],[224,48,16],[226,51,12],[227,54,8],[229,57,5],[230,59,4],[231,62,3],[233,65,3],[234,68,2],[235,70,1],[237,73,1],[238,76,0],[240,79,0],[241,81,0],[243,84,0],[244,87,0],[246,90,0],[247,92,0],[249,95,0],[250,98,0],[252,101,0],[252,103,0],[252,105,0],[253,107,0],[253,109,0],[253,111,0],[254,113,0],[254,115,0],[255,117,0],[255,119,0],[255,121,0],[255,123,0],[255,125,0],[255,127,0],[255,129,0],[255,131,0],[255,133,0],[255,134,0],[255,136,0],[255,138,0],[255,140,0],[255,141,0],[255,143,0],[255,145,0],[255,147,0],[255,148,0],[255,150,0],[255,152,0],[255,154,0],[255,155,0],[255,157,0],[255,159,0],[255,161,0],[255,162,0],[255,164,0],[255,166,0],[255,168,0],[255,169,0],[255,171,0],[255,173,0],[255,175,0],[255,176,0],[255,178,0],[255,180,0],[255,182,0],[255,184,0],[255,186,0],[255,188,0],[255,190,0],[255,191,0],[255,193,0],[255,195,0],[255,197,0],[255,199,0],[255,201,0],[255,203,0],[255,205,0],[255,206,0],[255,208,0],[255,210,0],[255,212,0],[255,213,0],[255,215,0],[255,217,0],[255,219,0],[255,220,0],[255,222,0],[255,224,0],[255,226,0],[255,228,0],[255,230,0],[255,232,0],[255,234,0],[255,235,4],[255,237,8],[255,239,13],[255,241,17],[255,242,21],[255,244,26],[255,246,30],[255,248,35],[255,248,42],[255,249,50],[255,250,58],[255,251,66],[255,252,74],[255,253,82],[255,254,90],[255,255,98],[255,255,105],[255,255,113],[255,255,121],[255,255,129],[255,255,136],[255,255,144],[255,255,152],[255,255,160],[255,255,167],[255,255,175],[255,255,183],[255,255,191],[255,255,199],[255,255,207],[255,255,215],[255,255,223],[255,255,227],[255,255,231],[255,255,235],[255,255,239],[255,255,243],[255,255,247],[255,255,251],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255]]},{path:"/luts/ncsa_paledit/",name:"gem.lut",rgb:[[1,2,2],[1,2,2],[1,2,3],[1,3,4],[1,3,5],[1,4,6],[1,4,7],[1,5,8],[1,5,9],[1,6,10],[1,6,11],[1,7,12],[1,7,13],[1,8,14],[1,8,15],[1,9,16],[1,9,17],[1,10,18],[1,10,19],[1,11,20],[1,11,21],[1,12,22],[1,12,23],[1,13,24],[1,13,25],[1,14,26],[1,14,27],[1,15,28],[1,15,29],[1,16,30],[1,16,31],[1,17,32],[1,17,33],[1,18,34],[1,18,35],[1,19,36],[1,19,37],[1,20,38],[1,20,39],[1,21,40],[1,21,41],[1,22,42],[1,22,43],[1,23,44],[1,23,45],[1,24,46],[1,24,47],[1,25,48],[1,25,49],[1,26,50],[1,26,51],[1,27,52],[1,27,53],[1,28,54],[1,28,55],[1,29,56],[1,29,57],[1,30,58],[1,30,59],[1,31,60],[1,31,61],[1,32,62],[1,32,63],[1,33,64],[1,33,64],[2,32,65],[4,32,66],[6,31,67],[8,31,68],[10,30,69],[12,30,70],[14,29,71],[16,29,72],[18,28,73],[20,28,74],[22,27,75],[24,27,76],[26,26,77],[28,26,78],[30,25,79],[32,25,80],[34,24,81],[36,24,82],[38,23,83],[40,23,84],[42,22,85],[44,22,86],[46,21,87],[48,21,88],[50,20,89],[52,20,90],[54,19,91],[56,19,92],[58,18,93],[60,18,94],[62,17,95],[64,17,96],[65,16,97],[67,16,98],[69,15,99],[71,15,100],[73,14,101],[75,14,102],[77,13,103],[79,13,104],[81,12,105],[83,12,106],[85,11,107],[87,11,108],[89,10,109],[91,10,110],[93,9,111],[95,9,112],[97,8,113],[99,8,114],[101,7,115],[103,7,116],[105,6,117],[107,6,118],[109,5,119],[111,5,120],[113,4,121],[115,4,122],[117,3,123],[119,3,124],[121,2,125],[123,2,126],[125,1,127],[127,3,127],[129,4,125],[131,6,123],[133,7,121],[135,9,119],[137,10,117],[139,12,115],[141,13,113],[143,15,111],[145,16,109],[147,18,107],[149,19,105],[151,21,103],[153,22,101],[155,24,99],[157,25,97],[159,27,95],[161,28,93],[163,30,91],[165,31,89],[167,33,87],[169,34,85],[171,36,83],[173,37,81],[175,39,79],[177,40,77],[179,42,75],[181,43,73],[183,45,71],[185,46,69],[187,48,67],[189,49,65],[191,51,64],[192,52,62],[194,54,60],[196,55,58],[198,57,56],[200,58,54],[202,60,52],[204,61,50],[206,63,48],[208,64,46],[210,65,44],[212,66,42],[214,68,40],[216,69,38],[218,71,36],[220,72,34],[222,74,32],[224,75,30],[226,77,28],[228,78,26],[230,80,24],[232,81,22],[234,83,20],[236,84,18],[238,86,16],[240,87,14],[242,89,12],[244,90,10],[246,92,8],[248,93,6],[250,95,4],[252,95,1],[254,98,4],[254,100,8],[254,103,12],[254,105,16],[254,108,20],[254,110,24],[254,113,28],[254,115,32],[254,118,36],[254,120,40],[254,123,44],[254,125,48],[254,128,52],[254,130,56],[254,133,60],[254,135,64],[254,138,67],[254,140,71],[254,143,75],[254,145,79],[254,148,83],[254,150,87],[254,153,91],[254,155,95],[254,158,99],[254,160,103],[254,163,107],[254,165,111],[254,168,115],[254,170,119],[254,173,123],[254,175,127],[254,178,131],[254,180,135],[254,183,139],[254,185,143],[254,188,147],[254,190,151],[254,192,155],[254,194,159],[254,197,163],[254,199,167],[254,202,171],[254,204,175],[254,207,179],[254,209,183],[254,212,187],[254,214,191],[254,217,194],[254,219,198],[254,222,202],[254,224,206],[254,227,210],[254,229,214],[254,232,218],[254,234,222],[254,237,226],[254,239,230],[254,242,234],[254,244,238],[254,247,242],[254,249,246],[254,252,250],[254,252,250]]},{path:"/luts/",name:"glasbey.lut",rgb:[[255,255,255],[0,0,255],[255,0,0],[0,255,0],[0,0,51],[255,0,182],[0,83,0],[255,211,0],[0,159,255],[154,77,66],[0,255,190],[120,63,193],[31,150,152],[255,172,253],[177,204,113],[241,8,92],[254,143,66],[221,0,255],[32,26,1],[114,0,85],[118,108,149],[2,173,36],[200,255,0],[136,108,0],[255,183,159],[133,133,103],[161,3,0],[20,249,255],[0,71,158],[220,94,147],[147,212,255],[0,76,255],[0,66,80],[57,167,106],[238,112,254],[0,0,100],[171,245,204],[161,146,255],[164,255,115],[255,206,113],[71,0,21],[212,173,197],[251,118,111],[171,188,0],[117,0,215],[166,0,154],[0,115,254],[165,93,174],[98,132,2],[0,121,168],[0,255,131],[86,53,0],[159,0,63],[66,45,66],[255,242,187],[0,93,67],[252,255,124],[159,191,186],[167,84,19],[74,39,108],[0,16,166],[145,78,109],[207,149,0],[195,187,255],[253,68,64],[66,78,32],[106,1,0],[181,131,84],[132,233,147],[96,217,0],[255,111,211],[102,75,63],[254,100,0],[228,3,127],[17,199,174],[210,129,139],[91,118,124],[32,59,106],[180,84,255],[226,8,210],[0,1,20],[93,132,68],[166,250,255],[97,123,201],[98,0,122],[126,190,58],[0,60,183],[255,253,0],[7,197,226],[180,167,57],[148,186,138],[204,187,160],[55,0,49],[0,40,1],[150,122,129],[39,136,38],[206,130,180],[150,164,196],[180,32,128],[110,86,180],[147,0,185],[199,48,61],[115,102,255],[15,187,253],[172,164,100],[182,117,250],[216,220,254],[87,141,113],[216,85,34],[0,196,103],[243,165,105],[216,255,182],[1,24,219],[52,66,54],[255,154,0],[87,95,1],[198,241,79],[255,95,133],[123,172,240],[120,100,49],[162,133,204],[105,255,220],[198,82,100],[121,26,64],[0,238,70],[231,207,69],[217,128,233],[255,211,209],[209,255,141],[36,0,3],[87,163,193],[211,231,201],[203,111,79],[62,24,0],[0,117,223],[112,176,88],[209,24,0],[0,30,107],[105,200,197],[255,203,255],[233,194,137],[191,129,46],[69,42,145],[171,76,194],[14,117,61],[0,30,25],[118,73,127],[255,169,200],[94,55,217],[238,230,138],[159,54,33],[80,0,148],[189,144,128],[0,109,126],[88,223,96],[71,80,103],[1,93,159],[99,48,60],[2,206,148],[139,83,37],[171,0,255],[141,42,135],[85,83,148],[150,255,0],[0,152,123],[255,138,203],[222,69,200],[107,109,230],[30,0,68],[173,76,138],[255,134,161],[0,35,60],[138,205,0],[111,202,157],[225,75,253],[255,176,77],[229,232,57],[114,16,255],[111,82,101],[134,137,48],[99,38,80],[105,38,32],[200,110,0],[209,164,255],[198,210,86],[79,103,77],[174,165,166],[170,45,101],[199,81,175],[255,89,172],[146,102,78],[102,134,184],[111,152,255],[92,255,159],[172,137,178],[210,34,98],[199,207,147],[255,185,30],[250,148,141],[49,34,78],[254,81,97],[254,141,100],[68,54,23],[201,162,84],[199,232,240],[68,152,0],[147,172,58],[22,75,28],[8,84,121],[116,45,0],[104,60,255],[64,41,38],[164,113,215],[207,0,155],[118,1,35],[83,0,88],[0,82,232],[43,92,87],[160,217,146],[176,26,229],[29,3,36],[122,58,159],[214,209,207],[160,100,105],[106,157,160],[153,219,113],[192,56,207],[125,255,89],[149,0,34],[213,162,223],[22,131,204],[166,249,69],[109,105,97],[86,188,78],[255,109,81],[255,3,248],[255,0,73],[202,0,35],[67,109,18],[234,170,173],[191,165,0],[38,44,51],[85,185,2],[121,182,158],[254,236,212],[139,165,89],[141,254,193],[0,60,43],[63,17,40],[255,221,246],[17,26,146],[154,66,84],[149,157,238],[126,130,72],[58,6,101],[189,117,101]]},{path:"/luts/",name:"glasbey_inverted.lut",rgb:[[0,0,0],[0,48,136],[16,136,0],[0,168,152],[88,0,0],[128,0,160],[136,152,0],[184,168,152],[0,8,64],[0,112,152],[0,120,88],[104,176,144],[144,0,32],[120,120,152],[136,144,104],[184,176,216],[0,48,0],[24,48,184],[72,136,0],[0,184,184],[88,32,104],[160,32,152],[144,192,0],[200,216,176],[0,112,48],[0,112,184],[56,168,80],[112,168,216],[160,0,96],[168,112,136],[128,192,96],[192,232,208],[32,32,0],[8,88,144],[56,192,48],[56,168,152],[88,104,0],[104,0,248],[248,136,0],[216,192,144],[0,0,128],[64,136,152],[48,120,72],[128,224,184],[248,0,64],[120,112,200],[248,128,80],[184,200,232],[40,88,0],[24,16,192],[80,248,0],[56,200,192],[96,64,64],[248,16,184],[160,200,32],[200,248,200],[40,80,56],[72,88,192],[80,176,112],[96,248,192],[144,96,88],[240,136,192],[248,192,72],[248,224,224],[0,16,40],[72,48,136],[0,144,40],[8,240,160],[104,40,0],[112,88,160],[152,128,48],[200,184,200],[48,64,88],[0,144,168],[0,160,120],[152,176,192],[144,48,56],[144,144,152],[136,176,128],[184,208,216],[56,64,0],[0,0,248],[88,136,40],[0,248,248],[88,0,136],[192,88,144],[136,232,0],[248,224,144],[0,72,96],[48,104,248],[48,248,96],[144,216,216],[248,0,120],[208,160,168],[168,248,104],[192,224,248],[40,24,48],[48,88,168],[0,248,0],[96,184,168],[104,96,16],[104,80,192],[248,136,32],[216,208,200],[16,24,112],[88,152,144],[88,160,80],[152,216,168],[240,64,0],[112,144,248],[248,144,128],[248,168,248],[0,80,48],[48,0,248],[128,192,56],[48,248,216],[104,64,112],[168,64,248],[248,248,0],[248,216,192],[80,88,88],[64,88,248],[72,216,120],[136,248,216],[232,56,80],[184,96,248],[248,232,88],[216,248,248],[0,32,8],[56,40,168],[24,176,0],[40,216,152],[112,0,56],[128,64,192],[144,144,24],[176,216,144],[32,0,72],[0,136,144],[0,160,80],[144,168,152],[232,0,0],[128,120,176],[160,136,128],[168,160,248],[0,80,0],[0,64,224],[72,168,0],[32,168,216],[120,16,104],[168,64,176],[144,168,72],[192,248,152],[16,80,80],[0,96,248],[0,248,72],[96,200,216],[144,48,96],[176,152,176],[184,208,104],[184,248,232],[56,16,8],[0,72,176],[24,240,40],[96,176,184],[88,120,48],[152,32,248],[248,168,16],[248,184,168],[40,0,112],[72,120,168],[40,120,112],[136,248,168],[248,56,24],[128,152,200],[248,160,96],[232,176,224],[32,120,16],[88,0,184],[72,224,24],[88,168,232],[104,88,56],[248,0,248],[248,176,0],[224,248,184],[80,112,72],[64,120,208],[112,208,120],[104,248,216],[224,104,96],[216,112,216],[248,184,96],[224,248,216],[0,40,40],[56,8,176],[32,184,48],[0,248,176],[128,80,8],[136,72,160],[152,120,64],[184,208,184],[56,48,104],[48,144,176],[32,160,104],[152,200,192],[168,88,56],[160,120,184],[168,168,104],[168,200,248],[40,40,48],[0,40,248],[80,176,56],[40,224,248],[96,32,136],[248,56,152],[136,248,40],[248,248,152],[0,104,112],[0,152,248],[24,248,128],[136,208,248],[248,48,104],[248,160,184],[152,248,128],[216,224,248],[80,8,48],[80,88,152],[32,248,0],[80,208,152],[144,96,0],[112,48,248],[232,120,48],[248,192,208],[16,56,112],[104,152,176],[104,128,120],[168,248,160],[248,96,0],[152,120,248],[240,168,128],[248,208,248],[40,88,32],[80,64,248],[104,248,64],[88,248,248],[128,72,96],[248,80,216],[248,224,32],[248,248,200],[64,104,120],[48,144,248],[88,248,96],[144,248,248],[248,96,128],[184,144,232],[232,224,104],[248,248,232]]},{path:"/luts/",name:"glow.lut",rgb:[[0,138,0],[1,0,0],[1,0,0],[2,0,0],[2,0,0],[3,0,0],[4,0,0],[6,0,0],[8,0,0],[11,0,0],[13,0,0],[15,0,0],[18,0,0],[21,1,1],[23,1,1],[24,1,1],[27,1,1],[30,1,1],[31,1,1],[33,1,1],[36,1,1],[37,1,1],[40,2,1],[42,2,3],[45,2,4],[46,2,4],[49,2,4],[51,2,4],[53,2,4],[56,2,4],[58,3,3],[60,3,3],[62,3,3],[65,3,3],[68,4,4],[70,5,6],[72,5,6],[74,5,6],[78,5,6],[80,6,6],[82,6,6],[84,6,6],[86,7,6],[89,7,6],[91,8,6],[93,9,6],[96,9,6],[98,9,6],[100,9,6],[102,10,6],[104,10,6],[106,11,6],[108,12,6],[110,13,6],[113,14,6],[115,14,6],[117,14,6],[119,14,6],[122,15,6],[125,16,6],[127,16,5],[129,17,5],[132,18,7],[135,19,9],[135,19,10],[137,19,10],[140,20,10],[141,21,10],[142,22,10],[145,23,10],[148,24,10],[149,24,10],[152,25,10],[154,27,10],[156,28,10],[157,28,10],[158,28,10],[160,29,10],[162,31,10],[164,32,10],[166,32,10],[168,33,9],[170,35,9],[171,36,9],[173,36,9],[174,37,9],[176,39,9],[178,40,9],[179,40,9],[180,41,9],[182,42,9],[183,43,9],[185,45,9],[186,46,9],[189,47,9],[192,48,8],[193,50,8],[193,51,8],[194,52,8],[195,54,8],[195,55,8],[196,56,8],[198,57,8],[199,59,8],[201,62,8],[203,63,8],[204,65,8],[204,66,8],[205,68,8],[206,70,8],[207,71,8],[209,73,8],[211,74,7],[211,75,7],[211,77,7],[211,79,7],[213,81,7],[215,83,7],[216,85,7],[216,87,7],[216,89,7],[216,92,7],[218,93,7],[219,96,7],[219,98,7],[219,99,7],[220,100,7],[222,103,6],[223,105,6],[223,107,6],[223,109,6],[223,111,6],[224,113,6],[224,116,6],[226,117,7],[227,119,10],[227,121,12],[227,123,12],[227,125,12],[228,126,12],[229,128,12],[231,130,12],[231,132,13],[231,135,15],[231,137,17],[231,139,18],[231,140,18],[231,142,19],[232,144,20],[233,145,22],[234,147,23],[234,148,23],[234,150,24],[234,152,26],[234,154,27],[234,156,27],[235,158,28],[237,160,30],[238,161,32],[238,162,33],[238,164,34],[238,166,35],[238,168,37],[238,171,39],[238,172,40],[238,172,41],[239,174,43],[240,176,45],[242,177,46],[242,179,48],[242,180,50],[242,182,52],[242,183,54],[242,185,55],[242,187,57],[242,188,58],[242,189,61],[243,191,63],[245,192,65],[246,192,67],[246,192,70],[246,196,72],[246,200,73],[245,201,76],[245,201,79],[245,202,80],[245,203,83],[245,204,86],[245,206,88],[245,208,89],[247,210,92],[248,212,95],[249,213,96],[249,213,99],[249,214,102],[249,215,104],[249,217,107],[249,218,108],[249,220,110],[249,221,113],[249,222,116],[249,223,120],[249,224,121],[249,225,123],[249,226,125],[249,226,127],[249,227,129],[249,228,132],[249,229,135],[250,231,137],[252,232,140],[253,233,143],[253,234,146],[253,235,149],[253,236,150],[253,237,153],[253,238,155],[253,239,158],[253,239,160],[253,239,162],[253,239,165],[253,241,168],[253,242,171],[253,243,173],[253,243,175],[253,243,178],[253,244,180],[253,245,183],[253,247,186],[253,247,188],[253,247,191],[253,247,192],[253,247,195],[253,247,198],[253,248,201],[253,249,203],[253,250,206],[253,251,209],[253,251,210],[253,251,213],[253,252,215],[253,252,218],[253,252,221],[253,252,223],[253,252,225],[253,252,228],[253,252,231],[253,252,233],[253,252,236],[253,252,238],[253,252,241],[253,252,244],[253,252,246],[253,253,250],[253,253,252],[0,0,255]]},{path:"/luts/",name:"grays.lut",rgb:[[0,0,0],[1,1,1],[2,2,2],[3,3,3],[4,4,4],[5,5,5],[6,6,6],[7,7,7],[8,8,8],[9,9,9],[10,10,10],[11,11,11],[12,12,12],[13,13,13],[14,14,14],[15,15,15],[16,16,16],[17,17,17],[18,18,18],[19,19,19],[20,20,20],[21,21,21],[22,22,22],[23,23,23],[24,24,24],[25,25,25],[26,26,26],[27,27,27],[28,28,28],[29,29,29],[30,30,30],[31,31,31],[32,32,32],[33,33,33],[34,34,34],[35,35,35],[36,36,36],[37,37,37],[38,38,38],[39,39,39],[40,40,40],[41,41,41],[42,42,42],[43,43,43],[44,44,44],[45,45,45],[46,46,46],[47,47,47],[48,48,48],[49,49,49],[50,50,50],[51,51,51],[52,52,52],[53,53,53],[54,54,54],[55,55,55],[56,56,56],[57,57,57],[58,58,58],[59,59,59],[60,60,60],[61,61,61],[62,62,62],[63,63,63],[64,64,64],[65,65,65],[66,66,66],[67,67,67],[68,68,68],[69,69,69],[70,70,70],[71,71,71],[72,72,72],[73,73,73],[74,74,74],[75,75,75],[76,76,76],[77,77,77],[78,78,78],[79,79,79],[80,80,80],[81,81,81],[82,82,82],[83,83,83],[84,84,84],[85,85,85],[86,86,86],[87,87,87],[88,88,88],[89,89,89],[90,90,90],[91,91,91],[92,92,92],[93,93,93],[94,94,94],[95,95,95],[96,96,96],[97,97,97],[98,98,98],[99,99,99],[100,100,100],[101,101,101],[102,102,102],[103,103,103],[104,104,104],[105,105,105],[106,106,106],[107,107,107],[108,108,108],[109,109,109],[110,110,110],[111,111,111],[112,112,112],[113,113,113],[114,114,114],[115,115,115],[116,116,116],[117,117,117],[118,118,118],[119,119,119],[120,120,120],[121,121,121],[122,122,122],[123,123,123],[124,124,124],[125,125,125],[126,126,126],[127,127,127],[128,128,128],[129,129,129],[130,130,130],[131,131,131],[132,132,132],[133,133,133],[134,134,134],[135,135,135],[136,136,136],[137,137,137],[138,138,138],[139,139,139],[140,140,140],[141,141,141],[142,142,142],[143,143,143],[144,144,144],[145,145,145],[146,146,146],[147,147,147],[148,148,148],[149,149,149],[150,150,150],[151,151,151],[152,152,152],[153,153,153],[154,154,154],[155,155,155],[156,156,156],[157,157,157],[158,158,158],[159,159,159],[160,160,160],[161,161,161],[162,162,162],[163,163,163],[164,164,164],[165,165,165],[166,166,166],[167,167,167],[168,168,168],[169,169,169],[170,170,170],[171,171,171],[172,172,172],[173,173,173],[174,174,174],[175,175,175],[176,176,176],[177,177,177],[178,178,178],[179,179,179],[180,180,180],[181,181,181],[182,182,182],[183,183,183],[184,184,184],[185,185,185],[186,186,186],[187,187,187],[188,188,188],[189,189,189],[190,190,190],[191,191,191],[192,192,192],[193,193,193],[194,194,194],[195,195,195],[196,196,196],[197,197,197],[198,198,198],[199,199,199],[200,200,200],[201,201,201],[202,202,202],[203,203,203],[204,204,204],[205,205,205],[206,206,206],[207,207,207],[208,208,208],[209,209,209],[210,210,210],[211,211,211],[212,212,212],[213,213,213],[214,214,214],[215,215,215],[216,216,216],[217,217,217],[218,218,218],[219,219,219],[220,220,220],[221,221,221],[222,222,222],[223,223,223],[224,224,224],[225,225,225],[226,226,226],[227,227,227],[228,228,228],[229,229,229],[230,230,230],[231,231,231],[232,232,232],[233,233,233],[234,234,234],[235,235,235],[236,236,236],[237,237,237],[238,238,238],[239,239,239],[240,240,240],[241,241,241],[242,242,242],[243,243,243],[244,244,244],[245,245,245],[246,246,246],[247,247,247],[248,248,248],[249,249,249],[250,250,250],[251,251,251],[252,252,252],[253,253,253],[254,254,254],[255,255,255]]},{path:"/luts/wcif/",name:"green_fire_blue.lut",rgb:[[0,0,0],[0,1,2],[0,2,5],[0,3,7],[0,5,10],[0,6,13],[0,7,15],[0,9,18],[0,10,21],[0,11,23],[0,13,26],[0,14,29],[0,15,31],[0,17,34],[0,18,37],[0,19,39],[0,21,42],[0,22,45],[0,23,47],[0,25,50],[0,26,53],[0,27,55],[0,29,58],[0,30,61],[0,31,63],[0,33,66],[0,34,69],[0,35,71],[0,37,74],[0,38,77],[0,39,79],[0,41,82],[0,42,85],[0,43,87],[0,45,90],[0,46,92],[0,47,95],[0,49,98],[0,50,100],[0,51,103],[0,53,106],[0,54,108],[0,55,111],[0,57,114],[0,58,116],[0,59,119],[0,61,122],[0,62,124],[0,63,127],[0,65,130],[0,66,132],[0,67,135],[0,69,138],[0,70,140],[0,71,143],[0,73,146],[0,74,148],[0,75,151],[0,77,154],[0,78,156],[0,79,159],[0,81,162],[0,82,164],[0,85,170],[0,85,170],[0,87,167],[0,90,164],[0,92,162],[0,95,159],[0,98,156],[0,100,154],[0,103,151],[0,106,148],[0,108,146],[0,111,143],[0,114,140],[0,116,138],[0,119,135],[0,122,132],[0,124,130],[0,127,127],[0,130,124],[0,132,122],[0,135,119],[0,138,116],[0,140,114],[0,143,111],[0,146,108],[0,148,106],[0,151,103],[0,154,100],[0,156,98],[0,159,95],[0,162,92],[0,164,90],[0,167,87],[0,170,85],[0,172,82],[0,175,79],[0,177,77],[0,180,74],[0,183,71],[0,185,69],[0,188,66],[0,191,63],[0,193,61],[0,196,58],[0,199,55],[0,201,53],[0,204,50],[0,207,47],[0,209,45],[0,212,42],[0,215,39],[0,217,37],[0,220,34],[0,223,31],[0,225,29],[0,228,26],[0,231,23],[0,233,21],[0,236,18],[0,239,15],[0,241,13],[0,244,10],[0,247,7],[0,249,5],[0,255,0],[0,255,0],[3,255,0],[7,255,0],[11,255,0],[15,255,0],[19,255,0],[23,255,0],[27,255,0],[31,255,0],[35,255,0],[39,255,0],[43,255,0],[47,255,0],[51,255,0],[55,255,0],[59,255,0],[63,255,0],[67,255,0],[71,255,0],[75,255,0],[79,255,0],[83,255,0],[87,255,0],[91,255,0],[95,255,0],[99,255,0],[103,255,0],[107,255,0],[111,255,0],[115,255,0],[119,255,0],[123,255,0],[127,255,0],[131,255,0],[135,255,0],[139,255,0],[143,255,0],[147,255,0],[151,255,0],[155,255,0],[159,255,0],[163,255,0],[167,255,0],[171,255,0],[175,255,0],[179,255,0],[183,255,0],[187,255,0],[191,255,0],[195,255,0],[199,255,0],[203,255,0],[207,255,0],[211,255,0],[215,255,0],[219,255,0],[223,255,0],[227,255,0],[231,255,0],[235,255,0],[239,255,0],[243,255,0],[247,255,0],[255,255,0],[255,255,0],[255,255,3],[255,255,7],[255,255,11],[255,255,15],[255,255,19],[255,255,23],[255,255,27],[255,255,31],[255,255,35],[255,255,39],[255,255,43],[255,255,47],[255,255,51],[255,255,55],[255,255,59],[255,255,63],[255,255,67],[255,255,71],[255,255,75],[255,255,79],[255,255,83],[255,255,87],[255,255,91],[255,255,95],[255,255,99],[255,255,103],[255,255,107],[255,255,111],[255,255,115],[255,255,119],[255,255,123],[255,255,127],[255,255,131],[255,255,135],[255,255,139],[255,255,143],[255,255,147],[255,255,151],[255,255,155],[255,255,159],[255,255,163],[255,255,167],[255,255,171],[255,255,175],[255,255,179],[255,255,183],[255,255,187],[255,255,191],[255,255,195],[255,255,199],[255,255,203],[255,255,207],[255,255,211],[255,255,215],[255,255,219],[255,255,223],[255,255,227],[255,255,231],[255,255,235],[255,255,239],[255,255,243],[255,255,247],[255,255,255]]},{path:"/luts/wcif/",name:"hilo.lut",rgb:[[0,0,255],[1,1,1],[2,2,2],[3,3,3],[4,4,4],[5,5,5],[6,6,6],[7,7,7],[8,8,8],[9,9,9],[10,10,10],[11,11,11],[12,12,12],[13,13,13],[14,14,14],[15,15,15],[16,16,16],[17,17,17],[18,18,18],[19,19,19],[20,20,20],[21,21,21],[22,22,22],[23,23,23],[24,24,24],[25,25,25],[26,26,26],[27,27,27],[28,28,28],[29,29,29],[30,30,30],[31,31,31],[32,32,32],[33,33,33],[34,34,34],[35,35,35],[36,36,36],[37,37,37],[38,38,38],[39,39,39],[40,40,40],[41,41,41],[42,42,42],[43,43,43],[44,44,44],[45,45,45],[46,46,46],[47,47,47],[48,48,48],[49,49,49],[50,50,50],[51,51,51],[52,52,52],[53,53,53],[54,54,54],[55,55,55],[56,56,56],[57,57,57],[58,58,58],[59,59,59],[60,60,60],[61,61,61],[62,62,62],[63,63,63],[64,64,64],[65,65,65],[66,66,66],[67,67,67],[68,68,68],[69,69,69],[70,70,70],[71,71,71],[72,72,72],[73,73,73],[74,74,74],[75,75,75],[76,76,76],[77,77,77],[78,78,78],[79,79,79],[80,80,80],[81,81,81],[82,82,82],[83,83,83],[84,84,84],[85,85,85],[86,86,86],[87,87,87],[88,88,88],[89,89,89],[90,90,90],[91,91,91],[92,92,92],[93,93,93],[94,94,94],[95,95,95],[96,96,96],[97,97,97],[98,98,98],[99,99,99],[100,100,100],[101,101,101],[102,102,102],[103,103,103],[104,104,104],[105,105,105],[106,106,106],[107,107,107],[108,108,108],[109,109,109],[110,110,110],[111,111,111],[112,112,112],[113,113,113],[114,114,114],[115,115,115],[116,116,116],[117,117,117],[118,118,118],[119,119,119],[120,120,120],[121,121,121],[122,122,122],[123,123,123],[124,124,124],[125,125,125],[126,126,126],[127,127,127],[128,128,128],[129,129,129],[130,130,130],[131,131,131],[132,132,132],[133,133,133],[134,134,134],[135,135,135],[136,136,136],[137,137,137],[138,138,138],[139,139,139],[140,140,140],[141,141,141],[142,142,142],[143,143,143],[144,144,144],[145,145,145],[146,146,146],[147,147,147],[148,148,148],[149,149,149],[150,150,150],[151,151,151],[152,152,152],[153,153,153],[154,154,154],[155,155,155],[156,156,156],[157,157,157],[158,158,158],[159,159,159],[160,160,160],[161,161,161],[162,162,162],[163,163,163],[164,164,164],[165,165,165],[166,166,166],[167,167,167],[168,168,168],[169,169,169],[170,170,170],[171,171,171],[172,172,172],[173,173,173],[174,174,174],[175,175,175],[176,176,176],[177,177,177],[178,178,178],[179,179,179],[180,180,180],[181,181,181],[182,182,182],[183,183,183],[184,184,184],[185,185,185],[186,186,186],[187,187,187],[188,188,188],[189,189,189],[190,190,190],[191,191,191],[192,192,192],[193,193,193],[194,194,194],[195,195,195],[196,196,196],[197,197,197],[198,198,198],[199,199,199],[200,200,200],[201,201,201],[202,202,202],[203,203,203],[204,204,204],[205,205,205],[206,206,206],[207,207,207],[208,208,208],[209,209,209],[210,210,210],[211,211,211],[212,212,212],[213,213,213],[214,214,214],[215,215,215],[216,216,216],[217,217,217],[218,218,218],[219,219,219],[220,220,220],[221,221,221],[222,222,222],[223,223,223],[224,224,224],[225,225,225],[226,226,226],[227,227,227],[228,228,228],[229,229,229],[230,230,230],[231,231,231],[232,232,232],[233,233,233],[234,234,234],[235,235,235],[236,236,236],[237,237,237],[238,238,238],[239,239,239],[240,240,240],[241,241,241],[242,242,242],[243,243,243],[244,244,244],[245,245,245],[246,246,246],[247,247,247],[248,248,248],[249,249,249],[250,250,250],[251,251,251],[252,252,252],[253,253,253],[254,254,254],[255,0,0]]},{path:"/luts/wcif/",name:"ica.lut",rgb:[[204,204,255],[202,202,255],[201,200,255],[199,198,255],[198,196,255],[196,194,255],[195,192,255],[194,190,255],[192,188,255],[191,187,255],[189,185,255],[188,183,255],[186,181,255],[185,179,255],[184,177,255],[182,175,255],[181,173,255],[179,171,255],[178,170,255],[177,168,255],[175,166,255],[174,164,255],[172,162,255],[171,160,255],[169,158,255],[168,156,255],[167,154,255],[165,153,255],[164,151,255],[162,149,255],[161,147,255],[160,145,255],[158,143,255],[157,141,255],[155,139,255],[154,137,255],[152,136,255],[151,134,255],[150,132,255],[148,130,255],[147,128,255],[145,126,255],[144,124,255],[143,122,255],[141,120,255],[140,119,255],[138,117,255],[137,115,255],[135,113,255],[134,111,255],[133,109,255],[131,107,255],[130,105,255],[128,103,255],[127,102,255],[126,100,255],[124,98,255],[123,96,255],[121,94,255],[120,92,255],[118,90,255],[117,88,255],[116,86,255],[114,85,255],[113,83,255],[111,81,255],[110,79,255],[109,77,255],[107,75,255],[106,73,255],[104,71,255],[103,69,255],[101,68,255],[100,66,255],[99,64,255],[97,62,255],[96,60,255],[94,58,255],[93,56,255],[92,54,255],[90,52,255],[89,51,255],[87,49,255],[86,47,255],[84,45,255],[83,43,255],[82,41,255],[80,39,255],[79,37,255],[77,35,255],[76,34,255],[75,32,255],[73,30,255],[72,28,255],[70,26,255],[69,24,255],[67,22,255],[66,20,255],[65,18,255],[63,17,255],[62,15,255],[60,13,255],[59,11,255],[58,9,255],[56,7,255],[55,5,255],[53,3,255],[52,1,255],[51,0,255],[48,0,242],[45,0,229],[43,0,216],[40,0,204],[38,0,191],[35,0,178],[33,0,165],[30,0,153],[28,0,140],[25,0,127],[22,0,114],[20,0,102],[17,0,89],[15,0,76],[12,0,63],[10,0,51],[7,0,38],[5,0,25],[2,0,12],[0,0,0],[5,3,0],[10,6,0],[15,9,0],[20,12,0],[25,15,0],[30,18,0],[35,21,0],[40,24,0],[45,27,0],[50,30,0],[56,33,0],[61,36,0],[66,39,0],[71,42,0],[76,45,0],[81,48,0],[86,52,0],[91,55,0],[96,58,0],[101,61,0],[107,64,0],[112,67,0],[117,70,0],[122,73,0],[127,76,0],[132,79,0],[137,82,0],[142,85,0],[147,88,0],[153,91,0],[158,94,0],[163,97,0],[168,100,0],[173,104,0],[178,107,0],[183,110,0],[188,113,0],[193,116,0],[198,119,0],[204,122,0],[209,125,0],[214,128,0],[219,131,0],[224,134,0],[229,137,0],[234,140,0],[239,143,0],[244,146,0],[249,149,0],[255,153,0],[255,154,2],[255,155,5],[255,156,7],[255,158,10],[255,159,13],[255,160,15],[255,162,18],[255,163,21],[255,164,23],[255,166,26],[255,167,29],[255,168,31],[255,170,34],[255,171,37],[255,172,39],[255,174,42],[255,175,45],[255,176,47],[255,178,50],[255,179,52],[255,180,55],[255,182,58],[255,183,60],[255,184,63],[255,186,66],[255,187,68],[255,188,71],[255,190,74],[255,191,76],[255,192,79],[255,194,82],[255,195,84],[255,196,87],[255,198,90],[255,199,92],[255,200,95],[255,202,98],[255,203,100],[255,204,103],[255,205,105],[255,207,108],[255,208,111],[255,209,113],[255,211,116],[255,212,119],[255,213,121],[255,215,124],[255,216,127],[255,217,129],[255,219,132],[255,220,135],[255,221,137],[255,223,140],[255,224,143],[255,225,145],[255,227,148],[255,228,151],[255,229,153],[255,231,156],[255,232,158],[255,233,161],[255,235,164],[255,236,166],[255,237,169],[255,239,172],[255,240,174],[255,241,177],[255,243,180],[255,244,182],[255,245,185],[255,247,188],[255,248,190],[255,249,193],[255,251,196],[255,252,198],[255,253,201],[255,255,204]]},{path:"/luts/wcif/",name:"ica2.lut",rgb:[[255,255,0],[252,254,0],[250,254,0],[247,253,0],[245,253,0],[243,252,0],[240,252,0],[238,251,0],[236,251,0],[233,250,0],[231,250,0],[229,249,0],[226,249,0],[224,248,0],[221,248,0],[219,247,0],[217,247,0],[214,246,0],[212,246,0],[210,246,0],[207,245,0],[205,245,0],[203,244,0],[200,244,0],[198,243,0],[195,243,0],[193,242,0],[191,242,0],[188,241,0],[186,241,0],[184,240,0],[181,240,0],[179,239,0],[177,239,0],[174,238,0],[172,238,0],[169,237,0],[167,237,0],[165,237,0],[162,236,0],[160,236,0],[158,235,0],[155,235,0],[153,234,0],[151,234,0],[148,233,0],[146,233,0],[144,232,0],[141,232,0],[139,231,0],[136,231,0],[134,230,0],[132,230,0],[129,229,0],[127,229,0],[125,229,0],[122,228,0],[120,228,0],[118,227,0],[115,227,0],[113,226,0],[110,226,0],[108,225,0],[106,225,0],[103,224,0],[101,224,0],[99,223,0],[96,223,0],[94,222,0],[92,222,0],[89,221,0],[87,221,0],[84,220,0],[82,220,0],[80,220,0],[77,219,0],[75,219,0],[73,218,0],[70,218,0],[68,217,0],[66,217,0],[63,216,0],[61,216,0],[59,215,0],[56,215,0],[54,214,0],[51,214,0],[49,213,0],[47,213,0],[44,212,0],[42,212,0],[40,212,0],[37,211,0],[35,211,0],[33,210,0],[30,210,0],[28,209,0],[25,209,0],[23,208,0],[21,208,0],[18,207,0],[16,207,0],[14,206,0],[11,206,0],[9,205,0],[7,205,0],[4,204,0],[2,204,0],[0,204,0],[0,193,0],[0,183,0],[0,173,0],[0,163,0],[0,153,0],[0,142,0],[0,132,0],[0,122,0],[0,112,0],[0,102,0],[0,91,0],[0,81,0],[0,71,0],[0,61,0],[0,51,0],[0,40,0],[0,30,0],[0,20,0],[0,10,0],[0,0,0],[5,3,0],[10,6,0],[15,9,0],[20,12,0],[25,15,0],[30,18,0],[35,21,0],[40,24,0],[45,27,0],[50,30,0],[56,33,0],[61,36,0],[66,39,0],[71,42,0],[76,45,0],[81,48,0],[86,52,0],[91,55,0],[96,58,0],[101,61,0],[107,64,0],[112,67,0],[117,70,0],[122,73,0],[127,76,0],[132,79,0],[137,82,0],[142,85,0],[147,88,0],[153,91,0],[158,94,0],[163,97,0],[168,100,0],[173,104,0],[178,107,0],[183,110,0],[188,113,0],[193,116,0],[198,119,0],[204,122,0],[209,125,0],[214,128,0],[219,131,0],[224,134,0],[229,137,0],[234,140,0],[239,143,0],[244,146,0],[249,149,0],[255,153,0],[255,154,2],[255,155,5],[255,156,7],[255,158,10],[255,159,13],[255,160,15],[255,162,18],[255,163,21],[255,164,23],[255,166,26],[255,167,29],[255,168,31],[255,170,34],[255,171,37],[255,172,39],[255,174,42],[255,175,45],[255,176,47],[255,178,50],[255,179,52],[255,180,55],[255,182,58],[255,183,60],[255,184,63],[255,186,66],[255,187,68],[255,188,71],[255,190,74],[255,191,76],[255,192,79],[255,194,82],[255,195,84],[255,196,87],[255,198,90],[255,199,92],[255,200,95],[255,202,98],[255,203,100],[255,204,103],[255,205,105],[255,207,108],[255,208,111],[255,209,113],[255,211,116],[255,212,119],[255,213,121],[255,215,124],[255,216,127],[255,217,129],[255,219,132],[255,220,135],[255,221,137],[255,223,140],[255,224,143],[255,225,145],[255,227,148],[255,228,151],[255,229,153],[255,231,156],[255,232,158],[255,233,161],[255,235,164],[255,236,166],[255,237,169],[255,239,172],[255,240,174],[255,241,177],[255,243,180],[255,244,182],[255,245,185],[255,247,188],[255,248,190],[255,249,193],[255,251,196],[255,252,198],[255,253,201],[255,255,204]]},{path:"/luts/wcif/",name:"ica3.lut",rgb:[[255,204,255],[254,202,254],[254,200,254],[253,198,253],[253,196,253],[252,194,252],[252,192,252],[251,190,251],[251,188,251],[250,187,250],[250,185,250],[249,183,249],[249,181,249],[248,179,248],[248,177,248],[247,175,247],[247,173,247],[246,171,246],[246,170,246],[246,168,246],[245,166,245],[245,164,245],[244,162,244],[244,160,244],[243,158,243],[243,156,243],[242,154,242],[242,153,242],[241,151,241],[241,149,241],[240,147,240],[240,145,240],[239,143,239],[239,141,239],[238,139,238],[238,137,238],[237,136,237],[237,134,237],[237,132,237],[236,130,236],[236,128,236],[235,126,235],[235,124,235],[234,122,234],[234,120,234],[233,119,233],[233,117,233],[232,115,232],[232,113,232],[231,111,231],[231,109,231],[230,107,230],[230,105,230],[229,103,229],[229,102,229],[229,100,229],[228,98,228],[228,96,228],[227,94,227],[227,92,227],[226,90,226],[226,88,226],[225,86,225],[225,85,225],[224,83,224],[224,81,224],[223,79,223],[223,77,223],[222,75,222],[222,73,222],[221,71,221],[221,69,221],[220,68,220],[220,66,220],[220,64,220],[219,62,219],[219,60,219],[218,58,218],[218,56,218],[217,54,217],[217,52,217],[216,51,216],[216,49,216],[215,47,215],[215,45,215],[214,43,214],[214,41,214],[213,39,213],[213,37,213],[212,35,212],[212,34,212],[212,32,212],[211,30,211],[211,28,211],[210,26,210],[210,24,210],[209,22,209],[209,20,209],[208,18,208],[208,17,208],[207,15,207],[207,13,207],[206,11,206],[206,9,206],[205,7,205],[205,5,205],[204,3,204],[204,1,204],[204,0,204],[193,0,193],[183,0,183],[173,0,173],[163,0,163],[153,0,153],[142,0,142],[132,0,132],[122,0,122],[112,0,112],[102,0,102],[91,0,91],[81,0,81],[71,0,71],[61,0,61],[51,0,51],[40,0,40],[30,0,30],[20,0,20],[10,0,10],[0,0,0],[12,5,0],[25,10,0],[38,15,0],[51,20,0],[63,25,0],[76,30,0],[89,35,0],[102,40,0],[114,45,0],[127,50,0],[140,56,0],[153,61,0],[165,66,0],[178,71,0],[191,76,0],[204,81,0],[216,86,0],[229,91,0],[242,96,0],[255,102,0],[255,103,1],[255,104,3],[255,106,5],[255,107,7],[255,109,9],[255,110,11],[255,112,13],[255,113,15],[255,114,17],[255,116,19],[255,117,20],[255,119,22],[255,120,24],[255,122,26],[255,123,28],[255,124,30],[255,126,32],[255,127,34],[255,129,36],[255,130,38],[255,132,40],[255,133,41],[255,134,43],[255,136,45],[255,137,47],[255,139,49],[255,140,51],[255,142,53],[255,143,55],[255,144,57],[255,146,59],[255,147,61],[255,149,62],[255,150,64],[255,152,66],[255,153,68],[255,154,70],[255,156,72],[255,157,74],[255,159,76],[255,160,78],[255,162,80],[255,163,81],[255,164,83],[255,166,85],[255,167,87],[255,169,89],[255,170,91],[255,172,93],[255,173,95],[255,174,97],[255,176,99],[255,177,101],[255,179,102],[255,180,104],[255,182,106],[255,183,108],[255,184,110],[255,186,112],[255,187,114],[255,189,116],[255,190,118],[255,192,120],[255,193,122],[255,194,123],[255,196,125],[255,197,127],[255,199,129],[255,200,131],[255,202,133],[255,203,135],[255,204,137],[255,206,139],[255,207,141],[255,209,142],[255,210,144],[255,212,146],[255,213,148],[255,214,150],[255,216,152],[255,217,154],[255,219,156],[255,220,158],[255,222,160],[255,223,162],[255,224,163],[255,226,165],[255,227,167],[255,229,169],[255,230,171],[255,232,173],[255,233,175],[255,234,177],[255,236,179],[255,237,181],[255,239,183],[255,240,184],[255,242,186],[255,243,188],[255,244,190],[255,246,192],[255,247,194],[255,249,196],[255,250,198],[255,252,200],[255,253,202],[255,255,204]]},{path:"/luts/",name:"ice.lut",rgb:[[0,156,140],[0,157,140],[0,158,141],[0,159,142],[0,160,143],[0,161,144],[0,162,145],[0,163,146],[0,165,147],[0,166,148],[0,167,149],[0,169,151],[0,170,152],[0,171,153],[0,173,155],[0,174,156],[0,176,158],[0,177,159],[0,178,160],[0,179,161],[0,180,162],[0,181,163],[0,182,164],[0,183,165],[0,184,166],[0,184,166],[0,185,167],[0,186,167],[0,187,168],[0,187,168],[0,188,169],[0,189,169],[0,190,170],[0,190,170],[0,191,171],[0,192,172],[0,193,173],[0,193,173],[0,194,174],[0,195,175],[0,196,176],[2,195,180],[4,195,184],[7,194,188],[9,194,192],[11,194,196],[14,193,200],[16,193,204],[19,193,209],[20,191,210],[21,190,211],[22,189,213],[24,188,214],[25,187,215],[26,186,217],[27,185,218],[29,184,220],[31,182,221],[34,180,223],[36,179,225],[39,177,227],[42,175,228],[44,174,230],[47,172,232],[50,171,234],[49,169,232],[49,168,231],[49,167,230],[49,166,229],[48,165,228],[48,164,227],[48,163,226],[48,162,225],[51,160,226],[55,158,227],[59,156,229],[63,154,230],[67,152,231],[71,150,233],[75,148,234],[79,146,236],[83,143,237],[87,140,238],[91,138,239],[95,135,241],[99,132,242],[103,130,243],[107,127,244],[112,125,246],[114,122,246],[117,120,247],[120,118,247],[123,116,248],[125,113,248],[128,111,249],[131,109,249],[134,107,250],[137,105,250],[140,103,250],[143,101,250],[146,100,250],[149,98,250],[152,96,250],[155,94,250],[158,93,251],[161,91,250],[165,90,250],[168,88,250],[172,87,250],[175,85,250],[179,84,250],[182,82,250],[186,81,250],[187,81,250],[189,82,250],[191,83,250],[193,84,250],[195,84,250],[197,85,250],[199,86,250],[201,87,250],[203,87,249],[205,88,248],[207,88,248],[209,89,247],[211,90,246],[213,90,246],[215,91,245],[217,92,245],[218,92,243],[220,93,241],[221,93,239],[223,94,237],[224,95,235],[226,95,233],[227,96,231],[229,97,230],[230,96,230],[232,96,230],[233,96,230],[235,96,230],[237,95,230],[238,95,230],[240,95,230],[242,95,230],[243,94,229],[244,94,228],[245,94,227],[246,94,226],[247,93,225],[248,93,224],[249,93,223],[250,93,222],[250,93,219],[250,93,217],[250,93,214],[250,93,212],[250,93,209],[250,93,207],[250,93,204],[250,93,202],[250,92,199],[250,92,196],[250,91,193],[250,91,191],[250,91,188],[250,90,185],[250,90,182],[250,90,180],[250,89,177],[250,88,175],[250,88,173],[250,87,171],[250,86,169],[250,86,167],[250,85,165],[250,85,163],[250,83,160],[250,81,157],[250,79,155],[250,77,152],[250,75,149],[250,73,147],[250,71,144],[251,69,142],[250,68,139],[250,67,137],[250,67,134],[250,66,132],[250,65,130],[250,65,127],[250,64,125],[250,64,123],[250,62,121],[250,61,120],[250,60,119],[250,59,118],[250,57,117],[250,56,116],[250,55,115],[250,54,114],[250,53,113],[250,52,112],[250,51,111],[250,50,110],[250,49,109],[250,48,108],[250,47,107],[250,47,106],[250,45,104],[250,44,103],[250,42,101],[250,41,100],[250,39,98],[250,38,97],[250,36,95],[250,35,94],[250,33,92],[250,31,91],[250,29,90],[250,27,89],[250,25,87],[250,23,86],[250,21,85],[251,19,84],[251,16,81],[251,14,79],[251,11,76],[251,9,74],[251,7,71],[251,4,69],[251,2,66],[251,0,64],[250,0,59],[249,1,54],[248,1,49],[247,2,45],[246,2,40],[245,3,35],[244,3,30],[243,4,26],[241,3,26],[239,3,26],[238,2,26],[236,2,26],[234,1,26],[233,1,26],[231,0,26],[230,0,27],[230,0,27],[230,0,27],[230,0,27],[230,0,27],[230,0,27],[230,0,27],[230,0,27]]},{path:"/luts/matplotlib/",name:"inferno.lut",rgb:[[0,0,3],[0,0,4],[0,0,6],[1,0,7],[1,1,9],[1,1,11],[2,1,14],[2,2,16],[3,2,18],[4,3,20],[4,3,22],[5,4,24],[6,4,27],[7,5,29],[8,6,31],[9,6,33],[10,7,35],[11,7,38],[13,8,40],[14,8,42],[15,9,45],[16,9,47],[18,10,50],[19,10,52],[20,11,54],[22,11,57],[23,11,59],[25,11,62],[26,11,64],[28,12,67],[29,12,69],[31,12,71],[32,12,74],[34,11,76],[36,11,78],[38,11,80],[39,11,82],[41,11,84],[43,10,86],[45,10,88],[46,10,90],[48,10,92],[50,9,93],[52,9,95],[53,9,96],[55,9,97],[57,9,98],[59,9,100],[60,9,101],[62,9,102],[64,9,102],[65,9,103],[67,10,104],[69,10,105],[70,10,105],[72,11,106],[74,11,106],[75,12,107],[77,12,107],[79,13,108],[80,13,108],[82,14,108],[83,14,109],[85,15,109],[87,15,109],[88,16,109],[90,17,109],[91,17,110],[93,18,110],[95,18,110],[96,19,110],[98,20,110],[99,20,110],[101,21,110],[102,21,110],[104,22,110],[106,23,110],[107,23,110],[109,24,110],[110,24,110],[112,25,110],[114,25,109],[115,26,109],[117,27,109],[118,27,109],[120,28,109],[122,28,109],[123,29,108],[125,29,108],[126,30,108],[128,31,107],[129,31,107],[131,32,107],[133,32,106],[134,33,106],[136,33,106],[137,34,105],[139,34,105],[141,35,105],[142,36,104],[144,36,104],[145,37,103],[147,37,103],[149,38,102],[150,38,102],[152,39,101],[153,40,100],[155,40,100],[156,41,99],[158,41,99],[160,42,98],[161,43,97],[163,43,97],[164,44,96],[166,44,95],[167,45,95],[169,46,94],[171,46,93],[172,47,92],[174,48,91],[175,49,91],[177,49,90],[178,50,89],[180,51,88],[181,51,87],[183,52,86],[184,53,86],[186,54,85],[187,55,84],[189,55,83],[190,56,82],[191,57,81],[193,58,80],[194,59,79],[196,60,78],[197,61,77],[199,62,76],[200,62,75],[201,63,74],[203,64,73],[204,65,72],[205,66,71],[207,68,70],[208,69,68],[209,70,67],[210,71,66],[212,72,65],[213,73,64],[214,74,63],[215,75,62],[217,77,61],[218,78,59],[219,79,58],[220,80,57],[221,82,56],[222,83,55],[223,84,54],[224,86,52],[226,87,51],[227,88,50],[228,90,49],[229,91,48],[230,92,46],[230,94,45],[231,95,44],[232,97,43],[233,98,42],[234,100,40],[235,101,39],[236,103,38],[237,104,37],[237,106,35],[238,108,34],[239,109,33],[240,111,31],[240,112,30],[241,114,29],[242,116,28],[242,117,26],[243,119,25],[243,121,24],[244,122,22],[245,124,21],[245,126,20],[246,128,18],[246,129,17],[247,131,16],[247,133,14],[248,135,13],[248,136,12],[248,138,11],[249,140,9],[249,142,8],[249,144,8],[250,145,7],[250,147,6],[250,149,6],[250,151,6],[251,153,6],[251,155,6],[251,157,6],[251,158,7],[251,160,7],[251,162,8],[251,164,10],[251,166,11],[251,168,13],[251,170,14],[251,172,16],[251,174,18],[251,176,20],[251,177,22],[251,179,24],[251,181,26],[251,183,28],[251,185,30],[250,187,33],[250,189,35],[250,191,37],[250,193,40],[249,195,42],[249,197,44],[249,199,47],[248,201,49],[248,203,52],[248,205,55],[247,207,58],[247,209,60],[246,211,63],[246,213,66],[245,215,69],[245,217,72],[244,219,75],[244,220,79],[243,222,82],[243,224,86],[243,226,89],[242,228,93],[242,230,96],[241,232,100],[241,233,104],[241,235,108],[241,237,112],[241,238,116],[241,240,121],[241,242,125],[242,243,129],[242,244,133],[243,246,137],[244,247,141],[245,248,145],[246,250,149],[247,251,153],[249,252,157],[250,253,160],[252,254,164]]},{path:"/luts/wcif/",name:"magenta_hot.lut",rgb:[[0,0,0],[1,0,1],[3,0,3],[4,0,4],[6,0,6],[7,0,7],[9,0,9],[11,0,11],[12,0,12],[14,0,14],[15,0,15],[17,0,17],[19,0,19],[20,0,20],[22,0,22],[23,0,23],[25,0,25],[27,0,27],[28,0,28],[30,0,30],[31,0,31],[33,0,33],[35,0,35],[36,0,36],[38,0,38],[39,0,39],[41,0,41],[43,0,43],[44,0,44],[46,0,46],[47,0,47],[49,0,49],[51,0,51],[52,0,52],[54,0,54],[55,0,55],[57,0,57],[58,0,58],[60,0,60],[62,0,62],[63,0,63],[65,0,65],[66,0,66],[68,0,68],[70,0,70],[71,0,71],[73,0,73],[74,0,74],[76,0,76],[78,0,78],[79,0,79],[81,0,81],[82,0,82],[84,0,84],[86,0,86],[87,0,87],[89,0,89],[90,0,90],[92,0,92],[94,0,94],[95,0,95],[97,0,97],[98,0,98],[102,0,102],[102,0,102],[104,0,104],[106,0,106],[109,0,109],[111,0,111],[113,0,113],[116,0,116],[118,0,118],[121,0,121],[123,0,123],[125,0,125],[128,0,128],[130,0,130],[133,0,133],[135,0,135],[137,0,137],[140,0,140],[142,0,142],[145,0,145],[147,0,147],[149,0,149],[152,0,152],[154,0,154],[156,0,156],[159,0,159],[161,0,161],[164,0,164],[166,0,166],[168,0,168],[171,0,171],[173,0,173],[176,0,176],[178,0,178],[180,0,180],[183,0,183],[185,0,185],[188,0,188],[190,0,190],[192,0,192],[195,0,195],[197,0,197],[200,0,200],[202,0,202],[204,0,204],[207,0,207],[209,0,209],[211,0,211],[214,0,214],[216,0,216],[219,0,219],[221,0,221],[223,0,223],[226,0,226],[228,0,228],[231,0,231],[233,0,233],[235,0,235],[238,0,238],[240,0,240],[243,0,243],[245,0,245],[247,0,247],[250,0,250],[255,0,255],[255,0,255],[255,1,255],[255,3,255],[255,4,255],[255,6,255],[255,7,255],[255,9,255],[255,11,255],[255,12,255],[255,14,255],[255,15,255],[255,17,255],[255,19,255],[255,20,255],[255,22,255],[255,23,255],[255,25,255],[255,27,255],[255,28,255],[255,30,255],[255,31,255],[255,33,255],[255,35,255],[255,36,255],[255,38,255],[255,39,255],[255,41,255],[255,43,255],[255,44,255],[255,46,255],[255,47,255],[255,49,255],[255,51,255],[255,52,255],[255,54,255],[255,55,255],[255,57,255],[255,58,255],[255,60,255],[255,62,255],[255,63,255],[255,65,255],[255,66,255],[255,68,255],[255,70,255],[255,71,255],[255,73,255],[255,74,255],[255,76,255],[255,78,255],[255,79,255],[255,81,255],[255,82,255],[255,84,255],[255,86,255],[255,87,255],[255,89,255],[255,90,255],[255,92,255],[255,94,255],[255,95,255],[255,97,255],[255,98,255],[255,102,255],[255,102,255],[255,104,255],[255,106,255],[255,109,255],[255,111,255],[255,113,255],[255,116,255],[255,118,255],[255,121,255],[255,123,255],[255,125,255],[255,128,255],[255,130,255],[255,133,255],[255,135,255],[255,137,255],[255,140,255],[255,142,255],[255,145,255],[255,147,255],[255,149,255],[255,152,255],[255,154,255],[255,156,255],[255,159,255],[255,161,255],[255,164,255],[255,166,255],[255,168,255],[255,171,255],[255,173,255],[255,176,255],[255,178,255],[255,180,255],[255,183,255],[255,185,255],[255,188,255],[255,190,255],[255,192,255],[255,195,255],[255,197,255],[255,200,255],[255,202,255],[255,204,255],[255,207,255],[255,209,255],[255,211,255],[255,214,255],[255,216,255],[255,219,255],[255,221,255],[255,223,255],[255,226,255],[255,228,255],[255,231,255],[255,233,255],[255,235,255],[255,238,255],[255,240,255],[255,243,255],[255,245,255],[255,247,255],[255,250,255],[255,255,255]]},{path:"/luts/matplotlib/",name:"magma.lut",rgb:[[0,0,3],[0,0,4],[0,0,6],[1,0,7],[1,1,9],[1,1,11],[2,2,13],[2,2,15],[3,3,17],[4,3,19],[4,4,21],[5,4,23],[6,5,25],[7,5,27],[8,6,29],[9,7,31],[10,7,34],[11,8,36],[12,9,38],[13,10,40],[14,10,42],[15,11,44],[16,12,47],[17,12,49],[18,13,51],[20,13,53],[21,14,56],[22,14,58],[23,15,60],[24,15,63],[26,16,65],[27,16,68],[28,16,70],[30,16,73],[31,17,75],[32,17,77],[34,17,80],[35,17,82],[37,17,85],[38,17,87],[40,17,89],[42,17,92],[43,17,94],[45,16,96],[47,16,98],[48,16,101],[50,16,103],[52,16,104],[53,15,106],[55,15,108],[57,15,110],[59,15,111],[60,15,113],[62,15,114],[64,15,115],[66,15,116],[67,15,117],[69,15,118],[71,15,119],[72,16,120],[74,16,121],[75,16,121],[77,17,122],[79,17,123],[80,18,123],[82,18,124],[83,19,124],[85,19,125],[87,20,125],[88,21,126],[90,21,126],[91,22,126],[93,23,126],[94,23,127],[96,24,127],[97,24,127],[99,25,127],[101,26,128],[102,26,128],[104,27,128],[105,28,128],[107,28,128],[108,29,128],[110,30,129],[111,30,129],[113,31,129],[115,31,129],[116,32,129],[118,33,129],[119,33,129],[121,34,129],[122,34,129],[124,35,129],[126,36,129],[127,36,129],[129,37,129],[130,37,129],[132,38,129],[133,38,129],[135,39,129],[137,40,129],[138,40,129],[140,41,128],[141,41,128],[143,42,128],[145,42,128],[146,43,128],[148,43,128],[149,44,128],[151,44,127],[153,45,127],[154,45,127],[156,46,127],[158,46,126],[159,47,126],[161,47,126],[163,48,126],[164,48,125],[166,49,125],[167,49,125],[169,50,124],[171,51,124],[172,51,123],[174,52,123],[176,52,123],[177,53,122],[179,53,122],[181,54,121],[182,54,121],[184,55,120],[185,55,120],[187,56,119],[189,57,119],[190,57,118],[192,58,117],[194,58,117],[195,59,116],[197,60,116],[198,60,115],[200,61,114],[202,62,114],[203,62,113],[205,63,112],[206,64,112],[208,65,111],[209,66,110],[211,66,109],[212,67,109],[214,68,108],[215,69,107],[217,70,106],[218,71,105],[220,72,105],[221,73,104],[222,74,103],[224,75,102],[225,76,102],[226,77,101],[228,78,100],[229,80,99],[230,81,98],[231,82,98],[232,84,97],[234,85,96],[235,86,96],[236,88,95],[237,89,95],[238,91,94],[238,93,93],[239,94,93],[240,96,93],[241,97,92],[242,99,92],[243,101,92],[243,103,91],[244,104,91],[245,106,91],[245,108,91],[246,110,91],[246,112,91],[247,113,91],[247,115,92],[248,117,92],[248,119,92],[249,121,92],[249,123,93],[249,125,93],[250,127,94],[250,128,94],[250,130,95],[251,132,96],[251,134,96],[251,136,97],[251,138,98],[252,140,99],[252,142,99],[252,144,100],[252,146,101],[252,147,102],[253,149,103],[253,151,104],[253,153,105],[253,155,106],[253,157,107],[253,159,108],[253,161,110],[253,162,111],[253,164,112],[254,166,113],[254,168,115],[254,170,116],[254,172,117],[254,174,118],[254,175,120],[254,177,121],[254,179,123],[254,181,124],[254,183,125],[254,185,127],[254,187,128],[254,188,130],[254,190,131],[254,192,133],[254,194,134],[254,196,136],[254,198,137],[254,199,139],[254,201,141],[254,203,142],[253,205,144],[253,207,146],[253,209,147],[253,210,149],[253,212,151],[253,214,152],[253,216,154],[253,218,156],[253,220,157],[253,221,159],[253,223,161],[253,225,163],[252,227,165],[252,229,166],[252,230,168],[252,232,170],[252,234,172],[252,236,174],[252,238,176],[252,240,177],[252,241,179],[252,243,181],[252,245,183],[251,247,185],[251,249,187],[251,250,189],[251,252,191]]},{path:"/luts/seaborn/",name:"mako.lut",rgb:[[11,3,5],[12,4,6],[13,4,7],[14,5,9],[15,6,10],[16,7,12],[17,7,13],[18,8,14],[19,9,16],[21,10,17],[22,11,19],[23,11,20],[24,12,22],[25,13,23],[26,14,25],[27,15,26],[28,15,28],[29,16,29],[30,17,31],[31,18,32],[32,18,34],[33,19,35],[34,20,37],[35,21,38],[36,21,40],[36,22,41],[37,23,43],[38,24,44],[39,24,46],[40,25,47],[41,26,49],[42,26,51],[43,27,52],[44,28,54],[44,29,55],[45,29,57],[46,30,59],[47,31,60],[48,32,62],[48,32,64],[49,33,65],[50,34,67],[51,35,69],[51,35,70],[52,36,72],[53,37,74],[53,38,76],[54,38,77],[54,39,79],[55,40,81],[56,41,82],[56,42,84],[57,42,86],[57,43,88],[58,44,89],[58,45,91],[59,46,93],[59,47,95],[60,47,96],[60,48,98],[61,49,100],[61,50,102],[61,51,103],[62,52,105],[62,52,107],[62,53,109],[63,54,111],[63,55,112],[63,56,114],[64,57,116],[64,58,118],[64,59,120],[64,59,121],[64,60,123],[64,61,125],[64,62,127],[65,63,128],[65,64,130],[65,65,132],[64,66,133],[64,67,135],[64,68,136],[64,69,138],[64,70,139],[64,71,141],[63,73,142],[63,74,143],[63,75,145],[62,76,146],[62,77,147],[62,78,148],[61,80,149],[61,81,150],[60,82,150],[60,83,151],[60,84,152],[59,86,153],[59,87,153],[58,88,154],[58,89,154],[58,90,155],[57,92,155],[57,93,156],[57,94,156],[56,95,156],[56,96,157],[56,98,157],[55,99,157],[55,100,158],[55,101,158],[55,102,158],[54,104,159],[54,105,159],[54,106,159],[54,107,159],[54,108,160],[54,109,160],[53,110,160],[53,112,160],[53,113,161],[53,114,161],[53,115,161],[53,116,161],[53,117,162],[53,118,162],[53,120,162],[53,121,162],[53,122,163],[52,123,163],[52,124,163],[52,125,163],[52,126,164],[52,127,164],[52,129,164],[52,130,164],[52,131,165],[52,132,165],[52,133,165],[52,134,165],[52,135,166],[52,136,166],[52,137,166],[52,139,167],[52,140,167],[52,141,167],[52,142,167],[52,143,168],[52,144,168],[52,145,168],[52,146,168],[52,148,169],[52,149,169],[52,150,169],[52,151,169],[52,152,169],[52,153,170],[52,154,170],[52,155,170],[52,157,170],[53,158,170],[53,159,171],[53,160,171],[53,161,171],[53,162,171],[54,163,171],[54,164,172],[54,165,172],[55,167,172],[55,168,172],[56,169,172],[56,170,172],[56,171,172],[57,172,172],[58,173,173],[58,174,173],[59,176,173],[59,177,173],[60,178,173],[61,179,173],[62,180,173],[62,181,173],[63,182,173],[64,183,173],[65,184,173],[66,186,173],[67,187,173],[68,188,173],[69,189,173],[70,190,173],[71,191,173],[72,192,173],[73,193,173],[74,194,173],[76,196,173],[77,197,173],[78,198,173],[80,199,173],[82,200,173],[83,201,173],[85,202,173],[87,203,173],[89,204,173],[91,205,173],[93,206,173],[96,207,173],[98,208,173],[101,209,173],[104,209,173],[106,210,173],[109,211,173],[112,212,173],[115,213,174],[118,213,174],[121,214,174],[124,215,175],[127,215,176],[130,216,176],[133,217,177],[136,218,178],[139,218,178],[142,219,179],[145,220,180],[148,220,181],[150,221,182],[153,222,183],[156,222,184],[159,223,185],[161,224,186],[164,224,187],[166,225,188],[169,226,189],[171,227,191],[174,227,192],[176,228,193],[178,229,195],[181,229,196],[183,230,198],[185,231,199],[188,232,201],[190,232,202],[192,233,204],[194,234,206],[196,235,207],[198,235,209],[200,236,211],[202,237,212],[205,238,214],[207,239,216],[209,239,217],[211,240,219],[213,241,221],[215,242,222],[217,243,224],[219,243,226],[221,244,228],[223,245,229]]},{path:"/luts/wcif/",name:"orange_hot.lut",rgb:[[0,0,0],[2,1,0],[5,3,0],[8,4,0],[11,6,0],[14,7,0],[17,9,0],[20,10,0],[23,12,0],[26,13,0],[29,15,0],[32,16,0],[35,18,0],[38,19,0],[41,21,0],[44,22,0],[47,24,0],[50,25,0],[53,27,0],[56,28,0],[59,30,0],[62,31,0],[65,33,0],[68,34,0],[71,36,0],[74,37,0],[77,39,0],[80,40,0],[83,42,0],[86,43,0],[89,45,0],[92,46,0],[95,48,0],[98,49,0],[101,51,0],[104,52,0],[107,54,0],[110,55,0],[113,57,0],[116,58,0],[119,60,0],[122,61,0],[125,63,0],[128,64,0],[131,66,0],[134,67,0],[137,69,0],[140,70,0],[143,72,0],[146,73,0],[149,75,0],[152,76,0],[155,78,0],[158,79,0],[161,81,0],[164,82,0],[167,84,0],[170,85,0],[173,87,0],[176,88,0],[179,90,0],[182,91,0],[185,93,0],[188,94,0],[191,96,0],[194,97,0],[197,99,0],[200,100,0],[203,102,0],[206,103,0],[209,105,0],[212,106,0],[215,108,0],[218,109,0],[221,111,0],[224,112,0],[227,114,0],[230,115,0],[233,117,0],[236,118,0],[239,120,0],[242,121,0],[245,123,0],[248,124,0],[255,128,0],[255,128,0],[255,129,0],[255,130,0],[255,132,0],[255,133,0],[255,135,0],[255,136,0],[255,138,0],[255,139,0],[255,141,0],[255,142,0],[255,144,0],[255,145,0],[255,147,0],[255,148,0],[255,150,0],[255,151,0],[255,153,0],[255,154,0],[255,156,0],[255,157,0],[255,159,0],[255,160,0],[255,162,0],[255,163,0],[255,165,0],[255,166,0],[255,168,0],[255,169,0],[255,171,0],[255,172,0],[255,174,0],[255,175,0],[255,177,0],[255,178,0],[255,180,0],[255,181,0],[255,183,0],[255,184,0],[255,186,0],[255,187,0],[255,189,0],[255,190,0],[255,191,0],[255,193,0],[255,194,0],[255,196,0],[255,197,0],[255,199,0],[255,200,0],[255,202,0],[255,203,0],[255,205,0],[255,206,0],[255,208,0],[255,209,0],[255,211,0],[255,212,0],[255,214,0],[255,215,0],[255,217,0],[255,218,0],[255,220,0],[255,221,0],[255,223,0],[255,224,0],[255,226,0],[255,227,0],[255,229,0],[255,230,0],[255,232,0],[255,233,0],[255,235,0],[255,236,0],[255,238,0],[255,239,0],[255,241,0],[255,242,0],[255,244,0],[255,245,0],[255,247,0],[255,248,0],[255,250,0],[255,251,0],[255,255,0],[255,255,0],[255,255,2],[255,255,5],[255,255,8],[255,255,11],[255,255,14],[255,255,17],[255,255,20],[255,255,23],[255,255,26],[255,255,29],[255,255,32],[255,255,35],[255,255,38],[255,255,41],[255,255,44],[255,255,47],[255,255,50],[255,255,53],[255,255,56],[255,255,59],[255,255,62],[255,255,65],[255,255,68],[255,255,71],[255,255,74],[255,255,77],[255,255,80],[255,255,83],[255,255,86],[255,255,89],[255,255,92],[255,255,95],[255,255,98],[255,255,101],[255,255,104],[255,255,107],[255,255,110],[255,255,113],[255,255,116],[255,255,119],[255,255,122],[255,255,125],[255,255,128],[255,255,131],[255,255,134],[255,255,137],[255,255,140],[255,255,143],[255,255,146],[255,255,149],[255,255,152],[255,255,155],[255,255,158],[255,255,161],[255,255,164],[255,255,167],[255,255,170],[255,255,173],[255,255,176],[255,255,179],[255,255,182],[255,255,185],[255,255,188],[255,255,191],[255,255,194],[255,255,197],[255,255,200],[255,255,203],[255,255,206],[255,255,209],[255,255,212],[255,255,215],[255,255,218],[255,255,221],[255,255,224],[255,255,227],[255,255,230],[255,255,233],[255,255,236],[255,255,239],[255,255,242],[255,255,245],[255,255,248],[255,255,251],[255,255,255]]},{path:"/luts/ncsa_paledit/",name:"phase.lut",rgb:[[0,0,252],[0,0,252],[0,0,252],[4,4,252],[4,4,252],[4,4,252],[8,8,252],[8,8,252],[12,12,252],[12,12,252],[12,12,248],[16,16,248],[16,16,248],[20,20,248],[20,20,248],[20,20,248],[24,24,248],[24,24,248],[28,28,248],[28,28,248],[28,28,244],[32,32,244],[32,32,244],[36,36,244],[36,36,244],[36,36,244],[40,40,244],[40,40,244],[44,44,244],[44,44,244],[44,44,240],[48,48,240],[48,48,240],[52,52,240],[52,52,240],[52,52,240],[56,56,240],[56,56,240],[60,60,240],[60,60,236],[60,60,236],[64,64,236],[64,64,236],[68,68,236],[68,68,236],[68,68,236],[72,72,236],[72,72,236],[76,76,236],[76,76,232],[76,76,232],[80,80,232],[80,80,232],[84,84,232],[84,84,232],[84,84,232],[88,88,232],[88,88,232],[92,92,232],[92,92,228],[92,92,228],[96,96,228],[96,96,228],[96,96,228],[100,100,228],[100,100,228],[104,104,228],[104,104,228],[104,104,224],[108,108,224],[108,108,224],[112,112,224],[112,112,224],[112,112,224],[116,116,224],[116,116,224],[120,120,224],[120,120,224],[120,120,220],[124,124,220],[124,124,220],[128,128,220],[128,128,220],[128,128,220],[132,132,220],[132,132,220],[136,136,220],[136,136,220],[136,136,216],[140,140,216],[140,140,216],[144,144,216],[144,144,216],[144,144,216],[148,148,216],[148,148,216],[152,152,216],[152,152,212],[152,152,212],[156,156,212],[156,156,212],[160,160,212],[160,160,212],[160,160,212],[164,164,212],[164,164,212],[168,168,212],[168,168,208],[168,168,208],[172,172,208],[172,172,208],[176,176,208],[176,176,208],[176,176,208],[180,180,208],[180,180,208],[184,184,208],[184,184,204],[184,184,204],[188,188,204],[188,188,204],[192,192,204],[192,192,204],[192,192,204],[196,196,204],[196,196,204],[200,200,200],[200,200,200],[200,200,200],[200,196,196],[200,196,196],[200,196,196],[200,192,192],[200,192,192],[200,188,188],[200,188,188],[204,188,188],[204,184,184],[204,184,184],[204,180,180],[204,180,180],[204,180,180],[204,176,176],[204,176,176],[204,172,172],[204,172,172],[208,172,172],[208,168,168],[208,168,168],[208,168,168],[208,164,164],[208,164,164],[208,160,160],[208,160,160],[208,160,160],[208,156,156],[212,156,156],[212,152,152],[212,152,152],[212,152,152],[212,148,148],[212,148,148],[212,144,144],[212,144,144],[212,144,144],[212,140,140],[216,140,140],[216,136,136],[216,136,136],[216,136,136],[216,132,132],[216,132,132],[216,132,132],[216,128,128],[216,128,128],[216,124,124],[220,124,124],[220,124,124],[220,120,120],[220,120,120],[220,116,116],[220,116,116],[220,116,116],[220,112,112],[220,112,112],[220,108,108],[224,108,108],[224,108,108],[224,104,104],[224,104,104],[224,100,100],[224,100,100],[224,100,100],[224,96,96],[224,96,96],[228,96,96],[228,92,92],[228,92,92],[228,88,88],[228,88,88],[228,88,88],[228,84,84],[228,84,84],[228,80,80],[228,80,80],[232,80,80],[232,76,76],[232,76,76],[232,72,72],[232,72,72],[232,72,72],[232,68,68],[232,68,68],[232,68,68],[232,64,64],[236,64,64],[236,60,60],[236,60,60],[236,60,60],[236,56,56],[236,56,56],[236,52,52],[236,52,52],[236,52,52],[236,48,48],[240,48,48],[240,44,44],[240,44,44],[240,44,44],[240,40,40],[240,40,40],[240,36,36],[240,36,36],[240,36,36],[240,32,32],[244,32,32],[244,32,32],[244,28,28],[244,28,28],[244,24,24],[244,24,24],[244,24,24],[244,20,20],[244,20,20],[244,16,16],[248,16,16],[248,16,16],[248,12,12],[248,12,12],[248,8,8],[248,8,8],[248,8,8],[248,4,4],[248,4,4],[252,0,0],[252,0,0]]},{path:"/luts/",name:"physics.lut",rgb:[[47,2,119],[46,2,120],[45,2,122],[44,2,123],[42,2,124],[41,2,125],[40,2,126],[39,2,127],[37,2,128],[36,1,129],[35,1,131],[33,1,132],[32,1,133],[30,1,134],[29,1,135],[27,1,136],[26,1,137],[24,1,138],[23,1,139],[21,1,141],[19,1,142],[18,1,143],[16,1,144],[14,1,145],[12,1,146],[10,1,147],[9,0,148],[7,0,149],[5,0,151],[3,0,152],[1,0,153],[0,1,154],[0,3,155],[0,5,156],[0,7,157],[0,9,158],[0,11,160],[0,13,161],[0,15,162],[0,18,163],[1,20,164],[2,23,165],[3,26,166],[3,28,167],[4,31,168],[5,33,169],[6,36,169],[7,39,170],[8,41,171],[8,44,172],[9,47,173],[10,49,174],[11,52,175],[12,55,176],[13,58,177],[14,60,178],[15,63,179],[16,66,180],[16,69,181],[17,71,182],[18,74,183],[19,77,184],[20,80,185],[21,82,186],[22,85,187],[23,88,188],[24,91,189],[25,94,190],[26,96,191],[26,99,191],[26,102,191],[26,105,191],[26,108,192],[26,111,192],[26,114,192],[26,116,192],[26,119,192],[26,122,193],[26,125,193],[26,128,193],[26,131,193],[26,134,193],[26,137,194],[26,140,194],[26,143,194],[26,146,194],[26,149,194],[26,152,195],[26,155,195],[25,158,195],[25,161,195],[25,164,195],[25,167,196],[25,170,196],[25,173,196],[25,176,196],[25,179,196],[25,182,197],[25,185,197],[25,188,197],[25,191,197],[25,194,197],[25,198,198],[25,198,195],[25,198,192],[25,198,190],[25,198,187],[25,199,184],[25,199,181],[25,199,178],[25,199,176],[25,199,173],[25,200,170],[24,200,167],[24,200,165],[24,200,162],[24,200,159],[24,201,156],[24,201,153],[24,201,150],[24,201,148],[24,202,143],[24,202,138],[24,202,133],[24,203,129],[24,203,124],[24,203,119],[24,204,114],[24,204,109],[24,204,104],[23,205,99],[23,205,94],[23,205,89],[23,206,84],[23,206,79],[23,206,74],[23,207,69],[23,207,64],[23,207,59],[23,208,54],[23,208,49],[23,208,44],[23,209,39],[22,209,33],[22,209,28],[22,210,23],[27,210,22],[32,210,22],[37,211,22],[42,211,22],[48,211,22],[53,212,22],[58,212,22],[63,212,22],[69,213,22],[74,213,21],[79,213,21],[85,214,21],[90,214,21],[96,214,21],[101,215,21],[107,215,21],[112,215,21],[118,216,21],[123,216,21],[129,216,21],[134,217,21],[140,217,20],[145,217,20],[148,217,20],[151,217,20],[153,218,20],[156,218,20],[159,218,20],[161,218,20],[164,218,20],[166,218,20],[169,219,20],[172,219,20],[174,219,20],[177,219,20],[180,219,20],[182,219,20],[185,219,20],[188,220,20],[190,220,20],[193,220,20],[196,220,20],[198,220,19],[201,220,19],[204,221,19],[206,221,19],[210,221,19],[213,221,19],[216,221,19],[220,221,19],[222,220,19],[222,217,19],[222,214,19],[222,212,19],[222,209,19],[223,206,19],[223,203,19],[223,200,19],[223,197,19],[223,194,19],[223,191,19],[224,188,19],[224,185,18],[224,182,18],[224,178,18],[224,175,18],[225,172,18],[225,169,18],[225,166,18],[225,163,18],[225,160,18],[225,157,18],[226,154,18],[226,151,18],[226,148,18],[226,145,18],[226,141,18],[227,138,18],[227,135,18],[227,132,18],[227,129,17],[227,126,17],[228,122,17],[228,119,17],[228,116,17],[228,113,17],[228,110,17],[228,106,17],[229,103,17],[229,100,17],[229,97,17],[229,94,17],[229,90,17],[230,87,17],[230,84,17],[230,80,17],[230,77,17],[230,74,17],[230,71,16],[231,67,16],[231,64,16],[231,61,16],[231,57,16],[231,54,16],[232,51,16],[232,47,16],[232,44,16],[232,41,16],[232,37,16],[233,34,16]]},{path:"/luts/matplotlib/",name:"plasma.lut",rgb:[[12,7,134],[16,7,135],[19,6,137],[21,6,138],[24,6,139],[27,6,140],[29,6,141],[31,5,142],[33,5,143],[35,5,144],[37,5,145],[39,5,146],[41,5,147],[43,5,148],[45,4,148],[47,4,149],[49,4,150],[51,4,151],[52,4,152],[54,4,152],[56,4,153],[58,4,154],[59,3,154],[61,3,155],[63,3,156],[64,3,156],[66,3,157],[68,3,158],[69,3,158],[71,2,159],[73,2,159],[74,2,160],[76,2,161],[78,2,161],[79,2,162],[81,1,162],[82,1,163],[84,1,163],[86,1,163],[87,1,164],[89,1,164],[90,0,165],[92,0,165],[94,0,165],[95,0,166],[97,0,166],[98,0,166],[100,0,167],[101,0,167],[103,0,167],[104,0,167],[106,0,167],[108,0,168],[109,0,168],[111,0,168],[112,0,168],[114,0,168],[115,0,168],[117,0,168],[118,1,168],[120,1,168],[121,1,168],[123,2,168],[124,2,167],[126,3,167],[127,3,167],[129,4,167],[130,4,167],[132,5,166],[133,6,166],[134,7,166],[136,7,165],[137,8,165],[139,9,164],[140,10,164],[142,12,164],[143,13,163],[144,14,163],[146,15,162],[147,16,161],[149,17,161],[150,18,160],[151,19,160],[153,20,159],[154,21,158],[155,23,158],[157,24,157],[158,25,156],[159,26,155],[160,27,155],[162,28,154],[163,29,153],[164,30,152],[165,31,151],[167,33,151],[168,34,150],[169,35,149],[170,36,148],[172,37,147],[173,38,146],[174,39,145],[175,40,144],[176,42,143],[177,43,143],[178,44,142],[180,45,141],[181,46,140],[182,47,139],[183,48,138],[184,50,137],[185,51,136],[186,52,135],[187,53,134],[188,54,133],[189,55,132],[190,56,131],[191,57,130],[192,59,129],[193,60,128],[194,61,128],[195,62,127],[196,63,126],[197,64,125],[198,65,124],[199,66,123],[200,68,122],[201,69,121],[202,70,120],[203,71,119],[204,72,118],[205,73,117],[206,74,117],[207,75,116],[208,77,115],[209,78,114],[209,79,113],[210,80,112],[211,81,111],[212,82,110],[213,83,109],[214,85,109],[215,86,108],[215,87,107],[216,88,106],[217,89,105],[218,90,104],[219,91,103],[220,93,102],[220,94,102],[221,95,101],[222,96,100],[223,97,99],[223,98,98],[224,100,97],[225,101,96],[226,102,96],[227,103,95],[227,104,94],[228,106,93],[229,107,92],[229,108,91],[230,109,90],[231,110,90],[232,112,89],[232,113,88],[233,114,87],[234,115,86],[234,116,85],[235,118,84],[236,119,84],[236,120,83],[237,121,82],[237,123,81],[238,124,80],[239,125,79],[239,126,78],[240,128,77],[240,129,77],[241,130,76],[242,132,75],[242,133,74],[243,134,73],[243,135,72],[244,137,71],[244,138,71],[245,139,70],[245,141,69],[246,142,68],[246,143,67],[246,145,66],[247,146,65],[247,147,65],[248,149,64],[248,150,63],[248,152,62],[249,153,61],[249,154,60],[250,156,59],[250,157,58],[250,159,58],[250,160,57],[251,162,56],[251,163,55],[251,164,54],[252,166,53],[252,167,53],[252,169,52],[252,170,51],[252,172,50],[252,173,49],[253,175,49],[253,176,48],[253,178,47],[253,179,46],[253,181,45],[253,182,45],[253,184,44],[253,185,43],[253,187,43],[253,188,42],[253,190,41],[253,192,41],[253,193,40],[253,195,40],[253,196,39],[253,198,38],[252,199,38],[252,201,38],[252,203,37],[252,204,37],[252,206,37],[251,208,36],[251,209,36],[251,211,36],[250,213,36],[250,214,36],[250,216,36],[249,217,36],[249,219,36],[248,221,36],[248,223,36],[247,224,36],[247,226,37],[246,228,37],[246,229,37],[245,231,38],[245,233,38],[244,234,38],[243,236,38],[243,238,38],[242,240,38],[242,241,38],[241,243,38],[240,245,37],[240,246,35],[239,248,33]]},{path:"/luts/janelia/",name:"pup_br.lut",rgb:[[213,0,246],[213,0,246],[213,0,246],[213,0,246],[213,0,246],[213,0,246],[213,0,246],[213,0,246],[227,0,232],[227,0,232],[227,0,232],[227,0,232],[227,0,232],[227,0,232],[227,0,232],[227,0,232],[233,0,208],[233,0,208],[233,0,208],[233,0,208],[233,0,208],[233,0,208],[233,0,208],[233,0,208],[238,0,183],[238,0,183],[238,0,183],[238,0,183],[238,0,183],[238,0,183],[238,0,183],[238,0,183],[241,0,162],[241,0,162],[241,0,162],[241,0,162],[241,0,162],[241,0,162],[241,0,162],[241,0,162],[243,0,141],[243,0,141],[243,0,141],[243,0,141],[243,0,141],[243,0,141],[243,0,141],[243,0,141],[246,0,119],[246,0,119],[246,0,119],[246,0,119],[246,0,119],[246,0,119],[246,0,119],[246,0,119],[247,0,96],[247,0,96],[247,0,96],[247,0,96],[247,0,96],[247,0,96],[247,0,96],[247,0,96],[249,0,74],[249,0,74],[249,0,74],[249,0,74],[249,0,74],[249,0,74],[249,0,74],[249,0,74],[250,0,50],[250,0,50],[250,0,50],[250,0,50],[250,0,50],[250,0,50],[250,0,50],[250,0,50],[250,0,20],[250,0,20],[250,0,20],[250,0,20],[250,0,20],[250,0,20],[250,0,20],[250,0,20],[237,48,0],[237,48,0],[237,48,0],[237,48,0],[237,48,0],[237,48,0],[237,48,0],[237,48,0],[221,73,0],[221,73,0],[221,73,0],[221,73,0],[221,73,0],[221,73,0],[221,73,0],[221,73,0],[207,87,0],[207,87,0],[207,87,0],[207,87,0],[207,87,0],[207,87,0],[207,87,0],[207,87,0],[192,99,0],[192,99,0],[192,99,0],[192,99,0],[192,99,0],[192,99,0],[192,99,0],[192,99,0],[172,111,0],[172,111,0],[172,111,0],[172,111,0],[172,111,0],[172,111,0],[172,111,0],[172,111,0],[156,119,0],[156,119,0],[156,119,0],[156,119,0],[156,119,0],[156,119,0],[156,119,0],[156,119,0],[135,127,0],[135,127,0],[135,127,0],[135,127,0],[135,127,0],[135,127,0],[135,127,0],[135,127,0],[113,133,0],[113,133,0],[113,133,0],[113,133,0],[113,133,0],[113,133,0],[113,133,0],[113,133,0],[90,138,0],[90,138,0],[90,138,0],[90,138,0],[90,138,0],[90,138,0],[90,138,0],[90,138,0],[56,142,0],[56,142,0],[56,142,0],[56,142,0],[56,142,0],[56,142,0],[56,142,0],[56,142,0],[0,150,5],[0,150,5],[0,150,5],[0,150,5],[0,150,5],[0,150,5],[0,150,5],[0,150,5],[0,149,50],[0,149,50],[0,149,50],[0,149,50],[0,149,50],[0,149,50],[0,149,50],[0,149,50],[0,149,73],[0,149,73],[0,149,73],[0,149,73],[0,149,73],[0,149,73],[0,149,73],[0,149,73],[0,148,94],[0,148,94],[0,148,94],[0,148,94],[0,148,94],[0,148,94],[0,148,94],[0,148,94],[0,147,114],[0,147,114],[0,147,114],[0,147,114],[0,147,114],[0,147,114],[0,147,114],[0,147,114],[0,145,139],[0,145,139],[0,145,139],[0,145,139],[0,145,139],[0,145,139],[0,145,139],[0,145,139],[0,144,153],[0,144,153],[0,144,153],[0,144,153],[0,144,153],[0,144,153],[0,144,153],[0,144,153],[0,141,172],[0,141,172],[0,141,172],[0,141,172],[0,141,172],[0,141,172],[0,141,172],[0,141,172],[0,137,191],[0,137,191],[0,137,191],[0,137,191],[0,137,191],[0,137,191],[0,137,191],[0,137,191],[0,134,205],[0,134,205],[0,134,205],[0,134,205],[0,134,205],[0,134,205],[0,134,205],[0,134,205],[0,124,239],[0,124,239],[0,124,239],[0,124,239],[0,124,239],[0,124,239],[0,124,239],[0,0,0]]},{path:"/luts/janelia/",name:"pup_nr.lut",rgb:[[255,72,0],[255,72,0],[255,72,0],[255,72,0],[255,72,0],[255,72,0],[255,72,0],[255,72,0],[255,72,0],[255,72,0],[255,72,0],[255,72,0],[244,87,0],[244,87,0],[244,87,0],[244,87,0],[244,87,0],[244,87,0],[244,87,0],[244,87,0],[244,87,0],[244,87,0],[244,87,0],[244,87,0],[234,97,0],[234,97,0],[234,97,0],[234,97,0],[234,97,0],[234,97,0],[234,97,0],[234,97,0],[234,97,0],[234,97,0],[234,97,0],[234,97,0],[223,106,0],[223,106,0],[223,106,0],[223,106,0],[223,106,0],[223,106,0],[223,106,0],[223,106,0],[223,106,0],[223,106,0],[223,106,0],[223,106,0],[211,115,0],[211,115,0],[211,115,0],[211,115,0],[211,115,0],[211,115,0],[211,115,0],[211,115,0],[211,115,0],[211,115,0],[211,115,0],[211,115,0],[199,122,0],[199,122,0],[199,122,0],[199,122,0],[199,122,0],[199,122,0],[199,122,0],[199,122,0],[199,122,0],[199,122,0],[199,122,0],[199,122,0],[187,129,0],[187,129,0],[187,129,0],[187,129,0],[187,129,0],[187,129,0],[187,129,0],[187,129,0],[187,129,0],[187,129,0],[187,129,0],[187,129,0],[174,134,0],[174,134,0],[174,134,0],[174,134,0],[174,134,0],[174,134,0],[174,134,0],[174,134,0],[174,134,0],[174,134,0],[174,134,0],[174,134,0],[161,140,0],[161,140,0],[161,140,0],[161,140,0],[161,140,0],[161,140,0],[161,140,0],[161,140,0],[161,140,0],[161,140,0],[161,140,0],[161,140,0],[148,144,0],[148,144,0],[148,144,0],[148,144,0],[148,144,0],[148,144,0],[148,144,0],[148,144,0],[148,144,0],[148,144,0],[148,144,0],[148,144,0],[130,149,0],[130,149,0],[130,149,0],[130,149,0],[130,149,0],[130,149,0],[130,149,0],[130,149,0],[130,149,0],[130,149,0],[130,149,0],[130,149,0],[112,153,0],[112,153,0],[112,153,0],[112,153,0],[112,153,0],[112,153,0],[112,153,0],[112,153,0],[112,153,0],[112,153,0],[112,153,0],[112,153,0],[93,156,0],[93,156,0],[93,156,0],[93,156,0],[93,156,0],[93,156,0],[93,156,0],[93,156,0],[93,156,0],[93,156,0],[93,156,0],[93,156,0],[69,159,0],[69,159,0],[69,159,0],[69,159,0],[69,159,0],[69,159,0],[69,159,0],[69,159,0],[69,159,0],[69,159,0],[69,159,0],[69,159,0],[0,167,20],[0,167,20],[0,167,20],[0,167,20],[0,167,20],[0,167,20],[0,167,20],[0,167,20],[0,167,20],[0,167,20],[0,167,20],[0,167,20],[0,167,52],[0,167,52],[0,167,52],[0,167,52],[0,167,52],[0,167,52],[0,167,52],[0,167,52],[0,167,52],[0,167,52],[0,167,52],[0,167,52],[0,166,71],[0,166,71],[0,166,71],[0,166,71],[0,166,71],[0,166,71],[0,166,71],[0,166,71],[0,166,71],[0,166,71],[0,166,71],[0,166,71],[0,165,88],[0,165,88],[0,165,88],[0,165,88],[0,165,88],[0,165,88],[0,165,88],[0,165,88],[0,165,88],[0,165,88],[0,165,88],[0,165,88],[0,165,104],[0,165,104],[0,165,104],[0,165,104],[0,165,104],[0,165,104],[0,165,104],[0,165,104],[0,165,104],[0,165,104],[0,165,104],[0,165,104],[0,164,119],[0,164,119],[0,164,119],[0,164,119],[0,164,119],[0,164,119],[0,164,119],[0,164,119],[0,164,119],[0,164,119],[0,164,119],[0,164,119],[0,163,130],[0,163,130],[0,163,130],[0,163,130],[0,163,130],[0,163,130],[0,163,130],[0,163,130],[0,163,130],[0,163,130],[0,163,130],[0,163,130],[0,163,130],[0,163,130],[0,163,130],[0,0,0]]},{path:"/luts/wcif/",name:"rainbow_rgb.lut",rgb:[[0,0,0],[0,0,5],[0,0,10],[0,1,15],[0,1,20],[0,1,25],[1,1,30],[1,1,35],[1,2,40],[1,2,45],[1,2,50],[1,2,55],[1,2,60],[1,3,65],[1,3,70],[2,3,75],[2,3,80],[2,3,85],[2,4,90],[2,4,95],[2,4,100],[2,4,105],[2,4,110],[2,5,115],[2,5,120],[3,5,125],[3,5,129],[3,5,134],[3,6,139],[3,6,144],[3,6,149],[3,6,154],[3,6,159],[3,7,164],[3,7,169],[4,7,174],[4,7,179],[4,7,184],[4,8,189],[4,8,194],[4,8,199],[4,8,204],[4,8,209],[4,9,214],[4,9,219],[4,9,224],[5,9,229],[5,9,234],[5,10,239],[5,10,244],[5,10,249],[5,15,244],[5,20,239],[5,24,235],[5,29,230],[5,34,225],[6,39,220],[6,44,215],[6,48,211],[6,53,206],[6,58,201],[6,63,196],[6,68,191],[6,72,187],[6,77,182],[6,82,177],[7,87,172],[7,92,167],[7,96,163],[7,101,158],[7,106,153],[7,111,148],[7,116,143],[7,120,139],[7,125,134],[7,129,129],[8,134,125],[8,139,120],[8,143,116],[8,148,111],[8,153,106],[8,158,101],[8,163,96],[8,167,92],[8,172,87],[8,177,82],[9,182,77],[9,187,72],[9,191,68],[9,196,63],[9,201,58],[9,206,53],[9,211,48],[9,215,44],[9,220,39],[9,225,34],[10,230,29],[10,235,24],[10,239,20],[10,244,15],[10,249,10],[12,247,10],[15,244,10],[17,242,10],[20,239,10],[22,237,10],[24,235,10],[27,232,10],[29,230,10],[32,227,10],[34,225,10],[36,223,10],[39,220,10],[41,218,10],[44,215,10],[46,213,10],[48,211,10],[51,208,10],[53,206,10],[56,203,10],[58,201,10],[60,199,10],[63,196,10],[65,194,10],[68,191,10],[70,189,10],[72,187,10],[75,184,10],[77,182,10],[77,182,10],[80,179,10],[82,177,10],[84,175,10],[87,172,10],[89,170,10],[92,167,10],[94,165,10],[96,163,10],[99,160,10],[101,158,10],[104,155,10],[106,153,10],[108,151,10],[111,148,10],[113,146,10],[116,143,10],[118,141,10],[120,139,10],[123,136,10],[125,134,10],[128,131,10],[129,129,10],[131,128,10],[134,125,10],[136,123,10],[139,120,10],[141,118,10],[143,116,10],[146,113,10],[148,111,10],[151,108,10],[153,106,10],[155,104,10],[158,101,10],[160,99,10],[163,96,10],[165,94,10],[167,92,10],[170,89,10],[172,87,10],[175,84,10],[177,82,10],[179,80,10],[182,77,10],[184,75,10],[187,72,10],[189,70,10],[191,68,10],[194,65,10],[196,63,10],[199,60,10],[201,58,10],[203,56,10],[206,53,10],[208,51,10],[211,48,10],[213,46,10],[215,44,10],[218,41,10],[220,39,10],[223,36,10],[225,34,10],[227,32,10],[230,29,10],[232,27,10],[235,24,10],[237,22,10],[239,20,10],[242,17,10],[244,15,10],[247,12,10],[249,10,10],[247,10,13],[245,10,15],[244,10,18],[242,10,20],[240,10,23],[238,10,25],[236,10,28],[234,10,30],[233,10,33],[231,10,35],[229,10,38],[227,10,41],[225,10,43],[224,10,46],[222,10,48],[220,10,51],[218,10,53],[216,10,56],[214,10,58],[213,10,61],[211,10,63],[209,10,66],[207,10,69],[205,10,71],[204,10,74],[202,10,76],[200,10,79],[198,10,81],[196,10,84],[194,10,86],[193,16,89],[191,21,91],[189,27,94],[187,32,97],[185,38,99],[184,44,102],[182,49,104],[180,55,107],[178,60,109],[176,66,112],[174,72,114],[173,77,117],[171,83,119],[169,88,122],[167,94,125],[165,100,127],[164,105,129],[162,111,131],[160,116,134],[158,122,136],[156,128,139],[154,132,141],[153,138,144],[151,143,146]]},{path:"/luts/",name:"red-green.lut",rgb:[[0,0,0],[2,0,0],[4,0,0],[6,0,0],[8,0,0],[10,0,0],[12,0,0],[14,0,0],[16,0,0],[18,0,0],[20,0,0],[22,0,0],[24,0,0],[26,0,0],[28,0,0],[30,0,0],[32,0,0],[34,0,0],[36,0,0],[38,0,0],[40,0,0],[42,0,0],[44,0,0],[46,0,0],[48,0,0],[50,0,0],[52,0,0],[54,0,0],[56,0,0],[58,0,0],[60,0,0],[62,0,0],[64,0,0],[66,0,0],[68,0,0],[70,0,0],[72,0,0],[74,0,0],[76,0,0],[78,0,0],[80,0,0],[82,0,0],[84,0,0],[86,0,0],[88,0,0],[90,0,0],[92,0,0],[94,0,0],[96,0,0],[98,0,0],[100,0,0],[102,0,0],[104,0,0],[106,0,0],[108,0,0],[110,0,0],[112,0,0],[114,0,0],[116,0,0],[118,0,0],[120,0,0],[122,0,0],[124,0,0],[126,0,0],[128,0,0],[130,0,0],[132,0,0],[134,0,0],[136,0,0],[138,0,0],[140,0,0],[142,0,0],[144,0,0],[146,0,0],[148,0,0],[150,0,0],[152,0,0],[154,0,0],[156,0,0],[158,0,0],[160,0,0],[162,0,0],[164,0,0],[166,0,0],[168,0,0],[170,0,0],[172,0,0],[174,0,0],[176,0,0],[178,0,0],[180,0,0],[182,0,0],[184,0,0],[186,0,0],[188,0,0],[190,0,0],[192,0,0],[194,0,0],[196,0,0],[198,0,0],[200,0,0],[202,0,0],[204,0,0],[206,0,0],[208,0,0],[210,0,0],[212,0,0],[214,0,0],[216,0,0],[218,0,0],[220,0,0],[222,0,0],[224,0,0],[226,0,0],[228,0,0],[230,0,0],[232,0,0],[234,0,0],[236,0,0],[238,0,0],[240,0,0],[242,0,0],[244,0,0],[246,0,0],[248,0,0],[250,0,0],[252,0,0],[254,0,0],[0,0,0],[0,2,0],[0,4,0],[0,6,0],[0,8,0],[0,10,0],[0,12,0],[0,14,0],[0,16,0],[0,18,0],[0,20,0],[0,22,0],[0,24,0],[0,26,0],[0,28,0],[0,30,0],[0,32,0],[0,34,0],[0,36,0],[0,38,0],[0,40,0],[0,42,0],[0,44,0],[0,46,0],[0,48,0],[0,50,0],[0,52,0],[0,54,0],[0,56,0],[0,58,0],[0,60,0],[0,62,0],[0,64,0],[0,66,0],[0,68,0],[0,70,0],[0,72,0],[0,74,0],[0,76,0],[0,78,0],[0,80,0],[0,82,0],[0,84,0],[0,86,0],[0,88,0],[0,90,0],[0,92,0],[0,94,0],[0,96,0],[0,98,0],[0,100,0],[0,102,0],[0,104,0],[0,106,0],[0,108,0],[0,110,0],[0,112,0],[0,114,0],[0,116,0],[0,118,0],[0,120,0],[0,122,0],[0,124,0],[0,126,0],[0,128,0],[0,130,0],[0,132,0],[0,134,0],[0,136,0],[0,138,0],[0,140,0],[0,142,0],[0,144,0],[0,146,0],[0,148,0],[0,150,0],[0,152,0],[0,154,0],[0,156,0],[0,158,0],[0,160,0],[0,162,0],[0,164,0],[0,166,0],[0,168,0],[0,170,0],[0,172,0],[0,174,0],[0,176,0],[0,178,0],[0,180,0],[0,182,0],[0,184,0],[0,186,0],[0,188,0],[0,190,0],[0,192,0],[0,194,0],[0,196,0],[0,198,0],[0,200,0],[0,202,0],[0,204,0],[0,206,0],[0,208,0],[0,210,0],[0,212,0],[0,214,0],[0,216,0],[0,218,0],[0,220,0],[0,222,0],[0,224,0],[0,226,0],[0,228,0],[0,230,0],[0,232,0],[0,234,0],[0,236,0],[0,238,0],[0,240,0],[0,242,0],[0,244,0],[0,246,0],[0,248,0],[0,250,0],[0,252,0],[0,254,0]]},{path:"/luts/wcif/",name:"red_hot.lut",rgb:[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[4,0,0],[7,0,0],[10,0,0],[13,0,0],[16,0,0],[20,0,0],[23,0,0],[27,0,0],[30,0,0],[33,0,0],[36,0,0],[39,0,0],[42,0,0],[45,0,0],[48,0,0],[52,0,0],[55,0,0],[58,0,0],[61,0,0],[65,0,0],[68,0,0],[71,0,0],[74,0,0],[78,0,0],[81,0,0],[84,0,0],[87,0,0],[90,0,0],[93,0,0],[96,0,0],[99,0,0],[103,0,0],[106,0,0],[110,0,0],[113,0,0],[117,0,0],[120,0,0],[123,0,0],[126,0,0],[130,0,0],[133,0,0],[136,0,0],[139,0,0],[142,0,0],[145,0,0],[148,0,0],[151,0,0],[155,0,0],[158,0,0],[161,0,0],[164,0,0],[168,0,0],[171,0,0],[174,0,0],[177,0,0],[181,0,0],[184,0,0],[187,0,0],[190,0,0],[193,0,0],[196,0,0],[200,0,0],[203,0,0],[207,0,0],[210,0,0],[213,0,0],[216,0,0],[220,0,0],[223,0,0],[226,0,0],[229,0,0],[233,0,0],[236,0,0],[239,0,0],[242,0,0],[245,0,0],[247,0,0],[250,1,0],[252,2,0],[255,3,0],[255,6,0],[255,9,0],[255,12,0],[255,16,0],[255,19,0],[255,22,0],[255,25,0],[255,29,0],[255,32,0],[255,35,0],[255,38,0],[255,42,0],[255,45,0],[255,48,0],[255,51,0],[255,55,0],[255,58,0],[255,61,0],[255,64,0],[255,68,0],[255,71,0],[255,74,0],[255,77,0],[255,81,0],[255,84,0],[255,87,0],[255,90,0],[255,94,0],[255,97,0],[255,100,0],[255,103,0],[255,106,0],[255,109,0],[255,112,0],[255,115,0],[255,119,0],[255,122,0],[255,126,0],[255,129,0],[255,133,0],[255,136,0],[255,139,0],[255,142,0],[255,145,0],[255,148,0],[255,151,0],[255,154,0],[255,158,0],[255,161,0],[255,164,0],[255,167,0],[255,171,0],[255,174,0],[255,177,0],[255,180,0],[255,184,0],[255,187,0],[255,190,0],[255,193,0],[255,197,0],[255,200,0],[255,203,0],[255,206,0],[255,209,0],[255,212,0],[255,216,0],[255,219,0],[255,223,0],[255,226,0],[255,229,0],[255,232,0],[255,236,0],[255,239,0],[255,242,0],[255,245,0],[255,249,0],[255,250,1],[255,252,3],[255,253,4],[255,255,6],[255,255,9],[255,255,12],[255,255,15],[255,255,19],[255,255,22],[255,255,25],[255,255,28],[255,255,32],[255,255,35],[255,255,38],[255,255,41],[255,255,45],[255,255,48],[255,255,51],[255,255,54],[255,255,58],[255,255,61],[255,255,64],[255,255,67],[255,255,71],[255,255,74],[255,255,77],[255,255,80],[255,255,84],[255,255,87],[255,255,90],[255,255,93],[255,255,97],[255,255,100],[255,255,103],[255,255,106],[255,255,110],[255,255,113],[255,255,116],[255,255,119],[255,255,122],[255,255,125],[255,255,128],[255,255,131],[255,255,135],[255,255,138],[255,255,142],[255,255,145],[255,255,149],[255,255,152],[255,255,155],[255,255,158],[255,255,161],[255,255,164],[255,255,167],[255,255,170],[255,255,174],[255,255,177],[255,255,180],[255,255,183],[255,255,187],[255,255,190],[255,255,193],[255,255,196],[255,255,200],[255,255,203],[255,255,206],[255,255,209],[255,255,213],[255,255,216],[255,255,219],[255,255,222],[255,255,225],[255,255,228],[255,255,232],[255,255,235],[255,255,239],[255,255,242],[255,255,245],[255,255,248],[255,255,252],[255,255,252],[255,255,253],[255,255,254],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255],[255,255,255]]},{path:"/luts/seaborn/",name:"rocket.lut",rgb:[[2,4,25],[3,5,26],[4,5,27],[5,6,28],[7,7,29],[8,7,30],[9,8,31],[11,9,32],[12,10,33],[14,10,34],[15,11,35],[17,12,36],[18,12,37],[20,13,38],[21,14,39],[23,14,40],[24,15,41],[25,16,42],[27,16,43],[28,17,44],[30,17,45],[31,18,46],[33,18,47],[34,19,48],[36,19,49],[37,20,50],[38,20,51],[40,21,52],[41,21,53],[43,22,55],[44,22,56],[46,23,57],[47,23,58],[49,23,59],[50,24,60],[52,24,61],[53,24,62],[55,25,63],[56,25,63],[58,25,64],[59,26,65],[61,26,66],[62,26,67],[64,27,68],[65,27,69],[67,27,70],[68,27,70],[70,28,71],[72,28,72],[73,28,73],[75,28,74],[76,29,74],[78,29,75],[79,29,76],[81,29,77],[83,29,77],[84,29,78],[86,30,79],[87,30,79],[89,30,80],[91,30,80],[92,30,81],[94,30,82],[95,30,82],[97,30,83],[99,30,83],[100,31,84],[102,31,84],[104,31,85],[105,31,85],[107,31,86],[108,31,86],[110,31,86],[112,31,87],[113,31,87],[115,31,88],[117,31,88],[118,31,88],[120,30,89],[122,30,89],[123,30,89],[125,30,89],[127,30,90],[129,30,90],[130,30,90],[132,30,90],[134,30,90],[135,29,91],[137,29,91],[139,29,91],[140,29,91],[142,29,91],[144,28,91],[146,28,91],[147,28,91],[149,27,91],[151,27,91],[153,27,91],[154,27,91],[156,26,91],[158,26,91],[159,26,91],[161,25,91],[163,25,91],[165,25,90],[166,24,90],[168,24,90],[170,24,90],[171,23,90],[173,23,89],[175,23,89],[177,23,89],[178,22,88],[180,22,88],[182,22,87],[183,22,87],[185,22,86],[186,22,86],[188,22,85],[190,22,85],[191,22,84],[193,22,84],[194,23,83],[196,23,82],[198,24,82],[199,24,81],[200,25,80],[202,26,80],[203,26,79],[205,27,78],[206,28,78],[208,29,77],[209,30,76],[210,32,75],[212,33,75],[213,34,74],[214,35,73],[215,37,72],[217,38,72],[218,40,71],[219,41,70],[220,43,70],[221,44,69],[222,46,68],[224,47,67],[225,49,67],[226,50,66],[227,52,65],[228,54,65],[229,55,64],[230,57,64],[230,59,63],[231,61,63],[232,62,62],[233,64,62],[234,66,62],[234,68,62],[235,70,62],[236,72,62],[236,74,62],[237,76,62],[237,78,62],[238,80,62],[238,82,62],[239,84,63],[239,86,63],[240,88,64],[240,90,65],[240,92,65],[241,94,66],[241,96,67],[241,98,68],[241,99,69],[242,101,70],[242,103,71],[242,105,72],[242,107,73],[243,109,74],[243,111,76],[243,113,77],[243,115,78],[244,116,79],[244,118,81],[244,120,82],[244,122,84],[244,124,85],[244,125,87],[244,127,88],[245,129,89],[245,131,91],[245,132,92],[245,134,94],[245,136,95],[245,138,97],[245,139,99],[245,141,100],[245,143,102],[246,145,103],[246,146,105],[246,148,107],[246,150,108],[246,151,110],[246,153,112],[246,155,113],[246,156,115],[246,158,117],[246,160,119],[246,161,120],[246,163,122],[246,165,124],[246,166,126],[246,168,128],[246,169,129],[246,171,131],[246,173,133],[246,174,135],[246,176,137],[247,178,139],[247,179,141],[247,181,143],[247,182,145],[247,184,147],[247,185,149],[247,187,151],[247,189,153],[247,190,155],[247,192,157],[247,193,160],[247,195,162],[247,196,164],[247,198,166],[247,199,168],[247,201,170],[247,202,173],[248,204,175],[248,205,177],[248,207,179],[248,208,182],[248,210,184],[248,211,186],[248,213,188],[248,214,190],[249,216,193],[249,217,195],[249,219,197],[249,220,199],[249,222,201],[249,223,204],[249,225,206],[250,226,208],[250,228,210],[250,229,212],[250,231,214],[250,232,217],[251,234,219],[251,235,221]]},{path:"/luts/ncsa_paledit/",name:"royal.lut",rgb:[[1,1,7],[1,1,7],[1,1,13],[1,1,18],[1,1,24],[1,1,30],[1,1,36],[1,1,42],[1,1,47],[1,1,53],[1,1,59],[1,1,64],[1,1,70],[1,1,75],[1,1,81],[1,1,85],[1,1,89],[1,1,93],[1,1,98],[1,1,104],[1,1,109],[1,1,115],[1,1,121],[1,1,126],[1,1,132],[1,1,137],[1,1,143],[1,1,149],[1,1,154],[1,1,160],[1,1,165],[1,1,169],[1,1,174],[1,7,177],[1,13,182],[1,18,188],[1,24,192],[1,30,198],[1,36,204],[1,42,209],[1,47,215],[1,53,220],[1,59,226],[1,64,232],[1,70,237],[1,75,243],[1,81,248],[1,85,254],[1,89,254],[1,93,254],[1,98,254],[1,104,254],[1,109,254],[1,115,254],[1,121,254],[1,126,254],[1,132,254],[1,137,254],[1,143,254],[1,149,254],[1,154,254],[1,160,254],[1,165,254],[1,169,254],[1,174,254],[1,177,254],[1,182,254],[1,188,254],[1,192,254],[1,198,254],[1,204,254],[1,209,254],[1,215,254],[1,220,254],[1,226,254],[1,232,254],[1,237,254],[1,243,254],[1,248,254],[1,254,254],[1,254,254],[1,254,254],[1,254,254],[1,254,254],[1,254,254],[1,254,254],[1,254,254],[1,254,254],[1,254,254],[1,254,254],[1,254,254],[1,254,254],[1,254,254],[1,254,254],[1,254,254],[1,254,254],[1,254,238],[10,254,222],[18,254,206],[27,254,191],[36,254,175],[45,254,159],[53,254,143],[62,254,127],[70,254,111],[79,254,95],[87,254,79],[96,254,64],[105,254,48],[114,254,32],[122,254,16],[128,254,1],[134,254,1],[139,252,1],[148,250,1],[156,248,1],[164,245,1],[172,243,1],[181,241,1],[189,239,1],[196,237,1],[204,235,1],[213,233,1],[221,231,1],[229,228,1],[237,226,1],[246,224,1],[254,222,1],[254,222,1],[254,219,1],[254,217,1],[254,214,1],[254,211,1],[254,209,1],[254,206,1],[254,203,1],[254,201,1],[254,198,1],[254,195,1],[254,193,1],[254,191,1],[254,188,1],[254,186,1],[254,184,1],[254,182,1],[254,180,1],[254,176,1],[254,173,1],[254,169,1],[254,166,1],[254,162,1],[254,159,1],[254,155,1],[254,152,1],[254,148,1],[254,145,1],[254,141,1],[254,138,1],[254,134,1],[254,129,1],[254,131,1],[254,127,1],[254,122,1],[254,118,1],[254,114,1],[254,110,1],[254,105,1],[254,101,1],[254,97,1],[254,93,1],[254,88,1],[254,84,1],[254,80,1],[254,76,1],[254,71,1],[254,66,1],[254,68,1],[254,64,1],[254,59,1],[254,55,1],[254,50,1],[254,46,1],[254,41,1],[254,37,1],[254,32,1],[254,28,1],[254,23,1],[254,19,1],[254,14,1],[254,10,1],[254,5,1],[254,1,1],[254,1,1],[252,14,14],[250,26,26],[248,39,39],[245,52,52],[243,64,64],[241,76,76],[239,89,89],[237,102,102],[235,115,115],[233,127,127],[231,140,140],[228,153,153],[226,166,166],[224,178,178],[222,183,183],[222,188,188],[222,192,192],[222,194,194],[222,196,196],[222,199,199],[222,201,201],[222,203,203],[222,205,205],[222,207,207],[222,209,209],[222,211,211],[222,213,213],[222,216,216],[222,218,218],[222,220,220],[222,222,222],[222,222,222],[224,224,224],[226,226,226],[228,228,228],[231,231,231],[233,233,233],[235,235,235],[237,237,237],[239,239,239],[241,241,241],[243,243,243],[245,245,245],[248,248,248],[250,250,250],[252,252,252],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254]]},{path:"/luts/ncsa_paledit/",name:"sepia.lut",rgb:[[0,0,0],[43,28,4],[57,35,5],[65,35,6],[66,36,7],[67,37,8],[68,38,9],[69,39,10],[70,40,11],[71,41,12],[72,42,13],[73,43,14],[74,44,15],[75,45,16],[76,46,17],[77,47,18],[78,48,19],[79,49,20],[80,50,21],[81,51,22],[82,52,23],[83,53,24],[83,53,24],[84,54,25],[85,55,26],[86,56,27],[87,57,28],[88,58,29],[89,59,30],[90,60,31],[91,61,32],[92,62,33],[93,63,34],[94,64,35],[95,65,36],[96,66,37],[97,67,38],[98,68,39],[99,69,40],[100,70,41],[101,71,42],[102,72,43],[103,73,44],[104,74,45],[105,75,46],[106,76,47],[107,77,48],[107,77,48],[108,78,49],[109,79,50],[110,80,51],[111,81,52],[112,82,53],[113,83,54],[114,84,55],[115,85,56],[116,86,57],[117,87,58],[118,88,59],[119,89,60],[120,90,61],[121,91,62],[122,92,63],[123,93,64],[124,94,65],[125,95,66],[125,95,66],[126,96,67],[127,97,68],[128,98,69],[129,99,70],[130,100,71],[131,101,72],[132,102,73],[133,103,74],[134,104,75],[135,105,76],[136,106,77],[137,107,78],[138,108,79],[139,109,80],[140,110,81],[141,111,82],[142,112,83],[143,113,84],[144,114,85],[145,115,86],[146,116,87],[147,117,88],[148,118,89],[149,119,90],[150,120,91],[151,121,92],[152,122,93],[153,123,94],[154,124,95],[155,125,96],[156,126,97],[157,127,98],[158,128,99],[159,129,100],[160,130,101],[161,131,102],[162,132,103],[163,133,104],[164,134,105],[165,135,106],[166,136,107],[167,137,108],[168,138,109],[169,139,110],[170,140,111],[171,141,112],[172,142,113],[173,143,114],[174,144,115],[175,145,116],[176,146,117],[177,147,118],[178,148,119],[179,149,120],[180,150,121],[181,151,122],[182,152,123],[183,153,124],[184,154,125],[185,155,126],[186,156,127],[187,157,128],[187,157,128],[188,158,129],[189,159,130],[190,160,131],[191,161,132],[192,162,133],[193,163,134],[194,164,135],[195,165,136],[196,166,137],[197,167,138],[198,168,139],[199,169,140],[200,170,141],[201,171,142],[202,172,143],[203,173,144],[204,174,145],[205,175,146],[206,176,147],[207,177,148],[208,178,149],[209,179,150],[210,180,151],[211,181,152],[212,182,153],[213,183,154],[214,184,155],[215,185,156],[216,186,157],[217,187,158],[218,188,159],[219,189,160],[220,190,161],[221,191,162],[222,192,163],[223,193,164],[224,194,165],[225,195,166],[226,196,167],[227,197,168],[228,198,169],[229,199,170],[230,200,171],[231,201,172],[232,202,173],[233,203,174],[234,204,175],[235,205,176],[236,206,177],[237,207,178],[238,208,179],[239,209,180],[240,210,181],[241,211,182],[242,212,183],[243,213,184],[244,214,185],[245,215,186],[246,216,187],[247,217,188],[248,218,189],[249,219,190],[250,220,191],[251,221,192],[252,222,193],[253,223,194],[254,224,195],[255,225,196],[255,225,196],[255,225,196],[255,225,196],[255,225,196],[255,225,197],[255,225,197],[255,225,197],[255,225,197],[255,226,198],[255,226,198],[255,226,198],[255,226,198],[255,226,198],[255,226,199],[255,226,199],[255,226,199],[255,226,199],[255,226,199],[255,227,200],[255,227,200],[255,227,200],[255,227,200],[255,227,200],[255,227,201],[255,227,201],[255,227,201],[255,227,201],[255,227,201],[255,228,202],[255,228,202],[255,228,202],[255,228,202],[255,228,202],[255,228,202],[255,228,203],[255,228,203],[255,228,203],[255,228,203],[255,228,203],[255,229,204],[255,229,204],[255,229,204],[255,229,204],[255,229,204],[255,229,204],[255,229,205],[255,229,205],[255,229,205],[255,229,205],[255,229,205],[255,230,205],[255,230,205],[255,231,205],[255,231,209],[255,233,214],[255,233,217],[255,242,233],[255,255,255]]},{path:"/luts/ncsa_paledit/",name:"smart.lut",rgb:[[2,2,2],[2,2,2],[2,2,2],[3,3,3],[4,4,4],[5,5,5],[5,5,5],[6,6,6],[7,7,7],[8,8,8],[8,8,8],[9,9,9],[10,10,10],[11,11,11],[11,11,11],[12,12,12],[13,13,13],[14,14,14],[14,14,14],[15,15,15],[16,16,16],[16,16,16],[17,17,17],[18,18,18],[19,19,19],[19,19,19],[20,20,20],[21,21,21],[22,22,22],[22,22,22],[23,23,23],[24,24,24],[25,25,25],[25,25,25],[26,26,26],[27,27,27],[27,27,27],[28,28,28],[29,29,29],[30,30,30],[30,30,30],[31,31,31],[32,32,32],[33,33,33],[33,33,33],[34,34,34],[35,35,35],[36,36,36],[36,36,36],[37,37,37],[38,38,38],[39,39,39],[39,39,39],[40,40,40],[41,41,41],[41,41,41],[42,42,42],[43,43,43],[44,44,44],[44,44,44],[45,45,45],[46,46,46],[47,47,47],[47,47,47],[48,48,48],[49,49,49],[50,50,50],[50,50,50],[51,51,51],[52,52,52],[52,52,52],[53,53,53],[54,54,54],[55,55,55],[55,55,55],[56,56,56],[57,57,57],[58,58,58],[58,58,58],[59,59,59],[60,60,60],[61,61,61],[61,61,61],[62,62,62],[63,63,63],[64,64,64],[64,64,64],[64,64,64],[65,65,65],[65,65,65],[66,66,66],[67,67,67],[68,68,68],[68,68,68],[69,69,69],[70,70,70],[71,71,71],[71,71,71],[72,72,72],[73,73,73],[74,74,74],[74,74,74],[75,75,75],[76,71,71],[77,68,66],[77,64,62],[78,62,58],[79,58,53],[80,55,48],[80,51,43],[81,47,40],[82,45,38],[83,43,36],[83,42,34],[84,40,32],[85,38,30],[86,36,28],[86,34,26],[87,32,24],[88,30,22],[89,29,21],[89,27,20],[90,26,19],[91,26,19],[92,25,18],[92,24,18],[93,24,17],[94,23,17],[95,23,17],[95,22,16],[96,22,16],[97,22,15],[98,21,14],[98,21,13],[99,20,13],[100,20,13],[101,20,12],[101,19,12],[102,19,11],[103,18,11],[102,18,11],[105,18,10],[106,17,9],[107,17,8],[109,17,7],[111,16,6],[112,16,6],[113,16,5],[114,16,4],[116,15,4],[117,15,4],[119,15,3],[122,16,3],[125,16,2],[128,16,2],[130,16,2],[133,16,1],[136,16,1],[139,16,1],[142,16,1],[145,17,1],[149,18,1],[152,20,1],[156,21,1],[159,23,1],[163,24,1],[166,26,1],[189,27,1],[173,29,1],[177,31,1],[179,31,1],[182,31,1],[185,32,1],[189,33,1],[191,34,1],[194,36,1],[196,37,1],[199,39,1],[201,41,1],[203,43,1],[205,47,1],[207,50,1],[209,53,1],[210,55,1],[212,57,1],[213,59,1],[215,62,1],[216,64,1],[218,67,1],[220,71,1],[221,74,2],[222,78,2],[224,83,2],[222,88,3],[226,92,3],[227,97,4],[228,100,4],[229,103,4],[229,107,5],[230,110,5],[231,113,6],[233,121,6],[234,130,6],[236,136,7],[238,144,7],[239,156,8],[240,162,8],[240,167,8],[241,173,9],[242,179,9],[242,185,10],[243,187,10],[245,190,11],[246,192,11],[247,195,12],[248,198,12],[248,201,13],[249,204,13],[249,207,14],[250,210,14],[250,213,15],[251,215,17],[252,216,18],[252,217,20],[253,218,22],[253,219,24],[254,220,28],[254,222,32],[254,222,36],[254,224,40],[254,225,43],[254,226,47],[254,227,50],[254,227,53],[254,228,56],[254,229,59],[254,229,66],[254,230,74],[254,230,82],[254,231,89],[254,231,101],[254,235,113],[254,238,125],[254,240,136],[254,242,148],[254,245,164],[254,245,179],[254,246,187],[254,247,198],[254,248,209],[254,249,225],[254,250,241],[254,251,245],[254,252,249],[254,253,252],[254,253,252]]},{path:"/luts/",name:"spectrum.lut",rgb:[[255,0,0],[255,6,0],[255,12,0],[255,18,0],[255,24,0],[255,30,0],[255,36,0],[255,42,0],[255,48,0],[255,54,0],[255,60,0],[255,66,0],[255,72,0],[255,78,0],[255,84,0],[255,90,0],[255,96,0],[255,102,0],[255,108,0],[255,114,0],[255,120,0],[255,126,0],[255,132,0],[255,138,0],[255,144,0],[255,150,0],[255,156,0],[255,162,0],[255,168,0],[255,174,0],[255,180,0],[255,186,0],[255,192,0],[255,198,0],[255,204,0],[255,210,0],[255,216,0],[255,222,0],[255,228,0],[255,234,0],[255,240,0],[255,246,0],[255,252,0],[252,255,0],[246,255,0],[240,255,0],[234,255,0],[228,255,0],[222,255,0],[216,255,0],[210,255,0],[204,255,0],[198,255,0],[192,255,0],[186,255,0],[180,255,0],[174,255,0],[168,255,0],[162,255,0],[156,255,0],[150,255,0],[144,255,0],[138,255,0],[132,255,0],[126,255,0],[120,255,0],[114,255,0],[108,255,0],[102,255,0],[96,255,0],[90,255,0],[84,255,0],[78,255,0],[72,255,0],[66,255,0],[60,255,0],[54,255,0],[48,255,0],[42,255,0],[36,255,0],[30,255,0],[24,255,0],[18,255,0],[12,255,0],[6,255,0],[0,255,0],[0,255,6],[0,255,12],[0,255,18],[0,255,24],[0,255,30],[0,255,36],[0,255,42],[0,255,48],[0,255,54],[0,255,60],[0,255,66],[0,255,72],[0,255,78],[0,255,84],[0,255,90],[0,255,96],[0,255,102],[0,255,108],[0,255,114],[0,255,120],[0,255,126],[0,255,132],[0,255,138],[0,255,144],[0,255,150],[0,255,156],[0,255,162],[0,255,168],[0,255,174],[0,255,180],[0,255,186],[0,255,192],[0,255,198],[0,255,204],[0,255,210],[0,255,216],[0,255,222],[0,255,228],[0,255,234],[0,255,240],[0,255,246],[0,255,252],[0,252,255],[0,246,255],[0,240,255],[0,234,255],[0,228,255],[0,222,255],[0,216,255],[0,210,255],[0,204,255],[0,198,255],[0,192,255],[0,186,255],[0,180,255],[0,174,255],[0,168,255],[0,162,255],[0,156,255],[0,150,255],[0,144,255],[0,138,255],[0,132,255],[0,126,255],[0,120,255],[0,114,255],[0,108,255],[0,102,255],[0,96,255],[0,90,255],[0,84,255],[0,78,255],[0,72,255],[0,66,255],[0,60,255],[0,54,255],[0,48,255],[0,42,255],[0,36,255],[0,30,255],[0,24,255],[0,18,255],[0,12,255],[0,6,255],[0,0,255],[6,0,255],[12,0,255],[18,0,255],[24,0,255],[30,0,255],[36,0,255],[42,0,255],[48,0,255],[54,0,255],[60,0,255],[66,0,255],[72,0,255],[78,0,255],[84,0,255],[90,0,255],[96,0,255],[102,0,255],[108,0,255],[114,0,255],[120,0,255],[126,0,255],[132,0,255],[138,0,255],[144,0,255],[150,0,255],[156,0,255],[162,0,255],[168,0,255],[174,0,255],[180,0,255],[186,0,255],[192,0,255],[198,0,255],[204,0,255],[210,0,255],[216,0,255],[222,0,255],[228,0,255],[234,0,255],[240,0,255],[246,0,255],[252,0,255],[255,0,252],[255,0,246],[255,0,240],[255,0,234],[255,0,228],[255,0,222],[255,0,216],[255,0,210],[255,0,204],[255,0,198],[255,0,192],[255,0,186],[255,0,180],[255,0,174],[255,0,168],[255,0,162],[255,0,156],[255,0,150],[255,0,144],[255,0,138],[255,0,132],[255,0,126],[255,0,120],[255,0,114],[255,0,108],[255,0,102],[255,0,96],[255,0,90],[255,0,84],[255,0,78],[255,0,72],[255,0,66],[255,0,60],[255,0,54],[255,0,48],[255,0,42],[255,0,36],[255,0,30],[255,0,24],[255,0,18],[255,0,12],[255,0,6],[255,0,0]]},{path:"/luts/ncsa_paledit/",name:"thal.lut",rgb:[[1,1,9],[1,1,9],[1,1,17],[1,1,25],[1,1,33],[1,1,41],[1,1,49],[1,1,57],[1,1,64],[1,1,72],[1,1,80],[1,1,88],[1,1,96],[1,1,104],[1,1,112],[1,1,120],[1,1,128],[1,1,132],[1,1,136],[1,1,140],[1,1,144],[1,1,148],[1,1,152],[1,1,156],[1,1,160],[1,1,164],[1,1,168],[1,1,172],[1,1,176],[1,1,180],[1,1,184],[1,1,188],[1,1,191],[1,1,195],[1,1,199],[1,1,203],[1,1,207],[1,1,211],[1,1,215],[1,1,219],[1,1,223],[1,1,227],[1,1,231],[1,1,235],[1,1,239],[1,1,243],[1,1,247],[1,1,251],[1,1,254],[1,5,239],[1,9,223],[1,13,207],[1,17,191],[1,21,176],[1,25,160],[1,29,144],[1,33,128],[1,37,112],[1,41,96],[1,45,80],[1,49,64],[1,53,49],[1,57,33],[1,61,17],[1,64,1],[1,68,1],[1,72,1],[1,76,1],[1,80,1],[1,84,1],[1,88,1],[1,92,1],[1,96,1],[1,100,1],[1,104,1],[1,108,1],[1,112,1],[1,116,1],[1,120,1],[1,124,1],[1,128,1],[1,132,1],[1,136,1],[1,140,1],[1,144,1],[1,148,1],[1,152,1],[1,156,1],[1,160,1],[1,164,1],[1,168,1],[1,172,1],[1,176,1],[1,180,1],[1,184,1],[1,188,1],[1,191,1],[1,195,1],[1,199,1],[1,203,1],[1,207,1],[1,211,1],[1,215,1],[1,219,1],[1,223,1],[1,227,1],[1,231,1],[1,235,1],[1,239,1],[1,243,1],[1,247,1],[1,251,1],[1,254,1],[5,239,1],[9,223,1],[13,207,1],[17,191,1],[21,176,1],[25,160,1],[29,144,1],[33,128,1],[37,112,1],[41,96,1],[45,80,1],[49,64,1],[53,49,1],[57,33,1],[61,17,1],[64,1,1],[68,1,1],[72,1,1],[76,1,1],[80,1,1],[84,1,1],[88,1,1],[92,1,1],[96,1,1],[100,1,1],[104,1,1],[108,1,1],[112,1,1],[116,1,1],[120,1,1],[124,1,1],[128,1,1],[132,1,1],[136,1,1],[140,1,1],[144,1,1],[148,1,1],[152,1,1],[156,1,1],[160,1,1],[164,1,1],[168,1,1],[172,1,1],[176,1,1],[180,1,1],[184,1,1],[188,1,1],[191,1,1],[195,1,1],[199,1,1],[203,1,1],[207,1,1],[211,1,1],[215,1,1],[219,1,1],[223,1,1],[227,1,1],[231,1,1],[235,1,1],[239,1,1],[243,1,1],[247,1,1],[251,1,1],[254,1,1],[250,5,1],[247,9,1],[243,13,1],[239,17,1],[236,21,1],[232,25,1],[229,29,1],[225,33,1],[221,37,1],[218,41,1],[214,45,1],[210,49,1],[208,53,1],[205,57,1],[201,61,1],[199,64,1],[199,68,1],[199,72,1],[199,76,1],[199,80,1],[199,84,1],[199,88,1],[199,92,1],[199,96,1],[199,100,1],[199,104,1],[199,108,1],[199,112,1],[199,116,1],[199,120,1],[199,124,1],[199,128,1],[201,132,1],[205,136,1],[208,140,1],[210,144,1],[214,148,1],[218,152,1],[221,156,1],[225,160,1],[229,164,1],[232,168,1],[236,172,1],[239,176,1],[243,180,1],[247,184,1],[250,188,1],[254,191,1],[254,195,17],[254,199,33],[254,203,49],[254,207,64],[254,211,80],[254,215,96],[254,219,112],[254,223,128],[254,227,144],[254,231,160],[254,235,176],[254,239,191],[254,243,207],[254,247,223],[254,251,239],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254],[254,254,254]]},{path:"/luts/ncsa_paledit/",name:"thallium.lut",rgb:[[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,2,1],[1,2,1],[1,3,1],[1,4,1],[1,4,1],[1,5,1],[1,6,1],[1,6,1],[1,7,1],[1,7,1],[1,8,1],[1,9,1],[1,9,1],[1,10,1],[1,11,1],[1,12,1],[1,13,1],[1,13,1],[1,14,1],[1,14,1],[1,15,1],[1,16,1],[1,16,1],[1,17,1],[1,18,1],[1,19,1],[1,19,1],[1,19,1],[1,19,1],[1,19,1],[1,20,1],[1,20,1],[1,20,1],[1,20,1],[1,21,1],[1,21,1],[1,21,1],[1,22,1],[1,22,1],[1,22,1],[1,22,1],[1,23,1],[1,23,1],[1,23,1],[1,23,1],[1,24,1],[1,24,1],[1,24,1],[1,24,1],[1,25,1],[1,25,1],[1,25,1],[1,25,1],[1,26,1],[1,26,1],[1,27,1],[1,27,1],[1,28,1],[1,28,1],[1,29,1],[1,29,1],[1,30,1],[1,30,1],[1,31,1],[1,31,1],[1,32,1],[1,32,1],[1,33,1],[1,33,1],[1,34,1],[1,34,1],[1,35,1],[1,35,1],[1,36,1],[1,37,1],[1,37,1],[1,38,1],[1,38,1],[1,39,1],[1,40,1],[1,40,1],[1,41,1],[2,42,2],[2,42,2],[3,43,3],[3,44,3],[4,45,4],[4,45,4],[5,46,5],[5,47,5],[6,48,6],[6,48,6],[6,49,6],[7,51,7],[8,51,8],[8,52,8],[9,53,9],[9,54,9],[10,54,10],[10,55,10],[11,56,11],[11,56,11],[11,57,11],[12,58,12],[12,59,12],[13,59,13],[13,60,13],[14,61,14],[14,61,14],[14,62,14],[15,63,15],[15,64,15],[16,64,16],[17,66,17],[17,67,17],[18,68,18],[18,69,18],[19,70,19],[19,70,19],[20,71,20],[20,72,20],[21,73,21],[21,74,21],[22,75,22],[22,76,22],[23,77,23],[23,78,23],[24,79,24],[24,80,24],[25,81,25],[25,81,25],[26,82,26],[26,83,26],[28,86,28],[29,87,29],[30,88,30],[31,90,31],[33,91,33],[34,93,34],[35,94,35],[36,96,36],[38,97,38],[39,99,39],[40,100,40],[41,102,41],[43,103,43],[44,105,44],[45,106,45],[46,108,46],[48,109,48],[49,111,49],[50,112,50],[53,115,53],[54,117,54],[55,118,55],[57,119,57],[58,121,58],[59,122,59],[60,124,60],[62,125,62],[63,127,63],[64,128,64],[65,130,65],[67,132,67],[70,134,70],[72,136,72],[75,139,75],[77,141,77],[80,143,80],[82,145,82],[85,147,85],[87,150,87],[92,154,92],[95,156,95],[97,159,97],[100,161,100],[102,163,102],[105,165,105],[107,167,107],[110,170,110],[112,172,112],[115,174,115],[117,176,117],[120,178,120],[122,181,122],[125,183,125],[127,185,127],[130,187,130],[134,191,134],[138,192,138],[142,194,142],[147,196,147],[156,201,156],[160,203,160],[164,206,164],[169,208,169],[173,210,173],[178,213,178],[182,215,182],[186,217,186],[191,220,191],[194,222,194],[199,224,199],[203,227,203],[207,229,207],[212,231,212],[216,234,216],[221,236,221],[225,238,225],[229,241,229],[234,243,234],[251,242,244],[252,247,251],[253,253,253],[253,253,253],[253,253,253],[253,253,253],[253,253,253],[253,253,253],[253,253,253],[253,253,253],[253,253,253],[253,253,253],[253,253,253],[253,253,253],[253,253,253],[253,253,253],[253,253,253],[253,253,253],[253,253,253]]},{path:"/luts/",name:"thermal.lut",rgb:[[70,0,115],[70,0,115],[70,0,116],[70,0,118],[70,0,120],[70,0,122],[70,0,124],[70,0,126],[70,0,128],[70,0,131],[70,0,133],[70,0,136],[70,0,139],[70,0,141],[70,0,144],[70,0,147],[70,0,151],[70,0,154],[70,0,157],[70,0,160],[70,0,164],[70,0,167],[70,0,170],[70,0,174],[70,0,177],[70,0,181],[70,0,184],[70,0,188],[70,0,194],[70,0,200],[70,0,206],[70,0,211],[70,0,217],[70,0,222],[70,0,227],[70,0,232],[70,0,236],[70,0,240],[70,0,244],[69,0,248],[69,0,251],[68,0,253],[67,2,255],[66,5,255],[64,9,255],[63,13,255],[61,17,255],[59,22,255],[57,27,255],[55,32,255],[53,38,255],[51,44,255],[48,50,255],[45,57,255],[43,63,255],[40,70,255],[37,77,255],[34,84,255],[31,91,255],[28,98,255],[26,106,255],[23,113,254],[20,121,253],[17,128,252],[14,136,251],[12,144,250],[9,152,248],[6,160,247],[4,168,246],[2,176,245],[0,183,243],[0,191,242],[0,198,241],[0,205,240],[0,212,239],[0,218,238],[0,224,237],[0,230,236],[0,235,235],[0,240,235],[0,245,235],[0,249,234],[0,253,234],[1,255,234],[4,255,234],[7,255,234],[11,255,235],[16,255,236],[21,255,237],[27,255,238],[32,255,239],[39,255,240],[45,255,241],[52,255,243],[60,255,244],[68,255,246],[76,255,247],[84,255,249],[92,255,250],[101,255,252],[109,255,253],[117,255,254],[126,255,254],[134,255,254],[143,255,254],[152,255,254],[160,255,254],[168,255,254],[176,255,254],[184,255,254],[192,255,254],[199,255,254],[206,255,254],[213,255,254],[219,255,254],[225,255,254],[231,255,254],[236,255,254],[240,255,254],[244,255,254],[247,255,254],[250,255,254],[252,254,254],[253,254,254],[254,254,254],[254,254,252],[253,254,249],[252,254,246],[251,254,243],[249,254,239],[246,254,236],[243,254,231],[240,254,227],[237,254,223],[233,254,218],[228,254,213],[223,255,208],[219,255,203],[214,255,198],[208,255,192],[203,255,187],[196,255,181],[190,255,175],[184,255,169],[178,255,163],[171,255,157],[165,255,151],[158,255,145],[151,255,138],[144,255,132],[138,255,126],[129,255,118],[120,255,110],[112,255,102],[103,255,94],[95,255,87],[87,255,79],[79,255,72],[71,255,65],[64,255,58],[57,255,51],[51,255,45],[45,255,38],[39,255,32],[35,255,27],[30,255,22],[27,255,17],[24,255,13],[21,255,8],[20,255,5],[19,255,2],[19,255,1],[21,255,1],[23,255,1],[27,255,1],[32,255,1],[37,255,1],[44,255,1],[51,255,1],[59,255,1],[68,255,1],[77,255,1],[86,255,1],[97,255,3],[107,255,5],[118,255,8],[125,255,10],[131,255,12],[137,255,14],[144,255,16],[150,255,17],[156,255,19],[162,255,21],[168,255,23],[174,255,25],[180,255,26],[185,255,28],[191,255,30],[197,254,31],[202,254,33],[207,252,34],[212,252,36],[217,250,37],[222,249,38],[227,248,39],[231,246,40],[235,245,41],[238,243,42],[242,241,43],[245,239,43],[248,237,43],[251,235,44],[253,233,44],[255,229,44],[255,226,44],[255,222,43],[255,218,43],[255,213,42],[255,208,42],[255,203,41],[255,198,40],[255,192,40],[255,187,39],[255,181,38],[255,175,37],[255,169,36],[255,162,34],[255,156,33],[255,149,32],[255,143,31],[255,136,30],[255,129,28],[255,122,27],[255,116,25],[255,109,24],[255,102,23],[255,95,21],[255,89,20],[255,82,19],[255,76,17],[255,70,16],[255,63,15],[255,57,13],[255,51,12],[255,45,11],[255,40,10],[255,35,9],[255,29,7],[255,25,6],[255,20,6],[255,16,5],[255,12,4],[255,8,3],[255,5,3],[255,2,2],[255,2,2]]},{path:"/luts/",name:"turbo.lut",rgb:[[48,18,59],[49,21,66],[51,24,74],[52,27,81],[53,30,88],[54,33,95],[55,36,102],[56,38,108],[57,41,115],[58,44,121],[59,47,128],[60,50,134],[61,53,139],[62,56,145],[62,58,151],[63,61,156],[64,64,162],[64,67,167],[65,70,172],[66,72,177],[66,75,182],[67,78,186],[67,81,191],[68,83,195],[68,86,199],[69,89,203],[69,91,207],[69,94,211],[69,97,215],[70,99,218],[70,102,221],[70,105,225],[70,107,228],[70,110,231],[70,113,233],[70,115,236],[70,118,238],[70,120,241],[70,123,243],[70,125,245],[70,128,247],[70,130,249],[70,133,250],[69,135,252],[69,138,253],[68,140,254],[68,143,254],[67,145,255],[66,148,255],[65,150,255],[63,153,255],[62,155,255],[61,158,254],[59,161,253],[58,163,253],[56,166,251],[54,168,250],[53,171,249],[51,173,247],[49,176,246],[47,178,244],[45,181,242],[44,183,240],[42,185,238],[40,188,236],[38,190,234],[37,192,231],[35,195,229],[33,197,226],[32,199,224],[31,201,221],[29,204,219],[28,206,216],[27,208,213],[26,210,211],[25,212,208],[24,214,205],[24,216,203],[24,218,200],[23,219,197],[23,221,195],[23,223,192],[24,224,190],[24,226,187],[25,227,185],[26,229,183],[27,230,180],[29,232,178],[30,233,175],[32,234,173],[34,236,170],[36,237,167],[39,238,164],[41,239,161],[44,240,158],[47,241,155],[50,242,152],[53,243,148],[56,244,145],[60,245,142],[63,246,139],[67,247,135],[70,248,132],[74,249,128],[78,250,125],[81,250,121],[85,251,118],[89,252,115],[93,252,111],[97,253,108],[101,253,105],[105,254,101],[109,254,98],[113,254,95],[117,255,92],[121,255,89],[125,255,86],[128,255,83],[132,255,80],[136,255,78],[139,255,75],[143,255,73],[146,255,70],[150,255,68],[153,255,66],[156,254,64],[159,254,62],[162,253,61],[164,253,59],[167,252,58],[170,252,57],[172,251,56],[175,250,55],[177,249,54],[180,248,53],[183,248,53],[185,246,52],[188,245,52],[191,244,52],[193,243,52],[196,242,51],[198,240,51],[201,239,52],[203,238,52],[206,236,52],[208,235,52],[210,233,52],[213,232,53],[215,230,53],[217,228,53],[219,226,54],[221,225,54],[224,223,55],[226,221,55],[228,219,56],[230,217,56],[231,215,56],[233,213,57],[235,211,57],[237,209,57],[238,207,58],[240,205,58],[241,203,58],[243,201,58],[244,199,58],[245,197,58],[247,195,58],[248,193,58],[249,191,57],[250,189,57],[250,186,56],[251,184,56],[252,182,55],[252,180,54],[253,177,53],[253,175,53],[254,172,52],[254,169,51],[254,167,50],[254,164,49],[255,161,47],[255,158,46],[255,156,45],[255,153,44],[254,150,43],[254,147,42],[254,144,40],[254,141,39],[253,138,38],[253,135,36],[252,132,35],[252,129,34],[251,126,32],[251,123,31],[250,120,30],[249,117,28],[248,114,27],[248,111,26],[247,108,25],[246,105,23],[245,102,22],[244,99,21],[243,96,20],[242,93,19],[240,91,17],[239,88,16],[238,85,15],[237,83,14],[235,80,14],[234,78,13],[233,75,12],[231,73,11],[230,71,10],[228,69,10],[227,66,9],[225,64,9],[223,62,8],[222,60,7],[220,58,7],[218,56,6],[216,54,6],[214,52,5],[212,50,5],[210,49,5],[208,47,4],[206,45,4],[204,43,3],[202,41,3],[200,40,3],[198,38,2],[195,36,2],[193,35,2],[191,33,2],[188,31,1],[186,30,1],[183,28,1],[180,27,1],[178,25,1],[175,24,1],[172,22,1],[170,21,1],[167,20,1],[164,18,1],[161,17,1],[158,16,1],[155,15,1],[152,13,1],[149,12,1],[146,11,1],[142,10,1],[139,9,1],[136,8,1],[133,7,1],[129,6,2],[126,5,2],[122,4,2]]},{path:"/luts/ncsa_paledit/",name:"unionjack.lut",rgb:[[0,0,0],[0,0,2],[0,0,5],[0,0,8],[0,0,11],[0,0,14],[0,0,17],[0,0,20],[0,0,23],[0,0,26],[0,0,29],[0,0,32],[0,0,35],[0,0,38],[0,0,41],[0,0,44],[0,0,47],[0,0,50],[0,0,53],[0,0,56],[0,0,59],[0,0,62],[0,0,65],[0,0,68],[0,0,71],[0,0,74],[0,0,77],[0,0,80],[0,0,83],[0,0,86],[0,0,89],[0,0,92],[0,0,95],[0,0,97],[0,0,100],[0,0,103],[0,0,106],[0,0,109],[0,0,112],[0,0,115],[0,0,118],[0,0,121],[0,0,124],[0,0,127],[0,0,130],[0,0,133],[0,0,136],[0,0,139],[0,0,142],[0,0,145],[0,0,148],[0,0,151],[0,0,154],[0,0,157],[0,0,160],[0,0,163],[0,0,166],[0,0,169],[0,0,172],[0,0,175],[0,0,178],[0,0,181],[0,0,184],[0,0,190],[0,0,190],[3,3,191],[7,7,192],[11,11,193],[15,15,194],[19,19,195],[23,23,196],[27,27,197],[31,31,198],[35,35,199],[39,39,200],[43,43,201],[47,47,202],[51,51,203],[55,55,204],[59,59,205],[63,63,206],[67,67,207],[71,71,208],[75,75,209],[79,79,210],[83,83,211],[87,87,212],[91,91,213],[95,95,214],[99,99,215],[103,103,216],[107,107,217],[111,111,218],[115,115,219],[119,119,220],[123,123,221],[127,127,222],[131,131,223],[135,135,224],[139,139,225],[143,143,226],[147,147,227],[151,151,228],[155,155,229],[159,159,230],[163,163,231],[167,167,232],[171,171,233],[175,175,234],[179,179,235],[183,183,236],[187,187,237],[191,191,238],[195,195,239],[199,199,240],[203,203,241],[207,207,242],[211,211,243],[215,215,244],[219,219,245],[223,223,246],[227,227,247],[231,231,248],[235,235,249],[239,239,250],[243,243,251],[247,247,252],[255,255,255],[255,255,255],[253,251,251],[252,247,247],[251,243,243],[250,239,239],[249,235,235],[248,231,231],[247,227,227],[246,223,223],[245,219,219],[244,215,215],[243,211,211],[242,207,207],[241,203,203],[240,199,199],[239,195,195],[238,191,191],[237,187,187],[236,183,183],[235,179,179],[234,175,175],[233,171,171],[232,167,167],[231,163,163],[230,159,159],[229,155,155],[228,151,151],[227,147,147],[226,143,143],[225,139,139],[224,135,135],[223,131,131],[222,127,127],[221,123,123],[220,119,119],[219,115,115],[218,111,111],[217,107,107],[216,103,103],[215,99,99],[214,95,95],[213,91,91],[212,87,87],[211,83,83],[210,79,79],[209,75,75],[208,71,71],[207,67,67],[206,63,63],[205,59,59],[204,55,55],[203,51,51],[202,47,47],[201,43,43],[200,39,39],[199,35,35],[198,31,31],[197,27,27],[196,23,23],[195,19,19],[194,15,15],[193,11,11],[192,7,7],[190,0,0],[190,0,0],[191,3,3],[192,7,7],[193,11,11],[194,15,15],[195,19,19],[196,23,23],[197,27,27],[198,31,31],[199,35,35],[200,39,39],[201,43,43],[202,47,47],[203,51,51],[204,55,55],[205,59,59],[206,63,63],[207,67,67],[208,71,71],[209,75,75],[210,79,79],[211,83,83],[212,87,87],[213,91,91],[214,95,95],[215,99,99],[216,103,103],[217,107,107],[218,111,111],[219,115,115],[220,119,119],[221,123,123],[222,127,127],[223,131,131],[224,135,135],[225,139,139],[226,143,143],[227,147,147],[228,151,151],[229,155,155],[230,159,159],[231,163,163],[232,167,167],[233,171,171],[234,175,175],[235,179,179],[236,183,183],[237,187,187],[238,191,191],[239,195,195],[240,199,199],[241,203,203],[242,207,207],[243,211,211],[244,215,215],[245,219,219],[246,223,223],[247,227,227],[248,231,231],[249,235,235],[250,239,239],[251,243,243],[252,247,247],[255,255,255]]},{path:"/luts/matplotlib/",name:"viridis.lut",rgb:[[68,1,84],[68,2,85],[68,3,87],[69,5,88],[69,6,90],[69,8,91],[70,9,92],[70,11,94],[70,12,95],[70,14,97],[71,15,98],[71,17,99],[71,18,101],[71,20,102],[71,21,103],[71,22,105],[71,24,106],[72,25,107],[72,26,108],[72,28,110],[72,29,111],[72,30,112],[72,32,113],[72,33,114],[72,34,115],[72,35,116],[71,37,117],[71,38,118],[71,39,119],[71,40,120],[71,42,121],[71,43,122],[71,44,123],[70,45,124],[70,47,124],[70,48,125],[70,49,126],[69,50,127],[69,52,127],[69,53,128],[69,54,129],[68,55,129],[68,57,130],[67,58,131],[67,59,131],[67,60,132],[66,61,132],[66,62,133],[66,64,133],[65,65,134],[65,66,134],[64,67,135],[64,68,135],[63,69,135],[63,71,136],[62,72,136],[62,73,137],[61,74,137],[61,75,137],[61,76,137],[60,77,138],[60,78,138],[59,80,138],[59,81,138],[58,82,139],[58,83,139],[57,84,139],[57,85,139],[56,86,139],[56,87,140],[55,88,140],[55,89,140],[54,90,140],[54,91,140],[53,92,140],[53,93,140],[52,94,141],[52,95,141],[51,96,141],[51,97,141],[50,98,141],[50,99,141],[49,100,141],[49,101,141],[49,102,141],[48,103,141],[48,104,141],[47,105,141],[47,106,141],[46,107,142],[46,108,142],[46,109,142],[45,110,142],[45,111,142],[44,112,142],[44,113,142],[44,114,142],[43,115,142],[43,116,142],[42,117,142],[42,118,142],[42,119,142],[41,120,142],[41,121,142],[40,122,142],[40,122,142],[40,123,142],[39,124,142],[39,125,142],[39,126,142],[38,127,142],[38,128,142],[38,129,142],[37,130,142],[37,131,141],[36,132,141],[36,133,141],[36,134,141],[35,135,141],[35,136,141],[35,137,141],[34,137,141],[34,138,141],[34,139,141],[33,140,141],[33,141,140],[33,142,140],[32,143,140],[32,144,140],[32,145,140],[31,146,140],[31,147,139],[31,148,139],[31,149,139],[31,150,139],[30,151,138],[30,152,138],[30,153,138],[30,153,138],[30,154,137],[30,155,137],[30,156,137],[30,157,136],[30,158,136],[30,159,136],[30,160,135],[31,161,135],[31,162,134],[31,163,134],[32,164,133],[32,165,133],[33,166,133],[33,167,132],[34,167,132],[35,168,131],[35,169,130],[36,170,130],[37,171,129],[38,172,129],[39,173,128],[40,174,127],[41,175,127],[42,176,126],[43,177,125],[44,177,125],[46,178,124],[47,179,123],[48,180,122],[50,181,122],[51,182,121],[53,183,120],[54,184,119],[56,185,118],[57,185,118],[59,186,117],[61,187,116],[62,188,115],[64,189,114],[66,190,113],[68,190,112],[69,191,111],[71,192,110],[73,193,109],[75,194,108],[77,194,107],[79,195,105],[81,196,104],[83,197,103],[85,198,102],[87,198,101],[89,199,100],[91,200,98],[94,201,97],[96,201,96],[98,202,95],[100,203,93],[103,204,92],[105,204,91],[107,205,89],[109,206,88],[112,206,86],[114,207,85],[116,208,84],[119,208,82],[121,209,81],[124,210,79],[126,210,78],[129,211,76],[131,211,75],[134,212,73],[136,213,71],[139,213,70],[141,214,68],[144,214,67],[146,215,65],[149,215,63],[151,216,62],[154,216,60],[157,217,58],[159,217,56],[162,218,55],[165,218,53],[167,219,51],[170,219,50],[173,220,48],[175,220,46],[178,221,44],[181,221,43],[183,221,41],[186,222,39],[189,222,38],[191,223,36],[194,223,34],[197,223,33],[199,224,31],[202,224,30],[205,224,29],[207,225,28],[210,225,27],[212,225,26],[215,226,25],[218,226,24],[220,226,24],[223,227,24],[225,227,24],[228,227,24],[231,228,25],[233,228,25],[236,228,26],[238,229,27],[241,229,28],[243,229,30],[246,230,31],[248,230,33],[250,230,34],[253,231,36]]},{path:"/luts/wcif/",name:"yellow_hot.lut",rgb:[[0,0,0],[2,1,0],[4,3,0],[7,5,0],[9,7,0],[11,8,0],[14,10,0],[16,12,0],[19,14,0],[21,16,0],[23,17,0],[26,19,0],[28,21,0],[31,23,0],[33,25,0],[35,26,0],[38,28,0],[40,30,0],[43,32,0],[45,34,0],[47,35,0],[50,37,0],[52,39,0],[54,41,0],[57,43,0],[59,44,0],[62,46,0],[64,48,0],[66,50,0],[69,51,0],[71,53,0],[74,55,0],[76,57,0],[78,59,0],[81,60,0],[83,62,0],[86,64,0],[88,66,0],[90,68,0],[93,69,0],[95,71,0],[98,73,0],[100,75,0],[102,77,0],[105,78,0],[107,80,0],[109,82,0],[112,84,0],[114,86,0],[117,87,0],[119,89,0],[121,91,0],[124,93,0],[126,95,0],[129,96,0],[131,98,0],[133,100,0],[136,102,0],[138,103,0],[141,105,0],[143,107,0],[145,109,0],[148,111,0],[150,112,0],[153,114,0],[155,116,0],[157,118,0],[160,120,0],[162,121,0],[164,123,0],[167,125,0],[169,127,0],[172,129,0],[174,130,0],[176,132,0],[179,134,0],[181,136,0],[184,138,0],[186,139,0],[188,141,0],[191,143,0],[193,145,0],[196,147,0],[198,148,0],[204,153,0],[204,153,0],[204,154,0],[205,155,0],[205,156,0],[206,157,0],[206,158,0],[207,160,0],[208,161,0],[208,162,0],[209,163,0],[209,164,0],[210,166,0],[211,167,0],[211,168,0],[212,169,0],[212,170,0],[213,172,0],[214,173,0],[214,174,0],[215,175,0],[215,176,0],[216,178,0],[217,179,0],[217,180,0],[218,181,0],[218,182,0],[219,184,0],[220,185,0],[220,186,0],[221,187,0],[221,188,0],[222,190,0],[223,191,0],[223,192,0],[224,193,0],[224,194,0],[225,196,0],[226,197,0],[226,198,0],[227,199,0],[227,200,0],[228,202,0],[229,203,0],[229,204,0],[230,205,0],[230,206,0],[231,207,0],[232,209,0],[232,210,0],[233,211,0],[233,212,0],[234,213,0],[235,215,0],[235,216,0],[236,217,0],[236,218,0],[237,219,0],[238,221,0],[238,222,0],[239,223,0],[239,224,0],[240,225,0],[241,227,0],[241,228,0],[242,229,0],[242,230,0],[243,231,0],[244,233,0],[244,234,0],[245,235,0],[245,236,0],[246,237,0],[247,239,0],[247,240,0],[248,241,0],[248,242,0],[249,243,0],[250,245,0],[250,246,0],[251,247,0],[251,248,0],[252,249,0],[253,251,0],[253,252,0],[255,255,0],[255,255,0],[255,255,2],[255,255,5],[255,255,8],[255,255,11],[255,255,14],[255,255,17],[255,255,20],[255,255,23],[255,255,26],[255,255,29],[255,255,32],[255,255,35],[255,255,38],[255,255,41],[255,255,44],[255,255,47],[255,255,50],[255,255,53],[255,255,56],[255,255,59],[255,255,62],[255,255,65],[255,255,68],[255,255,71],[255,255,74],[255,255,77],[255,255,80],[255,255,83],[255,255,86],[255,255,89],[255,255,92],[255,255,95],[255,255,98],[255,255,101],[255,255,104],[255,255,107],[255,255,110],[255,255,113],[255,255,116],[255,255,119],[255,255,122],[255,255,125],[255,255,128],[255,255,131],[255,255,134],[255,255,137],[255,255,140],[255,255,143],[255,255,146],[255,255,149],[255,255,152],[255,255,155],[255,255,158],[255,255,161],[255,255,164],[255,255,167],[255,255,170],[255,255,173],[255,255,176],[255,255,179],[255,255,182],[255,255,185],[255,255,188],[255,255,191],[255,255,194],[255,255,197],[255,255,200],[255,255,203],[255,255,206],[255,255,209],[255,255,212],[255,255,215],[255,255,218],[255,255,221],[255,255,224],[255,255,227],[255,255,230],[255,255,233],[255,255,236],[255,255,239],[255,255,242],[255,255,245],[255,255,248],[255,255,251],[255,255,255]]}],$v={cyan:"#00FFFF",yellow:"#FFFF00",magenta:"#FF00FF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",white:"#FFFFFF"};Object.values($v).slice(0,-2);function Kf(t){const e=t.data;let n=0,i=1/0,r=t.data.length;for(let s=0;s<r;s++){let o=Number(e[s]);n=Math.max(n,o),i=Math.min(i,o)}return[i,n]}function Bv(t,e,n,i,r,s=!1){const o=t[0].shape,l=o[0],h=o[1],p=l*h;e||(e=t.map(Kf));const m=i==null?void 0:i.map(N=>N&&Lv(N));let y=performance.now(),E=new Uint8ClampedArray(4*l*h).fill(0),C=0;for(let N=0;N<t.length;N++){C=0;let F=n[N],X=m==null?void 0:m[N],G=t[N].data,V=e[N],K=r==null?void 0:r[N];for(let ae=0;ae<p;ae++){let de=(Number(G[ae])-V[0])/(V[1]-V[0]);de=Math.min(1,Math.max(0,de));for(let g=0;g<3;g++){let H;if(X){let re=de*255<<0;H=X[re][g],K&&(H=255-H)}else H=de*F[g]<<0,K&&F[g]!=0&&(H=255-H);E[C*4+g]=Math.max(E[C*4+g],H)}E[C*4+3]=255,C+=1}}if(performance.now()-y<100&&s){let N=5;Hv(E,N)[N-1]<1&&(E=Wv(E,2))}return E}function Wv(t,e){for(let n=0;n<t.length/4;n++)for(let i=0;i<3;i++){let r=t[n*4+i];r=Math.min(255,r*e),t[n*4+i]=r}return t}function Hv(t,e=5){let n=new Array(e).fill(0);const i=256/e;let r=t.length/4;for(let s=0;s<r;s++){let o=t[s*4];o=Math.max(t[s*4+1],o),o=Math.max(t[s*4+2],o);let l=Math.floor(o/i);n[l]+=1}return n=n.map(s=>100*s/r),n}async function Vv(t){var e,n;let i=(await cr(t,{kind:"group"})).attrs,r,s,o=2;return"ome"in i?(i=i,r=i.ome.multiscales[0],s=i.ome.omero,o=3):(i=i,r=i.multiscales[0],s=i.omero),!r.axes&&(n=(e=r.coordinateSystems)==null?void 0:e[0])!=null&&n.axes&&(r.axes=r.coordinateSystems[0].axes),{multiscale:r,omero:s,zarr_version:o}}async function Uv(t,e=0){typeof t=="string"&&(t=new I2(t));const{multiscale:n,omero:i,zarr_version:r}=await Vv(t),s=n.datasets.map(E=>E.path);e<0&&(e=s.length+e);const o=s[e],l=await Jf(t,o,r),h=l.shape,p=n.datasets.map(E=>{let C;if(Array.isArray(E.coordinateTransformations)){for(const N of E.coordinateTransformations)if("scale"in N){C=N.scale;break}else if("transformations"in N){for(const F of N.transformations)if("scale"in F){C=F.scale;break}}}return C}).filter(E=>E!==void 0);if(p.length>0&&p.length!==n.datasets.length)throw new Error("Could not determine scales for all datasets");const m=p[e],y=p.length===0?void 0:p.map(E=>h.map((C,N)=>Math.ceil(C*m[N]/E[N])));return{arr:l,shapes:y,multiscale:n,omero:i,scales:p,zarr_version:r}}async function Jf(t,e,n){let i=uv(t);const r=n===3?cr.v3:n===2?cr.v2:cr;let s=i.resolve(e);return await r(s,{kind:"array"})}function jv(t,e,n,i,r){return t.map(s=>e.map((o,l)=>{let h=o,p=n[l];if(p=="c")return s;if(p in i){let m=i[p];if(Array.isArray(m))return to(Math.floor(m[0]/h*o),Math.floor(m[1]/h*o));if(Number.isInteger(m))return m!==void 0?Math.floor(m/h*o):void 0}return p=="x"||p=="y"?to(0,o):p=="z"||p=="t"?parseInt(o/2+""):0}))}const n1={},Ca={};async function Yv(t){var it,ft;let e=new I2(t),n=-1;const{arr:i,shapes:r,multiscale:s,omero:o,scales:l,zarr_version:h}=await Uv(e,n);console.log({arr:i,shapes:r,multiscale:s,omero:o,scales:l,zarr_version:h});let p=t.split("/").pop();if(console.log("multiscale",s),!s){alert(`Failed to load multiscale from ${t}`);return}let m=s.name||p,y=s.axes,E=(y==null?void 0:y.map(z=>z.name))||["t","c","z","y","x"],C=s.datasets,N={};for(let z of C){let M=z.path,k=await Jf(e,M,h);N[M]={shape:k.shape,dtype:k.dtype}}let F={multiscales:[s]};F.arrays=N;let X=N[0];console.log("zarray",X);let G=X.dtype,V=X.shape,K=V.length,ae=V[K-1],de=V[K-2],g=1,H=1,re=1;E.includes("z")&&(g=V[E.indexOf("z")]);let _e=parseInt(g/2);E.includes("t")&&(H=V[E.indexOf("t")]);let Te=parseInt(H/2);E.includes("c")&&(re=V[E.indexOf("c")]);let ye=["FF0000","00FF00","0000FF","FFFF00","00FFFF","FFFFFF"],le=o==null?void 0:o.channels;if(!le){let M=jv(De.range(re),V,E,{}).map(P=>Zf(i,P)),k=await Promise.all(M);le=De.range(re).map(P=>{let B=Kf(k[P]);return{label:"Ch"+P,active:!0,color:ye[P],window:{min:B[0],max:B[1],start:B[0],end:B[1]}}})}let Pe=0,Le=0,Ze={scale:1};var je={imageId:t,name:m,width:ae*Ze.scale,height:de*Ze.scale,sizeZ:g,theZ:_e,sizeT:H,theT:Te,rdefs:{model:"-"},channels:le,orig_width:ae,orig_height:de,x:Pe,y:Le,pixelsType:Xv(G),zarr:F};let Je=(it=s.datasets[0].coordinateTransformations)==null?void 0:it.find(z=>z.type=="scale"),Ye=(ft=s.coordinateTransformations)==null?void 0:ft.find(z=>z.type=="scale");if(Je)for(let z of["x","y","z"])y.forEach((M,k)=>{if(M.name==z){let P=Je.scale[k];if(Ye&&(P=P*Ye.scale[k]),M.unit){let B=M.unit.toUpperCase();je["pixel_size_"+z]=P,je["pixel_size_"+z+"_unit"]=B,LENGTH_UNITS[B]&&(je["pixel_size_"+z+"_symbol"]=LENGTH_UNITS[B].symbol)}}});return console.log("Zarr Panel Model...",je),je}function Xv(t){let e="";return t.includes("u")?e+="uint":t.includes("i")?e+="int":t.includes("f")&&(e+="float"),t.includes("8")?e+="64":t.includes("4")?e+="32":t.includes("2")?e+="16":t.includes("1")&&(e+="8"),e}async function qv(t,e,n,i,r,s){var P;let o=e.multiscales[0].datasets.map(B=>B.path),l=(P=e.multiscales[0].axes)==null?void 0:P.map(B=>B.name||B);l=l||["t","c","z","y","x"];let h=e.arrays;const p=500;let m,y=h[o[0]].shape,E=(s==null?void 0:s.x)||0,C=(s==null?void 0:s.y)||0,N=(s==null?void 0:s.width)||y.at(-1),F=(s==null?void 0:s.height)||y.at(-2),X;for(let B of o){let ee=h[B].shape,ge=N*ee.at(-1)/y.at(-1),ce=F*ee.at(-2)/y.at(-2);if(ge*ce<p*p){X={x:Math.floor(E*ee.at(-1)/y.at(-1)),y:Math.floor(C*ee.at(-2)/y.at(-2)),width:Math.floor(ge),height:Math.floor(ce)},m=B;break}}const G=document.createElement("canvas");if(G.width=X.width,G.height=X.height,!m){console.error(`Lowest resolution too large for rendering: > ${p} x ${p}`);return}let V=t+"/"+m,K;if(n1[V])K=n1[V];else{let B=new I2(t+"/"+m);K=await cr(B,{kind:"array"}),n1[V]=K}let ae=l.indexOf("c"),de=h[m].shape;de.length;let g=[],H=[],re=[],_e=[],Te=[];r.forEach((B,te)=>{B.active&&(g.push(te),H.push(Zv(B.color)),re.push([B.window.start,B.window.end]),_e.push(B.color.endsWith(".lut")?B.color:void 0),Te.push(B.reverseIntensity))});let ye=h[m].shape,le=ye.at(-1),Pe=ye.at(-2),Le=0,Ze=0;X.x<0&&(Le=-X.x,X.width+=X.x,X.x=0),X.y<0&&(Ze=-X.y,X.height+=X.y,X.y=0),X.x+X.width>le&&(X.width=le-X.x),X.y+X.height>Pe&&(X.height=Pe-X.y);let je=g.map(B=>{let te=[],ee=de.map((ce,Se)=>Se==ae?(te.push(""+B),B):l[Se]=="x"?(te.push(`${X.x}:${X.x+X.width}`),to(X.x,X.x+X.width)):l[Se]=="y"?(te.push(`${X.y}:${X.y+X.height}`),to(X.y,X.y+X.height)):l[Se]=="z"?(te.push(""+n),n):l[Se]=="t"?(te.push(""+i),i):0),ge=`${t}/${m}/${te.join(",")}`;return Ca[ge]?(console.log("RETURN cache!",Ca[ge]),Ca[ge]):Zf(K,ee).then(ce=>(console.log("populate cache..."),Ca[ge]=ce,ce))}),Je=await Promise.all(je),Ye=new Date().getTime(),it=Bv(Je,re,H,_e,Te);console.log("renderTo8bitArray took",new Date().getTime()-Ye,"ms");let ft=Je[0].shape.at(-1),z=Je[0].shape.at(-2);const M=G.getContext("2d");return M.fillStyle="#ddd",M.fillRect(0,0,G.width,G.height),M.putImageData(new ImageData(it,ft,z),Le,Ze),G.toDataURL("image/png")}function Zv(t){t.startsWith("#")&&(t=t.slice(1));const e=parseInt(t.slice(0,2),16),n=parseInt(t.slice(2,4),16),i=parseInt(t.slice(4,6),16);return[e,n,i]}JSON.stringify=JSON.stringify||function(t){var e=typeof t;if(e!="object"||t===null)return e=="string"&&(t='"'+t+'"'),String(t);var n,i,r=[],s=t&&t.constructor==Array;for(n in t)i=t[n],e=typeof i,e=="string"?i='"'+i+'"':e=="object"&&i!==null&&(i=JSON.stringify(i)),r.push((s?"":'"'+n+'":')+String(i));return(s?"[":"{")+String(r)+(s?"]":"}")};String.prototype.endsWith||(String.prototype.endsWith=function(t,e){return e<this.length?e|=0:e=this.length,this.substr(e-t.length,t.length)===t});const Gv=function(t){var e=JSON.stringify(t,null,2);Vn("exportJsonModal"),A("#exportJsonModal textarea").text(e)},Kv=function(t){window.sessionStorage.setItem(LOCAL_STORAGE_RECOVERED_FIGURE,JSON.stringify(t))},Qf=function(){window.sessionStorage.removeItem(LOCAL_STORAGE_RECOVERED_FIGURE)},ed=function(){var t=window.sessionStorage,e=t.getItem(LOCAL_STORAGE_RECOVERED_FIGURE),n;try{n=JSON.parse(e)}catch{console.log("recovered Figure not valid JSON "+e)}return n};var Jv=new ri("#confirmModal");function Zi(t,e,n,i){var r=A("#confirmModal"),s=A(".modal-title",r),o=A(".modal-body",r),l=A(".modal-footer",r),h=A(".btn:first",l);s.html(t),o.html("<p>"+e+"<p>"),l.empty(),De.each(n,function(p){h.clone().text(p).appendTo(l)}),A(".btn",l).removeClass("btn-primary").addClass("btn-default").last().removeClass("btn-default").addClass("btn-primary"),Jv.show(),r.one("hide.bs.modal",function(){A("#confirmModal .modal-footer .btn").off("click"),i&&i()}),A("#confirmModal .modal-footer .btn").one("click",function(p){r.off("hide.bs.modal");var m=A(p.target).text();i&&i(m)})}window.OME===void 0&&(window.OME={});let Po=[];OME.setOpenWithEnabledHandler=function(t,e){Po.forEach(function(n){n.id===t&&(n.isEnabled=function(){var i=Array.from(arguments),r=!1;try{r=e.apply(this,i)}catch(s){console.log("Open with "+label+": "+s)}return r})})};OME.setOpenWithUrlProvider=function(t,e){Po.forEach(function(n){n.id===t&&(n.getUrl=e)})};A.prototype.slider_old=A.prototype.slider;A.prototype.slider=function(){var t=A.prototype.slider_old.apply(this,arguments);return this.find(".ui-slider-handle").bind("keydown",function(){return!1}),t};function qr(t,e,n,i,r){let s=Math.sqrt(Math.pow(t-n,2)+Math.pow(e-i,2)),o=Math.atan2(e-i,t-n);o=o+r*(Math.PI/180);let l=Math.cos(o)*s,h=Math.sin(o)*s;return{x:n+l,y:i+h}}A(function(){A("#previewInfoTabs a").click(function(t){t.preventDefault(),A(this).tab("show")}),navigator.platform.toUpperCase().indexOf("MAC")>-1&&A("ul.dropdown-menu li a span").each(function(){var t=A(this);t.text(t.text().replace("Ctrl+",""))}),A.getJSON(WEBGATEWAYINDEX+"open_with/",function(t){t&&t.open_with_options&&(Po=t.open_with_options,Po.forEach(function(e){e.script_url&&A.getScript(e.script_url)}))})});function _s(){A(".modal").each(function(){const t=ri.getInstance(this);t&&t.hide()})}function Vn(t,e){let n=ri.getInstance(document.getElementById(t));n||(n=new ri("#"+t)),n.show(e)}function $r(t){let e=ri.getInstance(document.getElementById(t));e||(e=new ri("#"+t)),e.hide()}async function ns(t){return fetch(t,{mode:"cors",credentials:"include"}).then(n=>n.json())}const B1=1e8;function W1(){return parseInt(Math.random()*B1)}function Qv(t){let e=t.map(o=>o.insetRoiId).filter(Boolean),n=[];t.forEach(o=>{o.shapes&&o.shapes.forEach(l=>{l.id&&n.push(l.id)})});let i=e.filter(o=>n.includes(o)),r=W1();return t.map(o=>(i.includes(o.insetRoiId)&&(o.insetRoiId=(o.insetRoiId+r)%B1),o.shapes&&o.shapes.forEach(l=>{i.includes(l.id)&&(l.id=(l.id+r)%B1)}),o))}function e3(t,e,n){const i=new File([t],n,{type:e}),r=document.createElement("a"),s=URL.createObjectURL(i);r.href=s,r.download=i.name,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(s)}var ka=1.43,td=dt.Model.extend({figureModel:void 0,defaults:{x:100,y:100,width:512,height:512,zoom:100,dx:0,dy:0,labels:[],deltaT:[],rotation:0,selected:!1,pixel_size_x_symbol:"m",pixel_size_x_unit:"MICROMETER",rotation_symbol:"",max_export_dpi:1e3,vertical_flip:!1,horizontal_flip:!1},initialize:function(){this.on("change:zoom change:dx change:dy change:width change:height change:rotation change:labels",t=>{this.get("insetRoiId")&&this.figureModel&&(this.silenceTriggers||this.figureModel.trigger("zoomPanUpdated",t))}),this.on("change:shapes",t=>{!this.silenceTriggers&&this.figureModel&&this.figureModel.trigger("shapesUpdated",t)})},setFigureModel(t){this.figureModel=t,this.listenTo(t,"zoomPanUpdated",this.handleZoomPanChange),this.listenTo(t.panels,"remove",e=>{this.handleZoomPanChange(e,!0)}),this.listenTo(t,"shapesUpdated",this.handleShapesChange)},handleShapesChange(t){var e=this.get("insetRoiId");if(!e)return;this.silenceTriggers=!0;let n=(t.get("shapes")||[]).find(o=>o.id==e);if(n){this.cropToRoi(n);let o=t.get("shapes").find(l=>l.id==n.textId);if(o){let l=(this.get("labels")||[]).find(h=>h.inset==!0);if(l){var i=this.get_label_key(l),r=o.text;if(l.text!==r){l.text=r;var s={};s[i]=l,this.edit_labels(s),this.trigger("change:labels")}}}}this.silenceTriggers=!1},handleZoomPanChange(t,e){var n=t.get("insetRoiId"),i=t.get("labels").filter(s=>s.inset==!0);if(!n)return;let r=this.get("shapes");if(r&&(r=r.filter(s=>s.type=="Rectangle"&&s.id==n),r.length>0)){this.silenceTriggers=!0;let s=this.get("shapes");if(e){if(figureModel.panels.filter(l=>l.get("insetRoiId")==n).length==0){let l=s.filter(h=>h.id==n);s=s.filter(h=>h.id!=n&&h.id!=l[0].textId),this.save("lastInsetTextIndex",this.get("lastInsetTextIndex")-1)}this.save("shapes",s)}else{let o=t.getViewportAsRect(),l=-1,h={};s=s.map(p=>p.type=="Rectangle"&&p.id==n?(l=p.textId,h={x:p.x,y:p.y,rotation:p.rotation||0,width:p.width,height:p.height},{...p,...o}):p),s=s.map(p=>{if(p.type=="Text"&&p.id==l){let m=p,y={x:m.x,y:m.y};if(h.rotation&&h.rotation!=360){let E=h.x+h.width/2,C=h.y+h.height/2;y=qr(y.x,y.y,E,C,360-h.rotation)}if(y.x<h.x+h.width/2?y.x+=o.x-h.x:y.x+=o.x+o.width-(h.x+h.width),y.y<h.y+h.height/2?y.y+=o.y-h.y:y.y+=o.y+o.height-(h.y+h.height),o.rotation!=0){let E=o.x+o.width/2,C=o.y+o.height/2;y=qr(y.x,y.y,E,C,o.rotation)}if(i&&i[0])i[0].text!==m.text&&(m.text=i[0].text.replaceAll("*",""));else return;return{...m,...y}}return p}),s=s.filter(p=>p!==void 0),this.save("shapes",s),this.trigger("change:shapes")}this.silenceTriggers=!1}},getLastInsetTextIndex:function(){return this.get("lastInsetTextIndex")},setLastInsetTextIndex:function(t){this.save("lastInsetTextIndex",t)},parse:function(t,e){var n=t.rdefs.model==="greyscale";return delete t.rdefs,t.channels=t.channels.map(function(i){return i.lut&&(i.lut.length>0&&(i.color=i.lut),delete i.lut),n&&i.active&&(i.color="FFFFFF"),i}),t},syncOverride:!0,validate:function(t,e){if(t.theT>=t.sizeT)return"theT too big";if(t.theT<0)return"theT too small";if(t.theZ>=t.sizeZ)return"theZ too big";if(t.theZ<0)return"theZ too small";if(t.z_start!==void 0&&(t.z_start<0||t.z_start>=t.sizeZ))return"z_start out of Z range";if(t.z_end!==void 0&&(t.z_end<0||t.z_end>=t.sizeZ))return"z_end out of Z range"},setId:function(t){var e={imageId:t.imageId,name:t.name,pixelsType:t.pixelsType,pixel_range:t.pixel_range,sizeZ:t.sizeZ,sizeT:t.sizeT,orig_width:t.orig_width,orig_height:t.orig_height,datasetName:t.datasetName,datasetId:t.datasetId,pixel_size_x:t.pixel_size_x,pixel_size_y:t.pixel_size_y,pixel_size_z:t.pixel_size_z,pixel_size_x_symbol:t.pixel_size_x_symbol,pixel_size_z_symbol:t.pixel_size_z_symbol,pixel_size_x_unit:t.pixel_size_x_unit,pixel_size_z_unit:t.pixel_size_z_unit,deltaT:t.deltaT};this.get("theT")>=e.sizeT&&(e.theT=e.sizeT-1),this.get("theZ")>=e.sizeZ&&(e.theZ=e.sizeZ-1),Math.abs(this.get("dx"))>e.orig_width/2&&(e.dx=0),Math.abs(this.get("dy"))>e.orig_height/2&&(e.dy=0);var n=[],i=this.get("channels"),r=t.channels;De.each(r,function(s,o){var l=A.extend(!0,{},r[o]);l.active=o<i.length&&i[o].active,o<i.length&&(l.color=""+i[o].color),n.push(l)}),e.channels=n,this.set(e)},hide_scalebar:function(){var t=A.extend(!0,{},this.get("scalebar"));t.show=!1,this.save("scalebar",t)},save_scalebar:function(t){var e=A.extend(!0,{},this.get("scalebar")||{}),n=A.extend(!0,e,t);this.save("scalebar",n)},hide_colorbar:function(){var t=A.extend(!0,{},this.get("colorbar"));t.show=!1,this.save("colorbar",t)},save_colorbar:function(t){var e=A.extend(!0,{},this.get("colorbar")||{}),n=A.extend(!0,e,t);this.save("colorbar",n)},show_border:function(t,e){var n={color:"#"+t,strokeWidth:e,showBorder:!0};this.save("border",n)},remove_border:function(){this.setBorderAttr("showBorder",!1)},setBorderColor:function(t){this.setBorderAttr("color","#"+t)},setBorderStrokeWidth:function(t){this.setBorderAttr("strokeWidth",t)},setBorderAttr:function(t,e){var n=this.get("border");if(n!=null){var i={};i[t]=e;var r=A.extend(!0,{},n,i);this.save("border",r)}},is_shape_in_viewport:function(t,e){var n=e,i=function(o,l){return!(o<n.x||l<n.y||o>n.x+n.width||l>n.y+n.height)},r;if(t.type==="Ellipse"||t.type==="Point"?r=[[t.cx,t.cy]]:t.type==="Rectangle"?r=[[t.x,t.y],[t.x,t.y+t.height],[t.x+t.width,t.y],[t.x+t.width,t.y+t.height]]:t.type==="Line"||t.type==="Arrow"?r=[[t.x1,t.y1],[t.x2,t.y2],[(t.x1+t.x2)/2,(t.y1+t.y2)/2]]:t.type==="Polyline"||t.type==="Polygon"?r=t.points.split(" ").map(function(o){return o.split(",")}):t.type==="Text"&&(r=[[t.x,t.y]]),r){for(var s=0;s<r.length;s++)if(i(r[s][0],r[s][1]))return!0}return!1},setROIStrokeWidth:function(t){this.setROIAttr("strokeWidth",t)},setROIColor:function(t){this.setROIAttr("strokeColor","#"+t)},setROIAttr:function(t,e){var n=this.get("shapes");if(!(!n||n.length===0)){var i=[];n.forEach(function(r){var s={};s[""+t]=e,i.push(A.extend(!0,{},r,s))}),this.save("shapes",i)}},rotatePanel90(){var t=this.get("rotation")||"0",e=(parseInt(t)+90)%360,n=this.getViewportAsRect(),i=this.get("width"),r=this.get("height"),s=this.get("orig_width")/n.height,o=this.get("orig_height")/n.width,l=Math.min(s,o)*100;return this.save({rotation:e,height:i,width:r,zoom:l}),e},add_shapes:function(t){var e=this.get("shapes"),n=this.getViewportAsRect(),i=this,r=!0,s=[];return e&&e.forEach(function(o){s.push(A.extend(!0,{},o))}),t.forEach(function(o){i.is_shape_in_viewport(o,n)?s.push(A.extend(!0,{},o)):r=!1}),this.save("shapes",s),r},add_labels:function(t){for(var e=this.get("labels"),n=[],i=[],r=0;r<e.length;r++){var s=e[r],o=this.get_label_key(s);i.push(o),n.push(A.extend(!0,{},s))}for(var l=0;l<t.length;l++){var s=t[l],o=this.get_label_key(s);i.includes(o)||n.push(A.extend(!0,{},s))}this.save("labels",n)},create_labels_from_channels:function(t){var e=[];De.each(this.get("channels"),function(n){if(n.active){var i=n.color.endsWith("lut")?"BBBBBB":n.color;e.push({text:n.label.replaceAll("_","\\_"),size:t.size,position:t.position,color:t.color||i})}}),this.add_labels(e)},get_channels_label_text:function(){var t="";return De.each(this.get("channels"),function(e){e.active&&(t===""?t=e.label:t=t+" "+e.label)}),t?t.replaceAll("_","\\_"):" "},getDeltaT:function(){var t=this.get("theT");return this.get("deltaT")[t]||0},get_time_label_text:function(t,e,n){var i=function(F){var X=F+"";return X.length===1?"0"+X:X},r=this.get("theT"),s=this.get("deltaT")[r]||0,o="",l,h,p,m;if(e){m=parseInt(e);var y=this.get("deltaT")[m-1];s=y==null?s:s-y}var E=s<0;s=Math.abs(s);var C=n>0?n+3:2;if(t==="index")E=!1,!isNaN(m)&&this.get("deltaT")[m-1]!=null?o=""+(r-m+1):o=""+(r+1);else if(["milliseconds","ms"].includes(t))o=(s*1e3).toFixed(n)+" ms";else if(["seconds","secs","s"].includes(t))o=s.toFixed(n)+" s";else if(["minutes","mins","m"].includes(t))o=(s/60).toFixed(n)+" mins";else if(["mins:secs","m:s"].includes(t))h=parseInt(s/60),p=(s%60).toFixed(n).padStart(C,"0"),o=h+":"+p;else if(["hrs:mins","h:m"].includes(t))l=parseInt(s/3600),h=(s%3600/60).toFixed(n).padStart(C,"0"),o=l+":"+h;else if(["hrs:mins:secs","h:m:s"].includes(t))l=parseInt(s/3600),h=i(parseInt(s%3600/60)),p=(s%60).toFixed(n).padStart(C,"0"),o=l+":"+h+":"+p;else return"";var N=n>0?"."+"0".repeat(n):"";return["0"+N+" s","0"+N+" mins","0:00"+N,"0:00:00"+N].indexOf(o)>-1&&(E=!1),(E?"-":"")+o},get_zoom_label_text:function(){var t=""+Math.round(this.get("zoom"))+" %";return t},get_name_label_text:function(t,e){var n="";if(t==="image"){if(e==="id")n=""+this.get("imageId");else if(e==="name"){var i=this.get("name").split("/");n=i[i.length-1]}}else t==="dataset"&&(e==="id"?n=""+this.get("datasetId"):e==="name"&&(n=this.get("datasetName")?this.get("datasetName"):"No/Many Datasets"));return n},get_view_label_text:function(t,e,n,i){e==="px"&&(e="pixel"),t==="w"?t="width":t==="h"?t="height":t==="rot"&&(t="rotation");var r=this.get("pixel_size_x_symbol"),s=this.get("pixel_size_z_symbol");s=s||r;var o=this.get("pixel_size_x"),l=this.get("pixel_size_y"),h=this.get("pixel_size_z");h=h||0,o=o||0,l=l||0,i=parseInt(i),i=i??2;var p="";if(t==="z"){if(this.get("z_projection")){var m=this.get("z_start"),y=this.get("z_end");e==="pixel"?p=""+(m+1)+" - "+(y+1):e==="unit"&&(m=(m*h).toFixed(i),y=(y*h).toFixed(i),p=""+m+" "+s+" - "+y+" "+s)}else{var E=this.get("theZ"),C=E,N;n&&(N=parseInt(n)),isNaN(N)||(C=E-N),e==="pixel"?p=""+(C+1):e==="unit"&&(p=""+(C*h).toFixed(i)+" "+s)}return p}var F=this.getViewportAsRect()[t];if(t==="rotation")return""+parseInt(F)+"";if(e==="pixel")return""+parseInt(F);if(e==="unit"){var X=["x","width"].includes(t)?o:l;p=""+(F*X).toFixed(i)+" "+r}return p},get_label_key:function(t){var e=t.text+"_"+t.size+"_"+t.color+"_"+t.position;return e=De.escape(e),e},edit_labels:function(t){for(var e=this.get("labels"),n=[],i,r,s=0;s<e.length;s++)if(i=e[s],r=this.get_label_key(i),t.hasOwnProperty(r)){if(t[r]){var o=t[r];i.inset&&(o.inset=!0),i=A.extend(!0,{},o),n.push(i)}}else i=A.extend(!0,{},i),n.push(i);var l=n.map(p=>this.get_label_key(p)),h=n.filter((p,m)=>m==l.indexOf(this.get_label_key(p)));this.save("labels",h)},save_channel:function(t,e,n){for(var i=this.get("channels"),r=[],s=0;s<i.length;s++)r.push(A.extend(!0,{},i[s]));r[t][e]=n,this.save("channels",r)},save_channels:function(t){this.get("channels");var e=this.get("channels").map((n,i)=>A.extend(!0,{},n,t[i]));this.save("channels",e)},toggle_channel:function(t,e){if(typeof e>"u"&&(e=!this.get("channels")[t].active),this.get("hilo_enabled")&&e){let n=this.get("channels").map(function(i,r){return{active:r==t}});this.save_channels(n)}else this.save_channel(t,"active",e)},save_channel_window:function(t,e){var n=A.extend(!0,{},this.get("channels")[t].window);e=A.extend(!0,n,e),this.save_channel(t,"window",e)},set_z_projection:function(t){var e=this.get("z_projection"),n=this.get("z_start"),i=this.get("z_end"),r=this.get("sizeZ"),s=this.get("theZ"),o=2;t&&!e&&r>1?(n!==void 0&&i!==void 0&&(o=(i-n)/2,o=Math.round(o)),n=Math.max(s-o,0),i=Math.min(s+o,r-1),this.set({z_projection:!0,z_start:n,z_end:i})):!t&&e&&(n!==void 0&&i!==void 0?(s=Math.round((i+n)/2),this.set({z_projection:!1,theZ:s})):this.set("z_projection",!1))},isMaxProjectionBytesExceeded:function(){let t=4;this.get("pixel_range")&&(t=Math.ceil(Math.log2(this.get("pixel_range")[1])/8));let e=this.get("channels").length,n=this.get("orig_width")*this.get("orig_height")*this.get("sizeZ");return t*e*n>MAX_PROJECTION_BYTES},isMaxProjectionExceeded:function(){return this.get("z_projection")&&this.isMaxProjectionBytesExceeded()},multiselectdrag:function(t,e,n,i,r,s,o,l,h){var p=function(F){return(F-t)/n*o+r},m=function(F){return(F-e)/i*l+s},y=p(this.get("x")),E=m(this.get("y")),C=p(this.get("x")+this.get("width"))-y,N=m(this.get("y")+this.get("height"))-E;h?this.save({x:y,y:E,width:C,height:N}):this.trigger("drag_resize",[y,E,C,N])},cropToRoi:function(t){var e=t.width/t.height,n=this.get("width")/this.get("height"),i,r,s=t.x+t.width/2,o=t.y+t.height/2,l=this.get("orig_width")/2-s,h=this.get("orig_height")/2-o;e<n?(r=this.get("height"),i=e*r):(i=this.get("width"),r=i/e);var p=this.get("orig_width")/t.width,m=this.get("orig_height")/t.height,y=Math.min(p,m)*100,E={width:i,height:r,dx:l,dy:h,zoom:y},C=t.rotation||0;isNaN(C)||(C=-(C-360),E.rotation=C),this.save(E)},getViewportAsRect:function(t,e,n){t=t!==void 0?t:this.get("zoom"),e=e!==void 0?e:this.get("dx"),n=n!==void 0?n:this.get("dy");var i=this.get("rotation");isNaN(i)&&(i=0),i=360-i;var r=this.get("width"),s=this.get("height"),o=this.get("orig_width"),l=this.get("orig_height"),h=r/o,p=s/l,m=Math.max(h,p),y=o/l,E=r/s;if(e===0&&n===0&&t==100&&Math.abs(y-E)<.01)return{x:0,y:0,width:o,height:l,rotation:i};m=m*t/100;var C=r/m,N=s/m,F=o/2-e,X=l/2-n,G=F-C/2,V=X-N/2;return{x:G,y:V,width:C,height:N,rotation:i}},drag_resize:function(t,e,n,i){this.trigger("drag_resize",[t,e,n,i])},drag_xy:function(t,e,n){if(!(t===0&&e===0)){var i=this.get("x")+t,r=this.get("y")+e,s=this.get("width"),o=this.get("height");return n?this.save({x:i,y:r}):this.trigger("drag_resize",[i,r,s,o]),{x:i,y:r}}},get_centre:function(){return{x:this.get("x")+this.get("width")/2,y:this.get("y")+this.get("height")/2}},is_big_image:function(){return this.get("orig_width")*this.get("orig_height")>MAX_PLANE_SIZE},get_zarr_img_src:async function(t){var e;if(this.is_big_image()&&(e=this.getViewportAsRect(),!t)){var n=Math.max(e.width,e.height)*1.5;e.x=e.x-(n-e.width)/2,e.y=e.y-(n-e.height)/2,e.width=n,e.height=n}return qv(this.get("imageId"),this.get("zarr"),this.get("theZ"),this.get("theT"),this.get("channels"),e)},get_img_src:async function(t){if(this.get("zarr"))return this.get_zarr_img_src(t);var e=this.get("channels"),n=e.map(function(F,X){return(F.active?"":"-")+(1+X)+"|"+F.window.start+":"+F.window.end+"$"+F.color}),i=e.map(function(F){return{reverse:{enabled:!!F.reverseIntensity}}}),r=n.join(","),s=this.get("imageId"),o=this.get("theZ"),l=this.get("theT"),h=this.get("baseUrl"),p="&maps="+JSON.stringify(i).replace(/ /g,""),m="";this.get("z_projection")&&(m="&p=intmax|"+this.get("z_start")+":"+this.get("z_end")),h=h||WEBGATEWAYINDEX.slice(0,-1);var y="";if(this.isMaxProjectionExceeded())h=BASE_WEBFIGURE_URL+"max_projection_range_exceeded/";else if(this.is_big_image()){h=BASE_WEBFIGURE_URL+"render_scaled_region/";var E=this.getViewportAsRect();if(!t){var C=Math.max(E.width,E.height)*1.5;E.x=E.x-(C-E.width)/2,E.y=E.y-(C-E.height)/2,E.width=C,E.height=C}var N=[E.x,E.y,E.width,E.height].map(function(F){return parseInt(F)});y="&region="+N.join(",")}else h+="/render_image/";return h+s+"/"+o+"/"+l+"/?c="+r+m+p+y+"&m=c"},_viewport_css:function(t,e,n,i,r,s,o){var l=100*(r/2-t)/n,h=100*(s/2-e)/i;o==null&&(o=this.get("rotation")||0);var p=this.get("vertical_flip")?-1:1,m=this.get("horizontal_flip")?-1:1,y={left:t,top:e,width:n,height:i,"-webkit-transform-origin":l+"% "+h+"%","transform-origin":l+"% "+h+"%","-webkit-transform":"scaleX("+m+") scaleY("+p+") rotate("+o+"deg)",transform:"scaleX("+m+") scaleY("+p+") rotate("+o+"deg)"};return y},get_vp_img_css:function(t,e,n,i,r){return this.isMaxProjectionExceeded()?{left:0,top:(n-e)/2,width:e,height:e}:this.is_big_image()?this.get_vp_big_image_css(t,e,n,i,r):this.get_vp_full_plane_css(t,e,n,i,r)},get_vp_big_image_css:function(t,e,n,i,r){var s=Math.abs(t-this.get("zoom"))>1,o=i!==void 0&&r!==void 0,l=Math.max(e,n)*1.5,h,p,m=l,y=l;if(s)return m=l*t/this.get("zoom"),y=l*t/this.get("zoom"),p=r||(n-y)/2,h=i||(e-m)/2,this._viewport_css(h,p,m,y,e,n);h=(e-l)/2,p=(n-l)/2;var E=parseInt(this.get("width"),10),C=parseInt(this.get("height"),10);e=parseInt(e),n=parseInt(n);var N=E!==m||C!==y;return N&&(p=(n-y)/2,h=(e-m)/2,o&&(h+=i,p+=r)),this._viewport_css(h,p,m,y,e,n)},get_vp_full_plane_css:function(t,e,n,i,r){var s=i,o=r,l=this.get("orig_width"),h=this.get("orig_height");typeof s>"u"&&(s=this.get("dx")),typeof o>"u"&&(o=this.get("dy")),t=t||100;var p=0,m=0,y=e*(t/100),E=n*(t/100),C=l/h,N=e/n;Math.abs(C-N)<.01||(C<N?E=y/C:y=E*C);var F=e/l,X=n/h,G=Math.max(F,X);return m=(E-n)/2,p=(y-e)/2,s=s*(t/100),o=o*(t/100),p=s*G-p,m=o*G-m,this._viewport_css(p,m,y,E,e,n)},getPanelDpi:function(t,e,n){t=t||this.get("width"),e=e||this.get("height"),n=n||this.get("zoom");var i=this.get_vp_full_plane_css(n,t,e).width,r=this.get("orig_width"),s=r/i,o=s*72;return o.toFixed(0)},getBoundingBoxTop:function(){var t=this.get("labels"),e=this.get("y"),n=t.filter(function(h){return h.position==="top"}),i=0;i=n.reduce(function(h,p){return h+ka*p.size},i);var r=this.get("border");r&&r.showBorder&&(i=i+r.strokeWidth);var s=0,o=this.get("colorbar");if(o&&o.show){var l=Number(o.font_size);o.position=="top"?(s=o.gap+o.thickness+l+o.mark_len+o.tick_margin,s=Math.max(0,s)):(o.position=="left"||o.position=="right")&&(s=l/2)}return e-Math.max(i,s)},getBoundingBoxLeft:function(){var p,m;var t=this.get("labels"),e=this.get("x"),n=t.filter(function(y){return y.position==="leftvert"}),i=0;i=n.reduce(function(y,E){return y+ka*E.size},i),n=t.filter(function(y){return y.position==="left"});for(const y of n){const E=this.measureTextSize(y.text,y.size+"px");i=Math.max(i,E)}var r=this.get("border");r&&r.showBorder&&(i=i+r.strokeWidth);var s="",o="";for(const y of this.get("channels"))if(y.active){s=(p=y.window)==null?void 0:p.start,o=(m=y.window)==null?void 0:m.end;break}var l=0,h=this.get("colorbar");if(h&&h.show){let y=Math.max(0,Math.ceil(-Math.log10((o-s)/h.num_ticks)));if(s=s.toFixed(y),o=o.toFixed(y),h.position=="left"){const E=this.measureTextSize(o,h.font_size+"px");l=h.gap+h.thickness+E+h.mark_len+h.tick_margin,l=Math.max(0,l)}else(h.position=="top"||h.position=="bottom")&&(l=this.measureTextSize(s,h.font_size+"px"),l=l/2)}return e-Math.max(i,l)},getBoundingBoxRight:function(){var p,m;var t=this.get("labels"),e=this.get("x")+this.get("width"),n=t.filter(function(y){return y.position==="rightvert"}),i=0;i=n.reduce(function(y,E){return y+ka*E.size},i),n=t.filter(function(y){return y.position==="right"});for(const y of n){const E=this.measureTextSize(y.text,y.size+"px");i=Math.max(i,E)}var r=this.get("border");r&&r.showBorder&&(i=i+r.strokeWidth);var s="",o="";for(const y of this.get("channels"))if(y.active){s=(p=y.window)==null?void 0:p.start,o=(m=y.window)==null?void 0:m.end;break}var l=0,h=this.get("colorbar");if(h&&h.show){let y=Math.max(0,Math.ceil(-Math.log10((o-s)/h.num_ticks)));if(s=s.toFixed(y),o=o.toFixed(y),h.position=="right"){const E=this.measureTextSize(o,h.font_size+"px");l=h.gap+h.thickness+E+h.mark_len+h.tick_margin,l=Math.max(0,l)}else(h.position=="top"||h.position=="bottom")&&(l=this.measureTextSize(o,h.font_size+"px"),l=l/2)}return e+Math.max(i,l)},getBoundingBoxBottom:function(){var t=this.get("labels"),e=this.get("y")+this.get("height"),n=t.filter(function(h){return h.position==="bottom"}),i=0;i=n.reduce(function(h,p){return h+ka*p.size},i);var r=this.get("border");r&&r.showBorder&&(i=i+r.strokeWidth);var s=0,o=this.get("colorbar");if(o&&o.show){var l=Number(o.font_size);o.position=="bottom"?(s=o.gap+o.thickness+l+o.mark_len+o.tick_margin,s=Math.max(0,s)):(o.position=="left"||o.position=="right")&&(s=l/2)}return e+Math.max(i,s)},measureTextSize:function(t,e){var n="bs-font-sans-serif",i=document.createElement("canvas"),r=i.getContext("2d");r.font=`${e} ${n}`;var s=r.measureText(t);return r=null,i=null,s.width},regionOverlaps:function(t){var e=this.get("x"),n=e+this.get("width"),i=this.get("y"),r=i+this.get("height"),s=t.x,o=s+t.width,l=t.y,h=l+t.height;return e<o&&s<n&&i<h&&l<r}}),nd=dt.Collection.extend({model:td,getSelected:function(){var t=this.filter(function(e){return e.get("selected")});return new nd(t)},getAverage:function(t){return this.getSum(t)/this.length},getAverageWH:function(){var t=this.reduce(function(e,n){return e+n.get("width")/n.get("height")},0);return t/this.length},getSum:function(t){return this.reduce(function(e,n){return e+(n.get(t)||0)},0)},getMax:function(t){return this.reduce(function(e,n){return Math.max(e,n.get(t))},0)},getMin:function(t){return this.reduce(function(e,n){return Math.min(e,n.get(t))},1/0)},allTrue:function(t){return this.reduce(function(e,n){return e&&n.get(t)},!0)},allEqual:function(t){var e=this.pluck(t);return De.max(e)===De.min(e)},getIfEqual:function(t){var e=this.pluck(t);if(De.max(e)===De.min(e))return De.max(e)},getDeltaTIfEqual:function(){var t=this.map(function(e){return e.getDeltaT()});if(De.max(t)===De.min(t))return De.max(t)},createLabelsFromTags:function(t){var e=this.map(function(i){return i.get("imageId")});e="image="+e.join("&image=");var n=WEBINDEX_URL+"api/annotations/?type=tag&parents=true&limit=1000&"+e;A.getJSON(n,(function(i){i.hasOwnProperty("parents")&&i.parents.annotations.forEach(function(s){let o=s.link.parent.class,l=""+s.link.parent.id,h=i.parents.lineage[o][l];for(let p=0;p<h.length;p++){let m=JSON.parse(JSON.stringify(s));m.link.parent.id=h[p].id,i.annotations.push(m)}});var r=i.annotations.reduce(function(s,o){var l=o.link.parent.id;return s[l]||(s[l]={}),s[l][o.id]=o.textValue.replaceAll("_","\\_"),s},{});this.forEach(function(s){var o=s.get("imageId"),l=De.values(r[o]).map(function(h){return{text:h,size:t.size,position:t.position,color:t.color}});s.add_labels(l)})}).bind(this))}}),t3=9,Oi=dt.Model.extend({defaults:{canEdit:!0,unsaved:!1,canvas_width:13e3,canvas_height:8e3,paper_width:595,paper_height:842,page_color:"FFFFFF",page_count:1,page_col_count:1,paper_spacing:50,orientation:"vertical",page_size:"A4",width_mm:210,height_mm:297,legend:"",legend_collapsed:!0,loading_count:0},initialize:function(){this.panels=new nd,this.panels.on("add",t=>{t.setFigureModel(this)}),this.notifySelectionChange=De.debounce(this.notifySelectionChange,10)},syncOverride:function(t,e,n,i){this.set("unsaved",!0)},load_from_OMERO:function(t,e){var n=BASE_WEBFIGURE_URL+"load_web_figure/"+t+"/",i=this;ns(n).then(r=>{r.fileId=t,i.load_from_JSON(r),i.set("unsaved",!1)})},load_from_JSON:function(t){var e=this;t=e.version_transform(t);var n=t.figureName||"UN-NAMED",i={fileId:t.fileId,figureName:n,groupId:t.group?t.group.id:void 0,canEdit:t.canEdit,paper_width:t.paper_width,paper_height:t.paper_height,width_mm:t.width_mm,height_mm:t.height_mm,page_size:t.page_size||"A4",page_count:t.page_count,paper_spacing:t.paper_spacing,page_col_count:t.page_col_count,orientation:t.orientation,legend:t.legend,legend_collapsed:t.legend_collapsed,page_color:t.page_color};i=A.extend({},e.defaults,i),e.set(i),De.each(t.panels,function(r){r.selected=!1,e.panels.create(r)}),setTimeout(function(){e.trigger("reset_undo_redo")},50)},version_transform:function(t){var e=t.version||0,n=this;if(e<1&&De.each(t.panels,function(o){var l=o.pixel_size;o.pixel_size_x=l,o.pixel_size_y=l,delete o.pixel_size}),e<2&&(console.log("Transforming to VERSION 2"),De.each(t.panels,function(o){o.shapes&&(o.shapes=o.shapes.map(function(l){return l.type==="Ellipse"&&(l.x=l.cx,l.y=l.cy,l.radiusX=l.rx,l.radiusY=l.ry,delete l.cx,delete l.cy,delete l.rx,delete l.ry),l}))})),e<3&&(console.log("Transforming to VERSION 3"),De.each(t.panels,function(o){if(o.export_dpi&&(o.min_export_dpi=o.export_dpi,delete o.export_dpi),o.shapes&&o.shapes.length>0){var l=new td(o),h=l.getViewportAsRect().width,p=l.get("width"),m=p/h;o.shapes=o.shapes.map(function(y){var E=y.strokeWidth||1;return E=E*m,E>.875?E=parseInt(Math.round(E)):E>.625?E=.75:E>.375?E=.5:E=.25,y.strokeWidth=E,y})}})),e<4&&(console.log("Transforming to VERSION 4"),De.each(t.panels,function(o){o.shapes&&o.shapes.length>0&&(o.shapes=o.shapes.map(function(l){return l.strokeWidth=l.strokeWidth||l.lineWidth||1,l.lineWidth&&delete l.lineWidth,l}))})),e<5){console.log("Transforming to VERSION 5"),De.each(t.panels,function(o){if(o.scalebar&&!o.scalebar.units){var l=o.pixel_size_x_unit||"MICROMETER";o.scalebar.units=l}});var i=[];if(De.each(t.panels,function(o){o.deltaT&&i.indexOf(o.imageId)==-1&&i.push(o.imageId)}),console.log("Load timestamps for images",i),i.length>0){var r=BASE_WEBFIGURE_URL+"timestamps/";r+="?image="+i.join("&image="),A.getJSON(r,function(o){n.panels.forEach(function(l){var h=l.get("imageId");o[h]&&o[h].length>0&&l.set("deltaT",o[h])})})}}if(e<6){console.log("Transforming to VERSION 6");var i=[];if(De.each(t.panels,function(l){i.indexOf(l.imageId)==-1&&i.push(l.imageId)}),i.length>0){let l=BASE_WEBFIGURE_URL+"z_scale/";l+="?image="+i.join("&image="),A.getJSON(l,function(h){n.panels.forEach(function(p){var m=p.get("imageId");h[m]&&(p.set("pixel_size_z",h[m].valueZ),p.set("pixel_size_z_symbol",h[m].symbolZ),p.set("pixel_size_z_unit",h[m].unitZ))})})}De.each(t.panels,function(l){for(var h=0;h<l.labels.length;h++){const p=l.labels[h];p.time&&(p.text="[time."+p.time+"]",delete p.time)}})}if(e<7&&(console.log("Transforming to VERSION 7"),De.each(t.panels,function(o){o.scalebar&&!o.scalebar.height&&(o.scalebar.height=3)})),e<8){console.log("Transforming to VERSION 8");var i=t.panels.map(l=>l.imageId);if(console.log("Load pixelsType for images",i),i.length>0){var s=BASE_WEBFIGURE_URL+"pixels_type/";s+="?image="+i.join("&image="),ns(s).then(l=>{n.panels.forEach(function(h){var p=h.get("imageId");l[p]&&h.set({pixelsType:l[p].pixelsType,pixel_range:l[p].pixel_range})})})}}return e<9&&(console.log("Transforming to VERSION 9"),De.each(t.panels,function(o){o.scalebar&&o.scalebar.margin==null&&(o.scalebar.margin=10)})),t},figure_toJSON:function(){var t=[];this.panels.each(function(n){t.push(n.toJSON())});var e={version:t3,panels:t,paper_width:this.get("paper_width"),paper_height:this.get("paper_height"),page_size:this.get("page_size"),page_count:this.get("page_count"),paper_spacing:this.get("paper_spacing"),page_col_count:this.get("page_col_count"),height_mm:this.get("height_mm"),width_mm:this.get("width_mm"),orientation:this.get("orientation"),legend:this.get("legend"),legend_collapsed:this.get("legend_collapsed"),page_color:this.get("page_color")};return this.get("figureName")&&(e.figureName=this.get("figureName")),this.get("fileId")&&(e.fileId=this.get("fileId")),e},load_from_url:function(t){console.log("load_from_url...",t),A.getJSON(t,(function(e){this.load_from_JSON(e),this.set("unsaved",!1)}).bind(this)).fail(function(){alert("Failed to load figure from URL: "+t)})},figure_fromJSON:function(t){var e=JSON.parse(t);delete e.fileId,this.load_from_JSON(e),this.set("unsaved",!0)},recoverFromLocalStorage:function(){var t=ed();if(t){this.figure_fromJSON(JSON.stringify(t)),Qf();var n=`<p>This figure has been recovered from the browser's local storage and
                        the local storage cleared.</p>`;Zi("Figure recovered",n,["OK"])}else{var e="No valid figure was found in local storage.";Zi("No Figure found",e,["OK"])}},save_to_download:function(t){let e=this.figure_toJSON();t.figureName&&(e.figureName=t.figureName);let n=e.figureName||"figure",i=JSON.stringify(this.figure_toJSON());e3(i,"application/json",n+".json"),this.set({unsaved:!1})},save_to_OMERO:function(t){var e=this,n=this.figure_toJSON(),i=BASE_OMEROWEB_URL+"figure/save_web_figure/",r={};t.fileId&&(r.fileId=t.fileId),t.figureName&&(n.figureName=t.figureName),r.figureJSON=JSON.stringify(n),A.post(i,r).done(function(s){var o={fileId:+s,unsaved:!1};t.figureName&&(o.figureName=t.figureName),e.set(o),t.success&&t.success(s)}).fail(function(s){console.log("Save Error",s.responseText),Kv(n);var o=`Save Error: ${s.status}`,l=`
                        <p>The current figure has failed to Save to OMERO.</p>
                        <p>A copy has been placed in your browser's local storage for this session
                        and can be recovered with File > Local Storage or by reloading the app.</p>
                        <p>Reloading will also check your connection to OMERO.</p>
                    `,h=["Close","Reload in new Tab"],p=function(m){if(m==="Reload in new Tab"){var y=BASE_WEBFIGURE_URL+"recover/";window.open(y,"_blank")}};Zi(o,l,h,p)})},clearFigure:function(){var t=this;t.unset("fileId"),t.unset("groupId"),t.delete_panels(),t.unset("figureName"),t.set(t.defaults),t.trigger("reset_undo_redo")},checkSaveAndClear:function(t,e){var n=this,i=function(){n.clearFigure(),t&&t()};if(n.get("unsaved")){var r="Save",s=n.get("canEdit");s||(r="Save a Copy");let o=["Don't Save",r];e&&(o=["Canel"].concat(o)),Zi("Save Changes to Figure?","Your changes will be lost if you don't save them",o,function(l){if(l===r){var h={},p=n.get("fileId");if(p&&s)h.fileId=p;else{var m=n.getDefaultFigureName(),y=prompt("Enter Figure Name",m);h.figureName=y||m}h.success=i,n.save_to_OMERO(h)}else l==="Don't Save"&&(n.set("unsaved",!1),i())})}else i()},addImages:function(t){this.clearSelected();for(var e=this.get("paper_width"),n=this.get("paper_height"),i=Math.ceil(Math.sqrt(t.length)),r=Math.ceil(t.length/i),s={x:e/2,y:n/2},o,l,h,p={px:o,py:l,c:s,spacer:h,colCount:i,rowCount:r,paper_width:e},m=[],y=0;y<t.length;y++){if(console.log("Adding image",t[y]),t[y].includes(".zarr")){this.importZarrImage(t[y],p,y);continue}var E=t[y].replace("|",""),C=parseInt(E,10)+"",N=BASE_WEBFIGURE_URL+"imgData/"+C+"/";C=="NaN"?m.push(E):this.importImage(N,p,void 0,y)}if(m.length>0){var F=m.length>1?"s":"";alert("Could not add image with invalid ID"+F+": "+m.join(", "))}},updateCoordsAndPanelCoords(t,e,n){console.log("importZarrImage coords.spacer coords:",e.spacer,e),e.spacer=e.spacer||t.orig_width/20;var i=e.colCount*(t.orig_width+e.spacer)-e.spacer,r=e.rowCount*(t.orig_height+e.spacer)-e.spacer;e.scale=e.paper_width/(i+2*e.spacer),e.scale=Math.min(e.scale,1),e.px=e.px||e.c.x-i*e.scale/2,e.py=e.py||e.c.y-r*e.scale/2;var s=parseInt(n/e.colCount,10),o=n%e.colCount,l=e.px+(t.orig_width+e.spacer)*e.scale*o,h=e.py+(t.orig_height+e.spacer)*e.scale*s;t.x=l,t.y=h,t.width=t.orig_width*e.scale,t.height=t.orig_height*e.scale},importZarrImage:async function(t,e,n){this.set("loading_count",this.get("loading_count")+1);let i=await Yv(t);this.updateCoordsAndPanelCoords(i,e,n),this.set("loading_count",this.get("loading_count")-1),this.panels.create(i,{parse:!0}).set("selected",!0),this.notifySelectionChange()},importImage:function(t,e,n,i){var r=this;i==null&&(i=0),this.set("loading_count",this.get("loading_count")+1),fetch(t,{mode:"cors",credentials:"include",headers:{"Content-Type":"application/json"}}).then(o=>o.json()).then(o=>{if(console.log("data",o),r.set("loading_count",r.get("loading_count")-1),o.Exception||o.ConcurrencyException){message=o.Exception||"ConcurrencyException",alert(`Image loading from ${t} included an Error: ${message}`);return}var l={imageId:o.id,name:o.meta.imageName,width:o.size.width*e.scale,height:o.size.height*e.scale,sizeZ:o.size.z,theZ:o.rdefs.defaultZ,sizeT:o.size.t,theT:o.rdefs.defaultT,rdefs:{model:o.rdefs.model},channels:o.channels,orig_width:o.size.width,orig_height:o.size.height,x:0,y:0,datasetName:o.meta.datasetName,datasetId:o.meta.datasetId,pixel_size_x:o.pixel_size.valueX,pixel_size_y:o.pixel_size.valueY,pixel_size_z:o.pixel_size.valueZ,pixel_size_x_symbol:o.pixel_size.symbolX,pixel_size_z_symbol:o.pixel_size.symbolZ,pixel_size_x_unit:o.pixel_size.unitX,pixel_size_z_unit:o.pixel_size.unitZ,deltaT:o.deltaT,pixelsType:o.meta.pixelsType,pixel_range:o.pixel_range};n&&(l.baseUrl=n),r.updateCoordsAndPanelCoords(l,e,i),r.panels.create(l,{parse:!0}).set("selected",!0),r.notifySelectionChange()}).catch(o=>{alert("Image not found on the server, or you don't have permission to access it at "+t)})},getFigureSize:function(){var t=this.get("page_count"),e=this.get("page_col_count"),n=this.get("paper_spacing"),i=this.get("paper_width"),r=this.get("paper_height"),s;s=Math.ceil(t/e);var o=e*i+(e-1)*n,l=s*r+(s-1)*n;return{w:o,h:l,cols:e,rows:s}},getPageOffset:function(t){var e=this.get("paper_spacing"),n=this.get("paper_width"),i=this.get("paper_height"),r=e+n,s=e+i,o={};return t.x!==void 0&&(o.x=t.x%r),t.y!==void 0&&(o.y=t.y%s),o},getDefaultFigureName:function(){const t=r=>`${r}`.padStart(2,"0");var e=new Date,n=[e.getFullYear(),t(e.getMonth()+1),t(e.getDate())].join("-"),i=[t(e.getHours()),t(e.getMinutes()),t(e.getSeconds())].join("-");return"Figure_"+n+"_"+i},nudge_right:function(){this.nudge("x",10)},nudge_left:function(){this.nudge("x",-10)},nudge_down:function(){this.nudge("y",10)},nudge_up:function(){this.nudge("y",-10)},nudge:function(t,e){var n=this.getSelected(),i;n.forEach(function(r){i=r.get(t),r.save(t,i+e)})},align_left:function(){var t=this.getSelected(),e=[];t.forEach(function(i){e.push(i.get("x"))});var n=Math.min.apply(window,e);t.forEach(function(i){i.save("x",n)})},align_right:function(){var t=this.getSelected(),e=[];t.forEach(function(i){e.push(i.get("x")+i.get("width"))});var n=Math.max.apply(window,e);t.forEach(function(i){i.save("x",n-i.get("width"))})},align_top:function(){var t=this.getSelected(),e=[];t.forEach(function(i){e.push(i.get("y"))});var n=Math.min.apply(window,e);t.forEach(function(i){i.save("y",n)})},align_bottom:function(){var t=this.getSelected(),e=[];t.forEach(function(i){e.push(i.get("y")+i.get("height"))});var n=Math.max.apply(window,e);t.forEach(function(i){i.save("y",n-i.get("height"))})},align_grid:function(t){for(var e=this.getSelected(),n=this.get_top_panel(e),i=this.get_left_panel(e),r=this.get_right_panel(e),s=this.get_bottom_panel(e),o=i.get("x"),l=r.get("x")+r.get("width"),h=n.get("y"),p=s.get("y")+s.get("height"),m=[],y=[],E,C={x:o+i.get("width")/2,y:h+n.get("height")/2};C.y<p;){for(y=[];C.x<l;)E=this.get_panel_at(C.x,C.y,e),E?(y.push(E),C=E.get_centre()):E=E??i,C={x:C.x+E.get("width"),y:C.y};y.length==0?C={x:o+i.get("width")/2,y:C.y+i.get("height")}:(C={x:o+i.get("width")/2,y:C.y+y[0].get("height")},m.push(y))}var N=0;m.forEach((Je,Ye)=>{Je.some(it=>it.cid===i.cid)&&(N=Ye)});var F=i.get("width")/20;isNaN(parseFloat(t))||(F=parseFloat(t));for(var X=o,G=i.get("y"),V=0,K=m[N],ae=0,de={},g=0,C=0;C<K.length;C++){let Ye=K[C];for(var H=Ye.get("x"),re=Math.floor(Math.abs(H-X)/ae),_e=0;_e<re;_e++)de[g]=X,X=X+F+ae,g++;Ye.save({x:X,y:G}),de[g]=X,V=Math.max(V,Ye.get("height")),X=X+F+Ye.get("width"),ae=Ye.get("width"),g++}var Te=V,ye={};V=0;for(var le=N-1;le>=0;le--){for(var y=m[le],C=0;C<y.length;C++)V=Math.max(V,y[C].get("height"));G=G-F-V,ye[le]=G}V=Te,G=i.get("y");for(var le=N+1;le<m.length;le++){var y=m[le];G=G+F+V,ye[le]=G;for(var C=0;C<y.length;C++)V=Math.max(V,y[C].get("height"))}for(var[le,Pe]of Object.entries(ye))for(var y=m[le],Le=-1,C=0;C<y.length;C++){let ft=y[C];var Ze=this.get_closest_column(ft,de,ae);if(Ze>=0)Le==Ze?(Ze=Le+1,Ze==de.length?X=de[Ze-1]+ae+F:X=de[Ze]):X=de[Ze];else{Le==de.length-1-Ze&&Ze--;var je=Object.keys(de).length-1;X=de[je]-Ze*(ae+F)}Le++,ft.save({x:X,y:Pe}),X=X+F+ft.get("width")}},get_closest_column:function(t,e,n){var i=0,r=Number.MAX_VALUE;for(var[s,o]of Object.entries(e)){var l=Math.abs(o-t.get("x"));l<r&&(i=s,r=l)}return i==Object.keys(e).length-1&&r>n&&(i=-Math.floor(r/n)),i},get_panel_at:function(t,e,n){return n.find(function(i){return i.get("x")<t&&i.get("x")+i.get("width")>t&&i.get("y")<e&&i.get("y")+i.get("height")>e})},get_top_left_panel:function(t){return t.reduce(function(e,n){return n.get("x")+n.get("y")<e.get("x")+e.get("y")?n:e})},get_top_panel:function(t){return t.reduce(function(e,n){return n.get("y")<e.get("y")?n:e})},get_bottom_panel:function(t){return t.reduce(function(e,n){return n.get("y")>e.get("y")?n:e})},get_left_panel:function(t){return t.reduce(function(e,n){return n.get("x")<e.get("x")?n:e})},get_right_panel:function(t){return t.reduce(function(e,n){return n.get("x")>e.get("x")?n:e})},align_size:function(t,e){var n=this.getSelected(),i=this.get_top_left_panel(n),r=t?i.get("width"):!1,s=e?i.get("height"):!1,o,l;n.forEach(function(h){r&&s?(o=r,l=s):r?(o=r,l=r/h.get("width")*h.get("height")):s&&(l=s,o=s/h.get("height")*h.get("width")),h.set({width:o,height:l})})},align_magnification:function(){var t=this.getSelected(),e=this.get_top_left_panel(t),n=e.get("pixel_size_x"),i;if(!n){alert("Top-left panel has no pixel size set");return}var r=function(s){var o=s.get("pixel_size_x_unit"),l=s.get("pixel_size_x");if(o==="MICROMETER")return{value:l};if(!l)return{value:l};var h=BASE_WEBFIGURE_URL+"unit_conversion/"+l+"/"+o+"/MICROMETER/";return A.getJSON(h)};A.when(r(e)).then(function(s){n=s.value,i=n*e.getPanelDpi(),t.forEach(function(o){o.cid!==e.cid&&A.when(r(o)).then(function(l){var h=o.getPanelDpi(),p=l.value;if(p){var m=h*p,y=m/i,E=o.get("width")*y,C=o.get("height")*y;o.set({width:E,height:C})}})})})},drag_xy:function(t,e,n){if(!(t===0&&e===0)){var i=1e4,r=1e4,s,o=this.getSelected();o.forEach(function(l){s=l.drag_xy(t,e,n),i=Math.min(i,s.x),r=Math.min(r,s.y)}),this.trigger("drag_xy",[i,r,n])}},multiselectdrag:function(t,e,n,i,r,s,o,l,h){var p=this.getSelected();p.forEach(function(m){m.multiselectdrag(t,e,n,i,r,s,o,l,h)})},setSelected:function(t,e){(!t.get("selected")||e)&&(this.clearSelected(!1),t.set("selected",!0),this.notifySelectionChange())},select_all:function(){this.panels.each(function(t){t.set("selected",!0)}),this.notifySelectionChange()},addSelected:function(t){t.set("selected",!0),this.notifySelectionChange()},clearSelected:function(t){this.panels.each(function(e){e.set("selected",!1)}),t!==!1&&this.notifySelectionChange()},selectByRegion:function(t){this.panels.each(function(e){e.regionOverlaps(t)&&e.set("selected",!0)}),this.notifySelectionChange()},getSelected:function(){return this.panels.getSelected()},deleteSelected:function(){for(var t=this.getSelected(),e;e=t.first();)e.destroy();this.notifySelectionChange()},delete_panels:function(){var t=[];this.panels.each(function(n){t.push(n)});for(var e=t.length-1;e>=0;e--)t[e].destroy();this.notifySelectionChange()},getCropCoordinates:function(){var t=10,e=Math.min.apply(window,this.panels.map(function(l){return l.getBoundingBoxTop()})),n=Math.min.apply(window,this.panels.map(function(l){return l.getBoundingBoxLeft()})),i=Math.max.apply(window,this.panels.map(function(l){return l.getBoundingBoxRight()})),r=Math.max.apply(window,this.panels.map(function(l){return l.getBoundingBoxBottom()})),s=t-n,o=t-e;return{paper_width:i-n+2*t,paper_height:r-e+2*t,dx:s,dy:o}},notifySelectionChange:function(){this.trigger("change:selection")}}),i1={exports:{}},dh;function n3(){return dh||(dh=1,function(t){(function(e,n,i){if(!e)return;for(var r={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},s={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},o={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},l={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},h,p=1;p<20;++p)r[111+p]="f"+p;for(p=0;p<=9;++p)r[p+96]=p.toString();function m(H,re,_e){if(H.addEventListener){H.addEventListener(re,_e,!1);return}H.attachEvent("on"+re,_e)}function y(H){if(H.type=="keypress"){var re=String.fromCharCode(H.which);return H.shiftKey||(re=re.toLowerCase()),re}return r[H.which]?r[H.which]:s[H.which]?s[H.which]:String.fromCharCode(H.which).toLowerCase()}function E(H,re){return H.sort().join(",")===re.sort().join(",")}function C(H){var re=[];return H.shiftKey&&re.push("shift"),H.altKey&&re.push("alt"),H.ctrlKey&&re.push("ctrl"),H.metaKey&&re.push("meta"),re}function N(H){if(H.preventDefault){H.preventDefault();return}H.returnValue=!1}function F(H){if(H.stopPropagation){H.stopPropagation();return}H.cancelBubble=!0}function X(H){return H=="shift"||H=="ctrl"||H=="alt"||H=="meta"}function G(){if(!h){h={};for(var H in r)H>95&&H<112||r.hasOwnProperty(H)&&(h[r[H]]=H)}return h}function V(H,re,_e){return _e||(_e=G()[H]?"keydown":"keypress"),_e=="keypress"&&re.length&&(_e="keydown"),_e}function K(H){return H==="+"?["+"]:(H=H.replace(/\+{2}/g,"+plus"),H.split("+"))}function ae(H,re){var _e,Te,ye,le=[];for(_e=K(H),ye=0;ye<_e.length;++ye)Te=_e[ye],l[Te]&&(Te=l[Te]),re&&re!="keypress"&&o[Te]&&(Te=o[Te],le.push("shift")),X(Te)&&le.push(Te);return re=V(Te,le,re),{key:Te,modifiers:le,action:re}}function de(H,re){return H===null||H===n?!1:H===re?!0:de(H.parentNode,re)}function g(H){var re=this;if(H=H||n,!(re instanceof g))return new g(H);re.target=H,re._callbacks={},re._directMap={};var _e={},Te,ye=!1,le=!1,Pe=!1;function Le(z){z=z||{};var M=!1,k;for(k in _e){if(z[k]){M=!0;continue}_e[k]=0}M||(Pe=!1)}function Ze(z,M,k,P,B,te){var ee,ge,ce=[],Se=k.type;if(!re._callbacks[z])return[];for(Se=="keyup"&&X(z)&&(M=[z]),ee=0;ee<re._callbacks[z].length;++ee)if(ge=re._callbacks[z][ee],!(!P&&ge.seq&&_e[ge.seq]!=ge.level)&&Se==ge.action&&(Se=="keypress"&&!k.metaKey&&!k.ctrlKey||E(M,ge.modifiers))){var Ve=!P&&ge.combo==B,Ge=P&&ge.seq==P&&ge.level==te;(Ve||Ge)&&re._callbacks[z].splice(ee,1),ce.push(ge)}return ce}function je(z,M,k,P){re.stopCallback(M,M.target||M.srcElement,k,P)||z(M,k)===!1&&(N(M),F(M))}re._handleKey=function(z,M,k){var P=Ze(z,M,k),B,te={},ee=0,ge=!1;for(B=0;B<P.length;++B)P[B].seq&&(ee=Math.max(ee,P[B].level));for(B=0;B<P.length;++B){if(P[B].seq){if(P[B].level!=ee)continue;ge=!0,te[P[B].seq]=1,je(P[B].callback,k,P[B].combo,P[B].seq);continue}ge||je(P[B].callback,k,P[B].combo)}var ce=k.type=="keypress"&&le;k.type==Pe&&!X(z)&&!ce&&Le(te),le=ge&&k.type=="keydown"};function Je(z){typeof z.which!="number"&&(z.which=z.keyCode);var M=y(z);if(M){if(z.type=="keyup"&&ye===M){ye=!1;return}re.handleKey(M,C(z),z)}}function Ye(){clearTimeout(Te),Te=setTimeout(Le,1e3)}function it(z,M,k,P){_e[z]=0;function B(Se){return function(){Pe=Se,++_e[z],Ye()}}function te(Se){je(k,Se,z),P!=="keyup"&&(ye=y(Se)),setTimeout(Le,10)}for(var ee=0;ee<M.length;++ee){var ge=ee+1===M.length,ce=ge?te:B(P||ae(M[ee+1]).action);ft(M[ee],ce,P,z,ee)}}function ft(z,M,k,P,B){re._directMap[z+":"+k]=M,z=z.replace(/\s+/g," ");var te=z.split(" "),ee;if(te.length>1){it(z,te,M,k);return}ee=ae(z,k),re._callbacks[ee.key]=re._callbacks[ee.key]||[],Ze(ee.key,ee.modifiers,{type:ee.action},P,z,B),re._callbacks[ee.key][P?"unshift":"push"]({callback:M,modifiers:ee.modifiers,action:ee.action,seq:P,level:B,combo:z})}re._bindMultiple=function(z,M,k){for(var P=0;P<z.length;++P)ft(z[P],M,k)},m(H,"keypress",Je),m(H,"keydown",Je),m(H,"keyup",Je)}g.prototype.bind=function(H,re,_e){var Te=this;return H=H instanceof Array?H:[H],Te._bindMultiple.call(Te,H,re,_e),Te},g.prototype.unbind=function(H,re){var _e=this;return _e.bind.call(_e,H,function(){},re)},g.prototype.trigger=function(H,re){var _e=this;return _e._directMap[H+":"+re]&&_e._directMap[H+":"+re]({},H),_e},g.prototype.reset=function(){var H=this;return H._callbacks={},H._directMap={},H},g.prototype.stopCallback=function(H,re){var _e=this;if((" "+re.className+" ").indexOf(" mousetrap ")>-1||de(re,_e.target))return!1;if("composedPath"in H&&typeof H.composedPath=="function"){var Te=H.composedPath()[0];Te!==H.target&&(re=Te)}return re.tagName=="INPUT"||re.tagName=="SELECT"||re.tagName=="TEXTAREA"||re.isContentEditable},g.prototype.handleKey=function(){var H=this;return H._handleKey.apply(H,arguments)},g.addKeycodes=function(H){for(var re in H)H.hasOwnProperty(re)&&(r[re]=H[re]);h=null},g.init=function(){var H=g(n);for(var re in H)re.charAt(0)!=="_"&&(g[re]=function(_e){return function(){return H[_e].apply(H,arguments)}}(re))},g.init(),e.Mousetrap=g,t.exports&&(t.exports=g)})(typeof window<"u"?window:null,typeof window<"u"?document:null)}(i1)),i1.exports}var i3=n3();const Ps=vl(i3);function r3(t,e,n){var i=e.View.prototype.delegateEvents,r=e.View.prototype.undelegateEvents,s=e.View.prototype.remove,o={};t.extend(e.View.prototype,{keyboardEvents:{},bindKeyboardEvents:function(l){if(l||(l=t.result(this,"keyboardEvents"))){for(var h in l){var p=l[h];if(t.isFunction(p)||(p=this[l[h]]),!p)throw new Error('Method "'+l[h]+'" does not exist');p=t.bind(p,this),"bindGlobal"in n&&(h.indexOf("mod")!==-1||h.indexOf("command")!==-1||h.indexOf("ctrl")!==-1)?n.bindGlobal(h,p):n.bind(h,p),o[h]=this}return this}},unbindKeyboardEvents:function(){for(var l in this.keyboardEvents)o[l]===this&&(n.unbind(l),delete o[l]);return this},delegateEvents:function(){var l=i.apply(this,arguments);return this.bindKeyboardEvents(),l},undelegateEvents:function(){var l=r.apply(this,arguments);return this.unbindKeyboardEvents&&this.unbindKeyboardEvents(),l},remove:function(){var l=s.apply(this,arguments);return this.unbindKeyboardEvents&&this.unbindKeyboardEvents(),l}})}const s3=`
    <% if (disabled) { %>
        <td>
            <% if(imageId > 0) { print("<img class='small-thumb' src='" + thumbSrc + "' />") }
               else { print ("<div class='missingThumb small-thumb'></div>")} %>
        </td>
        <td title="This figure is currently open">
            <div style="width:400px; word-wrap:break-word;">
                <%- name %>
            </div>
        </td>
    <% } else { %>
        <td>
            <a href="<%= url %>">
                <img class='small-thumb' src='<%= thumbSrc %>' />
            </a>
        </td>
        <td>
            <div style="width:400px; word-wrap:break-word;">
                <a href="<%= url %>"><%- name %></a>
            </div>
        </td>
    <% } %>
    <td>
        <%= formatDate(creationDate) %>
    </td>
    <td>
        <%- group.name %>
    </td>
    <td>
        <%- ownerFullName %>
    </td>
`;var o3=dt.Model.extend({defaults:{disabled:!1},initialize:function(){var t=this.get("description");t&&t.imageId?this.set("imageId",t.imageId):this.set("imageId",0),t&&t.baseUrl&&this.set("baseUrl",t.baseUrl)},isVisible:function(t){if(t.owner!==void 0&&this.get("owner").id!==t.owner||t.group&&this.get("group").id!==t.group)return!1;if(t.name){var e=this.get("name").toLowerCase(),n=A.trim(t.name).split(" "),i=n.reduce(function(r,s){return r&&e.indexOf(s)>-1},!0);return i}return!0}}),a3=dt.Collection.extend({model:o3,comparator:"creationDate",disable:function(t){this.where({disabled:!0}).forEach(function(n){n.set("disabled",!1)});var e=this.get(t);e&&e.set("disabled",!0)},removeFile:function(t){var e=this.get(t);this.remove(e)},url:function(){return BASE_WEBFIGURE_URL+"list_web_figures/"}}),l3=dt.View.extend({el:A("#openFigureModal"),initialize:function(t){this.modal=new ri("#openFigureModal"),this.$tbody=A("tbody",this.$el),this.$fileFilter=A("#file-filter"),this.owner=USER_ID,window.IS_PUBLIC_USER&&delete this.owner;var e=this;this.model.bind("sync remove sort",this.render,this),this.$fileFilter.val(""),this.figureModel=t.figureModel,document.getElementById("openFigureModal").addEventListener("show.bs.modal",function(){e.model.length===0?e.refresh_files():e.render()})},events:{"click .sort-created":"sort_created","click .sort-created-reverse":"sort_created_reverse","click .sort-name":"sort_name","click .sort-name-reverse":"sort_name_reverse","click .pick-owner":"pick_owner","click .pick-group":"pick_group","keyup #file-filter":"filter_files","click .refresh-files":"refresh_files"},refresh_files:function(t){var e=`<tr><td colspan='5' style='text-align:center'>
            <h3 class='text-muted' style='opacity:0.7; margin:50px'><small>Loading Files...</small></h3>
        </td></tr>`;this.$tbody.html(e);let n=this.model.url();fetch(n,{mode:"cors",credentials:"include"}).then(r=>r.json()).then(r=>{this.model.reset(),r.length==0&&this.render(),this.model.add(r)})},filter_files:function(t){this.render()},sort_created:function(t){this.render_sort_btn(t),this.model.comparator="creationDate",this.model.sort()},sort_created_reverse:function(t){this.render_sort_btn(t),this.model.comparator=function(e,n){var i=e.get("creationDate"),r=n.get("creationDate");return i<r?1:i>r?-1:0},this.model.sort()},sort_name:function(t){this.render_sort_btn(t),this.model.comparator=function(e,n){var i=e.get("name").toLowerCase(),r=n.get("name").toLowerCase();return i<r?-1:i>r?1:0},this.model.sort()},sort_name_reverse:function(t){this.render_sort_btn(t),this.model.comparator=function(e,n){var i=e.get("name").toLowerCase(),r=n.get("name").toLowerCase();return i<r?1:i>r?-1:0},this.model.sort()},render_sort_btn:function(t){A("th .btn-sm",this.$el).addClass("muted"),A(t.target).removeClass("muted")},pick_owner:function(t){t.preventDefault();var e=A(t.target).data("id");e!=-1?this.owner=e:delete this.owner,this.render()},pick_group:function(t){t.preventDefault();var e=A(t.target).data("id");e!=-1?this.group=e:delete this.group,this.render()},render:function(){var t=this,e={},n=this.$fileFilter.val(),i=this.figureModel.get("fileId");if(this.owner!==void 0&&this.owner!=-1&&(e.owner=this.owner),this.group&&this.group!=-1&&(e.group=this.group),n.length>0&&(e.name=n.toLowerCase()),this.$tbody.empty(),this.model.models.length===0){var r="<tr><td colspan='3'>You have no figures. Start by <a href='"+BASE_WEBFIGURE_URL+"new'>creating a new figure</a></td></tr>";t.$tbody.html(r)}let s=this.model.models.filter(V=>V.isVisible(e));De.each(s,function(V){var K=i===V.get("id");V.set("disabled",K);var ae=new c3({model:V,listview:t}).render().el;t.$tbody.prepend(ae)});var o=this.model.pluck("owner");let l=o.find(V=>V.id==e.owner),h=l?`${l.firstName} ${l.lastName}`:"Show All";if(e.group){let V=this.model.models.filter(K=>K.get("group").id==e.group).map(K=>K.get("owner").id);o=o.filter(K=>V.includes(K.id))}var p={};o.forEach(function(V){let K=V.firstName+" "+V.lastName;p[K]=V.id});var m=Object.keys(p);m.sort(function(K,ae){var de=K.split(" "),g=de[de.length-1],H=ae.split(" "),re=H[H.length-1];return g>re});var y="<li><a class='dropdown-item pick-owner' href='#' data-id='-1'> -- Show All -- </a></li>";y+="<li class='divider'></li>",De.each(m,function(V){y+=`<li>
                <a class='dropdown-item pick-owner' data-id='${p[V]}' href='#'>
                    <i class='bi-check-lg' style='visibility: ${p[V]===e.owner?"visible":"hidden"}'></i>
                    ${De.escape(V)}
                </a></li>`}),A("#owner-menu").html(y),A("#selected_owner").html(h);var E=this.model.pluck("group"),C={};E.forEach(function(V){C[V.name]=V.id});var N=Object.keys(C);N.sort();var F="<li><a class='dropdown-item pick-group' href='#' data-id='-1'> -- Show All -- </a></li><li class='divider'></li>";F+=N.map(V=>`<li>
            <a class='dropdown-item pick-group' data-id='${C[V]}' href='#'>
                <i class='bi-check-lg' style='visibility: ${C[V]===e.group?"visible":"hidden"}'></i>
                ${De.escape(V)}
            </a></li>`).join(`
`),A("#group-menu").html(F);let X=E.find(V=>V.id==e.group),G=X?X.name:"Show All";return A("#selected_group").html(G),this}}),c3=dt.View.extend({tagName:"tr",template:De.template(s3),initialize:function(t){this.model.bind("change",this.render,this),this.model.bind("destroy",this.close,this),this.listview=t.listview},events:{"click a":"hide_file_chooser"},hide_file_chooser:function(){this.listview.modal.hide()},formatDate:function(t){if(t*1e3){var e=new Date(t*1e3),n=e.toISOString();return n=n.replace("T"," "),n=n.substr(0,16),n}return t},render:function(){var t=this.model.toJSON(),e=t.baseUrl;if(!t.imageId)try{var n=JSON.parse(t.description);n.imageId&&(t.imageId=n.imageId,this.model.set("imageId",n.imageId))}catch{console.log("failed to parse json",t.description)}e=e||BASE_WEBFIGURE_URL.slice(0,-1),t.thumbSrc=e+"/render_thumbnail/"+t.imageId+"/",t.url=BASE_WEBFIGURE_URL+"file/"+t.id,t.formatDate=this.formatDate;var i=this.template(t);return A(this.el).html(i),this}});const h3=`
    <table class="table" style="margin-bottom:0">
        <tbody>
            <tr><td class="row">
                <div class="col">Compare:</div>
                <div class="col">
                    <img class="small-thumb" title="<%- selImg.name %>"
                        src="<%= selThumbSrc %>" />
                </div>
                <div class="col">
                    <% if(newImg.imageId) { %>
                        <img class="small-thumb" title="<%- newImg.name %>"
                            src="<%= newThumbSrc %>" />
                    <% } else { %>
                        <div style="width:40px; height:40px; background-color:#ddd"></div>
                    <% } %>
                </div>
                <div class="col">Matching</div>
            </td></tr>
            <tr><td>
              <div class="row">
                <div class="col"><small><strong>Dimensions (XY)</strong>:</small></div>
                <div class="col"><small><%= selImg.orig_width %> x <%= selImg.orig_height %></small></div>
                <div class="col"><small>
                    <%= newImg.orig_width || "-" %> x <%= newImg.orig_height || "-"  %>
                </small></div>
                <div class="col">
                    <%= ok(comp.orig_width, comp.orig_height) %>
                </div>
              </div>
              <div class="row">
                <div class="col"><small><strong>Z-sections</strong>:</small></div>
                <div class="col"><small><%= selImg.sizeZ %></small></div>
                <div class="col"><small><%= newImg.sizeZ || "-" %></small></div>
                <div class="col"><%= ok(comp.sizeZ) %></div>
              </div>
              <div class="row">
                <div class="col"><small><strong>Time-points</strong>:</small></div>
                <div class="col"><small><%= selImg.sizeT %></small></div>
                <div class="col"><small><%= newImg.sizeT || "-" %></small></div>
                <div class="col"><small><%= ok(comp.sizeT) %></small></div>
              </div>
              <div class="row">
                <div class="col"><small><strong>Channels</strong>:</small></div>
                <div class="col"><small>
                    <% _.each(selImg.channels, function(ch, i) { %>
                        <%- ch.label %><% if(i < selImg.channels.length-1){print(',')} %>
                    <% }); %>
                </small></div>
                <div class="col"><small>
                    <% if(newImg.channels){ _.each(newImg.channels, function(ch, i) { %>
                        <%- ch.label %><% if(i < newImg.channels.length-1){print(',')} %>
                    <% }) } else { print("-") } %>
                </small></div>
                <div class="col"><small><%= comp.channels || "-" %></small></div>
              </div>
            </td></tr>
        </tbody>
    </table>
    <% _.each(messages, function(m) { %>
        <div class="alert alert-<%= m.status %>"><%= m.text %></div>
    <% }); %>
    <% if (newImg.imageId && messages.length == 0) {
        print("<div class='alert alert-success'>Perfect Match!</div>")
    } %>
`,u3=`
<div class="row" style="margin-bottom: 15px;">
    <div class="form-group col-sm-6">
        <label>Page Color</label>
        <input class="pageColor form-control"
            value="#<%= page_color %>"
            type="color" style="padding: 0" />
    </div>
    <div class="form-group col-sm-6"></div>
</div>

<div class="row" style="margin-bottom: 15px;">
    <div class="form-group col-sm-6">
        <label>Number of Pages</label>
        <select class="pageCountSelect form-control">
            <% _.each([1,2,3,4,5,6,7,8,9,10],function(p){
                print ("<option value='"+p+"'" + ((p == page_count) ? " selected " : "") + " >"+p+"</option>")
            }); %>
        </select>
    </div>
    <div class="form-group col-sm-6"></div>
</div>

<div class="row" style="margin-bottom: 15px;">
    <div class="col-sm-6">
        <label>Size</label>
        <div class="form-horizontal">
            <div class="form-group col-sm-12">
                <select class="paperSizeSelect form-control">
                    <option value="A4" <% if (page_size == 'A4') { print('selected') } %> >
                        A4 (210 x 297 mm)
                    </option>
                    <option value="A3" <% if (page_size == 'A3') { print('selected') } %> >
                        A3 (297 x 420 mm)
                    </option>
                    <option value="A2" <% if (page_size == 'A2') { print('selected') } %> >
                        A2 (420 x 594 mm)
                    </option>
                    <option value="A1" <% if (page_size == 'A1') { print('selected') } %> >
                        A1 (594 x 841 mm)
                    </option>
                    <option value="A0" <% if (page_size == 'A0') { print('selected') } %> >
                        A0 (841 x 1189 mm)
                    </option>
                    <option value="letter" <% if (page_size == 'letter') { print('selected') } %> >
                        Letter (216 x 280 mm)
                    </option>
                    <option value="mm" <% if (page_size == 'mm') { print('selected') } %> >
                        Custom (mm)
                    </option>
                    <option value="crop" <% if (page_size == 'crop') { print('selected') } %>
                        title="Fit a single page around all panels">
                        <% if (page_count > 1) { %>
                            Crop single page to panels
                        <% } else { %>
                            Crop page around panels
                        <% } %>
                    </option>
                </select>
            </div>
            <!-- <label for="inputPassword" class="col-sm-2 control-label">Password</label> -->
        </div>
    </div>
    <div class="col-sm-6">
        <label>Orientation</label>
        <div class="form-horizontal row" style="margin-top: 8px;">
            <div class="form-group col-sm-6" style="padding-left: 0;">
                <input type="radio" name="pageOrientation" value="vertical"
                    <% if (orientation == 'vertical') { print('checked') } %> >
                <label class="control-label text-muted">Vertical</label>
            </div>
            <div class="form-group col-sm-6">
                <input type="radio" name="pageOrientation" value="horizontal"
                    <% if (orientation == 'horizontal') { print('checked') } %> >
                <label class="control-label text-muted">Horizontal</label>
            </div>
        </div>
    </div>
</div>

<div class="row g-4 align-items-center <% if (wh_disabled) { print(' wh_disabled')} %>">
    <div class="col-auto">
        <labelclass="col-form-label">Width</label>
    </div>
    <div class="col-auto">
        <input id='paperWidth' type="number" style="width:70px"
        <% if (wh_disabled) { print('disabled')} %>
        class="form-control" value="<%= width_mm %>">
    </div>
    <div class="col-auto">
        <span class="form-text">
        mm
        </span>
    </div>
    <div class="col-auto">
        <label class="col-form-label">Height</label>
    </div>
    <div class="col-auto">
        <input id='paperHeight' type="number" style="width:70px"
            <% if (wh_disabled) { print('disabled')} %>
            class="form-control" value="<%= height_mm %>">
    </div>
    <div class="col-auto">
        <span class="form-text">
        mm
        </span>
    </div>
</div>
`;var f3=dt.View.extend({el:A("#colorpickerModal"),pickedColors:[],initialize:function(){this.$submit_btn=A("#colorpickerModal .modal-footer button[type='submit']")},events:{"input .color-input":"handleColorInput","submit .colorpickerForm":"handleColorpicker","click .pickedColors button":"pickRecentColor"},handleColorInput:function(t){let e=t.target.value;this.$submit_btn.prop("disabled",!1),A(".oldNewColors li:first-child").css("background-color",e)},pickRecentColor:function(t){var e=A(t.target).prop("title");A(".color-input").val(e),navigator.userAgent.includes("Firefox")||A(".color-input").trigger("click"),A(".oldNewColors li:first-child").css("background-color",e),this.$submit_btn.prop("disabled",!1)},handleColorpicker:function(t){t.preventDefault();var e=A(".color-input").val();if(e.length!==0&&(e[0]!="#"&&(e="#"+e),!(e.length!=7&&e.length!=4)))return this.pickedColors.push(e),this.success&&this.success(e),$r("colorpickerModal"),!1},show:function(t){Vn("colorpickerModal"),(!navigator.userAgent.includes("Firefox")||this.pickedColors.length==0)&&A(".color-input",this.$el).trigger("click"),t.color&&(A(".oldNewColors li").css("background-color","#"+t.color),this.$submit_btn.prop("disabled","disabled")),t.pickedColors&&(this.pickedColors=De.uniq(this.pickedColors.concat(t.pickedColors))),t.success&&(this.success=t.success),this.render()},render:function(){var t={colors:De.uniq(this.pickedColors)},e='<div class="btn-group"><% _.each(colors, function(c, i) { %><button type="button" class="btn btn-default" title="<%= c %>"style="background-color: <%= c %>"> </button><% if ((i+1)%4 == 0){ %> </div><div class="btn-group"><% } %><% }); %></div>',n=De.template(e),i=n(t);A("#pickedColors").html(i)}});const xl=new f3,d3=dt.View.extend({el:A("#dpiModal"),model:Oi,initialize:function(t){var e=this;document.getElementById("dpiModal").addEventListener("shown.bs.modal",()=>{e.render()})},events:{"submit .dpiModalForm":"handleDpiForm"},handleDpiForm:function(t){t.preventDefault();var e=A(".min_export_dpi",this.el).val(),n=parseInt(e,10),i=A(".max_export_dpi",this.el).val(),r=parseInt(i,10),s=this.model.getSelected();return isNaN(r)?(alert("Need to enter valid integer for dpi values"),!1):(s.forEach(function(o){var l={max_export_dpi:r};isNaN(n)?o.unset("min_export_dpi"):l.min_export_dpi=n,o.save(l)}),$r("dpiModal"),!1)},render:function(){var t=this.model.getSelected(),e=t.getIfEqual("min_export_dpi")||300,n=t.getIfEqual("max_export_dpi")||"-";A(".min_export_dpi",this.el).val(e),A(".max_export_dpi",this.el).val(n)}}),p3=dt.View.extend({el:A("#paperSetupModal"),template:De.template(u3),model:Oi,events:{"submit .paperSetupForm":"handlePaperSetup","change .paperSizeSelect":"rerender","change input":"rerender","click .pageColor":"handlePaperColor"},handlePaperColor:function(t){t.preventDefault();var e=A(t.target).val();return xl.show({color:e,pickedColors:["#000000","#ffffff","#eeeeee"],success:(function(n){A(".pageColor",this.$el).val(n)}).bind(this)}),!1},initialize:function(t){var e=this;document.getElementById("paperSetupModal").addEventListener("shown.bs.modal",()=>{e.render()})},processForm:function(){var t=A("form",this.$el),e=72,n=A(".pageCountSelect",t).val(),i=A(".paperSizeSelect",t).val(),r=t.find('input[name="pageOrientation"]:checked').val(),s=parseInt(A("#paperWidth").val(),10),o=parseInt(A("#paperHeight").val(),10);A(".wh_units:first",t).text();var l=A(".pageColor",t).val().replace("#",""),h,p,m,y,E,C;if(i=="A4")m=210,y=297;else if(i=="A3")m=297,y=420;else if(i=="A2")m=420,y=594;else if(i=="A1")m=594,y=841;else if(i=="A0")m=841,y=1189;else if(i=="letter")m=216,y=280;else if(i=="mm")m=s,y=o;else if(i=="crop"){var N=this.model.getCropCoordinates();E=N.paper_width,C=N.paper_height,h=N.dx,p=N.dy,n=1}if(m&&y?(E=Math.round(e*m/25.4),C=Math.round(e*y/25.4)):(m=Math.round(E*25.4/e),y=Math.round(C*25.4/e)),r=="horizontal"&&i!="mm"&&i!="crop"){var F=m;m=y,y=F,F=E,E=C,C=F}var X=n;n>3&&(X=Math.ceil(n/2));var G={page_size:i,orientation:r,width_mm:m,height_mm:y,paper_width:E,paper_height:C,page_count:n,page_col_count:X,page_color:l};return(h!==void 0||p!==void 0)&&(G.dx=h,G.dy=p),G},handlePaperSetup:function(t){t.preventDefault();var e=this.processForm();e.page_size==="crop"&&(this.model.panels.forEach(function(n){n.save({x:n.get("x")+e.dx,y:n.get("y")+e.dy})}),e.page_size="mm",delete e.dx,delete e.dy),this.model.set(e),$r("paperSetupModal")},rerender:function(){var t=this.processForm();this.render(t)},render:function(t){t=t||this.model.toJSON(),t.wh_disabled=t.page_size!="mm",this.$el.find(".modal-body").html(this.template(t))}}),g3=dt.View.extend({el:A("#setIdModal"),template:De.template(h3),model:Oi,events:{"submit .addIdForm":"previewSetId","click .preview":"previewSetId","keyup .imgId":"keyPressed","click .doSetId":"doSetId"},initialize:function(t){var e=this;document.getElementById("setIdModal").addEventListener("shown.bs.modal",()=>{delete e.newImg,e.render()})},keyPressed:function(){var t=A("input.imgId",this.$el).val(),e=A("button.preview",this.$el),n=/^\d+$/;n.test(t)?e.removeAttr("disabled"):e.attr("disabled","disabled")},previewSetId:function(t){t.preventDefault();var e=this,n=A("input.imgId",this.$el).val();const i=BASE_WEBFIGURE_URL+"imgData/"+parseInt(n,10)+"/";A.ajax({url:i,xhrFields:{withCredentials:!0,mode:"cors"},dataType:"json",success:function(r){var s={imageId:r.id,name:r.meta.imageName,pixelsType:r.meta.pixelsType,pixel_range:r.pixel_range,sizeZ:r.size.z,theZ:r.rdefs.defaultZ,sizeT:r.size.t,channels:r.channels,orig_width:r.size.width,orig_height:r.size.height,datasetName:r.meta.datasetName,pixel_size_x:r.pixel_size.valueX,pixel_size_y:r.pixel_size.valueY,pixel_size_z:r.pixel_size.valueZ,pixel_size_x_unit:r.pixel_size.unitX,pixel_size_z_unit:r.pixel_size.unitZ,pixel_size_x_symbol:r.pixel_size.symbolX,pixel_size_z_symbol:r.pixel_size.symbolZ,deltaT:r.deltaT};e.newImg=s,e.render()}}).fail(function(r){alert("Image ID: "+n+" could not be found on the server, or you don't have permission to access it")})},doSetId:function(){var t=this,e=this.model.getSelected();t.newImg&&(e.forEach(function(n){n.setId(t.newImg)}),this.model.set("unsaved",!0))},render:function(){var t=this.model.getSelected(),e,n={};if(t.length<1){self.selectedImage=null;return}e=t.head(),n.selImg=e.toJSON(),n.newImg={},n.comp={},n.messages=[],n.ok=function(y,E){return typeof y>"u"?"-":(typeof E<"u"&&(y=y&&E),y?"<i class='green bi bi-check-lg'></i>":"<i class='red bi bi-flag-fill'></i>")},n.selThumbSrc=WEBGATEWAYINDEX+"render_thumbnail/"+n.selImg.imageId+"/";var i=["orig_width","orig_height"],r=["Width","Height"];if(this.newImg){if(n.newImg=this.newImg,De.each(i,function(y,E){n.selImg[y]==n.newImg[y]?n.comp[y]=!0:(n.comp[y]=!1,n.messages.push({text:"Mismatch of "+r[E]+": should be OK.",status:"success"}))}),n.selImg.sizeT!=n.newImg.sizeT){var s=!1;t.forEach(function(y){y.get("theT")>n.newImg.sizeT&&(s=!0)}),s?n.messages.push({text:"New Image has fewer Timepoints than needed. Check after update.",status:"danger"}):n.messages.push({text:"Mismatch of Timepoints: should be OK.",status:"success"}),n.comp.sizeT=!1}else n.comp.sizeT=!0;if(n.selImg.sizeZ!=n.newImg.sizeZ){var o=!1;t.forEach(function(y){y.get("theZ")>n.newImg.sizeZ&&(o=!0)}),o?n.messages.push({text:"New Image has fewer Z slices than needed. Check after update.",status:"danger"}):n.messages.push({text:"Mismatch of Z slices: should be OK.",status:"success"}),n.comp.sizeZ=!1}else n.comp.sizeZ=!0;n.comp.channels=n.ok(!0);var l=n.selImg.channels,h=n.newImg.channels,p=l.length;if(p!=h.length)n.comp.channels=n.ok(!1),n.messages.push({text:"New Image has "+h.length+" channels instead of "+p+". Check after update.",status:"danger"});else for(var m=0;m<p;m++)if(l[m].label!=h[m].label){n.comp.channels=n.ok(!1),n.messages.push({text:"Channel Names mismatch: should be OK.",status:"success"});break}n.newThumbSrc=WEBGATEWAYINDEX+"render_thumbnail/"+n.newImg.imageId+"/",A(".doSetId",this.$el).removeAttr("disabled")}else A(".doSetId",this.$el).attr("disabled","disabled");A(".previewIdChange",this.$el).html(this.template(n))}}),m3=dt.View.extend({el:A("#addImagesModal"),model:Oi,events:{"submit .addImagesForm":"addImages","click .btn-primary":"addImages","keyup .imgIds":"keyPressed","paste .imgIds":"keyPressed"},initialize:function(t){this.modal=new ri("#addImagesModal"),this.figureView=t.figureView,A("#addImagesModal").on("focus",function(){setTimeout(function(){A("#addImagesModal input.imgIds").trigger("focus")},20)})},keyPressed:function(t){var e=A("input.imgIds",this.$el).val(),n=A("button.btn-primary",this.$el),i=/\d.*/;if(t&&t.type==="paste"){setTimeout(this.keyPressed,50);return}i.test(e)?n.removeAttr("disabled"):n.attr("disabled","disabled")},addImages:function(){var t,e=A("input.imgIds",this.$el),n=A("button.btn-primary",this.$el),i=e.val();if(e.val(""),n.attr("disabled","disabled"),!(!i||i.length===0)){if(i.indexOf("?")>10)t=i.split("image-").slice(1);else if(i.indexOf("img_detail")>0){this.importFromRemote(i);return}else t=i.split(",");this.model.addImages(t)}},importFromRemote:function(t){var e=parseInt(t.split("img_detail/")[1],10),n=t.split("/img_detail")[0],i=n+"/imgData/"+e+"/",r=1,s=1,o=this.model.get("paper_width"),l=this.figureView.getCentre(),h=0,p=0,m,y,E,C={px:m,py:y,c:l,spacer:E,colCount:r,rowCount:s,col:h,row:p,paper_width:o};this.model.importImage(i,C,n)}}),_3=dt.View.extend({el:A("#openLocalFileModal"),model:Oi,initialize:function(t){this.app=t.app,A(".figureFileUrl",this.el).val("https://gist.githubusercontent.com/will-moore/fe0e260544b46af6e1e523b288fc85bc/raw/30547e61d4d8753ef0016f0a70435f1aafb43c2f/OMERO.figure_NGFF_demo.json"),this.enableSubmit()},events:{"submit .openLocalFileForm":"handleOpenFile","input .figureFileUrl":"enableSubmit","input input[type='file']":"enableSubmit"},enableSubmit:function(t){let e=A(".figureFileUrl",this.el).val(),n=A("input[type='file']",this.el).val();console.log("enableSubmit",e,n),e||n?A("button[type='submit'",this.el).prop("disabled",!1):A("button[type='submit'",this.el).prop("disabled",!0)},handleOpenFile:function(t){t.preventDefault();let e=A(".figureFileUrl",this.el).val(),n=A("input[type='file']",this.el).val();if(console.log("figureFileUrl",e),console.log("localFile",n),console.log("this.app",this.app),n){const[i]=document.querySelector("#openLocalFileModal input[type=file]").files,r=new FileReader;r.addEventListener("load",()=>{console.log("reader.result",r.result);let s;try{s=JSON.parse(r.result)}catch{alert("Invalid JSON file")}const o=this.app,l=this.model;if(s){var h=function(){o.navigate("/omero-figure/",{trigger:!1}),l.load_from_JSON(s),l.set("unsaved",!1)};l.checkSaveAndClear(h)}}),i&&r.readAsText(i)}else e&&(console.log("/omero-figure/?file="+e),this.app.navigate("/omero-figure/?file="+e,{trigger:!0}));return $r("openLocalFileModal"),!1},render:function(){}});var r1={exports:{}},ph;function v3(){return ph||(ph=1,function(t,e){(function(n,i){t.exports=i()})(window,function(){return function(n){var i={};function r(s){if(i[s])return i[s].exports;var o=i[s]={i:s,l:!1,exports:{}};return n[s].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=n,r.c=i,r.d=function(s,o,l){r.o(s,o)||Object.defineProperty(s,o,{enumerable:!0,get:l})},r.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},r.t=function(s,o){if(1&o&&(s=r(s)),8&o||4&o&&typeof s=="object"&&s&&s.__esModule)return s;var l=Object.create(null);if(r.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:s}),2&o&&typeof s!="string")for(var h in s)r.d(l,h,(function(p){return s[p]}).bind(null,h));return l},r.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return r.d(o,"a",o),o},r.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},r.p="",r(r.s=1)}([function(n,i,r){var s,o;s=[r(2)],(o=(function(l){function h(f){if(h.is(f,"function"))return p?f():l.on("raphael.DOMload",f);if(h.is(f,it))return h._engine.create[V](h,f.splice(0,3+h.is(f[0],Ye))).add(f);var _=Array.prototype.slice.call(arguments,0);if(h.is(_[_.length-1],"function")){var w=_.pop();return p?w.call(h._engine.create[V](h,_)):l.on("raphael.DOMload",function(){w.call(h._engine.create[V](h,_))})}return h._engine.create[V](h,arguments)}h.version="2.3.0",h.eve=l;var p,m,y=/[, ]+/,E={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},C=/\{(\d+)\}/g,N="hasOwnProperty",F={doc:document,win:window},X={was:Object.prototype[N].call(F.win,"Raphael"),is:F.win.Raphael},G=function(){this.ca=this.customAttributes={}},V="apply",K="concat",ae="ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof DocumentTouch,de="",g=" ",H=String,re="split",_e="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[re](g),Te={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},ye=H.prototype.toLowerCase,le=Math,Pe=le.max,Le=le.min,Ze=le.abs,je=le.pow,Je=le.PI,Ye="number",it="array",ft=Object.prototype.toString,z=(h._ISURL=/^url\(['"]?(.+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),M={NaN:1,Infinity:1,"-Infinity":1},k=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,P=le.round,B=parseFloat,te=parseInt,ee=H.prototype.toUpperCase,ge=h._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0,class:""},ce=h._availableAnimAttrs={blur:Ye,"clip-rect":"csv",cx:Ye,cy:Ye,fill:"colour","fill-opacity":Ye,"font-size":Ye,height:Ye,opacity:Ye,path:"path",r:Ye,rx:Ye,ry:Ye,stroke:"colour","stroke-opacity":Ye,"stroke-width":Ye,transform:"transform",width:Ye,x:Ye,y:Ye},Se=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,Ve={hs:1,rg:1},Ge=/,?([achlmqrstvxz]),?/gi,rt=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,S=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,R=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,$=(h._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),Q=function(f,_){return B(f)-B(_)},ue=function(f){return f},fe=h._rectPath=function(f,_,w,x,O){return O?[["M",f+O,_],["l",w-2*O,0],["a",O,O,0,0,1,O,O],["l",0,x-2*O],["a",O,O,0,0,1,-O,O],["l",2*O-w,0],["a",O,O,0,0,1,-O,-O],["l",0,2*O-x],["a",O,O,0,0,1,O,-O],["z"]]:[["M",f,_],["l",w,0],["l",0,x],["l",-w,0],["z"]]},Me=function(f,_,w,x){return x==null&&(x=w),[["M",f,_],["m",0,-x],["a",w,x,0,1,1,0,2*x],["a",w,x,0,1,1,0,-2*x],["z"]]},tt=h._getPath={path:function(f){return f.attr("path")},circle:function(f){var _=f.attrs;return Me(_.cx,_.cy,_.r)},ellipse:function(f){var _=f.attrs;return Me(_.cx,_.cy,_.rx,_.ry)},rect:function(f){var _=f.attrs;return fe(_.x,_.y,_.width,_.height,_.r)},image:function(f){var _=f.attrs;return fe(_.x,_.y,_.width,_.height)},text:function(f){var _=f._getBBox();return fe(_.x,_.y,_.width,_.height)},set:function(f){var _=f._getBBox();return fe(_.x,_.y,_.width,_.height)}},Ke=h.mapPath=function(f,_){if(!_)return f;var w,x,O,W,Y,j,q;for(O=0,Y=(f=li(f)).length;O<Y;O++)for(W=1,j=(q=f[O]).length;W<j;W+=2)w=_.x(q[W],q[W+1]),x=_.y(q[W],q[W+1]),q[W]=w,q[W+1]=x;return f};if(h._g=F,h.type=F.win.SVGAngle||F.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML",h.type=="VML"){var at,mt=F.doc.createElement("div");if(mt.innerHTML='<v:shape adj="1"/>',(at=mt.firstChild).style.behavior="url(#default#VML)",!at||typeof at.adj!="object")return h.type=de;mt=null}function lt(f){if(typeof f=="function"||Object(f)!==f)return f;var _=new f.constructor;for(var w in f)f[N](w)&&(_[w]=lt(f[w]));return _}h.svg=!(h.vml=h.type=="VML"),h._Paper=G,h.fn=m=G.prototype=h.prototype,h._id=0,h.is=function(f,_){return(_=ye.call(_))=="finite"?!M[N](+f):_=="array"?f instanceof Array:_=="null"&&f===null||_==typeof f&&f!==null||_=="object"&&f===Object(f)||_=="array"&&Array.isArray&&Array.isArray(f)||ft.call(f).slice(8,-1).toLowerCase()==_},h.angle=function(f,_,w,x,O,W){if(O==null){var Y=f-w,j=_-x;return Y||j?(180+180*le.atan2(-j,-Y)/Je+360)%360:0}return h.angle(f,_,O,W)-h.angle(w,x,O,W)},h.rad=function(f){return f%360*Je/180},h.deg=function(f){return Math.round(180*f/Je%360*1e3)/1e3},h.snapTo=function(f,_,w){if(w=h.is(w,"finite")?w:10,h.is(f,it)){for(var x=f.length;x--;)if(Ze(f[x]-_)<=w)return f[x]}else{var O=_%(f=+f);if(O<w)return _-O;if(O>f-w)return _-O+f}return _};var It,sn;h.createUUID=(It=/[xy]/g,sn=function(f){var _=16*le.random()|0;return(f=="x"?_:3&_|8).toString(16)},function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(It,sn).toUpperCase()}),h.setWindow=function(f){l("raphael.setWindow",h,F.win,f),F.win=f,F.doc=F.win.document,h._engine.initWin&&h._engine.initWin(F.win)};var ln=function(f){if(h.vml){var _,w=/^\s+|\s+$/g;try{var x=new ActiveXObject("htmlfile");x.write("<body>"),x.close(),_=x.body}catch{_=createPopup().document.body}var O=_.createTextRange();ln=Lt(function(Y){try{_.style.color=H(Y).replace(w,de);var j=O.queryCommandValue("ForeColor");return"#"+("000000"+(j=(255&j)<<16|65280&j|(16711680&j)>>>16).toString(16)).slice(-6)}catch{return"none"}})}else{var W=F.doc.createElement("i");W.title="Raphal Colour Picker",W.style.display="none",F.doc.body.appendChild(W),ln=Lt(function(Y){return W.style.color=Y,F.doc.defaultView.getComputedStyle(W,de).getPropertyValue("color")})}return ln(f)},Ft=function(){return"hsb("+[this.h,this.s,this.b]+")"},Dt=function(){return"hsl("+[this.h,this.s,this.l]+")"},un=function(){return this.hex},fn=function(f,_,w){if(_==null&&h.is(f,"object")&&"r"in f&&"g"in f&&"b"in f&&(w=f.b,_=f.g,f=f.r),_==null&&h.is(f,"string")){var x=h.getRGB(f);f=x.r,_=x.g,w=x.b}return(f>1||_>1||w>1)&&(f/=255,_/=255,w/=255),[f,_,w]},kn=function(f,_,w,x){var O={r:f*=255,g:_*=255,b:w*=255,hex:h.rgb(f,_,w),toString:un};return h.is(x,"finite")&&(O.opacity=x),O};function Lt(f,_,w){return function x(){var O=Array.prototype.slice.call(arguments,0),W=O.join(""),Y=x.cache=x.cache||{},j=x.count=x.count||[];return Y[N](W)?(function(q,ne){for(var be=0,Oe=q.length;be<Oe;be++)if(q[be]===ne)return q.push(q.splice(be,1)[0])}(j,W),w?w(Y[W]):Y[W]):(j.length>=1e3&&delete Y[j.shift()],j.push(W),Y[W]=f[V](_,O),w?w(Y[W]):Y[W])}}h.color=function(f){var _;return h.is(f,"object")&&"h"in f&&"s"in f&&"b"in f?(_=h.hsb2rgb(f),f.r=_.r,f.g=_.g,f.b=_.b,f.hex=_.hex):h.is(f,"object")&&"h"in f&&"s"in f&&"l"in f?(_=h.hsl2rgb(f),f.r=_.r,f.g=_.g,f.b=_.b,f.hex=_.hex):(h.is(f,"string")&&(f=h.getRGB(f)),h.is(f,"object")&&"r"in f&&"g"in f&&"b"in f?(_=h.rgb2hsl(f),f.h=_.h,f.s=_.s,f.l=_.l,_=h.rgb2hsb(f),f.v=_.b):(f={hex:"none"}).r=f.g=f.b=f.h=f.s=f.v=f.l=-1),f.toString=un,f},h.hsb2rgb=function(f,_,w,x){var O,W,Y,j,q;return this.is(f,"object")&&"h"in f&&"s"in f&&"b"in f&&(w=f.b,_=f.s,x=f.o,f=f.h),j=(q=w*_)*(1-Ze((f=(f*=360)%360/60)%2-1)),O=W=Y=w-q,kn(O+=[q,j,0,0,j,q][f=~~f],W+=[j,q,q,j,0,0][f],Y+=[0,0,j,q,q,j][f],x)},h.hsl2rgb=function(f,_,w,x){var O,W,Y,j,q;return this.is(f,"object")&&"h"in f&&"s"in f&&"l"in f&&(w=f.l,_=f.s,f=f.h),(f>1||_>1||w>1)&&(f/=360,_/=100,w/=100),j=(q=2*_*(w<.5?w:1-w))*(1-Ze((f=(f*=360)%360/60)%2-1)),O=W=Y=w-q/2,kn(O+=[q,j,0,0,j,q][f=~~f],W+=[j,q,q,j,0,0][f],Y+=[0,0,j,q,q,j][f],x)},h.rgb2hsb=function(f,_,w){var x,O;return f=(w=fn(f,_,w))[0],_=w[1],w=w[2],{h:(((O=(x=Pe(f,_,w))-Le(f,_,w))==0?null:x==f?(_-w)/O:x==_?(w-f)/O+2:(f-_)/O+4)+360)%6*60/360,s:O==0?0:O/x,b:x,toString:Ft}},h.rgb2hsl=function(f,_,w){var x,O,W,Y;return f=(w=fn(f,_,w))[0],_=w[1],w=w[2],x=((O=Pe(f,_,w))+(W=Le(f,_,w)))/2,{h:(((Y=O-W)==0?null:O==f?(_-w)/Y:O==_?(w-f)/Y+2:(f-_)/Y+4)+360)%6*60/360,s:Y==0?0:x<.5?Y/(2*x):Y/(2-2*x),l:x,toString:Dt}},h._path2string=function(){return this.join(",").replace(Ge,"$1")},h._preload=function(f,_){var w=F.doc.createElement("img");w.style.cssText="position:absolute;left:-9999em;top:-9999em",w.onload=function(){_.call(this),this.onload=null,F.doc.body.removeChild(this)},w.onerror=function(){F.doc.body.removeChild(this)},F.doc.body.appendChild(w),w.src=f};function En(){return this.hex}function Jt(f,_){for(var w=[],x=0,O=f.length;O-2*!_>x;x+=2){var W=[{x:+f[x-2],y:+f[x-1]},{x:+f[x],y:+f[x+1]},{x:+f[x+2],y:+f[x+3]},{x:+f[x+4],y:+f[x+5]}];_?x?O-4==x?W[3]={x:+f[0],y:+f[1]}:O-2==x&&(W[2]={x:+f[0],y:+f[1]},W[3]={x:+f[2],y:+f[3]}):W[0]={x:+f[O-2],y:+f[O-1]}:O-4==x?W[3]=W[2]:x||(W[0]={x:+f[x],y:+f[x+1]}),w.push(["C",(-W[0].x+6*W[1].x+W[2].x)/6,(-W[0].y+6*W[1].y+W[2].y)/6,(W[1].x+6*W[2].x-W[3].x)/6,(W[1].y+6*W[2].y-W[3].y)/6,W[2].x,W[2].y])}return w}h.getRGB=Lt(function(f){if(!f||(f=H(f)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:En};if(f=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:En};!Ve[N](f.toLowerCase().substring(0,2))&&f.charAt()!="#"&&(f=ln(f));var _,w,x,O,W,Y,j=f.match(z);return j?(j[2]&&(x=te(j[2].substring(5),16),w=te(j[2].substring(3,5),16),_=te(j[2].substring(1,3),16)),j[3]&&(x=te((W=j[3].charAt(3))+W,16),w=te((W=j[3].charAt(2))+W,16),_=te((W=j[3].charAt(1))+W,16)),j[4]&&(Y=j[4][re](Se),_=B(Y[0]),Y[0].slice(-1)=="%"&&(_*=2.55),w=B(Y[1]),Y[1].slice(-1)=="%"&&(w*=2.55),x=B(Y[2]),Y[2].slice(-1)=="%"&&(x*=2.55),j[1].toLowerCase().slice(0,4)=="rgba"&&(O=B(Y[3])),Y[3]&&Y[3].slice(-1)=="%"&&(O/=100)),j[5]?(Y=j[5][re](Se),_=B(Y[0]),Y[0].slice(-1)=="%"&&(_*=2.55),w=B(Y[1]),Y[1].slice(-1)=="%"&&(w*=2.55),x=B(Y[2]),Y[2].slice(-1)=="%"&&(x*=2.55),(Y[0].slice(-3)=="deg"||Y[0].slice(-1)=="")&&(_/=360),j[1].toLowerCase().slice(0,4)=="hsba"&&(O=B(Y[3])),Y[3]&&Y[3].slice(-1)=="%"&&(O/=100),h.hsb2rgb(_,w,x,O)):j[6]?(Y=j[6][re](Se),_=B(Y[0]),Y[0].slice(-1)=="%"&&(_*=2.55),w=B(Y[1]),Y[1].slice(-1)=="%"&&(w*=2.55),x=B(Y[2]),Y[2].slice(-1)=="%"&&(x*=2.55),(Y[0].slice(-3)=="deg"||Y[0].slice(-1)=="")&&(_/=360),j[1].toLowerCase().slice(0,4)=="hsla"&&(O=B(Y[3])),Y[3]&&Y[3].slice(-1)=="%"&&(O/=100),h.hsl2rgb(_,w,x,O)):((j={r:_,g:w,b:x,toString:En}).hex="#"+(16777216|x|w<<8|_<<16).toString(16).slice(1),h.is(O,"finite")&&(j.opacity=O),j)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:En}},h),h.hsb=Lt(function(f,_,w){return h.hsb2rgb(f,_,w).hex}),h.hsl=Lt(function(f,_,w){return h.hsl2rgb(f,_,w).hex}),h.rgb=Lt(function(f,_,w){function x(O){return O+.5|0}return"#"+(16777216|x(w)|x(_)<<8|x(f)<<16).toString(16).slice(1)}),h.getColor=function(f){var _=this.getColor.start=this.getColor.start||{h:0,s:1,b:f||.75},w=this.hsb2rgb(_.h,_.s,_.b);return _.h+=.075,_.h>1&&(_.h=0,_.s-=.2,_.s<=0&&(this.getColor.start={h:0,s:1,b:_.b})),w.hex},h.getColor.reset=function(){delete this.start},h.parsePathString=function(f){if(!f)return null;var _=Pt(f);if(_.arr)return vn(_.arr);var w={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},x=[];return h.is(f,it)&&h.is(f[0],it)&&(x=vn(f)),x.length||H(f).replace(rt,function(O,W,Y){var j=[],q=W.toLowerCase();if(Y.replace(R,function(ne,be){be&&j.push(+be)}),q=="m"&&j.length>2&&(x.push([W][K](j.splice(0,2))),q="l",W=W=="m"?"l":"L"),q=="r")x.push([W][K](j));else for(;j.length>=w[q]&&(x.push([W][K](j.splice(0,w[q]))),w[q]););}),x.toString=h._path2string,_.arr=vn(x),x},h.parseTransformString=Lt(function(f){if(!f)return null;var _=[];return h.is(f,it)&&h.is(f[0],it)&&(_=vn(f)),_.length||H(f).replace(S,function(w,x,O){var W=[];ye.call(x),O.replace(R,function(Y,j){j&&W.push(+j)}),_.push([x][K](W))}),_.toString=h._path2string,_},this,function(f){if(!f)return f;for(var _=[],w=0;w<f.length;w++){for(var x=[],O=0;O<f[w].length;O++)x.push(f[w][O]);_.push(x)}return _});var Pt=function(f){var _=Pt.ps=Pt.ps||{};return _[f]?_[f].sleep=100:_[f]={sleep:100},setTimeout(function(){for(var w in _)_[N](w)&&w!=f&&(_[w].sleep--,!_[w].sleep&&delete _[w])}),_[f]};function vi(f,_,w,x,O){return f*(f*(-3*_+9*w-9*x+3*O)+6*_-12*w+6*x)-3*_+3*w}function cn(f,_,w,x,O,W,Y,j,q){q==null&&(q=1);for(var ne=(q=q>1?1:q<0?0:q)/2,be=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Oe=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],we=0,ve=0;ve<12;ve++){var Ce=ne*be[ve]+ne,ze=vi(Ce,f,w,O,Y),Ae=vi(Ce,_,x,W,j),xe=ze*ze+Ae*Ae;we+=Oe[ve]*le.sqrt(xe)}return ne*we}function Gn(f,_,w,x,O,W,Y,j){if(!(Pe(f,w)<Le(O,Y)||Le(f,w)>Pe(O,Y)||Pe(_,x)<Le(W,j)||Le(_,x)>Pe(W,j))){var q=(f-w)*(W-j)-(_-x)*(O-Y);if(q){var ne=((f*x-_*w)*(O-Y)-(f-w)*(O*j-W*Y))/q,be=((f*x-_*w)*(W-j)-(_-x)*(O*j-W*Y))/q,Oe=+ne.toFixed(2),we=+be.toFixed(2);if(!(Oe<+Le(f,w).toFixed(2)||Oe>+Pe(f,w).toFixed(2)||Oe<+Le(O,Y).toFixed(2)||Oe>+Pe(O,Y).toFixed(2)||we<+Le(_,x).toFixed(2)||we>+Pe(_,x).toFixed(2)||we<+Le(W,j).toFixed(2)||we>+Pe(W,j).toFixed(2)))return{x:ne,y:be}}}}function oi(f,_,w){var x=h.bezierBBox(f),O=h.bezierBBox(_);if(!h.isBBoxIntersect(x,O))return w?0:[];for(var W=cn.apply(0,f),Y=cn.apply(0,_),j=Pe(~~(W/5),1),q=Pe(~~(Y/5),1),ne=[],be=[],Oe={},we=w?0:[],ve=0;ve<j+1;ve++){var Ce=h.findDotsAtSegment.apply(h,f.concat(ve/j));ne.push({x:Ce.x,y:Ce.y,t:ve/j})}for(ve=0;ve<q+1;ve++)Ce=h.findDotsAtSegment.apply(h,_.concat(ve/q)),be.push({x:Ce.x,y:Ce.y,t:ve/q});for(ve=0;ve<j;ve++)for(var ze=0;ze<q;ze++){var Ae=ne[ve],xe=ne[ve+1],Qe=be[ze],Fe=be[ze+1],Be=Ze(xe.x-Ae.x)<.001?"y":"x",Re=Ze(Fe.x-Qe.x)<.001?"y":"x",vt=Gn(Ae.x,Ae.y,xe.x,xe.y,Qe.x,Qe.y,Fe.x,Fe.y);if(vt){if(Oe[vt.x.toFixed(4)]==vt.y.toFixed(4))continue;Oe[vt.x.toFixed(4)]=vt.y.toFixed(4);var ct=Ae.t+Ze((vt[Be]-Ae[Be])/(xe[Be]-Ae[Be]))*(xe.t-Ae.t),pt=Qe.t+Ze((vt[Re]-Qe[Re])/(Fe[Re]-Qe[Re]))*(Fe.t-Qe.t);ct>=0&&ct<=1.001&&pt>=0&&pt<=1.001&&(w?we++:we.push({x:vt.x,y:vt.y,t1:Le(ct,1),t2:Le(pt,1)}))}}return we}function Sn(f,_,w){f=h._path2curve(f),_=h._path2curve(_);for(var x,O,W,Y,j,q,ne,be,Oe,we,ve=w?0:[],Ce=0,ze=f.length;Ce<ze;Ce++){var Ae=f[Ce];if(Ae[0]=="M")x=j=Ae[1],O=q=Ae[2];else{Ae[0]=="C"?(Oe=[x,O].concat(Ae.slice(1)),x=Oe[6],O=Oe[7]):(Oe=[x,O,x,O,j,q,j,q],x=j,O=q);for(var xe=0,Qe=_.length;xe<Qe;xe++){var Fe=_[xe];if(Fe[0]=="M")W=ne=Fe[1],Y=be=Fe[2];else{Fe[0]=="C"?(we=[W,Y].concat(Fe.slice(1)),W=we[6],Y=we[7]):(we=[W,Y,W,Y,ne,be,ne,be],W=ne,Y=be);var Be=oi(Oe,we,w);if(w)ve+=Be;else{for(var Re=0,vt=Be.length;Re<vt;Re++)Be[Re].segment1=Ce,Be[Re].segment2=xe,Be[Re].bez1=Oe,Be[Re].bez2=we;ve=ve.concat(Be)}}}}}return ve}h.findDotsAtSegment=function(f,_,w,x,O,W,Y,j,q){var ne=1-q,be=je(ne,3),Oe=je(ne,2),we=q*q,ve=we*q,Ce=be*f+3*Oe*q*w+3*ne*q*q*O+ve*Y,ze=be*_+3*Oe*q*x+3*ne*q*q*W+ve*j,Ae=f+2*q*(w-f)+we*(O-2*w+f),xe=_+2*q*(x-_)+we*(W-2*x+_),Qe=w+2*q*(O-w)+we*(Y-2*O+w),Fe=x+2*q*(W-x)+we*(j-2*W+x),Be=ne*f+q*w,Re=ne*_+q*x,vt=ne*O+q*Y,ct=ne*W+q*j,pt=90-180*le.atan2(Ae-Qe,xe-Fe)/Je;return(Ae>Qe||xe<Fe)&&(pt+=180),{x:Ce,y:ze,m:{x:Ae,y:xe},n:{x:Qe,y:Fe},start:{x:Be,y:Re},end:{x:vt,y:ct},alpha:pt}},h.bezierBBox=function(f,_,w,x,O,W,Y,j){h.is(f,"array")||(f=[f,_,w,x,O,W,Y,j]);var q=bi.apply(null,f);return{x:q.min.x,y:q.min.y,x2:q.max.x,y2:q.max.y,width:q.max.x-q.min.x,height:q.max.y-q.min.y}},h.isPointInsideBBox=function(f,_,w){return _>=f.x&&_<=f.x2&&w>=f.y&&w<=f.y2},h.isBBoxIntersect=function(f,_){var w=h.isPointInsideBBox;return w(_,f.x,f.y)||w(_,f.x2,f.y)||w(_,f.x,f.y2)||w(_,f.x2,f.y2)||w(f,_.x,_.y)||w(f,_.x2,_.y)||w(f,_.x,_.y2)||w(f,_.x2,_.y2)||(f.x<_.x2&&f.x>_.x||_.x<f.x2&&_.x>f.x)&&(f.y<_.y2&&f.y>_.y||_.y<f.y2&&_.y>f.y)},h.pathIntersection=function(f,_){return Sn(f,_)},h.pathIntersectionNumber=function(f,_){return Sn(f,_,1)},h.isPointInsidePath=function(f,_,w){var x=h.pathBBox(f);return h.isPointInsideBBox(x,_,w)&&Sn(f,[["M",_,w],["H",x.x2+10]],1)%2==1},h._removedFactory=function(f){return function(){l("raphael.log",null,"Raphal: you are calling to method "+f+" of removed object",f)}};var Mn=h.pathBBox=function(f){var _=Pt(f);if(_.bbox)return lt(_.bbox);if(!f)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var w,x=0,O=0,W=[],Y=[],j=0,q=(f=li(f)).length;j<q;j++)if((w=f[j])[0]=="M")x=w[1],O=w[2],W.push(x),Y.push(O);else{var ne=bi(x,O,w[1],w[2],w[3],w[4],w[5],w[6]);W=W[K](ne.min.x,ne.max.x),Y=Y[K](ne.min.y,ne.max.y),x=w[5],O=w[6]}var be=Le[V](0,W),Oe=Le[V](0,Y),we=Pe[V](0,W),ve=Pe[V](0,Y),Ce=we-be,ze=ve-Oe,Ae={x:be,y:Oe,x2:we,y2:ve,width:Ce,height:ze,cx:be+Ce/2,cy:Oe+ze/2};return _.bbox=lt(Ae),Ae},vn=function(f){var _=lt(f);return _.toString=h._path2string,_},on=h._pathToRelative=function(f){var _=Pt(f);if(_.rel)return vn(_.rel);h.is(f,it)&&h.is(f&&f[0],it)||(f=h.parsePathString(f));var w=[],x=0,O=0,W=0,Y=0,j=0;f[0][0]=="M"&&(W=x=f[0][1],Y=O=f[0][2],j++,w.push(["M",x,O]));for(var q=j,ne=f.length;q<ne;q++){var be=w[q]=[],Oe=f[q];if(Oe[0]!=ye.call(Oe[0]))switch(be[0]=ye.call(Oe[0]),be[0]){case"a":be[1]=Oe[1],be[2]=Oe[2],be[3]=Oe[3],be[4]=Oe[4],be[5]=Oe[5],be[6]=+(Oe[6]-x).toFixed(3),be[7]=+(Oe[7]-O).toFixed(3);break;case"v":be[1]=+(Oe[1]-O).toFixed(3);break;case"m":W=Oe[1],Y=Oe[2];default:for(var we=1,ve=Oe.length;we<ve;we++)be[we]=+(Oe[we]-(we%2?x:O)).toFixed(3)}else{be=w[q]=[],Oe[0]=="m"&&(W=Oe[1]+x,Y=Oe[2]+O);for(var Ce=0,ze=Oe.length;Ce<ze;Ce++)w[q][Ce]=Oe[Ce]}var Ae=w[q].length;switch(w[q][0]){case"z":x=W,O=Y;break;case"h":x+=+w[q][Ae-1];break;case"v":O+=+w[q][Ae-1];break;default:x+=+w[q][Ae-2],O+=+w[q][Ae-1]}}return w.toString=h._path2string,_.rel=vn(w),w},zn=h._pathToAbsolute=function(f){var _=Pt(f);if(_.abs)return vn(_.abs);if(h.is(f,it)&&h.is(f&&f[0],it)||(f=h.parsePathString(f)),!f||!f.length)return[["M",0,0]];var w=[],x=0,O=0,W=0,Y=0,j=0;f[0][0]=="M"&&(W=x=+f[0][1],Y=O=+f[0][2],j++,w[0]=["M",x,O]);for(var q,ne,be=f.length==3&&f[0][0]=="M"&&f[1][0].toUpperCase()=="R"&&f[2][0].toUpperCase()=="Z",Oe=j,we=f.length;Oe<we;Oe++){if(w.push(q=[]),(ne=f[Oe])[0]!=ee.call(ne[0]))switch(q[0]=ee.call(ne[0]),q[0]){case"A":q[1]=ne[1],q[2]=ne[2],q[3]=ne[3],q[4]=ne[4],q[5]=ne[5],q[6]=+(ne[6]+x),q[7]=+(ne[7]+O);break;case"V":q[1]=+ne[1]+O;break;case"H":q[1]=+ne[1]+x;break;case"R":for(var ve=[x,O][K](ne.slice(1)),Ce=2,ze=ve.length;Ce<ze;Ce++)ve[Ce]=+ve[Ce]+x,ve[++Ce]=+ve[Ce]+O;w.pop(),w=w[K](Jt(ve,be));break;case"M":W=+ne[1]+x,Y=+ne[2]+O;default:for(Ce=1,ze=ne.length;Ce<ze;Ce++)q[Ce]=+ne[Ce]+(Ce%2?x:O)}else if(ne[0]=="R")ve=[x,O][K](ne.slice(1)),w.pop(),w=w[K](Jt(ve,be)),q=["R"][K](ne.slice(-2));else for(var Ae=0,xe=ne.length;Ae<xe;Ae++)q[Ae]=ne[Ae];switch(q[0]){case"Z":x=W,O=Y;break;case"H":x=q[1];break;case"V":O=q[1];break;case"M":W=q[q.length-2],Y=q[q.length-1];default:x=q[q.length-2],O=q[q.length-1]}}return w.toString=h._path2string,_.abs=vn(w),w},Kn=function(f,_,w,x){return[f,_,w,x,w,x]},$n=function(f,_,w,x,O,W){return[1/3*f+2/3*w,1/3*_+2/3*x,1/3*O+2/3*w,1/3*W+2/3*x,O,W]},yi=function(f,_,w,x,O,W,Y,j,q,ne){var be,Oe=120*Je/180,we=Je/180*(+O||0),ve=[],Ce=Lt(function(U,Z,se){return{x:U*le.cos(se)-Z*le.sin(se),y:U*le.sin(se)+Z*le.cos(se)}});if(ne)ct=ne[0],pt=ne[1],Re=ne[2],vt=ne[3];else{f=(be=Ce(f,_,-we)).x,_=be.y,j=(be=Ce(j,q,-we)).x,q=be.y;var ze=(f-j)/2,Ae=(_-q)/2,xe=ze*ze/(w*w)+Ae*Ae/(x*x);xe>1&&(w*=xe=le.sqrt(xe),x*=xe);var Qe=w*w,Fe=x*x,Be=(W==Y?-1:1)*le.sqrt(Ze((Qe*Fe-Qe*Ae*Ae-Fe*ze*ze)/(Qe*Ae*Ae+Fe*ze*ze))),Re=Be*w*Ae/x+(f+j)/2,vt=Be*-x*ze/w+(_+q)/2,ct=le.asin(((_-vt)/x).toFixed(9)),pt=le.asin(((q-vt)/x).toFixed(9));(ct=f<Re?Je-ct:ct)<0&&(ct=2*Je+ct),(pt=j<Re?Je-pt:pt)<0&&(pt=2*Je+pt),Y&&ct>pt&&(ct-=2*Je),!Y&&pt>ct&&(pt-=2*Je)}var ji=pt-ct;if(Ze(ji)>Oe){var nr=pt,Fn=j,wi=q;pt=ct+Oe*(Y&&pt>ct?1:-1),j=Re+w*le.cos(pt),q=vt+x*le.sin(pt),ve=yi(j,q,w,x,O,0,Y,Fn,wi,[pt,nr,Re,vt])}ji=pt-ct;var Yi=le.cos(ct),xi=le.sin(ct),ir=le.cos(pt),Qn=le.sin(pt),Fi=le.tan(ji/4),T=4/3*w*Fi,D=4/3*x*Fi,a=[f,_],c=[f+T*xi,_-D*Yi],u=[j+T*Qn,q-D*ir],d=[j,q];if(c[0]=2*a[0]-c[0],c[1]=2*a[1]-c[1],ne)return[c,u,d][K](ve);for(var v=[],b=0,I=(ve=[c,u,d][K](ve).join()[re](",")).length;b<I;b++)v[b]=b%2?Ce(ve[b-1],ve[b],we).y:Ce(ve[b],ve[b+1],we).x;return v},ai=function(f,_,w,x,O,W,Y,j,q){var ne=1-q;return{x:je(ne,3)*f+3*je(ne,2)*q*w+3*ne*q*q*O+je(q,3)*Y,y:je(ne,3)*_+3*je(ne,2)*q*x+3*ne*q*q*W+je(q,3)*j}},bi=Lt(function(f,_,w,x,O,W,Y,j){var q,ne=O-2*w+f-(Y-2*O+w),be=2*(w-f)-2*(O-w),Oe=f-w,we=(-be+le.sqrt(be*be-4*ne*Oe))/2/ne,ve=(-be-le.sqrt(be*be-4*ne*Oe))/2/ne,Ce=[_,j],ze=[f,Y];return Ze(we)>"1e12"&&(we=.5),Ze(ve)>"1e12"&&(ve=.5),we>0&&we<1&&(q=ai(f,_,w,x,O,W,Y,j,we),ze.push(q.x),Ce.push(q.y)),ve>0&&ve<1&&(q=ai(f,_,w,x,O,W,Y,j,ve),ze.push(q.x),Ce.push(q.y)),ne=W-2*x+_-(j-2*W+x),Oe=_-x,we=(-(be=2*(x-_)-2*(W-x))+le.sqrt(be*be-4*ne*Oe))/2/ne,ve=(-be-le.sqrt(be*be-4*ne*Oe))/2/ne,Ze(we)>"1e12"&&(we=.5),Ze(ve)>"1e12"&&(ve=.5),we>0&&we<1&&(q=ai(f,_,w,x,O,W,Y,j,we),ze.push(q.x),Ce.push(q.y)),ve>0&&ve<1&&(q=ai(f,_,w,x,O,W,Y,j,ve),ze.push(q.x),Ce.push(q.y)),{min:{x:Le[V](0,ze),y:Le[V](0,Ce)},max:{x:Pe[V](0,ze),y:Pe[V](0,Ce)}}}),li=h._path2curve=Lt(function(f,_){var w=!_&&Pt(f);if(!_&&w.curve)return vn(w.curve);for(var x=zn(f),O=_&&zn(_),W={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Y={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},j=function(Be,Re,vt){var ct,pt;if(!Be)return["C",Re.x,Re.y,Re.x,Re.y,Re.x,Re.y];switch(!(Be[0]in{T:1,Q:1})&&(Re.qx=Re.qy=null),Be[0]){case"M":Re.X=Be[1],Re.Y=Be[2];break;case"A":Be=["C"][K](yi[V](0,[Re.x,Re.y][K](Be.slice(1))));break;case"S":vt=="C"||vt=="S"?(ct=2*Re.x-Re.bx,pt=2*Re.y-Re.by):(ct=Re.x,pt=Re.y),Be=["C",ct,pt][K](Be.slice(1));break;case"T":vt=="Q"||vt=="T"?(Re.qx=2*Re.x-Re.qx,Re.qy=2*Re.y-Re.qy):(Re.qx=Re.x,Re.qy=Re.y),Be=["C"][K]($n(Re.x,Re.y,Re.qx,Re.qy,Be[1],Be[2]));break;case"Q":Re.qx=Be[1],Re.qy=Be[2],Be=["C"][K]($n(Re.x,Re.y,Be[1],Be[2],Be[3],Be[4]));break;case"L":Be=["C"][K](Kn(Re.x,Re.y,Be[1],Be[2]));break;case"H":Be=["C"][K](Kn(Re.x,Re.y,Be[1],Re.y));break;case"V":Be=["C"][K](Kn(Re.x,Re.y,Re.x,Be[1]));break;case"Z":Be=["C"][K](Kn(Re.x,Re.y,Re.X,Re.Y))}return Be},q=function(Be,Re){if(Be[Re].length>7){Be[Re].shift();for(var vt=Be[Re];vt.length;)be[Re]="A",O&&(Oe[Re]="A"),Be.splice(Re++,0,["C"][K](vt.splice(0,6)));Be.splice(Re,1),ze=Pe(x.length,O&&O.length||0)}},ne=function(Be,Re,vt,ct,pt){Be&&Re&&Be[pt][0]=="M"&&Re[pt][0]!="M"&&(Re.splice(pt,0,["M",ct.x,ct.y]),vt.bx=0,vt.by=0,vt.x=Be[pt][1],vt.y=Be[pt][2],ze=Pe(x.length,O&&O.length||0))},be=[],Oe=[],we="",ve="",Ce=0,ze=Pe(x.length,O&&O.length||0);Ce<ze;Ce++){x[Ce]&&(we=x[Ce][0]),we!="C"&&(be[Ce]=we,Ce&&(ve=be[Ce-1])),x[Ce]=j(x[Ce],W,ve),be[Ce]!="A"&&we=="C"&&(be[Ce]="C"),q(x,Ce),O&&(O[Ce]&&(we=O[Ce][0]),we!="C"&&(Oe[Ce]=we,Ce&&(ve=Oe[Ce-1])),O[Ce]=j(O[Ce],Y,ve),Oe[Ce]!="A"&&we=="C"&&(Oe[Ce]="C"),q(O,Ce)),ne(x,O,W,Y,Ce),ne(O,x,Y,W,Ce);var Ae=x[Ce],xe=O&&O[Ce],Qe=Ae.length,Fe=O&&xe.length;W.x=Ae[Qe-2],W.y=Ae[Qe-1],W.bx=B(Ae[Qe-4])||W.x,W.by=B(Ae[Qe-3])||W.y,Y.bx=O&&(B(xe[Fe-4])||Y.x),Y.by=O&&(B(xe[Fe-3])||Y.y),Y.x=O&&xe[Fe-2],Y.y=O&&xe[Fe-1]}return O||(w.curve=vn(x)),O?[x,O]:x},null,vn),An=(h._parseDots=Lt(function(f){for(var _=[],w=0,x=f.length;w<x;w++){var O={},W=f[w].match(/^([^:]*):?([\d\.]*)/);if(O.color=h.getRGB(W[1]),O.color.error)return null;O.opacity=O.color.opacity,O.color=O.color.hex,W[2]&&(O.offset=W[2]+"%"),_.push(O)}for(w=1,x=_.length-1;w<x;w++)if(!_[w].offset){for(var Y=B(_[w-1].offset||0),j=0,q=w+1;q<x;q++)if(_[q].offset){j=_[q].offset;break}j||(j=100,q=x);for(var ne=((j=B(j))-Y)/(q-w+1);w<q;w++)Y+=ne,_[w].offset=Y+"%"}return _}),h._tear=function(f,_){f==_.top&&(_.top=f.prev),f==_.bottom&&(_.bottom=f.next),f.next&&(f.next.prev=f.prev),f.prev&&(f.prev.next=f.next)}),ci=(h._tofront=function(f,_){_.top!==f&&(An(f,_),f.next=null,f.prev=_.top,_.top.next=f,_.top=f)},h._toback=function(f,_){_.bottom!==f&&(An(f,_),f.next=_.bottom,f.prev=null,_.bottom.prev=f,_.bottom=f)},h._insertafter=function(f,_,w){An(f,w),_==w.top&&(w.top=f),_.next&&(_.next.prev=f),f.next=_.next,f.prev=_,_.next=f},h._insertbefore=function(f,_,w){An(f,w),_==w.bottom&&(w.bottom=f),_.prev&&(_.prev.next=f),f.prev=_.prev,_.prev=f,f.next=_},h.toMatrix=function(f,_){var w=Mn(f),x={_:{transform:de},getBBox:function(){return w}};return dr(x,_),x.matrix}),dr=(h.transformPath=function(f,_){return Ke(f,ci(f,_))},h._extractTransform=function(f,_){if(_==null)return f._.transform;_=H(_).replace(/\.{3}|\u2026/g,f._.transform||de);var w,x,O=h.parseTransformString(_),W=0,Y=1,j=1,q=f._,ne=new jn;if(q.transform=O||[],O)for(var be=0,Oe=O.length;be<Oe;be++){var we,ve,Ce,ze,Ae,xe=O[be],Qe=xe.length,Fe=H(xe[0]).toLowerCase(),Be=xe[0]!=Fe,Re=Be?ne.invert():0;Fe=="t"&&Qe==3?Be?(we=Re.x(0,0),ve=Re.y(0,0),Ce=Re.x(xe[1],xe[2]),ze=Re.y(xe[1],xe[2]),ne.translate(Ce-we,ze-ve)):ne.translate(xe[1],xe[2]):Fe=="r"?Qe==2?(Ae=Ae||f.getBBox(1),ne.rotate(xe[1],Ae.x+Ae.width/2,Ae.y+Ae.height/2),W+=xe[1]):Qe==4&&(Be?(Ce=Re.x(xe[2],xe[3]),ze=Re.y(xe[2],xe[3]),ne.rotate(xe[1],Ce,ze)):ne.rotate(xe[1],xe[2],xe[3]),W+=xe[1]):Fe=="s"?Qe==2||Qe==3?(Ae=Ae||f.getBBox(1),ne.scale(xe[1],xe[Qe-1],Ae.x+Ae.width/2,Ae.y+Ae.height/2),Y*=xe[1],j*=xe[Qe-1]):Qe==5&&(Be?(Ce=Re.x(xe[3],xe[4]),ze=Re.y(xe[3],xe[4]),ne.scale(xe[1],xe[2],Ce,ze)):ne.scale(xe[1],xe[2],xe[3],xe[4]),Y*=xe[1],j*=xe[2]):Fe=="m"&&Qe==7&&ne.add(xe[1],xe[2],xe[3],xe[4],xe[5],xe[6]),q.dirtyT=1,f.matrix=ne}f.matrix=ne,q.sx=Y,q.sy=j,q.deg=W,q.dx=w=ne.e,q.dy=x=ne.f,Y==1&&j==1&&!W&&q.bbox?(q.bbox.x+=+w,q.bbox.y+=+x):q.dirtyT=1}),Jn=function(f){var _=f[0];switch(_.toLowerCase()){case"t":return[_,0,0];case"m":return[_,1,0,0,1,0,0];case"r":return f.length==4?[_,0,f[2],f[3]]:[_,0];case"s":return f.length==5?[_,1,1,f[3],f[4]]:f.length==3?[_,1,1]:[_,1]}},yn=h._equaliseTransform=function(f,_){_=H(_).replace(/\.{3}|\u2026/g,f),f=h.parseTransformString(f)||[],_=h.parseTransformString(_)||[];for(var w,x,O,W,Y=Pe(f.length,_.length),j=[],q=[],ne=0;ne<Y;ne++){if(O=f[ne]||Jn(_[ne]),W=_[ne]||Jn(O),O[0]!=W[0]||O[0].toLowerCase()=="r"&&(O[2]!=W[2]||O[3]!=W[3])||O[0].toLowerCase()=="s"&&(O[3]!=W[3]||O[4]!=W[4]))return;for(j[ne]=[],q[ne]=[],w=0,x=Pe(O.length,W.length);w<x;w++)w in O&&(j[ne][w]=O[w]),w in W&&(q[ne][w]=W[w])}return{from:j,to:q}};function jn(f,_,w,x,O,W){f!=null?(this.a=+f,this.b=+_,this.c=+w,this.d=+x,this.e=+O,this.f=+W):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}h._getContainer=function(f,_,w,x){var O;if((O=x!=null||h.is(f,"object")?f:F.doc.getElementById(f))!=null)return O.tagName?_==null?{container:O,width:O.style.pixelWidth||O.offsetWidth,height:O.style.pixelHeight||O.offsetHeight}:{container:O,width:_,height:w}:{container:1,x:f,y:_,width:w,height:x}},h.pathToRelative=on,h._engine={},h.path2curve=li,h.matrix=function(f,_,w,x,O,W){return new jn(f,_,w,x,O,W)},function(f){function _(x){return x[0]*x[0]+x[1]*x[1]}function w(x){var O=le.sqrt(_(x));x[0]&&(x[0]/=O),x[1]&&(x[1]/=O)}f.add=function(x,O,W,Y,j,q){var ne,be,Oe,we,ve=[[],[],[]],Ce=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],ze=[[x,W,j],[O,Y,q],[0,0,1]];for(x&&x instanceof jn&&(ze=[[x.a,x.c,x.e],[x.b,x.d,x.f],[0,0,1]]),ne=0;ne<3;ne++)for(be=0;be<3;be++){for(we=0,Oe=0;Oe<3;Oe++)we+=Ce[ne][Oe]*ze[Oe][be];ve[ne][be]=we}this.a=ve[0][0],this.b=ve[1][0],this.c=ve[0][1],this.d=ve[1][1],this.e=ve[0][2],this.f=ve[1][2]},f.invert=function(){var x=this,O=x.a*x.d-x.b*x.c;return new jn(x.d/O,-x.b/O,-x.c/O,x.a/O,(x.c*x.f-x.d*x.e)/O,(x.b*x.e-x.a*x.f)/O)},f.clone=function(){return new jn(this.a,this.b,this.c,this.d,this.e,this.f)},f.translate=function(x,O){this.add(1,0,0,1,x,O)},f.scale=function(x,O,W,Y){O==null&&(O=x),(W||Y)&&this.add(1,0,0,1,W,Y),this.add(x,0,0,O,0,0),(W||Y)&&this.add(1,0,0,1,-W,-Y)},f.rotate=function(x,O,W){x=h.rad(x),O=O||0,W=W||0;var Y=+le.cos(x).toFixed(9),j=+le.sin(x).toFixed(9);this.add(Y,j,-j,Y,O,W),this.add(1,0,0,1,-O,-W)},f.x=function(x,O){return x*this.a+O*this.c+this.e},f.y=function(x,O){return x*this.b+O*this.d+this.f},f.get=function(x){return+this[H.fromCharCode(97+x)].toFixed(4)},f.toString=function(){return h.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},f.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},f.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},f.split=function(){var x={};x.dx=this.e,x.dy=this.f;var O=[[this.a,this.c],[this.b,this.d]];x.scalex=le.sqrt(_(O[0])),w(O[0]),x.shear=O[0][0]*O[1][0]+O[0][1]*O[1][1],O[1]=[O[1][0]-O[0][0]*x.shear,O[1][1]-O[0][1]*x.shear],x.scaley=le.sqrt(_(O[1])),w(O[1]),x.shear/=x.scaley;var W=-O[0][1],Y=O[1][1];return Y<0?(x.rotate=h.deg(le.acos(Y)),W<0&&(x.rotate=360-x.rotate)):x.rotate=h.deg(le.asin(W)),x.isSimple=!(+x.shear.toFixed(9)||x.scalex.toFixed(9)!=x.scaley.toFixed(9)&&x.rotate),x.isSuperSimple=!+x.shear.toFixed(9)&&x.scalex.toFixed(9)==x.scaley.toFixed(9)&&!x.rotate,x.noRotation=!+x.shear.toFixed(9)&&!x.rotate,x},f.toTransformString=function(x){var O=x||this[re]();return O.isSimple?(O.scalex=+O.scalex.toFixed(4),O.scaley=+O.scaley.toFixed(4),O.rotate=+O.rotate.toFixed(4),(O.dx||O.dy?"t"+[O.dx,O.dy]:de)+(O.scalex!=1||O.scaley!=1?"s"+[O.scalex,O.scaley,0,0]:de)+(O.rotate?"r"+[O.rotate,0,0]:de)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(jn.prototype);for(var Rn=function(){this.returnValue=!1},Mi=function(){return this.originalEvent.preventDefault()},Er=function(){this.cancelBubble=!0},zi=function(){return this.originalEvent.stopPropagation()},pr=function(f){var _=F.doc.documentElement.scrollTop||F.doc.body.scrollTop,w=F.doc.documentElement.scrollLeft||F.doc.body.scrollLeft;return{x:f.clientX+w,y:f.clientY+_}},Wr=F.doc.addEventListener?function(f,_,w,x){var O=function(Y){var j=pr(Y);return w.call(x,Y,j.x,j.y)};if(f.addEventListener(_,O,!1),ae&&Te[_]){var W=function(Y){for(var j=pr(Y),q=Y,ne=0,be=Y.targetTouches&&Y.targetTouches.length;ne<be;ne++)if(Y.targetTouches[ne].target==f){(Y=Y.targetTouches[ne]).originalEvent=q,Y.preventDefault=Mi,Y.stopPropagation=zi;break}return w.call(x,Y,j.x,j.y)};f.addEventListener(Te[_],W,!1)}return function(){return f.removeEventListener(_,O,!1),ae&&Te[_]&&f.removeEventListener(Te[_],W,!1),!0}}:F.doc.attachEvent?function(f,_,w,x){var O=function(W){W=W||F.win.event;var Y=F.doc.documentElement.scrollTop||F.doc.body.scrollTop,j=F.doc.documentElement.scrollLeft||F.doc.body.scrollLeft,q=W.clientX+j,ne=W.clientY+Y;return W.preventDefault=W.preventDefault||Rn,W.stopPropagation=W.stopPropagation||Er,w.call(x,W,q,ne)};return f.attachEvent("on"+_,O),function(){return f.detachEvent("on"+_,O),!0}}:void 0,nt=[],ie=function(f){for(var _,w=f.clientX,x=f.clientY,O=F.doc.documentElement.scrollTop||F.doc.body.scrollTop,W=F.doc.documentElement.scrollLeft||F.doc.body.scrollLeft,Y=nt.length;Y--;){if(_=nt[Y],ae&&f.touches){for(var j,q=f.touches.length;q--;)if((j=f.touches[q]).identifier==_.el._drag.id){w=j.clientX,x=j.clientY,(f.originalEvent?f.originalEvent:f).preventDefault();break}}else f.preventDefault();var ne,be=_.el.node,Oe=be.nextSibling,we=be.parentNode,ve=be.style.display;F.win.opera&&we.removeChild(be),be.style.display="none",ne=_.el.paper.getElementByPoint(w,x),be.style.display=ve,F.win.opera&&(Oe?we.insertBefore(be,Oe):we.appendChild(be)),ne&&l("raphael.drag.over."+_.el.id,_.el,ne),w+=W,x+=O,l("raphael.drag.move."+_.el.id,_.move_scope||_.el,w-_.el._drag.x,x-_.el._drag.y,w,x,f)}},Ue=function(f){h.unmousemove(ie).unmouseup(Ue);for(var _,w=nt.length;w--;)(_=nt[w]).el._drag={},l("raphael.drag.end."+_.el.id,_.end_scope||_.start_scope||_.move_scope||_.el,f);nt=[]},We=h.el={},Vt=_e.length;Vt--;)(function(f){h[f]=We[f]=function(_,w){return h.is(_,"function")&&(this.events=this.events||[],this.events.push({name:f,f:_,unbind:Wr(this.shape||this.node||F.doc,f,_,w||this)})),this},h["un"+f]=We["un"+f]=function(_){for(var w=this.events||[],x=w.length;x--;)w[x].name!=f||!h.is(_,"undefined")&&w[x].f!=_||(w[x].unbind(),w.splice(x,1),!w.length&&delete this.events);return this}})(_e[Vt]);We.data=function(f,_){var w=$[this.id]=$[this.id]||{};if(arguments.length==0)return w;if(arguments.length==1){if(h.is(f,"object")){for(var x in f)f[N](x)&&this.data(x,f[x]);return this}return l("raphael.data.get."+this.id,this,w[f],f),w[f]}return w[f]=_,l("raphael.data.set."+this.id,this,_,f),this},We.removeData=function(f){return f==null?delete $[this.id]:$[this.id]&&delete $[this.id][f],this},We.getData=function(){return lt($[this.id]||{})},We.hover=function(f,_,w,x){return this.mouseover(f,w).mouseout(_,x||w)},We.unhover=function(f,_){return this.unmouseover(f).unmouseout(_)};var Zt=[];We.drag=function(f,_,w,x,O,W){function Y(j){(j.originalEvent||j).preventDefault();var q=j.clientX,ne=j.clientY,be=F.doc.documentElement.scrollTop||F.doc.body.scrollTop,Oe=F.doc.documentElement.scrollLeft||F.doc.body.scrollLeft;if(this._drag.id=j.identifier,ae&&j.touches){for(var we,ve=j.touches.length;ve--;)if(we=j.touches[ve],this._drag.id=we.identifier,we.identifier==this._drag.id){q=we.clientX,ne=we.clientY;break}}this._drag.x=q+Oe,this._drag.y=ne+be,!nt.length&&h.mousemove(ie).mouseup(Ue),nt.push({el:this,move_scope:x,start_scope:O,end_scope:W}),_&&l.on("raphael.drag.start."+this.id,_),f&&l.on("raphael.drag.move."+this.id,f),w&&l.on("raphael.drag.end."+this.id,w),l("raphael.drag.start."+this.id,O||x||this,this._drag.x,this._drag.y,j)}return this._drag={},Zt.push({el:this,start:Y}),this.mousedown(Y),this},We.onDragOver=function(f){f?l.on("raphael.drag.over."+this.id,f):l.unbind("raphael.drag.over."+this.id)},We.undrag=function(){for(var f=Zt.length;f--;)Zt[f].el==this&&(this.unmousedown(Zt[f].start),Zt.splice(f,1),l.unbind("raphael.drag.*."+this.id));!Zt.length&&h.unmousemove(ie).unmouseup(Ue),nt=[]},m.circle=function(f,_,w){var x=h._engine.circle(this,f||0,_||0,w||0);return this.__set__&&this.__set__.push(x),x},m.rect=function(f,_,w,x,O){var W=h._engine.rect(this,f||0,_||0,w||0,x||0,O||0);return this.__set__&&this.__set__.push(W),W},m.ellipse=function(f,_,w,x){var O=h._engine.ellipse(this,f||0,_||0,w||0,x||0);return this.__set__&&this.__set__.push(O),O},m.path=function(f){f&&!h.is(f,"string")&&!h.is(f[0],it)&&(f+=de);var _=h._engine.path(h.format[V](h,arguments),this);return this.__set__&&this.__set__.push(_),_},m.image=function(f,_,w,x,O){var W=h._engine.image(this,f||"about:blank",_||0,w||0,x||0,O||0);return this.__set__&&this.__set__.push(W),W},m.text=function(f,_,w){var x=h._engine.text(this,f||0,_||0,H(w));return this.__set__&&this.__set__.push(x),x},m.set=function(f){!h.is(f,"array")&&(f=Array.prototype.splice.call(arguments,0,arguments.length));var _=new Tr(f);return this.__set__&&this.__set__.push(_),_.paper=this,_.type="set",_},m.setStart=function(f){this.__set__=f||this.set()},m.setFinish=function(f){var _=this.__set__;return delete this.__set__,_},m.getSize=function(){var f=this.canvas.parentNode;return{width:f.offsetWidth,height:f.offsetHeight}},m.setSize=function(f,_){return h._engine.setSize.call(this,f,_)},m.setViewBox=function(f,_,w,x,O){return h._engine.setViewBox.call(this,f,_,w,x,O)},m.top=m.bottom=null,m.raphael=h;function dn(){return this.x+g+this.y+g+this.width+"  "+this.height}m.getElementByPoint=function(f,_){var w,x,O,W,Y,j,q,ne=this.canvas,be=F.doc.elementFromPoint(f,_);if(F.win.opera&&be.tagName=="svg"){var Oe=(x=(w=ne).getBoundingClientRect(),O=w.ownerDocument,W=O.body,Y=O.documentElement,j=Y.clientTop||W.clientTop||0,q=Y.clientLeft||W.clientLeft||0,{y:x.top+(F.win.pageYOffset||Y.scrollTop||W.scrollTop)-j,x:x.left+(F.win.pageXOffset||Y.scrollLeft||W.scrollLeft)-q}),we=ne.createSVGRect();we.x=f-Oe.x,we.y=_-Oe.y,we.width=we.height=1;var ve=ne.getIntersectionList(we,null);ve.length&&(be=ve[ve.length-1])}if(!be)return null;for(;be.parentNode&&be!=ne.parentNode&&!be.raphael;)be=be.parentNode;return be==this.canvas.parentNode&&(be=ne),be=be&&be.raphael?this.getById(be.raphaelid):null},m.getElementsByBBox=function(f){var _=this.set();return this.forEach(function(w){h.isBBoxIntersect(w.getBBox(),f)&&_.push(w)}),_},m.getById=function(f){for(var _=this.bottom;_;){if(_.id==f)return _;_=_.next}return null},m.forEach=function(f,_){for(var w=this.bottom;w;){if(f.call(_,w)===!1)return this;w=w.next}return this},m.getElementsByPoint=function(f,_){var w=this.set();return this.forEach(function(x){x.isPointInside(f,_)&&w.push(x)}),w},We.isPointInside=function(f,_){var w=this.realPath=tt[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(w=h.transformPath(w,this.attr("transform"))),h.isPointInsidePath(w,f,_)},We.getBBox=function(f){if(this.removed)return{};var _=this._;return f?(!_.dirty&&_.bboxwt||(this.realPath=tt[this.type](this),_.bboxwt=Mn(this.realPath),_.bboxwt.toString=dn,_.dirty=0),_.bboxwt):((_.dirty||_.dirtyT||!_.bbox)&&(!_.dirty&&this.realPath||(_.bboxwt=0,this.realPath=tt[this.type](this)),_.bbox=Mn(Ke(this.realPath,this.matrix)),_.bbox.toString=dn,_.dirty=_.dirtyT=0),_.bbox)},We.clone=function(){if(this.removed)return null;var f=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(f),f},We.glow=function(f){if(this.type=="text")return null;var _={width:((f=f||{}).width||10)+(+this.attr("stroke-width")||1),fill:f.fill||!1,opacity:f.opacity==null?.5:f.opacity,offsetx:f.offsetx||0,offsety:f.offsety||0,color:f.color||"#000"},w=_.width/2,x=this.paper,O=x.set(),W=this.realPath||tt[this.type](this);W=this.matrix?Ke(W,this.matrix):W;for(var Y=1;Y<w+1;Y++)O.push(x.path(W).attr({stroke:_.color,fill:_.fill?_.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(_.width/w*Y).toFixed(3),opacity:+(_.opacity/w).toFixed(3)}));return O.insertBefore(this).translate(_.offsetx,_.offsety)};var pn=function(f,_,w,x,O,W,Y,j,q){return q==null?cn(f,_,w,x,O,W,Y,j):h.findDotsAtSegment(f,_,w,x,O,W,Y,j,function(ne,be,Oe,we,ve,Ce,ze,Ae,xe){if(!(xe<0||cn(ne,be,Oe,we,ve,Ce,ze,Ae)<xe)){var Qe,Fe=.5,Be=1-Fe;for(Qe=cn(ne,be,Oe,we,ve,Ce,ze,Ae,Be);Ze(Qe-xe)>.01;)Qe=cn(ne,be,Oe,we,ve,Ce,ze,Ae,Be+=(Qe<xe?1:-1)*(Fe/=2));return Be}}(f,_,w,x,O,W,Y,j,q))},gn=function(f,_){return function(w,x,O){for(var W,Y,j,q,ne,be="",Oe={},we=0,ve=0,Ce=(w=li(w)).length;ve<Ce;ve++){if((j=w[ve])[0]=="M")W=+j[1],Y=+j[2];else{if(we+(q=pn(W,Y,j[1],j[2],j[3],j[4],j[5],j[6]))>x){if(_&&!Oe.start){if(be+=["C"+(ne=pn(W,Y,j[1],j[2],j[3],j[4],j[5],j[6],x-we)).start.x,ne.start.y,ne.m.x,ne.m.y,ne.x,ne.y],O)return be;Oe.start=be,be=["M"+ne.x,ne.y+"C"+ne.n.x,ne.n.y,ne.end.x,ne.end.y,j[5],j[6]].join(),we+=q,W=+j[5],Y=+j[6];continue}if(!f&&!_)return{x:(ne=pn(W,Y,j[1],j[2],j[3],j[4],j[5],j[6],x-we)).x,y:ne.y,alpha:ne.alpha}}we+=q,W=+j[5],Y=+j[6]}be+=j.shift()+j}return Oe.end=be,(ne=f?we:_?Oe:h.findDotsAtSegment(W,Y,j[0],j[1],j[2],j[3],j[4],j[5],1)).alpha&&(ne={x:ne.x,y:ne.y,alpha:ne.alpha}),ne}},hi=gn(1),Nt=gn(),Xt=gn(0,1);h.getTotalLength=hi,h.getPointAtLength=Nt,h.getSubpath=function(f,_,w){if(this.getTotalLength(f)-w<1e-6)return Xt(f,_).end;var x=Xt(f,w,1);return _?Xt(x,_).end:x},We.getTotalLength=function(){var f=this.getPath();if(f)return this.node.getTotalLength?this.node.getTotalLength():hi(f)},We.getPointAtLength=function(f){var _=this.getPath();if(_)return Nt(_,f)},We.getPath=function(){var f,_=h._getPath[this.type];if(this.type!="text"&&this.type!="set")return _&&(f=_(this)),f},We.getSubpath=function(f,_){var w=this.getPath();if(w)return h.getSubpath(w,f,_)};var hn=h.easing_formulas={linear:function(f){return f},"<":function(f){return je(f,1.7)},">":function(f){return je(f,.48)},"<>":function(f){var _=.48-f/1.04,w=le.sqrt(.1734+_*_),x=w-_,O=-w-_,W=je(Ze(x),1/3)*(x<0?-1:1)+je(Ze(O),1/3)*(O<0?-1:1)+.5;return 3*(1-W)*W*W+W*W*W},backIn:function(f){var _=1.70158;return f*f*((_+1)*f-_)},backOut:function(f){var _=1.70158;return(f-=1)*f*((_+1)*f+_)+1},elastic:function(f){return f==!!f?f:je(2,-10*f)*le.sin(2*Je*(f-.075)/.3)+1},bounce:function(f){var _=7.5625,w=2.75;return f<1/w?_*f*f:f<2/w?_*(f-=1.5/w)*f+.75:f<2.5/w?_*(f-=2.25/w)*f+.9375:_*(f-=2.625/w)*f+.984375}};hn.easeIn=hn["ease-in"]=hn["<"],hn.easeOut=hn["ease-out"]=hn[">"],hn.easeInOut=hn["ease-in-out"]=hn["<>"],hn["back-in"]=hn.backIn,hn["back-out"]=hn.backOut;var At=[],Is=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(f){setTimeout(f,16)},Sr=function(){for(var f=+new Date,_=0;_<At.length;_++){var w=At[_];if(!w.el.removed&&!w.paused){var x,O,W=f-w.start,Y=w.ms,j=w.easing,q=w.from,ne=w.diff,be=w.to,Oe=(w.t,w.el),we={},ve={};if(w.initstatus?(W=(w.initstatus*w.anim.top-w.prev)/(w.percent-w.prev)*Y,w.status=w.initstatus,delete w.initstatus,w.stop&&At.splice(_--,1)):w.status=(w.prev+(w.percent-w.prev)*(W/Y))/w.anim.top,!(W<0))if(W<Y){var Ce=j(W/Y);for(var ze in q)if(q[N](ze)){switch(ce[ze]){case Ye:x=+q[ze]+Ce*Y*ne[ze];break;case"colour":x="rgb("+[gr(P(q[ze].r+Ce*Y*ne[ze].r)),gr(P(q[ze].g+Ce*Y*ne[ze].g)),gr(P(q[ze].b+Ce*Y*ne[ze].b))].join(",")+")";break;case"path":x=[];for(var Ae=0,xe=q[ze].length;Ae<xe;Ae++){x[Ae]=[q[ze][Ae][0]];for(var Qe=1,Fe=q[ze][Ae].length;Qe<Fe;Qe++)x[Ae][Qe]=+q[ze][Ae][Qe]+Ce*Y*ne[ze][Ae][Qe];x[Ae]=x[Ae].join(g)}x=x.join(g);break;case"transform":if(ne[ze].real)for(x=[],Ae=0,xe=q[ze].length;Ae<xe;Ae++)for(x[Ae]=[q[ze][Ae][0]],Qe=1,Fe=q[ze][Ae].length;Qe<Fe;Qe++)x[Ae][Qe]=q[ze][Ae][Qe]+Ce*Y*ne[ze][Ae][Qe];else{var Be=function(vt){return+q[ze][vt]+Ce*Y*ne[ze][vt]};x=[["m",Be(0),Be(1),Be(2),Be(3),Be(4),Be(5)]]}break;case"csv":if(ze=="clip-rect")for(x=[],Ae=4;Ae--;)x[Ae]=+q[ze][Ae]+Ce*Y*ne[ze][Ae];break;default:var Re=[][K](q[ze]);for(x=[],Ae=Oe.paper.customAttributes[ze].length;Ae--;)x[Ae]=+Re[Ae]+Ce*Y*ne[ze][Ae]}we[ze]=x}Oe.attr(we),function(vt,ct,pt){setTimeout(function(){l("raphael.anim.frame."+vt,ct,pt)})}(Oe.id,Oe,w.anim)}else{if(function(vt,ct,pt){setTimeout(function(){l("raphael.anim.frame."+ct.id,ct,pt),l("raphael.anim.finish."+ct.id,ct,pt),h.is(vt,"function")&&vt.call(ct)})}(w.callback,Oe,w.anim),Oe.attr(be),At.splice(_--,1),w.repeat>1&&!w.next){for(O in be)be[N](O)&&(ve[O]=w.totalOrigin[O]);w.el.attr(ve),er(w.anim,w.el,w.anim.percents[0],null,w.totalOrigin,w.repeat-1)}w.next&&!w.stop&&er(w.anim,w.el,w.next,null,w.totalOrigin,w.repeat)}}}At.length&&Is(Sr)},gr=function(f){return f>255?255:f<0?0:f};function Os(f,_,w,x,O,W){var Y=3*_,j=3*(x-_)-Y,q=1-Y-j,ne=3*w,be=3*(O-w)-ne,Oe=1-ne-be;function we(ve){return((q*ve+j)*ve+Y)*ve}return function(ve,Ce){var ze=function(Ae,xe){var Qe,Fe,Be,Re,vt,ct;for(Be=Ae,ct=0;ct<8;ct++){if(Re=we(Be)-Ae,Ze(Re)<xe)return Be;if(Ze(vt=(3*q*Be+2*j)*Be+Y)<1e-6)break;Be-=Re/vt}if(Fe=1,(Be=Ae)<(Qe=0))return Qe;if(Be>Fe)return Fe;for(;Qe<Fe;){if(Re=we(Be),Ze(Re-Ae)<xe)return Be;Ae>Re?Qe=Be:Fe=Be,Be=(Fe-Qe)/2+Qe}return Be}(ve,Ce);return((Oe*ze+be)*ze+ne)*ze}(f,1/(200*W))}function Yn(f,_){var w=[],x={};if(this.ms=_,this.times=1,f){for(var O in f)f[N](O)&&(x[B(O)]=f[O],w.push(B(O)));w.sort(Q)}this.anim=x,this.top=w[w.length-1],this.percents=w}function er(f,_,w,x,O,W){w=B(w);var Y,j,q,ne,be,Oe,we=f.ms,ve={},Ce={},ze={};if(x)for(xe=0,Qe=At.length;xe<Qe;xe++){var Ae=At[xe];if(Ae.el.id==_.id&&Ae.anim==f){Ae.percent!=w?(At.splice(xe,1),q=1):j=Ae,_.attr(Ae.totalOrigin);break}}else x=+Ce;for(var xe=0,Qe=f.percents.length;xe<Qe;xe++){if(f.percents[xe]==w||f.percents[xe]>x*f.top){w=f.percents[xe],be=f.percents[xe-1]||0,we=we/f.top*(w-be),ne=f.percents[xe+1],Y=f.anim[w];break}x&&_.attr(f.anim[f.percents[xe]])}if(Y){if(j)j.initstatus=x,j.start=new Date-j.ms*x;else{for(var Fe in Y)if(Y[N](Fe)&&(ce[N](Fe)||_.paper.customAttributes[N](Fe)))switch(ve[Fe]=_.attr(Fe),ve[Fe]==null&&(ve[Fe]=ge[Fe]),Ce[Fe]=Y[Fe],ce[Fe]){case Ye:ze[Fe]=(Ce[Fe]-ve[Fe])/we;break;case"colour":ve[Fe]=h.getRGB(ve[Fe]);var Be=h.getRGB(Ce[Fe]);ze[Fe]={r:(Be.r-ve[Fe].r)/we,g:(Be.g-ve[Fe].g)/we,b:(Be.b-ve[Fe].b)/we};break;case"path":var Re=li(ve[Fe],Ce[Fe]),vt=Re[1];for(ve[Fe]=Re[0],ze[Fe]=[],xe=0,Qe=ve[Fe].length;xe<Qe;xe++){ze[Fe][xe]=[0];for(var ct=1,pt=ve[Fe][xe].length;ct<pt;ct++)ze[Fe][xe][ct]=(vt[xe][ct]-ve[Fe][xe][ct])/we}break;case"transform":var ji=_._,nr=yn(ji[Fe],Ce[Fe]);if(nr)for(ve[Fe]=nr.from,Ce[Fe]=nr.to,ze[Fe]=[],ze[Fe].real=!0,xe=0,Qe=ve[Fe].length;xe<Qe;xe++)for(ze[Fe][xe]=[ve[Fe][xe][0]],ct=1,pt=ve[Fe][xe].length;ct<pt;ct++)ze[Fe][xe][ct]=(Ce[Fe][xe][ct]-ve[Fe][xe][ct])/we;else{var Fn=_.matrix||new jn,wi={_:{transform:ji.transform},getBBox:function(){return _.getBBox(1)}};ve[Fe]=[Fn.a,Fn.b,Fn.c,Fn.d,Fn.e,Fn.f],dr(wi,Ce[Fe]),Ce[Fe]=wi._.transform,ze[Fe]=[(wi.matrix.a-Fn.a)/we,(wi.matrix.b-Fn.b)/we,(wi.matrix.c-Fn.c)/we,(wi.matrix.d-Fn.d)/we,(wi.matrix.e-Fn.e)/we,(wi.matrix.f-Fn.f)/we]}break;case"csv":var Yi=H(Y[Fe])[re](y),xi=H(ve[Fe])[re](y);if(Fe=="clip-rect")for(ve[Fe]=xi,ze[Fe]=[],xe=xi.length;xe--;)ze[Fe][xe]=(Yi[xe]-ve[Fe][xe])/we;Ce[Fe]=Yi;break;default:for(Yi=[][K](Y[Fe]),xi=[][K](ve[Fe]),ze[Fe]=[],xe=_.paper.customAttributes[Fe].length;xe--;)ze[Fe][xe]=((Yi[xe]||0)-(xi[xe]||0))/we}var ir=Y.easing,Qn=h.easing_formulas[ir];if(!Qn)if((Qn=H(ir).match(k))&&Qn.length==5){var Fi=Qn;Qn=function(T){return Os(T,+Fi[1],+Fi[2],+Fi[3],+Fi[4],we)}}else Qn=ue;if(Ae={anim:f,percent:w,timestamp:Oe=Y.start||f.start||+new Date,start:Oe+(f.del||0),status:0,initstatus:x||0,stop:!1,ms:we,easing:Qn,from:ve,diff:ze,to:Ce,el:_,callback:Y.callback,prev:be,next:ne,repeat:W||f.times,origin:_.attr(),totalOrigin:O},At.push(Ae),x&&!j&&!q&&(Ae.stop=!0,Ae.start=new Date-we*x,At.length==1))return Sr();q&&(Ae.start=new Date-Ae.ms*x),At.length==1&&Is(Sr)}l("raphael.anim.start."+_.id,_,f)}}function Hr(f){for(var _=0;_<At.length;_++)At[_].el.paper==f&&At.splice(_--,1)}We.animateWith=function(f,_,w,x,O,W){if(this.removed)return W&&W.call(this),this;var Y=w instanceof Yn?w:h.animation(w,x,O,W);er(Y,this,Y.percents[0],null,this.attr());for(var j=0,q=At.length;j<q;j++)if(At[j].anim==_&&At[j].el==f){At[q-1].start=At[j].start;break}return this},We.onAnimation=function(f){return f?l.on("raphael.anim.frame."+this.id,f):l.unbind("raphael.anim.frame."+this.id),this},Yn.prototype.delay=function(f){var _=new Yn(this.anim,this.ms);return _.times=this.times,_.del=+f||0,_},Yn.prototype.repeat=function(f){var _=new Yn(this.anim,this.ms);return _.del=this.del,_.times=le.floor(Pe(f,0))||1,_},h.animation=function(f,_,w,x){if(f instanceof Yn)return f;!h.is(w,"function")&&w||(x=x||w||null,w=null),f=Object(f),_=+_||0;var O,W,Y={};for(W in f)f[N](W)&&B(W)!=W&&B(W)+"%"!=W&&(O=!0,Y[W]=f[W]);if(O)return w&&(Y.easing=w),x&&(Y.callback=x),new Yn({100:Y},_);if(x){var j=0;for(var q in f){var ne=te(q);f[N](q)&&ne>j&&(j=ne)}!f[j+="%"].callback&&(f[j].callback=x)}return new Yn(f,_)},We.animate=function(f,_,w,x){if(this.removed)return x&&x.call(this),this;var O=f instanceof Yn?f:h.animation(f,_,w,x);return er(O,this,O.percents[0],null,this.attr()),this},We.setTime=function(f,_){return f&&_!=null&&this.status(f,Le(_,f.ms)/f.ms),this},We.status=function(f,_){var w,x,O=[],W=0;if(_!=null)return er(f,this,-1,Le(_,1)),this;for(w=At.length;W<w;W++)if((x=At[W]).el.id==this.id&&(!f||x.anim==f)){if(f)return x.status;O.push({anim:x.anim,status:x.status})}return f?0:O},We.pause=function(f){for(var _=0;_<At.length;_++)At[_].el.id!=this.id||f&&At[_].anim!=f||l("raphael.anim.pause."+this.id,this,At[_].anim)!==!1&&(At[_].paused=!0);return this},We.resume=function(f){for(var _=0;_<At.length;_++)if(At[_].el.id==this.id&&(!f||At[_].anim==f)){var w=At[_];l("raphael.anim.resume."+this.id,this,w.anim)!==!1&&(delete w.paused,this.status(w.anim,w.status))}return this},We.stop=function(f){for(var _=0;_<At.length;_++)At[_].el.id!=this.id||f&&At[_].anim!=f||l("raphael.anim.stop."+this.id,this,At[_].anim)!==!1&&At.splice(_--,1);return this},l.on("raphael.remove",Hr),l.on("raphael.clear",Hr),We.toString=function(){return"Raphals object"};var as,Xn,Ri,tr,Tr=function(f){if(this.items=[],this.length=0,this.type="set",f)for(var _=0,w=f.length;_<w;_++)!f[_]||f[_].constructor!=We.constructor&&f[_].constructor!=Tr||(this[this.items.length]=this.items[this.items.length]=f[_],this.length++)},Tn=Tr.prototype;for(var In in Tn.push=function(){for(var f,_,w=0,x=arguments.length;w<x;w++)!(f=arguments[w])||f.constructor!=We.constructor&&f.constructor!=Tr||(this[_=this.items.length]=this.items[_]=f,this.length++);return this},Tn.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},Tn.forEach=function(f,_){for(var w=0,x=this.items.length;w<x;w++)if(f.call(_,this.items[w],w)===!1)return this;return this},We)We[N](In)&&(Tn[In]=function(f){return function(){var _=arguments;return this.forEach(function(w){w[f][V](w,_)})}}(In));return Tn.attr=function(f,_){if(f&&h.is(f,it)&&h.is(f[0],"object"))for(var w=0,x=f.length;w<x;w++)this.items[w].attr(f[w]);else for(var O=0,W=this.items.length;O<W;O++)this.items[O].attr(f,_);return this},Tn.clear=function(){for(;this.length;)this.pop()},Tn.splice=function(f,_,w){f=f<0?Pe(this.length+f,0):f,_=Pe(0,Le(this.length-f,_));var x,O=[],W=[],Y=[];for(x=2;x<arguments.length;x++)Y.push(arguments[x]);for(x=0;x<_;x++)W.push(this[f+x]);for(;x<this.length-f;x++)O.push(this[f+x]);var j=Y.length;for(x=0;x<j+O.length;x++)this.items[f+x]=this[f+x]=x<j?Y[x]:O[x-j];for(x=this.items.length=this.length-=_-j;this[x];)delete this[x++];return new Tr(W)},Tn.exclude=function(f){for(var _=0,w=this.length;_<w;_++)if(this[_]==f)return this.splice(_,1),!0},Tn.animate=function(f,_,w,x){(h.is(w,"function")||!w)&&(x=w||null);var O,W,Y=this.items.length,j=Y,q=this;if(!Y)return this;x&&(W=function(){!--Y&&x.call(q)}),w=h.is(w,"string")?w:W;var ne=h.animation(f,_,w,W);for(O=this.items[--j].animate(ne);j--;)this.items[j]&&!this.items[j].removed&&this.items[j].animateWith(O,ne,ne),this.items[j]&&!this.items[j].removed||Y--;return this},Tn.insertAfter=function(f){for(var _=this.items.length;_--;)this.items[_].insertAfter(f);return this},Tn.getBBox=function(){for(var f=[],_=[],w=[],x=[],O=this.items.length;O--;)if(!this.items[O].removed){var W=this.items[O].getBBox();f.push(W.x),_.push(W.y),w.push(W.x+W.width),x.push(W.y+W.height)}return{x:f=Le[V](0,f),y:_=Le[V](0,_),x2:w=Pe[V](0,w),y2:x=Pe[V](0,x),width:w-f,height:x-_}},Tn.clone=function(f){f=this.paper.set();for(var _=0,w=this.items.length;_<w;_++)f.push(this.items[_].clone());return f},Tn.toString=function(){return"Raphals set"},Tn.glow=function(f){var _=this.paper.set();return this.forEach(function(w,x){var O=w.glow(f);O!=null&&O.forEach(function(W,Y){_.push(W)})}),_},Tn.isPointInside=function(f,_){var w=!1;return this.forEach(function(x){if(x.isPointInside(f,_))return w=!0,!1}),w},h.registerFont=function(f){if(!f.face)return f;this.fonts=this.fonts||{};var _={w:f.w,face:{},glyphs:{}},w=f.face["font-family"];for(var x in f.face)f.face[N](x)&&(_.face[x]=f.face[x]);if(this.fonts[w]?this.fonts[w].push(_):this.fonts[w]=[_],!f.svg){for(var O in _.face["units-per-em"]=te(f.face["units-per-em"],10),f.glyphs)if(f.glyphs[N](O)){var W=f.glyphs[O];if(_.glyphs[O]={w:W.w,k:{},d:W.d&&"M"+W.d.replace(/[mlcxtrv]/g,function(j){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[j]||"M"})+"z"},W.k)for(var Y in W.k)W[N](Y)&&(_.glyphs[O].k[Y]=W.k[Y])}}return f},m.getFont=function(f,_,w,x){if(x=x||"normal",w=w||"normal",_=+_||{normal:400,bold:700,lighter:300,bolder:800}[_]||400,h.fonts){var O,W=h.fonts[f];if(!W){var Y=new RegExp("(^|\\s)"+f.replace(/[^\w\d\s+!~.:_-]/g,de)+"(\\s|$)","i");for(var j in h.fonts)if(h.fonts[N](j)&&Y.test(j)){W=h.fonts[j];break}}if(W)for(var q=0,ne=W.length;q<ne&&((O=W[q]).face["font-weight"]!=_||O.face["font-style"]!=w&&O.face["font-style"]||O.face["font-stretch"]!=x);q++);return O}},m.print=function(f,_,w,x,O,W,Y,j){W=W||"middle",Y=Pe(Le(Y||0,1),-1),j=Pe(Le(j||1,3),1);var q,ne=H(w)[re](de),be=0,Oe=0,we=de;if(h.is(x,"string")&&(x=this.getFont(x)),x){q=(O||16)/x.face["units-per-em"];for(var ve=x.face.bbox[re](y),Ce=+ve[0],ze=ve[3]-ve[1],Ae=0,xe=+ve[1]+(W=="baseline"?ze+ +x.face.descent:ze/2),Qe=0,Fe=ne.length;Qe<Fe;Qe++){if(ne[Qe]==`
`)be=0,Re=0,Oe=0,Ae+=ze*j;else{var Be=Oe&&x.glyphs[ne[Qe-1]]||{},Re=x.glyphs[ne[Qe]];be+=Oe?(Be.w||x.w)+(Be.k&&Be.k[ne[Qe]]||0)+x.w*Y:0,Oe=1}Re&&Re.d&&(we+=h.transformPath(Re.d,["t",be*q,Ae*q,"s",q,q,Ce,xe,"t",(f-Ce)/q,(_-xe)/q]))}}return this.path(we).attr({fill:"#000",stroke:"none"})},m.add=function(f){if(h.is(f,"array"))for(var _,w=this.set(),x=0,O=f.length;x<O;x++)_=f[x]||{},E[N](_.type)&&w.push(this[_.type]().attr(_));return w},h.format=function(f,_){var w=h.is(_,it)?[0][K](_):arguments;return f&&h.is(f,"string")&&w.length-1&&(f=f.replace(C,function(x,O){return w[++O]==null?de:w[O]})),f||de},h.fullfill=(as=/\{([^\}]+)\}/g,Xn=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(f,_){return String(f).replace(as,function(w,x){return function(O,W,Y){var j=Y;return W.replace(Xn,function(q,ne,be,Oe,we){ne=ne||Oe,j&&(ne in j&&(j=j[ne]),typeof j=="function"&&we&&(j=j()))}),j=(j==null||j==Y?O:j)+""}(w,x,_)})}),h.ninja=function(){if(X.was)F.win.Raphael=X.is;else{window.Raphael=void 0;try{delete window.Raphael}catch{}}return h},h.st=Tn,l.on("raphael.DOMload",function(){p=!0}),(Ri=document).readyState==null&&Ri.addEventListener&&(Ri.addEventListener("DOMContentLoaded",tr=function(){Ri.removeEventListener("DOMContentLoaded",tr,!1),Ri.readyState="complete"},!1),Ri.readyState="loading"),function f(){/in/.test(Ri.readyState)?setTimeout(f,9):h.eve("raphael.DOMload")}(),h}).apply(i,s))===void 0||(n.exports=o)},function(n,i,r){var s,o;s=[r(0),r(3),r(4)],(o=(function(l){return l}).apply(i,s))===void 0||(n.exports=o)},function(n,i,r){var s,o,l,h,p,m,y,E,C,N,F,X,G,V;h="hasOwnProperty",p=/[\.\/]/,m=/\s*,\s*/,y=function(K,ae){return K-ae},E={n:{}},C=function(){for(var K=0,ae=this.length;K<ae;K++)if(this[K]!==void 0)return this[K]},N=function(){for(var K=this.length;--K;)if(this[K]!==void 0)return this[K]},F=Object.prototype.toString,X=String,G=Array.isArray||function(K){return K instanceof Array||F.call(K)=="[object Array]"},(V=function(K,ae){var de,g=l,H=Array.prototype.slice.call(arguments,2),re=V.listeners(K),_e=0,Te=[],ye={},le=[],Pe=o;le.firstDefined=C,le.lastDefined=N,o=K,l=0;for(var Le=0,Ze=re.length;Le<Ze;Le++)"zIndex"in re[Le]&&(Te.push(re[Le].zIndex),re[Le].zIndex<0&&(ye[re[Le].zIndex]=re[Le]));for(Te.sort(y);Te[_e]<0;)if(de=ye[Te[_e++]],le.push(de.apply(ae,H)),l)return l=g,le;for(Le=0;Le<Ze;Le++)if("zIndex"in(de=re[Le]))if(de.zIndex==Te[_e]){if(le.push(de.apply(ae,H)),l)break;do if((de=ye[Te[++_e]])&&le.push(de.apply(ae,H)),l)break;while(de)}else ye[de.zIndex]=de;else if(le.push(de.apply(ae,H)),l)break;return l=g,o=Pe,le})._events=E,V.listeners=function(K){var ae,de,g,H,re,_e,Te,ye,le=G(K)?K:K.split(p),Pe=E,Le=[Pe],Ze=[];for(H=0,re=le.length;H<re;H++){for(ye=[],_e=0,Te=Le.length;_e<Te;_e++)for(de=[(Pe=Le[_e].n)[le[H]],Pe["*"]],g=2;g--;)(ae=de[g])&&(ye.push(ae),Ze=Ze.concat(ae.f||[]));Le=ye}return Ze},V.separator=function(K){K?(K="["+(K=X(K).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",p=new RegExp(K)):p=/[\.\/]/},V.on=function(K,ae){if(typeof ae!="function")return function(){};for(var de=G(K)?G(K[0])?K:[K]:X(K).split(m),g=0,H=de.length;g<H;g++)(function(re){for(var _e,Te=G(re)?re:X(re).split(p),ye=E,le=0,Pe=Te.length;le<Pe;le++)ye=(ye=ye.n).hasOwnProperty(Te[le])&&ye[Te[le]]||(ye[Te[le]]={n:{}});for(ye.f=ye.f||[],le=0,Pe=ye.f.length;le<Pe;le++)if(ye.f[le]==ae){_e=!0;break}!_e&&ye.f.push(ae)})(de[g]);return function(re){+re==+re&&(ae.zIndex=+re)}},V.f=function(K){var ae=[].slice.call(arguments,1);return function(){V.apply(null,[K,null].concat(ae).concat([].slice.call(arguments,0)))}},V.stop=function(){l=1},V.nt=function(K){var ae=G(o)?o.join("."):o;return K?new RegExp("(?:\\.|\\/|^)"+K+"(?:\\.|\\/|$)").test(ae):ae},V.nts=function(){return G(o)?o:o.split(p)},V.off=V.unbind=function(K,ae){if(K){var de=G(K)?G(K[0])?K:[K]:X(K).split(m);if(de.length>1)for(var g=0,H=de.length;g<H;g++)V.off(de[g],ae);else{de=G(K)?K:X(K).split(p);var re,_e,Te,ye,le,Pe=[E];for(g=0,H=de.length;g<H;g++)for(ye=0;ye<Pe.length;ye+=Te.length-2){if(Te=[ye,1],re=Pe[ye].n,de[g]!="*")re[de[g]]&&Te.push(re[de[g]]);else for(_e in re)re[h](_e)&&Te.push(re[_e]);Pe.splice.apply(Pe,Te)}for(g=0,H=Pe.length;g<H;g++)for(re=Pe[g];re.n;){if(ae){if(re.f){for(ye=0,le=re.f.length;ye<le;ye++)if(re.f[ye]==ae){re.f.splice(ye,1);break}!re.f.length&&delete re.f}for(_e in re.n)if(re.n[h](_e)&&re.n[_e].f){var Le=re.n[_e].f;for(ye=0,le=Le.length;ye<le;ye++)if(Le[ye]==ae){Le.splice(ye,1);break}!Le.length&&delete re.n[_e].f}}else for(_e in delete re.f,re.n)re.n[h](_e)&&re.n[_e].f&&delete re.n[_e].f;re=re.n}}}else V._events=E={n:{}}},V.once=function(K,ae){var de=function(){return V.off(K,de),ae.apply(this,arguments)};return V.on(K,de)},V.version="0.5.0",V.toString=function(){return"You are running Eve 0.5.0"},n.exports?n.exports=V:(s=(function(){return V}).apply(i,[]))===void 0||(n.exports=s)},function(n,i,r){var s,o;s=[r(0)],(o=(function(l){if(!l||l.svg){var h="hasOwnProperty",p=String,m=parseFloat,y=parseInt,E=Math,C=E.max,N=E.abs,F=E.pow,X=/[, ]+/,G=l.eve,V="",K=" ",ae="http://www.w3.org/1999/xlink",de={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},g={};l.toString=function(){return`Your browser supports SVG.
You are running Raphal `+this.version};var H=function(z,M){if(M)for(var k in typeof z=="string"&&(z=H(z)),M)M[h](k)&&(k.substring(0,6)=="xlink:"?z.setAttributeNS(ae,k.substring(6),p(M[k])):z.setAttribute(k,p(M[k])));else(z=l._g.doc.createElementNS("http://www.w3.org/2000/svg",z)).style&&(z.style.webkitTapHighlightColor="rgba(0,0,0,0)");return z},re=function(z,M){var k="linear",P=z.id+M,B=.5,te=.5,ee=z.node,ge=z.paper,ce=ee.style,Se=l._g.doc.getElementById(P);if(!Se){if(M=(M=p(M).replace(l._radial_gradient,function(Q,ue,fe){if(k="radial",ue&&fe){B=m(ue);var Me=2*((te=m(fe))>.5)-1;F(B-.5,2)+F(te-.5,2)>.25&&(te=E.sqrt(.25-F(B-.5,2))*Me+.5)&&te!=.5&&(te=te.toFixed(5)-1e-5*Me)}return V})).split(/\s*\-\s*/),k=="linear"){var Ve=M.shift();if(Ve=-m(Ve),isNaN(Ve))return null;var Ge=[0,0,E.cos(l.rad(Ve)),E.sin(l.rad(Ve))],rt=1/(C(N(Ge[2]),N(Ge[3]))||1);Ge[2]*=rt,Ge[3]*=rt,Ge[2]<0&&(Ge[0]=-Ge[2],Ge[2]=0),Ge[3]<0&&(Ge[1]=-Ge[3],Ge[3]=0)}var S=l._parseDots(M);if(!S)return null;if(P=P.replace(/[\(\)\s,\xb0#]/g,"_"),z.gradient&&P!=z.gradient.id&&(ge.defs.removeChild(z.gradient),delete z.gradient),!z.gradient){Se=H(k+"Gradient",{id:P}),z.gradient=Se,H(Se,k=="radial"?{fx:B,fy:te}:{x1:Ge[0],y1:Ge[1],x2:Ge[2],y2:Ge[3],gradientTransform:z.matrix.invert()}),ge.defs.appendChild(Se);for(var R=0,$=S.length;R<$;R++)Se.appendChild(H("stop",{offset:S[R].offset?S[R].offset:R?"100%":"0%","stop-color":S[R].color||"#fff","stop-opacity":isFinite(S[R].opacity)?S[R].opacity:1}))}}return H(ee,{fill:_e(P),opacity:1,"fill-opacity":1}),ce.fill=V,ce.opacity=1,ce.fillOpacity=1,1},_e=function(z){if((M=document.documentMode)&&(M===9||M===10))return"url('#"+z+"')";var M,k=document.location;return"url('"+(k.protocol+"//"+k.host+k.pathname+k.search)+"#"+z+"')"},Te=function(z){var M=z.getBBox(1);H(z.pattern,{patternTransform:z.matrix.invert()+" translate("+M.x+","+M.y+")"})},ye=function(z,M,k){if(z.type=="path"){for(var P,B,te,ee,ge,ce=p(M).toLowerCase().split("-"),Se=z.paper,Ve=k?"end":"start",Ge=z.node,rt=z.attrs,S=rt["stroke-width"],R=ce.length,$="classic",Q=3,ue=3,fe=5;R--;)switch(ce[R]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":$=ce[R];break;case"wide":ue=5;break;case"narrow":ue=2;break;case"long":Q=5;break;case"short":Q=2}if($=="open"?(Q+=2,ue+=2,fe+=2,te=1,ee=k?4:1,ge={fill:"none",stroke:rt.stroke}):(ee=te=Q/2,ge={fill:rt.stroke,stroke:"none"}),z._.arrows?k?(z._.arrows.endPath&&g[z._.arrows.endPath]--,z._.arrows.endMarker&&g[z._.arrows.endMarker]--):(z._.arrows.startPath&&g[z._.arrows.startPath]--,z._.arrows.startMarker&&g[z._.arrows.startMarker]--):z._.arrows={},$!="none"){var Me="raphael-marker-"+$,tt="raphael-marker-"+Ve+$+Q+ue+"-obj"+z.id;l._g.doc.getElementById(Me)?g[Me]++:(Se.defs.appendChild(H(H("path"),{"stroke-linecap":"round",d:de[$],id:Me})),g[Me]=1);var Ke,at=l._g.doc.getElementById(tt);at?(g[tt]++,Ke=at.getElementsByTagName("use")[0]):(at=H(H("marker"),{id:tt,markerHeight:ue,markerWidth:Q,orient:"auto",refX:ee,refY:ue/2}),Ke=H(H("use"),{"xlink:href":"#"+Me,transform:(k?"rotate(180 "+Q/2+" "+ue/2+") ":V)+"scale("+Q/fe+","+ue/fe+")","stroke-width":(1/((Q/fe+ue/fe)/2)).toFixed(4)}),at.appendChild(Ke),Se.defs.appendChild(at),g[tt]=1),H(Ke,ge);var mt=te*($!="diamond"&&$!="oval");k?(P=z._.arrows.startdx*S||0,B=l.getTotalLength(rt.path)-mt*S):(P=mt*S,B=l.getTotalLength(rt.path)-(z._.arrows.enddx*S||0)),(ge={})["marker-"+Ve]="url(#"+tt+")",(B||P)&&(ge.d=l.getSubpath(rt.path,P,B)),H(Ge,ge),z._.arrows[Ve+"Path"]=Me,z._.arrows[Ve+"Marker"]=tt,z._.arrows[Ve+"dx"]=mt,z._.arrows[Ve+"Type"]=$,z._.arrows[Ve+"String"]=M}else k?(P=z._.arrows.startdx*S||0,B=l.getTotalLength(rt.path)-P):(P=0,B=l.getTotalLength(rt.path)-(z._.arrows.enddx*S||0)),z._.arrows[Ve+"Path"]&&H(Ge,{d:l.getSubpath(rt.path,P,B)}),delete z._.arrows[Ve+"Path"],delete z._.arrows[Ve+"Marker"],delete z._.arrows[Ve+"dx"],delete z._.arrows[Ve+"Type"],delete z._.arrows[Ve+"String"];for(ge in g)if(g[h](ge)&&!g[ge]){var lt=l._g.doc.getElementById(ge);lt&&lt.parentNode.removeChild(lt)}}},le={"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},Pe=function(z,M,k){if(M=le[p(M).toLowerCase()]){for(var P=z.attrs["stroke-width"]||"1",B={round:P,square:P,butt:0}[z.attrs["stroke-linecap"]||k["stroke-linecap"]]||0,te=[],ee=M.length;ee--;)te[ee]=M[ee]*P+(ee%2?1:-1)*B;H(z.node,{"stroke-dasharray":te.join(",")})}else H(z.node,{"stroke-dasharray":"none"})},Le=function(z,M){var k=z.node,P=z.attrs,B=k.style.visibility;for(var te in k.style.visibility="hidden",M)if(M[h](te)){if(!l._availableAttrs[h](te))continue;var ee=M[te];switch(P[te]=ee,te){case"blur":z.blur(ee);break;case"title":var ge=k.getElementsByTagName("title");if(ge.length&&(ge=ge[0]))ge.firstChild.nodeValue=ee;else{ge=H("title");var ce=l._g.doc.createTextNode(ee);ge.appendChild(ce),k.appendChild(ge)}break;case"href":case"target":var Se=k.parentNode;if(Se.tagName.toLowerCase()!="a"){var Ve=H("a");Se.insertBefore(Ve,k),Ve.appendChild(k),Se=Ve}te=="target"?Se.setAttributeNS(ae,"show",ee=="blank"?"new":ee):Se.setAttributeNS(ae,te,ee);break;case"cursor":k.style.cursor=ee;break;case"transform":z.transform(ee);break;case"arrow-start":ye(z,ee);break;case"arrow-end":ye(z,ee,1);break;case"clip-rect":var Ge=p(ee).split(X);if(Ge.length==4){z.clip&&z.clip.parentNode.parentNode.removeChild(z.clip.parentNode);var rt=H("clipPath"),S=H("rect");rt.id=l.createUUID(),H(S,{x:Ge[0],y:Ge[1],width:Ge[2],height:Ge[3]}),rt.appendChild(S),z.paper.defs.appendChild(rt),H(k,{"clip-path":"url(#"+rt.id+")"}),z.clip=S}if(!ee){var R=k.getAttribute("clip-path");if(R){var $=l._g.doc.getElementById(R.replace(/(^url\(#|\)$)/g,V));$&&$.parentNode.removeChild($),H(k,{"clip-path":V}),delete z.clip}}break;case"path":z.type=="path"&&(H(k,{d:ee?P.path=l._pathToAbsolute(ee):"M0,0"}),z._.dirty=1,z._.arrows&&("startString"in z._.arrows&&ye(z,z._.arrows.startString),"endString"in z._.arrows&&ye(z,z._.arrows.endString,1)));break;case"width":if(k.setAttribute(te,ee),z._.dirty=1,!P.fx)break;te="x",ee=P.x;case"x":P.fx&&(ee=-P.x-(P.width||0));case"rx":if(te=="rx"&&z.type=="rect")break;case"cx":k.setAttribute(te,ee),z.pattern&&Te(z),z._.dirty=1;break;case"height":if(k.setAttribute(te,ee),z._.dirty=1,!P.fy)break;te="y",ee=P.y;case"y":P.fy&&(ee=-P.y-(P.height||0));case"ry":if(te=="ry"&&z.type=="rect")break;case"cy":k.setAttribute(te,ee),z.pattern&&Te(z),z._.dirty=1;break;case"r":z.type=="rect"?H(k,{rx:ee,ry:ee}):k.setAttribute(te,ee),z._.dirty=1;break;case"src":z.type=="image"&&k.setAttributeNS(ae,"href",ee);break;case"stroke-width":z._.sx==1&&z._.sy==1||(ee/=C(N(z._.sx),N(z._.sy))||1),k.setAttribute(te,ee),P["stroke-dasharray"]&&Pe(z,P["stroke-dasharray"],M),z._.arrows&&("startString"in z._.arrows&&ye(z,z._.arrows.startString),"endString"in z._.arrows&&ye(z,z._.arrows.endString,1));break;case"stroke-dasharray":Pe(z,ee,M);break;case"fill":var Q=p(ee).match(l._ISURL);if(Q){rt=H("pattern");var ue=H("image");rt.id=l.createUUID(),H(rt,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),H(ue,{x:0,y:0,"xlink:href":Q[1]}),rt.appendChild(ue),function(at){l._preload(Q[1],function(){var mt=this.offsetWidth,lt=this.offsetHeight;H(at,{width:mt,height:lt}),H(ue,{width:mt,height:lt})})}(rt),z.paper.defs.appendChild(rt),H(k,{fill:"url(#"+rt.id+")"}),z.pattern=rt,z.pattern&&Te(z);break}var fe=l.getRGB(ee);if(fe.error){if((z.type=="circle"||z.type=="ellipse"||p(ee).charAt()!="r")&&re(z,ee)){if("opacity"in P||"fill-opacity"in P){var Me=l._g.doc.getElementById(k.getAttribute("fill").replace(/^url\(#|\)$/g,V));if(Me){var tt=Me.getElementsByTagName("stop");H(tt[tt.length-1],{"stop-opacity":("opacity"in P?P.opacity:1)*("fill-opacity"in P?P["fill-opacity"]:1)})}}P.gradient=ee,P.fill="none";break}}else delete M.gradient,delete P.gradient,!l.is(P.opacity,"undefined")&&l.is(M.opacity,"undefined")&&H(k,{opacity:P.opacity}),!l.is(P["fill-opacity"],"undefined")&&l.is(M["fill-opacity"],"undefined")&&H(k,{"fill-opacity":P["fill-opacity"]});fe[h]("opacity")&&H(k,{"fill-opacity":fe.opacity>1?fe.opacity/100:fe.opacity});case"stroke":fe=l.getRGB(ee),k.setAttribute(te,fe.hex),te=="stroke"&&fe[h]("opacity")&&H(k,{"stroke-opacity":fe.opacity>1?fe.opacity/100:fe.opacity}),te=="stroke"&&z._.arrows&&("startString"in z._.arrows&&ye(z,z._.arrows.startString),"endString"in z._.arrows&&ye(z,z._.arrows.endString,1));break;case"gradient":(z.type=="circle"||z.type=="ellipse"||p(ee).charAt()!="r")&&re(z,ee);break;case"opacity":P.gradient&&!P[h]("stroke-opacity")&&H(k,{"stroke-opacity":ee>1?ee/100:ee});case"fill-opacity":if(P.gradient){(Me=l._g.doc.getElementById(k.getAttribute("fill").replace(/^url\(#|\)$/g,V)))&&(tt=Me.getElementsByTagName("stop"),H(tt[tt.length-1],{"stop-opacity":ee}));break}default:te=="font-size"&&(ee=y(ee,10)+"px");var Ke=te.replace(/(\-.)/g,function(at){return at.substring(1).toUpperCase()});k.style[Ke]=ee,z._.dirty=1,k.setAttribute(te,ee)}}Ze(z,M),k.style.visibility=B},Ze=function(z,M){if(z.type=="text"&&(M[h]("text")||M[h]("font")||M[h]("font-size")||M[h]("x")||M[h]("y"))){var k=z.attrs,P=z.node,B=P.firstChild?y(l._g.doc.defaultView.getComputedStyle(P.firstChild,V).getPropertyValue("font-size"),10):10;if(M[h]("text")){for(k.text=M.text;P.firstChild;)P.removeChild(P.firstChild);for(var te,ee=p(M.text).split(`
`),ge=[],ce=0,Se=ee.length;ce<Se;ce++)te=H("tspan"),ce&&H(te,{dy:1.2*B,x:k.x}),te.appendChild(l._g.doc.createTextNode(ee[ce])),P.appendChild(te),ge[ce]=te}else for(ce=0,Se=(ge=P.getElementsByTagName("tspan")).length;ce<Se;ce++)ce?H(ge[ce],{dy:1.2*B,x:k.x}):H(ge[0],{dy:0});H(P,{x:k.x,y:k.y}),z._.dirty=1;var Ve=z._getBBox(),Ge=k.y-(Ve.y+Ve.height/2);Ge&&l.is(Ge,"finite")&&H(ge[0],{dy:Ge})}},je=function(z){return z.parentNode&&z.parentNode.tagName.toLowerCase()==="a"?z.parentNode:z},Je=function(z,M){this[0]=this.node=z,z.raphael=!0,this.id=("0000"+(Math.random()*Math.pow(36,5)<<0).toString(36)).slice(-5),z.raphaelid=this.id,this.matrix=l.matrix(),this.realPath=null,this.paper=M,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!M.bottom&&(M.bottom=this),this.prev=M.top,M.top&&(M.top.next=this),M.top=this,this.next=null},Ye=l.el;Je.prototype=Ye,Ye.constructor=Je,l._engine.path=function(z,M){var k=H("path");M.canvas&&M.canvas.appendChild(k);var P=new Je(k,M);return P.type="path",Le(P,{fill:"none",stroke:"#000",path:z}),P},Ye.rotate=function(z,M,k){if(this.removed)return this;if((z=p(z).split(X)).length-1&&(M=m(z[1]),k=m(z[2])),z=m(z[0]),k==null&&(M=k),M==null||k==null){var P=this.getBBox(1);M=P.x+P.width/2,k=P.y+P.height/2}return this.transform(this._.transform.concat([["r",z,M,k]])),this},Ye.scale=function(z,M,k,P){if(this.removed)return this;if((z=p(z).split(X)).length-1&&(M=m(z[1]),k=m(z[2]),P=m(z[3])),z=m(z[0]),M==null&&(M=z),P==null&&(k=P),k==null||P==null)var B=this.getBBox(1);return k=k??B.x+B.width/2,P=P??B.y+B.height/2,this.transform(this._.transform.concat([["s",z,M,k,P]])),this},Ye.translate=function(z,M){return this.removed?this:((z=p(z).split(X)).length-1&&(M=m(z[1])),z=m(z[0])||0,M=+M||0,this.transform(this._.transform.concat([["t",z,M]])),this)},Ye.transform=function(z){var M=this._;if(z==null)return M.transform;if(l._extractTransform(this,z),this.clip&&H(this.clip,{transform:this.matrix.invert()}),this.pattern&&Te(this),this.node&&H(this.node,{transform:this.matrix}),M.sx!=1||M.sy!=1){var k=this.attrs[h]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":k})}return this},Ye.hide=function(){return this.removed||(this.node.style.display="none"),this},Ye.show=function(){return this.removed||(this.node.style.display=""),this},Ye.remove=function(){var z=je(this.node);if(!this.removed&&z.parentNode){var M=this.paper;for(var k in M.__set__&&M.__set__.exclude(this),G.unbind("raphael.*.*."+this.id),this.gradient&&M.defs.removeChild(this.gradient),l._tear(this,M),z.parentNode.removeChild(z),this.removeData(),this)this[k]=typeof this[k]=="function"?l._removedFactory(k):null;this.removed=!0}},Ye._getBBox=function(){if(this.node.style.display=="none"){this.show();var z=!0}var M,k=!1;this.paper.canvas.parentElement?M=this.paper.canvas.parentElement.style:this.paper.canvas.parentNode&&(M=this.paper.canvas.parentNode.style),M&&M.display=="none"&&(k=!0,M.display="");var P={};try{P=this.node.getBBox()}catch{P={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}finally{P=P||{},k&&(M.display="none")}return z&&this.hide(),P},Ye.attr=function(z,M){if(this.removed)return this;if(z==null){var k={};for(var P in this.attrs)this.attrs[h](P)&&(k[P]=this.attrs[P]);return k.gradient&&k.fill=="none"&&(k.fill=k.gradient)&&delete k.gradient,k.transform=this._.transform,k}if(M==null&&l.is(z,"string")){if(z=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;if(z=="transform")return this._.transform;for(var B=z.split(X),te={},ee=0,ge=B.length;ee<ge;ee++)(z=B[ee])in this.attrs?te[z]=this.attrs[z]:l.is(this.paper.customAttributes[z],"function")?te[z]=this.paper.customAttributes[z].def:te[z]=l._availableAttrs[z];return ge-1?te:te[B[0]]}if(M==null&&l.is(z,"array")){for(te={},ee=0,ge=z.length;ee<ge;ee++)te[z[ee]]=this.attr(z[ee]);return te}if(M!=null){var ce={};ce[z]=M}else z!=null&&l.is(z,"object")&&(ce=z);for(var Se in ce)G("raphael.attr."+Se+"."+this.id,this,ce[Se]);for(Se in this.paper.customAttributes)if(this.paper.customAttributes[h](Se)&&ce[h](Se)&&l.is(this.paper.customAttributes[Se],"function")){var Ve=this.paper.customAttributes[Se].apply(this,[].concat(ce[Se]));for(var Ge in this.attrs[Se]=ce[Se],Ve)Ve[h](Ge)&&(ce[Ge]=Ve[Ge])}return Le(this,ce),this},Ye.toFront=function(){if(this.removed)return this;var z=je(this.node);z.parentNode.appendChild(z);var M=this.paper;return M.top!=this&&l._tofront(this,M),this},Ye.toBack=function(){if(this.removed)return this;var z=je(this.node),M=z.parentNode;return M.insertBefore(z,M.firstChild),l._toback(this,this.paper),this.paper,this},Ye.insertAfter=function(z){if(this.removed||!z)return this;var M=je(this.node),k=je(z.node||z[z.length-1].node);return k.nextSibling?k.parentNode.insertBefore(M,k.nextSibling):k.parentNode.appendChild(M),l._insertafter(this,z,this.paper),this},Ye.insertBefore=function(z){if(this.removed||!z)return this;var M=je(this.node),k=je(z.node||z[0].node);return k.parentNode.insertBefore(M,k),l._insertbefore(this,z,this.paper),this},Ye.blur=function(z){var M=this;if(+z!=0){var k=H("filter"),P=H("feGaussianBlur");M.attrs.blur=z,k.id=l.createUUID(),H(P,{stdDeviation:+z||1.5}),k.appendChild(P),M.paper.defs.appendChild(k),M._blur=k,H(M.node,{filter:"url(#"+k.id+")"})}else M._blur&&(M._blur.parentNode.removeChild(M._blur),delete M._blur,delete M.attrs.blur),M.node.removeAttribute("filter");return M},l._engine.circle=function(z,M,k,P){var B=H("circle");z.canvas&&z.canvas.appendChild(B);var te=new Je(B,z);return te.attrs={cx:M,cy:k,r:P,fill:"none",stroke:"#000"},te.type="circle",H(B,te.attrs),te},l._engine.rect=function(z,M,k,P,B,te){var ee=H("rect");z.canvas&&z.canvas.appendChild(ee);var ge=new Je(ee,z);return ge.attrs={x:M,y:k,width:P,height:B,rx:te||0,ry:te||0,fill:"none",stroke:"#000"},ge.type="rect",H(ee,ge.attrs),ge},l._engine.ellipse=function(z,M,k,P,B){var te=H("ellipse");z.canvas&&z.canvas.appendChild(te);var ee=new Je(te,z);return ee.attrs={cx:M,cy:k,rx:P,ry:B,fill:"none",stroke:"#000"},ee.type="ellipse",H(te,ee.attrs),ee},l._engine.image=function(z,M,k,P,B,te){var ee=H("image");H(ee,{x:k,y:P,width:B,height:te,preserveAspectRatio:"none"}),ee.setAttributeNS(ae,"href",M),z.canvas&&z.canvas.appendChild(ee);var ge=new Je(ee,z);return ge.attrs={x:k,y:P,width:B,height:te,src:M},ge.type="image",ge},l._engine.text=function(z,M,k,P){var B=H("text");z.canvas&&z.canvas.appendChild(B);var te=new Je(B,z);return te.attrs={x:M,y:k,"text-anchor":"middle",text:P,"font-family":l._availableAttrs["font-family"],"font-size":l._availableAttrs["font-size"],stroke:"none",fill:"#000"},te.type="text",Le(te,te.attrs),te},l._engine.setSize=function(z,M){return this.width=z||this.width,this.height=M||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},l._engine.create=function(){var z=l._getContainer.apply(0,arguments),M=z&&z.container;if(!M)throw new Error("SVG container not found.");var k,P=z.x,B=z.y,te=z.width,ee=z.height,ge=H("svg"),ce="overflow:hidden;";return P=P||0,B=B||0,H(ge,{height:ee=ee||342,version:1.1,width:te=te||512,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),M==1?(ge.style.cssText=ce+"position:absolute;left:"+P+"px;top:"+B+"px",l._g.doc.body.appendChild(ge),k=1):(ge.style.cssText=ce+"position:relative",M.firstChild?M.insertBefore(ge,M.firstChild):M.appendChild(ge)),(M=new l._Paper).width=te,M.height=ee,M.canvas=ge,M.clear(),M._left=M._top=0,k&&(M.renderfix=function(){}),M.renderfix(),M},l._engine.setViewBox=function(z,M,k,P,B){G("raphael.setViewBox",this,this._viewBox,[z,M,k,P,B]);var te,ee,ge=this.getSize(),ce=C(k/ge.width,P/ge.height),Se=this.top,Ve=B?"xMidYMid meet":"xMinYMin";for(z==null?(this._vbSize&&(ce=1),delete this._vbSize,te="0 0 "+this.width+K+this.height):(this._vbSize=ce,te=z+K+M+K+k+K+P),H(this.canvas,{viewBox:te,preserveAspectRatio:Ve});ce&&Se;)ee="stroke-width"in Se.attrs?Se.attrs["stroke-width"]:1,Se.attr({"stroke-width":ee}),Se._.dirty=1,Se._.dirtyT=1,Se=Se.prev;return this._viewBox=[z,M,k,P,!!B],this},l.prototype.renderfix=function(){var z,M=this.canvas,k=M.style;try{z=M.getScreenCTM()||M.createSVGMatrix()}catch{z=M.createSVGMatrix()}var P=-z.e%1,B=-z.f%1;(P||B)&&(P&&(this._left=(this._left+P)%1,k.left=this._left+"px"),B&&(this._top=(this._top+B)%1,k.top=this._top+"px"))},l.prototype.clear=function(){l.eve("raphael.clear",this);for(var z=this.canvas;z.firstChild;)z.removeChild(z.firstChild);this.bottom=this.top=null,(this.desc=H("desc")).appendChild(l._g.doc.createTextNode("Created with Raphal "+l.version)),z.appendChild(this.desc),z.appendChild(this.defs=H("defs"))},l.prototype.remove=function(){for(var z in G("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[z]=typeof this[z]=="function"?l._removedFactory(z):null};var it=l.st;for(var ft in Ye)Ye[h](ft)&&!it[h](ft)&&(it[ft]=function(z){return function(){var M=arguments;return this.forEach(function(k){k[z].apply(k,M)})}}(ft))}}).apply(i,s))===void 0||(n.exports=o)},function(n,i,r){var s,o;s=[r(0)],(o=(function(l){if(!l||l.vml){var h="hasOwnProperty",p=String,m=parseFloat,y=Math,E=y.round,C=y.max,N=y.min,F=y.abs,X=/[, ]+/,G=l.eve,V=" ",K="",ae={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},de=/([clmz]),?([^clmz]*)/gi,g=/ progid:\S+Blur\([^\)]+\)/g,H=/-?[^,\s-]+/g,re="position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)",_e=21600,Te={path:1,rect:1,image:1},ye={circle:1,ellipse:1},le=function(M,k,P){var B=l.matrix();return B.rotate(-M,.5,.5),{dx:B.x(k,P),dy:B.y(k,P)}},Pe=function(M,k,P,B,te,ee){var ge=M._,ce=M.matrix,Se=ge.fillpos,Ve=M.node,Ge=Ve.style,rt=1,S="",R=_e/k,$=_e/P;if(Ge.visibility="hidden",k&&P){if(Ve.coordsize=F(R)+V+F($),Ge.rotation=ee*(k*P<0?-1:1),ee){var Q=le(ee,B,te);B=Q.dx,te=Q.dy}if(k<0&&(S+="x"),P<0&&(S+=" y")&&(rt=-1),Ge.flip=S,Ve.coordorigin=B*-R+V+te*-$,Se||ge.fillsize){var ue=Ve.getElementsByTagName("fill");ue=ue&&ue[0],Ve.removeChild(ue),Se&&(Q=le(ee,ce.x(Se[0],Se[1]),ce.y(Se[0],Se[1])),ue.position=Q.dx*rt+V+Q.dy*rt),ge.fillsize&&(ue.size=ge.fillsize[0]*F(k)+V+ge.fillsize[1]*F(P)),Ve.appendChild(ue)}Ge.visibility="visible"}};l.toString=function(){return`Your browser doesnt support SVG. Falling down to VML.
You are running Raphal `+this.version};var Le,Ze=function(M,k,P){for(var B=p(k).toLowerCase().split("-"),te=P?"end":"start",ee=B.length,ge="classic",ce="medium",Se="medium";ee--;)switch(B[ee]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":ge=B[ee];break;case"wide":case"narrow":Se=B[ee];break;case"long":case"short":ce=B[ee]}var Ve=M.node.getElementsByTagName("stroke")[0];Ve[te+"arrow"]=ge,Ve[te+"arrowlength"]=ce,Ve[te+"arrowwidth"]=Se},je=function(M,k){M.attrs=M.attrs||{};var P=M.node,B=M.attrs,te=P.style,ee=Te[M.type]&&(k.x!=B.x||k.y!=B.y||k.width!=B.width||k.height!=B.height||k.cx!=B.cx||k.cy!=B.cy||k.rx!=B.rx||k.ry!=B.ry||k.r!=B.r),ge=ye[M.type]&&(B.cx!=k.cx||B.cy!=k.cy||B.r!=k.r||B.rx!=k.rx||B.ry!=k.ry),ce=M;for(var Se in k)k[h](Se)&&(B[Se]=k[Se]);if(ee&&(B.path=l._getPath[M.type](M),M._.dirty=1),k.href&&(P.href=k.href),k.title&&(P.title=k.title),k.target&&(P.target=k.target),k.cursor&&(te.cursor=k.cursor),"blur"in k&&M.blur(k.blur),(k.path&&M.type=="path"||ee)&&(P.path=function(Lt){var En=/[ahqstv]/gi,Jt=l._pathToAbsolute;if(p(Lt).match(En)&&(Jt=l._path2curve),En=/[clmz]/g,Jt==l._pathToAbsolute&&!p(Lt).match(En)){var Pt=p(Lt).replace(de,function(on,zn,Kn){var $n=[],yi=zn.toLowerCase()=="m",ai=ae[zn];return Kn.replace(H,function(bi){yi&&$n.length==2&&(ai+=$n+ae[zn=="m"?"l":"L"],$n=[]),$n.push(E(bi*_e))}),ai+$n});return Pt}var vi,cn,Gn=Jt(Lt);Pt=[];for(var oi=0,Sn=Gn.length;oi<Sn;oi++){vi=Gn[oi],(cn=Gn[oi][0].toLowerCase())=="z"&&(cn="x");for(var Mn=1,vn=vi.length;Mn<vn;Mn++)cn+=E(vi[Mn]*_e)+(Mn!=vn-1?",":K);Pt.push(cn)}return Pt.join(V)}(~p(B.path).toLowerCase().indexOf("r")?l._pathToAbsolute(B.path):B.path),M._.dirty=1,M.type=="image"&&(M._.fillpos=[B.x,B.y],M._.fillsize=[B.width,B.height],Pe(M,1,1,0,0,0))),"transform"in k&&M.transform(k.transform),ge){var Ve=+B.cx,Ge=+B.cy,rt=+B.rx||+B.r||0,S=+B.ry||+B.r||0;P.path=l.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",E((Ve-rt)*_e),E((Ge-S)*_e),E((Ve+rt)*_e),E((Ge+S)*_e),E(Ve*_e)),M._.dirty=1}if("clip-rect"in k){var R=p(k["clip-rect"]).split(X);if(R.length==4){R[2]=+R[2]+ +R[0],R[3]=+R[3]+ +R[1];var $=P.clipRect||l._g.doc.createElement("div"),Q=$.style;Q.clip=l.format("rect({1}px {2}px {3}px {0}px)",R),P.clipRect||(Q.position="absolute",Q.top=0,Q.left=0,Q.width=M.paper.width+"px",Q.height=M.paper.height+"px",P.parentNode.insertBefore($,P),$.appendChild(P),P.clipRect=$)}k["clip-rect"]||P.clipRect&&(P.clipRect.style.clip="auto")}if(M.textpath){var ue=M.textpath.style;k.font&&(ue.font=k.font),k["font-family"]&&(ue.fontFamily='"'+k["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,K)+'"'),k["font-size"]&&(ue.fontSize=k["font-size"]),k["font-weight"]&&(ue.fontWeight=k["font-weight"]),k["font-style"]&&(ue.fontStyle=k["font-style"])}if("arrow-start"in k&&Ze(ce,k["arrow-start"]),"arrow-end"in k&&Ze(ce,k["arrow-end"],1),k.opacity!=null||k.fill!=null||k.src!=null||k.stroke!=null||k["stroke-width"]!=null||k["stroke-opacity"]!=null||k["fill-opacity"]!=null||k["stroke-dasharray"]!=null||k["stroke-miterlimit"]!=null||k["stroke-linejoin"]!=null||k["stroke-linecap"]!=null){var fe=P.getElementsByTagName("fill");if(!(fe=fe&&fe[0])&&(fe=Le("fill")),M.type=="image"&&k.src&&(fe.src=k.src),k.fill&&(fe.on=!0),fe.on!=null&&k.fill!="none"&&k.fill!==null||(fe.on=!1),fe.on&&k.fill){var Me=p(k.fill).match(l._ISURL);if(Me){fe.parentNode==P&&P.removeChild(fe),fe.rotate=!0,fe.src=Me[1],fe.type="tile";var tt=M.getBBox(1);fe.position=tt.x+V+tt.y,M._.fillpos=[tt.x,tt.y],l._preload(Me[1],function(){M._.fillsize=[this.offsetWidth,this.offsetHeight]})}else fe.color=l.getRGB(k.fill).hex,fe.src=K,fe.type="solid",l.getRGB(k.fill).error&&(ce.type in{circle:1,ellipse:1}||p(k.fill).charAt()!="r")&&Je(ce,k.fill,fe)&&(B.fill="none",B.gradient=k.fill,fe.rotate=!1)}if("fill-opacity"in k||"opacity"in k){var Ke=((+B["fill-opacity"]+1||2)-1)*((+B.opacity+1||2)-1)*((+l.getRGB(k.fill).o+1||2)-1);Ke=N(C(Ke,0),1),fe.opacity=Ke,fe.src&&(fe.color="none")}P.appendChild(fe);var at=P.getElementsByTagName("stroke")&&P.getElementsByTagName("stroke")[0],mt=!1;!at&&(mt=at=Le("stroke")),(k.stroke&&k.stroke!="none"||k["stroke-width"]||k["stroke-opacity"]!=null||k["stroke-dasharray"]||k["stroke-miterlimit"]||k["stroke-linejoin"]||k["stroke-linecap"])&&(at.on=!0),(k.stroke=="none"||k.stroke===null||at.on==null||k.stroke==0||k["stroke-width"]==0)&&(at.on=!1);var lt=l.getRGB(k.stroke);at.on&&k.stroke&&(at.color=lt.hex),Ke=((+B["stroke-opacity"]+1||2)-1)*((+B.opacity+1||2)-1)*((+lt.o+1||2)-1);var It=.75*(m(k["stroke-width"])||1);if(Ke=N(C(Ke,0),1),k["stroke-width"]==null&&(It=B["stroke-width"]),k["stroke-width"]&&(at.weight=It),It&&It<1&&(Ke*=It)&&(at.weight=1),at.opacity=Ke,k["stroke-linejoin"]&&(at.joinstyle=k["stroke-linejoin"]||"miter"),at.miterlimit=k["stroke-miterlimit"]||8,k["stroke-linecap"]&&(at.endcap=k["stroke-linecap"]=="butt"?"flat":k["stroke-linecap"]=="square"?"square":"round"),"stroke-dasharray"in k){var sn={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};at.dashstyle=sn[h](k["stroke-dasharray"])?sn[k["stroke-dasharray"]]:K}mt&&P.appendChild(at)}if(ce.type=="text"){ce.paper.canvas.style.display=K;var ln=ce.paper.span,Ft=B.font&&B.font.match(/\d+(?:\.\d*)?(?=px)/);te=ln.style,B.font&&(te.font=B.font),B["font-family"]&&(te.fontFamily=B["font-family"]),B["font-weight"]&&(te.fontWeight=B["font-weight"]),B["font-style"]&&(te.fontStyle=B["font-style"]),Ft=m(B["font-size"]||Ft&&Ft[0])||10,te.fontSize=100*Ft+"px",ce.textpath.string&&(ln.innerHTML=p(ce.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var Dt=ln.getBoundingClientRect();ce.W=B.w=(Dt.right-Dt.left)/100,ce.H=B.h=(Dt.bottom-Dt.top)/100,ce.X=B.x,ce.Y=B.y+ce.H/2,("x"in k||"y"in k)&&(ce.path.v=l.format("m{0},{1}l{2},{1}",E(B.x*_e),E(B.y*_e),E(B.x*_e)+1));for(var un=["x","y","text","font","font-family","font-weight","font-style","font-size"],fn=0,kn=un.length;fn<kn;fn++)if(un[fn]in k){ce._.dirty=1;break}switch(B["text-anchor"]){case"start":ce.textpath.style["v-text-align"]="left",ce.bbx=ce.W/2;break;case"end":ce.textpath.style["v-text-align"]="right",ce.bbx=-ce.W/2;break;default:ce.textpath.style["v-text-align"]="center",ce.bbx=0}ce.textpath.style["v-text-kern"]=!0}},Je=function(M,k,P){M.attrs=M.attrs||{},M.attrs;var B=Math.pow,te="linear",ee=".5 .5";if(M.attrs.gradient=k,k=(k=p(k).replace(l._radial_gradient,function(rt,S,R){return te="radial",S&&R&&(S=m(S),R=m(R),B(S-.5,2)+B(R-.5,2)>.25&&(R=y.sqrt(.25-B(S-.5,2))*(2*(R>.5)-1)+.5),ee=S+V+R),K})).split(/\s*\-\s*/),te=="linear"){var ge=k.shift();if(ge=-m(ge),isNaN(ge))return null}var ce=l._parseDots(k);if(!ce)return null;if(M=M.shape||M.node,ce.length){M.removeChild(P),P.on=!0,P.method="none",P.color=ce[0].color,P.color2=ce[ce.length-1].color;for(var Se=[],Ve=0,Ge=ce.length;Ve<Ge;Ve++)ce[Ve].offset&&Se.push(ce[Ve].offset+V+ce[Ve].color);P.colors=Se.length?Se.join():"0% "+P.color,te=="radial"?(P.type="gradientTitle",P.focus="100%",P.focussize="0 0",P.focusposition=ee,P.angle=0):(P.type="gradient",P.angle=(270-ge)%360),M.appendChild(P)}return 1},Ye=function(M,k){this[0]=this.node=M,M.raphael=!0,this.id=l._oid++,M.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=k,this.matrix=l.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!k.bottom&&(k.bottom=this),this.prev=k.top,k.top&&(k.top.next=this),k.top=this,this.next=null},it=l.el;Ye.prototype=it,it.constructor=Ye,it.transform=function(M){if(M==null)return this._.transform;var k,P=this.paper._viewBoxShift,B=P?"s"+[P.scale,P.scale]+"-1-1t"+[P.dx,P.dy]:K;P&&(k=M=p(M).replace(/\.{3}|\u2026/g,this._.transform||K)),l._extractTransform(this,B+M);var te,ee=this.matrix.clone(),ge=this.skew,ce=this.node,Se=~p(this.attrs.fill).indexOf("-"),Ve=!p(this.attrs.fill).indexOf("url(");if(ee.translate(1,1),Ve||Se||this.type=="image")if(ge.matrix="1 0 0 1",ge.offset="0 0",te=ee.split(),Se&&te.noRotation||!te.isSimple){ce.style.filter=ee.toFilter();var Ge=this.getBBox(),rt=this.getBBox(1),S=Ge.x-rt.x,R=Ge.y-rt.y;ce.coordorigin=S*-_e+V+R*-_e,Pe(this,1,1,S,R,0)}else ce.style.filter=K,Pe(this,te.scalex,te.scaley,te.dx,te.dy,te.rotate);else ce.style.filter=K,ge.matrix=p(ee),ge.offset=ee.offset();return k!==null&&(this._.transform=k,l._extractTransform(this,k)),this},it.rotate=function(M,k,P){if(this.removed)return this;if(M!=null){if((M=p(M).split(X)).length-1&&(k=m(M[1]),P=m(M[2])),M=m(M[0]),P==null&&(k=P),k==null||P==null){var B=this.getBBox(1);k=B.x+B.width/2,P=B.y+B.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",M,k,P]])),this}},it.translate=function(M,k){return this.removed?this:((M=p(M).split(X)).length-1&&(k=m(M[1])),M=m(M[0])||0,k=+k||0,this._.bbox&&(this._.bbox.x+=M,this._.bbox.y+=k),this.transform(this._.transform.concat([["t",M,k]])),this)},it.scale=function(M,k,P,B){if(this.removed)return this;if((M=p(M).split(X)).length-1&&(k=m(M[1]),P=m(M[2]),B=m(M[3]),isNaN(P)&&(P=null),isNaN(B)&&(B=null)),M=m(M[0]),k==null&&(k=M),B==null&&(P=B),P==null||B==null)var te=this.getBBox(1);return P=P??te.x+te.width/2,B=B??te.y+te.height/2,this.transform(this._.transform.concat([["s",M,k,P,B]])),this._.dirtyT=1,this},it.hide=function(){return!this.removed&&(this.node.style.display="none"),this},it.show=function(){return!this.removed&&(this.node.style.display=K),this},it.auxGetBBox=l.el.getBBox,it.getBBox=function(){var M=this.auxGetBBox();if(this.paper&&this.paper._viewBoxShift){var k={},P=1/this.paper._viewBoxShift.scale;return k.x=M.x-this.paper._viewBoxShift.dx,k.x*=P,k.y=M.y-this.paper._viewBoxShift.dy,k.y*=P,k.width=M.width*P,k.height=M.height*P,k.x2=k.x+k.width,k.y2=k.y+k.height,k}return M},it._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},it.remove=function(){if(!this.removed&&this.node.parentNode){for(var M in this.paper.__set__&&this.paper.__set__.exclude(this),l.eve.unbind("raphael.*.*."+this.id),l._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape),this)this[M]=typeof this[M]=="function"?l._removedFactory(M):null;this.removed=!0}},it.attr=function(M,k){if(this.removed)return this;if(M==null){var P={};for(var B in this.attrs)this.attrs[h](B)&&(P[B]=this.attrs[B]);return P.gradient&&P.fill=="none"&&(P.fill=P.gradient)&&delete P.gradient,P.transform=this._.transform,P}if(k==null&&l.is(M,"string")){if(M=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;for(var te=M.split(X),ee={},ge=0,ce=te.length;ge<ce;ge++)(M=te[ge])in this.attrs?ee[M]=this.attrs[M]:l.is(this.paper.customAttributes[M],"function")?ee[M]=this.paper.customAttributes[M].def:ee[M]=l._availableAttrs[M];return ce-1?ee:ee[te[0]]}if(this.attrs&&k==null&&l.is(M,"array")){for(ee={},ge=0,ce=M.length;ge<ce;ge++)ee[M[ge]]=this.attr(M[ge]);return ee}var Se;for(var Ve in k!=null&&((Se={})[M]=k),k==null&&l.is(M,"object")&&(Se=M),Se)G("raphael.attr."+Ve+"."+this.id,this,Se[Ve]);if(Se){for(Ve in this.paper.customAttributes)if(this.paper.customAttributes[h](Ve)&&Se[h](Ve)&&l.is(this.paper.customAttributes[Ve],"function")){var Ge=this.paper.customAttributes[Ve].apply(this,[].concat(Se[Ve]));for(var rt in this.attrs[Ve]=Se[Ve],Ge)Ge[h](rt)&&(Se[rt]=Ge[rt])}Se.text&&this.type=="text"&&(this.textpath.string=Se.text),je(this,Se)}return this},it.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&l._tofront(this,this.paper),this},it.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),l._toback(this,this.paper)),this)},it.insertAfter=function(M){return this.removed?this:(M.constructor==l.st.constructor&&(M=M[M.length-1]),M.node.nextSibling?M.node.parentNode.insertBefore(this.node,M.node.nextSibling):M.node.parentNode.appendChild(this.node),l._insertafter(this,M,this.paper),this)},it.insertBefore=function(M){return this.removed?this:(M.constructor==l.st.constructor&&(M=M[0]),M.node.parentNode.insertBefore(this.node,M.node),l._insertbefore(this,M,this.paper),this)},it.blur=function(M){var k=this.node.runtimeStyle,P=k.filter;return P=P.replace(g,K),+M!=0?(this.attrs.blur=M,k.filter=P+V+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+M||1.5)+")",k.margin=l.format("-{0}px 0 0 -{0}px",E(+M||1.5))):(k.filter=P,k.margin=0,delete this.attrs.blur),this},l._engine.path=function(M,k){var P=Le("shape");P.style.cssText=re,P.coordsize=_e+V+_e,P.coordorigin=k.coordorigin;var B=new Ye(P,k),te={fill:"none",stroke:"#000"};M&&(te.path=M),B.type="path",B.path=[],B.Path=K,je(B,te),k.canvas&&k.canvas.appendChild(P);var ee=Le("skew");return ee.on=!0,P.appendChild(ee),B.skew=ee,B.transform(K),B},l._engine.rect=function(M,k,P,B,te,ee){var ge=l._rectPath(k,P,B,te,ee),ce=M.path(ge),Se=ce.attrs;return ce.X=Se.x=k,ce.Y=Se.y=P,ce.W=Se.width=B,ce.H=Se.height=te,Se.r=ee,Se.path=ge,ce.type="rect",ce},l._engine.ellipse=function(M,k,P,B,te){var ee=M.path();return ee.attrs,ee.X=k-B,ee.Y=P-te,ee.W=2*B,ee.H=2*te,ee.type="ellipse",je(ee,{cx:k,cy:P,rx:B,ry:te}),ee},l._engine.circle=function(M,k,P,B){var te=M.path();return te.attrs,te.X=k-B,te.Y=P-B,te.W=te.H=2*B,te.type="circle",je(te,{cx:k,cy:P,r:B}),te},l._engine.image=function(M,k,P,B,te,ee){var ge=l._rectPath(P,B,te,ee),ce=M.path(ge).attr({stroke:"none"}),Se=ce.attrs,Ve=ce.node,Ge=Ve.getElementsByTagName("fill")[0];return Se.src=k,ce.X=Se.x=P,ce.Y=Se.y=B,ce.W=Se.width=te,ce.H=Se.height=ee,Se.path=ge,ce.type="image",Ge.parentNode==Ve&&Ve.removeChild(Ge),Ge.rotate=!0,Ge.src=k,Ge.type="tile",ce._.fillpos=[P,B],ce._.fillsize=[te,ee],Ve.appendChild(Ge),Pe(ce,1,1,0,0,0),ce},l._engine.text=function(M,k,P,B){var te=Le("shape"),ee=Le("path"),ge=Le("textpath");k=k||0,P=P||0,B=B||"",ee.v=l.format("m{0},{1}l{2},{1}",E(k*_e),E(P*_e),E(k*_e)+1),ee.textpathok=!0,ge.string=p(B),ge.on=!0,te.style.cssText=re,te.coordsize=_e+V+_e,te.coordorigin="0 0";var ce=new Ye(te,M),Se={fill:"#000",stroke:"none",font:l._availableAttrs.font,text:B};ce.shape=te,ce.path=ee,ce.textpath=ge,ce.type="text",ce.attrs.text=p(B),ce.attrs.x=k,ce.attrs.y=P,ce.attrs.w=1,ce.attrs.h=1,je(ce,Se),te.appendChild(ge),te.appendChild(ee),M.canvas.appendChild(te);var Ve=Le("skew");return Ve.on=!0,te.appendChild(Ve),ce.skew=Ve,ce.transform(K),ce},l._engine.setSize=function(M,k){var P=this.canvas.style;return this.width=M,this.height=k,M==+M&&(M+="px"),k==+k&&(k+="px"),P.width=M,P.height=k,P.clip="rect(0 "+M+" "+k+" 0)",this._viewBox&&l._engine.setViewBox.apply(this,this._viewBox),this},l._engine.setViewBox=function(M,k,P,B,te){l.eve("raphael.setViewBox",this,this._viewBox,[M,k,P,B,te]);var ee,ge,ce=this.getSize(),Se=ce.width,Ve=ce.height;return te&&(P*(ee=Ve/B)<Se&&(M-=(Se-P*ee)/2/ee),B*(ge=Se/P)<Ve&&(k-=(Ve-B*ge)/2/ge)),this._viewBox=[M,k,P,B,!!te],this._viewBoxShift={dx:-M,dy:-k,scale:ce},this.forEach(function(Ge){Ge.transform("...")}),this},l._engine.initWin=function(M){var k=M.document;k.styleSheets.length<31?k.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"):k.styleSheets[0].addRule(".rvml","behavior:url(#default#VML)");try{!k.namespaces.rvml&&k.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),Le=function(P){return k.createElement("<rvml:"+P+' class="rvml">')}}catch{Le=function(B){return k.createElement("<"+B+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},l._engine.initWin(l._g.win),l._engine.create=function(){var M=l._getContainer.apply(0,arguments),k=M.container,P=M.height,B=M.width,te=M.x,ee=M.y;if(!k)throw new Error("VML container not found.");var ge=new l._Paper,ce=ge.canvas=l._g.doc.createElement("div"),Se=ce.style;return te=te||0,ee=ee||0,B=B||512,P=P||342,ge.width=B,ge.height=P,B==+B&&(B+="px"),P==+P&&(P+="px"),ge.coordsize=216e5+V+216e5,ge.coordorigin="0 0",ge.span=l._g.doc.createElement("span"),ge.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",ce.appendChild(ge.span),Se.cssText=l.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",B,P),k==1?(l._g.doc.body.appendChild(ce),Se.left=te+"px",Se.top=ee+"px",Se.position="absolute"):k.firstChild?k.insertBefore(ce,k.firstChild):k.appendChild(ce),ge.renderfix=function(){},ge},l.prototype.clear=function(){l.eve("raphael.clear",this),this.canvas.innerHTML=K,this.span=l._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},l.prototype.remove=function(){for(var M in l.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas),this)this[M]=typeof this[M]=="function"?l._removedFactory(M):null;return!0};var ft=l.st;for(var z in it)it[h](z)&&!ft[h](z)&&(ft[z]=function(M){return function(){var k=arguments;return this.forEach(function(P){P[M].apply(P,k)})}}(z))}}).apply(i,s))===void 0||(n.exports=o)}])})}(r1)),r1.exports}var y3=v3();const On=vl(y3),H1=dt.View.extend({handle_wh:6,default_line_attrs:{"stroke-width":0,stroke:"#4b80f9",cursor:"default","fill-opacity":.01,fill:"#fff"},selected_line_attrs:{stroke:"#4b80f9","stroke-width":2},handle_attrs:{stroke:"#4b80f9",fill:"#fff",cursor:"default","fill-opacity":1},events:{},initialize:function(t){var e=this;this.paper=t.paper,this.handle_wh=t.handle_wh||this.handle_wh,this.handles_toFront=t.handles_toFront||!1,this.disable_handles=t.disable_handles||!1,this.fixed_ratio=t.fixed_ratio||!1,this.x=this.model.get("x"),this.y=this.model.get("y"),this.width=this.model.get("width"),this.height=this.model.get("height"),this.handleIds={nw:[this.x,this.y],n:[this.x+this.width/2,this.y],ne:[this.x+this.width,this.y],w:[this.x,this.y+this.height/2],e:[this.x+this.width,this.y+this.height/2],sw:[this.x,this.y+this.height],s:[this.x+this.width/2,this.y+this.height],se:[this.x+this.width,this.y+this.height]},e.handles=this.paper.set();var n=function(){return function(m,y,E,C,N){if(e.disable_handles)return!1;var F=e.fixed_ratio||N.shiftKey;F&&this.h_id.length===2&&(this.h_id==="se"||this.h_id==="nw"?Math.abs(m/y)>this.aspect?y=m/this.aspect:m=y*this.aspect:Math.abs(m/y)>this.aspect?y=-m/this.aspect:m=-y*this.aspect);var X=this.ox+m,G=this.oy+y,V={x:this.rect.x,y:this.rect.y,width:this.rect.width,height:this.rect.height};return this.h_id.indexOf("e")>-1&&(V.width=X-e.x+e.handle_wh/2),this.h_id.indexOf("s")>-1&&(V.height=G-e.y+e.handle_wh/2),this.h_id.indexOf("n")>-1&&(V.y=G+e.handle_wh/2,V.height=this.obottom-G),this.h_id.indexOf("w")>-1&&(V.x=X+e.handle_wh/2,V.width=this.oright-X),V.width<1||V.height<1||(this.rect.x=V.x,this.rect.y=V.y,this.rect.width=V.width,this.rect.height=V.height,this.rect.model.trigger("drag_resize",[this.rect.x,this.rect.y,this.rect.width,this.rect.height]),this.rect.updateShape()),!1}},i=function(){return function(){return e.disable_handles||(this.ox=this.attr("x"),this.oy=this.attr("y"),this.oright=e.width+this.ox,this.obottom=e.height+this.oy,this.aspect=e.model.get("width")/e.model.get("height")),!1}},r=function(){return function(){return e.disable_handles||this.rect.model.trigger("drag_resize_stop",[this.rect.x,this.rect.y,this.rect.width,this.rect.height]),!1}},s=function(m){m.stopImmediatePropagation()};for(var o in this.handleIds){var l=this.handleIds[o][0],h=this.handleIds[o][1],p=this.paper.rect(l-e.handle_wh/2,h-e.handle_wh/2,e.handle_wh,e.handle_wh).attr(e.handle_attrs);p.attr({cursor:o+"-resize"}),p.h_id=o,p.rect=e,p.drag(n(),i(),r()),p.mousedown(s),e.handles.push(p)}e.handles.hide(),this.element=this.paper.rect(),this.element.attr(e.default_line_attrs),this.setElement(this.element.node),this.delegateEvents(this.events),this.element.drag(function(m,y){return e.x=m+this.ox,e.y=this.oy+y,e.dragging=!0,e.model.trigger("drag_xy",[m,y]),e.updateShape(),!1},function(){return this.ox=this.attr("x"),this.oy=this.attr("y"),!1},function(){return e.model.trigger("drag_xy_stop",[e.x-this.ox,e.y-this.oy]),e.dragging=!1,!1}),this.element.mousedown(function(m){m.stopImmediatePropagation(),e.selectShape(m)}),this.updateShape(),this.model.on("change",this.render,this),this.model.on("destroy",this.destroy,this)},render:function(t){this.dragging||(this.x=this.model.get("x"),this.y=this.model.get("y"),this.width=this.model.get("width"),this.height=this.model.get("height"),this.updateShape())},updateShape:function(){if(this.element.attr({x:this.x,y:this.y,width:this.width,height:this.height}),this.model.get("selected")){this.element.attr(this.selected_line_attrs);var t=this;this.handles_toFront?setTimeout(function(){t.handles.show().toFront()},50):this.handles.show().toFront()}else this.element.attr(this.default_line_attrs),this.handles.hide();this.handleIds={nw:[this.x,this.y],n:[this.x+this.width/2,this.y],ne:[this.x+this.width,this.y],w:[this.x,this.y+this.height/2],e:[this.x+this.width,this.y+this.height/2],sw:[this.x,this.y+this.height],s:[this.x+this.width/2,this.y+this.height],se:[this.x+this.width,this.y+this.height]};for(var e,n,i,r,s=0,o=this.handles.length;s<o;s++)e=this.handles[s],n=e.h_id,i=this.handleIds[n][0],r=this.handleIds[n][1],e.attr({x:i-this.handle_wh/2,y:r-this.handle_wh/2})},selectShape:function(t){this.model.trigger("clicked",[t])},destroy:function(){this.element.remove(),this.handles.remove(),this.model.off("change",this.render,this)}}),b3=`
<tr class="roiPickMe">
    <td>
        <div class="roi_wrapper" style="position: relative; overflow: hidden; margin: 5px; height: <%= h %>px; width: <%= w %>px">
            <img id="<%= id %>"
                class="roi_content"
                data-roiId="<%= roiId %>"
                data-rotation="<%= rect.rotation %>"
                data-x="<%= rect.x %>" data-y="<%= rect.y %>" 
                data-width="<%= rect.width %>" data-height="<%= rect.height %>"
                data-theT="<%= rect.theT %>" data-theZ="<%= rect.theZ %>"
                style="position: absolute; top: <%= top %>px; left: <%= left %>px; width: <%= img_w %>px; height: <%= img_h %>px;
                transform: <%= css.transform %>;
                transform-origin: <%= css['transform-origin'] %>;"
                src='<%= src %>' />
        </div>
    </td>
    <% if (zStart) { %>
    <td>
        <%= zStart %>
        <% if (zStart !== zEnd) print(" - " + zEnd); %>
    </td>
    <% } %>
    <% if (tStart) { %>
    <td>
        <%= tStart %>
        <% if (tStart !== tEnd) print(" - " + tEnd); %>
    </td>
    <% } %>
</tr>
`,w3=dt.View.extend({el:A("#cropModal"),roiTemplate:De.template(b3),model:Oi,roisPageSize:200,roisPage:0,roisCount:0,roisLoaded:0,roiRects:[],initialize:function(){var t=this;document.getElementById("cropModal").addEventListener("shown.bs.modal",()=>{t.m=t.model.getSelected().head().clone(),t.listenTo(t.m,"change:theZ change:theT",t.render),t.cropModel.set({selected:!1,width:0,height:0});var e=t.m.getViewportAsRect();t.applyRotation(e),(e.x!==0||e.y!==0||e.width!==t.m.get("orig_width")||e.height!==t.m.get("orig_height"))&&(t.currentROI=e,t.cropModel.set({selected:!0})),t.m.set({zoom:100,dx:0,dy:0}),t.zoomToFit(),t.enableSubmit(!1),t.roiRects=[],t.roisLoaded=0,t.roisPage=0,t.loadRoiRects(),t.showClipboardFigureRois()}),this.currentROI={x:0,y:0,width:0,height:0},this.cropModel=new dt.Model({x:0,y:0,width:0,height:0,selected:!1}),this.cropModel.bind("drag_resize_stop",function(e){this.set({x:e[0],y:e[1],width:e[2],height:e[3]})}),this.cropModel.bind("drag_xy_stop",function(e){this.set({x:e[0]+this.get("x"),y:e[1]+this.get("y")})}),this.listenTo(this.cropModel,"change:x change:y change:width change:height",function(e){var n=t.zoom/100;t.currentROI={x:(e.get("x")-t.offsetX)/n,y:(e.get("y")-t.offsetY)/n,width:e.get("width")/n,height:e.get("height")/n},t.currentRoiId=void 0,t.regionValid(t.currentROI)?t.enableSubmit(!0):t.enableSubmit(!1)}),this.paper=On("crop_paper",500,500),this.rect=new H1({model:this.cropModel,paper:this.paper}),this.$cropImg=A(".crop_image",this.$el)},events:{"click .roiPickMe":"roiPicked","click .loadRoiRects":"loadRoiRects","mousedown svg":"mousedown","mousemove svg":"mousemove","mouseup svg":"mouseup","submit .cropModalForm":"handleRoiForm"},enableSubmit:function(t){var e=A('button[type="submit"]',this.$el);t?(e.prop("disabled",!1),e.prop("title","Crop selected images to chosen region")):(e.prop("disabled","disabled"),e.prop("title","No valid region selected"))},regionValid:function(t){return!(t.width<2||t.height<2||t.x>this.m.get("orig_width")||t.y>this.m.get("orig_height")||t.x+t.width<0||t.y+t.height<0)},roiPicked:function(t){var e=A(t.target),n=e.parent(),i=n.find("img.roi_content"),r=parseInt(i.attr("data-x"),10),s=parseInt(i.attr("data-y"),10),o=parseInt(i.attr("data-width"),10),l=parseInt(i.attr("data-height"),10),h=i.attr("data-rotation")||0,p=parseInt(i.attr("data-theT"),10),m=parseInt(i.attr("data-theZ"),10);h=parseInt(h),this.m.set("rotation",h),this.m.set({theT:p,theZ:m}),this.currentROI={x:r,y:s,width:o,height:l},this.applyRotation(this.currentROI,1,h),this.render(),this.cropModel.set({selected:!0}),this.currentRoiId=i.attr("data-roiId")},applyRotation:function(t,e=1,n){if(n===void 0&&(n=this.m.get("rotation")),n!=0){var i=this.m.get("orig_width")/2,r=this.m.get("orig_height")/2,s=t.x+t.width/2,o=t.y+t.height/2,l=qr(s,o,i,r,n*e);t.x=l.x-t.width/2,t.y=l.y-t.height/2}},handleRoiForm:function(t){t.preventDefault();var e=this,n=this.currentROI,i=this.model.getSelected(),r=i.allEqual("theT"),s=function(m,y){r&&(y=e.m.get("theT")),e.applyRotation(n,-1);var E={x:n.x,y:n.y,width:n.width,height:n.height,theZ:e.m.get("theZ"),theT:y};return E};this.currentRoiId&&(s=function(m,y){var E=e.cachedRois[e.currentRoiId],C=De.keys(E).sort(),N,F,X,G;return E[y]?X=y:X=C[parseInt(C.length/2,10)],N=De.keys(E[X]).sort(),E[X][m]?F=m:F=N[parseInt(N.length/2,10)],G=E[X][F],r||(X=y),{x:G.X,y:G.Y,width:G.Width,height:G.Height,theZ:F,theT:X}}),$r("cropModal");function o(p){i.each(function(m){var y=s(m.get("theZ"),m.get("theT")),E=Math.min(parseInt(y.theZ,10),m.get("sizeZ")-1),C=Math.min(parseInt(y.theT,10),m.get("sizeT")-1);m.cropToRoi({x:y.x,y:y.y,width:y.width,height:y.height}),p&&m.unset("shapes"),m.save({theZ:E,theT:C,rotation:e.m.get("rotation")})})}var l=!1,h=i.length>0?"s":"";i.each(function(p){p.get("shapes")&&(l=!0)}),l?Zi("Delete ROIs?","Delete ROIs on the image"+h+" you are cropping?",["Yes","No","Cancel"],function(p){p!="Cancel"&&(p=="Yes"?o(!0):o())}):o()},mousedown:function(t){this.dragging=!0;var e=A(t.target).offset();return this.clientX_start=t.clientX,this.clientY_start=t.clientY,this.imageX_start=this.clientX_start-e.left,this.imageY_start=this.clientY_start-e.top,this.cropModel.set({x:this.imageX_start,y:this.imageY_start,width:0,height:0,selected:!0}),!1},mouseup:function(t){if(this.dragging)return this.dragging=!1,!1},mousemove:function(t){if(this.dragging){var e=t.clientX-this.clientX_start,n=t.clientY-this.clientY_start;t.shiftKey&&(Math.abs(e)>Math.abs(n)?n>0?n=Math.abs(e):n=-1*Math.abs(e):e>0?e=Math.abs(n):e=-1*Math.abs(n));var i=Math.min(0,e),r=Math.min(0,n);return this.cropModel.set({x:this.imageX_start+i,y:this.imageY_start+r,width:Math.abs(e),height:Math.abs(n)}),!1}},showClipboardFigureRois:function(){var t=[],e=this.model.get("clipboard");if(e&&e.CROP){var n=e.CROP;t.push({x:n.x,y:n.y,width:n.width,height:n.height,rotation:n.rotation})}else e&&e.SHAPES&&e.SHAPES.forEach(function(o){o.type==="Rectangle"&&t.push({x:o.x,y:o.y,width:o.width,height:o.height})});var i="No Regions copied to clipboard";this.renderRois(t,".roisFromClipboard",i);var r=[],s=this.model.getSelected();s.forEach(function(o){var l=o.get("shapes");l&&l.forEach(function(h){h.type==="Rectangle"&&r.push({x:h.x,y:h.y,width:h.width,height:h.height})})}),i="No Rectangular ROIs on selected panel in figure",this.renderRois(r,".roisFromFigure",i)},loadRoiRects:function(t){t&&t.preventDefault();var e=this,n=e.m.get("imageId"),i=this.roisPageSize*this.roisPage,r=BASE_WEBFIGURE_URL+"roiRectangles/"+n+"/?limit="+e.roisPageSize+"&offset="+i;ns(r).then(s=>{var o=s.data;e.roisLoaded+=o.length,e.roisPage+=1,e.roisCount=s.meta.totalCount;for(var l=e.m.get("theT"),h=e.m.get("theZ"),p={},m,y,E,C,N,F,X,G,V,K,ae,de,g=0;g<o.length;g++){m=o[g],y=m["@id"],de={},K=void 0,ae=0;for(var H=0;H<m.shapes.length;H++){E=m.shapes[H];var re=E["@type"].split("#")[1];re==="Rectangle"&&(E.TheZ===void 0&&(E.TheZ=h),N=E.TheZ,E.TheT===void 0&&(E.TheT=l),C=E.TheT,K===void 0?K=C:K=Math.min(K,C),ae=Math.max(ae,C),de[C]===void 0&&(de[C]={}),de[C][N]=E)}p[y]=de,G=De.keys(de).map(function(Te){return parseInt(Te,10)}).sort(function(Te,ye){return Te-ye}),G.length!==0&&(de[l]?X=l:X=G[G.length/2>>0],V=De.keys(de[X]).map(function(Te){return parseInt(Te,10)}).sort(function(Te,ye){return Te-ye}),de[X][h]?F=h:F=V[V.length/2>>0],E=de[X][F],e.roiRects.push({theZ:E.TheZ,theT:E.TheT,x:E.X,y:E.Y,width:E.Width,height:E.Height,roiId:y,tStart:K,tEnd:ae,zStart:V[0],zEnd:V[V.length-1]}))}var _e="No rectangular ROIs found on this image in OMERO";e.renderRois(e.roiRects,".roisFromOMERO",_e),e.roisLoaded<e.roisCount?A(".loadRoiRects",this.$el).show():A(".loadRoiRects",this.$el).hide(),A("#cropRoiMessage").html(`Loaded ${e.roisLoaded} / ${e.roisCount} ROIs`),e.cachedRois=p})},renderRois:function(t,e,n){var i=this.m.get("orig_width"),r=this.m.get("orig_height"),s=this.m.get("theT"),o=this.m.get("theZ"),l="",h=50,p,m,y,E,C,N,F,X,G;this.m.set("z_projection",!1);for(var V=0;V<t.length;V++){p=t[V];let ae=p.rotation||0;p.theT>-1&&this.m.set("theT",p.theT,{silent:!0}),p.theZ>-1&&this.m.set("theZ",p.theZ,{silent:!0}),p.width>p.height?(N=h,F=p.height/p.width*N):(F=h,N=p.width/p.height*F),y=N/p.width,X=i*y,G=r*y,E=-(y*p.y),C=-(y*p.x),p.theT=p.theT!==void 0?p.theT:s,p.theZ=p.theZ!==void 0?p.theZ:o;let de=this.m._viewport_css(C,E,X,G,h,h,ae),g="rect_"+Math.random();this.m.get_img_src(!0).then(H=>document.getElementById(g).src=H);var K={id:g,msg:n,src:m,rect:p,w:N,h:F,css:de,top:E,left:C,img_w:X,img_h:G,theZ:p.theZ+1,theT:p.theT+1,roiId:p.roiId,tStart:!1,zStart:!1};p.tStart!==void 0&&(K.tStart=+p.tStart+1),p.tEnd!==void 0&&(K.tEnd=+p.tEnd+1),p.zStart!==void 0&&(K.zStart=+p.zStart+1),p.zEnd!==void 0&&(K.zEnd=+p.zEnd+1),l+=this.roiTemplate(K)}l.length===0&&(l="<tr><td colspan='3' style='color: #999'>"+n+"</td></tr>"),A(e+" tbody",this.$el).html(l),this.m.set({theT:s,theZ:o})},zoomToFit:function(){var t=500,e=450,n=this.m.get("orig_width"),i=this.m.get("orig_height"),r=Math.min(t/n,e/i);this.setZoom(r*100)},setZoom:function(t){this.zoom=t,this.render()},render:function(){var t=this.zoom/100,e=this.m.get("orig_width"),n=this.m.get("orig_height"),i=e*t,r=n*t;this.m.set("zoom",100),this.m.set("width",i),this.m.set("height",r),this.m.get_img_src(!0).then(F=>this.$cropImg.attr("src",F));var s=this.m.get("rotation")||0,o=this.calculateRotatedBoundingBox(i,r,s),l=(o.width-i)/2,h=(o.height-r)/2;this.offsetX=l,this.offsetY=h;var p=this.m.get_vp_full_plane_css(100,i,r);p=A.extend({},p,{left:l,top:h,width:i,height:r,"-webkit-transform-origin":"50% 50%","transform-origin":"50% 50%","-webkit-transform":"rotate("+s+"deg)",transform:"rotate("+s+"deg)"}),this.paper.setSize(o.width,o.height),A("#crop_paper").css({height:o.height,width:o.width}),this.$cropImg.css(p);var m=A("#cropViewer");m.scrollLeft((o.width-500)/2),m.scrollTop((o.height-450)/2);var y=this.currentROI.x*t+l,E=this.currentROI.y*t+h,C=this.currentROI.width*t,N=this.currentROI.height*t;this.cropModel.set({x:y,y:E,width:C,height:N,selected:!0})},calculateRotatedBoundingBox:function(t,e,n){var i=n*Math.PI/180,r=Math.abs(Math.cos(i)),s=Math.abs(Math.sin(i)),o=t*r+e*s,l=t*s+e*r;return{width:Math.ceil(o),height:Math.ceil(l)}}}),x3=dt.View.extend({el:A("#chgrpModal"),model:Oi,imagesByGroup:{},omeroGroups:[],initialize:function(){var t=this;document.getElementById("chgrpModal").addEventListener("shown.bs.modal",()=>{t.enableSubmit(!1),t.model.get("fileId")?(A("#chgrpModal .modal-body").html(""),t.loadGroups(),t.loadImageDetails()):A("#chgrpModal .modal-body").html("<p>Figure not saved. Please Save the Figure first.</p>")})},events:{"click .chgrpForm input":"inputClicked","submit .chgrpForm":"handleSubmit"},loadImageDetails:function(){var t=this.model.panels.pluck("imageId"),e=`${BASE_WEBFIGURE_URL}images_details/?image=${De.uniq(t).join(",")}`;ns(e).then(n=>{this.imagesByGroup=n.data.reduce(function(i,r){return i[r.group.id]||(i[r.group.id]=[]),i[r.group.id].push(r),i},{}),this.render()})},loadGroups:function(){var t=`${API_BASE_URL_V0}m/experimenters/${USER_ID}/experimentergroups/`;ns(t).then(e=>{this.omeroGroups=e.data.map(n=>({id:n["@id"],name:n.Name})).filter(n=>n.name!="user"),this.render()})},inputClicked:function(){this.enableSubmit(!0)},enableSubmit:function(t){var e=A('button[type="submit"]',this.$el);t?(e.prop("disabled",!1),e.prop("title","Move to Group")):(e.prop("disabled","disabled"),e.prop("title","No Group selected"))},handleSubmit:function(t){t.preventDefault();var e=parseInt(A('input[name="target_group"]:checked',this.$el).val()),n=this.omeroGroups.filter(s=>s.id===e)[0].name,i=this.model.get("fileId"),r=BASE_WEBFIGURE_URL+"chgrp/";this.enableSubmit(!1),setTimeout(function(){A("#chgrpModal .modal-body").append("<p>Moving to Group: "+De.escape(n)+"...</p>")},1e3),A.post(r,{group_id:e,ann_id:i}).done((function(s){if($r("chgrpModal"),s.success)this.model.set({groupId:e}),Zi("Success","Figure moved to Group: "+De.escape(n),["OK"]);else{var o=s.error||"No error message available";Zi("Move Failed",o,["OK"])}}).bind(this))},render:function(){var t="",e=this.model.get("groupId"),n=this.omeroGroups.filter(s=>s.id===e)[0];n&&(t+="<p>This figure is currently in Group: <strong>"+De.escape(n.name)+"</strong>.</p>");var i=Object.keys(this.imagesByGroup).length;t+=`<p>Images in this figure belong to ${i} Group${i==1?"":"s"}: `,t+=Object.keys(this.imagesByGroup).map(s=>{var o=this.imagesByGroup[s].map(h=>h.id),l=this.imagesByGroup[s][0].group.name;return`
                <b>${De.escape(l)}</b>
                (<a target="_blank" href="${WEBINDEX_URL}?show=image-${o.join("|image-")}">${o.length} image${o.length==1?"":"s"}</a>)`}).join(", ")+".</p>",t+=`<p><b>NB:</b> If a figure contains images from a <i>different</i> group, it is possible that some
            users may be able to open the figure but not see those images in it.</p>`;var r=this.omeroGroups.filter(s=>s.id!=e);r.length===0?t+="<p>No other Groups available (You are not a member of any other groups)</p>":(t+="<p>Move to Group...</p>",t+=r.map(s=>`<div class="radio">
                <label><input type="radio" name="target_group" value="${s.id}">
                    ${De.escape(s.name)}
                </label></div>`).join(`
`)),A(".modal-body",this.$el).html(t)}});var E3=dt.Model.extend({parse:function(t){var e=function(s){return s[0].toLowerCase()+s.slice(1)},n=function(s){s<0&&(s=s>>>0);var o=s.toString(16);return o=("00000000"+o).slice(-8),"#"+o.substring(0,6)},i=function(s){s<0&&(s=s>>>0);var o=s.toString(16);return o=("00000000"+o).slice(-2),parseInt(o,16)/255};if(t.id=t["@id"],t.type=t["@type"].split("#")[1],delete t["@id"],delete t["@type"],t.StrokeWidth&&(t.strokeWidth=t.StrokeWidth.Value,delete t.StrokeWidth),De.each(["StrokeColor","FillColor"],function(s){if(t[s]!==void 0){t[e(s)]=n(t[s]);let o=e(s).replace("Color","Opacity");t[o]=i(t[s]),delete t[s]}}),De.each(["Points","MarkerEnd","MarkerStart","X","Y","RadiusX","RadiusY","X1","Y1","X2","Y2","Width","Height","TheZ","TheT"],function(s){t[s]!==void 0&&(t[e(s)]=t[s],delete t[s])}),(t.markerEnd==="Arrow"||t.markerStart==="Arrow")&&(t.type="Arrow",t.markerEnd!=="Arrow")){var r={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2};t.x1=r.x2,t.y1=r.y2,t.x2=r.x1,t.y2=r.y1}return t},convertOMEROShape:function(){var t=this.toJSON();if((t.markerEnd==="Arrow"||t.markerStart==="Arrow")&&(t.type="Arrow",t.markerEnd!=="Arrow")){var e={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2};t.x1=e.x2,t.y1=e.y2,t.x2=e.x1,t.y2=e.y1}return t.type==="Ellipse"&&t.rx!==void 0&&(t.x=t.cx,t.y=t.cy,t.radiusX=t.rx,t.radiusY=t.ry),t}}),S3=dt.Collection.extend({model:E3}),T3=dt.Model.extend({initialize:function(t){this.set("id",t["@id"]),this.shapes=new S3(t.shapes,{parse:!0})}}),C3=dt.Collection.extend({model:T3,deselectShapes:function(){this.forEach(function(t){t.shapes.forEach(function(e){e.get("selected")&&e.set("selected",!1)})})},selectShape:function(t){var e,n;this.forEach(function(i){i.shapes.forEach(function(r){r.get("id")===t&&r.set("selected")})}),e=this.getShape(t),e&&(n=e.toJSON()),this.trigger("change:selection",[n])},getShape:function(t){var e;return this.forEach(function(n){var i=n.shapes.get(t);i&&(e=i)}),e}}),qt=function(e){var n=this;this.paper=e.paper,this.manager=e.manager,e.id?this._id=e.id:this._id=this.manager.getRandomId(),this._x=e.x,this._y=e.y,this._width=e.width,this._height=e.height,e.area?this._area=e.area:this._area=this._width*this._height,this._strokeColor=e.strokeColor,e.fillColor?this._fillColor=e.fillColor:this._fillColor="#ffffff",e.fillOpacity?this._fillOpacity=e.fillOpacity:this._fillOpacity=0,this._strokeWidth=e.strokeWidth||2,this._selected=!1,this._zoomFraction=1,e.zoom&&(this._zoomFraction=e.zoom/100),this._rotation=e.rotation||0,this._textId=e.textId||void 0,this.handle_wh=6,this.element=this.paper.rect(),this.element.attr({"fill-opacity":this._fillOpacity,fill:this._fillColor,cursor:"pointer"}),this.manager.canEdit&&this.element.drag(function(i,r){i=i/n._zoomFraction,r=r/n._zoomFraction;var s=i-this.prevX,o=r-this.prevY;this.prevX=i,this.prevY=r,n.manager.moveSelectedShapes(s,o,!0)},function(){return n._handleMousedown(),this.prevX=0,this.prevY=0,!1},function(){return(this.prevX!==0||this.prevY!==0)&&n.manager.notifySelectedShapesChanged(),!1}),this.createHandles(),this.drawShape()};qt.prototype.toJson=function(){var e={type:"Rectangle",x:this._x,y:this._y,width:this._width,height:this._height,area:this._width*this._height,strokeWidth:this._strokeWidth,strokeColor:this._strokeColor,rotation:this._rotation,fillColor:this._fillColor,fillOpacity:this._fillOpacity,textId:this._textId};return this._id&&(e.id=this._id),e};qt.prototype.intersectRegion=function(e){var n=this.manager.regionToPath(e,this._zoomFraction*100),i=this._zoomFraction,r=parseInt(this._x*i,10),s=parseInt(this._y*i,10);if(On.isPointInsidePath(n,r,s))return!0;var o=this.getPath(),l=On.pathIntersection(n,o);return l.length>0};qt.prototype.getPath=function(){for(var e=this._zoomFraction,n=parseInt(this._x*e,10),i=parseInt(this._y*e,10),r=parseInt(this._width*e,10),s=parseInt(this._height*e,10),o=[[n,i],[n+r,i],[n+r,i+s],[n,i+s]],l=[],h=0;h<=3;h++)h===0&&l.push("M"+o[0].join(",")),h<3?l.push("L"+o[h+1].join(",")):l.push("Z");return l.join(",")};qt.prototype.compareCoords=function(e){if(e.type!=="Rectangle")return!1;var n=this.toJson(),i=!0;return["x","y","width","height"].forEach(function(r){e[r]!==n[r]&&(i=!1)}),i};qt.prototype.offsetCoords=function(e,n,i){return e.x=e.x+n,e.y=e.y+i,e};qt.prototype.offsetShape=function(e,n){this._x=this._x+e,this._y=this._y+n,this.drawShape()};qt.prototype._handleMousedown=function(){this._selected||this.manager.selectShapes([this])};qt.prototype.setSelected=function(e){if(e&&this._selected||!e&&!this._selected)return;this._selected=!!e;let n=this.loadTextShape();n&&n.setSelected(this._selected),this.drawShape()};qt.prototype.isSelected=function(){return this._selected};qt.prototype.loadTextShape=function(){return this._textShape=this.manager.getShape(this._textId),this._textShape};qt.prototype.setZoom=function(e){this._zoomFraction=e/100,this.drawShape()};qt.prototype.setCoords=function(e){this._x=e.x||this._x,this._y=e.y||this._y,this._width=e.width||this._width,this._height=e.height||this._height,this.drawShape()};qt.prototype.getCoords=function(){return{x:this._x,y:this._y,width:this._width,height:this._height}};qt.prototype.setStrokeColor=function(e){this._strokeColor=e,this.drawShape()};qt.prototype.getStrokeColor=function(){return this._strokeColor};qt.prototype.setFillColor=function(e){this._fillColor=e,this.drawShape()};qt.prototype.getFillColor=function(){return this._fillColor};qt.prototype.setFillOpacity=function(e){this._fillOpacity=e,this.drawShape()};qt.prototype.getFillOpacity=function(){return this._fillOpacity};qt.prototype.setStrokeWidth=function(e){this._strokeWidth=e,this.drawShape()};qt.prototype.getStrokeWidth=function(){return this._strokeWidth};qt.prototype.getTextId=function(){return this._textId};qt.prototype.setTextId=function(e){this._textId=e};qt.prototype.destroy=function(){this.element.remove(),this.handles.remove()};qt.prototype.drawShape=function(){var e=this._strokeColor,n=this._strokeWidth,i=this._fillColor,r=this._fillOpacity,s=this._zoomFraction,o=this._x*s,l=this._y*s,h=this._width*s,p=this._height*s;this.element.attr({x:o,y:l,width:h,height:p,stroke:e,"stroke-width":n*this.manager.getShapeScalingFraction(),fill:i,"fill-opacity":r}),this.element.transform("r"+this._rotation+","+(o+h/2)+","+(l+p/2)),this.isSelected()?this.handles.show().toFront():this.handles.hide();for(var m=this.getHandleCoords(),y,E,C,N,F=0,X=this.handles.length;F<X;F++)y=this.handles[F],E=y.h_id,C=m[E][0],N=m[E][1],y.attr({x:C-this.handle_wh/2,y:N-this.handle_wh/2}),y.transform("r"+this._rotation+","+(o+h/2)+","+(l+p/2))};qt.prototype.getHandleCoords=function(){var e=this._zoomFraction,n=this._x*e,i=this._y*e,r=this._width*e,s=this._height*e,o={nw:[n,i],n:[n+r/2,i],ne:[n+r,i],w:[n,i+s/2],e:[n+r,i+s/2],sw:[n,i+s],s:[n+r/2,i+s],se:[n+r,i+s]};return o};function k3(t,e,n){if(t===0&&e===0)return{x:t,y:e};var i=Math.sqrt(t*t+e*e),r=Math.atan(e/t);t<0&&(r=Math.PI+r);var s=n*(Math.PI/180),o=r-s;return t=Math.cos(o)*i,e=Math.sin(o)*i,{x:t,y:e}}qt.prototype.createHandles=function(){var e=this,n={stroke:"#4b80f9",fill:"#fff",cursor:"default","fill-opacity":1},i=this.getHandleCoords();e.handles=this.paper.set();var r=function(){return function(C,N,F,X,G){let V=e.loadTextShape();if(C=C/e._zoomFraction,N=N/e._zoomFraction,e._rotation!=0){let H=k3(C,N,e._rotation);C=H.x,N=H.y}var K=e.fixed_ratio||G.shiftKey;K&&this.h_id.length===2&&(this.h_id==="se"||this.h_id==="nw"?Math.abs(C/N)>this.aspect?N=C/this.aspect:C=N*this.aspect:Math.abs(C/N)>this.aspect?N=-C/this.aspect:C=-N*this.aspect);var ae=this.ox+C,de=this.oy+N,g={x:e._x,y:e._y,width:e._width,height:e._height};return this.h_id.indexOf("e")>-1&&(g.width=ae-e._x+e.handle_wh/2),this.h_id.indexOf("s")>-1&&(g.height=de-e._y+e.handle_wh/2),this.h_id.indexOf("n")>-1&&(g.y=de+e.handle_wh/2,g.height=this.oheight-N,V&&(V._y=this.text_offset_y+g.y)),this.h_id.indexOf("w")>-1&&(g.x=ae+e.handle_wh/2,g.width=this.owidth-C,V&&(V._x=this.text_offset_x+g.x)),g.width<1||g.height<1||(V&&V.drawShape(),e._x=g.x,e._y=g.y,e._width=g.width,e._height=g.height,e._area=g.width*g.height,e.drawShape()),!1}},s=function(){return function(){this.ox=this.attr("x")/e._zoomFraction,this.oy=this.attr("y")/e._zoomFraction,this.owidth=e._width,this.oheight=e._height,this.aspect=e._width/e._height;let C=e.loadTextShape();return C&&(this.text_offset_x=C._x-e._zoomFraction-this.ox,this.text_offset_y=C._y-e._zoomFraction-this.oy),!1}},o=function(){return function(){return(this.owidth!==e._width||this.oheight!==e._height)&&e.manager.notifyShapesChanged([e]),!1}};let l=i.n[0],h=i.e[1];for(var p in i){var m=i[p][0],y=i[p][1],E=this.paper.rect(m-e.handle_wh/2,y-e.handle_wh/2,e.handle_wh,e.handle_wh).attr(n).rotate(e._rotation,l,h);E.attr({cursor:p+"-resize"}),E.h_id=p,E.rect=e,e.manager.canEdit&&E.drag(r(),s(),o()),e.handles.push(E)}e.handles.hide()};var El=function(e){this.paper=e.paper,this.manager=e.manager};El.prototype.startDrag=function(e,n){this.manager.setText(""),this.manager.setShowText(!1);var i=this.manager.getStrokeColor(),r=this.manager.getStrokeWidth(),s=this.manager.getFillColor(),o=this.manager.getFillOpacity(),l=this.manager.getZoom();this.startX=e,this.startY=n,this.rect=new qt({manager:this.manager,paper:this.paper,x:e,y:n,width:0,height:0,area:0,strokeWidth:r,zoom:l,strokeColor:i,fillColor:s,fillOpacity:o,textId:-1})};El.prototype.drag=function(e,n,i){var r=this.startX-e,s=this.startY-n;i&&(r*s>0?Math.abs(r/s)>1?s=r:r=s:Math.abs(r/s)>1?s=-r:r=-s,e=(r-this.startX)*-1,n=(s-this.startY)*-1);var o={x:Math.min(e,this.startX),y:Math.min(n,this.startY),width:Math.abs(r),height:Math.abs(s)};this.rect.setCoords(o),this.rect._area=Math.abs(r)*Math.abs(s)};El.prototype.stopDrag=function(){var e=this.rect.getCoords();if(e.width<2||e.height<2){this.rect.destroy(),delete this.rect;return}this.rect.setSelected(!0),this.manager.addShape(this.rect)};var Kt=function(e){var n=this;this.manager=e.manager,this.paper=e.paper,e.id?this._id=e.id:this._id=this.manager.getRandomId(),this._x1=e.x1,this._y1=e.y1,this._x2=e.x2,this._y2=e.y2,this._strokeColor=e.strokeColor,this._strokeWidth=e.strokeWidth||2,this._area=Math.pow(Math.pow(this._x2-this._x1,2)+Math.pow(this._y2-this._y1,2),.5)*this._strokeWidth,this.handle_wh=6,this._selected=!1,this._zoomFraction=1,e.zoom&&(this._zoomFraction=e.zoom/100),this.element=this.paper.path(),this.element.attr({cursor:"pointer"}),this.manager.canEdit&&this.element.drag(function(i,r){i=i/n._zoomFraction,r=r/n._zoomFraction;var s=i-this.prevX,o=r-this.prevY;return this.prevX=i,this.prevY=r,n.manager.moveSelectedShapes(s,o,!0),!1},function(){return n._handleMousedown(),this.prevX=0,this.prevY=0,!1},function(){return(this.prevX!==0||this.prevY!==0)&&n.manager.notifySelectedShapesChanged(),!1}),this.createHandles(),this.drawShape()};Kt.prototype.toJson=function(){var e={type:"Line",x1:this._x1,x2:this._x2,y1:this._y1,y2:this._y2,area:Math.pow(Math.pow(this._x2-this._x1,2)+Math.pow(this._y2-this._y1,2),.5)*this._strokeWidth,strokeWidth:this._strokeWidth,strokeColor:this._strokeColor};return this._id&&(e.id=this._id),e};Kt.prototype.compareCoords=function(e){var n=this.toJson(),i=!0;return e.type!==n.type?!1:(["x1","y1","x2","y2"].forEach(function(r){e[r]!==n[r]&&(i=!1)}),i)};Kt.prototype.offsetCoords=function(e,n,i){return e.x1=e.x1+n,e.y1=e.y1+i,e.x2=e.x2+n,e.y2=e.y2+i,e};Kt.prototype.offsetShape=function(e,n){this._x1=this._x1+e,this._y1=this._y1+n,this._x2=this._x2+e,this._y2=this._y2+n,this.drawShape()};Kt.prototype._handleMousedown=function(){this._selected||this.manager.selectShapes([this])};Kt.prototype.setCoords=function(e){this._x1=e.x1||this._x1,this._y1=e.y1||this._y1,this._x2=e.x2||this._x2,this._y2=e.y2||this._y2,this.drawShape()};Kt.prototype.getCoords=function(){return{x1:this._x1,y1:this._y1,x2:this._x2,y2:this._y2}};Kt.prototype.setStrokeColor=function(e){this._strokeColor=e,this.drawShape()};Kt.prototype.getStrokeColor=function(){return this._strokeColor};Kt.prototype.setStrokeWidth=function(e){this._strokeWidth=e,this._area=Math.abs((this._x2-this._x1)*(this._y2-this._y1))*this._strokeWidth,this.drawShape()};Kt.prototype.getStrokeWidth=function(){return this._strokeWidth};Kt.prototype.getFillColor=function(){return this._strokeColor};Kt.prototype.setFillColor=function(e){};Kt.prototype.setFillOpacity=function(e){};Kt.prototype.getFillOpacity=function(){return 1};Kt.prototype.destroy=function(){this.element.remove(),this.handles.remove()};Kt.prototype.intersectRegion=function(e){var n=this.manager.regionToPath(e,this._zoomFraction*100),i=this._zoomFraction,r=parseInt(this._x1*i,10),s=parseInt(this._y1*i,10);if(On.isPointInsidePath(n,r,s))return!0;var o=this.getPath(),l=On.pathIntersection(n,o);return l.length>0};Kt.prototype.getPath=function(){var e=this._zoomFraction,n=this._x1*e,i=this._y1*e,r=this._x2*e,s=this._y2*e;return"M"+n+" "+i+"L"+r+" "+s};Kt.prototype.isSelected=function(){return this._selected};Kt.prototype.setZoom=function(e){this._zoomFraction=e/100,this.drawShape()};Kt.prototype._getLineWidth=function(){return this._strokeWidth};Kt.prototype.drawShape=function(){var e=this.getPath(),n=this._strokeColor,i=this._getLineWidth();this.element.attr({path:e,stroke:n,fill:n,"stroke-width":i}),this.isSelected()?this.handles.show().toFront():this.handles.hide();for(var r=this.getHandleCoords(),s,o,l,h,p=0,m=this.handles.length;p<m;p++)s=this.handles[p],o=s.h_id,l=r[o].x,h=r[o].y,s.attr({x:l-this.handle_wh/2,y:h-this.handle_wh/2})};Kt.prototype.setSelected=function(e){this._selected=!!e,this.drawShape()};Kt.prototype.createHandles=function(){var e=this,n=this.getHandleCoords(),i={stroke:"#4b80f9",fill:"#fff",cursor:"move","fill-opacity":1};e.handles=this.paper.set();var r=function(){return function(E,C,N,F,X){var G,V;return E=E/e._zoomFraction,C=C/e._zoomFraction,(this.h_id==="start"||this.h_id==="middle")&&(e._x1=this.old.x1+E,e._y1=this.old.y1+C,X.shiftKey&&this.h_id==="start"&&(G=e._x1-e._x2,V=e._y1-e._y2,Math.abs(G/V)>1?e._y1=this.old.y2:Math.abs(G/V)<1&&(e._x1=this.old.x2))),(this.h_id==="end"||this.h_id==="middle")&&(e._x2=this.old.x2+E,e._y2=this.old.y2+C,X.shiftKey&&this.h_id==="end"&&(G=e._x1-e._x2,V=e._y1-e._y2,Math.abs(G/V)>1?e._y2=this.old.y1:Math.abs(G/V)<1&&(e._x2=this.old.x1))),e._area=Math.pow(Math.pow(e._x2-e._x1,2)+Math.pow(e._y2-e._y1,2),.5)*e._strokeWidth,e.drawShape(),!1}},s=function(){return function(){return this.old={x1:e._x1,x2:e._x2,y1:e._y1,y2:e._y2},!1}},o=function(){return function(){return(e._x1!==this.old.x1||e._y1!==this.old.y1||e._x2!==this.old.x2||e._y2!==this.old.y2)&&e.manager.notifyShapesChanged([e]),!1}},l=this.handle_wh,h,p,m;for(var y in n)h=n[y].x,p=n[y].y,m=this.paper.rect(h-l/2,p-l/2,l,l),m.attr({cursor:"move"}),m.h_id=y,m.line=e,this.manager.canEdit&&m.drag(r(),s(),o()),e.handles.push(m);e.handles.attr(i).hide()};Kt.prototype.getHandleCoords=function(){var e=this._zoomFraction,n=this._x1*e,i=this._y1*e,r=this._x2*e,s=this._y2*e;return{start:{x:n,y:i},middle:{x:(n+r)/2,y:(i+s)/2},end:{x:r,y:s}}};var id=function(e){var n=new Kt(e),i=n.toJson;return n.toJson=function(){var s=i.call(n);return s.type="Arrow",s},n._getLineWidth=function(){return 0},n.getPath=function(){var s=this._zoomFraction,o=this._x1*s,l=this._y1*s,h=this._x2*s,p=this._y2*s,m=this._strokeWidth*.5*this.manager.getShapeScalingFraction(),y=(this._strokeWidth*4+5)*this.manager.getShapeScalingFraction(),E=h-o,C=p-l,N=Math.atan(E/C),F=C<0?1:-1,X=h+F*Math.sin(N-.4)*y,G=p+F*Math.cos(N-.4)*y,V=h+F*Math.sin(N+.4)*y,K=p+F*Math.cos(N+.4)*y,ae=h+F*Math.sin(N)*y*.5,de=p+F*Math.cos(N)*y*.5,g=F*Math.cos(N)*m,H=F*Math.sin(N)*m,re=o-g,_e=l+H,Te=o+g,ye=l-H,le=ae-g,Pe=de+H,Le=ae+g,Ze=de-H,je="M"+Le+" "+Ze+" L"+le+" "+Pe;je=je+" L"+re+" "+_e+" L"+Te+" "+ye,je=je+" L"+Le+" "+Ze;var Je=je+" L"+X+" "+G+" L"+V+" "+K;return Je=Je+" L"+h+" "+p+" L"+X+" "+G+" L"+h+" "+p,Je=Je+" L"+X+" "+G,Je},n.drawShape(),n},la=function(e){this.paper=e.paper,this.manager=e.manager};la.prototype.startDrag=function(e,n){var i=this.manager.getStrokeColor(),r=this.manager.getStrokeWidth(),s=this.manager.getZoom();this.startX=e,this.startY=n,this.line=new Kt({manager:this.manager,paper:this.paper,x1:e,y1:n,x2:e,y2:n,strokeWidth:r,zoom:s,strokeColor:i})};la.prototype.drag=function(e,n,i){if(i){var r=this.startX-e,s=this.startY-n;Math.abs(r/s)>1?s=0:r=0,e=(r-this.startX)*-1,n=(s-this.startY)*-1}this.line.setCoords({x2:e,y2:n}),this._area=Math.pow(Math.pow(e-this._x1,2)+Math.pow(n-this._y1,2),.5)*this._strokeWidth};la.prototype.stopDrag=function(){var e=this.line.getCoords();if(Math.abs(e.x1-e.x2)<2&&Math.abs(e.y1-e.y2)<2){this.line.destroy(),delete this.line;return}this.line.setSelected(!0),this.manager.addShape(this.line)};var A3=function(e){var n=new la(e);return n.startDrag=function(r,s){var o=this.manager.getStrokeColor(),l=this.manager.getStrokeWidth(),h=this.manager.getZoom();this.startX=r,this.startY=s,this.line=new id({manager:this.manager,paper:this.paper,x1:r,y1:s,x2:r,y2:s,strokeWidth:l,zoom:h,strokeColor:o})},n},nn=function(e){var n=this;if(this.manager=e.manager,this.paper=e.paper,e.id?this._id=e.id:this._id=this.manager.getRandomId(),this._x=e.x,this._y=e.y,this._radiusX=e.radiusX,this._radiusY=e.radiusY,this._rotation=e.rotation||0,e.transform&&e.transform.startsWith("matrix")){var i=e.transform.replace("matrix(","").replace(")","").split(" "),r=parseFloat(i[0]),s=parseFloat(i[1]),o=parseFloat(i[2]),l=parseFloat(i[3]),h=parseFloat(i[4]),p=parseFloat(i[5]);this.Matrix=On.matrix(r,s,o,l,h,p)}this._radiusX===0||this._radiusY===0?this._yxRatio=.5:this._yxRatio=this._radiusY/this._radiusX,this._strokeColor=e.strokeColor,e.fillColor?this._fillColor=e.fillColor:this._fillColor="#ffffff",e.fillOpacity?this._fillOpacity=e.fillOpacity:this._fillOpacity=0,this._strokeWidth=e.strokeWidth||2,this._selected=!1,this._zoomFraction=1,e.zoom&&(this._zoomFraction=e.zoom/100),e.area?this._area=e.area:this._area=this._radiusX*this._radiusY*Math.PI,this.handle_wh=6,this.element=this.paper.ellipse(),this.element.attr({"fill-opacity":this._fillOpacity,fill:this._fillColor,cursor:"pointer"}),this.manager.canEdit&&this.element.drag(function(y,E){y=y/n._zoomFraction,E=E/n._zoomFraction;var C=y-this.prevX,N=E-this.prevY;return this.prevX=y,this.prevY=E,n.manager.moveSelectedShapes(C,N,!0),!1},function(){return n._handleMousedown(),this.prevX=0,this.prevY=0,!1},function(){return(this.prevX!==0||this.prevY!==0)&&n.manager.notifySelectedShapesChanged(),!1}),this.createHandles();var m=!!this.Matrix;this.updateShapeFromHandles(m),this.drawShape()};nn.prototype.toJson=function(){var e={type:"Ellipse",x:this._x,y:this._y,radiusX:this._radiusX,radiusY:this._radiusY,area:this._radiusX*this._radiusY*Math.PI,rotation:this._rotation,strokeWidth:this._strokeWidth,strokeColor:this._strokeColor,fillColor:this._fillColor,fillOpacity:this._fillOpacity};return this._id&&(e.id=this._id),e};nn.prototype.compareCoords=function(e){var n=this.toJson(),i=!0;return e.type!==n.type?!1:(["x","y","radiusX","radiusY","rotation"].forEach(function(r){Math.round(e[r])!==Math.round(n[r])&&(i=!1)}),i)};nn.prototype.offsetCoords=function(e,n,i){return e.x=e.x+n,e.y=e.y+i,e};nn.prototype.offsetShape=function(e,n){this._x=this._x+e,this._y=this._y+n,this.drawShape()};nn.prototype._handleMousedown=function(){this._selected||this.manager.selectShapes([this])};nn.prototype.setColor=function(e){this._strokeColor=e,this.drawShape()};nn.prototype.getStrokeColor=function(){return this._strokeColor};nn.prototype.setStrokeColor=function(e){this._strokeColor=e,this.drawShape()};nn.prototype.setStrokeWidth=function(e){this._strokeWidth=e,this.drawShape()};nn.prototype.getStrokeWidth=function(){return this._strokeWidth};nn.prototype.setFillColor=function(e){this._fillColor=e,this.drawShape()};nn.prototype.getFillColor=function(){return this._fillColor};nn.prototype.setFillOpacity=function(e){this._fillOpacity=e,this.drawShape()};nn.prototype.getFillOpacity=function(){return this._fillOpacity};nn.prototype.destroy=function(){this.element.remove(),this.handles.remove()};nn.prototype.intersectRegion=function(e){var n=this.manager.regionToPath(e,this._zoomFraction*100),i=this._zoomFraction,r=parseInt(this._x*i,10),s=parseInt(this._y*i,10);if(On.isPointInsidePath(n,r,s))return!0;var o=this.getPath(),l=On.pathIntersection(n,o);return l.length>0};nn.prototype.getPath=function(){for(var e=this.element.attrs,n=e.radiusX,i=e.radiusY,r=[[e.x-n,e.y-i],[e.x+n,e.y-i],[e.x+n,e.y+i],[e.x-n,e.y+i]],s=[],o=[[[0,1],[1,0]],[[-1,0],[0,1]],[[0,-1],[-1,0]],[[1,0],[0,-1]]],l=0;l<=3;l++){l===0&&s.push(["M",r[0][0],r[0][1]+i]);var h=[r[l][0]+o[l][0][0]*n*.446,r[l][1]+o[l][0][1]*i*.446],p=[r[l][0]+o[l][1][0]*n*.446,r[l][1]+o[l][1][1]*i*.446],m=[r[l][0]+o[l][1][0]*n,r[l][1]+o[l][1][1]*i];s.push(["C",h[0],h[1],p[0],p[1],m[0],m[1]])}return s.push(["Z"]),s=s.join(",").replace(/,?([achlmqrstvxz]),?/gi,"$1"),this._rotation!==0&&(s=On.transformPath(s,"r"+this._rotation)),s};nn.prototype.isSelected=function(){return this._selected};nn.prototype.setZoom=function(e){this._zoomFraction=e/100,this.drawShape()};nn.prototype.updateHandle=function(e,n,i,r){this._handleIds=this.getHandleCoords();var s=this._handleIds[e];s.x=n,s.y=i;var o=e==="left"||e==="right";this.updateShapeFromHandles(o,r)};nn.prototype.updateShapeFromHandles=function(e,n){var i=this._handleIds,r=i.end.x-i.start.x,s=i.end.y-i.start.y,o=i.left.x-i.right.x,l=i.left.y-i.right.y,h;r===0?this._rotation=90:r>0?(h=Math.atan(s/r),this._rotation=On.deg(h)):r<0&&(h=Math.atan(s/r),this._rotation=180+On.deg(h)),this._x=(i.start.x+i.end.x)/2,this._y=(i.start.y+i.end.y)/2,this._radiusX=Math.sqrt(r*r+s*s)/2,e?(this._radiusY=Math.sqrt(o*o+l*l)/2,this._yxRatio=this._radiusY/this._radiusX):(n&&(this._yxRatio=1),this._radiusY=this._yxRatio*this._radiusX),this._area=this._radiusX*this._radiusY*Math.PI,this.drawShape()};nn.prototype.drawShape=function(){var e=this._strokeColor,n=this._strokeWidth,i=this._fillColor,r=this._fillOpacity,s=this._zoomFraction,o=this._x*s,l=this._y*s,h=this._radiusX*s,p=this._radiusY*s;this.element.attr({cx:o,cy:l,rx:h,ry:p,stroke:e,"stroke-width":n*this.manager.getShapeScalingFraction(),fill:i,"fill-opacity":r}),this.element.transform("r"+this._rotation),this.isSelected()?this.handles.show().toFront():this.handles.hide(),this._handleIds=this.getHandleCoords();for(var m,y,E,C,N=0,F=this.handles.length;N<F;N++)m=this.handles[N],y=m.h_id,E=this._handleIds[y].x*this._zoomFraction,C=this._handleIds[y].y*this._zoomFraction,m.attr({x:E-this.handle_wh/2,y:C-this.handle_wh/2})};nn.prototype.setSelected=function(e){this._selected=!!e,this.drawShape()};nn.prototype.createHandles=function(){this._handleIds=this.getHandleCoords();var e=this,n={stroke:"#4b80f9",fill:"#fff",cursor:"move","fill-opacity":1};e.handles=this.paper.set();var i=function(){return function(N,F,X,G,V){N=N/e._zoomFraction,F=F/e._zoomFraction;var K=N+this.ox,ae=F+this.oy;return e.updateHandle(this.h_id,K,ae,V.shiftKey),!1}},r=function(){return function(){return this.ox=(this.attr("x")+this.attr("width")/2)/e._zoomFraction,this.oy=(this.attr("y")+this.attr("height")/2)/e._zoomFraction,!1}},s=function(){return function(){return e.manager.notifyShapesChanged([e]),!1}},o=this.handle_wh,l,h,p;for(var m in this._handleIds){if(l=this._handleIds[m].x,h=this._handleIds[m].y,this.Matrix){var y=this.Matrix.toTransformString();y.indexOf("m")>-1&&console.log("Matrix only supports rotation & translation. "+y+" may contain skew for shape: ",this.toJson());var E=this.Matrix.x(l,h),C=this.Matrix.y(l,h);l=E,h=C,this._handleIds[m].x=l,this._handleIds[m].y=h}p=this.paper.rect(l-o/2,h-o/2,o,o),p.attr({cursor:"move"}),p.h_id=m,this.manager.canEdit&&p.drag(i(),r(),s()),e.handles.push(p)}e.handles.attr(n).hide()};nn.prototype.getHandleCoords=function(){var e=On.rad(this._rotation),n=this._x,i=this._y,r=this._radiusX,s=this._radiusY,o=n-Math.cos(e)*r,l=i-Math.sin(e)*r,h=n+Math.cos(e)*r,p=i+Math.sin(e)*r,m=n+Math.sin(e)*s,y=i-Math.cos(e)*s,E=n-Math.sin(e)*s,C=i+Math.cos(e)*s;return{start:{x:o,y:l},end:{x:h,y:p},left:{x:m,y},right:{x:E,y:C}}};var Sl=function(e){this.paper=e.paper,this.manager=e.manager};Sl.prototype.startDrag=function(e,n){var i=this.manager.getStrokeColor(),r=this.manager.getStrokeWidth(),s=this.manager.getFillColor(),o=this.manager.getFillOpacity(),l=this.manager.getZoom();this.ellipse=new nn({manager:this.manager,paper:this.paper,x:e,y:n,radiusX:0,radiusY:0,area:0,rotation:0,strokeWidth:r,zoom:l,strokeColor:i,fillColor:s,fillOpacity:o})};Sl.prototype.drag=function(e,n,i){this.ellipse.updateHandle("end",e,n,i)};Sl.prototype.stopDrag=function(){var e=this.ellipse.toJson();if(e.radiusX<2){this.ellipse.destroy(),delete this.ellipse;return}this.ellipse.setSelected(!0),this.manager.addShape(this.ellipse)};const gh=5;var rn=function(e){var n=this;this.manager=e.manager,this.paper=e.paper,e.id?this._id=e.id:this._id=this.manager.getRandomId(),this._x=e.x,this._y=e.y,this._radiusX=gh,this._radiusY=gh,this._rotation=e.rotation||0,this._radiusX===0||this._radiusY===0?this._yxRatio=.5:this._yxRatio=this._radiusY/this._radiusX,this._strokeColor=e.strokeColor,e.fillColor?this._fillColor=e.fillColor:this._fillColor="#ffffff",e.fillOpacity?this._fillOpacity=e.fillOpacity:this._fillOpacity=0,this._strokeWidth=e.strokeWidth||2,this._selected=!1,this._zoomFraction=1,e.zoom&&(this._zoomFraction=e.zoom/100),e.area?this._area=e.area:this._area=this._radiusX*this._radiusY*Math.PI,this.handle_wh=6,this.element=this.paper.ellipse(),this.element.attr({"fill-opacity":this._fillOpacity,fill:this._fillColor,cursor:"pointer"}),this.manager.canEdit&&this.element.drag(function(r,s){r=r/n._zoomFraction,s=s/n._zoomFraction;var o=r-this.prevX,l=s-this.prevY;return this.prevX=r,this.prevY=s,n.manager.moveSelectedShapes(o,l,!0),!1},function(){return n._handleMousedown(),this.prevX=0,this.prevY=0,!1},function(){return(this.prevX!==0||this.prevY!==0)&&n.manager.notifySelectedShapesChanged(),!1}),this.createHandles();var i=!!this.Matrix;this.updateShapeFromHandles(i),this.drawShape()};rn.prototype.toJson=function(){var e={type:"Point",x:this._x,y:this._y,strokeWidth:this._strokeWidth,strokeColor:this._strokeColor,fillColor:this._fillColor,fillOpacity:this._fillOpacity};return this._id&&(e.id=this._id),e};rn.prototype.compareCoords=function(e){var n=this.toJson(),i=!0;return e.type!==n.type?!1:(["x","y"].forEach(function(r){Math.round(e[r])!==Math.round(n[r])&&(i=!1)}),i)};rn.prototype.offsetCoords=function(e,n,i){return e.x=e.x+n,e.y=e.y+i,e};rn.prototype.offsetShape=function(e,n){this._x=this._x+e,this._y=this._y+n,this.drawShape()};rn.prototype._handleMousedown=function(){this._selected||this.manager.selectShapes([this])};rn.prototype.setColor=function(e){this._strokeColor=e,this.drawShape()};rn.prototype.getStrokeColor=function(){return this._strokeColor};rn.prototype.setStrokeColor=function(e){this._strokeColor=e,this.drawShape()};rn.prototype.setStrokeWidth=function(e){this._strokeWidth=e,this.drawShape()};rn.prototype.getStrokeWidth=function(){return this._strokeWidth};rn.prototype.getFillColor=function(){return this._fillColor};rn.prototype.setFillColor=function(e){this._fillColor=e,this.drawShape()};rn.prototype.setFillOpacity=function(e){this._fillOpacity=e,this.drawShape()};rn.prototype.getFillOpacity=function(){return this._fillOpacity};rn.prototype.destroy=function(){this.element.remove(),this.handles.remove()};rn.prototype.intersectRegion=function(e){var n=this.manager.regionToPath(e,this._zoomFraction*100),i=this._zoomFraction,r=parseInt(this._x*i,10),s=parseInt(this._y*i,10);return On.isPointInsidePath(n,r,s)};rn.prototype.getPath=function(){for(var e=this.element.attrs,n=e.radiusX,i=e.radiusY,r=[[e.x-n,e.y-i],[e.x+n,e.y-i],[e.x+n,e.y+i],[e.x-n,e.y+i]],s=[],o=[[[0,1],[1,0]],[[-1,0],[0,1]],[[0,-1],[-1,0]],[[1,0],[0,-1]]],l=0;l<=3;l++){l===0&&s.push(["M",r[0][0],r[0][1]+i]);var h=[r[l][0]+o[l][0][0]*n*.446,r[l][1]+o[l][0][1]*i*.446],p=[r[l][0]+o[l][1][0]*n*.446,r[l][1]+o[l][1][1]*i*.446],m=[r[l][0]+o[l][1][0]*n,r[l][1]+o[l][1][1]*i];s.push(["C",h[0],h[1],p[0],p[1],m[0],m[1]])}return s.push(["Z"]),s=s.join(",").replace(/,?([achlmqrstvxz]),?/gi,"$1"),this._rotation!==0&&(s=On.transformPath(s,"r"+this._rotation)),s};rn.prototype.isSelected=function(){return this._selected};rn.prototype.setZoom=function(e){this._zoomFraction=e/100,this.drawShape()};rn.prototype.updateHandle=function(e,n,i,r){this._handleIds=this.getHandleCoords();var s=this._handleIds[e];s.x=n,s.y=i;var o=e==="left"||e==="right";this.updateShapeFromHandles(o,r)};rn.prototype.updateShapeFromHandles=function(e,n){var i=this._handleIds,r=i.end.x-i.start.x,s=i.end.y-i.start.y,o=i.left.x-i.right.x,l=i.left.y-i.right.y,h;r===0?this._rotation=90:r>0?(h=Math.atan(s/r),this._rotation=On.deg(h)):r<0&&(h=Math.atan(s/r),this._rotation=180+On.deg(h)),this._x=(i.start.x+i.end.x)/2,this._y=(i.start.y+i.end.y)/2,this._radiusX=Math.sqrt(r*r+s*s)/2,e?(this._radiusY=Math.sqrt(o*o+l*l)/2,this._yxRatio=this._radiusY/this._radiusX):(n&&(this._yxRatio=1),this._radiusY=this._yxRatio*this._radiusX),this._area=this._radiusX*this._radiusY*Math.PI,this.drawShape()};rn.prototype.drawShape=function(){var e=this._strokeColor,n=this._strokeWidth,i=this._fillColor,r=this._fillOpacity,s=this._zoomFraction,o=this._x*s,l=this._y*s,h=this._radiusX*s,p=this._radiusY*s;this.element.attr({cx:o,cy:l,rx:h,ry:p,stroke:e,"stroke-width":n*this.manager.getShapeScalingFraction(),fill:i,"fill-opacity":r}),this.element.transform("r"+this._rotation),this.isSelected()?this.handles.show().toFront():this.handles.hide(),this._handleIds=this.getHandleCoords();for(var m,y,E,C,N=0,F=this.handles.length;N<F;N++)m=this.handles[N],y=m.h_id,E=this._handleIds[y].x*this._zoomFraction,C=this._handleIds[y].y*this._zoomFraction,m.attr({x:E-this.handle_wh/2,y:C-this.handle_wh/2})};rn.prototype.setSelected=function(e){this._selected=!!e,this.drawShape()};rn.prototype.createHandles=function(){this._handleIds=this.getHandleCoords();var e=this,n={stroke:"#4b80f9",fill:"#fff",cursor:"default","fill-opacity":1};e.handles=this.paper.set();var i=this.handle_wh,r,s,o;for(var l in this._handleIds)r=this._handleIds[l].x,s=this._handleIds[l].y,o=this.paper.rect(r-i/2,s-i/2,i,i),o.attr({cursor:"move"}),o.h_id=l,o.line=e,e.handles.push(o);e.handles.attr(n).hide()};rn.prototype.getHandleCoords=function(){let e=2;var n=On.rad(this._rotation),i=this._x,r=this._y,s=this._radiusX+e,o=this._radiusY+e,l=i-Math.cos(n)*s,h=r-Math.sin(n)*s,p=i+Math.cos(n)*s,m=r+Math.sin(n)*s,y=i+Math.sin(n)*o,E=r-Math.cos(n)*o,C=i-Math.sin(n)*o,N=r+Math.cos(n)*o;return{start:{x:l,y:h},end:{x:p,y:m},left:{x:y,y:E},right:{x:C,y:N}}};var Tl=function(e){this.paper=e.paper,this.manager=e.manager};Tl.prototype.startDrag=function(e,n){var i=this.manager.getStrokeColor(),r=this.manager.getStrokeWidth(),s=this.manager.getFillColor(),o=this.manager.getFillOpacity(),l=this.manager.getZoom();this.point=new rn({manager:this.manager,paper:this.paper,x:e,y:n,area:0,rotation:0,strokeWidth:r,zoom:l,strokeColor:i,fillColor:s,fillOpacity:o})};Tl.prototype.drag=function(e,n,i){};Tl.prototype.stopDrag=function(){var e=this.point.toJson();if(e.radiusX<2){this.point.destroy(),delete this.ellipse;return}this.point.setSelected(!0),this.manager.addShape(this.point)};var an=function(e){var n=this;this.manager=e.manager,this.paper=e.paper,e.id?this._id=e.id:this._id=this.manager.getRandomId(),this._points=e.points,this._bbox=this.getBBox(this._points),this._area=Math.abs((this._bbox.x2-this._bbox.x1)*(this._bbox.y2-this._bbox.y1)),this._strokeColor=e.strokeColor,e.fillColor?this._fillColor=e.fillColor:this._fillColor="#ffffff",e.fillOpacity?this._fillOpacity=e.fillOpacity:this._fillOpacity=0,this._strokeWidth=e.strokeWidth||2,this._selected=!1,this._zoomFraction=1,e.zoom&&(this._zoomFraction=e.zoom/100),this.handle_wh=6,this.element=this.paper.path(""),this.element.attr({"fill-opacity":this._fillOpacity,fill:this._fillColor,cursor:"pointer"}),this.manager.canEdit&&this.element.drag(function(i,r){if(n._zoomFraction!==0){i=i/n._zoomFraction,r=r/n._zoomFraction;var s=i-this.prevX,o=r-this.prevY;this.prevX=i,this.prevY=r,n.manager.moveSelectedShapes(s,o,!0)}},function(){return n._handleMousedown(),this.prevX=0,this.prevY=0,!1},function(){return(this.prevX!==0||this.prevY!==0)&&n.manager.notifySelectedShapesChanged(),!1}),this.createHandles(),this.drawShape()};an.prototype.getBBox=function(e){var n=e.split(" "),i=[],r=[];return n.forEach(function(s){var o=s.split(",");i.push(parseInt(o[0])),r.push(parseInt(o[1]))}),{x1:Math.min(...i),x2:Math.max(...i),y1:Math.min(...r),y2:Math.max(...r)}};an.prototype.toJson=function(){var e={type:"Polygon",points:this._points,area:this._area,strokeWidth:this._strokeWidth,strokeColor:this._strokeColor,fillColor:this._fillColor,fillOpacity:this._fillOpacity};return this._id&&(e.id=this._id),e};an.prototype.compareCoords=function(e){var n=this.toJson();return e.type!==n.type?!1:e.points===n.points};an.prototype.offsetCoords=function(e,n,i){return e.points=e.points.split(" ").map(function(r){return r.split(",").map(function(s,o){return parseFloat(s,10)+[n,i][o]}).join(",")}).join(" "),e};an.prototype.offsetShape=function(e,n){var i=this._points.split(" ").map(function(r){return r.split(",").map(function(s,o){return parseFloat(s,10)+[e,n][o]}).join(",")}).join(" ");this._points=i,this.drawShape()};an.prototype._handleMousedown=function(){this._selected||this.manager.selectShapes([this])};an.prototype.setColor=function(e){this._strokeColor=e,this.drawShape()};an.prototype.getStrokeColor=function(){return this._strokeColor};an.prototype.setStrokeColor=function(e){this._strokeColor=e,this.drawShape()};an.prototype.setStrokeWidth=function(e){this._strokeWidth=e,this.drawShape()};an.prototype.getStrokeWidth=function(){return this._strokeWidth};an.prototype.setFillColor=function(e){this._fillColor=e,this.drawShape()};an.prototype.getFillColor=function(){return this._fillColor};an.prototype.setFillOpacity=function(e){this._fillOpacity=e,this.drawShape()};an.prototype.getFillOpacity=function(){return this._fillOpacity};an.prototype.destroy=function(){this.element.remove(),this.handles.remove()};an.prototype.intersectRegion=function(e){var n=this._points.split(" ").reduce(function(i,r){var s=parseInt(r.split(",")[0],10),o=parseInt(r.split(",")[1],10);return i?(i.min_x=Math.min(i.min_x,s),i.min_y=Math.min(i.min_y,o),i.max_x=Math.max(i.max_x,s),i.max_y=Math.max(i.max_y,o)):i={min_x:s,min_y:o,max_x:s,max_y:o},i},void 0);return!(n.min_x>e.x+e.width||n.min_y>e.y+e.height||n.max_x<e.x||n.max_y<e.y)};an.prototype.getPath=function(){var e=this._zoomFraction,n=this._points.split(" ").map(function(i){return i.split(",").map(function(r){return parseInt(r,10)*e}).join(",")}).join("L");return n="M"+n+"Z",n};an.prototype.isSelected=function(){return this._selected};an.prototype.setZoom=function(e){this._zoomFraction=e/100,this.drawShape()};an.prototype.updateHandle=function(e,n,i,r){var s=this._points.split(" ");s[e]=n+","+i,this._points=s.join(" "),n<this._bbox.x1&&(this._bbox.x1=n),n>this._bbox.x2&&(this._bbox.x2=n),i<this._bbox.y1&&(this._bbox.y1=i),i>this._bbox.y2&&(this._bbox.y2=i),this._area=Math.abs((this._bbox.x2-this._bbox.x1)*(this._bbox.y2-this._bbox.y1))};an.prototype.drawShape=function(){var e=this._strokeColor,n=this._strokeWidth,i=this._fillColor,r=this._fillOpacity;this._zoomFraction;var s=this.getPath();this.element.attr({path:s,stroke:e,"stroke-width":n*this.manager.getShapeScalingFraction(),fill:i,"fill-opacity":r}),this.isSelected()?this.handles.show().toFront():this.handles.hide();var o,l,h;this._points.split(" ").forEach((function(y,m){var y=y.split(",");l=parseInt(y[0])*this._zoomFraction,h=parseInt(y[1])*this._zoomFraction,o=this.handles[m],o.attr({x:l-this.handle_wh/2,y:h-this.handle_wh/2})}).bind(this))};an.prototype.setSelected=function(e){this._selected=!!e,this.drawShape()};an.prototype.createHandles=function(){var e=this,n={stroke:"#4b80f9",fill:"#fff",cursor:"move","fill-opacity":1};e.handles=this.paper.set();var i=function(){return function(m,y,E,C,N){m=m/e._zoomFraction,y=y/e._zoomFraction;var F=m+this.ox,X=y+this.oy;return e.updateHandle(this.h_id,F,X,N.shiftKey),e.drawShape(),!1}},r=function(){return function(){return this.ox=(this.attr("x")+this.attr("width")/2)/e._zoomFraction,this.oy=(this.attr("y")+this.attr("height")/2)/e._zoomFraction,!1}},s=function(){return function(){return e.manager.notifyShapesChanged([e]),!1}},o=this.handle_wh,l,h,p;this._points.split(" ").forEach(function(E,y){var E=E.split(",");l=parseInt(E[0]),h=parseInt(E[1]),p=e.paper.rect(l-o/2,h-o/2,o,o),p.attr({cursor:"move"}),p.h_id=y,e.manager.canEdit&&p.drag(i(),r(),s()),e.handles.push(p)}),e.handles.attr(n).hide()};var I3=function(e){var n=new an(e),i=n.toJson;n.toJson=function(){var o=i.call(n);return o.type="Polyline",o};var r=n.getPath;return n.getPath=function(){var o=r.call(n);return o.replace("Z","")},n.drawShape(),n},Wt=function(e){var n=this;this.type="Text",this.manager=e.manager,this.paper=e.paper,this._x=e.x,this._y=e.y,this._fontSize=e.fontSize,this._text=e.text,this._strokeWidth=e.strokeWidth||2,this._strokeColor=e.strokeColor||"#ffffff",e.fillColor?this._fillColor=e.fillColor:this._fillColor="#000000",e.fillOpacity?this._fillOpacity=e.fillOpacity:this._fillOpacity=0,this._inModalView=e.inModalView||!1,this._id=e.id||this.manager.getRandomId(),this._id==-1&&(this._id=this.manager.getRandomId()),this._zoomFraction=e.zoom?e.zoom/100:1,this._textAnchor=e.textAnchor||"start",this._rotation=e.rotation||0,this._selected=!1,this._area=0,this.handle_wh=6,this.bkgdRect=this.paper.rect(),this.bkgdRect.attr({"fill-opacity":this._fillOpacity,fill:this._fillColor}),this.element=this.paper.text(),this.element.attr({"fill-opacity":.01,fill:"#fff"}),this.manager.canEdit&&this.element.drag(function(i,r){i=i/n._zoomFraction,r=r/n._zoomFraction;var s=i-this.prevX,o=r-this.prevY;this.prevX=i,this.prevY=r,n.manager.moveSelectedShapes(s,o,!0)},function(){return n._handleMousedown(),this.prevX=0,this.prevY=0,!1},function(){return(this.prevX!==0||this.prevY!==0)&&n.manager.notifySelectedShapesChanged(),!1}),this.createHandles(),this.drawShape()};Wt.prototype.toJson=function(){var e={type:"Text",x:this._x,y:this._y,area:this._area,fontSize:this._fontSize,strokeColor:this._strokeColor,fillColor:this._fillColor,fillOpacity:this._fillOpacity,text:this._text,textAnchor:this._textAnchor,rotation:this._rotation};return this._id&&(e.id=this._id),e};Wt.prototype.offsetShape=function(e,n){this._x=this._x+e,this._y=this._y+n,this.drawShape()};Wt.prototype.compareCoords=function(e){if(e.type!=="Text")return!1;var n=this.toJson(),i=!0;return["x","y","text"].forEach(function(r){e[r]!==n[r]&&(i=!1)}),i};Wt.prototype.offsetCoords=function(e,n,i){return e.x=e.x+n,e.y=e.y+i,e};Wt.prototype.setStrokeColor=function(e){this._strokeColor=e,this.drawShape()};Wt.prototype.getStrokeColor=function(){return this._strokeColor};Wt.prototype.setStrokeWidth=function(e){this._strokeWidth=e,this.drawShape()};Wt.prototype.getStrokeWidth=function(){return this._strokeWidth};Wt.prototype.setFontSize=function(e){this._fontSize=e,this.drawShape()};Wt.prototype.getFontSize=function(){return this._fontSize};Wt.prototype.setText=function(e){this._text=e,this.drawShape()};Wt.prototype.getText=function(){return this._text};Wt.prototype.setTextAnchor=function(e){this._textAnchor=e,this.drawShape()};Wt.prototype.getTextAnchor=function(){return this._textAnchor};Wt.prototype.setFillColor=function(e){this._fillColor=e,this.drawShape()};Wt.prototype.getFillColor=function(){return this._fillColor};Wt.prototype.setFillOpacity=function(e){this._fillOpacity=e,this.drawShape()};Wt.prototype.getFillOpacity=function(){return this._fillOpacity};Wt.prototype.setZoom=function(e){this._zoomFraction=e?e/100:1,this.drawShape()};Wt.prototype.setRotation=function(e){this._rotation=e,this.drawShape()};Wt.prototype.setInModalView=function(e){this._inModalView=e,this.drawShape()};Wt.prototype.destroy=function(){if(this.element.remove(),this.handles.remove(),this.bkgdRect.remove(),this._linkedShapeId!=-1){var e=this.manager.getShape(this._linkedShapeId);e&&e.destroyTextShape()}};Wt.prototype._handleMousedown=function(){this._selected||this.manager.selectShapes([this])};Wt.prototype.isSelected=function(){return this._selected};Wt.prototype.setSelected=function(e){e&&this._selected||!e&&!this._selected||(this._selected=!!e,this.drawShape())};Wt.prototype.intersectRegion=function(e){var n=this.manager.regionToPath(e,this._zoomFraction*100),i=this._zoomFraction,r=parseInt(this._x*i,10),s=parseInt(this._y*i,10);if(On.isPointInsidePath(n,r,s))return!0;var o=this.getPath(),l=On.pathIntersection(n,o);return l.length>0};Wt.prototype.getPath=function(){this._zoomFraction;for(var e=this.bkgdRect.attr("x"),n=this.bkgdRect.attr("y"),i=this.bkgdRect.attr("width"),r=this.bkgdRect.attr("height"),s=[[e,n],[e+i,n],[e+i,n+r],[e,n+r]],o=[],l=0;l<=3;l++)l===0&&o.push("M"+s[0].join(",")),l<3?o.push("L"+s[l+1].join(",")):o.push("Z");return o.join(",")};Wt.prototype.drawShape=function(){var e=this._zoomFraction,n=this.manager.getShapeScalingFraction(),i=this._y;this.element.attr({x:this._x*e,y:this._y*e,fill:this._strokeColor,"fill-opacity":1,"font-size":this._fontSize*n,text:this._text,"text-anchor":this._textAnchor}),this.element.transform("r0");var r=this.element.getBBox();const s=1;if(this.bkgdRect.attr({x:r.x-s,y:r.y,width:r.width+2*s,height:r.height+s/2,fill:this._fillColor,"fill-opacity":this._fillOpacity,"stroke-width":0}),this.bkgdRect.toFront(),this.element.toFront(),this._inModalView)this.element.transform("r0"),this.bkgdRect.transform("r0");else{let N=this.manager.getHorizontalFlip(),F=this.manager.getVerticalFlip(),X=this.manager.getTextRotation(),G=this._textAnchor==="start"?r.x:this._textAnchor==="end"?r.x+r.width:r.x+r.width/2,V=i*e;this.element.transform(`r${-X},${G},${V} s${N}, ${F}`),this.bkgdRect.transform(`r${-X},${G},${V} s${N}, ${F}`)}this._area=r.width*r.height,this.isSelected()?this.handles.show().toFront():this.handles.hide();for(var o=this.getHandleCoords(),l=this.getHandleColours(),h,p,m,y,E=0,C=this.handles.length;E<C;E++)h=this.handles[E],p=h.h_id,m=o[p][0],y=o[p][1],h.attr({x:m-this.handle_wh/2,y:y-this.handle_wh/2,fill:l[p]})};Wt.prototype.getHandleCoords=function(){var e=this.element.getBBox(),n=e.x,i=e.y,r=e.width,s=e.height,o={nw:[n,i],n:[n+r/2,i],ne:[n+r,i],w:[n,i+s/2],e:[n+r,i+s/2],sw:[n,i+s],s:[n+r/2,i+s],se:[n+r,i+s]};return o};Wt.prototype.getHandleColours=function(){let e=this._textAnchor,n="#000000",i="#FFFFFF";var r={nw:e==="start"?n:i,n:e==="middle"?n:i,ne:e==="end"?n:i,w:e==="start"?n:i,e:e==="end"?n:i,sw:e==="start"?n:i,s:e==="middle"?n:i,se:e==="end"?n:i};return r};function O3(t,e,n){if(t===0&&e===0)return{x:t,y:e};var i=Math.sqrt(t*t+e*e),r=Math.atan(e/t);t<0&&(r=Math.PI+r);var s=n*(Math.PI/180),o=r-s;return t=Math.cos(o)*i,e=Math.sin(o)*i,{x:t,y:e}}Wt.prototype.createHandles=function(){var e=this,n={stroke:"#4b80f9",fill:"#fff",cursor:"default","fill-opacity":1},i=this.getHandleCoords();e.handles=this.paper.set();var r=function(){return function(y,E,C,N,F){if(y=y/e._zoomFraction,E=E/e._zoomFraction,e._rotation!=0){let V=O3(y,E,e._rotation);y=V.x,E=V.y}var X=this.ox+y,G=this.oy+E;return e._x=X,e._y=G,e.drawShape(),!1}},s=function(){return function(){return this.ox=this.attr("x")/e._zoomFraction,this.oy=this.attr("y")/e._zoomFraction,!1}},o=function(){return function(){return!1}};for(var l in i){var h=i[l][0],p=i[l][1],m=this.paper.rect(h-e.handle_wh/2,p-e.handle_wh/2,e.handle_wh,e.handle_wh).attr(n);m.attr({cursor:l+"-resize"}),m.h_id=l,m.rect=e,e.manager.canEdit&&m.drag(r(),s(),o()),e.handles.push(m)}e.handles.hide()};var ca=function(e){this.paper=e.paper,this.manager=e.manager};ca.prototype.startDrag=function(e,n){var i=this.manager.getStrokeColor(),r=this.manager.getFillColor(),s=this.manager.getFillOpacity(),o=this.manager.getStrokeWidth(),l=this.manager.getFontSize(),h=this.manager.getZoom(),p=this.manager.getInModalView(),m=this.manager.getText(),y=this.manager.getTextAnchor();this.startX=e,this.startY=n,this.text=new Wt({manager:this.manager,paper:this.paper,zoom:h,text:m||"Text",textAnchor:y,inModalView:p,x:e,y:n,fontSize:l,strokeColor:i,strokeWidth:o,fillColor:r,fillOpacity:s})};ca.prototype.drag=function(e,n,i){};ca.prototype.stopDrag=function(){this.text.setSelected(!0),this.manager.addShape(this.text)};ca.prototype.getShape=function(){return this.text};var ot=function(e,n,i,r){var s=this;r=r||{},this.STATES=["SELECT","RECT","LINE","ARROW","ELLIPSE","POLYGON","POINT","TEXT"],this._state="SELECT",this._strokeColor="#ff0000",this._strokeWidth=2,this._text="Text",this._textAnchor="start",this._textFontSize=12,this._inModalView=!1,this._vFlip=!1,this._hFlip=!1,this._fillColor="#ffffff",this._fillOpacity=0,this._orig_width=n,this._orig_height=i,this._zoom=100,this._shapeScalingFraction=1,this.canEdit=!r.readOnly,this.paper=On(e,n,i),this.$el=A("#"+e),this._shapes=[],this.newShapeBg=this.paper.rect(0,0,n,i),this.newShapeBg.attr({fill:"#000","fill-opacity":.01,"stroke-width":0,cursor:"default"}),this.selectRegion=this.paper.rect(0,0,n,i),this.selectRegion.hide().attr({stroke:"#ddd","stroke-width":1,"stroke-dasharray":"- "}),this.canEdit?(this.newShapeBg.drag(function(){s.drag.apply(s,arguments)},function(){s.startDrag.apply(s,arguments)},function(){s.stopDrag.apply(s,arguments)}),this.shapeFactories={RECT:new El({manager:this,paper:this.paper}),ELLIPSE:new Sl({manager:this,paper:this.paper}),LINE:new la({manager:this,paper:this.paper}),ARROW:new A3({manager:this,paper:this.paper}),POINT:new Tl({manager:this,paper:this.paper}),TEXT:new ca({manager:this,paper:this.paper})},this.createShape=this.shapeFactories.LINE):this.shapeFactories={}};ot.prototype.startDrag=function(e,n,i){this.clearSelectedShapes();var r=this.$el.offset(),s=e-r.left,o=n-r.top;if(this.getState()==="SELECT")this._dragStart={x:s,y:o},this.selectRegion.attr({x:s,y:o,width:0,height:0}),this.selectRegion.toFront().show();else{var l=this._zoom/100;s=s/l,o=o/l,this.createShape.startDrag(s,o)}this.newShapeBg.toFront()};ot.prototype.drag=function(e,n,i,r,s){var o=this.$el.offset(),l=i-o.left,h=r-o.top;if(this.getState()==="SELECT")e=this._dragStart.x-l,n=this._dragStart.y-h,this.selectRegion.attr({x:Math.min(l,this._dragStart.x),y:Math.min(h,this._dragStart.y),width:Math.abs(e),height:Math.abs(n)});else{var p=this._zoom/100,m=s.shiftKey;l=l/p,h=h/p,this.createShape.drag(l,h,m)}};ot.prototype.stopDrag=function(e,n,i){if(this.getState()==="SELECT"){var r=this.selectRegion.attr(),s=this._zoom/100,o=r.x/s,l=r.y/s,h=r.width/s,p=r.height/s;this.selectShapesByRegion({x:o,y:l,width:h,height:p}),this.selectRegion.hide(),this.newShapeBg.toBack()}else this.createShape.stopDrag()};ot.prototype.setState=function(e){if(this.STATES.indexOf(e)===-1){console.log("Invalid state: ",e,"Needs to be in",this.STATES);return}var n=["RECT","LINE","ARROW","ELLIPSE","POLYGON","POINT","TEXT"];n.indexOf(e)>-1?(this.newShapeBg.toFront(),this.newShapeBg.attr({cursor:"crosshair"}),this.clearSelectedShapes(),this.shapeFactories[e]&&(this.createShape=this.shapeFactories[e])):e==="SELECT"&&(this.newShapeBg.toBack(),this.newShapeBg.attr({cursor:"default"})),this._state=e};ot.prototype.getState=function(){return this._state};ot.prototype.setZoom=function(e){this._zoom=e;var n=this._orig_width*e/100,i=this._orig_height*e/100;this.paper.setSize(n,i),this.paper.canvas.setAttribute("viewBox","0 0 "+n+" "+i),this.newShapeBg.attr({width:n,height:i}),this._shapes.forEach(function(r){r.setZoom(e)})};ot.prototype.setShapeScalingFraction=function(e){this._shapeScalingFraction=e,this._shapes.forEach(function(n){n.drawShape()})};ot.prototype.getShapeScalingFraction=function(){return this._shapeScalingFraction};ot.prototype.getZoom=function(e){return this._zoom};ot.prototype.setStrokeColor=function(e){this._strokeColor=e;for(var n=this.getSelectedShapes(),i=0;i<n.length;i++)n[i].setStrokeColor(e)};ot.prototype.getStrokeColor=function(){return this._strokeColor};ot.prototype.setStrokeWidth=function(e){e=parseFloat(e,10),this._strokeWidth=e;for(var n=this.getSelectedShapes(),i=0;i<n.length;i++)n[i].setStrokeWidth(e)};ot.prototype.getStrokeWidth=function(){return this._strokeWidth};ot.prototype.getFillColor=function(){return this._fillColor};ot.prototype.setFillColor=function(e){this._fillColor=e;for(var n=this.getSelectedShapes(),i=0;i<n.length;i++)n[i].setFillColor(e)};ot.prototype.getInModalView=function(){return this._inModalView};ot.prototype.setInModalView=function(e){this._inModalView=e;for(var n=this.getSelectedShapes(),i=0;i<n.length;i++)n[i].setInModalView&&n[i].setInModalView(e)};ot.prototype.getFillOpacity=function(){return this._fillOpacity};ot.prototype.setFillOpacity=function(n){var n=parseFloat(n,10).toFixed(1);n<=.01&&(n=parseInt(n)),this._fillOpacity=n;for(var i=this.getSelectedShapes(),r=0;r<i.length;r++)i[r].setFillOpacity(n)};ot.prototype.getText=function(){return this._text};ot.prototype.setText=function(e){this._text=e;for(var n=this.getSelectedShapes(),i=0;i<n.length;i++)n[i].setText&&n[i].setText(e)};ot.prototype.getTextAnchor=function(){return this._textAnchor};ot.prototype.setTextAnchor=function(e){this._textAnchor=e;for(var n=this.getSelectedShapes(),i=0;i<n.length;i++)n[i].setTextAnchor&&n[i].setTextAnchor(e)};ot.prototype.getShowText=function(){return this._showText};ot.prototype.setShowText=function(e){this._showText=e;for(var n=this.getSelectedShapes(),i=0;i<n.length;i++)n[i].setShowText(e)};ot.prototype.getFontSize=function(){return this._textFontSize};ot.prototype.setFontSize=function(e){e=parseFloat(e,10),this._textFontSize=e;for(var n=this.getSelectedShapes(),i=0;i<n.length;i++)n[i].setFontSize&&n[i].setFontSize(e)};ot.prototype.getTextRotation=function(){return this._textRotation};ot.prototype.setTextRotation=function(e){this._textRotation=e;for(var n=this.getShapes(),i=0;i<n.length;i++)n[i].type=="Text"&&n[i].drawShape()};ot.prototype.getVerticalFlip=function(){return this._vFlip};ot.prototype.setVerticalFlip=function(e){this._vFlip=e;for(var n=this.getShapes(),i=0;i<n.length;i++)n[i].type=="Text"&&n[i].drawShape()};ot.prototype.getHorizontalFlip=function(){return this._hFlip};ot.prototype.setHorizontalFlip=function(e){this._hFlip=e;for(var n=this.getShapes(),i=0;i<n.length;i++)n[i].type=="Text"&&n[i].drawShape()};ot.prototype.getShapesJson=function(){var e=[];return this.getShapes().forEach(function(n){e.push(n.toJson())}),e};ot.prototype.setShapesJson=function(e){this.deleteAllShapes();var n=this;e.forEach(function(i){n.addShapeJson(i)})};ot.prototype.regionToPath=function(e,n){var i=n?n/100:this._zoom/100,r=parseInt(e.x*i,10),s=parseInt(e.y*i,10),o=parseInt(e.width*i,10),l=parseInt(e.height*i,10);return[["M"+r+","+s],["L"+(r+o)+","+s],["L"+(r+o)+","+(s+l)],["L"+r+","+(s+l)+"Z"]].join(",")};ot.prototype.findShapeAtCoords=function(e){for(var n=this.getShapes(),i=0;i<n.length;i++)if(n[i].compareCoords(e))return n[i];return!1};ot.prototype.convertOmeroLabelToFigureText=function(e){return{text:e.Text,fillColor:e.fillColor,fillOpacity:0,strokeColor:e.strokeColor,fontSize:18,type:"Text",x:e.x,y:e.y,linkedShapeId:-1,textAnchor:"start"}};ot.prototype.pasteShapesJson=function(e,n){var i=this,r=[],s=!0;return e.forEach(function(o){var l=i.createShapeJson(o);o=l.toJson();for(var h=i.findShapeAtCoords(o);h;)o=A.extend({},o),o=h.offsetCoords(o,20,10),h=i.findShapeAtCoords(o);l.destroy();var p=i.addShapeJson(o,n);p?r.push(p):s=!1}),this.selectShapes(r),s};ot.prototype.addShapesJson=function(e,n){var i=!0;return e.forEach((function(r){var s=this.addShapeJson(r,n);s||(i=!1)}).bind(this)),i};ot.prototype.addShapeJson=function(e,n){var i=this.createShapeJson(e);if(i)return n&&(typeof n=="boolean"&&(n={x:0,y:0,width:this._orig_width,height:this._orig_height}),!i.intersectRegion(n))?(i.destroy(),!1):(this._shapes.push(i),this.sortShape(this._shapes),i)};ot.prototype.createShapeJson=function(e){var n=e,i,r,s=n.strokeColor||this.getStrokeColor(),o=n.fillColor||this.getFillColor(),l=n.fillOpacity==null?this.getFillOpacity():n.fillOpacity,h=n.strokeWidth||this.getStrokeWidth(),p=n.fontSize||this.getFontSize(),m=n.inModalView||this.getInModalView(),y=n.textId||-1,E=this.getZoom(),C={manager:this,paper:this.paper,strokeWidth:h,zoom:E,strokeColor:s,fillColor:o,fillOpacity:parseFloat(l).toFixed(1),textId:y};return n.text===void 0?n.Text===void 0?i=this.getText():i=n.Text:i=n.text,e.id&&(C.id=e.id),n.type==="Ellipse"?(C.x=n.x,C.y=n.y,C.radiusX=n.radiusX,C.radiusY=n.radiusY,C.rotation=n.rotation||0,C.transform=n.transform,C.area=n.radiusX*n.radiusY*Math.PI,r=new nn(C)):n.type==="Point"?(C.x=n.x,C.y=n.y,C.area=0,r=new rn(C)):n.type==="Rectangle"?(C.x=n.x,C.y=n.y,C.width=n.width,C.height=n.height,C.area=n.width*n.height,C.rotation=n.rotation,r=new qt(C)):n.type==="Line"?(C.x1=n.x1,C.y1=n.y1,C.x2=n.x2,C.y2=n.y2,C.area=Math.abs((n.x2-n.x1)*(n.y2-n.y1)),r=new Kt(C)):n.type==="Arrow"?(C.x1=n.x1,C.y1=n.y1,C.x2=n.x2,C.y2=n.y2,C.area=Math.abs((n.x2-n.x1)*(n.y2-n.y1)),r=new id(C)):n.type==="Polygon"?(C.points=n.points,r=new an(C)):n.type==="Polyline"?(C.points=n.points,r=new I3(C)):n.type==="Text"&&(C.x=n.x||0,C.y=n.y||0,C.fontSize=p,C.text=i,C.textAnchor=n.textAnchor,C.rotation=n.rotation,C.textRotation=n.textRotation,C.vFlip=n.vFlip,C.hFlip=n.hFlip,C.inModalView=m,r=new Wt(C)),r};ot.prototype.addShape=function(e){this._shapes.push(e),this.sortShape(this._shapes),this.$el.trigger("new:shape",[e])};ot.prototype.sortShape=function(e){e.sort(function(n,i){var r=n._area,s=i._area;return r==null&&(r=Number.MAX_SAFE_INTEGER),s==null&&(s=Number.MAX_SAFE_INTEGER),r<s?-1:r>s?1:0}),e.reverse().forEach(function(n){n.element.toFront()}),e.forEach(function(n){n.type=="Text"&&(n.bkgdRect.toFront(),n.element.toFront())}),this.state!="SELECT"&&this.newShapeBg.toFront()};ot.prototype.getShapes=function(){return this._shapes};ot.prototype.getShape=function(e){for(var n=this.getShapes(),i=0;i<n.length;i++)if(n[i]._id===e)return n[i]};ot.prototype.getSelectedShapes=function(){for(var e=[],n=this.getShapes(),i=0;i<n.length;i++)n[i].isSelected()&&e.push(n[i]);return e};ot.prototype.getSelectedShapesJson=function(){var e=[];return this.getShapes().forEach(function(n){n.isSelected()&&e.push(n.toJson())}),e};ot.prototype.getShapeBoundingBox=function(e){var n=this.getShape(e),i=n.element.getBBox(),r=this.getZoom()/100;return{x:i.x/r,y:i.y/r,width:i.width/r,height:i.height/r}};ot.prototype.moveSelectedShapes=function(e,n,i){this.getSelectedShapes().forEach(function(r){r.offsetShape(e,n)})};ot.prototype.deleteAllShapes=function(){this.getShapes().forEach(function(e){e.destroy()}),this._shapes=[],this.$el.trigger("change:selected")};ot.prototype.deleteShapesByIds=function(e){var n=[],i=[],r=[];this.getShapes().forEach(function(s){e.indexOf(s._id)>-1?(s._textShape&&r.push(s._textId),s.destroy()):i.push(s)}),i.forEach(function(s){r.indexOf(s._id)>-1?s.destroy():n.push(s)}),this._shapes=n,this.$el.trigger("change:selected")};ot.prototype.deleteSelectedShapes=function(){var e=[];this.getShapes().forEach(function(n){n.isSelected()?n.destroy():e.push(n)}),this._shapes=e,this.$el.trigger("change:selected")};ot.prototype.selectShapesById=function(e){this.clearSelectedShapes(!0);var n=[];this.getShapes().forEach(function(i){i.toJson().id===e&&n.push(i)}),this.selectShapes(n)};ot.prototype.clearSelectedShapes=function(e){for(var n=0;n<this._shapes.length;n++)this._shapes[n].setSelected(!1);e||this.$el.trigger("change:selected")};ot.prototype.selectShapesByRegion=function(e){var n=[];this.getShapes().forEach(function(i){i.intersectRegion(e)&&n.push(i)}),this.selectShapes(n)};ot.prototype.selectAllShapes=function(e){this.selectShapes(this.getShapes())};ot.prototype.selectShapes=function(e){var n,i,r,s,o,l,h;this.clearSelectedShapes(!0),e.forEach(function(p,m){typeof p=="number"&&(p=this.getShape(p)),p&&p.setSelected(!0)}),this.getSelectedShapes().forEach(function(p,m){p&&(n===void 0?n=p.getStrokeColor():n!==p.getStrokeColor()&&(n=!1),r===void 0?r=p.getFillColor():r!==p.getFillColor()&&(r=!1),i===void 0?i=p.getStrokeWidth():i!==p.getStrokeWidth()&&(i=!1),s===void 0?s=p.getFillOpacity():s!==p.getFillOpacity()&&(s=!1),l===void 0?l=p.getText?p.getText():void 0:p.getText&&l!==p.getText()&&(l=!1),o===void 0?o=p.getTextAnchor?p.getTextAnchor():void 0:p.getTextAnchor&&o!==p.getTextAnchor()&&(o=!1),h===void 0?h=p.getFontSize?p.getFontSize():void 0:p.getFontSize&&h!==p.getFontSize()&&(h=!1))}),n&&(this._strokeColor=n),i&&(this._strokeWidth=i),r&&(this._fillColor=r),s&&(this._fillOpacity=s),l!=null&&(this._text=l),o!=null&&(this._textAnchor=o),h&&(this._textFontSize=h),this.$el.trigger("change:selected")};ot.prototype.notifySelectedShapesChanged=function(){this.notifyShapesChanged(this.getSelectedShapes())};ot.prototype.notifyShapesChanged=function(e){this.$el.trigger("change:shape",[e])};ot.prototype.getRandomId=function(){var e=Math.random()+"";return-parseInt(e.slice(2),10)};const M3=`

<div class="btn-group me-2 shape-option" role="group" aria-label="...">
    <button type="button" data-state="SELECT"
        class="btn btn-outline-secondary <% if (state==='SELECT')print('pressed') %>">
        <span class="glyphicon select-icon"></span></button>
</div>


<div class="btn-group me-2 shape-option" role="group" aria-label="...">
    <button type="button" class="btn btn-outline-secondary <% if (state==='RECT')print('pressed') %>"
            title="Rectangle" data-state="RECT">
        <span class="glyphicon rect-icon"></span></button>
    <button type="button" class="btn btn-outline-secondary <% if (state==='LINE')print('pressed') %>"
            title="Line" data-state="LINE">
        <span class="glyphicon line-icon"></span></button>
    <button type="button" class="btn btn-outline-secondary <% if (state==='ARROW')print('pressed') %>"
            title="Arrow" data-state="ARROW">
        <span class="glyphicon arrow-icon"></span></button>
    <button type="button" class="btn btn-outline-secondary <% if (state==='ELLIPSE')print('pressed') %>"
            title="Ellipse" data-state="ELLIPSE">
        <span class="glyphicon ellipse-icon"></span></button>
    <button type="button" class="btn btn-outline-secondary <% if (state==='POINT')print('pressed') %>"
            title="Point" data-state="POINT">
        <span class="glyphicon point-icon"></span></button>
    <button type="button" class="btn btn-outline-secondary <% if (state==='TEXT')print('pressed') %>"
            title="Text" data-state="TEXT">
        <span class="glyphicon text-icon"></span></button>
</div>

 <div class="btn-group" role="group">
    <div class="btn-group">
        <button type="button" class="shape-color btn btn-outline-secondary dropdown-toggle" title="Shape Color"
            data-bs-toggle="dropdown">
            <span data-color="<%= color %>" style="background-color:#<%= color %>">&nbsp &nbsp &nbsp</span>
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu dropdownSelect colorpicker" role="menu">
            <li><a class="dropdown-item" href="#">
                <span data-color="000000" style="background-color:#000">&nbsp &nbsp &nbsp</span>&nbsp Black
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span data-color="0000FF" style="background-color:#00f">&nbsp &nbsp &nbsp</span>&nbsp Blue
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span data-color="00FF00" style="background-color:#0f0">&nbsp &nbsp &nbsp</span>&nbsp Green
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span data-color="FF0000" style="background-color:#f00">&nbsp &nbsp &nbsp</span>&nbsp Red
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span data-color="FFFF00" style="background-color:#ff0">&nbsp &nbsp &nbsp</span>&nbsp Yellow
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span data-color="FFFFFF" style="background-color:#fff">&nbsp &nbsp &nbsp</span>&nbsp White
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span data-color="FF00FF" style="background-color:#f0f">&nbsp &nbsp &nbsp</span>&nbsp Magenta
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span data-color="00FFFF" style="background-color:#0ff">&nbsp &nbsp &nbsp</span>&nbsp Cyan
            </a></li>
            <li class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="#">
                <span class="colorpickerOption" data-color="<%= color %>">&nbsp &nbsp &nbsp</span>&nbsp More Colors...
            </a></li>
        </ul>
    </div>

    <div class="btn-group me-2">
        <button type="button" class="line-width btn btn-outline-secondary dropdown-toggle" title="Line Width: <%= lineWidth %>"
            data-bs-toggle="dropdown">
            <span data-line-width="<%= lineWidth %>"><%= lineWidth %> pt</span>
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu dropdownSelect lineWidth" style="min-width: 0" role="menu">
            <% _.each(lineWidths,function(p){ %>
                <li><a class="dropdown-item" href='#'><span data-line-width='<%= p %>'><%= p %> pt</span></a></li>
            <% }); %>
        </ul>
    </div>
</div>

 <div class="btn-group" role="group">
    <div class="btn-group">
        <button type="button" class="fill-color btn btn-outline-secondary dropdown-toggle" title="Fill Color"
            data-bs-toggle="dropdown">
            <span data-color="<%= fillColor %>" style="background-color:#<%= fillColor %>">&nbsp &nbsp &nbsp</span>
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu dropdownSelect colorpicker" role="menu">
            <li><a class="dropdown-item" href="#">
                <span data-color="000000" style="background-color:#000">&nbsp &nbsp &nbsp</span>&nbsp Black
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span data-color="0000FF" style="background-color:#00f">&nbsp &nbsp &nbsp</span>&nbsp Blue
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span data-color="00FF00" style="background-color:#0f0">&nbsp &nbsp &nbsp</span>&nbsp Green
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span data-color="FF0000" style="background-color:#f00">&nbsp &nbsp &nbsp</span>&nbsp Red
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span data-color="FFFF00" style="background-color:#ff0">&nbsp &nbsp &nbsp</span>&nbsp Yellow
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span data-color="FFFFFF" style="background-color:#fff">&nbsp &nbsp &nbsp</span>&nbsp White
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span data-color="FF00FF" style="background-color:#f0f">&nbsp &nbsp &nbsp</span>&nbsp Magenta
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span data-color="00FFFF" style="background-color:#0ff">&nbsp &nbsp &nbsp</span>&nbsp Cyan
            </a></li>
            <li class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="#">
                <span class="colorpickerOption" data-color="<%= fillColor %>">
                    &nbsp &nbsp &nbsp</span>&nbsp More Colors...
            </a></li>
        </ul>
    </div>

    <div class="btn-group me-2">
        <button type="button" class="fill-opacity btn btn-outline-secondary dropdown-toggle" title="Fill opacity: <%= opacity %>"
            data-bs-toggle="dropdown">
            <span data-fill-opacity="<%= opacity %>"><%= opacity %></span>
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu dropdownSelect opacity" style="min-width: 0" role="menu">
            <% _.each(opacities,function(p){ %>
                <li><a class="dropdown-item" href='#'><span data-fill-opacity='<%= p %>'><%= p %></span></a></li>
            <% }); %>
        </ul>
    </div>
</div>

<!-- Text controls -->
<div class="btn-group me-2" role="group" aria-label="...">
    <div class="input-group input-group-sm float-start">
        <input id="label-text" type="text" class="label-text form-control"
            <% if (!textControlsEnabled) print('disabled') %>
                placeholder="Label" value="<% print(_.escape(text)) %>" />
    </div>

    <div class="btn-group">
        <button type="button" class="text-font-size btn btn-outline-secondary dropdown-toggle"
            title="Font Size: <%= fontSize %> <% if (!textControlsEnabled) print('(No Text Shapes selected)') %>"
            data-bs-toggle="dropdown">
            <span data-font-size="<%= fontSize %>"><%= fontSize %></span>
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu dropdownSelect" role="menu">
        <% _.each([6,8,10,12,14,18,21,24,36,48],function(p){ %>
            <li><a class='dropdown-item' href='#'><span data-font-size='<%= p %>'><%= p %></span></a></li>
        <% }); %>
        </ul>
    </div>

</div>
<div class="btn-group me-2" role="group">
    <div class="btn-group">
        <button
            type="button"
            class="btn btn-outline-secondary dropdown-toggle text-anchor"
            data-bs-toggle="dropdown"
            aria-expanded="false"
            title="Shape alignment and text anchors"
            >
            <span data-textanchor="<%= textAnchor %>">
                <i class="<%= textAnchorIcon %>"></i>
            </span>
        </button>
        <ul class="dropdown-menu dropdownSelect">
            <li>
                <a href="#" class="dropdown-item">
                <span data-text-anchor="start"><i class="bi-text-left"></i></span>
                Text Anchor Start</a
                >
            </li>
            <li>
                <a href="#" class="dropdown-item">
                <span data-text-anchor="middle"><i class="bi-text-center"></i></span>
                Text Anchor Middle</a
                >
            </li>
            <li>
                <a href="#" class="dropdown-item">
                <span data-text-anchor="end"><i class="bi-text-right"></i></span>
                Text Anchor End</a
                >
            </li>
        </ul>
    </div>
    <div class="btn-group">
        <button type="button" class="line-width btn btn-outline-secondary dropdown-toggle" title="Delete, Copy, Paste etc"
            data-bs-toggle="dropdown">
            <span>Edit</span>
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
            <li <% if (!sel) print('class="disabled"') %> >
                <a class="dropdown-item copyShape" href="#">
                    Copy Shape   &nbsp&nbsp&nbsp <%= cmdKey %>C
                </a>
            </li>
            <li <% if (!toPaste) print('class="disabled"') %> >
                <a class="dropdown-item pasteShape" href="#">
                    Paste Shape   &nbsp&nbsp&nbsp <%= cmdKey %>V
                </a>
            </li>
            <li <% if (!sel) print('class="disabled"') %> >
                <a class="dropdown-item deleteShape" href="#">
                    Delete Shape    &nbsp&nbsp&nbsp Del
                </a>
            </li>
            <li>
                <a class="dropdown-item selectAll" href="#">
                    Select All Shapes    &nbsp&nbsp <%= cmdKey %>A
                </a>
            </li>
        </ul>
    </div>
</div>

<div style="flex: auto 1 1"></div>
`,z3=`
<div class="btn-group me-2"
    <% if (omeroRoiCount > 0) { %>
        title="Load <%=omeroRoiCount%> ROIs from OMERO"
    <% } else { %>
        title="This image has no ROIs on the OMERO server"
    <% } %>>
    <button type="button" id= "loadRois" class="loadRoisBtn btn btn-success"
        <% if (omeroRoiCount == 0) { %>
            disabled='disabled'
        <% } %>
    >
        <% if (roisLoaded) {%>
            Refresh ROIs
        <% } else { %>
            Load ROIs
        <% } %>
    </button>
</div>


<div>
    <span
        id="roiPageControls"
        style="color: #999; line-height: 30px"
    >
    </span>
</div>

<div style="clear: both"></div>

<div style="padding: 0; height: 550px; overflow-y: auto; position: relative;">
    <div id="roiModalTip", style="margin-top: 10px">
        <span class='badge text-bg-primary'>
            <% if (rotated) { %>
                Warning
            <% } else { %>
                Tip
            <% } %>
        </span>

        <p><%= tip %></p>
    </div>

    <div id="roiModalRoiList">
    <table
        style="width: 100%"
        class="table table-hover table-condensed"
    ></table>
    </div>
</div>`,R3=`
<span class="badge text-bg-secondary" style="font-size: 12px">Z: <%= theZ + 1 %></span>
<% if (theZ != origZ) { %>
    <button type="button" class="revert_theZ btn btn-success btn-xs">Revert to Z: <%= origZ + 1 %></button>
<% } %>
<span class="badge text-bg-secondary" style="font-size: 12px">T: <%= theT +1 %></span>
<% if (theT != origT) { %>
    <button type="button" class="revert_theT btn btn-success btn-xs">Revert to T: <%= origT + 1 %></button>
<% } %>
`,F3=`
<tr>
    <th></th>
    <th></th>
    <th>Z</th>
    <th>T</th>
    <th></th>
</tr>
<% _.each(rois, function(roi) { %>

<tr class="roiModalRoiItem"
        data-roiId="<%= roi.id %>"
        <% if (!roi.shapes[0].icon) { %>
            title="<%= roi.shapes[0].type %> not supported in OMERO.figure"
        <% } %>
        <% if (roi.shapes.length === 1) { %>
            data-shapeId="<%= roi.shapes[0].id %>"
            title="<%= roi.shapes[0].tooltip %>"
        <% } %>
        >
    <td>
        <% if (roi.shapes.length > 1) { %>
            <i class="toggleRoi bi bi-play-fill"></i>
        <% } %>
    </td>
    <td>
        <span class="glyphicon <% if (roi.shapes[0].icon) { %><%= roi.icon %><% } %>"></span>
    </td>

    <td style="padding-left: 0; padding-right: 0">
        <% if (roi.minZ !== undefined) { %>
            <%= roi.minZ + 1 %><% if (roi.maxZ !== roi.minZ) print("-" + (roi.maxZ + 1)); %>
        <% } %>
    </td>
    <td style="padding-left: 0; padding-right: 0">
        <% if (roi.minT !== undefined) { %>
            <%= roi.minT + 1 %><% if (roi.maxT !== roi.minT) print("-" + (roi.maxT + 1)); %>
        <% } %>
    </td>
    <td style="padding: 4px;">
        <% if (roi.shapes.length === 1 && roi.shapes[0].icon) { %>
        <button type="button" class="addOmeroShape btn btn-success btn-sm"
                title="Add Shape to image">
            Add
        </button>
        <% } %>
    </td>
</tr>

<% }) %>
`,N3=`

<% if (shapes.length > 1) { %>
    <% _.each(shapes, function(shape) { %>
    <tr class="roiModalRoiItem shape" data-shapeId="<%= shape.id %>"
        title="<%= shape.tooltip %>"
        <% if (!shape.icon) { %>title="<%= shape.type %> not supported in OMERO.figure"<% } %>
        >
        <td></td>
        <td>
            <span class="glyphicon <% if (shape.icon) { %><%= shape.icon %><% } %>"></span>
        </td>
        <td>
            <% if (shape.theZ !== undefined) { %>
                <%= shape.theZ + 1 %>
            <% } %>
        </td>
        <td>
            <% if (shape.theT !== undefined) { %>
                <%= shape.theT + 1 %>
            <% } %>
        </td>
        <td>
            <% if (shape.icon) { %>
            <button type="button" class="addOmeroShape btn btn-success btn-sm"
                    title="Add Shape to image">
                Add
            </button>
            <% } else { %>
                <span>
                    <%= shape.type %>
                </span>
            <% } %>
        </td>
    </tr>
    <% }) %>
<% } %>
`;var D3=dt.View.extend({tagName:"tbody",template:De.template(F3),shapeTemplate:De.template(N3),initialize:function(t){this.render=De.debounce(this.render),this.totalCount=t.totalCount,this.panel=t.panel,this.listenTo(this.collection,"add",this.render)},events:{"mouseover .roiModalRoiItem":"mouseoverRoiItem","mouseout .roiModalRoiItem":"mouseoutRoiItem","click .roiModalRoiItem":"clickRoiItem","click .addOmeroShape":"addOmeroShape"},roiIcons:{Rectangle:"rect-icon",Ellipse:"ellipse-icon",Line:"line-icon",Arrow:"arrow-icon",Polygon:"polygon-icon",Point:"point-icon",Label:"text-icon",Polyline:"polyline-icon"},addOmeroShape:function(t){for(var e=A(t.target);!e.hasClass("roiModalRoiItem");)e=e.parent();if(e.attr("data-shapeId")){var n=parseInt(e.attr("data-shapeId"),10),i=this.collection.getShape(n),r=i.toJSON(),s=[r];this.collection.trigger("shape_add",s.reverse())}},removeShapes:function(t){var e=this.collection.get(t).toJSON();e.shapes.forEach(n=>{A(".roiModalRoiItem[data-shapeId='"+n.id+"']",this.$el).remove()})},renderShapes:function(t){var e=this.collection.get(t),n=e.shapes.map((function(r){var s=r.toJSON();return s.tooltip=this.getTooltip(s),s.icon=this.roiIcons[s.type],s}).bind(this)),i=this.shapeTemplate({shapes:n});A(".roiModalRoiItem[data-roiId='"+t+"']",this.$el).after(i)},clickRoiItem:function(t){for(var e=A(t.target);!e.hasClass("roiModalRoiItem");)e=e.parent();if(e.attr("data-shapeId")){var n=parseInt(e.attr("data-shapeId"),10),i=this.collection.getShape(n),r=i.toJSON();this.collection.trigger("shape_click",[r])}else{var s=parseInt(e.attr("data-roiId"),10),o=A(".toggleRoi",e).toggleClass("rotate90");o.hasClass("rotate90")?this.renderShapes(s):this.removeShapes(s)}},mouseoverRoiItem:function(t){for(var e=A(t.target);!e.hasClass("roiModalRoiItem");)e=e.parent();var n=parseInt(e.attr("data-shapeId"),10);this.collection.selectShape(n)},mouseoutRoiItem:function(t){this.collection.selectShape()},getTooltip:function(t){var e=[];return t.type==="Rectangle"?e=["x","y","width","height"]:t.type==="Ellipse"?e=["x","y","radiusX","radiusY"]:(t.type==="Line"||t.type=="Arrow")&&(e=["x1","y1","x2","y2"]),e=e.map(function(n){return n+": "+t[n]}),"ID: "+t.id+" "+e.join(" ")},render:function(){var t=this.collection;this.newPlaneCount=0;var e=t.map((function(i){var r={id:i.get("id"),shapes:[]},s,o=0,l,h=0;if(i.shapes&&i.shapes.length>0)r.shapes=i.shapes.map((function(p){var m=p.convertOMEROShape();return m.icon=this.roiIcons[m.type],m.theZ!==void 0&&(l===void 0?l=m.theZ:l=Math.min(l,m.theZ),h=Math.max(h,m.theZ)),m.theT!==void 0&&(s===void 0?s=m.theT:s=Math.min(s,m.theT),o=Math.max(o,m.theT)),m.tooltip=this.getTooltip(m),m}).bind(this));else return;return r.type=r.shapes[0].type,r.icon=r.shapes[0].icon,r.minZ=l,r.maxZ=h,r.minT=s,r.maxT=o,r}).bind(this));e=e.filter(function(i){return i});var n=this.template({rois:e,showLoadMore:this.totalCount>this.collection.length,totalCount:this.totalCount,count:this.collection.length});return this.$el.html(n),this}});const mh={start:"bi-text-left",middle:"bi-text-center",end:"bi-text-right"},L3=dt.View.extend({template:De.template(M3),roi_zt_buttons_template:De.template(R3),sidebar_template:De.template(z3),el:A("#roiModal"),model:Oi,TEMP_SHAPE_ID:-1234,omeroRoiCount:0,roisLoaded:!1,roisPageSize:500,roisPage:0,initialize:function(){var t=this;this.Rois=new C3,this.listenTo(this.Rois,"change:selection",this.showTempShape),this.listenTo(this.Rois,"shape_add",this.addShapeFromOmero),this.listenTo(this.Rois,"shape_click",this.showShapePlane);var e=document.getElementById("body");Ps(e).bind("backspace",function(n,i){if(!t.$el.is(":visible"))return!0;var r=document.getElementById("label-text");return r===document.activeElement?!0:(t.deleteShapes(n),!1)}),Ps(e).bind("del",function(n,i){if(!t.$el.is(":visible"))return!0;var r=document.getElementById("label-text");return r===document.activeElement?!0:(t.deleteShapes(n),!1)}),Ps(e).bind("mod+c",function(n,i){return t.$el.is(":visible")?(t.copyShapes(n),!1):!0}),Ps(e).bind("mod+v",function(n,i){return t.$el.is(":visible")?(t.pasteShapes(n),!1):!0}),Ps(e).bind("mod+a",function(n,i){return t.$el.is(":visible")?(t.selectAllShapes(n),!1):!0}),document.getElementById("roiModal").addEventListener("shown.bs.modal",()=>{t.m=t.model.getSelected().head().clone(),t.rotated=t.m.get("rotation")!==0||t.m.get("vertical_flip")||t.m.get("horizontal_flip"),t.realRotation=t.m.get("rotation"),t.realVFlip=t.m.get("vertical_flip")?-1:1,t.realHFlip=t.m.get("horizontal_flip")?-1:1,t.m.set("rotation",0),t.m.set("vertical_flip",!1),t.m.set("horizontal_flip",!1),t.shapeManager.setState("SELECT"),t.shapeManager.deleteAllShapes(),t.shapeManager.setInModalView(!0),t.shapeManager.setVerticalFlip(this.realVFlip),t.shapeManager.setHorizontalFlip(this.realHFlip),t.shapeManager.setTextRotation(this.realRotation);var n=t.m.get("shapes");n&&t.shapeManager.setShapesJson(n),t.shapeManager.setStrokeWidth(1),A("#roiModalRoiList table").empty(),t.roisLoaded=!1,t.shapeManager.setText(""),t.render(),t.checkForRois(),t.renderPagination()}),this.shapeManager=new ot("roi_paper",1,1),t.shapeManager.setStrokeColor("#FFFFFF"),t.shapeManager.setFillColor("#FFFFFF"),this.$roiImg=A(".roi_image",this.$el)},events:{"submit .roiModalForm":"handleRoiForm","click .shape-option .btn":"selectState","click .dropdownSelect a":"select_dropdown_option","change .line-width":"changeLineWidth","change .text-font-size":"changeFontSize","change .text-anchor":"changeTextAnchor","keyup .label-text":"labelInputKeyup","change .shape-color":"changeColor","change .fill-color":"changeFillColor","change .fill-opacity":"changeFillOpacity","change:selected .roi_paper":"shapeSelected","new:shape .roi_paper":"shapeSelected","click .copyShape":"copyShapes","click .pasteShape":"pasteShapes","click .deleteShape":"deleteShapes","click .selectAll":"selectAllShapes","click .loadRoisBtn":"loadRoisFirstPage","click .roisPrevPage":"roisPrevPage","click .roisNextPage":"roisNextPage","click .roisJumpPage":"roisJumpPage","click .revert_theZ":"revertTheZ","click .revert_theT":"revertTheT"},revertTheZ:function(){var t=this.model.getSelected().head();this.m.set("theZ",t.get("theZ")),this.renderImagePlane()},revertTheT:function(){var t=this.model.getSelected().head();this.m.set("theT",t.get("theT")),this.renderImagePlane()},checkForRois:function(){var t=BASE_WEBFIGURE_URL+"roiCount/"+this.m.get("imageId")+"/",e=A("#loadRois").attr({disabled:"disabled"});e.parent().attr("title","Checking for ROIs..."),ns(t).then(n=>{this.omeroRoiCount=n.roi,this.renderSidebar()})},loadRoisFirstPage:function(t){t.preventDefault(),A("#loadRois").prop("disabled",!0),this.roisPage=0,this.loadRois()},roisPrevPage:function(t){t.preventDefault(),this.roisPage-=1,this.loadRois()},roisNextPage:function(t){t.preventDefault(),this.roisPage+=1,this.loadRois()},roisJumpPage:function(t){t.preventDefault();var e=A(t.target).data("page");isNaN(e)||(this.roisPage=parseInt(e),this.loadRois())},loadRois:function(){var t=this.m.get("imageId"),n=BASE_OMEROWEB_URL+"api/v0/m/rois/"+"?image="+t+"&limit="+this.roisPageSize+"&offset="+this.roisPageSize*this.roisPage;ns(n).then(i=>{this.Rois.set(i.data),A("#loadRois").prop("disabled",!1),A("#roiModalRoiList table").empty(),this.roisLoaded=!0,this.renderSidebar(),A("#roiModalTip").hide();var r=new D3({collection:this.Rois,panel:this.m,totalCount:this.omeroRoiCount});A("#roiModalRoiList table").append(r.el),r.render(),this.renderPagination()})},showShapePlane:function(t){var e=t[0];if(e){var n={};e.theZ!==void 0&&(n.theZ=e.theZ),e.theT!==void 0&&(n.theT=e.theT),this.m.set(n),this.renderImagePlane()}},addShapeFromOmero:function(t){var e=t.length==1?[t[0]]:t,n;this.shapeManager.deleteShapesByIds([this.TEMP_SHAPE_ID]);var i=this.m.getViewportAsRect();e=e.map(r=>r.type=="Label"?this.shapeManager.convertOmeroLabelToFigureText(r):r),n=this.shapeManager.pasteShapesJson(e,i),n||alert("Couldn't add shape outside of current view. Try zooming out.")},showTempShape:function(t){const e=t[0];if(this.shapeManager.deleteShapesByIds([this.TEMP_SHAPE_ID]),e){var n=this.m.getViewportAsRect(),i=e;e.type=="Label"&&(i=this.shapeManager.convertOmeroLabelToFigureText(e)),i.id=this.TEMP_SHAPE_ID,this.shapeManager.addShapeJson(i,n)}},copyShapes:function(t){t.preventDefault();var e=this.shapeManager.getSelectedShapesJson();e.length>0&&this.model.set("clipboard",{SHAPES:e}),this.renderToolbar()},pasteShapes:function(t){t.preventDefault();var e=this.model.get("clipboard");if(e.SHAPES)e=e.SHAPES;else if(e.CROP){var n=A(".roi_toolbar .shape-color span:first",this.$el).attr("data-color"),i=A(".roi_toolbar .fill-color span:first",this.$el).attr("data-color"),r=A(".roi_toolbar .fill-opacity span:first",this.$el).attr("data-fill-opacity"),s=A(".roi_toolbar .line-width span:first",this.$el).attr("data-line-width"),o=e.CROP;e=[{type:"Rectangle",x:o.x,y:o.y,width:o.width,height:o.height,strokeColor:"#"+n,fillColor:"#"+i,fillOpacity:r,lineWidth:s}]}else return;var l=this.m.getViewportAsRect(),h=this.shapeManager.pasteShapesJson(e,l);h||this.renderSidebarWarning("Could not paste ROI outside viewport.")},deleteShapes:function(t){t.preventDefault(),this.shapeManager.deleteSelectedShapes()},handleRoiForm:function(t){t.preventDefault(),this.shapeManager.setInModalView(!1);var e=this.shapeManager.getShapesJson();e=e.filter((function(r){return r.type==="Text"&&(r.text===null||r.text.trim()==="")?!1:r.id!==this.TEMP_SHAPE_ID}).bind(this));var n=this.m.get("theZ"),i=this.m.get("theT");return this.model.getSelected().forEach(function(r){r.save({shapes:e,theZ:n,theT:i})}),$r("roiModal"),!1},shapeSelected:function(){this.renderToolbar()},changeLineWidth:function(t){var e=A("span:first",t.target).attr("data-line-width");e=parseFloat(e,10),this.shapeManager.setStrokeWidth(e)},changeFontSize:function(t){var e=A("span:first",t.target).attr("data-font-size");e=parseFloat(e,10),this.shapeManager.setFontSize(e)},changeTextAnchor:function(t){var e=A("span:first",t.target).attr("data-text-anchor");this.shapeManager.setTextAnchor(e)},labelInputKeyup:function(t){var e=t.target.value;this.shapeManager.setText(e)},changeColor:function(t){var e=A("span:first",t.target).attr("data-color");console.log("Changing color to "+e),this.shapeManager.setStrokeColor("#"+e)},changeFillColor:function(t){var e=A("span:first",t.target).attr("data-color");this.shapeManager.setFillColor("#"+e)},changeFillOpacity:function(t){var e=A("span:first",t.target).attr("data-fill-opacity");e=parseFloat(e,10).toFixed(1),this.shapeManager.setFillOpacity(e)},select_dropdown_option:function(t){t.preventDefault();var e=A(t.target),n=A("span",e.closest("li")),i=n.parent().parent(),r=A("button.dropdown-toggle",i.parent().parent());if(n=n.clone(),console.log(n),n.hasClass("colorpickerOption")){var s=n.attr("data-color");xl.show({color:s,success:function(o){n.css({"background-color":o,"background-image":"none"}),o=o.replace("#",""),n.attr("data-color",o),A("span:first",r).replaceWith(n),r.trigger("change")}})}else A("span:first",r).replaceWith(n),n.prop("title")&&r.prop("title",n.prop("title")),r.trigger("change")},selectAllShapes:function(t){t.preventDefault(),this.shapeManager.selectAllShapes()},selectState:function(t){var e=A(t.target),n=e.attr("data-state");n===void 0&&(n=e.parent().attr("data-state")),this.shapeManager.setState(n),this.shapeManager.getSelectedShapes().length==0&&this.shapeManager.setText("Text"),this.renderToolbar()},enableSubmit:function(t){var e=A('button[type="submit"]',this.$el);t?(e.prop("disabled",!1),e.prop("title","Crop selected images to chosen region")):(e.prop("disabled","disabled"),e.prop("title","No valid region selected"))},renderToolbar:function(){let t=this.shapeManager.getSelectedShapesJson(),e=t.filter(V=>V.type==="Text");var n=t.length>0,i=this.shapeManager.getState(),r=this.shapeManager.getStrokeWidth(),s=this.shapeManager.getStrokeColor(),o=this.shapeManager.getFillColor(),l=this.shapeManager.getFillOpacity(),h=this.zoom,p=this.model.get("clipboard"),m=navigator.platform.toUpperCase().indexOf("WIN")>-1,y=[.25,.5,.75,1,2,3,4,5,7,10,15,20,30],E=["0","0.1","0.2","0.3","0.4","0.5","0.6","0.7","0.8","0.9","1"],C=this.shapeManager.getFontSize(),N=this.shapeManager.getTextAnchor(),F=[6,8,10,12,14,18,21,24,36,48],X=e.length>0?this.shapeManager.getText():"";(X===!1||X===void 0)&&(X=""),s=s?s.replace("#",""):"FFFFFF",o=o?o.replace("#",""):"FFFFFF",p=p&&(p.SHAPES||p.CROP),l=l<=.01?parseInt(l):l,N=N in mh?N:"start";var G={state:i,lineWidths:y,lineWidth:r,color:s,fillColor:o,textAnchor:N,textAnchorIcon:mh[N],opacities:E,opacity:l,sel:n,cmdKey:m?"Ctrl+":"",toPaste:p,zoom:parseInt(h*100,10),omeroRoiCount:this.omeroRoiCount,roisLoaded:this.roisLoaded,fontSizes:F,fontSize:C,textControlsEnabled:e.length>0||i==="TEXT",text:X};A(".roi_toolbar",this.$el).html(this.template(G))},renderSidebarWarning:function(t){var e="<p><span class='label label-warning'>Warning</span> "+t+"</p>";A("#roiModalTip").html(e).show().fadeOut(1e4)},renderSidebar:function(){var t;this.rotated?t="This image panel is rotated or flipped in the figure, but this ROI editor can't work with rotated/flipped images. The image is displayed here <b>without</b> rotation/flipping, but the ROIs you add will be applied correctly to the image panel in the figure.":t="If you copy a region from the Crop dialog (under the 'Preview' tab), you can paste it here to create a new Rectangle.";var e={omeroRoiCount:this.omeroRoiCount,roisLoaded:this.roisLoaded,tip:t,rotated:this.rotated};A("#roiModalSidebar",this.$el).html(this.sidebar_template(e))},renderImagePlane:function(){this.m.get_img_src().then(i=>this.$roiImg.attr("src",i));var t=this.model.getSelected().head(),e={theZ:this.m.get("theZ"),theT:this.m.get("theT"),origZ:t.get("theZ"),origT:t.get("theT")},n=this.roi_zt_buttons_template(e);A("#roi_zt_buttons").html(n)},renderPagination:function(){if(!this.roisLoaded){A("#roiPageControls").html("").hide();return}var t=Math.ceil(this.omeroRoiCount/this.roisPageSize),e=`<span>${this.omeroRoiCount} ROIs`;t>1?e+=`: page ${this.roisPage+1}/${t}</span>
                <div class="btn-group" style="float:right">
                    <button title="Load previous page of ROIs" ${this.roisPage===0?"disabled='disabled'":""}
                        type="button" class="btn btn-default btn-sm roisPrevPage">
                        Prev
                    </button>
                    <button title="Load next page of ROIs" ${this.roisPage+1>=t?"disabled='disabled'":""}
                        type="button" class="btn btn-default btn-sm roisNextPage">
                        Next
                    </button>
                    <button type="button" class="btn btn-default btn-sm dropdown-toggle" title="Select page" data-bs-toggle="dropdown">
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu">
                    ${De.range(t).map(n=>`<li>
                        <a class="roisJumpPage" href="#" data-page="${n}">
                            <span class="glyphicon glyphicon-ok" ${this.roisPage!==n?"style='visibility:hidden'":""}></span>
                            Page ${n+1}
                        </a>
                        </li>`).join(`
`)}
                    </ul>
                </div>`:e+="</span>",A("#roiPageControls").html(e).show()},render:function(){var t=550,e=t,n=t,i=this.m.get("width")/this.m.get("height"),r=1;i<=1?(r=t/this.m.get("height"),n=t,e=t*i):(r=t/this.m.get("width"),e=t,n=t/i);var s=this.m.get_vp_img_css(this.m.get("zoom"),e,n);this.$roiImg.css(s);var o=this.m.get_vp_full_plane_css(this.m.get("zoom"),e,n),l=this.m.get("orig_width"),h=this.m.get("orig_height"),p=o.width/l;this.shapeManager._orig_width=l,this.shapeManager._orig_height=h,this.shapeManager.setZoom(p*100),this.shapeManager.setShapeScalingFraction(r),A("#roi_paper").css(o),A("#roiViewer").css({width:e+"px",height:n+"px"}),this.renderImagePlane(),this.renderToolbar(),this.renderSidebar()}});function rd(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let co=rd();function P3(t){co=t}const sd=/[&<>"']/,$3=new RegExp(sd.source,"g"),od=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,B3=new RegExp(od.source,"g"),W3={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},_h=t=>W3[t];function Zn(t,e){if(e){if(sd.test(t))return t.replace($3,_h)}else if(od.test(t))return t.replace(B3,_h);return t}const H3=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function ad(t){return t.replace(H3,(e,n)=>(n=n.toLowerCase(),n==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}const V3=/(^|[^\[])\^/g;function tn(t,e){t=typeof t=="string"?t:t.source,e=e||"";const n={replace:(i,r)=>(r=r.source||r,r=r.replace(V3,"$1"),t=t.replace(i,r),n),getRegex:()=>new RegExp(t,e)};return n}const U3=/[^\w:]/g,j3=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function vh(t,e,n){if(t){let i;try{i=decodeURIComponent(ad(n)).replace(U3,"").toLowerCase()}catch{return null}if(i.indexOf("javascript:")===0||i.indexOf("vbscript:")===0||i.indexOf("data:")===0)return null}e&&!j3.test(n)&&(n=Z3(e,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const Aa={},Y3=/^[^:]+:\/*[^/]*$/,X3=/^([^:]+:)[\s\S]*$/,q3=/^([^:]+:\/*[^/]*)[\s\S]*$/;function Z3(t,e){Aa[" "+t]||(Y3.test(t)?Aa[" "+t]=t+"/":Aa[" "+t]=Wa(t,"/",!0)),t=Aa[" "+t];const n=t.indexOf(":")===-1;return e.substring(0,2)==="//"?n?e:t.replace(X3,"$1")+e:e.charAt(0)==="/"?n?e:t.replace(q3,"$1")+e:t+e}const il={exec:function(){}};function fr(t){let e=1,n,i;for(;e<arguments.length;e++){n=arguments[e];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}function yh(t,e){const n=t.replace(/\|/g,(s,o,l)=>{let h=!1,p=o;for(;--p>=0&&l[p]==="\\";)h=!h;return h?"|":" |"}),i=n.split(/ \|/);let r=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(/\\\|/g,"|");return i}function Wa(t,e,n){const i=t.length;if(i===0)return"";let r=0;for(;r<i;){const s=t.charAt(i-r-1);if(s===e&&!n)r++;else if(s!==e&&n)r++;else break}return t.slice(0,i-r)}function G3(t,e){if(t.indexOf(e[1])===-1)return-1;const n=t.length;let i=0,r=0;for(;r<n;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])i++;else if(t[r]===e[1]&&(i--,i<0))return r;return-1}function ld(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function bh(t,e){if(e<1)return"";let n="";for(;e>1;)e&1&&(n+=t),e>>=1,t+=t;return n+t}function wh(t,e,n,i){const r=e.href,s=e.title?Zn(e.title):null,o=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){i.state.inLink=!0;const l={type:"link",raw:n,href:r,title:s,text:o,tokens:i.inlineTokens(o)};return i.state.inLink=!1,l}return{type:"image",raw:n,href:r,title:s,text:Zn(o)}}function K3(t,e){const n=t.match(/^(\s+)(?:```)/);if(n===null)return e;const i=n[1];return e.split(`
`).map(r=>{const s=r.match(/^\s+/);if(s===null)return r;const[o]=s;return o.length>=i.length?r.slice(i.length):r}).join(`
`)}class $2{constructor(e){this.options=e||co}space(e){const n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){const n=this.rules.block.code.exec(e);if(n){const i=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?i:Wa(i,`
`)}}}fences(e){const n=this.rules.block.fences.exec(e);if(n){const i=n[0],r=K3(i,n[3]||"");return{type:"code",raw:i,lang:n[2]?n[2].trim().replace(this.rules.inline._escapes,"$1"):n[2],text:r}}}heading(e){const n=this.rules.block.heading.exec(e);if(n){let i=n[2].trim();if(/#$/.test(i)){const r=Wa(i,"#");(this.options.pedantic||!r||/ $/.test(r))&&(i=r.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:n[0]}}blockquote(e){const n=this.rules.block.blockquote.exec(e);if(n){const i=n[0].replace(/^ *>[ \t]?/gm,""),r=this.lexer.state.top;this.lexer.state.top=!0;const s=this.lexer.blockTokens(i);return this.lexer.state.top=r,{type:"blockquote",raw:n[0],tokens:s,text:i}}}list(e){let n=this.rules.block.list.exec(e);if(n){let i,r,s,o,l,h,p,m,y,E,C,N,F=n[1].trim();const X=F.length>1,G={type:"list",raw:"",ordered:X,start:X?+F.slice(0,-1):"",loose:!1,items:[]};F=X?`\\d{1,9}\\${F.slice(-1)}`:`\\${F}`,this.options.pedantic&&(F=X?F:"[*+-]");const V=new RegExp(`^( {0,3}${F})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;e&&(N=!1,!(!(n=V.exec(e))||this.rules.block.hr.test(e)));){if(i=n[0],e=e.substring(i.length),m=n[2].split(`
`,1)[0].replace(/^\t+/,ae=>" ".repeat(3*ae.length)),y=e.split(`
`,1)[0],this.options.pedantic?(o=2,C=m.trimLeft()):(o=n[2].search(/[^ ]/),o=o>4?1:o,C=m.slice(o),o+=n[1].length),h=!1,!m&&/^ *$/.test(y)&&(i+=y+`
`,e=e.substring(y.length+1),N=!0),!N){const ae=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),de=new RegExp(`^ {0,${Math.min(3,o-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),g=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:\`\`\`|~~~)`),H=new RegExp(`^ {0,${Math.min(3,o-1)}}#`);for(;e&&(E=e.split(`
`,1)[0],y=E,this.options.pedantic&&(y=y.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(g.test(y)||H.test(y)||ae.test(y)||de.test(e)));){if(y.search(/[^ ]/)>=o||!y.trim())C+=`
`+y.slice(o);else{if(h||m.search(/[^ ]/)>=4||g.test(m)||H.test(m)||de.test(m))break;C+=`
`+y}!h&&!y.trim()&&(h=!0),i+=E+`
`,e=e.substring(E.length+1),m=y.slice(o)}}G.loose||(p?G.loose=!0:/\n *\n *$/.test(i)&&(p=!0)),this.options.gfm&&(r=/^\[[ xX]\] /.exec(C),r&&(s=r[0]!=="[ ] ",C=C.replace(/^\[[ xX]\] +/,""))),G.items.push({type:"list_item",raw:i,task:!!r,checked:s,loose:!1,text:C}),G.raw+=i}G.items[G.items.length-1].raw=i.trimRight(),G.items[G.items.length-1].text=C.trimRight(),G.raw=G.raw.trimRight();const K=G.items.length;for(l=0;l<K;l++)if(this.lexer.state.top=!1,G.items[l].tokens=this.lexer.blockTokens(G.items[l].text,[]),!G.loose){const ae=G.items[l].tokens.filter(g=>g.type==="space"),de=ae.length>0&&ae.some(g=>/\n.*\n/.test(g.raw));G.loose=de}if(G.loose)for(l=0;l<K;l++)G.items[l].loose=!0;return G}}html(e){const n=this.rules.block.html.exec(e);if(n){const i={type:"html",raw:n[0],pre:!this.options.sanitizer&&(n[1]==="pre"||n[1]==="script"||n[1]==="style"),text:n[0]};if(this.options.sanitize){const r=this.options.sanitizer?this.options.sanitizer(n[0]):Zn(n[0]);i.type="paragraph",i.text=r,i.tokens=this.lexer.inline(r)}return i}}def(e){const n=this.rules.block.def.exec(e);if(n){const i=n[1].toLowerCase().replace(/\s+/g," "),r=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",s=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline._escapes,"$1"):n[3];return{type:"def",tag:i,raw:n[0],href:r,title:s}}}table(e){const n=this.rules.block.table.exec(e);if(n){const i={type:"table",header:yh(n[1]).map(r=>({text:r})),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(i.header.length===i.align.length){i.raw=n[0];let r=i.align.length,s,o,l,h;for(s=0;s<r;s++)/^ *-+: *$/.test(i.align[s])?i.align[s]="right":/^ *:-+: *$/.test(i.align[s])?i.align[s]="center":/^ *:-+ *$/.test(i.align[s])?i.align[s]="left":i.align[s]=null;for(r=i.rows.length,s=0;s<r;s++)i.rows[s]=yh(i.rows[s],i.header.length).map(p=>({text:p}));for(r=i.header.length,o=0;o<r;o++)i.header[o].tokens=this.lexer.inline(i.header[o].text);for(r=i.rows.length,o=0;o<r;o++)for(h=i.rows[o],l=0;l<h.length;l++)h[l].tokens=this.lexer.inline(h[l].text);return i}}}lheading(e){const n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){const n=this.rules.block.paragraph.exec(e);if(n){const i=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){const n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:Zn(n[1])}}tag(e){const n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):Zn(n[0]):n[0]}}link(e){const n=this.rules.inline.link.exec(e);if(n){const i=n[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const o=Wa(i.slice(0,-1),"\\");if((i.length-o.length)%2===0)return}else{const o=G3(n[2],"()");if(o>-1){const h=(n[0].indexOf("!")===0?5:4)+n[1].length+o;n[2]=n[2].substring(0,o),n[0]=n[0].substring(0,h).trim(),n[3]=""}}let r=n[2],s="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);o&&(r=o[1],s=o[3])}else s=n[3]?n[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(i)?r=r.slice(1):r=r.slice(1,-1)),wh(n,{href:r&&r.replace(this.rules.inline._escapes,"$1"),title:s&&s.replace(this.rules.inline._escapes,"$1")},n[0],this.lexer)}}reflink(e,n){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let r=(i[2]||i[1]).replace(/\s+/g," ");if(r=n[r.toLowerCase()],!r){const s=i[0].charAt(0);return{type:"text",raw:s,text:s}}return wh(i,r,i[0],this.lexer)}}emStrong(e,n,i=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!r||r[3]&&i.match(/[\p{L}\p{N}]/u))return;const s=r[1]||r[2]||"";if(!s||s&&(i===""||this.rules.inline.punctuation.exec(i))){const o=r[0].length-1;let l,h,p=o,m=0;const y=r[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(y.lastIndex=0,n=n.slice(-1*e.length+o);(r=y.exec(n))!=null;){if(l=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!l)continue;if(h=l.length,r[3]||r[4]){p+=h;continue}else if((r[5]||r[6])&&o%3&&!((o+h)%3)){m+=h;continue}if(p-=h,p>0)continue;h=Math.min(h,h+p+m);const E=e.slice(0,o+r.index+(r[0].length-l.length)+h);if(Math.min(o,h)%2){const N=E.slice(1,-1);return{type:"em",raw:E,text:N,tokens:this.lexer.inlineTokens(N)}}const C=E.slice(2,-2);return{type:"strong",raw:E,text:C,tokens:this.lexer.inlineTokens(C)}}}}codespan(e){const n=this.rules.inline.code.exec(e);if(n){let i=n[2].replace(/\n/g," ");const r=/[^ ]/.test(i),s=/^ /.test(i)&&/ $/.test(i);return r&&s&&(i=i.substring(1,i.length-1)),i=Zn(i,!0),{type:"codespan",raw:n[0],text:i}}}br(e){const n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){const n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e,n){const i=this.rules.inline.autolink.exec(e);if(i){let r,s;return i[2]==="@"?(r=Zn(this.options.mangle?n(i[1]):i[1]),s="mailto:"+r):(r=Zn(i[1]),s=r),{type:"link",raw:i[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}url(e,n){let i;if(i=this.rules.inline.url.exec(e)){let r,s;if(i[2]==="@")r=Zn(this.options.mangle?n(i[0]):i[0]),s="mailto:"+r;else{let o;do o=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0];while(o!==i[0]);r=Zn(i[0]),i[1]==="www."?s="http://"+i[0]:s=i[0]}return{type:"link",raw:i[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e,n){const i=this.rules.inline.text.exec(e);if(i){let r;return this.lexer.state.inRawBlock?r=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):Zn(i[0]):i[0]:r=Zn(this.options.smartypants?n(i[0]):i[0]),{type:"text",raw:i[0],text:r}}}}const _t={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:il,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};_t._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;_t._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;_t.def=tn(_t.def).replace("label",_t._label).replace("title",_t._title).getRegex();_t.bullet=/(?:[*+-]|\d{1,9}[.)])/;_t.listItemStart=tn(/^( *)(bull) */).replace("bull",_t.bullet).getRegex();_t.list=tn(_t.list).replace(/bull/g,_t.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+_t.def.source+")").getRegex();_t._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";_t._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;_t.html=tn(_t.html,"i").replace("comment",_t._comment).replace("tag",_t._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();_t.paragraph=tn(_t._paragraph).replace("hr",_t.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_t._tag).getRegex();_t.blockquote=tn(_t.blockquote).replace("paragraph",_t.paragraph).getRegex();_t.normal=fr({},_t);_t.gfm=fr({},_t.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});_t.gfm.table=tn(_t.gfm.table).replace("hr",_t.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_t._tag).getRegex();_t.gfm.paragraph=tn(_t._paragraph).replace("hr",_t.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",_t.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_t._tag).getRegex();_t.pedantic=fr({},_t.normal,{html:tn(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",_t._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:il,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:tn(_t.normal._paragraph).replace("hr",_t.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",_t.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const st={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:il,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:il,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};st._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";st.punctuation=tn(st.punctuation).replace(/punctuation/g,st._punctuation).getRegex();st.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;st.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g;st._comment=tn(_t._comment).replace("(?:-->|$)","-->").getRegex();st.emStrong.lDelim=tn(st.emStrong.lDelim).replace(/punct/g,st._punctuation).getRegex();st.emStrong.rDelimAst=tn(st.emStrong.rDelimAst,"g").replace(/punct/g,st._punctuation).getRegex();st.emStrong.rDelimUnd=tn(st.emStrong.rDelimUnd,"g").replace(/punct/g,st._punctuation).getRegex();st._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;st._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;st._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;st.autolink=tn(st.autolink).replace("scheme",st._scheme).replace("email",st._email).getRegex();st._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;st.tag=tn(st.tag).replace("comment",st._comment).replace("attribute",st._attribute).getRegex();st._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;st._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;st._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;st.link=tn(st.link).replace("label",st._label).replace("href",st._href).replace("title",st._title).getRegex();st.reflink=tn(st.reflink).replace("label",st._label).replace("ref",_t._label).getRegex();st.nolink=tn(st.nolink).replace("ref",_t._label).getRegex();st.reflinkSearch=tn(st.reflinkSearch,"g").replace("reflink",st.reflink).replace("nolink",st.nolink).getRegex();st.normal=fr({},st);st.pedantic=fr({},st.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:tn(/^!?\[(label)\]\((.*?)\)/).replace("label",st._label).getRegex(),reflink:tn(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",st._label).getRegex()});st.gfm=fr({},st.normal,{escape:tn(st.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});st.gfm.url=tn(st.gfm.url,"i").replace("email",st.gfm._extended_email).getRegex();st.breaks=fr({},st.gfm,{br:tn(st.br).replace("{2,}","*").getRegex(),text:tn(st.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function J3(t){return t.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function xh(t){let e="",n,i;const r=t.length;for(n=0;n<r;n++)i=t.charCodeAt(n),Math.random()>.5&&(i="x"+i.toString(16)),e+="&#"+i+";";return e}class Dr{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||co,this.options.tokenizer=this.options.tokenizer||new $2,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:_t.normal,inline:st.normal};this.options.pedantic?(n.block=_t.pedantic,n.inline=st.pedantic):this.options.gfm&&(n.block=_t.gfm,this.options.breaks?n.inline=st.breaks:n.inline=st.gfm),this.tokenizer.rules=n}static get rules(){return{block:_t,inline:st}}static lex(e,n){return new Dr(n).lex(e)}static lexInline(e,n){return new Dr(n).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);let n;for(;n=this.inlineQueue.shift();)this.inlineTokens(n.src,n.tokens);return this.tokens}blockTokens(e,n=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(l,h,p)=>h+"    ".repeat(p.length));let i,r,s,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(l=>(i=l.call({lexer:this},e,n))?(e=e.substring(i.raw.length),n.push(i),!0):!1))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),i.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),r=n[n.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+i.raw,r.text+=`
`+i.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(i);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),r=n[n.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+i.raw,r.text+=`
`+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),n.push(i);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let l=1/0;const h=e.slice(1);let p;this.options.extensions.startBlock.forEach(function(m){p=m.call({lexer:this},h),typeof p=="number"&&p>=0&&(l=Math.min(l,p))}),l<1/0&&l>=0&&(s=e.substring(0,l+1))}if(this.state.top&&(i=this.tokenizer.paragraph(s))){r=n[n.length-1],o&&r.type==="paragraph"?(r.raw+=`
`+i.raw,r.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(i),o=s.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),r=n[n.length-1],r&&r.type==="text"?(r.raw+=`
`+i.raw,r.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(i);continue}if(e){const l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let i,r,s,o=e,l,h,p;if(this.tokens.links){const m=Object.keys(this.tokens.links);if(m.length>0)for(;(l=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)m.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,l.index)+"["+bh("a",l[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(l=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,l.index)+"["+bh("a",l[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(l=this.tokenizer.rules.inline.escapedEmSt.exec(o))!=null;)o=o.slice(0,l.index+l[0].length-2)+"++"+o.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;e;)if(h||(p=""),h=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(m=>(i=m.call({lexer:this},e,n))?(e=e.substring(i.raw.length),n.push(i),!0):!1))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),r=n[n.length-1],r&&i.type==="text"&&r.type==="text"?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),r=n[n.length-1],r&&i.type==="text"&&r.type==="text"?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(i=this.tokenizer.emStrong(e,o,p)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.autolink(e,xh)){e=e.substring(i.raw.length),n.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e,xh))){e=e.substring(i.raw.length),n.push(i);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let m=1/0;const y=e.slice(1);let E;this.options.extensions.startInline.forEach(function(C){E=C.call({lexer:this},y),typeof E=="number"&&E>=0&&(m=Math.min(m,E))}),m<1/0&&m>=0&&(s=e.substring(0,m+1))}if(i=this.tokenizer.inlineText(s,J3)){e=e.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(p=i.raw.slice(-1)),h=!0,r=n[n.length-1],r&&r.type==="text"?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(e){const m="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(m);break}else throw new Error(m)}}return n}}class B2{constructor(e){this.options=e||co}code(e,n,i){const r=(n||"").match(/\S*/)[0];if(this.options.highlight){const s=this.options.highlight(e,r);s!=null&&s!==e&&(i=!0,e=s)}return e=e.replace(/\n$/,"")+`
`,r?'<pre><code class="'+this.options.langPrefix+Zn(r)+'">'+(i?e:Zn(e,!0))+`</code></pre>
`:"<pre><code>"+(i?e:Zn(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e){return e}heading(e,n,i,r){if(this.options.headerIds){const s=this.options.headerPrefix+r.slug(i);return`<h${n} id="${s}">${e}</h${n}>
`}return`<h${n}>${e}</h${n}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,n,i){const r=n?"ol":"ul",s=n&&i!==1?' start="'+i+'"':"";return"<"+r+s+`>
`+e+"</"+r+`>
`}listitem(e){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>
`}table(e,n){return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+n+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,n){const i=n.header?"th":"td";return(n.align?`<${i} align="${n.align}">`:`<${i}>`)+e+`</${i}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,n,i){if(e=vh(this.options.sanitize,this.options.baseUrl,e),e===null)return i;let r='<a href="'+e+'"';return n&&(r+=' title="'+n+'"'),r+=">"+i+"</a>",r}image(e,n,i){if(e=vh(this.options.sanitize,this.options.baseUrl,e),e===null)return i;let r=`<img src="${e}" alt="${i}"`;return n&&(r+=` title="${n}"`),r+=this.options.xhtml?"/>":">",r}text(e){return e}}class cd{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,n,i){return""+i}image(e,n,i){return""+i}br(){return""}}class hd{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,n){let i=e,r=0;if(this.seen.hasOwnProperty(i)){r=this.seen[e];do r++,i=e+"-"+r;while(this.seen.hasOwnProperty(i))}return n||(this.seen[e]=r,this.seen[i]=0),i}slug(e,n={}){const i=this.serialize(e);return this.getNextSafeSlug(i,n.dryrun)}}class vr{constructor(e){this.options=e||co,this.options.renderer=this.options.renderer||new B2,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new cd,this.slugger=new hd}static parse(e,n){return new vr(n).parse(e)}static parseInline(e,n){return new vr(n).parseInline(e)}parse(e,n=!0){let i="",r,s,o,l,h,p,m,y,E,C,N,F,X,G,V,K,ae,de,g;const H=e.length;for(r=0;r<H;r++){if(C=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[C.type]&&(g=this.options.extensions.renderers[C.type].call({parser:this},C),g!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(C.type))){i+=g||"";continue}switch(C.type){case"space":continue;case"hr":{i+=this.renderer.hr();continue}case"heading":{i+=this.renderer.heading(this.parseInline(C.tokens),C.depth,ad(this.parseInline(C.tokens,this.textRenderer)),this.slugger);continue}case"code":{i+=this.renderer.code(C.text,C.lang,C.escaped);continue}case"table":{for(y="",m="",l=C.header.length,s=0;s<l;s++)m+=this.renderer.tablecell(this.parseInline(C.header[s].tokens),{header:!0,align:C.align[s]});for(y+=this.renderer.tablerow(m),E="",l=C.rows.length,s=0;s<l;s++){for(p=C.rows[s],m="",h=p.length,o=0;o<h;o++)m+=this.renderer.tablecell(this.parseInline(p[o].tokens),{header:!1,align:C.align[o]});E+=this.renderer.tablerow(m)}i+=this.renderer.table(y,E);continue}case"blockquote":{E=this.parse(C.tokens),i+=this.renderer.blockquote(E);continue}case"list":{for(N=C.ordered,F=C.start,X=C.loose,l=C.items.length,E="",s=0;s<l;s++)V=C.items[s],K=V.checked,ae=V.task,G="",V.task&&(de=this.renderer.checkbox(K),X?V.tokens.length>0&&V.tokens[0].type==="paragraph"?(V.tokens[0].text=de+" "+V.tokens[0].text,V.tokens[0].tokens&&V.tokens[0].tokens.length>0&&V.tokens[0].tokens[0].type==="text"&&(V.tokens[0].tokens[0].text=de+" "+V.tokens[0].tokens[0].text)):V.tokens.unshift({type:"text",text:de}):G+=de),G+=this.parse(V.tokens,X),E+=this.renderer.listitem(G,ae,K);i+=this.renderer.list(E,N,F);continue}case"html":{i+=this.renderer.html(C.text);continue}case"paragraph":{i+=this.renderer.paragraph(this.parseInline(C.tokens));continue}case"text":{for(E=C.tokens?this.parseInline(C.tokens):C.text;r+1<H&&e[r+1].type==="text";)C=e[++r],E+=`
`+(C.tokens?this.parseInline(C.tokens):C.text);i+=n?this.renderer.paragraph(E):E;continue}default:{const re='Token with "'+C.type+'" type was not found.';if(this.options.silent){console.error(re);return}else throw new Error(re)}}}return i}parseInline(e,n){n=n||this.renderer;let i="",r,s,o;const l=e.length;for(r=0;r<l;r++){if(s=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]&&(o=this.options.extensions.renderers[s.type].call({parser:this},s),o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type))){i+=o||"";continue}switch(s.type){case"escape":{i+=n.text(s.text);break}case"html":{i+=n.html(s.text);break}case"link":{i+=n.link(s.href,s.title,this.parseInline(s.tokens,n));break}case"image":{i+=n.image(s.href,s.title,s.text);break}case"strong":{i+=n.strong(this.parseInline(s.tokens,n));break}case"em":{i+=n.em(this.parseInline(s.tokens,n));break}case"codespan":{i+=n.codespan(s.text);break}case"br":{i+=n.br();break}case"del":{i+=n.del(this.parseInline(s.tokens,n));break}case"text":{i+=n.text(s.text);break}default:{const h='Token with "'+s.type+'" type was not found.';if(this.options.silent){console.error(h);return}else throw new Error(h)}}}return i}}function xt(t,e,n){if(typeof t>"u"||t===null)throw new Error("marked(): input parameter is undefined or null");if(typeof t!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if(typeof e=="function"&&(n=e,e=null),e=fr({},xt.defaults,e||{}),ld(e),n){const r=e.highlight;let s;try{s=Dr.lex(t,e)}catch(h){return n(h)}const o=function(h){let p;if(!h)try{e.walkTokens&&xt.walkTokens(s,e.walkTokens),p=vr.parse(s,e)}catch(m){h=m}return e.highlight=r,h?n(h):n(null,p)};if(!r||r.length<3||(delete e.highlight,!s.length))return o();let l=0;xt.walkTokens(s,function(h){h.type==="code"&&(l++,setTimeout(()=>{r(h.text,h.lang,function(p,m){if(p)return o(p);m!=null&&m!==h.text&&(h.text=m,h.escaped=!0),l--,l===0&&o()})},0))}),l===0&&o();return}function i(r){if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+Zn(r.message+"",!0)+"</pre>";throw r}try{const r=Dr.lex(t,e);if(e.walkTokens){if(e.async)return Promise.all(xt.walkTokens(r,e.walkTokens)).then(()=>vr.parse(r,e)).catch(i);xt.walkTokens(r,e.walkTokens)}return vr.parse(r,e)}catch(r){i(r)}}xt.options=xt.setOptions=function(t){return fr(xt.defaults,t),P3(xt.defaults),xt};xt.getDefaults=rd;xt.defaults=co;xt.use=function(...t){const e=xt.defaults.extensions||{renderers:{},childTokens:{}};t.forEach(n=>{const i=fr({},n);if(i.async=xt.defaults.async||i.async,n.extensions&&(n.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if(r.renderer){const s=e.renderers[r.name];s?e.renderers[r.name]=function(...o){let l=r.renderer.apply(this,o);return l===!1&&(l=s.apply(this,o)),l}:e.renderers[r.name]=r.renderer}if(r.tokenizer){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");e[r.level]?e[r.level].unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&(r.level==="block"?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:r.level==="inline"&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),i.extensions=e),n.renderer){const r=xt.defaults.renderer||new B2;for(const s in n.renderer){const o=r[s];r[s]=(...l)=>{let h=n.renderer[s].apply(r,l);return h===!1&&(h=o.apply(r,l)),h}}i.renderer=r}if(n.tokenizer){const r=xt.defaults.tokenizer||new $2;for(const s in n.tokenizer){const o=r[s];r[s]=(...l)=>{let h=n.tokenizer[s].apply(r,l);return h===!1&&(h=o.apply(r,l)),h}}i.tokenizer=r}if(n.walkTokens){const r=xt.defaults.walkTokens;i.walkTokens=function(s){let o=[];return o.push(n.walkTokens.call(this,s)),r&&(o=o.concat(r.call(this,s))),o}}xt.setOptions(i)})};xt.walkTokens=function(t,e){let n=[];for(const i of t)switch(n=n.concat(e.call(xt,i)),i.type){case"table":{for(const r of i.header)n=n.concat(xt.walkTokens(r.tokens,e));for(const r of i.rows)for(const s of r)n=n.concat(xt.walkTokens(s.tokens,e));break}case"list":{n=n.concat(xt.walkTokens(i.items,e));break}default:xt.defaults.extensions&&xt.defaults.extensions.childTokens&&xt.defaults.extensions.childTokens[i.type]?xt.defaults.extensions.childTokens[i.type].forEach(function(r){n=n.concat(xt.walkTokens(i[r],e))}):i.tokens&&(n=n.concat(xt.walkTokens(i.tokens,e)))}return n};xt.parseInline=function(t,e){if(typeof t>"u"||t===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof t!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");e=fr({},xt.defaults,e||{}),ld(e);try{const n=Dr.lexInline(t,e);return e.walkTokens&&xt.walkTokens(n,e.walkTokens),vr.parseInline(n,e)}catch(n){if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+Zn(n.message+"",!0)+"</pre>";throw n}};xt.Parser=vr;xt.parser=vr.parse;xt.Renderer=B2;xt.TextRenderer=cd;xt.Lexer=Dr;xt.lexer=Dr.lex;xt.Tokenizer=$2;xt.Slugger=hd;xt.parse=xt;xt.options;xt.setOptions;xt.use;xt.walkTokens;xt.parseInline;const ud=xt;vr.parse;Dr.lex;/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:fd,setPrototypeOf:Eh,isFrozen:Q3,getPrototypeOf:ey,getOwnPropertyDescriptor:ty}=Object;let{freeze:mi,seal:Ji,create:dd}=Object,{apply:V1,construct:U1}=typeof Reflect<"u"&&Reflect;mi||(mi=function(e){return e});Ji||(Ji=function(e){return e});V1||(V1=function(e,n,i){return e.apply(n,i)});U1||(U1=function(e,n){return new e(...n)});const Ia=_i(Array.prototype.forEach),ny=_i(Array.prototype.lastIndexOf),Sh=_i(Array.prototype.pop),_o=_i(Array.prototype.push),iy=_i(Array.prototype.splice),Ha=_i(String.prototype.toLowerCase),s1=_i(String.prototype.toString),Th=_i(String.prototype.match),vo=_i(String.prototype.replace),ry=_i(String.prototype.indexOf),sy=_i(String.prototype.trim),ar=_i(Object.prototype.hasOwnProperty),ui=_i(RegExp.prototype.test),yo=oy(TypeError);function _i(t){return function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return V1(t,e,i)}}function oy(t){return function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return U1(t,n)}}function zt(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ha;Eh&&Eh(t,null);let i=e.length;for(;i--;){let r=e[i];if(typeof r=="string"){const s=n(r);s!==r&&(Q3(e)||(e[i]=s),r=s)}t[r]=!0}return t}function ay(t){for(let e=0;e<t.length;e++)ar(t,e)||(t[e]=null);return t}function gs(t){const e=dd(null);for(const[n,i]of fd(t))ar(t,n)&&(Array.isArray(i)?e[n]=ay(i):i&&typeof i=="object"&&i.constructor===Object?e[n]=gs(i):e[n]=i);return e}function bo(t,e){for(;t!==null;){const i=ty(t,e);if(i){if(i.get)return _i(i.get);if(typeof i.value=="function")return _i(i.value)}t=ey(t)}function n(){return null}return n}const Ch=mi(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),o1=mi(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),a1=mi(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ly=mi(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),l1=mi(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),cy=mi(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),kh=mi(["#text"]),Ah=mi(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),c1=mi(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ih=mi(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Oa=mi(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),hy=Ji(/\{\{[\w\W]*|[\w\W]*\}\}/gm),uy=Ji(/<%[\w\W]*|[\w\W]*%>/gm),fy=Ji(/\$\{[\w\W]*/gm),dy=Ji(/^data-[\-\w.\u00B7-\uFFFF]+$/),py=Ji(/^aria-[\-\w]+$/),pd=Ji(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),gy=Ji(/^(?:\w+script|data):/i),my=Ji(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),gd=Ji(/^html$/i),_y=Ji(/^[a-z][.\w]*(-[.\w]+)+$/i);var Oh=Object.freeze({__proto__:null,ARIA_ATTR:py,ATTR_WHITESPACE:my,CUSTOM_ELEMENT:_y,DATA_ATTR:dy,DOCTYPE_NAME:gd,ERB_EXPR:uy,IS_ALLOWED_URI:pd,IS_SCRIPT_OR_DATA:gy,MUSTACHE_EXPR:hy,TMPLIT_EXPR:fy});const wo={element:1,text:3,progressingInstruction:7,comment:8,document:9},vy=function(){return typeof window>"u"?null:window},yy=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const r="data-tt-policy-suffix";n&&n.hasAttribute(r)&&(i=n.getAttribute(r));const s="dompurify"+(i?"#"+i:"");try{return e.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},Mh=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function md(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:vy();const e=nt=>md(nt);if(e.version="3.2.4",e.removed=[],!t||!t.document||t.document.nodeType!==wo.document||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const i=n,r=i.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:l,Element:h,NodeFilter:p,NamedNodeMap:m=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:y,DOMParser:E,trustedTypes:C}=t,N=h.prototype,F=bo(N,"cloneNode"),X=bo(N,"remove"),G=bo(N,"nextSibling"),V=bo(N,"childNodes"),K=bo(N,"parentNode");if(typeof o=="function"){const nt=n.createElement("template");nt.content&&nt.content.ownerDocument&&(n=nt.content.ownerDocument)}let ae,de="";const{implementation:g,createNodeIterator:H,createDocumentFragment:re,getElementsByTagName:_e}=n,{importNode:Te}=i;let ye=Mh();e.isSupported=typeof fd=="function"&&typeof K=="function"&&g&&g.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:le,ERB_EXPR:Pe,TMPLIT_EXPR:Le,DATA_ATTR:Ze,ARIA_ATTR:je,IS_SCRIPT_OR_DATA:Je,ATTR_WHITESPACE:Ye,CUSTOM_ELEMENT:it}=Oh;let{IS_ALLOWED_URI:ft}=Oh,z=null;const M=zt({},[...Ch,...o1,...a1,...l1,...kh]);let k=null;const P=zt({},[...Ah,...c1,...Ih,...Oa]);let B=Object.seal(dd(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),te=null,ee=null,ge=!0,ce=!0,Se=!1,Ve=!0,Ge=!1,rt=!0,S=!1,R=!1,$=!1,Q=!1,ue=!1,fe=!1,Me=!0,tt=!1;const Ke="user-content-";let at=!0,mt=!1,lt={},It=null;const sn=zt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ln=null;const Ft=zt({},["audio","video","img","source","image","track"]);let Dt=null;const un=zt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),fn="http://www.w3.org/1998/Math/MathML",kn="http://www.w3.org/2000/svg",Lt="http://www.w3.org/1999/xhtml";let En=Lt,Jt=!1,Pt=null;const vi=zt({},[fn,kn,Lt],s1);let cn=zt({},["mi","mo","mn","ms","mtext"]),Gn=zt({},["annotation-xml"]);const oi=zt({},["title","style","font","a","script"]);let Sn=null;const Mn=["application/xhtml+xml","text/html"],vn="text/html";let on=null,zn=null;const Kn=n.createElement("form"),$n=function(ie){return ie instanceof RegExp||ie instanceof Function},yi=function(){let ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(zn&&zn===ie)){if((!ie||typeof ie!="object")&&(ie={}),ie=gs(ie),Sn=Mn.indexOf(ie.PARSER_MEDIA_TYPE)===-1?vn:ie.PARSER_MEDIA_TYPE,on=Sn==="application/xhtml+xml"?s1:Ha,z=ar(ie,"ALLOWED_TAGS")?zt({},ie.ALLOWED_TAGS,on):M,k=ar(ie,"ALLOWED_ATTR")?zt({},ie.ALLOWED_ATTR,on):P,Pt=ar(ie,"ALLOWED_NAMESPACES")?zt({},ie.ALLOWED_NAMESPACES,s1):vi,Dt=ar(ie,"ADD_URI_SAFE_ATTR")?zt(gs(un),ie.ADD_URI_SAFE_ATTR,on):un,ln=ar(ie,"ADD_DATA_URI_TAGS")?zt(gs(Ft),ie.ADD_DATA_URI_TAGS,on):Ft,It=ar(ie,"FORBID_CONTENTS")?zt({},ie.FORBID_CONTENTS,on):sn,te=ar(ie,"FORBID_TAGS")?zt({},ie.FORBID_TAGS,on):{},ee=ar(ie,"FORBID_ATTR")?zt({},ie.FORBID_ATTR,on):{},lt=ar(ie,"USE_PROFILES")?ie.USE_PROFILES:!1,ge=ie.ALLOW_ARIA_ATTR!==!1,ce=ie.ALLOW_DATA_ATTR!==!1,Se=ie.ALLOW_UNKNOWN_PROTOCOLS||!1,Ve=ie.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ge=ie.SAFE_FOR_TEMPLATES||!1,rt=ie.SAFE_FOR_XML!==!1,S=ie.WHOLE_DOCUMENT||!1,Q=ie.RETURN_DOM||!1,ue=ie.RETURN_DOM_FRAGMENT||!1,fe=ie.RETURN_TRUSTED_TYPE||!1,$=ie.FORCE_BODY||!1,Me=ie.SANITIZE_DOM!==!1,tt=ie.SANITIZE_NAMED_PROPS||!1,at=ie.KEEP_CONTENT!==!1,mt=ie.IN_PLACE||!1,ft=ie.ALLOWED_URI_REGEXP||pd,En=ie.NAMESPACE||Lt,cn=ie.MATHML_TEXT_INTEGRATION_POINTS||cn,Gn=ie.HTML_INTEGRATION_POINTS||Gn,B=ie.CUSTOM_ELEMENT_HANDLING||{},ie.CUSTOM_ELEMENT_HANDLING&&$n(ie.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(B.tagNameCheck=ie.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ie.CUSTOM_ELEMENT_HANDLING&&$n(ie.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(B.attributeNameCheck=ie.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ie.CUSTOM_ELEMENT_HANDLING&&typeof ie.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(B.allowCustomizedBuiltInElements=ie.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ge&&(ce=!1),ue&&(Q=!0),lt&&(z=zt({},kh),k=[],lt.html===!0&&(zt(z,Ch),zt(k,Ah)),lt.svg===!0&&(zt(z,o1),zt(k,c1),zt(k,Oa)),lt.svgFilters===!0&&(zt(z,a1),zt(k,c1),zt(k,Oa)),lt.mathMl===!0&&(zt(z,l1),zt(k,Ih),zt(k,Oa))),ie.ADD_TAGS&&(z===M&&(z=gs(z)),zt(z,ie.ADD_TAGS,on)),ie.ADD_ATTR&&(k===P&&(k=gs(k)),zt(k,ie.ADD_ATTR,on)),ie.ADD_URI_SAFE_ATTR&&zt(Dt,ie.ADD_URI_SAFE_ATTR,on),ie.FORBID_CONTENTS&&(It===sn&&(It=gs(It)),zt(It,ie.FORBID_CONTENTS,on)),at&&(z["#text"]=!0),S&&zt(z,["html","head","body"]),z.table&&(zt(z,["tbody"]),delete te.tbody),ie.TRUSTED_TYPES_POLICY){if(typeof ie.TRUSTED_TYPES_POLICY.createHTML!="function")throw yo('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ie.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw yo('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ae=ie.TRUSTED_TYPES_POLICY,de=ae.createHTML("")}else ae===void 0&&(ae=yy(C,r)),ae!==null&&typeof de=="string"&&(de=ae.createHTML(""));mi&&mi(ie),zn=ie}},ai=zt({},[...o1,...a1,...ly]),bi=zt({},[...l1,...cy]),li=function(ie){let Ue=K(ie);(!Ue||!Ue.tagName)&&(Ue={namespaceURI:En,tagName:"template"});const We=Ha(ie.tagName),Vt=Ha(Ue.tagName);return Pt[ie.namespaceURI]?ie.namespaceURI===kn?Ue.namespaceURI===Lt?We==="svg":Ue.namespaceURI===fn?We==="svg"&&(Vt==="annotation-xml"||cn[Vt]):!!ai[We]:ie.namespaceURI===fn?Ue.namespaceURI===Lt?We==="math":Ue.namespaceURI===kn?We==="math"&&Gn[Vt]:!!bi[We]:ie.namespaceURI===Lt?Ue.namespaceURI===kn&&!Gn[Vt]||Ue.namespaceURI===fn&&!cn[Vt]?!1:!bi[We]&&(oi[We]||!ai[We]):!!(Sn==="application/xhtml+xml"&&Pt[ie.namespaceURI]):!1},An=function(ie){_o(e.removed,{element:ie});try{K(ie).removeChild(ie)}catch{X(ie)}},ci=function(ie,Ue){try{_o(e.removed,{attribute:Ue.getAttributeNode(ie),from:Ue})}catch{_o(e.removed,{attribute:null,from:Ue})}if(Ue.removeAttribute(ie),ie==="is")if(Q||ue)try{An(Ue)}catch{}else try{Ue.setAttribute(ie,"")}catch{}},dr=function(ie){let Ue=null,We=null;if($)ie="<remove></remove>"+ie;else{const dn=Th(ie,/^[\r\n\t ]+/);We=dn&&dn[0]}Sn==="application/xhtml+xml"&&En===Lt&&(ie='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ie+"</body></html>");const Vt=ae?ae.createHTML(ie):ie;if(En===Lt)try{Ue=new E().parseFromString(Vt,Sn)}catch{}if(!Ue||!Ue.documentElement){Ue=g.createDocument(En,"template",null);try{Ue.documentElement.innerHTML=Jt?de:Vt}catch{}}const Zt=Ue.body||Ue.documentElement;return ie&&We&&Zt.insertBefore(n.createTextNode(We),Zt.childNodes[0]||null),En===Lt?_e.call(Ue,S?"html":"body")[0]:S?Ue.documentElement:Zt},Jn=function(ie){return H.call(ie.ownerDocument||ie,ie,p.SHOW_ELEMENT|p.SHOW_COMMENT|p.SHOW_TEXT|p.SHOW_PROCESSING_INSTRUCTION|p.SHOW_CDATA_SECTION,null)},yn=function(ie){return ie instanceof y&&(typeof ie.nodeName!="string"||typeof ie.textContent!="string"||typeof ie.removeChild!="function"||!(ie.attributes instanceof m)||typeof ie.removeAttribute!="function"||typeof ie.setAttribute!="function"||typeof ie.namespaceURI!="string"||typeof ie.insertBefore!="function"||typeof ie.hasChildNodes!="function")},jn=function(ie){return typeof l=="function"&&ie instanceof l};function Rn(nt,ie,Ue){Ia(nt,We=>{We.call(e,ie,Ue,zn)})}const Mi=function(ie){let Ue=null;if(Rn(ye.beforeSanitizeElements,ie,null),yn(ie))return An(ie),!0;const We=on(ie.nodeName);if(Rn(ye.uponSanitizeElement,ie,{tagName:We,allowedTags:z}),ie.hasChildNodes()&&!jn(ie.firstElementChild)&&ui(/<[/\w]/g,ie.innerHTML)&&ui(/<[/\w]/g,ie.textContent)||ie.nodeType===wo.progressingInstruction||rt&&ie.nodeType===wo.comment&&ui(/<[/\w]/g,ie.data))return An(ie),!0;if(!z[We]||te[We]){if(!te[We]&&zi(We)&&(B.tagNameCheck instanceof RegExp&&ui(B.tagNameCheck,We)||B.tagNameCheck instanceof Function&&B.tagNameCheck(We)))return!1;if(at&&!It[We]){const Vt=K(ie)||ie.parentNode,Zt=V(ie)||ie.childNodes;if(Zt&&Vt){const dn=Zt.length;for(let pn=dn-1;pn>=0;--pn){const gn=F(Zt[pn],!0);gn.__removalCount=(ie.__removalCount||0)+1,Vt.insertBefore(gn,G(ie))}}}return An(ie),!0}return ie instanceof h&&!li(ie)||(We==="noscript"||We==="noembed"||We==="noframes")&&ui(/<\/no(script|embed|frames)/i,ie.innerHTML)?(An(ie),!0):(Ge&&ie.nodeType===wo.text&&(Ue=ie.textContent,Ia([le,Pe,Le],Vt=>{Ue=vo(Ue,Vt," ")}),ie.textContent!==Ue&&(_o(e.removed,{element:ie.cloneNode()}),ie.textContent=Ue)),Rn(ye.afterSanitizeElements,ie,null),!1)},Er=function(ie,Ue,We){if(Me&&(Ue==="id"||Ue==="name")&&(We in n||We in Kn))return!1;if(!(ce&&!ee[Ue]&&ui(Ze,Ue))){if(!(ge&&ui(je,Ue))){if(!k[Ue]||ee[Ue]){if(!(zi(ie)&&(B.tagNameCheck instanceof RegExp&&ui(B.tagNameCheck,ie)||B.tagNameCheck instanceof Function&&B.tagNameCheck(ie))&&(B.attributeNameCheck instanceof RegExp&&ui(B.attributeNameCheck,Ue)||B.attributeNameCheck instanceof Function&&B.attributeNameCheck(Ue))||Ue==="is"&&B.allowCustomizedBuiltInElements&&(B.tagNameCheck instanceof RegExp&&ui(B.tagNameCheck,We)||B.tagNameCheck instanceof Function&&B.tagNameCheck(We))))return!1}else if(!Dt[Ue]){if(!ui(ft,vo(We,Ye,""))){if(!((Ue==="src"||Ue==="xlink:href"||Ue==="href")&&ie!=="script"&&ry(We,"data:")===0&&ln[ie])){if(!(Se&&!ui(Je,vo(We,Ye,"")))){if(We)return!1}}}}}}return!0},zi=function(ie){return ie!=="annotation-xml"&&Th(ie,it)},pr=function(ie){Rn(ye.beforeSanitizeAttributes,ie,null);const{attributes:Ue}=ie;if(!Ue||yn(ie))return;const We={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:k,forceKeepAttr:void 0};let Vt=Ue.length;for(;Vt--;){const Zt=Ue[Vt],{name:dn,namespaceURI:pn,value:gn}=Zt,hi=on(dn);let Nt=dn==="value"?gn:sy(gn);if(We.attrName=hi,We.attrValue=Nt,We.keepAttr=!0,We.forceKeepAttr=void 0,Rn(ye.uponSanitizeAttribute,ie,We),Nt=We.attrValue,tt&&(hi==="id"||hi==="name")&&(ci(dn,ie),Nt=Ke+Nt),rt&&ui(/((--!?|])>)|<\/(style|title)/i,Nt)){ci(dn,ie);continue}if(We.forceKeepAttr||(ci(dn,ie),!We.keepAttr))continue;if(!Ve&&ui(/\/>/i,Nt)){ci(dn,ie);continue}Ge&&Ia([le,Pe,Le],hn=>{Nt=vo(Nt,hn," ")});const Xt=on(ie.nodeName);if(Er(Xt,hi,Nt)){if(ae&&typeof C=="object"&&typeof C.getAttributeType=="function"&&!pn)switch(C.getAttributeType(Xt,hi)){case"TrustedHTML":{Nt=ae.createHTML(Nt);break}case"TrustedScriptURL":{Nt=ae.createScriptURL(Nt);break}}try{pn?ie.setAttributeNS(pn,dn,Nt):ie.setAttribute(dn,Nt),yn(ie)?An(ie):Sh(e.removed)}catch{}}}Rn(ye.afterSanitizeAttributes,ie,null)},Wr=function nt(ie){let Ue=null;const We=Jn(ie);for(Rn(ye.beforeSanitizeShadowDOM,ie,null);Ue=We.nextNode();)Rn(ye.uponSanitizeShadowNode,Ue,null),Mi(Ue),pr(Ue),Ue.content instanceof s&&nt(Ue.content);Rn(ye.afterSanitizeShadowDOM,ie,null)};return e.sanitize=function(nt){let ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ue=null,We=null,Vt=null,Zt=null;if(Jt=!nt,Jt&&(nt="<!-->"),typeof nt!="string"&&!jn(nt))if(typeof nt.toString=="function"){if(nt=nt.toString(),typeof nt!="string")throw yo("dirty is not a string, aborting")}else throw yo("toString is not a function");if(!e.isSupported)return nt;if(R||yi(ie),e.removed=[],typeof nt=="string"&&(mt=!1),mt){if(nt.nodeName){const gn=on(nt.nodeName);if(!z[gn]||te[gn])throw yo("root node is forbidden and cannot be sanitized in-place")}}else if(nt instanceof l)Ue=dr("<!---->"),We=Ue.ownerDocument.importNode(nt,!0),We.nodeType===wo.element&&We.nodeName==="BODY"||We.nodeName==="HTML"?Ue=We:Ue.appendChild(We);else{if(!Q&&!Ge&&!S&&nt.indexOf("<")===-1)return ae&&fe?ae.createHTML(nt):nt;if(Ue=dr(nt),!Ue)return Q?null:fe?de:""}Ue&&$&&An(Ue.firstChild);const dn=Jn(mt?nt:Ue);for(;Vt=dn.nextNode();)Mi(Vt),pr(Vt),Vt.content instanceof s&&Wr(Vt.content);if(mt)return nt;if(Q){if(ue)for(Zt=re.call(Ue.ownerDocument);Ue.firstChild;)Zt.appendChild(Ue.firstChild);else Zt=Ue;return(k.shadowroot||k.shadowrootmode)&&(Zt=Te.call(i,Zt,!0)),Zt}let pn=S?Ue.outerHTML:Ue.innerHTML;return S&&z["!doctype"]&&Ue.ownerDocument&&Ue.ownerDocument.doctype&&Ue.ownerDocument.doctype.name&&ui(gd,Ue.ownerDocument.doctype.name)&&(pn="<!DOCTYPE "+Ue.ownerDocument.doctype.name+`>
`+pn),Ge&&Ia([le,Pe,Le],gn=>{pn=vo(pn,gn," ")}),ae&&fe?ae.createHTML(pn):pn},e.setConfig=function(){let nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};yi(nt),R=!0},e.clearConfig=function(){zn=null,R=!1},e.isValidAttribute=function(nt,ie,Ue){zn||yi({});const We=on(nt),Vt=on(ie);return Er(We,Vt,Ue)},e.addHook=function(nt,ie){typeof ie=="function"&&_o(ye[nt],ie)},e.removeHook=function(nt,ie){if(ie!==void 0){const Ue=ny(ye[nt],ie);return Ue===-1?void 0:iy(ye[nt],Ue,1)[0]}return Sh(ye[nt])},e.removeHooks=function(nt){ye[nt]=[]},e.removeAllHooks=function(){ye=Mh()},e}var _d=md();const by=dt.View.extend({el:A("body"),model:Oi,editing:!1,initialize:function(){this.listenTo(this.model,"change:x change:legend",this.legendChanged),this.render()},events:{"click .edit-legend":"editLegend","click .cancel-legend":"cancelLegend","click .save-legend":"saveLegend","click .collapse-legend":"collapseLegend","click .expand-legend":"expandLegend","click .markdown-info":"markdownInfo","click .panel-body p":"legendClick"},legendClick:function(t){if(t.preventDefault(),t.target.nodeName.toLowerCase()=="a"){var e=t.target.getAttribute("href");return window.open(e,"_blank"),!1}else this.model.get("legend_collapsed")?this.expandLegend():this.editLegend()},markdownInfo:function(t){t.preventDefault(),Vn("markdownInfoModal")},collapseLegend:function(t){this.renderCollapsed(!0),this.model.set("legend_collapsed",!0)},expandLegend:function(t){this.renderCollapsed(!1),this.model.set("legend_collapsed",!1)},saveLegend:function(t){t.preventDefault();var e=A("#js-legend textarea").val();this.model.save("legend",e),this.editing=!1,this.render()},editLegend:function(t){t&&t.preventDefault(),this.editing=!0,this.model.get("legend_collapsed")&&this.model.set("legend_collapsed",!1),this.render()},cancelLegend:function(t){t.preventDefault(),this.editing=!1,this.render()},renderCollapsed:function(t){var e=A(".panel",self.el);t?(e.addClass("legend-collapsed"),e.removeClass("legend-expanded")):(e.removeClass("legend-collapsed"),e.addClass("legend-expanded"))},legendChanged:function(){this.editing=!1,this.render()},render:function(){var t=this,e=this.model.get("legend")||"",n=this.model.get("legend_collapsed"),i=A("#js-legend"),r=A(".edit-legend",i),s=A(".save-legend",i),o=A(".cancel-legend",i),l=A(".panel",i),h=A(".legend",i);if(t.renderCollapsed(n),t.editing){r.hide(),s.show(),o.show(),l.addClass("editing"),l.show();var p='<textarea class="form-control" rows="9" style="resize:none">'+e+"</textarea>";h.html(p),A(".legend-container").css("z-index",100)}else r.show(),s.hide(),o.hide(),A(".legend-container").css("z-index",1),l.removeClass("editing"),e.length===0?(l.hide(),r.text("Add Figure Legend")):(l.show(),e=_d.sanitize(ud(e)),h.html(e),r.text("Edit Figure Legend"))}});var wy=dt.View.extend({el:A("#labelsFromMapAnns"),model:Oi,options:{},initialize:function(){document.getElementById("labelsFromMapAnns").addEventListener("shown.bs.modal",t=>{this.options=t.relatedTarget,this.loadMapAnns()})},events:{"submit .labelsFromMapAnnsForm":"handleForm","change select":"renderExampleLabel","change input":"renderExampleLabel"},loadMapAnns(){let t=this.model.getSelected().map(function(n){return n.get("imageId")});this.isLoading=!0,A("select",this.el).html("<option>Loading data...</option>");var e=WEBINDEX_URL+"api/annotations/?type=map&parents=true&image=";e+=t.join("&image="),ns(e).then(n=>{n.hasOwnProperty("parents")&&n.parents.annotations.forEach(function(i){let r=i.link.parent.class,s=""+i.link.parent.id,o=n.parents.lineage[r][s];for(let l=0;l<o.length;l++){let h=JSON.parse(JSON.stringify(i));h.link.parent.id=o[l].id,n.annotations.push(h)}}),this.isLoading=!1,this.annotations=n.annotations,this.render()})},handleForm:function(t){if(t.preventDefault(),!this.isLoading){var e=A("input[name='kvpChoice']:checked").val(),n;e==="single-key"&&(n=A("select",this.el).val());var i=A("input[name='includeKey']").is(":checked"),r=this.options.size||"12",s=this.options.position||"top",o=this.options.color||"000000",l=this.annotations.reduce(function(h,p){var m=p.link.parent.id;return h[m]||(h[m]=[]),p.values.forEach(function(y){var E=y[1];(e==="all-keys"||y[0]===n)&&h[m].indexOf(E)===-1&&h[m].push(y)}),h},{});return this.model.getSelected().forEach(function(h){var p=h.get("imageId");if(l[p]){var m=l[p].map(function(y){return{text:i?y[0].replaceAll("_","\\_")+": "+y[1].replaceAll("_","\\_"):y[1].replaceAll("_","\\_"),size:r,position:s,color:o}});h.add_labels(m)}}),$r("labelsFromMapAnns"),!1}},renderExampleLabel:function(){for(var t=A("select",this.el).val(),e=A("input[name='includeKey']").is(":checked"),n,i=0;i<this.annotations.length&&(this.annotations[i].values.forEach(function(r){r[0]===t&&(n=r[1])}),!n);i++);e&&(n=t+": "+n),this.annotations.length==0&&(n=""),A("#exampleLabelFromMap").html(De.escape(n))},render:function(){var t={};this.annotations.forEach(function(s){let o=s.link.parent.id;s.values.forEach(function(l){var h=l[0];t[h]||(t[h]={}),t[h][o]=!0})});var e=[],n={};for(var i in t)t.hasOwnProperty(i)&&(e.push(i),n[i]=Object.keys(t[i]).length);e.sort(function(s,o){return s.toUpperCase()<o.toUpperCase()?-1:1});var r=e.map(function(s){return"<option value='"+De.escape(s)+"'>"+De.escape(s)+" ("+n[s]+")</option>"}).join("");e.length===0&&(r="<option>No Key-Value Pairs found</option>"),A("select",this.el).html(r),this.renderExampleLabel()}});const xy=`    <!-- The content of <div class='imagePanel'> for each panel -->
    <div class="imgContainer">
        <i class="bi-arrow-repeat image_panel_spinner"></i>
        <img class="img_panel" />
        <div id="<%= randomId %>" class="panel_canvas"></div>
    </div>
`,Ey=`

    <!-- One of these added to each position 'top', 'topleft' etc within Panel $el -->
    <div class="label_layout label_<%= position %>">
        <% _.each(labels, function(l, i) { %>
            <div style='color:#<%= l.color %>; font-size:<%= l.size %>px'><%= l.text %></div>
        <% }); %>
    </div>
`,Sy=`
    <div class="label_layout left_vlabels">
        <div>
            <% _.each(labels, function(l, i) { %>
                <div style='color:#<%= l.color %>; font-size:<%= l.size %>px'><%= l.text %></div>
            <% }); %>
        </div>
    </div>
`,Ty=`
<div class="label_layout right_vlabels">
    <div>
        <% _.each(labels, function(l, i) { %>
            <div style='color:#<%= l.color %>; font-size:<%= l.size %>px'><%= l.text %></div>
        <% }); %>
    </div>
</div>
`,Cy=`
    <!-- Alternative label_template - uses table to valign middle for 'left' & 'right' labels -->
    <div class="label_layout label_middle label_<%= position %>">
        <table>
            <tr><td>
                <% _.each(labels, function(l, i) { %>
                    <div style='color:#<%= l.color %>; font-size:<%= l.size %>px'><%= l.text %></div>
                <% }); %>
            </td></tr>
        </table>
    </div>
`,ky=`
    <div class="scalebar label_<%= position %>" style="background-color: #<%= color %>; height: <%= height %>px; margin: <%= margin %>px;">
        <% if (show_label) { %>
            <div class='scalebar-label' style='color: #<%= color %>; font-size: <%= font_size %>px;
            <% if(position === "bottomleft"  || position === "bottomright") print("margin-bottom:" + height);%>px;
            <% if(position === "topleft"  || position === "topright") print("margin-top:" + height);%>px;'>
                <%= length %> <%= symbol %>
            </div>
        <% } %>
    </div>
`,Ay=`<div class="colorbar" style="<%= inv_position %>: 100%;">
    <% if (show) { %>
        <div class="colorbar_<%= position %>"
             style="margin-<%= inv_position %>: <%= gap %>px;">

            <div class="colorbar_bg "
                style="height: <%= thickness + 1 %>px;
                        background-image: <%= isLUT ? 'url(' + lut_url + ')' : 'linear-gradient(to left, #' + color + ', black)' %>;
                        <%= isLUT ? 'background-position: ' + lutBgPos : '' %>;
                        <%= reverseIntensity ? 'transform: scaleX(-1);' : '' %>;">
            </div>
        </div>

        <div class="colorbar_ticks_<%= position %>" style="border-<%= inv_position %>: 2px solid #<%= axis_color %>; margin-<%= inv_position %>: <%= thickness + gap %>px; ">
            <% for (let i = 0; i < num_ticks; i++) { %>
                <div class="colorbar_tick_<%= orientation %>">
                    <% if (position == "right" || position == "bottom") { %>
                        <div class="colorbar_dash_<%= orientation %>"
                            style="background-color: #<%= axis_color %>;
                                   <%= position == 'right' ? 'width' : 'height' %>: <%= mark_len + 1 %>px;
                                   <%= position %>: 1px">
                        </div>
                    <% } %>
                        <span class="label colorbar_label_<%= orientation %>"
                              style="color: #<%= axis_color %>;
                                     font-size: <%= font_size %>px;
                                     margin-<%= inv_position %>: <%= tick_margin %>px;">
                            <!-- Label is rounded to decimal proportionally to the spacing between each tick.  -->
                            <%= ((end - start) * i / (num_ticks-1) + start).toFixed(Math.max(0, Math.ceil(-Math.log10((end - start) / num_ticks)))) %>
                        </span>
                    <% if (position == "left" || position == "top") { %>
                        <div class="colorbar_dash_<%= orientation %>"
                             style="background-color: #<%= axis_color %>;
                                    <%= position == 'left' ? 'width' : 'height' %>: <%= mark_len + 1 %>px;
                                    <%= position %>: 1px">
                        </div>
                    <% } %>
                </div>
            <% } %>
        </div>
    <% } %>
</div>
`,Iy=`

<div class="btn-group-vertical col-sm-6" role="group">

	<% _.each(luts, function(lut, i) { %>

		<button type="button" class="btn btn-default lutOption" data-lut="<%= lut.name %>">
			<% if (lut.png) { %>
				<img height="24px" src="<%= lut.png %>" />
			<% } else { %>
				<span class="lutBg" style="background-position: <%= lut.bgPos %>;">&nbsp</span>
			<% } %>
			<%= lut.displayName %> </button>

		<% if (i === parseInt(luts.length/2)) { %>
			</div>
			<div class="btn-group-vertical col-sm-6" role="group">
		<% } %>

	<% }) %>
</div>
`,Oy=""+new URL("luts_10-CgN3hjir.png",import.meta.url).href;var My=dt.View.extend({el:A("#lutpickerModal"),template:De.template(Iy),initialize:function(){this.lutModal=new ri("#lutpickerModal"),this.lut_names=[],this.luts=Dv(),this.loadLuts()},events:{"click button[type='submit']":"handleSubmit","click .lutOption":"pickLut"},handleSubmit:function(){this.success(this.pickedLut),this.lutModal.hide()},pickLut:function(t){var e=t.currentTarget.getAttribute("data-lut");this.pickedLut=e;var n=this.luts.find(r=>r.name==e);if(n.png)A(".lutPreview",this.el).css({"background-position":"0 0","background-image":"url('"+n.png+"')","background-size":"100% 100%"});else{var i=this.getLutBackgroundPosition(e);A(".lutPreview",this.el).css({"background-position":i,"background-image":`url(${this.lutsPngUrl})`})}A("button[type='submit']",this.el).removeAttr("disabled")},loadLuts:async function(t=!1){if(!APP_SERVED_BY_OMERO){A(":root").css({"--pngHeight":"100%"});return}var e=WEBGATEWAYINDEX+"luts/";let n={mode:"cors",credentials:"include"};if(t||this.lut_names===void 0||this.lutsPngUrl===void 0||this.luts===void 0){const s=await(await fetch(e,n)).json();this.luts=s.luts,this.lut_names=s.png_luts,this.is_dynamic_lut=!!s.png_luts_new,this.is_dynamic_lut?(this.luts=this.luts.map(function(o){return o.png_index=o.png_index_new,o}),this.lut_names=s.png_luts_new,this.lutsPngUrl=`${WEBGATEWAYINDEX}luts_png/`):this.lutsPngUrl=STATIC_DIR+Oy,this.lut_names=this.lut_names.map(o=>o.split("/").pop());var i=this.lut_names.length;this.is_dynamic_lut||(i=i-1),A(":root").css({"--pngHeight":i*1e3+"px","--lutPng":"url("+this.lutsPngUrl+")"})}return this.lutsPngUrl},getLutPng(t){var e=this.luts.find(n=>n.name==t);if(e&&e.png)return e.png},getLutBackgroundPosition:function(t){var e=this.lut_names.indexOf(t);return e>-1?"0px -"+(e*1e3+2)+"px":"0px 100px"},formatLutName:function(t){return t=t.replace(".lut",""),t=t.replace(/_/g," "),t=t[0].toUpperCase()+t.slice(1),t},show:function(t){Vn("lutpickerModal"),t.success&&(this.success=t.success),this.render()},render:function(){var t="",e;this.luts?(e=this.luts.map((function(n){return{bgPos:this.getLutBackgroundPosition(n.name),name:n.name,png:n.png,displayName:this.formatLutName(n.name)}}).bind(this)),t=this.template({luts:e})):(t="<p>Loading Lookup Tables failed.</p>",t+="<p>Your OMERO version does not support LUTs. Please upgrade.</p>"),A(".modal-body",this.el).html(t)}});const Hs=new My;var zy=dt.View.extend({tagName:"div",className:"imagePanel",template:De.template(xy),label_template:De.template(Ey),label_vertical_template:De.template(Sy),label_right_vertical_template:De.template(Ty),label_table_template:De.template(Cy),scalebar_template:De.template(ky),colorbar_template:De.template(Ay),initialize:function(t){this.model.on("destroy",this.remove,this),this.listenTo(this.model,"change:x change:y change:width change:height change:zoom change:dx change:dy change:rotation change:vertical_flip change:horizontal_flip",this.render_layout),this.listenTo(this.model,"change:scalebar change:pixel_size_x",this.render_scalebar),this.listenTo(this.model,"change:colorbar change:channels",this.render_colorbar),this.listenTo(this.model,"change:zoom change:dx change:dy change:width change:height change:channels change:theZ change:theT change:z_start change:z_end change:z_projection change:min_export_dpi change:pixel_range change:vertical_flip change:horizontal_flip",this.render_image),this.listenTo(this.model,"change:channels change:zoom change:dx change:dy change:width change:height change:rotation change:labels change:theT change:deltaT change:theZ change:deltaZ change:z_projection change:z_start change:z_end",this.render_labels),this.listenTo(this.model,"change:shapes change:rotation change:vertical_flip change:horizontal_flip",this.render_shapes),this.listenTo(this.model,"change:border",this.render_layout),this.model.on("drag_resize",this.drag_resize,this),t.page_color&&(this.page_color=t.page_color)},events:{},drag_resize:function(t){var e=t[0],n=t[1],i=t[2],r=t[3];if(i==this.model.get("width")&&r==this.model.get("height")){var s=this.model.get("border");if(s!=null&&s.showBorder){let o=s.strokeWidth;e=e-o,n=n-o}this.$el.css({top:n+"px",left:e+"px"})}else this.update_resize(e,n,i,r),this.render_shapes();this.$el.addClass("dragging")},render_layout:function(){var t=this.model.get("x"),e=this.model.get("y"),n=this.model.get("width"),i=this.model.get("height");this.update_resize(t,e,n,i),this.render_labels(),this.$el.removeClass("dragging")},update_resize:function(t,e,n,i){var r=this.model.get("border"),s=n,o=i;if(r!=null&&r.showBorder){let K=r.strokeWidth;this.$el.css({border:`solid ${K}px ${r.color}`}),t=t-K,e=e-K,s=n+K*2,o=i+K*2}else this.$el.css({border:""});this.$el.css({top:e+"px",left:t+"px",width:s+"px",height:o+"px"}),A(".left_vlabels",this.$el).css("width",3*o+"px"),A(".right_vlabels",this.$el).css("width",3*o+"px");var l=this.model.get("zoom"),h=this.model.get_vp_img_css(l,n,i),p=this.model.get_vp_full_plane_css(l,n,i),m=p.width/this.model.get("orig_width");this.model.is_big_image()&&(n!==this.model.get("width")||i!==this.model.get("height"))&&(h.width=0,h.height=0),this.$img_panel.css(h),this.$panel_canvas.css(p),this.shapeManager&&this.shapeManager.setZoom(m*100);var y=this.model.get("scalebar");if(y&&y.show){var E=y.length,C=this.model.get("pixel_size_x_unit"),N=y.units,F=LENGTH_UNITS[N].microns/LENGTH_UNITS[C].microns,X=F*E/this.model.get("pixel_size_x"),G=m*X;this.$scalebar.css("width",G)}var V=this.model.get("colorbar");V&&V.show&&(V.position=="left"||V.position=="right")&&this.$colorbar&&(this.$colorbar.css("width",i),this.$colorbar.css("height",i))},render_shapes:function(){var t=this.model.get("shapes"),e=this.model.get("orig_width"),n=this.model.get("orig_height");if(t){if(!this.shapeManager){var i=this.$panel_canvas.attr("id");this.$panel_canvas.attr({width:e+"px",height:n+"px"});var r=this.$panel_canvas.width()/e;this.shapeManager=new ot(i,e,n,{readOnly:!0}),this.shapeManager.setZoom(r*100)}this.shapeManager.setShapesJson(t),this.shapeManager.setTextRotation(this.model.get("rotation")),this.shapeManager.setHorizontalFlip(this.model.get("horizontal_flip")?-1:1),this.shapeManager.setVerticalFlip(this.model.get("vertical_flip")?-1:1)}else this.shapeManager&&this.shapeManager.deleteAllShapes()},render_image:function(){this.model.is_big_image()&&(this.$img_panel.hide(),A(".image_panel_spinner",this.$el).show()),this.$img_panel.one("load",(function(){A(".image_panel_spinner",this.$el).hide(),this.$img_panel.show()}).bind(this)),this.model.get_img_src().then(t=>this.$img_panel.attr("src",t)),this.model.get("min_export_dpi")>100?this.$img_panel.removeClass("pixelated"):this.$img_panel.addClass("pixelated")},render_labels:function(){A(".label_layout",this.$el).remove();var t=this.model.get("labels"),e=this,n={top:[],bottom:[],left:[],right:[],leftvert:[],rightvert:[],topleft:[],topright:[],bottomleft:[],bottomright:[]};De.each(t,function(o){var l=A.extend(!0,{},o);l.color.toLowerCase()==e.page_color.toLowerCase()&&["top","bottom","left","right","leftvert","rightvert"].indexOf(o.position)>-1&&(l.color==="000000"?l.color="ffffff":l.color="000000");const h=[...l.text.matchAll(/\[.+?\]/g)];if(h.length>0){var p="",m=0;for(const G of h){var p=p+l.text.slice(m,G.index),y=G[0].slice(1,-1).split(";"),E=y[0].trim().split("."),C={};y.slice(1).forEach(function(K){var ae=K.split("=");ae.length>1&&(C[ae[0].trim()]=parseInt(ae[1].trim()))});var N="",F,X;["time","t"].includes(E[0])?(F=E[1]?E[1]:"index",X=C.precision!==void 0?C.precision:0,N=e.model.get_time_label_text(F,C.offset,X)):["image","dataset"].includes(E[0])?(F=E[1]?E[1]:"name",N=e.model.get_name_label_text(E[0],F),N=N.replaceAll("_","\\_")):["x","y","z","width","height","w","h","rotation","rot"].includes(E[0])?(F=E[1]?E[1]:"pixel",X=C.precision!==void 0?C.precision:2,N=e.model.get_view_label_text(E[0],F,C.offset,X)):["channels","c"].includes(E[0])?N=e.model.get_channels_label_text():["zoom"].includes(E[0])&&(N=e.model.get_zoom_label_text()),p=p+(N||G[0]),m=G.index+G[0].length}l.text=p+l.text.slice(m)}l.text=_d.sanitize(ud(l.text)),n[o.position].push(l)});var i="";De.each(n,function(o,l){var h={position:l,labels:o};o.length!==0&&(l=="leftvert"?i+=e.label_vertical_template(h):l=="rightvert"?i+=e.label_right_vertical_template(h):l=="left"||l=="right"?i+=e.label_table_template(h):i+=e.label_template(h))}),e.$el.append(i),A(".left_vlabels",e.$el).css("width",3*e.$el.height()+"px"),A(".right_vlabels",e.$el).css("width",3*e.$el.height()+"px");var r=this.model.get("border");if(r!=null&&r.showBorder){var s=5+r.strokeWidth;A(".left_vlabels>div",e.$el).css("margin-bottom",s+"px"),A(".right_vlabels>div",e.$el).css("margin-bottom",s+"px"),A(".label_top",e.$el).css("margin-bottom",s+"px"),A(".label_bottom",e.$el).css("margin-top",s+"px"),A(".label_left",e.$el).css("margin-right",s+"px"),A(".label_right",e.$el).css("margin-left",s+"px")}else A(".left_vlabels>div",e.$el).css("margin-bottom","5px"),A(".right_vlabels>div",e.$el).css("margin-bottom","5px"),A(".label_top",e.$el).css("margin-bottom","5px"),A(".label_bottom",e.$el).css("margin-top","5px"),A(".label_left",e.$el).css("margin-right","5px"),A(".label_right",e.$el).css("margin-left","5px");return this},render_scalebar:function(){this.$scalebar&&this.$scalebar.remove();var t=this.model.get("scalebar");if(t&&t.show){var e={};e.position=t.position,e.color=t.color,e.length=t.length,e.height=t.height,e.margin=t.margin,e.font_size=t.font_size,e.show_label=t.show_label,e.symbol=t.units,LENGTH_UNITS&&LENGTH_UNITS[t.units]&&(e.symbol=LENGTH_UNITS[t.units].symbol);var n=this.scalebar_template(e);this.$el.append(n)}this.$scalebar=A(".scalebar",this.$el),this.render_layout()},render_colorbar:async function(){var C,N;this.$colorbar&&this.$colorbar.remove();var t=this.model.get("colorbar"),e=0,n=125,i=!1,r="";for(const F of this.model.get("channels"))if(F.active){r=F.color,e=(C=F.window)==null?void 0:C.start,n=(N=F.window)==null?void 0:N.end,i=F.reverseIntensity;break}var s,o,l=!/^[0-9a-fA-F]+$/.test(r);if(l){var h=Hs.getLutPng(r);h?(s=h,o="0 0"):(s=await Hs.loadLuts(),o=Hs.getLutBackgroundPosition(r))}var p={left:"right",right:"left",top:"bottom",bottom:"top"},m={left:"vertical",right:"vertical",top:"horizontal",bottom:"horizontal"};if(t&&t.show){var y={position:t.position,inv_position:p[t.position],orientation:m[t.position],show:t.show,thickness:t.thickness,font_size:t.font_size,axis_color:t.axis_color,num_ticks:t.num_ticks,mark_len:t.mark_len,gap:t.gap,tick_margin:t.tick_margin,start:e,end:n,color:r,isLUT:l,lutBgPos:o,lut_url:s,reverseIntensity:i},E=this.colorbar_template(y);this.$el.append(E)}this.$colorbar=A(".colorbar",this.$el),this.render_layout()},render:function(){var t={randomId:"r"+Math.random()},e=this.template(t);this.$el.html(e),this.$img_panel=A(".img_panel",this.$el),this.$imgContainer=A(".imgContainer",this.$el),this.$panel_canvas=A(".panel_canvas",this.$el),this.render_image(),this.render_scalebar(),this.render_colorbar();var n=this;return setTimeout(function(){n.render_shapes()},10),this.render_scalebar(),this}});const zh="7.2.2.dev0";r3(De,dt,Ps);const Ry=dt.View.extend({el:A("#body"),initialize:function(t){this.app=t.app,new Fy({model:this.model}),this.addImagesModal=new m3({model:this.model,figureView:this}),new g3({model:this.model}),new p3({model:this.model}),new w3({model:this.model}),new x3({model:this.model}),new L3({model:this.model}),new d3({model:this.model}),new by({model:this.model}),new wy({model:this.model}),new _3({model:this.model,app:this.app}),this.figureFiles=new a3,this.fileListViewModal=new l3({model:this.figureFiles,figureModel:this.model}),this.$main=A("main"),this.$canvas=A("#canvas"),this.$canvas_wrapper=A("#canvas_wrapper"),this.$figure=A("#figure"),this.$copyBtn=A(".copy"),this.$pasteBtn=A(".paste"),this.$saveBtn=A(".save_figure.btn"),this.$saveOption=A("li.save_figure"),this.$saveAsOption=A("li.save_as"),this.$deleteOption=A("li.delete_figure"),this.aboutModal=new ri("#aboutModal");var e=this;this.model.on("change:paper_width change:paper_height change:page_count",this.render,this),this.model.panels.on("add",this.addOne,this),window.onbeforeunload=function(){if(e.model.get("canEdit"),e.model.get("unsaved"))return"Leave page with unsaved changes?"},A("#zoom_slider").on("input",n=>{e.model.set("curr_zoom",n.target.value)}),EXPORT_ENABLED?(A("button.export_pdf").removeAttr("disabled"),SCRIPT_VERSION!=zh&&A(".script_version_warning").show().attr("title","Script Version Warning")):IS_ADMIN?A(".script_version_warning").show().attr("title","Script missing! Click to Upload..."):A(".script_version_warning").show().attr("title","Export script not installed. Contact your OMERO administrator."),APP_SERVED_BY_OMERO?A(".standalone_only_element").hide():A(".omero_only_element").hide(),this.listenTo(this.model,"change:curr_zoom",this.renderZoom),this.listenTo(this.model,"change:selection",this.renderSelectionChange),this.listenTo(this.model,"change:unsaved",this.renderSaveBtn),this.listenTo(this.model,"change:figureName",this.renderFigureName),this.listenTo(this.model,"change:page_color",this.render),this.listenTo(this.model,"change:page_color",this.renderPanels),this.listenTo(this.model,"change:loading_count",this.renderLoadingSpinner),this.renderZoom(),this.render(),this.renderSelectionChange()},events:{"click .export_pdf":"export_pdf","click .script_version_warning":"script_version_warning","click .upload_omero_script":"upload_omero_script","click .export_options li":"export_options","click .add_panel":"addPanel","click .delete_panel":"deleteSelectedPanels","click .copy":"copy_selected_panels","click .paste":"paste_panels","click .save_figure":"save_figure_event","click .save_as":"save_as_event","click .new_figure":"goto_newfigure","click .open_figure":"open_figure","click .export_json":"export_json","click .import_json":"import_json","click .delete_figure":"delete_figure","click .chgrp_figure":"chgrp_figure","click .local_storage":"local_storage","click .paper_setup":"paper_setup","click .export-options a":"select_export_option","click .zoom-paper-to-fit":"zoom_paper_to_fit","click .about_figure":"show_about_dialog","click .figure-title":"start_editing_name","keyup .figure-title input":"figuretitle_keyup","blur .figure-title input":"stop_editing_name","submit .importJsonForm":"import_json_form"},keyboardEvents:{backspace:"deleteSelectedPanels",del:"deleteSelectedPanels","mod+a":"select_all","mod+c":"copy_selected_panels","mod+v":"paste_panels","mod+s":"save_figure_event","mod+n":"goto_newfigure","mod+o":"open_figure",down:"nudge_down",up:"nudge_up",left:"nudge_left",right:"nudge_right"},modal_visible:function(){return A("div.modal.show").length>0},export_options:function(t){t.preventDefault();var e=A(t.target);A(".export_options .bi-check-lg").css("visibility","hidden"),A(".bi-check-lg",e).css("visibility","visible");var n=e.attr("data-export-option");A(".export_pdf").text("Export "+n).attr("data-export-option",n),A("#pdf_download").hide()},paper_setup:function(t){t.preventDefault(),Vn("paperSetupModal")},show_about_dialog:function(t){t.preventDefault(),this.aboutModal.show()},start_editing_name:function(t){var e=A(t.target),n=e.text();n=n.replace(/"/g,"&quot;"),e.html('<input value="'+n+'"/>'),A("input",e).focus()},figuretitle_keyup:function(t){t.which===13&&(t.preventDefault(),this.stop_editing_name())},stop_editing_name:function(){var t=A(".figure-title input"),e=t.val().trim();if(e.length===0){alert("Can't have empty name.");return}A(".figure-title").html(De.escape(e)),this.model.save("figureName",e),this.figureFiles.reset()},script_version_warning:function(t){document.getElementById("figure_app_version").innerHTML=zh;let e=SCRIPT_VERSION.length>0?SCRIPT_VERSION:"unknown";document.getElementById("export_script_version").innerHTML=e,EXPORT_ENABLED?(A(".script_version_mismatch").show(),A(".script_missing").hide()):(A(".script_version_mismatch").hide(),A(".script_missing").show()),IS_ADMIN?A("#admin_script_message").show():A("#non_admin_script_message").show(),A("#script_upload_message").hide(),Vn("scriptManagerDialog")},upload_omero_script:function(t){let e=A(".upload_omero_script"),n=A(".spinner",e);e.attr("disabled","disabled"),n.show(),A.post(UPLOAD_OMERO_SCRIPT_URL).done(function(i){console.log("rsp",i),e.removeAttr("disabled"),n.hide();let r=i.Error?"Error: "+i.Error:i.Message;i.script_id&&(A(".script_version_warning").hide(),A(".export_pdf").removeAttr("disabled"),r+=". Script ID: "+i.script_id),A("#script_upload_message").text(r).show()})},export_pdf:function(t){console.log("Export pdf..."),t.preventDefault(),this.model;var e=A(t.target),n=e.attr("data-export-option"),i=A("#pdf_inprogress"),r=A("#pdf_download"),s=A("#script_error"),o="PDF";e.hide(),r.hide(),s.hide(),i.show(),o={PDF:"PDF","PDF & images":"PDF_IMAGES",TIFF:"TIFF","TIFF & images":"TIFF_IMAGES","to OMERO":"OMERO"}[n];var h=this.model.figure_toJSON(),p=MAKE_WEBFIGURE_URL,m={figureJSON:JSON.stringify(h),exportOption:o};A.post(p,m).done(function(y){var E=y.jobId;if(!E){y.error?alert(y.error):alert("Error exporting figure"),e.show(),i.hide();return}var C=setInterval(function(){A.getJSON(ACTIVITIES_JSON_URL,function(N){var F=N[E];if(F.status=="finished"){if(clearInterval(C),e.show(),i.hide(),F.results.New_Figure){var X=F.results.New_Figure.id;if(F.results.New_Figure.type==="FileAnnotation"){var G=WEBINDEX_URL+"annotation/"+X+"/";r.attr({href:G,"data-original-title":"Download Figure"}).show().children("span").prop("class","glyphicon glyphicon-download-alt")}else if(F.results.New_Figure.type==="Image"){var G=F.results.New_Figure.browse_url;r.attr({href:G,"data-original-title":"Go to Figure Image"}).show().tooltip().children("span").prop("class","glyphicon glyphicon-share")}}else if(F.stderr){var V=WEBINDEX_URL+"get_original_file/"+F.stderr+"/";s.attr("href",V).show()}}N.inprogress===0&&clearInterval(C)}).fail(function(){clearInterval(C)})},1e3)})},select_export_option:function(t){t.preventDefault();var e=A(t.target),n=e.children("span.glyphicon");n.length===0&&(n=e);var i=n.parent().parent(),r=i.parent().prev().prev(),s=n.attr("data-option"),o=r.find("span[data-option='"+s+"']");o.length>0?o.remove():(n=n.clone(),r.append(n)),r.trigger("change")},nudge_right:function(t){if(t.preventDefault(),this.modal_visible())return!0;this.model.nudge_right()},nudge_left:function(t){if(t.preventDefault(),this.modal_visible())return!0;this.model.nudge_left()},nudge_down:function(t){if(t.preventDefault(),this.modal_visible())return!0;this.model.nudge_down()},nudge_up:function(t){if(t.preventDefault(),this.modal_visible())return!0;this.model.nudge_up()},local_storage:function(t){var e=["Close"];let n=ed();var i="<p>Any figure that fails to Save is stored in the browser's local storage.</p>";n?(e=e.concat(["Clear Storage","Recover Figure"]),i+="<p>You can Clear local storage or Recover the figure from local storage with the options below:</p>"):i+="<p>No Figure currently found.</p>";var r=function(s){s==="Clear Storage"?Qf():s==="Recover Figure"&&(window.location=BASE_WEBFIGURE_URL+"recover/")};Zi("Local Storage",i,e,r)},goto_newfigure:function(t){t&&t.preventDefault();var e=this,n=function(){e.model.clearFigure(),e.addImagesModal.modal.show(),e.app.navigate("new/",{trigger:!0})};if(this.model.get("unsaved")){var i="Save",r=this.model.get("canEdit");r||(i="Save a Copy"),Zi("Save Changes to Figure?","Your changes will be lost if you don't save them",["Cancel","Don't Save",i],function(s){s===i?e.save_figure({success:n}):s==="Don't Save"&&n()})}else n()},delete_figure:function(t){t.preventDefault();var e=this.model.get("fileId"),n=this.model.get("figureName");if(e){this.model.set("unsaved",!1);var i="Delete '"+n+"'?",r=this;confirm(i)&&A.post(BASE_WEBFIGURE_URL+"delete_web_figure/",{fileId:e}).done(function(){r.figureFiles.removeFile(e),r.app.navigate("",{trigger:!0})})}},chgrp_figure:function(t){t.preventDefault(),_s(),Vn("chgrpModal")},open_figure:function(t){t.preventDefault(),_s();var e=this,n=function(){APP_SERVED_BY_OMERO?e.fileListViewModal.modal.show():Vn("openLocalFileModal")};if(this.model.get("unsaved")){var i="Save",r=this.model.get("canEdit");r||(i="Save a Copy"),Zi("Save Changes to Figure?","Your changes will be lost if you don't save them",["Cancel","Don't Save",i],function(s){s===i?e.save_figure({success:n}):s==="Don't Save"&&(e.model.set("unsaved",!1),n())})}else n()},save_figure_event:function(t){t&&t.preventDefault(),this.save_figure()},save_figure:function(t){t=t||{};var e=this.model.get("fileId"),n=this.model.get("canEdit");e&&n&&APP_SERVED_BY_OMERO?(this.$saveBtn.attr("disabled","disabled"),t.fileId=e,this.model.save_to_OMERO(t)):this.save_as(t)},save_as_event:function(t){t&&t.preventDefault(),this.save_as()},save_as:function(t){this.figureFiles.reset();var e=this;t=t||{};var n=this.model.get("figureName");if(!n){var i=this.model.getDefaultFigureName();n=prompt("Enter Figure Name",i)}var r=function(s){e.app.navigate("file/"+s),e.model.set("canEdit",!0)};if(n){if(t.figureName=n,!APP_SERVED_BY_OMERO){this.model.set("figureName",n),this.model.save_to_download(t);return}t.success=t.success||r,this.model.save_to_OMERO(t)}},export_json:function(t){t.preventDefault(),Gv(this.model.figure_toJSON())},import_json:function(t){t.preventDefault();var e=!0;this.model.checkSaveAndClear(function(){Vn("importJsonModal")},e)},import_json_form:function(t){t.preventDefault();var e=A(".importJsonForm .form-control").val();this.model.figure_fromJSON(e),$r("importJsonModal"),A("#importJsonModal textarea").val(""),this.render()},copy_selected_panels:function(t){if(t.preventDefault(),this.modal_visible())return!0;var e=this.model.getSelected(),n=[];e.forEach(function(i){var r=i.toJSON();r=JSON.parse(JSON.stringify(r)),delete r.id,n.push(r)}),this.model.set("clipboard",{PANELS:n}),this.$pasteBtn.removeClass("disabled")},paste_panels:function(t){if(t.preventDefault(),this.modal_visible())return!0;var e=this.model.get("clipboard"),n;if(e&&"PANELS"in e)n=e.PANELS;else if(e&&"SHAPES"in e){n=e.SHAPES;var i=this.model.getSelected(),r=!0;i.forEach(function(X){var G=X.add_shapes(n);G||(r=!1)});var s=i.length>1?"s":"";r||Zi("Paste Failure","Some shapes may be outside the visible 'viewport' of panel"+s+". Target image"+s+" may be too small or zoomed in too much. Try zooming out before pasting again, or paste to a bigger image.",["OK"]);return}else return;var o=this;this.model.clearSelected();let l=JSON.parse(JSON.stringify(n));var h,p,m,y;De.each(l,function(X,G){var V=X.y,K=X.x,ae=V+X.height,de=K+X.width;G===0?(h=V,p=K,m=ae,y=de):(h=Math.min(h,V),p=Math.min(p,K),m=Math.max(m,ae),y=Math.max(y,de))});var E=m-h,C=y-p,N=0,F=0;C>E?F=E+E/20:N=C+C/20,l=Qv(l),De.each(l,function(X){X.x=X.x+N,X.y=X.y+F,o.model.panels.create(X)}),De.each(n,function(X){X.x=X.x+N,X.y=X.y+F}),this.model.notifySelectionChange()},select_all:function(t){if(t.preventDefault(),this.modal_visible())return!0;this.model.select_all()},deleteSelectedPanels:function(t){if(t.preventDefault(),this.modal_visible())return!0;this.model.deleteSelected()},renderZoom:function(){var t=this.model.get("curr_zoom"),e=t*.01,n="scale("+e+", "+e+")",i=this.getCentre(!0);this.$canvas.css({transform:n,"-webkit-transform":n,"-ms-transform":n});var r=this.model.get("canvas_width"),s=this.model.get("canvas_height"),o=r*e,l=s*e;this.$canvas_wrapper.css({width:o+"px",height:l+"px"});var h=(l-s)/2,p=(o-r)/2;this.$canvas.css({top:h+"px",left:p+"px"}),i&&this.setCentre(i),A("#zoom_input").val(t)},reCentre:function(){var t=this.model.getFigureSize();this.setCentre({x:t.w/2,y:t.h/2})},getCentre:function(t){var e=this.model,n=e.get("curr_zoom");if(t&&(n=e.previous("curr_zoom")),n!==void 0){var i=this.$main.width(),r=this.$main.height(),s=this.$canvas_wrapper.offset(),o=this.$main.offset(),l=s.left-o.left,h=s.top-o.top,p=-l+i/2,m=-h+r/2,y=n*.01,E=this.model.getFigureSize(),C=(e.get("canvas_width")-E.w)/2,N=(e.get("canvas_height")-E.h)/2;return{x:p/y-C,y:m/y-N}}},setCentre:function(t,e){var n=this.model,i=this.model.getFigureSize(),r=(n.get("canvas_width")-i.w)/2,s=(n.get("canvas_height")-i.h)/2,o=n.get("curr_zoom"),l=o*.01,h=(t.x+r)*l,p=(t.y+s)*l,m=this.$main.width(),y=this.$main.height(),E=h-m/2,C=p-y/2;e=e||0,this.$main.animate({scrollLeft:E,scrollTop:C},e)},zoom_paper_to_fit:function(t){var e=this.model,n=this.model.getFigureSize(),i=this.$main.width(),r=this.$main.height(),s=i/(n.w+100),o=r/(n.h+100),l=Math.min(s,o);l=l*100>>0,e.set("curr_zoom",l),A("#zoom_slider").val(l);var h=this;setTimeout(function(){h.reCentre()},10)},addOne:function(t){var e=this.model.get("page_color"),n=new zy({model:t,page_color:e});this.$figure.append(n.el),n.render()},renderLoadingSpinner:function(){this.model.get("loading_count")>0?A("#addImagesSpinner").show():A("#addImagesSpinner").hide()},renderFigureName:function(){var t="OMERO.figure",e=this.model.get("figureName");e&&e.length>0?t+=" - "+e:e="",A("title").text(t),A(".figure-title").text(e)},renderSaveBtn:function(){var t=this.model.get("canEdit"),e=typeof this.model.get("fileId")>"u",n=t||e?"Save":"Can't Save";this.$saveBtn.text(n),this.model.get("unsaved")&&(t||e)?(this.$saveBtn.removeAttr("disabled"),this.$saveOption.removeClass("disabled")):(this.$saveBtn.attr("disabled","disabled"),this.$saveOption.addClass("disabled")),this.model.get("fileId")?this.$deleteOption.removeClass("disabled"):this.$deleteOption.addClass("disabled")},renderSelectionChange:function(){var t=A(".delete_panel",this.$el);this.model.getSelected().length>0?(t.removeAttr("disabled"),this.$copyBtn.removeClass("disabled")):(t.attr("disabled","disabled"),this.$copyBtn.addClass("disabled"))},renderPanels:function(){A(".imagePanel",this.$figure).remove(),this.model.panels.forEach((function(t){this.addOne(t)}).bind(this))},render:function(){var t=this.model;t.get("curr_zoom")*.01;var e=t.get("paper_width"),n=t.get("paper_height"),i=t.get("page_color"),r=this.model.getFigureSize(),s=Math.max(t.get("canvas_width"),r.w),o=Math.max(t.get("canvas_height"),r.h),l=t.get("page_count"),h=t.get("paper_spacing"),p=(s-r.w)/2,m=(o-r.h)/2,y=A(".paper"),E,C,N,F;if(y.length!==l){y.remove();for(var X=0;X<l;X++)N=Math.floor(X/r.cols),F=X%r.cols,C=N*(n+h),E=F*(e+h),A("<div class='paper'></div>").css({left:E,top:C}).prependTo(this.$figure);y=A(".paper")}return y.css({width:e,height:n,"background-color":"#"+i}),this.$figure.css({width:r.w,height:r.h,left:p,top:m}),A("#canvas").css({width:s,height:o}),this.zoom_paper_to_fit(),this}});var Fy=dt.View.extend({el:A("#alignment-toolbars"),model:Oi,events:{"click .aleft":"align_left","click .agrid":"align_grid","click .atop":"align_top","click .aright":"align_right","click .abottom":"align_bottom","click .awidth":"align_width","click .aheight":"align_height","click .asize":"align_size","click .amagnification":"align_magnification","click #custom_grid_gap":"custom_grid_gap"},initialize:function(){this.listenTo(this.model,"change:selection",this.render),this.$buttons=A(".alignment-buttons button",this.$el)},align_left:function(t){t.preventDefault(),this.model.align_left()},align_grid:function(t){t.preventDefault();let e=document.querySelector('input[name="grid_gap"]:checked').value;this.model.align_grid(e)},align_width:function(t){t.preventDefault(),this.model.align_size(!0,!1)},align_height:function(t){t.preventDefault(),this.model.align_size(!1,!0)},align_size:function(t){t.preventDefault(),this.model.align_size(!0,!0)},align_magnification:function(t){t.preventDefault(),this.model.align_magnification()},align_top:function(t){t.preventDefault(),this.model.align_top()},align_right:function(t){t.preventDefault(),this.model.align_right()},align_bottom:function(t){t.preventDefault(),this.model.align_bottom()},custom_grid_gap:function(){let t=A("#custom_grid_gap").attr("value"),e=prompt("Enter grid gap in pixels:",t);if(e=parseFloat(e),isNaN(e)){alert("Please enter a valid number (of pixels)");return}A("#custom_grid_gap").attr("value",e),A("#custom_grid_gap_label").text("("+e+" px)")},render:function(){this.model.getSelected().length>1?this.$buttons.removeAttr("disabled"):this.$buttons.attr("disabled","disabled")}});function Ny(t){return new Ry(t)}var vd=function(t){var e=this.figureModel.get("curr_zoom")*.01,n=this.figureModel.getFigureSize(),i=(this.figureModel.get("canvas_height")-n.h)/2,r=(this.figureModel.get("canvas_width")-n.w)/2,s=t.x/e-r-1,o=t.y/e-i-1,l=t.width/e,h=t.height/e;return{x:s>>0,y:o>>0,width:l>>0,height:h>>0}},yd=dt.Model.extend({initialize:function(t){this.panelModel=t.panel,this.figureModel=t.figure,this.renderFromModel(),this.listenTo(this.figureModel,"change:curr_zoom change:paper_width change:paper_height change:page_count",this.renderFromModel),this.listenTo(this.panelModel,"change:x change:y change:width change:height",this.renderFromModel),this.listenTo(this.panelModel,"drag_resize",this.renderFromTrigger),this.listenTo(this.panelModel,"change:selected",this.renderSelection),this.panelModel.on("destroy",this.clear,this),this.listenTo(this,"drag_xy",this.drag_xy),this.listenTo(this,"drag_xy_stop",this.drag_xy_stop),this.listenTo(this,"drag_resize",this.drag_resize),this.listenTo(this,"drag_resize_stop",this.drag_resize_stop),this.bind("clicked",function(e){this.handleClick(e[0])})},getSvgCoords:function(t){var e=this.figureModel.get("curr_zoom")*.01,n=this.figureModel.getFigureSize(),i=(this.figureModel.get("canvas_height")-n.h)/2,r=(this.figureModel.get("canvas_width")-n.w)/2,s=(r+1+t.x)*e,o=(i+1+t.y)*e,l=t.width*e,h=t.height*e;return{x:s,y:o,width:l,height:h}},getModelCoords:vd,drag_xy:function(t,e){var n=this.figureModel.get("curr_zoom")*.01,i=t[0]/n,r=t[1]/n;this.figureModel.drag_xy(i,r,e)},drag_xy_stop:function(t){this.drag_xy(t,!0)},drag_resize:function(t){var e=this.getModelCoords({x:t[0],y:t[1],width:t[2],height:t[3]});this.panelModel.drag_resize(e.x,e.y,e.width,e.height)},drag_resize_stop:function(t){var e=this.getModelCoords({x:t[0],y:t[1],width:t[2],height:t[3]});this.panelModel.save(e)},renderFromModel:function(){this.set(this.getSvgCoords({x:this.panelModel.get("x"),y:this.panelModel.get("y"),width:this.panelModel.get("width"),height:this.panelModel.get("height")}))},renderFromTrigger:function(t){this.getSvgCoords({x:t[0],y:t[1],width:t[2],height:t[3]}),this.set(this.getSvgCoords({x:t[0],y:t[1],width:t[2],height:t[3]}))},renderSelection:function(){this.set("selected",this.panelModel.get("selected"))},handleClick:function(t){t.shiftKey?this.figureModel.addSelected(this.panelModel):this.figureModel.setSelected(this.panelModel)},clear:function(){this.destroy()}}),Dy=yd.extend({defaults:{x:0,y:0,width:0,height:0},initialize:function(t){this.figureModel=t.figureModel,this.listenTo(this,"drag_xy",this.drag_xy),this.listenTo(this,"drag_xy_stop",this.drag_xy_stop),this.listenTo(this,"drag_resize",this.drag_resize),this.listenTo(this,"drag_resize_stop",this.drag_resize_stop),this.listenTo(this.figureModel,"change:selection",this.updateSelection),this.listenTo(this.figureModel,"change:curr_zoom change:paper_height change:paper_width",this.updateSelection),this.listenTo(this.figureModel,"drag_xy",this.update_xy)},updateSelection:function(){var t=this.figureModel.getSelected();if(t.length<1){this.set({x:0,y:0,width:0,height:0,selected:!1});return}var e=0,n=0;t.forEach(function(s){var o=s.get("x"),l=s.get("y"),h=s.get("width"),p=s.get("height");e=Math.max(e,o+h),n=Math.max(n,l+p)});const i=t.getMin("x"),r=t.getMin("y");this.set(this.getSvgCoords({x:i,y:r,width:e-i,height:n-r})),this.set("selected",!0)},update_xy:function(t){if(this.get("selected")){var e=this.getSvgCoords({x:t[0],y:t[1],width:0,height:0});this.set({x:e.x,y:e.y})}},drag_xy:function(t,e){var n=t[0]+this.get("x"),i=t[1]+this.get("y"),r=[n,i,this.get("width"),this.get("height")];this.notifyModelofDrag(r,e)},drag_xy_stop:function(t,e){this.drag_xy(t,!0),this.set({x:t[0]+this.get("x"),y:t[1]+this.get("y")})},drag_resize:function(t,e){this.notifyModelofDrag(t,e)},drag_resize_stop:function(t){this.notifyModelofDrag(t,!0),this.set({x:t[0],y:t[1],width:t[2],height:t[3]})},notifyModelofDrag:function(t,e){var n=this.getModelCoords({x:this.get("x"),y:this.get("y"),width:this.get("width"),height:this.get("height")}),i=this.getModelCoords({x:t[0],y:t[1],width:t[2],height:t[3]});this.figureModel.multiselectdrag(n.x,n.y,n.width,n.height,i.x,i.y,i.width,i.height,e)},handleClick:function(t){}}),Ly=dt.View.extend({initialize:function(t){var e=this,n=this.model.get("canvas_width"),i=this.model.get("canvas_height");this.figureModel=this.model,this.raphael_paper=On("canvas_wrapper",n,i),e.$dragOutline=A("<div style='border: dotted #0a0a0a 1px; position:absolute; z-index:1'></div>").appendTo("#canvas_wrapper"),e.outlineStyle=e.$dragOutline.get(0).style,e.dragging=!1,e.drag_start_x=0,e.drag_start_y=0,A("#canvas_wrapper>svg").mousedown(function(o){e.dragging=!0;var l=A(this).parent().offset();e.left=e.drag_start_x=o.pageX-l.left,e.top=e.drag_start_y=o.pageY-l.top,e.dx=0,e.dy=0,e.$dragOutline.css({left:e.drag_start_x,top:e.drag_start_y,width:0,height:0}).show()}).mousemove(function(o){if(e.dragging){var l=A(this).parent().offset();e.left=e.drag_start_x,e.top=e.drag_start_y,e.dx=o.pageX-l.left-e.drag_start_x,e.dy=o.pageY-l.top-e.drag_start_y,e.dx<0&&(e.left=e.left+e.dx,e.dx=Math.abs(e.dx)),e.dy<0&&(e.top=e.top+e.dy,e.dy=Math.abs(e.dy)),e.$dragOutline.css({left:e.left,top:e.top,width:e.dx,height:e.dy})}}).mouseup(function(o){e.dragging&&(e.handleClick(o),e.$dragOutline.hide()),e.dragging=!1}),this.model.panels.on("add",this.addOne,this),this.listenTo(this.model,"change:curr_zoom",this.renderZoom);var r=new Dy({figureModel:this.model}),s=new H1({model:r,paper:this.raphael_paper,handle_wh:7,handles_toFront:!0,fixed_ratio:!0});s.selected_line_attrs={"stroke-width":1,stroke:"#4b80f9"},this.renderZoom()},addOne:function(t){var e=new yd({panel:t,figure:this.model});new H1({model:e,paper:this.raphael_paper,handle_wh:5,disable_handles:!0,fixed_ratio:!0})},remove:function(){},renderZoom:function(){var t=this.model.get("curr_zoom")*.01,e=this.model.get("canvas_width")*t,n=this.model.get("canvas_height")*t;this.raphael_paper.setSize(e,n)},getModelCoords:vd,handleClick:function(t){if(t.shiftKey||this.model.clearSelected(),this.dx>0||this.dy>0){var e=this.getModelCoords({x:this.left,y:this.top,width:this.dx,height:this.dy});this.model.selectByRegion(e)}}});/**!
 * Sortable 1.15.3
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Rh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function wr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rh(Object(n),!0).forEach(function(i){Py(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rh(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Va(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Va=function(e){return typeof e}:Va=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Va(t)}function Py(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lr(){return Lr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Lr.apply(this,arguments)}function $y(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function By(t,e){if(t==null)return{};var n=$y(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}var Wy="1.15.3";function Rr(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Br=Rr(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ha=Rr(/Edge/i),Fh=Rr(/firefox/i),Ao=Rr(/safari/i)&&!Rr(/chrome/i)&&!Rr(/android/i),bd=Rr(/iP(ad|od|hone)/i),wd=Rr(/chrome/i)&&Rr(/android/i),xd={capture:!1,passive:!1};function Ut(t,e,n){t.addEventListener(e,n,!Br&&xd)}function Bt(t,e,n){t.removeEventListener(e,n,!Br&&xd)}function rl(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function Ed(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function lr(t,e,n,i){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&rl(t,e):rl(t,e))||i&&t===n)return t;if(t===n)break}while(t=Ed(t))}return null}var Nh=/\s+/g;function $i(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(Nh," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(Nh," ")}}function Et(t,e,n){var i=t&&t.style;if(i){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in i)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),i[e]=n+(typeof n=="string"?"":"px")}}function Vs(t,e){var n="";if(typeof t=="string")n=t;else do{var i=Et(t,"transform");i&&i!=="none"&&(n=i+" "+n)}while(!e&&(t=t.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function Sd(t,e,n){if(t){var i=t.getElementsByTagName(e),r=0,s=i.length;if(n)for(;r<s;r++)n(i[r],r);return i}return[]}function yr(){var t=document.scrollingElement;return t||document.documentElement}function Pn(t,e,n,i,r){if(!(!t.getBoundingClientRect&&t!==window)){var s,o,l,h,p,m,y;if(t!==window&&t.parentNode&&t!==yr()?(s=t.getBoundingClientRect(),o=s.top,l=s.left,h=s.bottom,p=s.right,m=s.height,y=s.width):(o=0,l=0,h=window.innerHeight,p=window.innerWidth,m=window.innerHeight,y=window.innerWidth),(e||n)&&t!==window&&(r=r||t.parentNode,!Br))do if(r&&r.getBoundingClientRect&&(Et(r,"transform")!=="none"||n&&Et(r,"position")!=="static")){var E=r.getBoundingClientRect();o-=E.top+parseInt(Et(r,"border-top-width")),l-=E.left+parseInt(Et(r,"border-left-width")),h=o+s.height,p=l+s.width;break}while(r=r.parentNode);if(i&&t!==window){var C=Vs(r||t),N=C&&C.a,F=C&&C.d;C&&(o/=F,l/=N,y/=N,m/=F,h=o+m,p=l+y)}return{top:o,left:l,bottom:h,right:p,width:y,height:m}}}function Dh(t,e,n){for(var i=Jr(t,!0),r=Pn(t)[e];i;){var s=Pn(i)[n],o=void 0;if(o=r>=s,!o)return i;if(i===yr())break;i=Jr(i,!1)}return!1}function no(t,e,n,i){for(var r=0,s=0,o=t.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==St.ghost&&(i||o[s]!==St.dragged)&&lr(o[s],n.draggable,t,!1)){if(r===e)return o[s];r++}s++}return null}function W2(t,e){for(var n=t.lastElementChild;n&&(n===St.ghost||Et(n,"display")==="none"||e&&!rl(n,e));)n=n.previousElementSibling;return n||null}function qi(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==St.clone&&(!e||rl(t,e))&&n++;return n}function Lh(t){var e=0,n=0,i=yr();if(t)do{var r=Vs(t),s=r.a,o=r.d;e+=t.scrollLeft*s,n+=t.scrollTop*o}while(t!==i&&(t=t.parentNode));return[e,n]}function Hy(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[n][i])return Number(n)}return-1}function Jr(t,e){if(!t||!t.getBoundingClientRect)return yr();var n=t,i=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=Et(n);if(n.clientWidth<n.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return yr();if(i||e)return n;i=!0}}while(n=n.parentNode);return yr()}function Vy(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function h1(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Io;function Td(t,e){return function(){if(!Io){var n=arguments,i=this;n.length===1?t.call(i,n[0]):t.apply(i,n),Io=setTimeout(function(){Io=void 0},e)}}}function Uy(){clearTimeout(Io),Io=void 0}function Cd(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function kd(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function Ad(t,e,n){var i={};return Array.from(t.children).forEach(function(r){var s,o,l,h;if(!(!lr(r,e.draggable,t,!1)||r.animated||r===n)){var p=Pn(r);i.left=Math.min((s=i.left)!==null&&s!==void 0?s:1/0,p.left),i.top=Math.min((o=i.top)!==null&&o!==void 0?o:1/0,p.top),i.right=Math.max((l=i.right)!==null&&l!==void 0?l:-1/0,p.right),i.bottom=Math.max((h=i.bottom)!==null&&h!==void 0?h:-1/0,p.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var Ci="Sortable"+new Date().getTime();function jy(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(r){if(!(Et(r,"display")==="none"||r===St.ghost)){t.push({target:r,rect:Pn(r)});var s=wr({},t[t.length-1].rect);if(r.thisAnimationDuration){var o=Vs(r,!0);o&&(s.top-=o.f,s.left-=o.e)}r.fromRect=s}})}},addAnimationState:function(i){t.push(i)},removeAnimationState:function(i){t.splice(Hy(t,{target:i}),1)},animateAll:function(i){var r=this;if(!this.options.animation){clearTimeout(e),typeof i=="function"&&i();return}var s=!1,o=0;t.forEach(function(l){var h=0,p=l.target,m=p.fromRect,y=Pn(p),E=p.prevFromRect,C=p.prevToRect,N=l.rect,F=Vs(p,!0);F&&(y.top-=F.f,y.left-=F.e),p.toRect=y,p.thisAnimationDuration&&h1(E,y)&&!h1(m,y)&&(N.top-y.top)/(N.left-y.left)===(m.top-y.top)/(m.left-y.left)&&(h=Xy(N,E,C,r.options)),h1(y,m)||(p.prevFromRect=m,p.prevToRect=y,h||(h=r.options.animation),r.animate(p,N,y,h)),h&&(s=!0,o=Math.max(o,h),clearTimeout(p.animationResetTimer),p.animationResetTimer=setTimeout(function(){p.animationTime=0,p.prevFromRect=null,p.fromRect=null,p.prevToRect=null,p.thisAnimationDuration=null},h),p.thisAnimationDuration=h)}),clearTimeout(e),s?e=setTimeout(function(){typeof i=="function"&&i()},o):typeof i=="function"&&i(),t=[]},animate:function(i,r,s,o){if(o){Et(i,"transition",""),Et(i,"transform","");var l=Vs(this.el),h=l&&l.a,p=l&&l.d,m=(r.left-s.left)/(h||1),y=(r.top-s.top)/(p||1);i.animatingX=!!m,i.animatingY=!!y,Et(i,"transform","translate3d("+m+"px,"+y+"px,0)"),this.forRepaintDummy=Yy(i),Et(i,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),Et(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){Et(i,"transition",""),Et(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},o)}}}}function Yy(t){return t.offsetWidth}function Xy(t,e,n,i){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*i.animation}var Rs=[],u1={initializeByDefault:!0},ua={mount:function(e){for(var n in u1)u1.hasOwnProperty(n)&&!(n in e)&&(e[n]=u1[n]);Rs.forEach(function(i){if(i.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Rs.push(e)},pluginEvent:function(e,n,i){var r=this;this.eventCanceled=!1,i.cancel=function(){r.eventCanceled=!0};var s=e+"Global";Rs.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][s]&&n[o.pluginName][s](wr({sortable:n},i)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](wr({sortable:n},i)))})},initializePlugins:function(e,n,i,r){Rs.forEach(function(l){var h=l.pluginName;if(!(!e.options[h]&&!l.initializeByDefault)){var p=new l(e,n,e.options);p.sortable=e,p.options=e.options,e[h]=p,Lr(i,p.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,n){var i={};return Rs.forEach(function(r){typeof r.eventProperties=="function"&&Lr(i,r.eventProperties.call(n[r.pluginName],e))}),i},modifyOption:function(e,n,i){var r;return Rs.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(r=s.optionListeners[n].call(e[s.pluginName],i))}),r}};function qy(t){var e=t.sortable,n=t.rootEl,i=t.name,r=t.targetEl,s=t.cloneEl,o=t.toEl,l=t.fromEl,h=t.oldIndex,p=t.newIndex,m=t.oldDraggableIndex,y=t.newDraggableIndex,E=t.originalEvent,C=t.putSortable,N=t.extraEventProperties;if(e=e||n&&n[Ci],!!e){var F,X=e.options,G="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!Br&&!ha?F=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(F=document.createEvent("Event"),F.initEvent(i,!0,!0)),F.to=o||n,F.from=l||n,F.item=r||n,F.clone=s,F.oldIndex=h,F.newIndex=p,F.oldDraggableIndex=m,F.newDraggableIndex=y,F.originalEvent=E,F.pullMode=C?C.lastPutMode:void 0;var V=wr(wr({},N),ua.getEventProperties(i,e));for(var K in V)F[K]=V[K];n&&n.dispatchEvent(F),X[G]&&X[G].call(e,F)}}var Zy=["evt"],Ti=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=i.evt,s=By(i,Zy);ua.pluginEvent.bind(St)(e,n,wr({dragEl:Xe,parentEl:Cn,ghostEl:kt,rootEl:_n,nextEl:ms,lastDownEl:Ua,cloneEl:xn,cloneHidden:Zr,dragStarted:Eo,putSortable:qn,activeSortable:St.active,originalEvent:r,oldIndex:Ws,oldDraggableIndex:Oo,newIndex:Bi,newDraggableIndex:Yr,hideGhostForTarget:zd,unhideGhostForTarget:Rd,cloneNowHidden:function(){Zr=!0},cloneNowShown:function(){Zr=!1},dispatchSortableEvent:function(l){fi({sortable:n,name:l,originalEvent:r})}},s))};function fi(t){qy(wr({putSortable:qn,cloneEl:xn,targetEl:Xe,rootEl:_n,oldIndex:Ws,oldDraggableIndex:Oo,newIndex:Bi,newDraggableIndex:Yr},t))}var Xe,Cn,kt,_n,ms,Ua,xn,Zr,Ws,Bi,Oo,Yr,Ma,qn,$s=!1,sl=!1,ol=[],ds,or,f1,d1,Ph,$h,Eo,Fs,Mo,zo=!1,za=!1,ja,ti,p1=[],j1=!1,al=[],Cl=typeof document<"u",Ra=bd,Bh=ha||Br?"cssFloat":"float",Gy=Cl&&!wd&&!bd&&"draggable"in document.createElement("div"),Id=function(){if(Cl){if(Br)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),Od=function(e,n){var i=Et(e),r=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),s=no(e,0,n),o=no(e,1,n),l=s&&Et(s),h=o&&Et(o),p=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Pn(s).width,m=h&&parseInt(h.marginLeft)+parseInt(h.marginRight)+Pn(o).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&l.float&&l.float!=="none"){var y=l.float==="left"?"left":"right";return o&&(h.clear==="both"||h.clear===y)?"vertical":"horizontal"}return s&&(l.display==="block"||l.display==="flex"||l.display==="table"||l.display==="grid"||p>=r&&i[Bh]==="none"||o&&i[Bh]==="none"&&p+m>r)?"vertical":"horizontal"},Ky=function(e,n,i){var r=i?e.left:e.top,s=i?e.right:e.bottom,o=i?e.width:e.height,l=i?n.left:n.top,h=i?n.right:n.bottom,p=i?n.width:n.height;return r===l||s===h||r+o/2===l+p/2},Jy=function(e,n){var i;return ol.some(function(r){var s=r[Ci].options.emptyInsertThreshold;if(!(!s||W2(r))){var o=Pn(r),l=e>=o.left-s&&e<=o.right+s,h=n>=o.top-s&&n<=o.bottom+s;if(l&&h)return i=r}}),i},Md=function(e){function n(s,o){return function(l,h,p,m){var y=l.options.group.name&&h.options.group.name&&l.options.group.name===h.options.group.name;if(s==null&&(o||y))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return n(s(l,h,p,m),o)(l,h,p,m);var E=(o?l:h).options.group.name;return s===!0||typeof s=="string"&&s===E||s.join&&s.indexOf(E)>-1}}var i={},r=e.group;(!r||Va(r)!="object")&&(r={name:r}),i.name=r.name,i.checkPull=n(r.pull,!0),i.checkPut=n(r.put),i.revertClone=r.revertClone,e.group=i},zd=function(){!Id&&kt&&Et(kt,"display","none")},Rd=function(){!Id&&kt&&Et(kt,"display","")};Cl&&!wd&&document.addEventListener("click",function(t){if(sl)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),sl=!1,!1},!0);var ps=function(e){if(Xe){e=e.touches?e.touches[0]:e;var n=Jy(e.clientX,e.clientY);if(n){var i={};for(var r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);i.target=i.rootEl=n,i.preventDefault=void 0,i.stopPropagation=void 0,n[Ci]._onDragOver(i)}}},Qy=function(e){Xe&&Xe.parentNode[Ci]._isOutsideThisEl(e.target)};function St(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Lr({},e),t[Ci]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Od(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,l){o.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:St.supportPointer!==!1&&"PointerEvent"in window&&!Ao,emptyInsertThreshold:5};ua.initializePlugins(this,t,n);for(var i in n)!(i in e)&&(e[i]=n[i]);Md(e);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=e.forceFallback?!1:Gy,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Ut(t,"pointerdown",this._onTapStart):(Ut(t,"mousedown",this._onTapStart),Ut(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ut(t,"dragover",this),Ut(t,"dragenter",this)),ol.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Lr(this,jy())}St.prototype={constructor:St,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Fs=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,Xe):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,i=this.el,r=this.options,s=r.preventOnFilter,o=e.type,l=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,h=(l||e).target,p=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||h,m=r.filter;if(ab(i),!Xe&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||r.disabled)&&!p.isContentEditable&&!(!this.nativeDraggable&&Ao&&h&&h.tagName.toUpperCase()==="SELECT")&&(h=lr(h,r.draggable,i,!1),!(h&&h.animated)&&Ua!==h)){if(Ws=qi(h),Oo=qi(h,r.draggable),typeof m=="function"){if(m.call(this,e,h,this)){fi({sortable:n,rootEl:p,name:"filter",targetEl:h,toEl:i,fromEl:i}),Ti("filter",n,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(m&&(m=m.split(",").some(function(y){if(y=lr(p,y.trim(),i,!1),y)return fi({sortable:n,rootEl:y,name:"filter",targetEl:h,fromEl:i,toEl:i}),Ti("filter",n,{evt:e}),!0}),m)){s&&e.cancelable&&e.preventDefault();return}r.handle&&!lr(p,r.handle,i,!1)||this._prepareDragStart(e,l,h)}}},_prepareDragStart:function(e,n,i){var r=this,s=r.el,o=r.options,l=s.ownerDocument,h;if(i&&!Xe&&i.parentNode===s){var p=Pn(i);if(_n=s,Xe=i,Cn=Xe.parentNode,ms=Xe.nextSibling,Ua=i,Ma=o.group,St.dragged=Xe,ds={target:Xe,clientX:(n||e).clientX,clientY:(n||e).clientY},Ph=ds.clientX-p.left,$h=ds.clientY-p.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,Xe.style["will-change"]="all",h=function(){if(Ti("delayEnded",r,{evt:e}),St.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!Fh&&r.nativeDraggable&&(Xe.draggable=!0),r._triggerDragStart(e,n),fi({sortable:r,name:"choose",originalEvent:e}),$i(Xe,o.chosenClass,!0)},o.ignore.split(",").forEach(function(m){Sd(Xe,m.trim(),g1)}),Ut(l,"dragover",ps),Ut(l,"mousemove",ps),Ut(l,"touchmove",ps),Ut(l,"mouseup",r._onDrop),Ut(l,"touchend",r._onDrop),Ut(l,"touchcancel",r._onDrop),Fh&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Xe.draggable=!0),Ti("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(ha||Br))){if(St.eventCanceled){this._onDrop();return}Ut(l,"mouseup",r._disableDelayedDrag),Ut(l,"touchend",r._disableDelayedDrag),Ut(l,"touchcancel",r._disableDelayedDrag),Ut(l,"mousemove",r._delayedDragTouchMoveHandler),Ut(l,"touchmove",r._delayedDragTouchMoveHandler),o.supportPointer&&Ut(l,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(h,o.delay)}else h()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Xe&&g1(Xe),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Bt(e,"mouseup",this._disableDelayedDrag),Bt(e,"touchend",this._disableDelayedDrag),Bt(e,"touchcancel",this._disableDelayedDrag),Bt(e,"mousemove",this._delayedDragTouchMoveHandler),Bt(e,"touchmove",this._delayedDragTouchMoveHandler),Bt(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?Ut(document,"pointermove",this._onTouchMove):n?Ut(document,"touchmove",this._onTouchMove):Ut(document,"mousemove",this._onTouchMove):(Ut(Xe,"dragend",this),Ut(_n,"dragstart",this._onDragStart));try{document.selection?Ya(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if($s=!1,_n&&Xe){Ti("dragStarted",this,{evt:n}),this.nativeDraggable&&Ut(document,"dragover",Qy);var i=this.options;!e&&$i(Xe,i.dragClass,!1),$i(Xe,i.ghostClass,!0),St.active=this,e&&this._appendGhost(),fi({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(or){this._lastX=or.clientX,this._lastY=or.clientY,zd();for(var e=document.elementFromPoint(or.clientX,or.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(or.clientX,or.clientY),e!==n);)n=e;if(Xe.parentNode[Ci]._isOutsideThisEl(e),n)do{if(n[Ci]){var i=void 0;if(i=n[Ci]._onDragOver({clientX:or.clientX,clientY:or.clientY,target:e,rootEl:n}),i&&!this.options.dragoverBubble)break}e=n}while(n=Ed(n));Rd()}},_onTouchMove:function(e){if(ds){var n=this.options,i=n.fallbackTolerance,r=n.fallbackOffset,s=e.touches?e.touches[0]:e,o=kt&&Vs(kt,!0),l=kt&&o&&o.a,h=kt&&o&&o.d,p=Ra&&ti&&Lh(ti),m=(s.clientX-ds.clientX+r.x)/(l||1)+(p?p[0]-p1[0]:0)/(l||1),y=(s.clientY-ds.clientY+r.y)/(h||1)+(p?p[1]-p1[1]:0)/(h||1);if(!St.active&&!$s){if(i&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(kt){o?(o.e+=m-(f1||0),o.f+=y-(d1||0)):o={a:1,b:0,c:0,d:1,e:m,f:y};var E="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");Et(kt,"webkitTransform",E),Et(kt,"mozTransform",E),Et(kt,"msTransform",E),Et(kt,"transform",E),f1=m,d1=y,or=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!kt){var e=this.options.fallbackOnBody?document.body:_n,n=Pn(Xe,!0,Ra,!0,e),i=this.options;if(Ra){for(ti=e;Et(ti,"position")==="static"&&Et(ti,"transform")==="none"&&ti!==document;)ti=ti.parentNode;ti!==document.body&&ti!==document.documentElement?(ti===document&&(ti=yr()),n.top+=ti.scrollTop,n.left+=ti.scrollLeft):ti=yr(),p1=Lh(ti)}kt=Xe.cloneNode(!0),$i(kt,i.ghostClass,!1),$i(kt,i.fallbackClass,!0),$i(kt,i.dragClass,!0),Et(kt,"transition",""),Et(kt,"transform",""),Et(kt,"box-sizing","border-box"),Et(kt,"margin",0),Et(kt,"top",n.top),Et(kt,"left",n.left),Et(kt,"width",n.width),Et(kt,"height",n.height),Et(kt,"opacity","0.8"),Et(kt,"position",Ra?"absolute":"fixed"),Et(kt,"zIndex","100000"),Et(kt,"pointerEvents","none"),St.ghost=kt,e.appendChild(kt),Et(kt,"transform-origin",Ph/parseInt(kt.style.width)*100+"% "+$h/parseInt(kt.style.height)*100+"%")}},_onDragStart:function(e,n){var i=this,r=e.dataTransfer,s=i.options;if(Ti("dragStart",this,{evt:e}),St.eventCanceled){this._onDrop();return}Ti("setupClone",this),St.eventCanceled||(xn=kd(Xe),xn.removeAttribute("id"),xn.draggable=!1,xn.style["will-change"]="",this._hideClone(),$i(xn,this.options.chosenClass,!1),St.clone=xn),i.cloneId=Ya(function(){Ti("clone",i),!St.eventCanceled&&(i.options.removeCloneOnHide||_n.insertBefore(xn,Xe),i._hideClone(),fi({sortable:i,name:"clone"}))}),!n&&$i(Xe,s.dragClass,!0),n?(sl=!0,i._loopId=setInterval(i._emulateDragOver,50)):(Bt(document,"mouseup",i._onDrop),Bt(document,"touchend",i._onDrop),Bt(document,"touchcancel",i._onDrop),r&&(r.effectAllowed="move",s.setData&&s.setData.call(i,r,Xe)),Ut(document,"drop",i),Et(Xe,"transform","translateZ(0)")),$s=!0,i._dragStartId=Ya(i._dragStarted.bind(i,n,e)),Ut(document,"selectstart",i),Eo=!0,Ao&&Et(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,i=e.target,r,s,o,l=this.options,h=l.group,p=St.active,m=Ma===h,y=l.sort,E=qn||p,C,N=this,F=!1;if(j1)return;function X(Ye,it){Ti(Ye,N,wr({evt:e,isOwner:m,axis:C?"vertical":"horizontal",revert:o,dragRect:r,targetRect:s,canSort:y,fromSortable:E,target:i,completed:V,onMove:function(z,M){return Fa(_n,n,Xe,r,z,Pn(z),e,M)},changed:K},it))}function G(){X("dragOverAnimationCapture"),N.captureAnimationState(),N!==E&&E.captureAnimationState()}function V(Ye){return X("dragOverCompleted",{insertion:Ye}),Ye&&(m?p._hideClone():p._showClone(N),N!==E&&($i(Xe,qn?qn.options.ghostClass:p.options.ghostClass,!1),$i(Xe,l.ghostClass,!0)),qn!==N&&N!==St.active?qn=N:N===St.active&&qn&&(qn=null),E===N&&(N._ignoreWhileAnimating=i),N.animateAll(function(){X("dragOverAnimationComplete"),N._ignoreWhileAnimating=null}),N!==E&&(E.animateAll(),E._ignoreWhileAnimating=null)),(i===Xe&&!Xe.animated||i===n&&!i.animated)&&(Fs=null),!l.dragoverBubble&&!e.rootEl&&i!==document&&(Xe.parentNode[Ci]._isOutsideThisEl(e.target),!Ye&&ps(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),F=!0}function K(){Bi=qi(Xe),Yr=qi(Xe,l.draggable),fi({sortable:N,name:"change",toEl:n,newIndex:Bi,newDraggableIndex:Yr,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),i=lr(i,l.draggable,n,!0),X("dragOver"),St.eventCanceled)return F;if(Xe.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||N._ignoreWhileAnimating===i)return V(!1);if(sl=!1,p&&!l.disabled&&(m?y||(o=Cn!==_n):qn===this||(this.lastPutMode=Ma.checkPull(this,p,Xe,e))&&h.checkPut(this,p,Xe,e))){if(C=this._getDirection(e,i)==="vertical",r=Pn(Xe),X("dragOverValid"),St.eventCanceled)return F;if(o)return Cn=_n,G(),this._hideClone(),X("revert"),St.eventCanceled||(ms?_n.insertBefore(Xe,ms):_n.appendChild(Xe)),V(!0);var ae=W2(n,l.draggable);if(!ae||ib(e,C,this)&&!ae.animated){if(ae===Xe)return V(!1);if(ae&&n===e.target&&(i=ae),i&&(s=Pn(i)),Fa(_n,n,Xe,r,i,s,e,!!i)!==!1)return G(),ae&&ae.nextSibling?n.insertBefore(Xe,ae.nextSibling):n.appendChild(Xe),Cn=n,K(),V(!0)}else if(ae&&nb(e,C,this)){var de=no(n,0,l,!0);if(de===Xe)return V(!1);if(i=de,s=Pn(i),Fa(_n,n,Xe,r,i,s,e,!1)!==!1)return G(),n.insertBefore(Xe,de),Cn=n,K(),V(!0)}else if(i.parentNode===n){s=Pn(i);var g=0,H,re=Xe.parentNode!==n,_e=!Ky(Xe.animated&&Xe.toRect||r,i.animated&&i.toRect||s,C),Te=C?"top":"left",ye=Dh(i,"top","top")||Dh(Xe,"top","top"),le=ye?ye.scrollTop:void 0;Fs!==i&&(H=s[Te],zo=!1,za=!_e&&l.invertSwap||re),g=rb(e,i,s,C,_e?1:l.swapThreshold,l.invertedSwapThreshold==null?l.swapThreshold:l.invertedSwapThreshold,za,Fs===i);var Pe;if(g!==0){var Le=qi(Xe);do Le-=g,Pe=Cn.children[Le];while(Pe&&(Et(Pe,"display")==="none"||Pe===kt))}if(g===0||Pe===i)return V(!1);Fs=i,Mo=g;var Ze=i.nextElementSibling,je=!1;je=g===1;var Je=Fa(_n,n,Xe,r,i,s,e,je);if(Je!==!1)return(Je===1||Je===-1)&&(je=Je===1),j1=!0,setTimeout(tb,30),G(),je&&!Ze?n.appendChild(Xe):i.parentNode.insertBefore(Xe,je?Ze:i),ye&&Cd(ye,0,le-ye.scrollTop),Cn=Xe.parentNode,H!==void 0&&!za&&(ja=Math.abs(H-Pn(i)[Te])),K(),V(!0)}if(n.contains(Xe))return V(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Bt(document,"mousemove",this._onTouchMove),Bt(document,"touchmove",this._onTouchMove),Bt(document,"pointermove",this._onTouchMove),Bt(document,"dragover",ps),Bt(document,"mousemove",ps),Bt(document,"touchmove",ps)},_offUpEvents:function(){var e=this.el.ownerDocument;Bt(e,"mouseup",this._onDrop),Bt(e,"touchend",this._onDrop),Bt(e,"pointerup",this._onDrop),Bt(e,"touchcancel",this._onDrop),Bt(document,"selectstart",this)},_onDrop:function(e){var n=this.el,i=this.options;if(Bi=qi(Xe),Yr=qi(Xe,i.draggable),Ti("drop",this,{evt:e}),Cn=Xe&&Xe.parentNode,Bi=qi(Xe),Yr=qi(Xe,i.draggable),St.eventCanceled){this._nulling();return}$s=!1,za=!1,zo=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Y1(this.cloneId),Y1(this._dragStartId),this.nativeDraggable&&(Bt(document,"drop",this),Bt(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ao&&Et(document.body,"user-select",""),Et(Xe,"transform",""),e&&(Eo&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),kt&&kt.parentNode&&kt.parentNode.removeChild(kt),(_n===Cn||qn&&qn.lastPutMode!=="clone")&&xn&&xn.parentNode&&xn.parentNode.removeChild(xn),Xe&&(this.nativeDraggable&&Bt(Xe,"dragend",this),g1(Xe),Xe.style["will-change"]="",Eo&&!$s&&$i(Xe,qn?qn.options.ghostClass:this.options.ghostClass,!1),$i(Xe,this.options.chosenClass,!1),fi({sortable:this,name:"unchoose",toEl:Cn,newIndex:null,newDraggableIndex:null,originalEvent:e}),_n!==Cn?(Bi>=0&&(fi({rootEl:Cn,name:"add",toEl:Cn,fromEl:_n,originalEvent:e}),fi({sortable:this,name:"remove",toEl:Cn,originalEvent:e}),fi({rootEl:Cn,name:"sort",toEl:Cn,fromEl:_n,originalEvent:e}),fi({sortable:this,name:"sort",toEl:Cn,originalEvent:e})),qn&&qn.save()):Bi!==Ws&&Bi>=0&&(fi({sortable:this,name:"update",toEl:Cn,originalEvent:e}),fi({sortable:this,name:"sort",toEl:Cn,originalEvent:e})),St.active&&((Bi==null||Bi===-1)&&(Bi=Ws,Yr=Oo),fi({sortable:this,name:"end",toEl:Cn,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Ti("nulling",this),_n=Xe=Cn=kt=ms=xn=Ua=Zr=ds=or=Eo=Bi=Yr=Ws=Oo=Fs=Mo=qn=Ma=St.dragged=St.ghost=St.clone=St.active=null,al.forEach(function(e){e.checked=!0}),al.length=f1=d1=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Xe&&(this._onDragOver(e),eb(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,i=this.el.children,r=0,s=i.length,o=this.options;r<s;r++)n=i[r],lr(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||ob(n));return e},sort:function(e,n){var i={},r=this.el;this.toArray().forEach(function(s,o){var l=r.children[o];lr(l,this.options.draggable,r,!1)&&(i[s]=l)},this),n&&this.captureAnimationState(),e.forEach(function(s){i[s]&&(r.removeChild(i[s]),r.appendChild(i[s]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return lr(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var i=this.options;if(n===void 0)return i[e];var r=ua.modifyOption(this,e,n);typeof r<"u"?i[e]=r:i[e]=n,e==="group"&&Md(i)},destroy:function(){Ti("destroy",this);var e=this.el;e[Ci]=null,Bt(e,"mousedown",this._onTapStart),Bt(e,"touchstart",this._onTapStart),Bt(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Bt(e,"dragover",this),Bt(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ol.splice(ol.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Zr){if(Ti("hideClone",this),St.eventCanceled)return;Et(xn,"display","none"),this.options.removeCloneOnHide&&xn.parentNode&&xn.parentNode.removeChild(xn),Zr=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Zr){if(Ti("showClone",this),St.eventCanceled)return;Xe.parentNode==_n&&!this.options.group.revertClone?_n.insertBefore(xn,Xe):ms?_n.insertBefore(xn,ms):_n.appendChild(xn),this.options.group.revertClone&&this.animate(Xe,xn),Et(xn,"display",""),Zr=!1}}};function eb(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Fa(t,e,n,i,r,s,o,l){var h,p=t[Ci],m=p.options.onMove,y;return window.CustomEvent&&!Br&&!ha?h=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(h=document.createEvent("Event"),h.initEvent("move",!0,!0)),h.to=e,h.from=t,h.dragged=n,h.draggedRect=i,h.related=r||e,h.relatedRect=s||Pn(e),h.willInsertAfter=l,h.originalEvent=o,t.dispatchEvent(h),m&&(y=m.call(p,h,o)),y}function g1(t){t.draggable=!1}function tb(){j1=!1}function nb(t,e,n){var i=Pn(no(n.el,0,n.options,!0)),r=Ad(n.el,n.options,kt),s=10;return e?t.clientX<r.left-s||t.clientY<i.top&&t.clientX<i.right:t.clientY<r.top-s||t.clientY<i.bottom&&t.clientX<i.left}function ib(t,e,n){var i=Pn(W2(n.el,n.options.draggable)),r=Ad(n.el,n.options,kt),s=10;return e?t.clientX>r.right+s||t.clientY>i.bottom&&t.clientX>i.left:t.clientY>r.bottom+s||t.clientX>i.right&&t.clientY>i.top}function rb(t,e,n,i,r,s,o,l){var h=i?t.clientY:t.clientX,p=i?n.height:n.width,m=i?n.top:n.left,y=i?n.bottom:n.right,E=!1;if(!o){if(l&&ja<p*r){if(!zo&&(Mo===1?h>m+p*s/2:h<y-p*s/2)&&(zo=!0),zo)E=!0;else if(Mo===1?h<m+ja:h>y-ja)return-Mo}else if(h>m+p*(1-r)/2&&h<y-p*(1-r)/2)return sb(e)}return E=E||o,E&&(h<m+p*s/2||h>y-p*s/2)?h>m+p/2?1:-1:0}function sb(t){return qi(Xe)<qi(t)?1:-1}function ob(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function ab(t){al.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var i=e[n];i.checked&&al.push(i)}}function Ya(t){return setTimeout(t,0)}function Y1(t){return clearTimeout(t)}Cl&&Ut(document,"touchmove",function(t){(St.active||$s)&&t.cancelable&&t.preventDefault()});St.utils={on:Ut,off:Bt,css:Et,find:Sd,is:function(e,n){return!!lr(e,n,e,!1)},extend:Vy,throttle:Td,closest:lr,toggleClass:$i,clone:kd,index:qi,nextTick:Ya,cancelNextTick:Y1,detectDirection:Od,getChild:no,expando:Ci};St.get=function(t){return t[Ci]};St.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(St.utils=wr(wr({},St.utils),i.utils)),ua.mount(i)})};St.create=function(t,e){return new St(t,e)};St.version=Wy;var Ln=[],So,X1,q1=!1,m1,_1,ll,To;function lb(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var i=n.originalEvent;this.sortable.nativeDraggable?Ut(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ut(document,"pointermove",this._handleFallbackAutoScroll):i.touches?Ut(document,"touchmove",this._handleFallbackAutoScroll):Ut(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var i=n.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?Bt(document,"dragover",this._handleAutoScroll):(Bt(document,"pointermove",this._handleFallbackAutoScroll),Bt(document,"touchmove",this._handleFallbackAutoScroll),Bt(document,"mousemove",this._handleFallbackAutoScroll)),Wh(),Xa(),Uy()},nulling:function(){ll=X1=So=q1=To=m1=_1=null,Ln.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,i){var r=this,s=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,l=document.elementFromPoint(s,o);if(ll=n,i||this.options.forceAutoScrollFallback||ha||Br||Ao){v1(n,this.options,l,i);var h=Jr(l,!0);q1&&(!To||s!==m1||o!==_1)&&(To&&Wh(),To=setInterval(function(){var p=Jr(document.elementFromPoint(s,o),!0);p!==h&&(h=p,Xa()),v1(n,r.options,p,i)},10),m1=s,_1=o)}else{if(!this.options.bubbleScroll||Jr(l,!0)===yr()){Xa();return}v1(n,this.options,Jr(l,!1),!1)}}},Lr(t,{pluginName:"scroll",initializeByDefault:!0})}function Xa(){Ln.forEach(function(t){clearInterval(t.pid)}),Ln=[]}function Wh(){clearInterval(To)}var v1=Td(function(t,e,n,i){if(e.scroll){var r=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,l=e.scrollSpeed,h=yr(),p=!1,m;X1!==n&&(X1=n,Xa(),So=e.scroll,m=e.scrollFn,So===!0&&(So=Jr(n,!0)));var y=0,E=So;do{var C=E,N=Pn(C),F=N.top,X=N.bottom,G=N.left,V=N.right,K=N.width,ae=N.height,de=void 0,g=void 0,H=C.scrollWidth,re=C.scrollHeight,_e=Et(C),Te=C.scrollLeft,ye=C.scrollTop;C===h?(de=K<H&&(_e.overflowX==="auto"||_e.overflowX==="scroll"||_e.overflowX==="visible"),g=ae<re&&(_e.overflowY==="auto"||_e.overflowY==="scroll"||_e.overflowY==="visible")):(de=K<H&&(_e.overflowX==="auto"||_e.overflowX==="scroll"),g=ae<re&&(_e.overflowY==="auto"||_e.overflowY==="scroll"));var le=de&&(Math.abs(V-r)<=o&&Te+K<H)-(Math.abs(G-r)<=o&&!!Te),Pe=g&&(Math.abs(X-s)<=o&&ye+ae<re)-(Math.abs(F-s)<=o&&!!ye);if(!Ln[y])for(var Le=0;Le<=y;Le++)Ln[Le]||(Ln[Le]={});(Ln[y].vx!=le||Ln[y].vy!=Pe||Ln[y].el!==C)&&(Ln[y].el=C,Ln[y].vx=le,Ln[y].vy=Pe,clearInterval(Ln[y].pid),(le!=0||Pe!=0)&&(p=!0,Ln[y].pid=setInterval((function(){i&&this.layer===0&&St.active._onTouchMove(ll);var Ze=Ln[this.layer].vy?Ln[this.layer].vy*l:0,je=Ln[this.layer].vx?Ln[this.layer].vx*l:0;typeof m=="function"&&m.call(St.dragged.parentNode[Ci],je,Ze,t,ll,Ln[this.layer].el)!=="continue"||Cd(Ln[this.layer].el,je,Ze)}).bind({layer:y}),24))),y++}while(e.bubbleScroll&&E!==h&&(E=Jr(E,!1)));q1=p}},30),Fd=function(e){var n=e.originalEvent,i=e.putSortable,r=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,l=e.hideGhostForTarget,h=e.unhideGhostForTarget;if(n){var p=i||s;l();var m=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,y=document.elementFromPoint(m.clientX,m.clientY);h(),p&&!p.el.contains(y)&&(o("spill"),this.onSpill({dragEl:r,putSortable:i}))}};function H2(){}H2.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var r=no(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(n,r):this.sortable.el.appendChild(n),this.sortable.animateAll(),i&&i.animateAll()},drop:Fd};Lr(H2,{pluginName:"revertOnSpill"});function V2(){}V2.prototype={onSpill:function(e){var n=e.dragEl,i=e.putSortable,r=i||this.sortable;r.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),r.animateAll()},drop:Fd};Lr(V2,{pluginName:"removeOnSpill"});St.mount(new lb);St.mount(V2,H2);const cb=`
    <p style="word-break: break-word"><% print(_.escape(name)) %></p>
    <div class="clearfix"></div>

    <table class="table" style="margin-bottom: 0;">
        <tbody>
            <tr><td style="border-top-width: 1px;">
                <span class="glyphicon glyphicon-share"></span> Open with:
                <% _.each(imageLinks, function(link, i) { %>
                    <% if (i > 0) {print("|")} %>
                    <a target="_blank" href="<%= link.url %>">
                        <%= link.text %>
                    </a>
                <% }) %>
            </td></tr>
            <tr><td class="row">
                <div class="col-sm-5"><small><strong>Image ID</strong>:</small></div>
                <div class="col-sm-7" style="position: relative">
                    <small><%= imageId %></small>
                    <button type="button"
                            style="position:absolute; top:0px; right:0px"
                            <% if(!setImageId) { %>disabled="disabled"<% } %>
                            class="btn btn-small btn-success setId">
                        Edit ID
                    </button>
                </div>

                <div class="col-sm-5"><small><strong>Dimensions (XY)</strong>:</small></div>
                <div class="col-sm-7"><small><%= orig_width %> x <%= orig_height %></small></div>

                <div class="col-sm-5"><small><strong>Z-sections</strong>:</small></div>
                <div class="col-sm-7"><small><%= sizeZ %></small></div>
                <div class="clearfix"></div>
                <div class="col-sm-5"><small><strong>Timepoints</strong>:</small></div>
                <div class="col-sm-7"><small><%= sizeT %></small></div>
                <div class="clearfix"></div>
                <div class="col-sm-5"><small><strong>Channels</strong>:</small></div>
                <div class="col-sm-7"><small>
                    <% _.each(channel_labels, function(c, i) {
                        print(_.escape(c)); print((i < channels.length-1) ? ", " : "");
                    }); %>
                </small></div>
                <div class="col-sm-5"><small><strong>Pixels Type</strong>:</small></div>
                <div class="col-sm-7"><small><%= pixelsType %></small></div>
            </td></tr>
        </tbody>
    </table>
`,hb=`


    <table id="xywh_table" class="table">
        <tbody>
            <tr><td>
                Panel

                <form class="form-inline float-end">
                    <div style="display: inline-block;">
                        <%= dpi %> dpi

                        <% if (export_dpi != dpi && !isNaN(export_dpi)) { %>
                        (Export at <%= export_dpi %> dpi
                            <% if (export_dpi > dpi) { %>
                            <button type="button" title="Delete Label" class="close btn btn-sm btn-light clear_dpi"
                                title="Remove (don't change dpi on export)"
                                aria-hidden="true" style="float: none; padding: 0; margin-top: -3px;"></button>
                            <% } %>
                        <label>)</label>
                        <% } %>
                    </div>
                    <button class="btn btn-sm btn-success set_dpi"
                        title="Resample to a higher dpi at export">Set dpi</button>
                </form>
                
            </td></tr>
            <tr><td style="border-bottom-width: 0">
                <form class="form-horizontal xywh_form" role="form" style="position:relative">
                    <div class="form-group row mb-3">
                        <label class="col-sm-2 col-form-label">X</label>
                        <div class="col-sm-4">
                            <input type="number" name="x" min="0" class="form-control input-sm" value="<%= x %>">
                        </div>
                        <label class="col-sm-2  col-form-label">Width</label>
                        <div class="col-sm-4">
                            <input type="number" name="width" min="0" class="form-control input-sm" value="<%= width %>">
                        </div>
                    </div>
                    <div class="form-group row mb-2">
                        <label class="col-sm-2 col-form-label">Y</label>
                        <div class="col-sm-4">
                            <input type="number" name="y" min="0" class="form-control input-sm" value="<%= y %>">
                        </div>
                        <label class="col-sm-2 col-form-label">
                            Height
                        </label>
                        <div class="col-sm-4">
                            <input type="number" name="height" min="0" class="form-control input-sm" value="<%= height %>">
                        </div>
                    </div>
                    <button type="button" class="btn btn-link setAspectRatio" title="Maintain aspect ratio">
                        <i class="bi-link-45deg"></i>
                        <i class="bi-check-circle-fill okSign"></i>
                    </button>
                    <div style="position:absolute; right: 100px; top: 19px; border: solid #bbb 1px; width: 9px; height: 55px; border-right: 0px;"></div>
                </form>
            </td></tr>
        </tbody>
    </table>
`;var ub=dt.View.extend({template:De.template(cb),xywh_template:De.template(hb),initialize:function(t){if(this.render=De.debounce(this.render),this.figureModel=t.figureModel,this.models=t.models,t.models.length>1){var e=this;this.models.forEach(function(n){e.listenTo(n,"change:x change:y change:width change:height change:imageId change:zoom change:min_export_dpi change:max_export_dpi",e.render)})}else t.models.length==1&&(this.model=t.models.head(),this.listenTo(this.model,"change:x change:y change:width change:height change:zoom change:min_export_dpi change:max_export_dpi",this.render),this.listenTo(this.model,"drag_resize",this.drag_resize))},events:{"click .setId":"setImageId","click .set_dpi":"set_dpi","click .clear_dpi":"clear_dpi","blur .xywh_form input":"handle_xywh","keyup .xywh_form input":"handle_xywh","click .setAspectRatio":"lockAspectRatio"},handle_xywh:function(t){if(!this.rendering&&!(t.type==="keyup"&&t.which!==13)){var e=t.target.getAttribute("name"),n=parseInt(t.target.value,10);if(!isNaN(n)){var i=this.figureModel.getFigureSize();this.ignoreChange=!0;var r=!1;this.models.forEach((function(s){if(e==="x"||e==="y"){var o=s.get(e),l={};l[e]=o;var h=this.figureModel.getPageOffset(l),p=o-h[e]+n;e==="x"?((p>i.w||p<0)&&(this.ignoreChange=!1),p=Math.min(i.w,p)):e==="y"&&((p>i.h||p<0)&&(this.ignoreChange=!1),p=Math.min(i.h,p)),p=Math.max(0,p),s.set(e,p)}else{if(n<1){this.render();return}var m={};if(m[e]=n,A(".setAspectRatio",this.$el).hasClass("aspectRatioSelected")){r=!0;var y=s.get("width"),E=s.get("height"),C=y/E;if(e==="width"){var N=n/C;m.height=N}else{var F=n*C;m.width=F}this.ignoreChange=!1}s.save(m)}}).bind(this)),setTimeout((function(){this.ignoreChange=!1,r&&A(".setAspectRatio",this.$el).addClass("aspectRatioSelected")}).bind(this),50)}}},set_dpi:function(t){t.preventDefault(),Vn("dpiModal")},clear_dpi:function(t){t.preventDefault(),this.models.forEach(function(e){e.unset("min_export_dpi")})},setImageId:function(t){t.preventDefault(),Vn("setIdModal"),A("#setIdModal .imgId").val("").focus()},lockAspectRatio:function(t){t.preventDefault(),A(".setAspectRatio",this.$el).toggleClass("aspectRatioSelected")},drag_resize:function(t){A("#xywh_table").remove();var e={x:t[0].toFixed(0),y:t[1].toFixed(0),width:t[2].toFixed(0),height:t[3].toFixed(0)},n=this.figureModel.getPageOffset(e);e.x=n.x,e.y=n.y,e.dpi=this.model.getPanelDpi(e.width,e.height),e.export_dpi=this.model.get("min_export_dpi"),this.$el.append(this.xywh_template(e))},getImageLinks:function(t,e){var n=t.map((o,l)=>({id:o,name:e[l],type:"image"})).filter(function(o){return!isNaN(o.id)}),i=t.filter(function(o){return typeof o=="string"&&o.indexOf("zarr")>-1}),r=[];if(n.length>0){var s=n.map(o=>o.id);r.push({text:"Webclient",url:WEBINDEX_URL+"?show=image-"+s.join("|image-")}),Po.forEach(function(o){var l=!1;if(typeof o.isEnabled=="function"?l=o.isEnabled(n):typeof o.supported_objects=="object"&&o.supported_objects.length>0&&(l=o.supported_objects.reduce(function(m,y){return m||y==="images"||y==="image"&&t.length===1},!1)),!!l){var h=o.url+"?image="+t.join("&image=");if(o.getUrl&&(h=o.getUrl(n,o.url)),h.indexOf(BASE_WEBFIGURE_URL)!==0){var p=o.label||o.id;r.push({text:p,url:h})}}})}return i.length==1&&r.push({text:"ome-ngff-validator",url:"https://ome.github.io/ome-ngff-validator/?source="+i[0]}),r},render:function(){if(!this.ignoreChange){this.rendering=!0;var t,e=this.models.length+" Panels Selected...",n=this.models.pluck("imageId"),i=this.models.pluck("name");if(this.models.forEach((function(o){var l=o.toJSON();De.each(["x","y","width","height"],function(m){l[m]!="-"&&(l[m]=l[m].toFixed(0))});var h=this.figureModel.getPageOffset(l);if(l.x=h.x,l.y=h.y,l.dpi=o.getPanelDpi(),l.channel_labels=l.channels.map(function(m){return m.label}),!t)t=l;else{t.name=e;var p=["imageId","orig_width","orig_height","sizeT","sizeZ","x","y","width","height","dpi","min_export_dpi","max_export_dpi","pixelsType"];De.each(p,function(m){t[m]!=l[m]&&(m==="x"||m==="y"||m==="width"||m==="height"?t[m]="":t[m]="-")}),l.channels.length!=t.channel_labels.length?t.channel_labels=["-"]:De.each(l.channels,function(m,y){t.channel_labels[y]!=m.label&&(t.channel_labels[y]="-")})}}).bind(this)),t.export_dpi=Math.min(t.dpi,t.max_export_dpi),isNaN(t.min_export_dpi)||(t.export_dpi=Math.max(t.export_dpi,t.min_export_dpi)),t.imageLinks=this.getImageLinks(n,i),t.setImageId=De.uniq(n).length==1,t){var r=this.template(t),s=this.xywh_template(t);this.$el.html(r+s)}return this.rendering=!1,this}}});const fb=`
 <div class="clearfix channel_slider_<%=idx%>" style="position: relative; padding-bottom: 4px">


    <div class="btn-group">
            <button type="button"
            title="<%= _.escape(label) %>"
                    class="btn btn-default channel-btn lutBg <% if (isDark) { print('font-white') } %>"
                    data-index="<%= idx %>"
                    style="background-color:#<%= color %>; <%= lutBgCss %>">

                    <%= _.escape(label) %>
                    <div class="<% if(active) { %>ch-btn-down<% } else if (typeof active == 'boolean') { %>ch-btn-up<% } else { %>ch-btn-flat<% }%>">&nbsp</div>
            </button>
            <button type="button" class="btn btn-default dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown" aria-expanded="false">
                <span class="visually-hidden">Toggle Dropdown</span>
              </button>
            <ul class="dropdown-menu colorpicker" data-index="<%= idx %>">
                <li>
                    <a data-color="reverse" class="reverseIntensity dropdown-item" href="#">
                        <% if(reverse) { %> <i class="bi-check-lg"></i> <% } else { %> &nbsp &nbsp <% } %>
                        Invert
                    </a>
                </li>
                <li class="dropdown-divider"></li>
                <li><a data-color="0000FF" href="#" class="dropdown-item">
                    <span style="background-color:#00f">&nbsp &nbsp &nbsp</span>&nbsp Blue
                </a></li>
                <li><a data-color="00FF00" href="#" class="dropdown-item">
                    <span style="background-color:#0f0">&nbsp &nbsp &nbsp</span>&nbsp Green
                </a></li>
                <li><a data-color="FF0000" href="#" class="dropdown-item">
                    <span style="background-color:#f00">&nbsp &nbsp &nbsp</span>&nbsp Red
                </a></li>
                <li><a data-color="FFFF00" href="#" class="dropdown-item">
                    <span style="background-color:#ff0">&nbsp &nbsp &nbsp</span>&nbsp Yellow
                </a></li>
                <li><a data-color="FFFFFF" href="#" class="dropdown-item">
                    <span style="background-color:#fff">&nbsp &nbsp &nbsp</span>&nbsp White
                </a></li>
                <li><a data-color="FF00FF" href="#" class="dropdown-item">
                    <span style="background-color:#f0f">&nbsp &nbsp &nbsp</span>&nbsp Magenta
                </a></li>
                <li><a data-color="00FFFF" href="#" class="dropdown-item">
                    <span style="background-color:#0ff">&nbsp &nbsp &nbsp</span>&nbsp Cyan
                </a></li>
                <li class="dropdown-divider"></li>
                <li><a data-color="lutpicker" href="#" class="dropdown-item">
                    <span class="hueBg">&nbsp &nbsp &nbsp</span>&nbsp Lookup Tables
                </a></li>
                <li><a data-color="colorpicker" data-oldcolor="<%= color %>" href="#" class="dropdown-item">
                    <span class="colorpickerOption">&nbsp &nbsp &nbsp</span>&nbsp More Colors...
                </a></li>
            </ul>
    </div>

    <span class="ch_start">
        <input type="number" data-window="start"
        <% if (startsNotEqual) { %>
            title="Average: <%= startAvg %> (selected images have different start values)"
            style="color: #ccc;"
        <% } %>
        data-idx="<%=idx%>" value="<%= startAvg %>" max="<%= endAvg %>">
    </span>
    <div class="ch_slider">
        <!-- We use 2 sliders to simulate a 2-handled slider -->
        <!-- We use a ::before element for background so we can 'flip' it scaleX(-1)
            without flipping the slider itself (can't just flip background-image)
         -->
        <input class="ch_start_slider" data-idx="<%=idx%>"
            data-slidemax="<%= endAvg %>"
            min="<%= min %>" max="<%= max %>" step="<%= step %>"
            type="range" value="<%= startAvg %>"
            style="background-color:#<%=color%>;
                <%= lutBgCss %>
                --scaleX: <%= reverse ? -1 : 1 %>"/>
        <!-- data-slidemin and data-slidemax used to prevent sliding start > end etc -->
        <input class="ch_end_slider" data-idx="<%=idx%>" data-slidemin="<%= startAvg %>"
            min="<%= min %>" max="<%= max %>" step="<%= step %>"
            type="range" value="<%= endAvg %>" style="background-color: rbga(1,1,1,0)"/>
    </div>
    <span class="ch_end">
        <input type="number" data-window="end"
        <% if (endsNotEqual) { %>
            title="Average: <%= endAvg %> (selected images have different end values)"
            style="color: #ccc;"
        <% } %>
        data-idx="<%=idx%>" value="<%= endAvg %>" min="<%= startAvg %>">
    </span>
</div>
`,db=`<div class="checkbox-container" title="Toggle Hilo LUT mode on channels">\r
    <input type="checkbox" id="hiloCheckbox" name="hiloCheckbox">\r
    <label for="hiloCheckbox">  Hilo LUT</label>\r
</div>\r
`,y1=100;var pb=dt.View.extend({template:De.template(fb),checkboxTemplate:De.template(db),initialize:function(t){this.models=t.models;var e=this;this.models.forEach(function(n){e.listenTo(n,"change:channels",e.render)})},events:{"keyup .ch_start":"handle_channel_input","keyup .ch_end":"handle_channel_input","click .channel-btn":"toggle_channel","click .dropdown-menu a":"pick_color","input .ch_slider input":"channel_slider_slide","change .ch_slider input":"channel_slider_stop","mousemove .ch_start_slider":"start_slider_mousemove","mousemove .ch_end_slider":"end_slider_mousemove","change #hiloCheckbox":"handle_hilo_checkbox"},start_slider_mousemove:function(t){let e=A(t.target),n=t.offsetX/e.width(),i=parseFloat(e.data("slidemax")),r=parseFloat(e.val()),s=this.get_midfraction(r,i,e);n>s&&A(".ch_end_slider",e.parent()).css("pointer-events","all")},end_slider_mousemove:function(t){let e=A(t.target),n=t.offsetX/e.width(),i=parseFloat(e.data("slidemin")),r=parseFloat(e.val()),s=this.get_midfraction(i,r,e);n<s&&e.css("pointer-events","none")},get_midfraction(t,e,n){let i=(t+e)/2,r=parseFloat(n.attr("min")),s=parseFloat(n.attr("max"));return(i-r)/(s-r)},pick_color:function(t){var e=t.currentTarget.getAttribute("data-color"),n=A(t.currentTarget).parent().parent(),i=A(t.currentTarget).attr("data-oldcolor"),r=n.attr("data-index"),s=this;if(e=="colorpicker")xl.show({color:i,success:function(l){l=l.replace("#",""),s.set_color(r,l)}});else if(e=="lutpicker")Hs.show({success:function(l){s.set_color(r,l)}});else if(e=="reverse"){var o=A("i",t.currentTarget).length>0;s.models.forEach(function(l){l.save_channel(r,"reverseIntensity",!o)})}else this.set_color(r,e);return!1},set_color:function(t,e){this.models&&this.models.forEach(function(n){n.save_channel(t,"color",e)})},hexToRgb:function(e){var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(n)return{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)};if(n=/^#?([a-f\d]{1})([a-f\d]{1})([a-f\d]{1})$/i.exec(e),n)return{r:parseInt(n[1]+"0",16),g:parseInt(n[2]+"0",16),b:parseInt(n[3]+"0",16)}},isDark:function(t){if(t.endsWith(".lut"))return!1;var e=this.hexToRgb(t);if(!e)return!1;var n,i,r,s,o,l;return n=Math.min(e.r,e.g,e.b),i=Math.max(e.r,e.g,e.b),s=i,r=i-n,i!==0?o=r/i:(s=0,o=0,l=0),r===0?l=0:e.r==i?l=(e.g-e.b)/r:e.g==i?l=2+(e.b-e.r)/r:l=4+(e.r-e.g)/r,l=l*60,l<0&&(l+=360),l=l/360,s=s/255,s<.6||l>.6&&o>.7},toggle_channel:function(t){var e=t.currentTarget.getAttribute("data-index");if(this.model)this.model.toggle_channel(e);else if(this.models){var n=A("div",t.currentTarget).hasClass("ch-btn-flat");this.models.forEach(function(i){n?i.toggle_channel(e,!0):i.toggle_channel(e)})}return!1},handle_channel_input:function(t){if(!(t.type==="keyup"&&t.which!==13)){var e=t.target.getAttribute("data-idx"),n=t.target.getAttribute("data-window");e=parseInt(e,10);var i=parseFloat(t.target.value,10);if(!isNaN(i)){if(t.target.getAttribute("max")&&i>t.target.getAttribute("max")){alert("Enter a value less than "+t.target.getAttribute("max"));return}if(t.target.getAttribute("min")&&i<t.target.getAttribute("min")){alert("Enter a value greater than "+t.target.getAttribute("min"));return}var r={};r[n]=i,this.models.forEach(function(s){s.save_channel_window(e,r)})}}},channel_slider_slide:function(t){let e=A(t.target),n=parseFloat(t.target.value),i=e.attr("max"),r=e.attr("min"),s=e.data("idx");const o=e.hasClass("ch_start_slider");if(o){let l=e.data("slidemax");if(n>l){e.val(l);return}}else{let l=e.data("slidemin");if(n<l){e.val(l);return}}n=i-r>y1?n:n.toFixed(2),o?A(`.channel_slider_${s} .ch_start input`).val(n):A(`.channel_slider_${s}  .ch_end input`).val(n)},channel_slider_stop:function(t){let e=parseFloat(t.target.value),n=A(t.target),i=n.data("idx"),r={};n.hasClass("ch_start_slider")?r.start=e:r.end=e,this.models.forEach(function(s){s.save_channel_window(i,r)})},clear:function(){return A("#channel_sliders").empty(),this},handle_hilo_checkbox:function(t){var e=t.target.checked;this.models.forEach(function(n){if(e&&!n.get("hilo_enabled")){n.save({hilo_enabled:!0,hilo_channels_state:n.get("channels").map(function(s){return{color:s.color,active:s.active}})});let i=!1,r=n.get("channels").map(function(s,o){let l={color:"hilo.lut",active:!i&&s.active};return i=i||s.active,l});n.save_channels(r)}else if(!e&&n.get("hilo_enabled")){n.save("hilo_enabled",!1);let i=n.get("channels").map(function(r,s){return n.get("hilo_channels_state")[s]});n.save_channels(i)}})},loadCheckboxState:function(){var t=this.$("#hiloCheckbox")[0];this.models.forEach(function(e){t.checked=e.get("hilo_enabled")||t.checked})},render:function(){var t=this,e=function(E,C){return E+C},n=function(E){return function(C){return C[E].color}},i=function(E){return function(C){return C[E].label}},r=function(E){return function(C){return C[E].reverseIntensity===!0}},s=function(E){return function(C){return C[E].active===!0}},o=function(E,C){return function(N){return parseFloat(N[E].window[C])}},l=function(E,C){return C===E?E:void 0},h=function(E){return function(C,N){return E(C,N)}},p=this.models.map(function(E){return E.get("channels")}),m=p.reduce(function(E,C){return C.length===E?E:!1},p[0].length);if(!m)return this;this.$el.empty(),p[0].forEach((function(E,C){var N=p.map(o(C,"start")),F=p.map(o(C,"end")),X=p.map(o(C,"min")),G=p.map(o(C,"max")),V=p.map(n(C)),K=p.map(r(C)),ae=p.map(s(C)),de=p.map(i(C)),g=N.reduce(e,0)/N.length,H=F.reduce(e,0)/F.length,re=N.reduce(l,N[0])===void 0,_e=F.reduce(l,F[0])===void 0,Te=X.reduce(h(Math.min)),ye=G.reduce(h(Math.max));ye-Te>y1?(g=parseInt(g),H=parseInt(H)):(g=g.toFixed(2),H=H.toFixed(2));var le=V.reduce(l,V[0])?V[0]:"ccc",Pe=de.reduce(l,de[0])?de[0]:" ",Le=!!K.reduce(l,K[0]),Ze=ae.reduce(l,ae[0]),je=Hs.getLutBackgroundPosition(le),Je=Hs.getLutPng(le);console.log("lutPng",Je);var Ye="--bgPos: 0 0;";le.endsWith(".lut")&&Je?(Ye=`--bgPos: 0 0; --lutPng: url('${Je}'); --pngHeight: 100%;`,le="ccc"):Ye=`--bgPos: ${je};`,le.toUpperCase()==="FFFFFF"&&(le="ccc"),le=="FFFFFF"&&(le="ccc"),Te=Math.min(Te,g),ye=Math.max(ye,H);var it=t.template({idx:C,label:Pe,startAvg:g,startsNotEqual:re,endAvg:H,endsNotEqual:_e,min:Te,max:ye,step:ye-Te>y1?1:.01,active:Ze,lutBgCss:Ye,reverse:Le,color:le,isDark:this.isDark(le)});A(it).appendTo(this.$el)}).bind(this));var y=this.checkboxTemplate();return this.$el.append(y),this.loadCheckboxState(),this}});const gb=`
    <div class="pixel_size_form" style="position:relative">
        <div class="pixel_size_div">
            Pixel Size:
            <input class="input-sm form-control pixel_size_input" placeholder="Pixel Size (<%= pixel_size_symbol %>)"
                    style="width:100px; display:none" value="<%= pixel_size_x %>">
            <span class="pixel_size_display">
                <% if (!pixel_size_x)
                    {print('<span style="color:red">NOT SET</span>')}
                else if (typeof pixel_size_x === 'number')
                    {print(pixel_size_x.toFixed(3) + " " + pixel_size_symbol)}
                else
                    {print(pixel_size_x + " " + pixel_size_symbol)} %>
            </span>
        </div>
    </div>
<form class="scalebar_form">
    <div class="row gy-2 gx-3 align-items-center" style="--bs-gutter-x: 0.3rem;">
        <div class="col-auto input-group-sm">
            <label class="col-form-label col-form-label-sm" style="width:40px">Length</label>
        </div>
        <div class="col-auto input-group-sm">
          <input type="number" class="scalebar-length input-sm form-control"
            placeholder="Length" value="<%= length %>" style="width:52px"/>
        </div>
        <div class="col-auto form-group btn-group scalebar_unit">
            <button type="button" class="scalebar-units btn btn-outline-secondary btn-sm dropdown-toggle"
                    title="Units" data-bs-toggle="dropdown">
                <span class="dropdown_icon" data-unit="<%= units %>"><%= units_symbol %></span>
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu">
                <% _.each(unit_symbols, function(u){ %>
                    <li><a class='dropdown-item' href='#'>
                        <%= u.unit %> (<span class="dropdown_icon" data-unit="<%= u.unit %>"><%= u.symbol %></span>)
                    </a></li>
                <% }); %>
            </ul>
        </div>
        <div class="form-group col-sm-auto btn-group">
            <button type="button" class="label-position btn btn-outline-secondary btn-sm dropdown-toggle"
                    title="Position" data-bs-toggle="dropdown">
                <!-- e.g. position 'topleft' -> class 'bi-box-arrow-in-up-left' -->
                <i data-position="<%= position %>" class="bi-box-arrow-in-<%= position.replace('bottom', 'down-').replace('top', 'up-') %> dropdown_icon"></i>
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu">
                <li role="presentation" class="dropdown-header">Inside Corners</li>
                <li><a class="dropdown-item" href="#">
                    <i data-position="topleft" class="bi-box-arrow-in-up-left dropdown_icon"></i>
                    Top Left</a>
                </li>
                <li><a class="dropdown-item" href="#">
                    <i data-position="topright" class="bi-box-arrow-in-up-right dropdown_icon"></i>
                    Top Right</a>
                </li>
                <li><a class="dropdown-item" href="#">
                    <i data-position="bottomleft" class="bi-box-arrow-in-down-left dropdown_icon"></i>
                    Bottom Left</a>
                </li>
                <li><a class="dropdown-item" href="#">
                    <i data-position="bottomright" class="bi-box-arrow-in-down-right dropdown_icon"></i>
                    Bottom Right</a>
                </li>
            </ul>
        </div>
        <div class="form-group col-sm-auto btn-group">
            <button type="button" class="label-color btn btn-outline-secondary btn-sm dropdown-toggle" title="Label Color"
                data-bs-toggle="dropdown">
                <span class="dropdown_icon" data-color="<%= color %>" style="background-color:#<%= color %>">&nbsp &nbsp &nbsp</span>
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu colorpicker" role="menu">
                <!-- NB: dropdown_icon is picked on choosing dropdown, replaces icon in button above -->
                <li><a class="dropdown-item" href="#">
                    <span class="dropdown_icon" data-color="000000" style="background-color:#000">&nbsp &nbsp &nbsp</span>&nbsp Black
                </a></li>
                <li><a class="dropdown-item" href="#">
                    <span class="dropdown_icon" data-color="0000FF" style="background-color:#00f">&nbsp &nbsp &nbsp</span>&nbsp Blue
                </a></li>
                <li><a class="dropdown-item" href="#">
                    <span class="dropdown_icon" data-color="00FF00" style="background-color:#0f0">&nbsp &nbsp &nbsp</span>&nbsp Green
                </a></li>
                <li><a class="dropdown-item" href="#">
                    <span class="dropdown_icon" data-color="FF0000" style="background-color:#f00">&nbsp &nbsp &nbsp</span>&nbsp Red
                </a></li>
                <li><a class="dropdown-item" href="#">
                    <span class="dropdown_icon" data-color="FFFF00" style="background-color:#ff0">&nbsp &nbsp &nbsp</span>&nbsp Yellow
                </a></li>
                <li><a class="dropdown-item" href="#">
                    <span class="dropdown_icon" data-color="FFFFFF" style="background-color:#fff">&nbsp &nbsp &nbsp</span>&nbsp White
                </a></li>
                <li><a class="dropdown-item" href="#">
                    <span class="dropdown_icon" data-color="FF00FF" style="background-color:#f0f">&nbsp &nbsp &nbsp</span>&nbsp Magenta
                </a></li>
                <li><a class="dropdown-item" href="#">
                    <span class="dropdown_icon" data-color="00FFFF" style="background-color:#0ff">&nbsp &nbsp &nbsp</span>&nbsp Cyan
                </a></li>
            </ul>
        </div>

        <div class="col-auto input-group-sm" style="flex: 1 1 auto; padding-right: 0">
            <% if (show){ %>
                <button type="submit" class="show_scalebar btn btn-sm btn-success float-end">Show</button>
            <% } else { %>
                <button type="button" class="hide_scalebar btn btn-outline-secondary btn-sm float-end">Hide</button>
            <% } %>
        </div>
    </div>
    <div class="row gy-2 gx-3 align-items-center" style="--bs-gutter-x: 0.3rem; margin-top: 0px;">
        <div class="col-auto input-group-sm">
            <label class="col-form-label col-form-label-sm" style="width:40px">Height</label>
        </div>
        <div class="form-group col-auto scalebar_length input-group-sm">
            <input type="number" class="label-text scalebar-height form-control input-sm"
            placeholder="Height" value="<%= height %>" style="width:33px" />
        </div>
        <div class="col-auto input-group-sm" style="margin-right: 0px; padding-left: 2px;">
            <label class="col-form-label col-form-label-sm">px</label>
        </div>

        <div class="col-auto input-group-sm" style="margin-left: 5px;">
            <label class="col-form-label col-form-label-sm" style="width:40px">Margin</label>
        </div>
        <div class="form-group col-auto scalebar_length input-group-sm">
            <input type="number" class="label-text scalebar-margin form-control input-sm"
            placeholder="Margin" value="<%= margin %>" style="width:33px; padding-left: 3px; padding-right: 3px;" />
        </div>
         <div class="col-auto input-group-sm" style="margin-right: 0px; padding-left: 2px;">
            <label class="col-form-label col-form-label-sm">px</label>
        </div>

        <div class="col-auto input-group-sm" style="margin-left: 5px;">
            <label class="form-check-label">Label</label>
            <input type="checkbox" class="scalebar_label form-check-input" <% if (show_label) print("checked") %> />
        </div>

        <div class="col-auto btn-group" style="padding: 0; width: 40px;">
            <button type="button" class="scalebar_font_size btn btn-outline-secondary btn-sm dropdown-toggle" title="Font Size"
            data-bs-toggle="dropdown" style="width:33px; <% if (!show_label) print("display:none") %>">
                <span class='dropdown_icon'><%= font_size %></span>
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu">
            <% _.each([6,8,10,12,14,18,21,24,36,48],function(p){
                print ("<li><a class='dropdown-item' href='#'><span class='dropdown_icon'>"+p+"</span></a></li>")
            }); %>
            </ul>
        </div>
        <div class="form-group col-auto scalebar_text" style="padding-left: 2px;">
            <% if (show_label) print("pt") %>
        </div>
    </div>
</form>
`;var mb=dt.View.extend({template:De.template(gb),initialize:function(t){this.render=De.debounce(this.render),this.models=t.models;var e=this;this.models.forEach(function(n){e.listenTo(n,"change:scalebar change:pixel_size_x change:scalebar_label",e.render)})},events:{"submit .scalebar_form":"update_scalebar","click .scalebar_label":"update_scalebar","change .btn":"dropdown_btn_changed","click .hide_scalebar":"hide_scalebar","click .pixel_size_display":"edit_pixel_size","keypress .pixel_size_input":"enter_pixel_size","blur .pixel_size_input":"save_pixel_size","keyup input[type='number']":"handle_keyup"},handle_keyup:function(t){t.which==13&&this.update_scalebar()},edit_pixel_size:function(){A(".pixel_size_display",this.$el).hide(),A(".pixel_size_input",this.$el).css("display","inline-block").focus()},done_pixel_size:function(){A(".pixel_size_display",this.$el).show(),A(".pixel_size_input",this.$el).css("display","none").focus()},enter_pixel_size:function(t){t.keyCode==13&&this.save_pixel_size(t)},save_pixel_size:function(t){this.done_pixel_size();var e=A(t.target).val();if(e.length!==0){var n=parseFloat(e);isNaN(n)||this.models.forEach(function(i){i.save("pixel_size_x",n)})}},dropdown_btn_changed:function(t){A(t.target).closest("form").submit()},hide_scalebar:function(){this.models.forEach(function(t){t.hide_scalebar()})},update_scalebar:function(t){var e=A(".scalebar_form "),n=A(".scalebar-length",e).val(),i=A(".scalebar-units span:first",e).attr("data-unit"),r=A(".label-position i:first",e).attr("data-position"),s=A(".label-color span:first",e).attr("data-color"),o=A(".scalebar_label",e).prop("checked"),l=A(".scalebar_font_size span:first",e).text().trim(),h=parseInt(A(".scalebar-height",e).val()),p=parseInt(A(".scalebar-margin",e).val());return this.models.forEach(function(m){var y=m.get("scalebar"),E={show:!0};n!="-"&&n!=""&&(E.length=parseFloat(n,10)),i!="-"?E.units=i:y&&y.units?E.units=y.units:m.get("pixel_size_x_unit")?E.units=m.get("pixel_size_x_unit"):E.units="MICROMETER",r!="-"&&(E.position=r),s!="-"&&(E.color=s),E.show_label=o,l!="-"&&(E.font_size=l),h!="-"&&!isNaN(h)&&(E.height=h),p!="-"&&!isNaN(p)&&(E.margin=p),m.save_scalebar(E)}),!1},render:function(){var t={show:!1,show_label:!0},e=!1,n,i=["PICOMETER","ANGSTROM","NANOMETER","MICROMETER","MILLIMETER","CENTIMETER","METER","KILOMETER","MEGAMETER"],r=Object.keys(LENGTH_UNITS).filter(function(o){return i.indexOf(o)>-1}).map(function(o){return A.extend({unit:o},LENGTH_UNITS[o])});r.sort(function(o,l){return o.microns>l.microns?1:-1}),t.unit_symbols=r,this.models.forEach(function(o){if(!t.pixel_size_x)t.pixel_size_x=o.get("pixel_size_x"),t.pixel_size_symbol=o.get("pixel_size_x_symbol"),t.pixel_size_unit=o.get("pixel_size_x_unit");else{let l=o.get("pixel_size_x");l=l&&l.toFixed(10),t.pixel_size_x!="-"&&t.pixel_size_x.toFixed(10)!=l&&(t.pixel_size_x="-"),t.pixel_size_symbol!=o.get("pixel_size_x_symbol")&&(t.pixel_size_symbol="-"),t.pixel_size_unit!=o.get("pixel_size_x_unit")&&(t.pixel_size_unit="-")}n=o.get("scalebar"),n&&(t.length?(t.length!=n.length&&(t.length="-"),t.units!=n.units&&(t.units="-"),t.position!=n.position&&(t.position="-"),t.color!=n.color&&(t.color="-"),n.show_label||(t.show_label=!1),t.font_size!=n.font_size&&(t.font_size="-"),t.height!=n.height&&(t.height="-"),t.margin!=n.margin&&(t.margin="-")):(t.length=n.length,t.units=n.units,t.position=n.position,t.color=n.color,t.show_label=n.show_label,t.font_size=n.font_size,t.height=n.height,t.margin=n.margin)),(!n||!n.show)&&(e=!0)}),(this.models.length===0||e)&&(t.show=!0),t.length=t.length||10,t.units=t.units||t.pixel_size_unit,t.units_symbol="-",t.units!=="-"&&(t.units_symbol=LENGTH_UNITS[t.units].symbol),t.position=t.position||"bottomright",t.color=t.color||"FFFFFF",t.font_size=t.font_size||10,t.pixel_size_symbol=t.pixel_size_symbol||"-",t.height=t.height||3,t.margin=t.margin??10;var s=this.template(t);return this.$el.html(s),this}});const _b=`<form class="colorbar_form">
    <div class="row gy-2 gx-3 align-items-center" style="--bs-gutter-x: 0.3rem;">

        <div class="col-auto input-group-sm" style="padding-right: 0px;">
            <label class="col-form-label col-form-label-sm" style="width: 60px;">Thickness</label>
        </div>
        <div class="col-auto input-group-sm"  style="padding-right: 0px;">
            <input type="number" class="colorbar-thickness input-sm form-control"
            value="<%= thickness %>" style="width:42px;" min="1" max="1000" />
        </div>
        <div class="col-auto input-group-sm"  style="padding-left: 0px; margin-right: 3px;">
            <label class="col-form-label col-form-label-sm">px</label>
        </div>

        <div class="col-auto input-group-sm" style="padding-right: 0px;">
            <label class="col-form-label col-form-label-sm">Gap</label>
        </div>
        <div class="col-auto input-group-sm"  style="padding-right: 0px;" title="Distance between panel and colorbar (negative value allowed)">
            <input type="number" class="colorbar-gap input-sm form-control"
            value="<%= gap %>" style="width:42px" />
        </div>
        <div class="col-auto input-group-sm"  style="padding-left: 0px; margin-right: 3px;">
            <label class="col-form-label col-form-label-sm">px</label>
        </div>

        <div class="form-group col-sm-auto btn-group">
            <button type="button" class="label-position btn btn-outline-secondary btn-sm dropdown-toggle"
                    title="Position" data-bs-toggle="dropdown">
                <i data-position="<%= position %>" class="bi-box-arrow-in-<%= position.replace('bottom', 'down').replace('top', 'up') %> dropdown_icon"></i>
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu">
                <li><a class="dropdown-item" href="#">
                    <i data-position="right" class="bi-box-arrow-right dropdown_icon"></i> Right</a>
                </li>
                <li><a class="dropdown-item" href="#">
                    <i data-position="left" class="bi-box-arrow-left dropdown_icon"></i> Left</a>
                </li>
                <li><a class="dropdown-item" href="#">
                    <i data-position="top" class="bi-box-arrow-up dropdown_icon"></i> Top</a>
                </li>
                <li><a class="dropdown-item" href="#">
                    <i data-position="bottom" class="bi-box-arrow-down dropdown_icon"></i> Bottom</a>
                </li>
            </ul>
        </div>

        <div class="col-auto input-group-sm" style="flex: 1 1 auto; padding-right: 0">
            <% if (show){ %>
                <button type="submit" class="show_colorbar btn btn-sm btn-success float-end">Show</button>
            <% } else { %>
                <button type="button" class="hide_colorbar btn btn-outline-secondary btn-sm float-end">Hide</button>
            <% } %>
        </div>

    </div>
    <div class="row gy-2 gx-3 align-items-center" style="--bs-gutter-x: 0.3rem;">

        <div class="col-auto input-group-sm" style="padding-right: 0px;" title="Number of ticks">
            <input type="number" class="colorbar-num-ticks input-sm form-control"
            value="<%= num_ticks %>" style="width:33px" min="2"/>
        </div>
        <div class="col-auto input-group-sm" style="padding-left: 0px;">
            <label class="col-form-label col-form-label-sm">Ticks</label>
        </div>

        <div class="form-group col-sm-auto btn-group">
            <button type="button" class="colorbar-axis-color btn btn-outline-secondary btn-sm dropdown-toggle" title="Tick Color"
                data-bs-toggle="dropdown">
                <span class="dropdown_icon" data-axis-color="<%= axis_color %>" style="background-color:#<%= axis_color %>">&nbsp &nbsp &nbsp</span>
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu colorpicker" role="menu">
                <!-- NB: dropdown_icon is picked on choosing dropdown, replaces icon in button above -->
                <li><a class="dropdown-item" href="#">
                    <span class="dropdown_icon" data-axis-color="000000" style="background-color:#000">&nbsp &nbsp &nbsp</span>&nbsp Black
                </a></li>
                <li><a class="dropdown-item" href="#">
                    <span class="dropdown_icon" data-axis-color="0000FF" style="background-color:#00f">&nbsp &nbsp &nbsp</span>&nbsp Blue
                </a></li>
                <li><a class="dropdown-item" href="#">
                    <span class="dropdown_icon" data-axis-color="00FF00" style="background-color:#0f0">&nbsp &nbsp &nbsp</span>&nbsp Green
                </a></li>
                <li><a class="dropdown-item" href="#">
                    <span class="dropdown_icon" data-axis-color="FF0000" style="background-color:#f00">&nbsp &nbsp &nbsp</span>&nbsp Red
                </a></li>
                <li><a class="dropdown-item" href="#">
                    <span class="dropdown_icon" data-axis-color="FFFF00" style="background-color:#ff0">&nbsp &nbsp &nbsp</span>&nbsp Yellow
                </a></li>
                <li><a class="dropdown-item" href="#">
                    <span class="dropdown_icon" data-axis-color="FFFFFF" style="background-color:#fff">&nbsp &nbsp &nbsp</span>&nbsp White
                </a></li>
                <li><a class="dropdown-item" href="#">
                    <span class="dropdown_icon" data-axis-color="FF00FF" style="background-color:#f0f">&nbsp &nbsp &nbsp</span>&nbsp Magenta
                </a></li>
                <li><a class="dropdown-item" href="#">
                    <span class="dropdown_icon" data-axis-color="00FFFF" style="background-color:#0ff">&nbsp &nbsp &nbsp</span>&nbsp Cyan
                </a></li>
            </ul>
        </div>

        <div class="col-auto btn-group" style="padding: 0;">
            <button type="button" class="colorbar_font_size btn btn-outline-secondary btn-sm dropdown-toggle" title="Font Size"
            data-bs-toggle="dropdown">
                <span class='dropdown_icon'><%= font_size %></span>
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu">
            <% _.each([6,8,10,12,14,18,21,24,36,48],function(p){
                print ("<li><a class='dropdown-item' href='#'><span class='dropdown_icon'>"+p+"</span></a></li>")
            }); %>
            </ul>
        </div>

        <!-- <div class="col-auto input-group-sm">
            <label class="col-form-label col-form-label-sm">Length</label>
        </div> -->
        <div class="col-auto input-group-sm" style="padding-right: 0px;">
          <input type="number" class="colorbar-mark-length input-sm form-control"
            value="<%= mark_len %>" style="width:35px" min="0" title="Tick mark length"/>
        </div>
        <div class="col-auto input-group-sm" style="padding-left: 0px; margin-right: 3px;">
            <label class="col-form-label col-form-label-sm">px</label>
        </div>

        <div class="col-auto input-group-sm" style="padding-right: 0px;">
            <label class="col-form-label col-form-label-sm">Margin</label>
        </div>
        <div class="col-auto input-group-sm" style="padding-right: 0px;" title="Margin between the ticks mark and label">
            <input type="number" class="colorbar-tick-margin input-sm form-control"
            value="<%= tick_margin %>" style="width:35px" />
        </div>
        <div class="col-auto input-group-sm" style="padding-left: 0px;">
            <label class="col-form-label col-form-label-sm">px</label>
        </div>
    </div>
</form>
`;var vb=dt.View.extend({template:De.template(_b),initialize:function(t){this.render=De.debounce(this.render),this.models=t.models;var e=this;this.models.forEach(function(n){e.listenTo(n,"change:colorbar",e.render)})},events:{"submit .colorbar_form":"update_colorbar","change .btn":"dropdown_btn_changed","click .hide_colorbar":"hide_colorbar","keyup input[type='number']":"handle_keyup"},handle_keyup:function(t){t.which==13&&this.update_colorbar()},dropdown_btn_changed:function(t){A(t.target).closest("form").submit()},hide_colorbar:function(){this.models.forEach(function(t){t.hide_colorbar()})},update_colorbar:function(t){var e=A(".colorbar_form"),n=A(".label-position i:first",e).attr("data-position"),i=parseInt(A(".colorbar-thickness",e).val()),r=A(".colorbar_font_size span:first",e).text().trim(),s=A(".colorbar-axis-color span:first",e).attr("data-axis-color"),o=parseInt(A(".colorbar-num-ticks",e).val()),l=parseInt(A(".colorbar-mark-length",e).val()),h=parseInt(A(".colorbar-gap",e).val()),p=parseInt(A(".colorbar-tick-margin",e).val());return this.models.forEach(function(m){var y=m.get("lutBgPos"),E={show:!0,lutBgPos:y};n!="-"&&(E.position=n),i!="-"&&(E.thickness=i),r!="-"&&(E.font_size=r),s!="-"&&(E.axis_color=s),o!="-"&&(E.num_ticks=o),l!="-"&&(E.mark_len=l),h!="-"&&(E.gap=h),p!="-"&&(E.tick_margin=p),m.save_colorbar(E)}),!1},render:function(){var t={show:!1},e=!1,n;this.models.forEach(function(r){n=r.get("colorbar"),n&&(t.length?(t.position!=n.position&&(t.position="-"),t.thickness!=n.thickness&&(t.thickness="-"),t.font_size!=n.font_size&&(t.font_size="-"),t.axis_color!=n.axis_color&&(t.axis_color="-"),t.num_ticks!=n.num_ticks&&(t.num_ticks="-"),t.mark_len!=n.mark_len&&(t.mark_len="-"),t.gap!=n.gap&&(t.gap="-"),t.tick_margin!=n.tick_margin&&(t.tick_margin="-")):(t.position=n.position,t.thickness=n.thickness,t.font_size=n.font_size,t.axis_color=n.axis_color,t.num_ticks=n.num_ticks,t.mark_len=n.mark_len,t.gap=n.gap,t.tick_margin=n.tick_margin)),(!n||!n.show)&&(e=!0)}),(this.models.length===0||e)&&(t.show=!0),t.position=t.position??"right",t.thickness=t.thickness??15,t.font_size=t.font_size??10,t.axis_color=t.axis_color??"000000",t.num_ticks=t.num_ticks??7,t.mark_len=t.mark_len??3,t.gap=t.gap??5,t.tick_margin=t.tick_margin??2;var i=this.template(t);return this.$el.html(i),this}});const yb=dt.View.extend({className:"ztSliders",initialize:function(t){this.models=t.models,this.models.forEach(e=>{this.listenTo(e,"change:z_projection change:theT change:theZ change:z_start",this.render)}),this.render()},events:{"click .z-increment":"z_increment","click .z-decrement":"z_decrement","click .time-increment":"time_increment","click .time-decrement":"time_decrement","input #vp_t_slider input[type='range']":"slide_time","change #vp_t_slider input[type='range']":"slidestop_time","input #vp_z_slider input[type='range']":"slide_z","change #vp_z_slider input[type='range']":"slidestop_z","mousemove .z_start":"start_slider_mousemove","mousemove .z_end":"end_slider_mousemove"},start_slider_mousemove:function(t){let e=A(t.target),n=t.offsetX/e.width(),i=this.get_midfraction(e);n>i&&A(".z_end",e.parent()).css("pointer-events","all")},end_slider_mousemove:function(t){let e=A(t.target),n=t.offsetX/e.width(),i=this.get_midfraction(e);n<i&&e.css("pointer-events","none")},get_midfraction(t){let e=parseInt(A("#vp_z_slider .z_start").val()),n=parseInt(A("#vp_z_slider .z_end").val()),i=(e+n)/2,r=parseFloat(t.attr("min")),s=parseFloat(t.attr("max"));return(i-r)/(s-r)},slide_time(t){var e=t.target.value;A("#vp_t_value").text(e+"/"+(this.sizeT||"-"));var n=this.models.head().get("deltaT")[e-1];this.models.forEach(function(i){i.get("deltaT")[e-1]!=n&&(n=void 0)}),A("#vp_deltaT").text(this.formatTime(n))},slidestop_time(t){this.models.forEach(function(e){e.save("theT",t.target.value-1)})},slide_z(t){var e=this.models.allTrue("z_projection");let n=A(t.target),i=parseInt(t.target.value),r=parseInt(A("#vp_z_slider .z_start").val()),s=parseInt(A("#vp_z_slider .z_end").val());const o=n.hasClass("z_start");if(e){if(o){if(i>=s){n.val(s-1);return}}else if(i<=r){n.val(r+1);return}r=r+"-"+s}A("#vp_z_value").text(r+"/"+this.sizeZ)},slidestop_z(t){var e=this.models.allTrue("z_projection");let n=A("#vp_z_slider .z_start").val(),i=A("#vp_z_slider .z_end").val();this.models.forEach(function(r){e?r.save({z_start:n-1,z_end:i-1}):r.save("theZ",t.target.value-1)})},formatTime:function(t){if(typeof t>"u")return"";var e=t<0;t=Math.abs(t);function n(o){return o=o+"",o.split(".")[0].length===1?"0"+o:o}var i=parseInt(t/3600),r=parseInt(t%3600/60),s=(t%60).toFixed(2);return(e?"-":"")+n(i)+":"+n(r)+":"+n(s)},z_increment:function(t){return this.models.forEach(function(e){var n={};e.get("z_projection")?(n.z_start=e.get("z_start")+1,n.z_end=e.get("z_end")+1):n.theZ=e.get("theZ")+1,e.set(n,{validate:!0})}),!1},z_decrement:function(t){return this.models.forEach(function(e){var n={};e.get("z_projection")?(n.z_start=e.get("z_start")-1,n.z_end=e.get("z_end")-1):n.theZ=e.get("theZ")-1,e.set(n,{validate:!0})}),!1},time_increment:function(t){return this.models.forEach(function(e){e.set({theT:e.get("theT")+1},{validate:!0})}),!1},time_decrement:function(t){return this.models.forEach(function(e){e.set({theT:e.get("theT")-1},{validate:!0})}),!1},render_z_t_labels:function(){var t=this.models.getIfEqual("sizeZ"),e=this.models.getIfEqual("sizeT"),n=this.models.getAverage("theT"),i=this.models.getAverage("theZ"),r=this.models.allTrue("z_projection"),s=this.models.getDeltaTIfEqual();!t||t===1?A("#vp_z_slider",this.$el).hide():A("#vp_z_slider",this.$el).show();var o=this.models.getMin("sizeT");o===1?A("#vp_t_slider",this.$el).hide():A("#vp_t_slider",this.$el).show();var l=i+1;if(A("#vp_z_slider input[type='range']",this.$el).val(i+1),r){var h=Math.round(this.models.getAverage("z_start")),p=Math.round(this.models.getAverage("z_end"));l=h+1+"-"+(p+1),A("#vp_z_slider .z_end",this.$el).val(p+1),A("#vp_z_slider .z_start",this.$el).val(h+1)}else this.models.allEqual("theZ")||(l="-");A("#vp_z_value",this.$el).text(l+"/"+(t||"-"));var m=n+1,y;this.models.allEqual("theT")||(m="-"),A("#vp_t_slider input[type='range']",this.$el).val(n+1),A("#vp_t_value",this.$el).show().text(m+"/"+(e||"-")),(s===0||s)&&e>1?y=this.formatTime(s):y="",A("#vp_deltaT",this.$el).text(y)},render(){var t=this.models.getAverage("theZ"),e=Math.round(this.models.getAverage("z_start")),n=Math.round(this.models.getAverage("z_end")),i=this.models.getAverage("theT"),r=this.models.getIfEqual("sizeZ"),s=this.models.getIfEqual("sizeT"),o=this.models.getDeltaTIfEqual(),l=this.models.allTrue("z_projection"),N="";this.sizeZ=r,this.sizeT=s;var h=!1,p=r;(!r||r===1)&&(h=!0,p=1);var m=this.models.getMin("sizeT"),y=m===1;(o===0||o)&&s>1&&(N=this.formatTime(o));var E=Math.min(i,m),C=i+1,N;this.models.allEqual("theT")||(C="-");var F=t+1;l?(t=e,F=e+1+"-"+(n+1)):this.models.allEqual("theZ")||(F="-"),this.$el.html(`<div id="vp_z_label">Z</div>
        <div id="vp_z_value">${F}/${r||"-"}</div>
        <div id="vp_t_label">T</div>
        <div id="vp_t_value">${C}/${s||"-"}</div>
        <div id="vp_deltaT">${N}</div>
        
        <div id="vp_z_slider" style="${h?"display:none":""}">
            <input type="range" class="z_start" value="${t+1}" min="1" max="${p}" />
            <input type="range" class="z_end" value="${n+1}" min="1" max="${p}" style="${l?"":"display:none"}" />
            <button
              type="button"
              class="btn btn-link btn-sm z-decrement"
              title="Decrease Z-index">
                <i class="bi-chevron-down" style="font-size: 1rem"></i>
            </button>
            <button
              type="button"
              class="btn btn-link btn-sm z-increment"
              title="Increase Z-index">
                <i class="bi-chevron-up" style="font-size: 1rem"></i>
            </button>
        </div>
        
        <div id="vp_t_slider" style="${y?"display:none":""}">
            <input type="range" value="${E+1}" min="1" max="${m}" />
            <button
              type="button"
              class="btn btn-link btn-sm time-decrement"
              title="Decrease T-index">
                <i class="bi-chevron-left" style="font-size: 1rem"></i>
            </button>
            <button
              type="button"
              class="btn btn-link btn-sm time-increment"
              title="Increase T-index">
                <i class="bi-chevron-right" style="font-size: 1rem"></i>
            </button>
        </div>`)}}),bb=`    <div class="image-display-options rotation-controls">
        <button type="button" class="btn btn-outline-secondary btn-sm show-rotation" title="Rotate image">
            <span class="glyphicon glyphicon-repeat"></span>
            <i class="bi-arrow-clockwise" style="font-size: 1rem"></i>
            <span class="rotation_value"><%= rotation %></span> &deg;
        </button>

        <input type="range" class="rotation-slider" max="360" value="<%= rotation %>"></input>
        <button type="button" class="btn btn-outline-secondary btn-sm panel-rotation" title="Panel rotation">
            <i class="bi-arrow-90deg-right" style="font-size: 14px"></i>
            <span>90</span>&deg;
        </button>

    </div>
    <div class="btn-group image-display-options"
         title="Maximum intensity Z-projection <% if (proj_bytes_exceeded) { print('exceeds MAX_PROJECTION_BYTES: ' + max_projection_bytes ) }
         else { %>(choose range with 2 handles on Z-slider)<% } %>">
        <button type="button" class="btn btn-outline-secondary btn-sm z-projection
                <% if(z_projection) { %>zp-btn-down<% } else if (typeof z_projection == 'boolean') { %><% } else { %>ch-btn-flat<% }%>"
                <% if ((!z_projection && proj_bytes_exceeded) || z_projection_disabled) { %>disabled="disabled"<% } %>
                >

            <img src="<%= projectionIconUrl %>" />
        </button>
    </div>
    <div class="flipping">
        <button type="button" class="btn btn-group btn-outline-secondary btn-sm flipping_vertical" title="Flipping Vertical">
            <i class="bi bi-arrow-down-up" style="font-size: 14px"></i>
        </button>
        <button type="button" class="btn btn-group btn-outline-secondary btn-sm flipping_horizontal" title="Flipping Horizontal">
            <i class="bi bi-arrow-left-right"  style='font-size:14px'></i>
        </button>
    </div>

`,wb=`

<h5>ROIs
    <% if (panelCount > 0) { %>
        <span style="font-weight:normal; padding-left:64px"><%= roiCount %> ROIs selected</span>
    <% } %>
</h5>

<% if (panelCount > 0) { %>

<form class="form-inline" role="form">

    <div class="btn-group">

        <button type="button" class="shape-color btn btn-outline-secondary btn-sm dropdown-toggle" title="ROI Color"
            <% if (roiCount === 0) print('disabled') %>
            data-bs-toggle="dropdown">
            <span class="dropdown_icon" data-color="<%= color %>" style="background-color:#<%= color %>">&nbsp &nbsp &nbsp</span>
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu dropdownSelect colorpicker" role="menu">
            <!-- NB: dropdown_icon is picked on choosing dropdown, replaces icon in button above -->
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="000000" style="background-color:#000">&nbsp &nbsp &nbsp</span>&nbsp Black
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="0000FF" style="background-color:#00f">&nbsp &nbsp &nbsp</span>&nbsp Blue
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="00FF00" style="background-color:#0f0">&nbsp &nbsp &nbsp</span>&nbsp Green
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="FF0000" style="background-color:#f00">&nbsp &nbsp &nbsp</span>&nbsp Red
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="FFFF00" style="background-color:#ff0">&nbsp &nbsp &nbsp</span>&nbsp Yellow
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="FFFFFF" style="background-color:#fff">&nbsp &nbsp &nbsp</span>&nbsp White
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="FF00FF" style="background-color:#f0f">&nbsp &nbsp &nbsp</span>&nbsp Magenta
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="00FFFF" style="background-color:#0ff">&nbsp &nbsp &nbsp</span>&nbsp Cyan
            </a></li>
        </ul>
    </div>

    <div class="btn-group">
        <button type="button" class="line-width btn btn-outline-secondary btn-sm dropdown-toggle" title="Line Width: <%= lineWidth %>"
            <% if (roiCount === 0) print('disabled') %>
            data-bs-toggle="dropdown">
            <span class='dropdown_icon' data-line-width="<%= lineWidth %>"><%= lineWidth %> pt</span>
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu dropdownSelect lineWidth" role="menu">

            <% _.each([0.25, 0.5, 0.75, 1, 2, 3, 4, 5, 7, 10, 15, 20, 30],function(p){ %>
                <li><a class='dropdown-item' href='#'><span class="dropdown_icon" data-line-width='<%= p %>'><%= p %> pt</span></a></li>
            <% }); %>

        </ul>
    </div>

    <div class="btn-group">
        <button type="button" class="btn btn-sm btn-outline-secondary copyROIs" title="Copy All ROIs"
                <% if (roiCount === 0) print('disabled') %> >
            Copy
        </button>
        <button type="button" class="btn btn-sm btn-outline-secondary pasteROIs" title="Paste ROIs"
                <% if (!canPaste) print('disabled') %> >
            Paste
        </button>
        <button type="button" class="btn btn-sm btn-outline-secondary deleteROIs" title="Delete All ROIs"
                <% if (roiCount === 0) print('disabled') %> >
            Delete
        </button>
    </div>

    <div class="float-end"
        <% if (panelCount > 1) { %>
            title="Cannot draw ROIs on multiple panels. Select a single panel"
        <% } else if (panelCount === 0) { %>
            title="Select a panel to draw ROIs"
        <% } %> >
        <button class="edit_rois btn btn-sm btn-success"
            <% if (panelCount !== 1) { %> disabled="disabled"<% } %> >
            Edit
        </button>
    </div>

</form>

<form class="form-inline clearfix" role="form" style="margin-top: 10px;">
    <h5>Inset Panel</h5>

    <div class="btn-group">
        <button type="button" class="label-position btn btn-outline-secondary btn-sm dropdown-toggle"
                title="Position" data-bs-toggle="dropdown">
            <i data-position="right" class="bi-box-arrow-right dropdown_icon"></i>
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
            <!-- NB: dropdown_icon is picked on choosing dropdown, replaces icon in button above -->
            <li><a class="dropdown-item" href="#">
                <i data-position="left" class="bi-box-arrow-left dropdown_icon"></i> Left</a>
            </li>
            <li><a class="dropdown-item" href="#">
                <i data-position="top" class="bi-box-arrow-up dropdown_icon"></i> Top</a>
            </li>
            <li><a class="dropdown-item" href="#">
                <i data-position="right" class="bi-box-arrow-right dropdown_icon"></i> Right</a>
            </li>
            <li><a class="dropdown-item" href="#">
                <i data-position="bottom" class="bi-box-arrow-down dropdown_icon"></i> Bottom</a>
            </li>
        </ul>
    </div>

    <div class="btn-group">
        <button type="button" class="inset-color btn btn-outline-secondary btn-sm dropdown-toggle" title="Label Color"
            data-bs-toggle="dropdown">
            <span data-color="FFFFFF" style="background-color:#FFFFFF" class="dropdown_icon">&nbsp &nbsp &nbsp</span>
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu colorpicker" role="menu">
            <!-- NB: dropdown_icon is picked on choosing dropdown, replaces icon in button above -->
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="000000" style="background-color:#000">&nbsp &nbsp &nbsp</span>&nbsp Black
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="0000FF" style="background-color:#00f">&nbsp &nbsp &nbsp</span>&nbsp Blue
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="00FF00" style="background-color:#0f0">&nbsp &nbsp &nbsp</span>&nbsp Green
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="FF0000" style="background-color:#f00">&nbsp &nbsp &nbsp</span>&nbsp Red
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="FFFF00" style="background-color:#ff0">&nbsp &nbsp &nbsp</span>&nbsp Yellow
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="FFFFFF" style="background-color:#fff">&nbsp &nbsp &nbsp</span>&nbsp White
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="FF00FF" style="background-color:#f0f">&nbsp &nbsp &nbsp</span>&nbsp Magenta
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="00FFFF" style="background-color:#0ff">&nbsp &nbsp &nbsp</span>&nbsp Cyan
            </a></li>
            <li class="dropdown-divider"></li>
            <li><a class="dropdown-item" data-color="colorpicker" data-oldcolor="FFFFFF" href="#">
                <span class="dropdown_icon colorpickerOption">&nbsp &nbsp &nbsp</span>&nbsp More Colors...
            </a></li>
        </ul>
    </div>

    <div class="btn-group">
        <button type="button" class="inset-width btn btn-outline-secondary btn-sm dropdown-toggle" title="Inset line width"
            data-bs-toggle="dropdown">
            <span class='dropdown_icon' data-line-width="<%= lineWidth %>"><%= lineWidth %> pt</span>
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu dropdownSelect lineWidth" role="menu">

            <% _.each([0.25, 0.5, 0.75, 1, 2, 3, 4, 5, 7, 10, 15, 20, 30],function(p){ %>
                <li><a class='dropdown-item' href='#'><span class="dropdown_icon" data-line-width='<%= p %>'><%= p %> pt</span></a></li>
            <% }); %>

        </ul>
    </div>

    <button class="create_inset btn btn-sm btn-success float-end"
        title="Create a new Inset panel for each selected panel">
        Create Inset
    </button>
</form>

<form class="form-inline clearfix" role="form" style="margin-top: 10px;">
    <h5>Border</h5>

    <div class="btn-group">
        <button type="button" class="border-color btn btn-outline-secondary btn-sm dropdown-toggle" title="Border Color"
            data-bs-toggle="dropdown">
            <span  data-color="<%= borderColor %>" style="background-color:#<%= borderColor %>" class="dropdown_icon">&nbsp &nbsp &nbsp</span>
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu colorpicker" role="menu">
            <!-- NB: dropdown_icon is picked on choosing dropdown, replaces icon in button above -->
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="000000" style="background-color:#000">&nbsp &nbsp &nbsp</span>&nbsp Black
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="0000FF" style="background-color:#00f">&nbsp &nbsp &nbsp</span>&nbsp Blue
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="00FF00" style="background-color:#0f0">&nbsp &nbsp &nbsp</span>&nbsp Green
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="FF0000" style="background-color:#f00">&nbsp &nbsp &nbsp</span>&nbsp Red
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="FFFF00" style="background-color:#ff0">&nbsp &nbsp &nbsp</span>&nbsp Yellow
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="FFFFFF" style="background-color:#fff">&nbsp &nbsp &nbsp</span>&nbsp White
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="FF00FF" style="background-color:#f0f">&nbsp &nbsp &nbsp</span>&nbsp Magenta
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="00FFFF" style="background-color:#0ff">&nbsp &nbsp &nbsp</span>&nbsp Cyan
            </a></li>
            <li class="dropdown-divider"></li>
            <li><a class="dropdown-item" data-color="colorpicker" data-oldcolor="FFFFFF" href="#">
                <span class="dropdown_icon colorpickerOption">&nbsp &nbsp &nbsp</span>&nbsp More Colors...
            </a></li>
        </ul>
    </div>

    <div class="btn-group">
        <button type="button" class="border-width btn btn-outline-secondary btn-sm dropdown-toggle" title ="Line Width: <%= borderWidth %>" data-bs-toggle="dropdown">
            <span class='dropdown_icon' data-line-width="<%= borderWidth %>"><%= borderWidth %> pt</span>
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu dropdownSelect lineWidth" role="menu">

            <% _.each([0.25, 0.5, 0.75, 1, 2, 3, 4, 5, 7, 10, 15, 20, 30],function(p){ %>
                <li><a class='dropdown-item' href='#'><span class="dropdown_icon" data-line-width='<%= p %>'><%= p %> pt</span></a></li>
            <% }); %>

        </ul>
    </div>

    <div class="float-end" style="flex: 1 1 auto; padding-right: 0">
        <% if (showState){ %>
            <button type="button" class="show_border btn btn-sm btn-success ">Show</button>
        <% } else { %>
            <button type="button" class="remove_border btn btn-outline-secondary btn-sm">Hide</button>
        <% } %>
    </div>
</form>

<% } %>
`,Nd=`
    <div class="input-group input-group-sm float-start">
        <input type="text" class="label-text form-control input-sm"
                placeholder="Label" value="<% print(_.escape(l.text)) %>" />
        <% if (!edit){ %>
            <div class="input-group-btn">
                <button type="button" class="btn btn-sm dropdown-toggle dropdown-toggle-split"
                        data-bs-toggle="dropdown" title="Label from data...">
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu dropdown-menu-end">
                    <li role="presentation" class="dropdown-header">Create Label(s) From:</li>
                    <li role="presentation" class="dropdown-divider"></li>
                    <li><a class="dropdown-item" href="#" data-label="[image.name]">Image Name</a></li>
                    <li><a class="dropdown-item" href="#" data-label="[dataset.name]">Dataset Name</a></li>
                    <li title="Create labels from active Channels on the selected panel">
                        <a class="dropdown-item" href="#" data-label="[channels labels]">Channels (separate labels)</a>
                    </li>
                    <li title="Create labels from active Channels on the selected panel">
                        <a class="dropdown-item" href="#" data-label="[channels]">Channels (single label)</a>
                    </li>
                    <li title="Create labels from Tags on this Image in OMERO">
                        <a class="dropdown-item" href="#" data-label="[tags]">Tags</a>
                    </li>
                    <li title="Create labels from Map Annotations on this Image in OMERO">
                        <a class="dropdown-item" href="#" data-label="[key-values]">Key-Value Pairs</a>
                    </li>
                    <li title="Add a label that shows the current T-index">
                        <a class="dropdown-item" href="#" data-label="[time.index]">Time (T-index)</a>
                    </li>
                    <li class="add_time_label" title="Label shows time in milliseconds">
                        <a class="dropdown-item" href="#" data-label="[time.milliseconds]">Time (milliseconds)</a>
                    </li>
                    <li class="add_time_label">
                        <a class="dropdown-item" href="#" data-label="[time.secs]">Time (seconds)</a>
                    </li>
                    <li class="add_time_label">
                        <a class="dropdown-item" href="#" data-label="[time.mins]">Time (mins)</a>
                    </li>
                    <li class="add_time_label" title="Label shows time in mins:secs">
                        <a class="dropdown-item" href="#" data-label="[time.mins:secs]">Time (mins:secs)</a>
                    </li>
                    <li class="add_time_label">
                        <a class="dropdown-item" href="#" data-label="[time.hrs:mins:secs]">Time (hrs:mins:secs)</a>
                    </li>
                    <li class="add_time_label">
                        <a class="dropdown-item" href="#" data-label="[time.hrs:mins]">Time (hrs:mins)</a>
                    </li>
                    <li title="Add a label that shows the viewport X and Y in pixels">
                        <a class="dropdown-item" href="#" data-label="X: [x.pixel] Y: [y.pixel]">X and Y (pixel or unit)</a>
                    </li>
                    <li  title="Add a label that shows the current Z-index">
                        <a class="dropdown-item" href="#" data-label="Z: [z.pixel]">Z (pixel or unit)</a>
                    </li>
                    <li  title="Add a label that shows the current Zoom level">
                        <a class="dropdown-item" href="#" data-label="[zoom]">Zoom level (%)</a>
                    </li>
                </ul>
            </div>
        <% } %>
    </div>

    <div class="btn-group">
        <button type="button" class="font-size btn btn-outline-secondary btn-sm dropdown-toggle" title="Font Size"
            data-bs-toggle="dropdown">
            <span class='dropdown_icon'><%= l.size %></span>
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
        <% _.each([6,8,10,12,14,18,21,24,36,48],function(p){
            print ("<li><a class='dropdown-item' href='#'><span class='dropdown_icon'>"+p+"</span></a></li>")
        }); %>
        </ul>
    </div>

    <div class="btn-group">
        <button type="button" class="label-position btn btn-outline-secondary btn-sm dropdown-toggle"
                title="Position" data-bs-toggle="dropdown">
            <i data-position="<%= position %>" class="<%= position_icon_cls %> dropdown_icon"></i>
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
            <li role="presentation" class="dropdown-header">Inside Corners</li>
            <!-- NB: dropdown_icon is picked on choosing dropdown, replaces icon in button above -->
            <li><a class="dropdown-item" href="#">
                <i data-position="topleft" class="bi-box-arrow-in-up-left dropdown_icon"></i>
                Top Left</a>
            </li>
            <li><a class="dropdown-item" href="#">
                <i data-position="topright" class="bi-box-arrow-in-up-right dropdown_icon"></i>
                Top Right</a>
            </li>
            <li><a class="dropdown-item" href="#">
                <i data-position="bottomleft" class="bi-box-arrow-in-down-left dropdown_icon"></i>
                Bottom Left</a>
            </li>
            <li><a class="dropdown-item" href="#">
                <i data-position="bottomright" class="bi-box-arrow-in-down-right dropdown_icon"></i>
                Bottom Right</a>
            </li>

            <li role="presentation" class="dropdown-divider"></li>
            <li role="presentation" class="dropdown-header">Outside Edges</li>
            <li><a class="dropdown-item" href="#">
                <i data-position="left" class="bi-box-arrow-left dropdown_icon"></i> Left</a>
            </li>
            <li><a class="dropdown-item" href="#">
                    <i data-position="leftvert" class="bi-box-arrow-left dropdown_icon"></i>
                    Left vertical
                </a>
            </li>
            <li><a class="dropdown-item" href="#">
                <i data-position="top" class="bi-box-arrow-up dropdown_icon"></i> Top</a>
            </li>
            <li><a class="dropdown-item" href="#">
                <i data-position="right" class="bi-box-arrow-right dropdown_icon"></i> Right</a>
            </li>
            <li><a class="dropdown-item" href="#">
                <i data-position="rightvert" class="bi-box-arrow-right dropdown_icon"></i> Right Vertical</a>
            </li>
            <li><a class="dropdown-item" href="#">
                <i data-position="bottom" class="bi-box-arrow-down dropdown_icon"></i> Bottom</a>
            </li>
        </ul>
    </div>

    <div class="btn-group">
        <button type="button" class="label-color btn btn-outline-secondary btn-sm dropdown-toggle" title="Label Color"
            data-bs-toggle="dropdown">
            <span data-color="<%= l.color %>" style="background-color:#<%= l.color %>" class="dropdown_icon">&nbsp &nbsp &nbsp</span>
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu colorpicker" role="menu">
            <!-- NB: dropdown_icon is picked on choosing dropdown, replaces icon in button above -->
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="000000" style="background-color:#000">&nbsp &nbsp &nbsp</span>&nbsp Black
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="0000FF" style="background-color:#00f">&nbsp &nbsp &nbsp</span>&nbsp Blue
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="00FF00" style="background-color:#0f0">&nbsp &nbsp &nbsp</span>&nbsp Green
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="FF0000" style="background-color:#f00">&nbsp &nbsp &nbsp</span>&nbsp Red
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="FFFF00" style="background-color:#ff0">&nbsp &nbsp &nbsp</span>&nbsp Yellow
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="FFFFFF" style="background-color:#fff">&nbsp &nbsp &nbsp</span>&nbsp White
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="FF00FF" style="background-color:#f0f">&nbsp &nbsp &nbsp</span>&nbsp Magenta
            </a></li>
            <li><a class="dropdown-item" href="#">
                <span class="dropdown_icon" data-color="00FFFF" style="background-color:#0ff">&nbsp &nbsp &nbsp</span>&nbsp Cyan
            </a></li>
            <li class="dropdown-divider"></li>
            <li><a class="dropdown-item" data-color="colorpicker" data-oldcolor="<%= l.color %>" href="#">
                <span class="dropdown_icon colorpickerOption">&nbsp &nbsp &nbsp</span>&nbsp More Colors...
            </a></li>
        </ul>
    </div>

    <% if (edit){ %>
        <i id="sort_label_icon" class="bi-arrow-down-up" title="Drag to rearrange labels" ></i>
        <button type="button" title="Delete Label" class="close btn btn-sm btn-light delete-label" aria-hidden="true">&times;</button>
    <% } else { %>

        <button type="submit" class="btn btn-sm btn-success float-end">Add</button>

    <% } %>
`,xb=`
        <div class="labels-container">

            <% _.each(labels, function(l, i) { %>

                <form class="edit-label-form form-inline" role="form" data-key="<%= l.key %>">

                    <%= inner_template({l:l, position:position, position_icon_cls, edit:true}) %>

                </form>

            <% }); %>
        </div>
`,Eb=`

        <div class="vp_frame" style="width:<%= frame_w %>px; height:<%= frame_h %>px">
            <%= inner_template({imgs_css:imgs_css, opacity:opacity}) %>
        </div>
`,Sb=`
    <% _.each(imgs_css, function(css, i) { %>
    <img id='<%= css.id %>'
        class="vp_img<% if (css.pixelated) {%> pixelated<% } %>"
        style="opacity:<%= opacity %>; left:<%= css.left %>px; top:<%= css.top %>px;
            width:<%= css.width %>px; height:<%= css.height %>px;
            -webkit-transform-origin:<%= css['transform-origin'] %>;
            transform-origin:<%= css['transform-origin'] %>;
            -webkit-transform:<%= css['transform'] %>;
            transform:<%= css['transform'] %>"
        src='<%= css.src %>' />
    <% }); %>
`,Tb=`
<h5 style="margin-top:6px">
    View
    <span style="font-weight:normal; float:right; font-size: 15px">
        x: <span style="color: #aaa"><%= x %></span>
        y: <span style="color: #aaa"><%= y %></span>
        width: <span style="color: #aaa"><%= width %></span>
        height: <span style="color: #aaa"><%= height %></span>
    </span>
</h5>

<div class="btn-group">
    <button type="button" class="btn btn-sm btn-outline-secondary copyCropRegion" title="Copy crop region"
        <% if (!canCopyRect) print('disabled') %> >
        Copy
    </button>
    <button type="button" class="btn btn-sm btn-outline-secondary pasteCropRegion" title="Paste crop region"
        <% if (!canPasteRect) print('disabled') %> >
        Paste
    </button>
    <button type="button" class="btn btn-sm btn-outline-secondary reset-zoom-shape" title="Reset crop">
        Reset
    </button>
</div>

<button class="float-end crop-btn btn btn-sm btn-success">
    Crop
</button>
`,Cb="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAyxJREFUeNqslE9II3cUx7/TZCIienEmM5PfjM6tBzEFXUPQOTSMbggLxVwUPBiECmoLxUor+I8ecgiFLeaw4GpCwGXVUqR4K2jFQ6BQgj3G2PagicZDY+rK+icxvh62pmZZXbbs9/jjvQ/vvd/3PY6I8D71Ad6zrACgadqdAUSEq6urRwBKVqv1J47j7oxNp9OvgPfBCoVCe11d3edEVDo9PT222Wy/3ge13gNyV1dXj7e1tXUPDw/j8vISCwsLj5LJ5Or5+fljm832yxvBRARVVaGqKhhjsNvtrYyx516vl2KxGL2uaDRKPp+PNE37QRTFDsZYOZ+I/gNKkuRkjD3r7Oyk2dlZepvm5+dvwN9LkuSuACqKEvR6vbS0tETvqrW1NfL7/cQYe0JEr2zDcdzR8fHx38lk8p1tcnBwgHw+fw4gV56hpmmw2+1qfX19wuVy0djY2FsrC4VC5PF4SBTFtCAIH920zP07w08kSXpiGIba3t6OxcVFnJycoLW1FeFwuKKiUCiEzc1NFAoF+P1+ZLNZbG1t/XV4ePj1/v5+7MY2H8uyrHo8HnR3d6O3txerq6tYXl6GYRhoampCQ0MDNjY2UFVVBdM0MT4+DgA4OzvD3t6ecHR0ZAKIlX9ZFMUHDofjN9M0KRKJlFtbWVmhnp4e8vl8FAwGy+/xeJz8fj/pup4RBOEhY6yi5Q+tVuu3LS0tpq7rNdvb27BYLAgEAujv769oeXd3FxMTE8hms3A6ncjn85eJRCJ+cXHxTSaTiYOI4HA4fgwEAhVDn5ycpI6ODurq6qJoNEqJRIL6+vrI5XLR4OAgpVKpcuzo6Cg1Njb+XPYhY6xGluWvnE7nnyMjI5TL5crBU1NTZJomGYZBAwMDFaDp6Wlyu905RVFCjDF7xaaoqgpFUWyCIIw1Nzf/MTQ0dKdlZmZmyDCMF6IofifLsnB79bgbH95WqVSqKhaLnzHGvnC73Q1zc3MAgGAwiPX19UIqlXoK4DHP83uvn683Am+Ba4rF4qe6rn9ZW1sr7ezsRK6vr8M8z//+v+6hxWJ5yXFcOJ1OZziOa+Q4LsLz/Iv7cv4ZAMslUhVJh/y8AAAAAElFTkSuQmCC";var kb=dt.View.extend({initialize:function(t){this.listenTo(this.model,"change:selection",this.render),new Ib({model:this.model}),new Ab({model:this.model})},render:function(){var t=this.model.getSelected();this.vp&&(this.vp.clear().remove(),delete this.vp),this.ztsliders&&(this.ztsliders.remove(),delete this.ztsliders),t.length>0&&(this.vp=new Mb({models:t,figureModel:this.model}),A("#viewportContainer").append(this.vp.el),this.ztsliders=new yb({models:t}),A("#viewportContainer").append(this.ztsliders.el)),this.ipv&&this.ipv.remove(),t.length>0&&(this.ipv=new ub({models:t,figureModel:this.model}),this.ipv.render(),A("#info-tab-pane").append(this.ipv.el)),this.ctv&&this.ctv.remove(),t.length>0&&(this.ctv=new Rb({models:t}),A("#channelToggle").empty().append(this.ctv.render().el)),this.csv&&this.csv.clear().remove(),t.length>0&&(this.csv=new pb({models:t}),A("#channel_sliders").empty().append(this.csv.render().el))}}),Ab=dt.View.extend({model:Oi,roisTemplate:De.template(wb),el:A("#labelsTab"),initialize:function(t){this.listenTo(this.model,"change:selection",this.render),this.listenTo(this.model,"change:selection",this.addListeners),this.render()},addListeners:function(){var t=this;this.model.getSelected().forEach(function(e){t.listenTo(e,"change:shapes",t.render),t.listenTo(e,"change:border",t.render)})},events:{"click .edit_rois":"editRois","click .show_border":"showBorder","click .remove_border":"removeBorder","change .border-color":"changeBorderColor","change .border-width":"changeBorderStrokeWidth","click .copyROIs":"copyROIs","click .pasteROIs":"pasteROIs","click .deleteROIs":"deleteROIs","click .create_inset":"createInset","change .shape-color":"changeROIColor","change .line-width":"changeLineWidth"},createInset:function(){let t=this.model.getSelected();var e=A(".inset-color span:first",this.$el).attr("data-color"),n=A(".label-position i:first",this.$el).attr("data-position"),i=parseFloat(A("button.inset-width span:first",this.$el).attr("data-line-width"));t.forEach(r=>{let s=W1(),o=W1(),l=r.getViewportAsRect(),h=(r.getLastInsetTextIndex()||64)+1,m=Math.min(l.width,l.height)/3;var y=550,E=y,C=y,N=r.get("width")/r.get("height");N<=1?(C=y,E=y*N):(E=y,C=y/N);var F=r.get_vp_full_plane_css(r.get("zoom"),E,C),X=F.width/r.get("orig_width"),G=12,V=G*2,K=l.x+(l.width-m)/2,ae=l.y+(l.height-m)/2,de=K+(i/2+V)/X,g=ae+(i/2+V)/X;let H={type:"Rectangle",strokeWidth:i,strokeColor:"#"+e,fillColor:"#FFFFFF",fillOpacity:0,x:K,y:ae,width:m,height:m,id:o,textId:s,rotation:l.rotation||0};if(l.rotation&&!isNaN(l.rotation)){let ft=qr(de,g,K+m/2,ae+m/2,l.rotation);de=ft.x,g=ft.y}let re={type:"Text",strokeWidth:i,strokeColor:"#"+e,fillColor:"#000000",fillOpacity:0,x:de,y:g,id:s,fontSize:12,text:String.fromCharCode(h),textAnchor:"middle"};r.add_shapes([H,re]),r.setLastInsetTextIndex(h);var _e={text:String.fromCharCode(h),size:18,position:"topleft",color:e,inset:!0},Te=r.get("labels")||[],ye=[...Te];ye=ye.filter(ft=>!ft.inset),ye.push(_e);let le=r.toJSON(),Pe=Math.min(le.width,le.height);le.width=Pe,le.height=Pe,n=="bottom"?le.y=le.y+1.1*r.get("height"):n=="left"?le.x=le.x-1.1*le.width:n=="top"?le.y=le.y-1.1*le.height:le.x=le.x+1.1*r.get("width");let Le=le.orig_width,Ze=le.orig_height,je=Math.round(H.x+H.width/2),Je=Math.round(H.y+H.height/2);le.dx=Le/2-je,le.dy=Ze/2-Je;var Ye=Le/H.width,it=Ze/H.height;le.zoom=Math.min(Ye,it)*100,le.selected=!1,le.shapes=[],le.insetRoiId=o,le.lastInsetTextIndex=64,le.labels=ye,this.model.panels.create(le)})},changeLineWidth:function(){var t=A("button.line-width span:first",this.$el).attr("data-line-width"),e=this.model.getSelected();t=parseFloat(t,10),e.forEach(function(n){n.setROIStrokeWidth(t)})},changeROIColor:function(){var t=A("button.shape-color span:first",this.$el).attr("data-color"),e=this.model.getSelected();e.forEach(function(n){n.setROIColor(t)})},changeBorderColor:function(){var t=A("button.border-color span:first",this.$el).attr("data-color"),e=this.model.getSelected();e.forEach(function(n){n.setBorderColor(t)})},changeBorderStrokeWidth:function(){var t=A("button.border-width span:first",this.$el).attr("data-line-width"),e=this.model.getSelected();t=parseFloat(t,10),e.forEach(function(n){n.setBorderStrokeWidth(t)})},copyROIs:function(t){t.preventDefault();var e=this.model.getSelected(),n=[];e.forEach(function(i){var r=i.get("shapes");r&&r.forEach(function(s){n.push(A.extend(!0,{},s))})}),n.length>0&&this.model.set("clipboard",{SHAPES:n}),this.render()},showBorder:function(t){var e=A("button.border-width span:first",this.$el).attr("data-line-width"),n=A("button.border-color span:first",this.$el).attr("data-color");e=parseFloat(e,10),this.model.getSelected().forEach(i=>{i.show_border(n,e)}),t.preventDefault()},removeBorder:function(t){this.model.getSelected().forEach(e=>{e.remove_border()}),t.preventDefault()},rectToPolygon:function(t,e){let n=t.x+t.width/2,i=t.y+t.height/2,r=qr(t.x,t.y,n,i,e),s=qr(t.x+t.width,t.y,n,i,e),o=qr(t.x+t.width,t.y+t.height,n,i,e),l=qr(t.x,t.y+t.height,n,i,e);return[r,s,o,l].map(h=>h.x+","+h.y).join(", ")},pasteROIs:function(t){t.preventDefault();var e=this.model.getSelected(),n=this.model.get("clipboard"),i=!0;if(n){if(n.SHAPES)n=n.SHAPES;else if(n.CROP){var r=A("button.shape-color span:first",this.$el).attr("data-color"),s=parseFloat(A("button.line-width span:first",this.$el).attr("data-line-width")),o=n.CROP;if(o.rotation&&!isNaN(o.rotation)){var l=this.rectToPolygon(o,-o.rotation);n=[{type:"Polygon",strokeColor:"#"+r,points:l,strokeWidth:s}]}else n=[{type:"Rectangle",x:o.x,y:o.y,width:o.width,height:o.height,strokeColor:"#"+r,strokeWidth:s}]}else return;e.forEach(function(p){var m=p.add_shapes(n);m||(i=!1)});var h=e.length>1?"s":"";i||Zi("Paste Failure","Some shapes may be outside the visible 'viewport' of panel"+h+". Target image"+h+" may be too small or zoomed in too much. Try zooming out before pasting again, or paste to a bigger image.",["OK"]),this.render()}},deleteROIs:function(t){t.preventDefault();var e=this.model.getSelected();e.forEach(function(n){n.unset("shapes")}),this.render()},editRois:function(t){return Vn("roiModal"),!1},render:function(){var t=this.model.getSelected(),e=this.model.getSelected().length,n=0,i=this.model.get("clipboard"),r=i&&("SHAPES"in i||"CROP"in i),s,o,l,h=!1;t.forEach(function(m){var y=m.get("shapes");y&&(n+=y.length,y.forEach(function(E){s===void 0?s=E.strokeColor:s!=E.strokeColor&&(s=!1),o===void 0?o=E.strokeWidth:o!=E.strokeWidth&&(o=!1)})),l=m.get("border"),l!=null&&l.showBorder?m.show_border(l.color.replace("#",""),parseFloat(l.strokeWidth,10)):h=!0});var p={panelCount:e,color:s?s.replace("#",""):"FFFFFF",lineWidth:o||2,roiCount:n,canPaste:r,borderWidth:l?l.strokeWidth:5,borderColor:l?l.color.replace("#",""):"FFFF00",showState:h};A("#edit_rois_form").html(this.roisTemplate(p))}});const Dd={topleft:"bi-box-arrow-in-up-left",topright:"bi-box-arrow-in-up-right",bottomleft:"bi-box-arrow-in-down-left",bottomright:"bi-box-arrow-in-down-right",left:"bi-box-arrow-left",leftvert:"bi-box-arrow-left",top:"bi-box-arrow-up",right:"bi-box-arrow-right",rightvert:"bi-box-arrow-right",bottom:"bi-box-arrow-down"};var Ib=dt.View.extend({model:Oi,template:De.template(Nd),el:A("#labelsTab"),initialize:function(t){this.listenTo(this.model,"change:selection",this.render);var e={l:{text:"",size:12,color:"000000"},position:"top",edit:!1,position_icon_cls:Dd.top};A(".new-label-form",this.$el).html(this.template(e)),this.render()},events:{"submit .new-label-form":"handle_new_label","click .dropdown-menu a":"select_dropdown_option","click .markdown-info":"markdownInfo"},markdownInfo:function(t){t.preventDefault(),Vn("markdownInfoModal")},select_dropdown_option:function(t){t.preventDefault();var e=A(t.target),n=e.children(".dropdown_icon");if(e.attr("data-label")){A(".new-label-form .label-text",this.$el).val(e.attr("data-label"));return}n.length===0&&(n=e);var i=n.closest("li"),r=A("button.dropdown-toggle",i.parent().parent());if(n=n.clone(),n.hasClass("colorpickerOption")){var s=e.attr("data-oldcolor");xl.show({color:s,success:function(o){n.css({"background-color":o,"background-image":"none"}),o=o.replace("#",""),n.attr("data-color",o),A("span:first",r).replaceWith(n),r.trigger("change")}})}else A(".dropdown_icon",r).replaceWith(n),r.trigger("change")},handle_new_label:function(t){t.preventDefault();var e=A(t.target),n=A(".label-text",e).val(),i=A(".font-size",e).text().trim(),r=A(".label-position i:first",e).attr("data-position"),s=A(".label-color span:first",e).attr("data-color");if(n.length===0)return alert("Please enter some text for the label"),!1;var o=this.model.getSelected();if(n=="[channels labels]")return o.forEach(function(h){h.create_labels_from_channels({position:r,size:i})}),!1;if(n=="[key-values]")return Vn("labelsFromMapAnns",{position:r,size:i,color:s}),!1;if(n=="[tags]")return o.createLabelsFromTags({position:r,size:i,color:s}),!1;var l={text:n,size:parseInt(i,10),position:r,color:s};return o.forEach(function(h){h.add_labels([l])}),!1},render:function(){var t=this.model.getSelected();if(t.length===0)A(".new-label-form",this.$el).hide();else{A(".new-label-form",this.$el).show();var e=!1,n;t.forEach(function(h){n=h.get("deltaT"),n&&n.length>0&&(e=!0)}),e?A(".add_time_label",this.$el).removeClass("disabled"):A(".add_time_label",this.$el).addClass("disabled")}var i=this.sel_labels_panel;t.length>0&&(this.sel_labels_panel=new Ob({models:t}),this.sel_labels_panel.render(),A("#selected_panels_labels").empty().append(this.sel_labels_panel.$el)),i&&i.clear().remove();var r=this.scalebar_form,s=A("#scalebar_form");t.length>0&&(this.scalebar_form=new mb({models:t}),this.scalebar_form.render(),s.empty().append(this.scalebar_form.$el)),r&&r.remove();var o=this.colorbar_form,l=A("#colorbar_form");return t.length>0&&(this.colorbar_form=new vb({models:t}),this.colorbar_form.render(),l.empty().append(this.colorbar_form.$el)),o&&o.remove(),this}}),Ob=dt.View.extend({template:De.template(xb),inner_template:De.template(Nd),initialize:function(t){this.render=De.debounce(this.render),this.models=t.models;var e=this;this.models.forEach(function(n){e.listenTo(n,"change:labels change:theT",e.render)})},events:{"submit .edit-label-form":"handle_label_edit","change .btn":"form_field_changed","blur .label-text":"form_field_changed","click .delete-label":"handle_label_delete"},handle_label_delete:function(t){var e=A(t.target).parent(),n=e.attr("data-key"),i={};return n=De.escape(n),i[n]=!1,this.models.forEach(function(r){r.edit_labels(i)}),!1},form_field_changed:function(t){A(t.target).closest("form").submit()},handle_label_edit:function(t){var e=A(t.target),n=A(".label-text",e).val(),i=A(".font-size",e).text().trim(),r=A(".label-position i:first",e).attr("data-position"),s=A(".label-color span:first",e).attr("data-color"),o=e.attr("data-key");o=De.escape(o);var l={text:n,size:i,position:r,color:s},h={};return h[o]=l,this.models.forEach(function(p){p.edit_labels(h)}),!1},initialize_sortable:function(){var t=this,e=t.$el.find(".labels-container");e.length!==0&&(t.sortables&&t.sortables.forEach(function(n){n.destroy()}),t.sortables=[],e.each(function(n,i){var r=new St(i,{animation:150,fallbackOnBody:!0,onMove:function(s){return s.related===null||s.related!==s.from},onEnd:function(s){t.handle_sort(s)},filter:"input",preventOnFilter:!1});t.sortables.push(r)}))},clear:function(){return this.sortables&&this.sortables.forEach(function(t){t.destroy()}),this.sortables=[],this},handle_sort:function(t){var e=t.srcElement,n=e.querySelectorAll(".edit-label-form"),i=Array.from(n).map(s=>s.getAttribute("data-key")),r=i[0].split("_").pop();this.models.forEach(function(s){var o=s.get("labels"),l={},h=[];for(let E=0;E<o.length;E++){var p=o[E];if(p.position==r){var m=[p.text,p.size,p.color,p.position].join("_");l[m]=p}else h.push(p)}var y=[];for(let E=0;E<i.length;E++)i[E]in l&&(y.push(l[i[E]]),delete l[i[E]]);y.push(...h),s.set("labels",y)})},render:function(){var t=this,e={top:{},bottom:{},left:{},leftvert:{},right:{},rightvert:{},topleft:{},topright:{},bottomleft:{},bottomright:{}};this.models.forEach(function(i){De.each(i.get("labels"),function(r){var s=i.get_label_key(r),o=A.extend(!0,{},r);o.key=s,e[r.position][s]=o})}),this.$el.empty();var n="";return De.each(e,function(i,r){let s=Dd[r];i=De.map(i,function(l,h){return{...l,position_icon_cls:s}});var o={position:r,labels:i,position_icon_cls:s};i.length!==0&&(o.inner_template=t.inner_template,n+=t.template(o))}),t.$el.append(n),this.initialize_sortable(),this}}),Mb=dt.View.extend({template:De.template(Eb),inner_template:De.template(Sb),className:"imageViewer",initialize:function(t){this.render=De.debounce(this.render),this.figureModel=t.figureModel,this.full_size=250,this.models=t.models;var e=this;this.models.forEach(function(n){e.listenTo(n,"change:width change:height change:rotation change:z_projection change:z_start change:z_end change:min_export_dpi change:vertical_flip change:horizontal_flip",e.render),e.listenTo(n,"change:channels change:theZ change:theT",e.rerender_image_change)}),A("#vp_zoom_slider").attr({max:1e3}).on("input",n=>{let i=Math.round(parseFloat(n.target.value));this.update_img_css(i,0,0),A("#vp_zoom_value").val(i)}).on("change",n=>{let i=Math.round(parseFloat(n.target.value));this.zoom_avg=i;var r={zoom:i};i===100&&(r.dx=0,r.dy=0),this.models.forEach(function(s){s.save(r)}),this.rerender_image_change()}),this.$vp_zoom_value=A("#vp_zoom_value"),this.zmView=new zb({models:this.models,figureModel:this.figureModel}),A("#reset-zoom-view").append(this.zmView.el),A("#vp_zoom_value").on("keyup",(function(n){this.handle_user_zoom(n)}).bind(this)),this.render()},events:{"mousedown .vp_img":"mousedown","mousemove .vp_img":"mousemove","mouseup .vp_img":"mouseup"},mousedown:function(t){return this.dragging=!0,this.dragstart_x=t.clientX,this.dragstart_y=t.clientY,this.r=this.models.head().get("rotation"),!1},mouseup:function(t){var e=t.clientX-this.dragstart_x,n=t.clientY-this.dragstart_y;if(this.r!==0){var i=this.correct_rotation(e,n);e=i.dx,n=i.dy}return this.update_img_css(this.zoom_avg,e,n,!0),this.rerender_image_change(),this.dragging=!1,!1},mousemove:function(t){if(this.dragging){var e=t.clientX-this.dragstart_x,n=t.clientY-this.dragstart_y;if(this.r!==0){var i=this.correct_rotation(e,n);e=i.dx,n=i.dy}this.update_img_css(this.zoom_avg,e,n)}return!1},handle_user_zoom:function(t){if(t.type==="keyup"&&t.which!==13)return;var e=Math.round(parseFloat(t.target.value));if(isNaN(e))return;const n=document.getElementById("vp_zoom_slider");var i=parseFloat(n.min),r=parseFloat(n.max);e<i&&(e=i),e>r&&(e=r),n.value=e,this.update_img_css(e,0,0),this.zoom_avg=e;var s={zoom:e};e==100&&(s.dx=0,s.dy=0),this.models.forEach(function(o){o.save(s)}),this.rerender_image_change()},correct_rotation:function(t,e){if(t===0&&e===0)return{dx:t,dy:e};var n=Math.sqrt(t*t+e*e),i=Math.atan(e/t);t<0&&(i=Math.PI+i);var r=this.r*(Math.PI/180),s=i-r;return t=Math.cos(s)*n,e=Math.sin(s)*n,{dx:t,dy:e}},clear:function(){return A("#vp_zoom_slider").off(),A("#vp_zoom_value").off(),this.$vp_zoom_value.val(),this.zmView&&(this.zmView.remove(),delete this.zmView),this},update_img_css:function(t,e,n,i){const r=this.models.some(V=>V.get("vertical_flip")),s=this.models.some(V=>V.get("horizontal_flip"));r&&(n=-n),s&&(e=-e);var o=e/(t/100),l=n/(t/100),h=this.models.reduce(function(V,K){return V||K.is_big_image()},!1),p=this.models.getAverage("dx"),m=this.models.getAverage("dy");if(this.$vp_img){var y=this.$vp_frame.width()+2,E=this.$vp_frame.height()+2,C=this.models.head().get("orig_width")/y,N=this.models.head().get("orig_height")/E,F=Math.min(C,N);o=o*F,l=l*F,o+=p,l+=m;var X=o,G=l;h&&(X=e,G=n),this.$vp_img.css(this.models.head().get_vp_img_css(t,y,E,X,G)),this.$vp_zoom_value.val(t),i&&(typeof e>"u"&&(e=0),typeof n>"u"&&(n=0),this.models.forEach(function(V){V.save({dx:o,dy:l})}))}this.zmView.renderXYWH(t,o,l)},get_imgs_css:function(){var t=[],e=this.models.getAverageWH();if(e<=1)var n=this.full_size,i=this.full_size*e;else var i=this.full_size,n=this.full_size/e;return this.models.forEach(function(r){var s="image_"+Math.random();r.get_img_src().then(h=>{document.getElementById(s).src=h});var o=r.get_vp_img_css(r.get("zoom"),i,n);o.id=s;var l=r.get("min_export_dpi")>100;o.pixelated=!l,t.push(o)}),t},rerender_image_change:function(){var t={};t.imgs_css=this.get_imgs_css(),t.opacity=1/t.imgs_css.length;var e=this.inner_template(t);t.imgs_css.length>1&&this.$vp_img.remove(),this.$vp_frame.append(e),this.$vp_img=A(".vp_img",this.$el)},render:function(){this.zmView.render();var t=this.models.getAverageWH(),e=Math.round(this.models.getAverage("zoom"));if(t<=1)var n=this.full_size,i=this.full_size*t;else var i=this.full_size,n=this.full_size/t;var r=this.get_imgs_css(),s={};s.inner_template=this.inner_template,s.opacity=1/r.length,s.imgs_css=r,s.frame_w=i,s.frame_h=n;var o=this.template(s);this.$el.html(o),this.$vp_frame=A(".vp_frame",this.$el),this.$vp_img=A(".vp_img",this.$el),this.zoom_avg=e>>0,this.$vp_zoom_value.val(this.zoom_avg);var l=this.models.getMax("orig_width"),h=parseInt(l/250)*100;return h=Math.max(this.zoom_avg,h,1e3),A("#vp_zoom_slider").attr({max:h}).val(this.zoom_avg),this}}),zb=dt.View.extend({template:De.template(Tb),initialize:function(t){this.models=t.models,this.figureModel=t.figureModel,this.render()},events:{"click .reset-zoom-shape":"resetZoomShape","click .crop-btn":"show_crop_dialog","click .copyCropRegion":"copyCropRegion","click .pasteCropRegion":"pasteCropRegion"},copyCropRegion:function(t){t.preventDefault();var e=this.getXYWH();if([e.x,e.y,e.width,e.height].indexOf("-")>-1){alert("Failed to copy region");return}this.figureModel.set("clipboard",{CROP:e})},pasteCropRegion:function(t){t.preventDefault();var e=this.figureModel.get("clipboard"),n;if(e){if("CROP"in e)n=e.CROP;else if("SHAPES"in e){var i=e.SHAPES;if(i.forEach(function(r){!n&&r.type==="Rectangle"&&(n={x:r.x,y:r.y,width:r.width,height:r.height,rotation:r.rotation})}),!n){alert("No Rectangle found in shapes copied to clipboard");return}}this.models.forEach(function(r){r.cropToRoi(n)})}},show_crop_dialog:function(t){t.preventDefault(),Vn("cropModal")},resetZoomShape:function(t){t.preventDefault(),this.models.forEach(function(e){e.set("vertical_flip",!1),e.set("horizontal_flip",!1),e.cropToRoi({x:0,y:0,width:e.get("orig_width"),height:e.get("orig_height")})})},getXYWH:function(t,e,n){var i,r,s,o,l;this.models.forEach(function(p,m){var y=p.getViewportAsRect(t,e,n);m===0?(i=y.x,r=y.y,s=y.width,o=y.height,l=y.rotation):(i!==y.x&&(i="-"),r!==y.y&&(r="-"),s!==y.width&&(s="-"),o!==y.height&&(o="-"),l!==y.rotation&&(l="-"))});var h={x:i!=="-"?parseFloat(i,10):i,y:r!=="-"?parseFloat(r,10):r,width:s!=="-"?parseFloat(s,10):s,height:o!=="-"?parseFloat(o,10):o,rotation:l!=="-"?parseFloat(l,10):"-"};return h},renderXYWH:function(t,e,n){var i=this.getXYWH(t,e,n),r=this.figureModel.get("clipboard");i.canCopyRect=!0,i.canPasteRect=r&&("CROP"in r||"SHAPES"in r),[i.x,i.y,i.width,i.height].indexOf("-")>-1?i.canCopyRect=!1:(i.x=Math.round(i.x),i.y=Math.round(i.y),i.width=Math.round(i.width),i.height=Math.round(i.height),i.rotation=Math.round(i.rotation)),this.$el.html(this.template(i))},render:function(){this.renderXYWH()}}),Rb=dt.View.extend({tagName:"div",template:De.template(bb),initialize:function(t){this.models=t.models;var e=this;this.models.forEach(function(n){e.listenTo(n,"change:channels change:z_projection",e.render),e.listenTo(n,"change:vertical_flip change:horizontal_flip",e.loadButtonState)})},events:{"click .show-rotation":"show_rotation","click .z-projection":"z_projection","click .flipping_vertical":"flipping_vertical","click .flipping_horizontal":"flipping_horizontal","input .rotation-slider":"rotation_input","change .rotation-slider":"rotation_change","click .panel-rotation":"rotate_panel_90"},rotation_input:function(t){let e=parseInt(t.target.value);this.models.forEach(function(n){const i=n.get("vertical_flip")?-1:1,r=n.get("horizontal_flip")?-1:1;A(".vp_img").css({transform:"scaleX("+r+") scaleY("+i+") rotate("+e+"deg)"})}),A(".rotation_value").text(e)},rotation_change:function(t){let e=parseInt(t.target.value);this.rotation=e,this.models.forEach(function(n){n.save({rotation:e})})},flipping_vertical:function(t){const e=A(t.currentTarget);e.toggleClass("active");const n=e.hasClass("active");this.models.forEach(function(i){i.save("vertical_flip",n)})},flipping_horizontal:function(t){const e=A(t.currentTarget);e.toggleClass("active");const n=e.hasClass("active");this.models.forEach(function(i){i.save("horizontal_flip",n)})},loadButtonState:function(){const t=this.$(".flipping_vertical"),e=this.$(".flipping_horizontal");this.models.forEach(function(n){n.get("vertical_flip")?t.addClass("active"):t.removeClass("active"),n.get("horizontal_flip")?e.addClass("active"):e.removeClass("active")})},rotate_panel_90:function(t){t.preventDefault(),this.models.forEach(function(e){var n=e.rotatePanel90();A(".vp_img").css({transform:"rotate("+n+"deg)"}),A(".rotation_value").text(n),A(".rotation-slider").val(n)})},z_projection:function(t){var e=A(t.currentTarget).hasClass("ch-btn-flat");this.models.forEach(function(n){var i;e?i=!0:i=!n.get("z_projection"),n.set_z_projection(i)})},show_rotation:function(t){this.$el.find(".rotation-controls").toggleClass("rotation-controls-shown")},render:function(){var t,e=0,n=0,i=0,r,s,o=[],l;if(this.models){this.models.forEach(function(E,C){o.push(E.isMaxProjectionBytesExceeded()),r=E.get("rotation"),e=Math.max(e,r),n+=r,i+=E.get("sizeZ"),C===0?s=!!E.get("z_projection"):(l=!!E.get("z_projection"),l!==s&&(s=void 0))});let m=o.some(E=>E);var h=n/this.models.length;h===e?r=h:r="-",this.rotation=h;var p=this.models.any(function(E){return E.is_big_image()});const y=i===this.models.length||p;t=this.template({max_projection_bytes:MAX_PROJECTION_BYTES,proj_bytes_exceeded:m,projectionIconUrl:Cb,z_projection_disabled:y,rotation:r,z_projection:s}),this.$el.html(t)}return this.loadButtonState(),this}});const Fb=dt.Model.extend({defaults:function(){return{undo_pointer:-1}},initialize:function(t){this.figureModel=t.figureModel,this.figureModel.on("change:figureName change:paper_width change:paper_height change:page_count change:legend",this.handleChange,this),this.listenTo(this.figureModel,"reset_undo_redo",this.resetQueue),this.undoQueue=[],this.undoInProgress=!1,this.undo_functions=[],this.redo_functions=[]},resetQueue:function(){this.undoQueue=[],this.set("undo_pointer",-1),this.canUndo()},canUndo:function(){return this.get("undo_pointer")>=0},undo:function(){var t=this.get("undo_pointer");t<0||(this.undoQueue[t].undo(),this.set("undo_pointer",t-1))},canRedo:function(){return this.get("undo_pointer")+1<this.undoQueue.length},redo:function(){var t=this.get("undo_pointer");t+1>=this.undoQueue.length||(this.undoQueue[t+1].redo(),this.set("undo_pointer",t+1))},postEdit:function(t){var e=this.get("undo_pointer");this.undoQueue.length>e+1&&(this.undoQueue=this.undoQueue.slice(0,e+1)),this.undoQueue.push(t),this.set("undo_pointer",e+1)},listenToCollection:function(t){var e=this;t.each(function(n){e.listenToModel(n)}),t.on("add",function(n){e.listenToModel(n),e.undoInProgress||e.handleAdd(n,t)}),t.on("remove",function(n){e.undoInProgress||e.handleRemove(n,t)})},handleRemove:function(t,e){var n=this;n.postEdit({name:"Undo Remove",undo:function(){n.undoInProgress=!0,e.add(t),n.figureModel.notifySelectionChange(),n.undoInProgress=!1},redo:function(){n.undoInProgress=!0,t.destroy(),n.figureModel.notifySelectionChange(),n.undoInProgress=!1}})},handleAdd:function(t,e){var n=this;n.postEdit({name:"Undo Add",undo:function(){n.undoInProgress=!0,t.destroy(),n.figureModel.notifySelectionChange(),n.undoInProgress=!1},redo:function(){n.undoInProgress=!0,e.add(t),n.figureModel.notifySelectionChange(),n.undoInProgress=!1}})},listenToModel:function(t){t.on("change",this.handleChange,this)},handleChange:function(t){var e=this;if(!e.undoInProgress){var n=["selected","id"],i={},r={},s;for(s in t.changed)n.indexOf(s)<0&&(i[s]=t.previous(s),r[s]=t.get(s));if(De.size(r)!==0){e.undo_functions.push(function(){t.save(i)}),e.redo_functions.push(function(){t.save(r)});var o=function(h){h.forEach(function(p,m){m===0?e.figureModel.setSelected(p,!0):e.figureModel.addSelected(p)})},l=function(h){for(var p=[],m=h.length-1;m>=0;m--)p.push(h[m]);var y=e.figureModel.getSelected();return function(){e.undoInProgress=!0;for(var E=0;E<p.length;E++)p[E]();o(y),e.undoInProgress=!1}};typeof e.createEditTimeout<"u"&&clearTimeout(e.createEditTimeout),e.createEditTimeout=setTimeout(function(){e.postEdit({name:"Undo...",undo:l(e.undo_functions),redo:l(e.redo_functions)}),e.undo_functions=[],e.redo_functions=[]},10)}}}}),Nb=dt.View.extend({el:A("#edit_actions"),events:{"click .undo":"undo","click .redo":"redo"},keyboardEvents:{"mod+z":"undo","mod+y":"redo"},initialize:function(){this.model.on("change",this.render,this),this.undoEl=A(".undo",this.$el),this.redoEl=A(".redo",this.$el),this.render()},render:function(){return this.model.canUndo()?this.undoEl.removeClass("disabled"):this.undoEl.addClass("disabled"),this.model.canRedo()?this.redoEl.removeClass("disabled"):this.redoEl.addClass("disabled"),this},modal_visible:function(){return A("div.modal.show").length>0},undo:function(t){t.preventDefault(),!this.modal_visible()&&this.model.undo()},redo:function(t){t.preventDefault(),!this.modal_visible()&&this.model.redo()}});function Db(t){var e=null;if(document.cookie&&document.cookie!="")for(var n=document.cookie.split(";"),i=0;i<n.length;i++){var r=n[i].trim();if(r.substring(0,t.length+1)==t+"="){e=decodeURIComponent(r.substring(t.length+1));break}}return e}var Lb=Db("csrftoken");function Pb(t){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(t)}function $b(t){var e=document.location.host,n=document.location.protocol,i="//"+e,r=n+i;return t==r||t.slice(0,r.length+1)==r+"/"||t==i||t.slice(0,i.length+1)==i+"/"||!/^(\/\/|http:|https:).*/.test(t)}function Bb(){A.ajaxSetup({cache:!1,beforeSend:function(t,e){!Pb(e.type)&&$b(e.url)&&t.setRequestHeader("X-CSRFToken",Lb)}})}const ii=new Oi;window.figureModel=ii;const Ld="7.2.2.dev0";console.log("RELEASE_VERSION",Ld);document.getElementById("release_version").innerHTML=Ld;dt.ajaxSync=dt.sync;dt.getSyncMethod=function(t){return t.syncOverride||t.collection&&t.collection.syncOverride?function(e,n,i,r){ii.set("unsaved",!0)}:dt.ajaxSync};dt.sync=function(t,e,n,i){return dt.getSyncMethod(e).apply(this,[t,e,n,i])};new Ly({model:ii});new kb({model:ii});PING_URL&&setInterval(function(){fetch(PING_URL)},6e4);var Pd=new Fb({figureModel:ii});new Nb({model:Pd});Pd.listenToCollection(ii.panels);let $d={"":"index","new(/)":"newFigure","recover(/)":"recoverFigure","open(/)":"openFigure","file/:id(/)":"loadFigure"};APP_SERVED_BY_OMERO||($d={"omero-figure(/)":"index","omero-figure/new(/)":"newFigure","omero-figure/recover(/)":"recoverFigure","omero-figure/open(/)":"openFigure","omero-figure/file/:id(/)":"loadFigure"});var Wb=dt.Router.extend({routes:$d,index:function(){if(console.log("index"),window.location.search.length>1){const e=new URLSearchParams(window.location.search.substring(1));if(e.has("file")){const n=e.get("file");var t=function(){ii.load_from_url(n)};ii.checkSaveAndClear(t);return}}_s();var t=()=>{Vn("welcomeModal")};ii.checkSaveAndClear(t)},openFigure:function(){console.log("openFigure..."),_s();var t=function(){Vn("openFigureModal")};ii.checkSaveAndClear(t)},recoverFigure:function(){_s(),ii.recoverFromLocalStorage()},newFigure:function(){console.log("newFigure"),_s();var t=function(){Vn("addImagesModal")};if(window.location.search.length>1){var e=window.location.search.substring(1).split("&"),n=e.reduce(function(i,r){return r.split("=")[0]==="image"&&i.push(r.split("=")[1]),i},[]);n.length>0&&(t=function(){ii.addImages(n)})}ii.checkSaveAndClear(t)},loadFigure:function(t){console.log("LoadFigure",t),_s();var e=parseInt(t,10),n=function(){ii.load_from_OMERO(e)};ii.checkSaveAndClear(n)}});let Bd={pushState:!0};APP_ROOT_URL&&(Bd.root=APP_ROOT_URL);Bb();const Wd=new Wb;Ny({model:ii,app:Wd});dt.history.start(Bd);A(document).on("click","a",function(t){var e=A(this).attr("href");if(e.substring(0,BASE_WEBFIGURE_URL.length)===BASE_WEBFIGURE_URL){t.preventDefault();let n=APP_SERVED_BY_OMERO?"/":"/omero-figure/";e=e.replace(BASE_WEBFIGURE_URL,n),Wd.navigate(e,{trigger:!0})}});
//# sourceMappingURL=index-CkmneBeE.js.map
